Q:

Which shelf holds the most weight

I am new to this forum so please bear with me.
My wife wants a "retro" shelf in the kitchen and wants it as figure B on the image.
Is there a difference in "strength" (i.e., able to hold more or less weight) between figure A or B.

Shelf B will have on the bottom the same flange as it will have on the top (and wall) which will be connected with 3 strong 5mm bolts through the shelf.
edit: this is the idea but with 3 instead of 2 flange sets

A:

If this is going into drywall the weakest point is probably the attachment of the wall flange to the wall.  With regards to this joint design B is substantially better than design A, since in A the shelf can pivot out from the wall and apply a tension force to the anchors (i.e. pulling them out).  In design B the shelf will be against the wall and the force on the anchors will mainly be in shear (i.e. pulling them down), where they are stronger (unless the load on the shelf is significantly uneven biased towards the front).
Even if this is attached to the structure of the building I still think I would prefer design B, as you could get compression of the drywall over time with design A, leading to a wobbly shelf tilting out from the wall.
If this is attached to masonry or concrete with appropriate anchors I think either design is more than strong enough.

A:

It depends.
Shelf B has a failure mode not available to Shelf A; specifically, the joint between the brackets and the shelf is in tension, so it can separate.
On the other hand, if both shelves fail because the brackets pull out of the wall or the shelf breaks then this failure mode is irrelevant.
There are two ways round this failure mode.  One solution is to use enough screws from the bracket into the shelf that the construct will support the maximum load that is likely to be applied (that will be difficult if the shelf is chipboard).  The other is to have a metal bearer under the shelf and bolt through the shelf into the bracket (with large enough bolts).
In conclusion: There is no fundamental reason that you should not be able to provide a shelf of adequate strength of the design required by SWMBO (and if my experience is anything to go by, any additional hassle will be much less than that involved in changing the design).

