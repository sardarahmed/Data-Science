Q:

How many dowels is enough to support this joint?

I'm going to take a crack at building the shelf pictured below, except I'm just going to make the top section, since I only want one level.
I was thinking of using a french cleat behind the length of the taller board to mount the shelf to the wall, but I realized that will hang the entire weight carried by the shelf off of the joints where that board attaches to the end frames (yellow highlight).
My plan was to use dowels at all the joints, but I'm not sure how much weight they can carry. If that board is 1" x 2", how many of what size dowel should I use?

A:

Assuming a heavy load of books, the connection is can easily be uspported using two 3/8" x 2" wooden dowels. The 2" length insures that the dowels are firmly held in the framing members on each side.  The 3/8" width allows 3/16" of wood on each side or the dowel to the face. You should arrange the two dowels with vertically near the top and bottom of the framing board to resist rotation in the connection of the boards.
You have not described what type of connection you will use for the other joints. Another option is to construct mortise and tenon connections with shoulders to hide the actual joint on both the rear and the side frames.  

