Q:

Why would it be necessary to take a brand name medication if a generic drug is available?

Many prescription pads have a way for the doctor to indicate if a brand name medication must be dispensed instead of the generic version (e.g. a line where they can write something like "brand necessary", "dispense as written", or "no substitution").
Why would it be necessary to prescribe a brand name medication if a generic version is available?  According to the FDA:

Generic drugs are required to have the same active ingredient, strength, dosage form, and route of administration as the brand name product.

The FDA does say that "some variability can and does occur during manufacturing", but that applies to both generics and brand name medications:

These studies compared the absorption of brand name and generic drugs into a person’s body. [...] The average difference in absorption into the body between the generic and the brand name was 3.5 percent. Some generics were absorbed slightly more, some slightly less. This amount of difference would be expected and acceptable, whether for one batch of brand name drug tested against another batch of the same brand, or for a generic tested against a brand name drug. In fact, there have been studies in which brand name drugs were compared with themselves as well as with a generic. As a rule, the difference for the generic-to-brand comparison was about the same as the brand-to-brand comparison.

If the active ingredient is the same in both the brand name medication and the generic version, then the only difference is the inactive ingredients, which by definition do not affect the efficacy of the drug.

A:

...the inactive ingredients, which by definition do not affect the efficacy of the drug.

They can however have an effect on other physiological aspects of a human body, that's why, as far as I know, there can be a difference between various brands or generics.
Answering your question:

Sometimes patients have allergies towards a component of a generic (for example its colourant) in which case the doctor has a medical reasoning to pick a brand drug.
One other reason for a doctor to prescribe a specific brand (or to
disallow others or generics) is that he has made good experience
with that specific one.
Another reason is that he is following
studies or guidelines which suggest or require a specific drug in
order to be compliant, which is sometimes necessary, because
Some health insurances only pay for the patient a certain brand drug (though they also often prefer cheaper generics, as far as I know)
If the health insurance pays any kind of drug, or the patient is paying on his own, then the doctor could prescribe a specific drug also because he was convinced by pharmaceutical representatives to try out new drugs they advertise
Also, if paid by the patient, those new drugs can be prescribed and the results could be collected (anonymously) and handed to the pharmaceutical companies (for evaluation) which in turn pay the doctor some legal compensation
Well and there are gifts:

A recent letter in the Journal of the American Medical Association illustrates how effective drug advertising can be. It describes a patient who came into the hospital with an infected insect bite. The intern who first saw the patient first sensibly wanted to prescribe a nice, inexpensive penicillin, which is the drug of choice for a minor infection. But the resident overruled the intern and favored a more "modern" choice for this "severely" ill patient. He decided the patient had to have a brand-new antibiotic…at $183 a day.
The attending physician who supervised the house officers checked into the incident. It turned out the resident had just been wined and dined by the drug representative whose company made the new antibiotic.

https://www.scu.edu/ethics/focus-areas/bioethics/resources/prescribing-under-the-influence/
More to this topic:

“Gift-giving is an extremely effective marketing tool because it triggers in the recipient the basic human tendency to reciprocate whether the recipient is conscious of it or not,”

http://jnci.oxfordjournals.org/content/94/15/1119.full
These are a few points that came into my mind from my experience and/or conversations (as a medical student) with doctors in clinics and doctor's offices in Germany.

