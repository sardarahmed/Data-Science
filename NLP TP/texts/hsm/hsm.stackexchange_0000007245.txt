Q:

How did Lagrange get his equation (the so-called Euler-Lagrange equation)

The variational principle is named after Hamilton, instead of Lagrange. 
So it seems that he did not derive his equation by the variational method. 

A:

Lagrange derived it in his MÃ©chanique Analytique. Dugas summarizes it in his History of Mechanics pp. 342-344:

