Q:

Was Lebesgue differentiation theorem the motivation for Vitali's, Riesz's and Hardy-Littlewood's results used to prove it?

I have been reading about the Lebesgue differentiation theorem from Terence Tao's book and came across a bunch of things. In his book, Tao uses the Vitali Covering lemma (finite), Hardy-Littlewood maximal inequalities, and rising sun lemma to prove the Lebesgue differentiation theorem.
This answer gives a chronology of various proofs of the differentiation theorem. What I am interested in is the context under which the covering lemma, say appears.
Were Vitali, Riesz, Hardy and Littlewood developing their theorems and inequalities in order to prove the differentiation theorem, or do they fit in some larger picture?
I have seen the maximal function being used in the context of harmonic analysis, although I don't understand how. So, was Hardy working on harmonic analysis when he defined his maximal function?
In short, what were these mathematicians working on when they discovered the theorems above? Also, how do other covering lemmas (the infinite version or the Besicovitch covering theorem) fit into this picture?

A:

Vitali and Riesz were working on differentiation specifically, Hardy and Littlewood were far from it. Vitali writes in Sui gruppi di punti e sulle funzioni di variabili reali (1908) (On sets of points and functions of real variables) after proving the covering lemma:

"In my note "On integral functions", published in
1905 by the Royal Academy of Sciences of Turin I gave the necessary and sufficient condition for a function of one real variable to be an integral. The demonstration methods I used in that note cannot be extended to cases of two or more variables. In this chapter, I modify those methods to make them also applicable to those cases. The results of the previous chapter are useful for this purpose. Because it is easy to understand how to extend the result of my cited note to the functions of several variables, I will only indicate this extension to functions of two variables in the last § of this chapter." [edited Google translation]

Riesz's paper's title is self-explanatory: Sur l'existence de la dérivée des fonctions monotones et sur quelques problèmes qui s'y rattachent (1932) (On the existence of the derivative of monotone functions and some problems associated with it).
Hardy and Littlewood state at the beginning of their paper A maximal theorem with function-theoretic applications (1930) that they were trying to prove an integral inequality for analytic functions, very far from the differentiation theorem. The maximal function came up in the middle, like things do sometimes, and they motivate it with averaging in cricket games, not measure theoretic generalities.
After Riesz it became something of a sport to come up with proofs of the theorem of some desirable form, see Were there proofs of the Lebesgue Differentiation Theorem without using maximal functions?

