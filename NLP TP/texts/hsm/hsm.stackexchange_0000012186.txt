Q:

How did Khayyam calculate the year so accurately?

Regarding the Islamic mathematician and astronomer Omar Khayyam, known (among other things) for his accurate calculation of the year, quoted from https://www.famousscientists.org/omar-khayyam/

Khayyam found that 1,029,983 days made 2,820 years. This gives a tropical year length of 365.2422 days to seven significant figures.

I haven't been able to find out how he did such a thing.  Clearly he did not wait 2820 years and count the days.  So what was the method?

A:

Khayyam simply did not achieve this precision. It is an urban myth, typically lacking any proper sources and references. Only occasionaly one finds mentions such as

"the Persian calendar using the 2820-year arithmetic algorithm, as
suggested by Ahmad Birashk and others (and mistakenly attributed to
Omar Khayyam)"..
[1]

In a paper at the arxiv the author states that

The length of the year in the Iranian calendar, as conceived by
Khayyam et al., is 365.2424.. days (Youschkevitch & Rosenfeld 1973), a
logical consequence of the intercalation system: 365 + 8 / 33 = 365.2424.

Section 7 of the paper is "The putative 2820-year cycle" where  he elaborates:

recently an extremely precise value for the duration of the year
(365.24219858156 days) has been attributed to Khayyam (O’Connor &
Robertson 1999), although it is supported by no historical source, as
far as we know. We think that this may be a spurious value resulting
from the erroneous 2820-year cycle suggested recently.

In an other paper at the arxiv there is just a hint at the issue mentioning The  researches  of  two  modern  Iranian  scholars. These  two  scholars  are  Zabīh Behrūz and  Ahmad  Birashk :

They  have  accepted a  system  of  intercalation  based on a 2820
years principal cycle with its own 128 years sub- cycles, 29 or 33
years sub-sub-cycles, “tetraennial”s, and “ pentaennial”s.[2]

So it appears that they relied on modern 19th c. data to obtain a cycle with an integer number of days and next proceeded to implement an intercalation scheme that matches older practices. (For the record Meton solved an analogous problem for the luni-solar calendar). There is no good explanation how to  explain the 4 years added at the end of a series of 22 repetions of 128 years sub cycles, except that the number 2820 is known in advance. The precision needed to arrive at it does not seem possible without sophisticated time keeping devices and observational instruments as the equinox should be clocked with an error less than a half of second. (Averaging data could produce by chance the decimals needed.)

