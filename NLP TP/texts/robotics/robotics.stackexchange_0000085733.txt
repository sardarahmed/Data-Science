Q:

Create publisher from string parameter dynamically

Hi, I searched on the internet without any luck.
Is there any way in ROS/C++ to solve the following problem? :
I want to have a launch file in which I want to specify a parameter tags in the following way:
<param name="tags" type="string" value="1, 15, 189"/>
and then in the .cpp file associated I would like to create different publishers (or maybe it is easier to create an array of publishers) which will publish on the topics:
/pose/tag_1 /pose/tag_15 /pose/tag_189
(the conversion from string to an array of ints is not an issue. I know how to do it.
Of course, I want that the tags parameter can be changed from the launch file and therefore the creation of the topics is in some way dynamic.
Thanks for your time.

Originally posted by fabbro on ROS Answers with karma: 115 on 2018-03-08
Post score: 0

A:

You can access ROS param's within a node using rosparam: http://wiki.ros.org/roscpp/Overview/Parameter%20Server
You could also pass in the topic names via args or params in the node's local namespace. See http://wiki.ros.org/roslaunch/XML/node

Example:
<node name="my_node" pkg="my_node_pkg" type="my_node" 
  args="tag_1, tag_2, tag_189" 
/>

or
<node name="my_node" pkg="my_node_pkg" type="my_node" 
  <param name="tags" value="1, 15, 189" />
/>

Edit:
Inside your node, once you've retrieved the args/params, you can do something like this (untested):
...
// Assuming some iterable object 'tags' containing your args/param in some format
ros::NodeHandle n;

std::vector<ROS::Publisher> publisherVec;
for (int i=0; i<tags.size(); i++) {
    publisherVec.push_back(<n.advertise<std_msgs::String>(tags[i], 100));
}
...

Originally posted by josephcoombe with karma: 697 on 2018-03-08
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by fabbro on 2018-03-08:
Hi, thanks for the fast reply but this is not what I asked. I know how to write the parameters in the launch file. My problem was to then create some sort of array of publishers.
Anyway, I solved my problem I think/hope and I will post the solution soon.
Thanks again.

