Q:

PNI Digital Compass Driver

I've recently acquired a PNI Fieldforce TCM-XB and would like to interface it with ROS. It communicates over serial using a binary protocol described in their datasheet. The protocol appears to be proprietary, but I am not familiar enough with the protocols used by other manufacturers to know for sure.
Basic searches in the ROS package database haven't turned up any existing packages. Before I take the time to write one, has anyone else written a ROS node for communicating with this compass?
Update: It's not completely polished, but here is the fieldforce_tcm node that I wrote. It is written in Python and publishes a nav_msgs/Imu message with the orientation field populated.

Originally posted by mkoval on ROS Answers with karma: 524 on 2011-07-09
Post score: 3

A:

I'm not aware of any PNI drivers.  We would have had one for you, but I wrote that one for our custom FPGA solution.  ;)  No getting that one out.
It shouldn't be too difficult to write using pyserial or boost::asio.  If you remember to make it generic for all their compasses, and reconfigurable (maybe even with dynamic reconfigure), you would make it very valuable to the community.
PS: my suggestion on an output message would be a geometry_msgs/QuaternionStamped.  Our compass also output pitch and roll, although not filtered, so this message type could output all of those values at once.

Originally posted by Chad Rockey with karma: 4541 on 2011-07-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by mkoval on 2011-07-10:
Thanks for your response and the advice. We'll definitely release it to the community once it's working.

