Q:

Problem with openni2_camera, Primesense not detected

Hi,
I am trying to access the rgdb information of a Primesense sensor. I have ros-hydro-openni2-* installed using sudo apt-get and it previously worked just fine with the following command: rosrun openni2_camera openni2_camera_node but now when I run this command this is what I get:
~device_id is not set! Using first device.
[ INFO] [1409576381.725333109]: No matching device found.... waiting for devices. Reason: std::string openni2_wrapper::OpenNI2Driver::resolveDeviceURI(const string&) @ /tmp/buildd/ros-hydro-openni2-camera-0.1.3-0precise-20140720-0503/src/openni2_driver.cpp @ 623 : Invalid device number 1, there are 0 devices connected.
[ INFO] [1409576384.725593448]: No matching device found.... waiting for devices. Reason: std::string openni2_wrapper::OpenNI2Driver::resolveDeviceURI(const string&) @ /tmp/buildd/ros-hydro-openni2-camera-0.1.3-0precise-20140720-0503/src/openni2_driver.cpp @ 623 : Invalid device number 1, there are 0 devices connected.

I used to be able to access the rgbd information and the topics using exactly the same command about a month ago. I dont know if there has been an update which has led to this.
I have ubuntu 12.04 and ROS hydro installed.
I get the same error whether the Primesense sensor is plugged in or not and lsusb doesnt detect this device.
I have tried setting the UsbInterface=0 in /etc/openni2/PS1080 as suggested in one of the posts but it didn't help.
I would really appreciate your help on this.
Any suggestions are welcome, thanks in advance!

Update 20140903
So this is the output
$ lsusb
    Bus 001 Device 003: ID 058f:9540 Alcor Micro Corp. 
    Bus 001 Device 002: ID 8087:8000 Intel Corp. 
    Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
    Bus 003 Device 002: ID 17ef:1010 Lenovo 
    Bus 003 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
    Bus 002 Device 005: ID 5986:026a Acer, Inc 
    Bus 002 Device 004: ID 138a:0017 Validity Sensors, Inc. 
    Bus 002 Device 003: ID 1199:a001 Sierra Wireless, Inc. 
    Bus 002 Device 007: ID 046d:c05a Logitech, Inc. M90/M100 Optical Mouse
    Bus 002 Device 006: ID 17ef:100f Lenovo 
    Bus 002 Device 002: ID 17ef:1010 Lenovo 
    Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

// now with the Primesense connected
$ lsusb
Bus 001 Device 003: ID 058f:9540 Alcor Micro Corp. 
Bus 001 Device 002: ID 8087:8000 Intel Corp. 
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 002: ID 17ef:1010 Lenovo 
Bus 003 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 002 Device 005: ID 5986:026a Acer, Inc 
Bus 002 Device 004: ID 138a:0017 Validity Sensors, Inc. 
Bus 002 Device 003: ID 1199:a001 Sierra Wireless, Inc. 
Bus 002 Device 007: ID 046d:c05a Logitech, Inc. M90/M100 Optical Mouse
Bus 002 Device 006: ID 17ef:100f Lenovo 
Bus 002 Device 002: ID 17ef:1010 Lenovo 
Bus 002 Device 008: ID 1d27:0609 ASUS 
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

I tried another USB port this time it works. I can see the topics but it gives me warnings when I try to see the images in rviz. this is what I get when I do rosrun openni2_camera openni2_camera_node
[ WARN] [1409670134.768244447]: ~device_id is not set! Using first device.
Warning: USB events thread - failed to set priority. This might cause loss of data...
[ INFO] [1409670134.765734383]: Device "1d27/0609@2/13" with serial number "1402170229" connected

and for rviz :
[ WARN] [1409675797.585762340]: OGRE EXCEPTION(2:InvalidParametersException): Stream size does not match calculated image size in Image::loadRawData at /build/buildd/ogre-1.8-1.8.1+dfsg/OgreMain/src/OgreImage.cpp (line 283)
[ERROR] [1409675797.585842146]: Error loading image: OGRE EXCEPTION(2:InvalidParametersException): Stream size does not match calculated image size in Image::loadRawData at /build/buildd/ogre-1.8-1.8.1+dfsg/OgreMain/src/OgreImage.cpp (line 283)

Originally posted by zeinab on ROS Answers with karma: 88 on 2014-09-01
Post score: 0

Original comments
Comment by Martin Peris on 2014-09-01:
It might be that the PrimeSense sensor died, it is sad, but it happened to me before. If you have spare, try another sensor.

A:

If your sensor doesn't appear in lsusb, it means that the OS isn't detecting it properly. This is usually a hardware problem.
You may want to try a different USB port or a different USB cable, if you can. If you're using a USB extension cable, try plugging the sensor in directly.
It may also be useful to review the kernel log ( dmesg ) to see if the device is partially detected, and is having signal integrity or other problems.

Originally posted by ahendrix with karma: 47576 on 2014-09-01
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by zeinab on 2014-09-02:
Thanks a lot for your reply. I installed OpenNI2  and was able to run an example which accessed the depth information and printed them. However lsusb still does not show the Primesense sensor. I think there must be a problem with ros-hydro-openni2 or openni2_camera since it is working outside ROS.
Comment by ahendrix on 2014-09-02:
The lsusb database doesn't include names for some of the primesense devices. I suspect your device may be showing up in lsusb without a label. Can you add your lsusb output to your question?
Comment by zeinab on 2014-09-03:
You are right. I post the what I get with and without the sensor being connected to the computer in the post below.

