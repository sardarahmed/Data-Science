Q:

How to simulate a Velodyne sensor?

How would you simulate a velodyne sensor or any other 3d laser sensor?
I've tried to use the block laser plugin combined with a horizontal+vertical ray sensor but it looks like the vertical tag is bugged in the 1.9 branch of gazebo. At least, when I put more than 3 samples in the vertical block It takes forever to load on my i7 computer. (I attached parts of my sdf to the question)
I was wondering if anybody has been able to simulate such a 3d laser sensor.
<gazebo reference="laser_frame">
  <sensor name="velodyne" type="ray">
    <always_on>true</always_on>
    <update_rate>5</update_rate>
    <visualize>false</visualize>
    <ray>
      <scan>
        <horizontal>
          <samples>360</samples>
          <resolution>1</resolution>
          <min_angle>-3.14159</min_angle>
          <max_angle>3.14159</max_angle>
        </horizontal>
        <vertical>
          <samples>3</samples>
          <resolution>1</resolution>
          <min_angle>-0.43284</min_angle>
          <max_angle>0.03490</max_angle>
        </vertical>
      </scan>
      <range>
        <min>0.22</min>
        <max>50</max>
        <resolution>0.02</resolution>
      </range>
    </ray>
    <plugin name="laser_controller" filename="libgazebo_ros_block_laser.so">
      <frameName>laser_link</frameName>
      <topicName>scan</topicName>
      <gaussianNoise>0.02</gaussianNoise>
      <updateRate>5</updateRate>
    </plugin>
  </sensor>
</gazebo>

Thanks for sharing your solutions

Originally posted by fmder on Gazebo Answers with karma: 23 on 2013-11-25
Post score: 2

A:

The vertical tag has recently been fixed in the default branch of gazebo, though it is probably still broken in 1.9.
An alternative approach for modeling the Velodyne is to mount a ray sensor on a spinning link, so that each scan occurs at a different time step as the laser spins.

Originally posted by scpeters with karma: 2861 on 2013-11-25
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ZdenekM on 2013-12-05:
I guess that modeling the Velodyne as a spinning vertical 2D laser would be even more realistic than using block laser.
Comment by fmder on 2013-12-15:
Thanks, that is what I did, I'll publish my code later this week for the spinning hokuyo.
Comment by lba5 on 2014-10-12:
Still have that code for the spinning hokuyo?
Comment by awesomebytes on 2015-03-09:
Any code for the spinning hokuyo? Thanks.

