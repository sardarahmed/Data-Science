Q:

Creating a ROS subscriber within a class constructor?

Hello All,
I have a callback to some topic that is a method of a class. This works perfectly, except for the fact that I need to initialize this Subscriber within the main() function of my node. Ideally I would like to initialize it within the constructor of my class. Is there a way to do this?
In simple terms I would like to add this line to the class constructor rather than main():
ros::Subscriber sub = n.subscribe("chatter", 1000, &Listener::callback, &listener);
Thanks
Ammar

Originally posted by Ammar on ROS Answers with karma: 289 on 2012-11-09
Post score: 0

A:

Hi Ammar,
I think you have this problem because your subscriber object doesn't live outside its scope (constructor). You need to declare it as a private object in your class
private:
    ros:Subscriber sub;

then you can initialize it in the constructor:
sub = n.subscribe("chatter", 1000, &Listener::callback, &listener);

In the main function, when you create the object, you will have a running subscriber in your object.

Originally posted by yigit with karma: 796 on 2012-11-09
This answer was ACCEPTED on the original site
Post score: 7

Original comments
Comment by Ammar on 2012-11-09:
Ahhh.... Great catch.. Thank you!!

