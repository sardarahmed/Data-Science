Q:

UR10 tool flange 24V power control

Hi, i have been working on controlling a relay with the power output of the UR10 flange connector.
i recently got the ur_modern_driver/io_states publisher working and noticed that it does not publish the voltage that is on the output of said pin. The voltage on that pin can only be 0,12 or 24. I know that because with the teach panel i can set that output to those values. So now i do not know if i can use the ur_msgs service of SetIO.srv to set this output.
Do i need to program this myself or is this possible? I have been looking for a long time and cannot find documentation that says if this is possible.

Originally posted by stefvanlierop on ROS Answers with karma: 37 on 2019-04-02
Post score: 0

A:

It's not well documented, but the SetIO service should allow you to configure the tool voltage when you specify the FUN_SET_TOOL_VOLTAGE for fun, and then setting state to either 0, 12 or 24.
Some pseudo-code (neither Python nor C++):
req = SetIO()
req.fun = SetIO.FUN_SET_TOOL_VOLTAGE
req.state = 12

This would set the tool voltage to 12V after invoking the service.

Edit:

I have been looking for a long time and cannot find documentation that says if this is possible.

I've submitted ros-industrial/universal_robot#415 to clarify the use of SetIO a bit.
Once that gets merged, the code changes slightly (constants added):
req = SetIO()
req.fun = SetIO.FUN_SET_TOOL_VOLTAGE
req.state = SetIO.STATE_TOOL_VOLTAGE_12V

Originally posted by gvdhoorn with karma: 86574 on 2019-04-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by gvdhoorn on 2019-04-02:
For reference: this is where the driver processes the incoming service request, and this is where the tool voltage request is processed.
Comment by stefvanlierop on 2019-04-02:
yes that worked, thank you very much

