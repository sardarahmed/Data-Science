Q:

ROS TF claims tree disconnected, but clearly connected

Hi all
I am playing back some rosbag file.
In RVIZ, I see the error message "No transform from [area_description] to frame [start_of_service]".
TF view_frames agrees and shows the following:

However, when I export the rosbag file, /tf topic only, to .csv format, I can clearly see that there are 3 kinds of transformations in the rosbag file:

map -> start_of_service
start_of_service -> device
area_description -> start_of_service
Whereas the left side is the value in "field.transforms0.header.frame_id", and the right side is the value in "field.transforms0.child_frame_id" in the resulting .csv file.

Now, the resulting graph is acyclic. If we choose start_of_service as root, this is clearly a valid tree.
The question remains:
Is ROS able to invert the transformations so to form a valid TF tree?
Apologies if this has been asked before. I was unable to find an answer on google or here.
Cheers!

ibd

Originally posted by ibd on ROS Answers with karma: 3 on 2017-05-05
Post score: 0

A:

TF doesn't allow transforms with multiple parents, and will reject new transforms if the child frame already has a parent.
You should be able to use the rosbag API to rewrite the transforms in your bag file to fix them.
Maybe you should make the area_description frame a child of the map or start_of_service frame, or maybe make it the parent of the map frame?

Originally posted by ahendrix with karma: 47576 on 2017-05-05
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ibd on 2017-05-08:
I see, thank you for suggestions on how to solve it. Is there a reason that these restrictions are in place?

