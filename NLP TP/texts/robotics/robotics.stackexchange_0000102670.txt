Q:

[Noetic, RTABMap, GPS]I want to use GPS with RTABMap

Hello.
I want to integrate RTABMap and GPS.
I currently have a T265 and a D455 available for RTABMap.
I am using Ubuntu 20.04, ROS Noetic.
Below is the launch file for RTABMap.
<launch>
 <!-- Choose visualization -->
  <arg name="rtabmapviz"              default="false" /> 
  <arg name="rviz"                    default="true" />
  
  <!-- Localization-only mode -->
  <arg name="localization"            default="false"/>
  
  <!-- Corresponding config files -->
  <arg name="rtabmapviz_cfg"          default="$(find rtabmap_ros)/launch/config/rgbd_gui.ini" />

  <arg name="rviz_cfg"                default="$(find rtabmap_ros)/launch/config/rgbd.rviz" />
  
  <arg name="frame_id"                default="robot_center"/>
  <arg name="odom_topic"              default="/t265/odom/sample"/>
  
  <arg name="rgbd_sync"               default="true"/>
  <arg name="approx_rgbd_sync"        default="false"/>

  <arg name="visual_odometry"         default="false"/>
  <!--<arg name="approx_sync"         default="true"/>-->
  
  <arg name="rgb_topic"               default="/d400/color/image_raw" />
  <arg name="depth_topic"             default="/d400/aligned_depth_to_color/image_raw" />
  <arg name="camera_info_topic"       default="/d400/color/camera_info" />
  
  <arg name="gps_topic"               default="/ubox/fix" />

  <param name="Mem/UseOdomGravity" type="string" value="true"/>
  <param name="Optimizer/GravitySigma" type="string" value="0.3"/>
  <param name="Vis/MaxDepth" type="string" value="3.5"/>
  
  <param name="cloud_noise_filtering_radius" value="0.1"/>
  <param name="cloud_noise_filtering_min_neighbors" value="2"/>
  <!-- param name = "proj_max_ground_height" value = "0.2" / -->
  
  <include file="$(find rtabmap_ros)/launch/rtabmap.launch">
    <arg name="rtabmapviz"              value="$(arg rtabmapviz)" /> 
    <arg name="rviz"                    value="$(arg rviz)" />
    <arg name="localization"            value="$(arg localization)"/>
    <arg name="gui_cfg"                 value="$(arg rtabmapviz_cfg)" />
    <arg name="rviz_cfg"                value="$(arg rviz_cfg)" />                                                                          

    <arg name="odom_topic"              value="$(arg odom_topic)"/>
    <arg name="frame_id"                value="$(arg frame_id)"/>
    <arg name="rgbd_sync"               value="$(arg rgbd_sync)"/>
    <arg name="depth_topic"             value="$(arg depth_topic)"/>
    <arg name="rgb_topic"               value="$(arg rgb_topic)"/>
    <arg name="camera_info_topic"       value="$(arg camera_info_topic)"/>
    <arg name="approx_rgbd_sync"        value="$(arg approx_rgbd_sync)"/>
    <arg name="visual_odometry"         value="$(arg visual_odometry)"/>   
    <!--<arg name="approx_sync"         value="$(arg approx_sync)"/>-->
    <arg name="gps_topic"               value="$(arg gps_topic)" />
    
  </include>

</launch>

I added <arg name="gps_topic"               default="/ubox/fix" /> and <arg name="gps_topic"               value="$(arg gps_topic)" /> to use GPS with RTABMap.
Question ①.
Can I say that I have integrated GPS into RTABMap now?
Question ②.
In response to the question "I want to compare before and after adding GPS?" in the following post, matlabbe replied "There is a /gps/fix input topic to rtabmap node. To use GPS in graph You may check this post and this post that show how GPS and SLAM trajectories can be You may check this post and this post that show how GPS and SLAM trajectories can be visualized in rtabmap-databaseViewer.
But I could not find "Optimizer/PriorsIgnored" anywhere about RTABMap. Where can I add or change this setting?
http://official-rtab-map-forum.206.s1.nabble.com/how-to-identify-that-GPS-has-affected-rtabmap-localization-td8383.html

rqt_graph when the RTABMap launch file is run

Originally posted by donguri on ROS Answers with karma: 13 on 2022-11-07
Post score: 0

A:

Answered here: http://official-rtab-map-forum.206.s1.nabble.com/Is-this-enough-to-integrate-RTABMap-and-GPS-tp9192p9208.html

Originally posted by matlabbe with karma: 6409 on 2022-11-26
This answer was ACCEPTED on the original site
Post score: 1

