Q:

Trouble Including rosbag

Hello, I am trying to follow this tutorial: http://wiki.ros.org/rosbag/Code%20API#cpp_api , but am running into errors with the inclusion of rosbag.  When I try to run the example code, I get a jillion lines of errors all saying something like this: undefined reference to rosbag:somethingOrOther.  However, I don't know what I'm doing wrong.  I included rosbag/bag.h and rosbag/view.h in my C++ source file, and I believe I've linked the libraries correctly in my CMakelists file:
add_executable(rosbagger src/rosbagger.cpp)
target_link_libraries(rosbagger ${catkin_LIBRARIES})
Anyone know whats going wrong?

Originally posted by mysteriousmonkey29 on ROS Answers with karma: 170 on 2014-01-08
Post score: 2

Original comments
Comment by Hamid Didari on 2014-01-08:
open the terminal and type ($ rospack depends1 <package_name>)
in  dependencies list do you see rosbag?
Comment by mysteriousmonkey29 on 2014-01-12:
Thanks I tried that and it said there were no dependcies so I recreated the package (with the correct dependcies) and now it seems to be working.

A:

You also have to specify rosbag as a dependency of your package correctly. The first example package I found where this is done is https://github.com/ros-perception/perception_pcl/tree/hydro-devel/pcl_ros. Have a look at the package package.xml and CMakeLists.txt files, search for "rosbag" and add the analogous (basically the same) lines to your package.
Also have a look at the related catkin wiki pages.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2014-01-08
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by mysteriousmonkey29 on 2014-01-12:
I have specified my dependencies as follows in the package.xml:
<build_depend>rosbag</build_depend>
<run_depend>rosbag</run_depend>
However, I am still encountering the problem (I already had these lines in there; I just forgot to include them in the question)
Comment by artosaari on 2014-07-18:
You probably forgot to insert "rosbag" under
find_package(catkin REQUIRED COMPONENTS
...
Comment by Clancy on 2015-01-27:
This was very helpful. I was missing the CMakeLists.txt part. Thanks!
Comment by resplendent star on 2021-03-12:
hi,what need to add in  cmake?could plz be more specific?

