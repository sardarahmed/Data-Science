Q:

Odom and map frame reparenting issue with robot_localization

I am trying to develop the odometry for a driverless vehicle and I am using the robot_localization package. The odometry itself seems to be working, though when i run it in the simulator there is a reparenting error
ERROR TF re-parenting contention:

reparenting of [base_link] to [odom] by [/ekf_se_odom]
reparenting of [base_link] to [map] by [/gazebo]
When i check the frames run at that moment odometry frame exists but it is not connected to a frame around it.
This also creates a problem and the model of the car seems to be flickering, like it jumps.

Originally posted by Athanasakart on ROS Answers with karma: 3 on 2020-04-08
Post score: 0

A:

Looks quiet similar to this question. You probably have at least two different nodes publishing a tf transforms to the same parent frame.
In order to work properly, each transform can only have a single parent and needs to be connected to the other (related) transforms in a  tree like manner (e.g. [map]->[odom]->[base_link])
If i understand you correctly you are using a single instance of robot_localization that fuses only local information (e.g. odometry, IMU) with respect to the [odom] frame.
According to your description your gazebo plugin publishing an additional [map]->[base_link] transform. You might want to disable this tf publisher or use a separate frame name for the ground truth reference.
If you need further assistance please provide more detailed information of what you are tying to achieve and the relevant parts of your robot_localization configuration.

Originally posted by Phgo with karma: 218 on 2020-04-15
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Athanasakart on 2020-04-15:
I actually tried that and it worked. Just for reference I used two robot_localization nodes and a navsat transform node to fuse both odometry IMU and GPS data. Thank you for your response

