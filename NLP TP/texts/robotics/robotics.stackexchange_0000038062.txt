Q:

How to visualize a frame pose as a path

I'd like to generate an image similar to the one at the end of the demo video here: http://www.ros.org/wiki/hector_mapping
In the image, the generated map and the pose of the /base_link frame over time in the /map frame are overlayed. What is the best way to build such an image?

Originally posted by damonkohler on ROS Answers with karma: 3838 on 2012-02-21
Post score: 4

A:

The map in the video was generated using the hector_geotiff node. This node retrieves the map and trajectory via services as stated at the wiki page. The trajectory is tracked via the hector_trajector_server package, which provides a node that saves a tf based trajectory given a source and target frame. The trajectory is published on a topic as well as available as a service.
Have you looked at the 'Mapping using logged data' tutorial? The process of mapping and saving to geotiff is described there. Note that the map saving functionality works with maps generated by gmapping or other SLAM systems as well.
/edit: This example launch file should work for you:
<?xml version="1.0"?>

<launch>
  
  <node pkg="hector_trajectory_server" type="hector_trajectory_server" name="hector_trajectory_server" output="screen">
    <param name="target_frame_name" type="string" value="/map" />
    <param name="source_frame_name" type="string" value="/base_link" />
    <param name="trajectory_update_rate" type="double" value="4" />
    <param name="trajectory_publish_rate" type="double" value="0.25" />
  </node>

  <node pkg="hector_geotiff" type="geotiff_node" name="hector_geotiff_node" output="screen" launch-prefix="nice -n 15">
    <remap from="map" to="/dynamic_map" />
    <param name="map_file_path" type="string" value="$(find hector_geotiff)/maps" />
    <param name="map_file_base_name" type="string" value="hector_slam_map" />
    <param name="draw_background_checkerboard" type="bool" value="true" />
    <param name="draw_free_space_grid" type="bool" value="true" />
  </node>

</launch>

The geotiff map image will be saved every time you publish on the syscommand topic like this:
rostopic pub syscommand std_msgs/String "savegeotiff" 

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2012-02-21
This answer was ACCEPTED on the original site
Post score: 8

Original comments
Comment by damonkohler on 2012-02-21:
Thanks, I did see that but I didn't realize it would work with gmapping (which I'm using currently). I assume the saved map includes the trajectory overlay?
Comment by Stefan Kohlbrecher on 2012-02-21:
Yes it does by default. See edited post above, this launch file should work out of the box if I haven't overlooked anything.
Comment by damonkohler on 2012-02-21:
Beautiful! Works great, thanks!
Comment by lucasw on 2021-08-03:
https://github.com/tu-darmstadt-ros-pkg/hector_slam/tree/noetic-devel/hector_trajectory_server is the localtion of the source code.

