Q:

gazebo garden, how to set background colour

My current .sdf file looks like the following.
my goal is to set the background to a specific colour by changing this sdf file. Found online "solutions" state that this can be done by setting the background variable in the scene tag. However I can't see any changes when this is done. The only thing i can think of is maybe its being overridden by some other value, but the verbose output seems fine.
<?xml version="1.0" ?>
<sdf version='1.9'>
<world name='default'>
    <physics name='1ms' type='ignored'>
    <max_step_size>0.001</max_step_size>
    <real_time_factor>1</real_time_factor>
    <real_time_update_rate>1000</real_time_update_rate>
    </physics>

    <scene>
      <ambient>0 0 0 0</ambient>
      <background>0 0 0 0</background>
      <shadows>true</shadows>
      <grid>true</grid>
    </scene>

    <light name='sun' type='directional'>
    <pose>0 0 10 0 -0 0</pose>
    <cast_shadows>true</cast_shadows>
    <intensity>1</intensity>
    <direction>-0.5 0.1 -0.9</direction>
    <diffuse>0.8 0.8 0.8 1</diffuse>
    <specular>0.2 0.2 0.2 1</specular>
    <attenuation>
        <range>1000</range>
        <linear>0.01</linear>
        <constant>0.90000000000000002</constant>
        <quadratic>0.001</quadratic>
    </attenuation>
    <spot>
        <inner_angle>0</inner_angle>
        <outer_angle>0</outer_angle>
        <falloff>0</falloff>
    </spot>
    </light>

</world>
</sdf>

A:

This is one of the strange (undocumented?) things of Gazebo Sim: there is an element <background> in the <scene> element in the SDF, but also a <background_color> element in the configuration of the MinimalScene plugin.
I don't know when the former is used, but the latter does set the background color:
To set from the SDF
Have a look at the empty_gui.sdf example world:
If you follow instructions 1. and 2. you will see that the scene initially loads with background color as specified by the MinimalScene <background_color>. Try changing it: the numbers represent RGB, with value between 0.0 and 1.0.
Upon load of the Scene Manager plugin per instruction 2., the background color is replaced by a sky texture, which can be avoided by removing this line. So strangely, the <sky> setting of the <scene> entry does have an effect, whereas the <background> setting does not.
To set from the gui config file
Alternatively, the same <background_color> setting can be done in the gui config file. The default file is located at ${HOME}/.gz/sim/7/gui.config. A custom config file can be loaded by starting Gazebo Sim with:
gz sim --gui-config <path_to_config_file>
The current config can be saved from Gazebo Sim by clicking the horizontal lines icon at the top left and choosing Save client configuration as.
To set programmatically
If you'd want to change the background color programmatically, take a look at this tutorial and corresponding source code. Note the difference between the server-side scene (used by Gazebo Sim sensors) and the gui-side scene.

