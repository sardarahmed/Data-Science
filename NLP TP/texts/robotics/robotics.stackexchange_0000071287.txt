Q:

How to save the map as jpg format

Now ROS saves the robot map as pgm format,  but I want to save the map as jpg format, I konw I could use the opencv  to convert the "pgm map" to the "jpg map",  but if I could save the map as jpg format in the map_saver code directly, it would be better. However, I know little about picture format and it's difficult for me to write the code by myself.
Thank you very much!

Originally posted by tanghz on ROS Answers with karma: 130 on 2016-01-12
Post score: 0

A:

First, I'd advise against saving the map as .jpg as that introduces compression artifacts that look bad and can mess with further processing (or the eye of the beholder ;) ).
If you absolutely want to directly save the map as jpg, the easiest way is probably to copy/modify the map_saver, add a dependency on opencv, convert the map to a cv::Mat in the map callback and then write it out as jpg. Here is code for converting a nav_msgs/OccupancyGrid to cv::Mat and here is an example of saving a cv::Mat to jpg.
A easier option is of course to use a command-line tool such as convert. It should allow to perform the conversion from command line or inside a script by simply calling
convert map.pgm map.jpg

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2016-01-12
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by tanghz on 2016-01-12:
Thank you very much!

