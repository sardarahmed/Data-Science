Q:

Advertising new publisher after first spin in rosserial_windows

Apologies for the stupid question, but I'm still trying to grasp the basic concepts of rosnodes.
Is it possible to advertise a new publisher after the first spin? I'm currently using rosserial_windows and advertising a "late" publisher/topic results in a "Received message with unrecognized topic" warning and the new topic does not show in rostopic list. Is this a built-in limitation of ros nodes?
Just to be clear here's the order of execution:

Initialize connection

Advertise publishers/services

spinOnce

Publish a message + spinOnce (x 100)

Advertise new publisher + spinOnce

New topic does not show up, throws warning:  "Received message with unrecognized topic"

Thank you!

Originally posted by prnthp on ROS Answers with karma: 16 on 2017-11-05
Post score: 0

Original comments
Comment by gvdhoorn on 2017-11-05:
Not an answer, but please realise that you cannot consider anything rosserial as representative of the "basic concepts of rosnodes". rosserial implements a specialised subset, and has to deal with the restrictions of resource constrained platforms, which has led to some design decisions that ..
Comment by gvdhoorn on 2017-11-05:
.. resulted in sometimes rather different behaviour and API.
Creating publishers and subscribers can be done at any time in 'normal ROS', but rosserial might have to do some special initialisation that requires a specific temporal ordering.
Comment by prnthp on 2017-11-05:
Thank you! That clears up a lot of things.

A:

To anyone who stumbles upon this question:
The node_handle class in rosserial_windows has a method called negotiateTopics() that is called only once (the first spin), not quite sure why. Simply calling the method negotiateTopics() after advertising a new publisher or subscriber tells rosserial_python's message_info_service to add the new topics!

Originally posted by prnthp with karma: 16 on 2017-11-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2017-11-06:\

not quite sure why

probably because it incurs some overhead which you'd want to avoid when negotiation is not needed anymore.
Comment by prnthp on 2017-11-06:
What I meant was, why it is not called every time a new publisher or subscriber is created (maintaining a list, perhaps?). However, rosserial is designed for the arduino and I can see how the topics are only setup in setup() only once.

