Q:

actionlib and rqt

Hello,
I'm learning ROS now and trying to create an action client in my rqt plugin.
No problem to catkin build the plugin.   But when load the plugin, I got error as below:
undefined symbol: _ZN9actionlib17ConnectionMonitor21cancelConnectCallbackERKN3ros25SingleSubscriberPublisherE)

Unmangled:
actionlib::ConnectionMonitor::cancelConnectCallback(ros::SingleSubscriberPublisher const&)

My code is similar to the following. Is it a rqt bug, or is there anything wrong in my code?
Thank you for your help!
class MyPlugin : public rqt_gui_cpp::Plugin
    {
      Q_OBJECT
    public:
      MyPlugin();
      virtual void initPlugin(qt_gui_cpp::PluginContext& context);
      virtual void shutdownPlugin();
    private
      Ui::MyPluginWidget ui_;
      QWidget* widget_;
    actionlib::SimpleActionClient<my_msgs::MyAction> aClient;
    }

MyPlugin::MypPlugin()
: rqt_gui_cpp::Plugin()
, widget_(0)
, aClient("some action")
{
setObjectName("Plugin");
}

Originally posted by Fulin on ROS Answers with karma: 11 on 2017-09-28
Post score: 0

Original comments
Comment by gvdhoorn on 2017-09-28:
I've added the unmangled version of the missing symbol to your question text.
Comment by Fulin on 2017-09-29:
Hi Gvdhoom,
By the way, where should I use
actionlib::ConnectionMonitor::cancelConnectCallback(ros::SingleSubscriberPublisher const&)

in shutdownPlugin()?
Thank you!
Comment by gvdhoorn on 2017-09-29:
That is a different issue, so I advise you to post that as a new question. We try to maintain a 1 question - 1 answer ratio here on ROS Answers.

A:

Are you linking all required libraries? Can you show your CMakeLists.txt? The fact that CMake currently does not complain is expected: plugins don't need all symbols present at compile time, as it is assumed that at runtime those will be resolved by the plugin host.

Originally posted by gvdhoorn with karma: 86574 on 2017-09-28
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Fulin on 2017-09-29:
Hi Gvdhoom,
You are right,
I missed the actionlib related depends in CMakeLists.txt and package.xml files. Might be the boost also? After adding them, now it works fine.
Thank you!

