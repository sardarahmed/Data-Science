Q:

piontcloud to depth image codification

Hello,
I have a depth image in a cv::Mat(height,widht,CV_64F) where each pixel is either 0 if it has no 3D or the distance to produce a 3D point allong the optical ray through that pixel. This distance is encoded between a minimum and maximum distance in the range [0..255]. I know how to convert cv::Mat to sensor_msgs/Image using cv_bridge. However I have not found how to properly codify the information in my cv::Mat image so I can visualize its 3D in rviz. Could you tell me how to convert it? I have been reading and the only information I found was this but I it has not been helpful to me.
Thank you.

Originally posted by apalomer on ROS Answers with karma: 318 on 2016-06-06
Post score: 2

A:

You should convert your depth image from scaled values to meters (as 32-bit float), as described in REP- 0118, and publish this as a sensor_msgs/Float .
Then run the depth_image_proc/point_cloud_xyz node from depth_image_proc, and remap its image_rect topic to the topic where you are publishing your depth image. This will publish sensor_msgs/PointCloud2 messages on the points topic.
You can then view these messages with the PointCloud2 display type in rviz. (make sure your fixed frame in rviz matches the frame_id)

Originally posted by ahendrix with karma: 47576 on 2016-06-06
This answer was ACCEPTED on the original site
Post score: 0

