Q:

rosdep update error with "IncompleteRead()"

When I try rosdep update follow as wiki tutorials, I got this return:
reading in sources list data from /etc/ros/rosdep/sources.list.d
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml
Hit https://raw.githubusercontent.com/ros/rosdistro/master/releases/fuerte.yaml
Query rosdistro index https://raw.githubusercontent.com/ros/rosdistro/master/index-v4.yaml
Skip end-of-life distro "ardent"
Skip end-of-life distro "bouncy"
Skip end-of-life distro "crystal"
Skip end-of-life distro "dashing"
Skip end-of-life distro "eloquent"
Add distro "foxy"

ERROR: Rosdep experienced an error: IncompleteRead(179370 bytes read, 18022 more expected)
Please go to the rosdep page [1] and file a bug report with the stack trace below.
[1] : http://www.ros.org/wiki/rosdep

rosdep version: 0.22.1

Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/rosdep2/main.py", line 146, in rosdep_main
    exit_code = _rosdep_main(args)
  File "/usr/lib/python3/dist-packages/rosdep2/main.py", line 444, in _rosdep_main
    return _no_args_handler(command, parser, options, args)
  File "/usr/lib/python3/dist-packages/rosdep2/main.py", line 453, in _no_args_handler
    return command_handlers[command](options)
  File "/usr/lib/python3/dist-packages/rosdep2/main.py", line 664, in command_update
    update_sources_list(success_handler=update_success_handler,
  File "/usr/lib/python3/dist-packages/rosdep2/sources_list.py", line 508, in update_sources_list
    rosdep_data = get_gbprepo_as_rosdep_data(dist_name)
  File "/usr/lib/python3/dist-packages/rosdep2/gbpdistro_support.py", line 147, in get_gbprepo_as_rosdep_data
    distro_file = get_release_file(gbpdistro)
  File "/usr/lib/python3/dist-packages/rosdep2/rosdistrohelper.py", line 76, in get_release_file
    dist_file = rosdistro.get_distribution_file(get_index(), distro)
  File "/usr/lib/python3/dist-packages/rosdistro/__init__.py", line 119, in get_distribution_file
    data = _get_dist_file_data(index, dist_name, 'distribution')
  File "/usr/lib/python3/dist-packages/rosdistro/__init__.py", line 202, in _get_dist_file_data
    data.append(_load_yaml_data(u))
  File "/usr/lib/python3/dist-packages/rosdistro/__init__.py", line 194, in _load_yaml_data
    yaml_str = load_url(url)
  File "/usr/lib/python3/dist-packages/rosdistro/loader.py", line 63, in load_url
    contents = fh.read()
  File "/usr/lib/python3.8/http/client.py", line 472, in read
    s = self._safe_read(self.length)
  File "/usr/lib/python3.8/http/client.py", line 615, in _safe_read
    raise IncompleteRead(data, amt-len(data))
http.client.IncompleteRead: IncompleteRead(179370 bytes read, 18022 more expected)

Originally posted by Heho on ROS Answers with karma: 44 on 2022-08-13
Post score: 0

A:

I just did a rosdep update for noetic and it worked as expected. I have the same version of rosdep as you do.
Debugging steps:

Try the command again. It may only have been a network or server glitch.
Make sure your home directory has free disk space.
Make sure $HOME/.ros/rosdep/ and all the files under it are owned by your user name (not by root.)
 4. Rename the $HOME/.ros/rosdep/ directory to something else (e.g. rosdep.old) and try the command again.

Originally posted by Mike Scheutzow with karma: 4903 on 2022-08-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Heho on 2022-08-20:
Thanks! My issue seems more likely to be situation one. After I change my network proxy, I pass this command.

