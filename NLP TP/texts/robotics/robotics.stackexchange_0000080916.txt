Q:

Specify gcc -pg option for catkin?

Hi all,
I am working on a project to do some performance profiling on amcl. To do this, I want to use gprof. To use gprof, I need to compile amcl with the -pg option for gcc. How can I do this in the catkin environment? Is this the right approach?
Bonus question: I don't really want to profile all of the navigation package, only amcl. How can I break amcl out of the navigation package so that I am only profiling amcl?
thanks in advance!
dw

Originally posted by deedub on ROS Answers with karma: 23 on 2017-05-19
Post score: 2

A:

The preferred approach is to modify the package's CMakeLists.txt to change the compile options:

set_directory_properties(PROPERTIES COMPILE_OPTIONS "-pg")

This will modify the compile options for the whole package, but won't bleed into other packages accidentally due to cmake include.
There's also ways to modify compile options per target (so just for one library or executable), see https://stackoverflow.com/questions/23995019/what-is-the-modern-method-for-setting-general-compile-flags-in-cmake

Originally posted by paulbovbel with karma: 4518 on 2017-05-24
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by deedub on 2017-05-24:
Thanks very much for your answer. Just to clarify, this is preferable specifically because it won't bleed into other packages accidentally?
Comment by paulbovbel on 2017-05-25:
Correct. catkin_make will actually magically combine all your package cmakes into one. catkin_make_isolated or the very awesome catkin-tools will properly isolate packages, making set(CMAKE_CXX_FLAGS ...) slightly more tenable.

