Q:

rosemacs error : dynamic-completion-table

After installing ros-noetic on a debian 10. I installed ros-noetic-rosemacs via apt. The installed version is : 0.4.17-1buster.20220221.094135.
When I run emacs (emacs --debug-init) I get the following error:
Debugger entered--Lisp error: (void-function dynamic-completion-table)
  (dynamic-completion-table #'(lambda (str) (rosemacs-bsearch str ros-all-topics)))
  (setq topic-completor (dynamic-completion-table #'(lambda (str) (rosemacs-bsearch str ros-all-topics))))
  load-with-code-conversion("/opt/ros/noetic/share/emacs/site-lisp/rosemacs.el" "/opt/ros/noetic/share/emacs/site-lisp/rosemacs.el" nil t)
  require(rosemacs)
  load-with-code-conversion("/opt/ros/noetic/share/emacs/site-lisp/rosemacs-con..." "/opt/ros/noetic/share/emacs/site-lisp/rosemacs-con..." nil t)
  require(rosemacs-config)
  load-with-code-conversion("/home/hdd/.emacs.d/init.el" "/home/hdd/.emacs.d/init.el" t t)
  load("/home/hdd/.emacs.d/init" noerror nomessage)
  startup--load-user-init-file(#f(compiled-function () #<bytecode 0x10b2151e256b0ed8>) #f(compiled-function () #<bytecode -0x1f3c686ddc0cdc35>) t)
  command-line()
  normal-top-level()

Do you have any idea how to make rosemacs work?

Originally posted by hdd--robot on ROS Answers with karma: 38 on 2023-06-25
Post score: 1

A:

It seems that the problem is that the function "dynamic-completion-table" has changed its name in emacs, now it is called "completion-table-dynamic".
To solve the problem, I changed in the file: "/opt/ros/noetic/share/emacs/site-lisp/rosemacs.el" all occurrences of "dynamic-completion-table" by "completion-table- dynamic".
it seems to work for now.

Originally posted by hdd--robot with karma: 38 on 2023-06-29
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by 130s on 2023-06-29:
Glad you found a workaround. Seeing /opt/ros/noetic/share/emacs in your error output, I guess your rosemacs is installed via the installer, of which code is maintained at https://github.com/code-iai/ros_emacs_utils/issues. Why don't you submit a bugfix?

