Q:

Skateboard ramp in Gazebo editor

Hi everyone,
I'm trying to get a skateboard ramp in the Gazebo editor, something similar to this: https://ultimatesportsonline.com/product/oc-ramps-16-half-pipe-skateboard-ramp-kit/. Any suggestion?
I've seen a similar question asked here: http://answers.gazebosim.org/question/5737/how-to-create-a-sloperamp-in-gazebo-editor/, but I'm trying to get a curved ramp rather than a plane.
Cheers,
MB

Originally posted by meruz on Gazebo Answers with karma: 3 on 2019-05-24
Post score: 0

A:

You could use a heightmap.

Create an PNG image where lightness of a pixel represents its height.

Make a model out of your picture
 └── <your_models_folder>
      ├── ...
      └── heightmap
           ├── model.config
           ├── model.sdf
           └── materials
               └── textures
                   └── heightmap.png

you can name the folder containing the model to your liking. I use heightmap in this example for easier explanation.

model.config
    <?xml version="1.0"?>

    <model>
       <name>Heightmap</name>
       <version>1.0</version>
       <sdf version="1.5">model.sdf</sdf>

       <author>
         <name>TODO</name>
         <email>email@address.org</email>
       </author>

       <description>
         A hightmap plane.
       </description>
     </model>

model.sdf
    <?xml version="1.0" ?>
    <sdf version="1.5">
        <model name="heightmap">
          <static>true</static>
          <link name="link">

             <collision name="collision">
              <geometry>
                <heightmap>
                  <uri>model://heightmap/materials/textures/heightmap.png</uri>
                  <size>32 32 .8</size>
                  <pos>0 0 0</pos>
                </heightmap>
              </geometry>
            </collision>

            <visual name="visual">
              <geometry>
                <heightmap>
                  <use_terrain_paging>false</use_terrain_paging>

                  <uri>model://heightmap/materials/textures/heightmap.png</uri>
                  <size>32 32 .8</size>
                  <pos>0 0 0</pos>
                             
                </heightmap>
              </geometry>
            </visual>

          </link>
        </model>
    </sdf>

Where the <size> tags define the width, length and height of the model. This means that my heightmap will result in terrain 32x32 m large and 80 cm height. The highest point of the terrain will be exactly 80 cm above the lowest. This way you can scale your model. (note that there is size tag for both collisions and visuals. You need to keep them the same.)

include the heightmap in your WORLD file
 <include>
      <uri>model://heightmap</uri>
 </include>

launch the world as you normally do.

You can then work on textures for your ramp. This will result in black-and-yellow stripe texture, but the geometry will be there.
You might want to use a picture like the one below for your heightmap.

Originally posted by kumpakri with karma: 755 on 2019-05-29
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by meruz on 2019-06-17:
Thank you, this is extremely helpful.
I tested your suggestion and it works with the first png file. I then tried the one at the end to play around with something similar to the one I was looking for and that's where I found a couple of issues:

initially the image not being square
after adjusting that to 640x640, gazebo started crashing (I try to manually import the map and it stops working)
after reducing the image to 129x129 no improvement
created a new one, still crashing

Any advice?
Comment by chapulina on 2019-06-17:
If you run with --verbose do you see any messages? I'd expect 640 to fail because the size must be 2^n+1, but 129 should work.
Comment by meruz on 2019-06-19:
It is now working. It turns out I made a mistake while renaming a few test images (I had one at 128 and one at 129 and used the wrong one for testing). Thank you guys!
Comment by mihota on 2019-10-30:
Hi. What software do you guys use to create the png image?
Comment by kumpakri on 2019-10-31:
@mihota I used the GIMP image editor.

