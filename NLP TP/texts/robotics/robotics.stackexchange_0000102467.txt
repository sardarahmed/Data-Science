Q:

Publish geometry_msgs Pose from command-line

I want to publish to a topic the Pose of a robot to calculate its inverse kinematics. I am using the command:
ros2 topic pub --once /topic geometry_msgs/msg/Pose "{position:{1,1,1},orientation:{1,1,1,1}}"

but this isn't working and gives the following error
"Failed to populate field: getattr(): attribute name must be string".

What is the correct way to publish a Pose msg to topic.

Originally posted by ankx22 on ROS Answers with karma: 3 on 2022-09-30
Post score: 0

A:

There are no spaces in your data which makes it an invalid YAML. I am quoting from the ROS 2 (Foxy) documentation:

Itâ€™s important to note that this
argument needs to be input in YAML
syntax.

ROS 2
We can use the following command in ROS 2:
ravi@dell:~$ ros2 topic pub --once /topic geometry_msgs/msg/Pose "{position: {x: 0.2, y: 0.1, z: 0.3}, orientation: {x: 0.0, y: 0.0, z: 0.0, w: 1.0}}"
publisher: beginning loop
publishing #1: geometry_msgs.msg.Pose(position=geometry_msgs.msg.Point(x=0.2, y=0.1, z=0.3), orientation=geometry_msgs.msg.Quaternion(x=0.0, y=0.0, z=0.0, w=1.0))

ROS 1
Although the question uses ROS 2 commands, it is tagged with ROS 1, i.e., noetic. Therefore, below is the equivalent ROS 1 command:
ravi@dell:~$ rostopic pub --once /topic geometry_msgs/Pose "{position: {x: 0.2, y: 0.1, z: 0.3}, orientation: {x: 0.0, y: 0.0, z: 0.0, w: 1.0}}"
publishing and latching message for 3.0 seconds

Feel free to check the ROS 1 documentation.

Originally posted by ravijoshi with karma: 1744 on 2022-10-01
This answer was ACCEPTED on the original site
Post score: 2

