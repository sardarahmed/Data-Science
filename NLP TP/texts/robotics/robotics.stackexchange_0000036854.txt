Q:

gazebo_ros_block_laser FOV limitation of -90 to +90 degrees?

Hi guys,
I'm trying to use the gazebo_ros_block_laser to provide point cloud data of a -180 to 180 degree (360 degree) field of view. However visualizing using RVIZ , only -90 degree to +90 degree looks very good. Everything else behind the lidar system looks incorrect. Is this a known design limitation of gazebo_ros_block_laser or am I using this incorrectly?
Thanks guys,
WW

Originally posted by WW on ROS Answers with karma: 86 on 2012-01-05
Post score: 0

A:

I was able to figure this out, if anyone is curious.
Changing the ray transform order in MultiRayShape.cc (gazebo) to yaw->pitch from pitch->yaw did the trick. Now my 360 degree lidar point cloud looks perfect. Without this change, the vertical component of the point cloud distance becomes inverted in the rear semi circle of the horizontal fov. Difficult to notice with small horizontal range.
Change line 116 to this:
axis.Set(cos(pitchAngle.GetAsRadian()) *
cos(yawAngle.GetAsRadian()),
cos(pitchAngle.GetAsRadian()) *
sin(yawAngle.GetAsRadian()),
sin(pitchAngle.GetAsRadian()));

Originally posted by WW with karma: 86 on 2012-02-09
This answer was ACCEPTED on the original site
Post score: 0

