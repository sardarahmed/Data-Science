Q:

World plugin tutorial, models not in the EntityTree

Hi,
Following the World Plugin tutorial http://gazebosim.org/tutorials?tut=plugins_world I noticed something strange.
After spawning the different models, they are not yet taken into account by the plugin.
For instance if you try World::PrintEntityTree(), it won't show the spawned models.
Is there a way to acces spawned model in the world plugin?
Thanks for your help

Originally posted by kincurt on Gazebo Answers with karma: 13 on 2018-11-16
Post score: 0

Original comments
Comment by kincurt on 2018-11-16:
That is particularly useful to insert identical models without name conflicts (changing the name right after spawn) because gazebo won't allow to spawn two time in a row an identical model.

A:

Hi,
i did something similar and recognized that i takes some time until the model is inserted correctly.
Assuming you use
world_->InsertModelSDF(modelSDF);

you could wait a bit
common::Time::MSleep(500); // sleep half a second

before printing out all models. Also make sure the simulation is running and not paused.
To access all models you can do something like:
for(std::vector<T>::iterator mod = world_->GetModels.begin(); mod != GetModels.end(); ++mod){
     printf("Model Name: %s",mod->GetName());
}

Two Edits to my Answer. They are probably not necessary! But i add them if someone runs in similar problems and the things above are not working:
MSleep(500) cause the thread to sleep, this may be problematic (or maybe not, depends :P). If its not working try to use:
  world_->Step(500); 

instead.
In the for loop maybe use:
std::vector<physics::Model>::iterator mod = ......

and not the generic type.

Originally posted by wentz with karma: 350 on 2018-11-16
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by kincurt on 2018-11-20:
Thanks ! :)
Comment by wentz on 2018-11-21:
Your Welcome :) I edited my answer, if it is already working for you, you can ignore it.

