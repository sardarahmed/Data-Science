Q:

Turtlebot Simulator Crashing when trying to subscribe to camera topics

Ubuntu 13.04 and Gazebo 1.9.1 - Hydro
This was all working this morning but I did touch something I shouldn't have so I had to reinstall a lot of things. It's been a rough day
I auto removed all of the gazebo and turtlebot_simulator stuff and reinstalled them.
This issue is also mirrored on my laptop.
Note: Keyboard teleop Control still works.
Rviz still works with point cloud data. Trying to get an image causes the crash also.
It loads in gazebo properly but trying to subscribe to the camera topics at all, ie typing:

rostopic echo /camera/depth/raw_image

causes this error
gzserver: /usr/include/boost/smart_ptr/shared_ptr.hpp:418: boost::shared_ptr<T>::reference boost::shared_ptr<T>::operator*() const [with T = boost::mutex; boost::shared_ptr<T>::reference = boost::mutex&]: Assertion `px != 0' failed.
Aborted (core dumped)
[gazebo-2] process has died [pid 21077, exit code 134, cmd /opt/ros/hydro/lib/gazebo_ros/gzserver /opt/ros/hydro/share/turtlebot_gazebo/worlds/empty.world __name:=gazebo __log:=/home/thesis/.ros/log/142f71ec-3553-11e3-a33b-0026b97f1590/gazebo-2.log].
log file: /home/thesis/.ros/log/142f71ec-3553-11e3-a33b-0026b97f1590/gazebo-2*.log

This is from the master.log. I'm not sure if it is relevent
    [rosmaster.master][INFO] 2013-10-15 14:33:44,077: publisherUpdate[/laserscan_nodelet_manager/bond] -> http://alex-zoom:58622/
[rosmaster.threadpool][ERROR] 2013-10-15 14:33:44,078: Traceback (most recent call last):
  File "/opt/ros/hydro/lib/python2.7/dist-packages/rosmaster/threadpool.py", line 218, in run
    result = cmd(*args)
  File "/opt/ros/hydro/lib/python2.7/dist-packages/rosmaster/master_api.py", line 189, in publisher_update_task
    xmlrpcapi(api).publisherUpdate('/master', topic, pub_uris)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1578, in __request
    verbose=self.__verbose
  File "/usr/lib/python2.7/xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1297, in single_request
    return self.parse_response(response)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1473, in parse_response
    return u.close()
  File "/usr/lib/python2.7/xmlrpclib.py", line 793, in close
    raise Fault(**self._stack[0])
Fault: <Fault -1: 'publisherUpdate: unknown method name'>

Originally posted by Alkaros on ROS Answers with karma: 103 on 2013-10-14
Post score: 0

A:

I just tested my deb installation and couldn't reproduce the error you described.
Btw, the correct topic name for the depth image stream should be: rostopic echo /camera/depth/image_raw. Even more convenient is:  rosrun image_view image_view image:=/camera/depth/image_raw
My setup:

Ubuntu 12.04.2 (64bit)
Gazebo 1.9.1
ROS Hydro (shadow-fixed)
create-gazebo-plugins 2.2.0
gazebo-ros-pgks 2.3.3
kobuki-gazebo-plugins 0.3.1
turtlebot-gazebo 2.1.1

You might are experiencing some errors due to the current Gazebo 2.0 glitches. Try re-installing all Gazebo-related packages.
If that doesn't help, try switching to "shadow-fixed" by replacing deb http://packages.ros.org/ros/ubuntu <your_ubuntu_version> main with deb http://packages.ros.org/ros-shadow-fixed/ubuntu <your_ubuntu_version> main in /etc/apt/sources.list.d/ros-latest.list. Then you will be able to get more recent versions (the ones I have listed above).

Originally posted by bit-pirate with karma: 2062 on 2013-10-16
This answer was ACCEPTED on the original site
Post score: 0

