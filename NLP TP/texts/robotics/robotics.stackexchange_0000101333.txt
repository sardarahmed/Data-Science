Q:

How to cancel ros2 action with ros2 cpp action client

Pleas provide ros2 cpp example client to cancel actions

Originally posted by anadgopi1994 on ROS Answers with karma: 81 on 2022-03-09
Post score: 1

A:

As you wish https://github.com/ros-planning/navigation2/blob/643bb0f4912494389be580763784203ec60aeb39/nav2_behavior_tree/include/nav2_behavior_tree/bt_action_node.hpp#L280-L287
  auto future_cancel = action_client_->async_cancel_goal(goal_handle_);
  if (callback_group_executor_.spin_until_future_complete(future_cancel, server_timeout_) !=
    rclcpp::FutureReturnCode::SUCCESS)
  {
    RCLCPP_ERROR(
      node_->get_logger(),
      "Failed to cancel action server for %s", action_name_.c_str());
  }
}

Originally posted by stevemacenski with karma: 8272 on 2022-03-10
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Pablo IÃ±igo Blasco on 2022-09-07:
I think there is something weird around. According with your code we need the goal_handle_ to cancel the action. Ok, sounds good. But it  turns out that you get that goal_handle_ value only after the future of the response of the original request is resolved.
https://github.com/ros-planning/navigation2/blob/643bb0f4912494389be580763784203ec60aeb39/nav2_behavior_tree/include/nav2_behavior_tree/bt_action_node.hpp#L377

