Q:

shadows of the household objects in gazebo

Hello, does anybody know how to spawn complex objects in gazebo and still render the shadows nicely?
I am using the meshes from the household database and spawning urdfs in gazebo.
However, I get the following error:
gazebo: /tmp/buildd/ros-cturtle-visualization-common-1.2.0/debian/ros-cturtle-
visualization-common/opt/ros/cturtle/stacks/visualization_common/ogre/build
/ogre_src_v1-7-1/OgreMain/src/OgreShadowCaster.cpp:348: 
virtual void Ogre::ShadowCaster::generateShadowVolume(Ogre::EdgeData*, const   
Ogre::HardwareIndexBufferSharedPtr&, const Ogre::Light*,  
std::vector<Ogre::ShadowRenderable*, Ogre::STLAllocator<Ogre::ShadowRenderable*,  
 Ogre::CategorisedAllocPolicy<(Ogre::MemoryCategory)0u> > >&, long unsigned int): Assertion 
`numIndices <= indexBuffer->getNumIndexes() && "Index buffer overrun while generating 
shadow volume!! " "You must increase the size of the shadow index buffer."' failed.
[gazebo-1] process has died [pid 2190, exit code -6].
log files: /afs/athena.mit.edu/user/m/i/mitko/.ros/log/7bb452c2-ad85-11e0-9e9f-0025900a1f7d
/gazebo-1*.log

By asking around I found that if I turn the shadows off in the world file this is fixed (and it is- I tried), but then the rendering is quite ugly and I actually need the rendering to be good (in order to export some videos).
Does anybody know how I can increase the shadow index buffer, or use different shadowing technique? I tried:
<shadowTechnique>textureAdditive</shadowTechnique>

but the error persists.
Also, any ideas if I can turn the shadows off of only the household objects?
Thank you.

Originally posted by Dimitar Simeonov on ROS Answers with karma: 535 on 2011-07-13
Post score: 0

A:

try
<shadowTechnique>stencilModulative</shadowTechnique>
<shadows>true</shadows>

See if that helps.
Also, there isn't a way to turn off shadows on a per-object basis right now.

Originally posted by hsu with karma: 5780 on 2011-07-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Dimitar Simeonov on 2011-07-14:
I/O ports at ec00 [size=128]
[virtual] Expansion ROM at f5f80000 [disabled] [size=512K]
Capabilities: 
Kernel driver in use: nvidia
Kernel modules: nvidia-current, nvidiafb, nouveau
Comment by Dimitar Simeonov on 2011-07-14:
85:00.0 VGA compatible controller: nVidia Corporation Device 0e22 (rev a1)
Subsystem: Giga-byte Technology Device 34fc
Flags: bus master, fast devsel, latency 0, IRQ 16
Memory at f6000000 (32-bit, non-prefetchable) [size=32M]
Memory at d8000000 (64-bit, prefetchable) [size=128M]
Comment by Dimitar Simeonov on 2011-07-14:
http://people.csail.mit.edu/mitko/gazebo_stuff.tar.gz - I hope that will be easier
Comment by hsu on 2011-07-14:
what does lspci -v say about your video card?  Sounds quite modern, probably not the problem.   Can you tar up the files or put in a repository?  getting thousands of files over http is not as easy as I thought.  thanks.
Comment by Dimitar Simeonov on 2011-07-14:
I couldn't find the exact name of the video card but it is NVIDIA with 336 GPU cores and 1GB of memory
Comment by Dimitar Simeonov on 2011-07-14:
Thanks for trying this - I posted the files you'll need at http://people.csail.mit.edu/mitko/gazebo_stuff/ look at README_hsu for instructions about the files - it is pretty much the wg.world with some urdf objects created from the household_database objects. I haven't tried another machine yet.
Comment by hsu on 2011-07-14:
is it possible for you to post your world file so I can see if I can replicate it?  Have you tried on a different machine? what graphics card are you using?  thanks.
Comment by Dimitar Simeonov on 2011-07-14:
hsu, just to let you know - it didn't work in diamondback - as soon as i try to change the initial viewpoint gazebo crashes with the same error. I will use shadowless simulation for now.
Comment by Dimitar Simeonov on 2011-07-14:
I cannot decrease the number because these are the household_database meshes. I will try diamondback and let you know how it works.
Comment by hsu on 2011-07-13:
hm, how many vertices/faces are in your simulation world meshes?  Can you try reducing the number down a bit?  Or switch to diamondback?
Comment by Dimitar Simeonov on 2011-07-13:
Thanks, hsu, for the quick answer. However, the same error persists but it has strange behavior - if I don't do anything gazebo stays alive - if I try to move the viewpoint or to start rviz, gazebo crashes.

