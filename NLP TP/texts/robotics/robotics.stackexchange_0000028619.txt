Q:

Cannot spawnModel from MATLAB

I want to do connection between MATLAB and Gazebo and generate Gazebo model from MATLAB. I follow the instruction in add-build-and-remove-objects-in-gazebo, and the following commands work successfully.
rosinit(ipaddress)
gazebo = ExampleHelperGazeboCommunicator;
ball = ExampleHelperGazeboModel('Ball') 
spherelink = addLink(ball,'sphere',1,'color',[0 0 1 1])

But when I run the next command spawnModel(gazebo,ball,[8.5,0,1]), the errors show up in MATLAB command window:
Error using ExampleHelperGazeboCommunicator/startModelServices (line 334)
Failed to create a /gazebo/get_model_state service client.

Error in ExampleHelperGazeboCommunicator/spawnModel (line 290)
            startModelServices(obj);

[ERROR] ServiceClientHandshakeHandler - Service client handshake failed: client wants service 
/gazebo/get_model_state to have md5sum af0f702011820738976b120226dc9d96, but it has 
4c515e936d3319c9610c559c60bfc3d4. Dropping connection.

The error shown in ubuntu terminal is
[ERROR] ServiceClientHandshakeHandler - Service client handshake failed: client wants service 
/gazebo/get_model_state to have md5sum af0f702011820738976b120226dc9d96, but it has 
4c515e936d3319c9610c559c60bfc3d4. Dropping connection.

I use matlab 2018b, Robotics System Toolbox2.1 on win10, and Ubuntu18.04, ROS melodic, gazebo9 in virtualbox, which are all newest version. Does anyone know how to solve it?

Originally posted by jwchang on Gazebo Answers with karma: 15 on 2018-10-15
Post score: 0

A:

Solution is here Update MATLAB's ROS Messages
Update rosjava_messages.jar and then spawn models successfully.

Originally posted by jwchang with karma: 15 on 2018-10-23
This answer was ACCEPTED on the original site
Post score: 0

