Q:

Can I update global map with only one specific pointcloud topic?

Hi,
I'm using the move base on my robot for navigation, but I have some special needs regarding how the global map and local map should be updated. The robot have two sensors for mapping, a depth camera (/point_cloud) and a laser scan (/scan). And I will publish another topic which includes the point clouds of verified obstacles (/verified_cloud). For the local map, I want to update it with the laser scan result. For the global map, I want to update it with only the verified point clouds that I published (/verified_cloud). If there is nothing published on /verified_cloud topic, I don't want the global map gets updated even the laser scan found an obstacle.
I have my yaml files like this:
costmap_common_params.yaml
obstacle_range: 2.5 
raytrace_range: 3.0
robot_radius: 0.25
inflation_radius: 0.5

global_costmap_params.yaml
global_costmap:
  global_frame: /map
  robot_base_frame: base_link
  update_frequency: 5.0
  static_map: true

observation_sources: point_cloud_sensor

point_cloud_sensor: {sensor_frame: map, data_type: PointCloud2, topic: /verified_clouds, marking: true, clearing: false}

local_costmap_params.yaml
local_costmap:
  global_frame: map
  robot_base_frame: base_link
  update_frequency: 5.0
  publish_frequency: 2.0
  static_map: false
  rolling_window: true
  width: 6.0
  height: 6.0
  resolution: 0.05

observation_sources: laser_scan_sensor 

laser_scan_sensor: {sensor_frame: base_range_sensor_link, data_type: LaserScan, topic: /scan, marking: true, clearing: true}

However, I find that the global map is still getting updated from the laser scan results. Can you help me stop the global map updating from laser scan? Thanks in advance!!!

Originally posted by mzWang on ROS Answers with karma: 39 on 2018-10-17
Post score: 0

A:

It looks like you've defined your observation sources in the root of the file, outside the local/global costmap scope (look at the indentation). Try again with those sources and the configuration of the sources in their respective scopes.

Originally posted by stevemacenski with karma: 8272 on 2018-10-17
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by mzWang on 2018-10-17:
I see. Thank you! I'll try it out tomorrow.
Comment by mzWang on 2018-10-18:
You are correct! I need to put those sources in right scope. Thanks again!

