Q:

Textures/colors problem. Large model almost black

Hi,
I have a problem with a collada (.dae) model and Gazebo. I've got a race circuit model made with sketchUp

and I've exported it to a collada format (.dae). The problem is: when I import that collada file to Gazebo it appears almost black, as you can see in this image:

You can see that the ground_plane model has proper lighting, unlike my model. I only can barely see the textures applied to the model if I get near to it (see the grass and the building):

I'm almost sure that the problems come with the textures and color applied to the model, but I've no clue how to solve this issue. I've tried to modify the sun parameters in Gazebo, I've also tried to invert all the faces just to make sure is not a normals inverted problem, I've created a world with no lights at all and included an scene tas, as this one:
<scene>
    <ambient>0.5 0.5 0.5 1.0</ambient>
    <shadows>0</shadows>
</scene>

But all of this ends the same, the model almost black. I've also try to uncheck "cast shadows" in the sun model. Also, when I include a point light the changes on the lighting are negligible. After some researching within this forum, I've reached no answer to my problem.
Do you know what is happening?
Thanks in advance!

Originally posted by fqez on Gazebo Answers with karma: 3 on 2016-02-18
Post score: 0

A:

The problem is likely in your collada file. The materials in the collada file may have very low ambient values.
Can you somehow share the collada file?

Originally posted by nkoenig with karma: 7676 on 2016-02-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by fqez on 2016-02-18:
I'm not sure if I can post external links, but here we are: https://www.dropbox.com/s/imurx0jh9urpxr0/circuit.zip?dl=0
Thanks!
Comment by nkoenig on 2016-02-18:
It looks like there are no <ambient> tags in your collada file. Gazebo defaults to an ambient value of [0.4, 0.4, 0.4] which could explain why your model is dim. Does Sketchup have options to add ambient values to a model?
Comment by fqez on 2016-02-18:
No, I can't see that option. I tried to add the ambient tag to the grass texture but it doesn't seem to change either (not sure if I did properly tho). Should I export it to another format and then use another converter; like .skp --> .3ds --> .dae
Thanks
Comment by nkoenig on 2016-02-18:
You could try loading the model into Blender, and export from Blender. Here is an example collada file with ambient: https://bitbucket.org/osrf/gazebo_models/raw/default/youbot/meshes/base/base.dae
Comment by fqez on 2016-02-19:
Hi Nate, thank you very much for your tips! Now I have a better result of the model. It's still dark if it's far away from the sun but it can be seen now clearly. The solution for me is:
1- Import the .dae file to Blender.
2- Export it again in .dae format from Blender (now it has tags
3- Replace all 0 0 0 1 to 1 1 1 1.
I do that manual change because I don't know how to apply ambient values to the faces of my model yet. But it works!
Thanks again!
Comment by rohitsuri on 2017-01-08:
Hey! I was facing the same issue. I tried importing to Blender and exporting from it. It worked, however, I lost all the textures. Did you face this problem? If yes, how did you solve it?
Comment by fqez on 2017-06-26:
Yes, you have to set your texture options when you export your model. When you click "export" there is a menu in the left which has a section named "Texture options" so you have to check "include UV textures" or "Include materia textures" depending on your needs.

