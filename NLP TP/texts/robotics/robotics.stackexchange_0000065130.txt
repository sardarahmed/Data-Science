Q:

rqt custom imageView. Showing images from different cameras

Hi to all,
On several occasions I have created rqt plugins for monitoring different devices, and for interacting with robots graphically.
In this occasion, i have a robot with eight video cameras and i want to visualize all of them in rqt.
My idea is to create a menu in "Plugins", with a group named Cameras and within it, all the cameras of the robot. I mean:

Plugins
   |_ Cameras
          |_ Top_camera
          |_ Right_camera
          |_ Left_camera
          |_ ...

I already know that exists the image_view plugin for this type of things. But i need that an end user can choose between all of the cameras easily. When the user select, for example, Top_camera, it should appear an image_view screen with the current images of that camera. (In other words, i need an image_view with the image topic already selected. Totally transparent for the user).
Is possible to do this, reusing the already implemented image_view plugin?
I am modifying the plugin.xml file to launch multiple instances, unsuccessfully:
 <class name="rqt_image_view/ImageView" type="rqt_image_view::ImageView" base_class_type="rqt_gui_cpp::Plugin">
    <description>
       Cameras
    </description>
    <qtgui>

      <group>
        <label>Cameras</label>
        <icon type="theme">folder-new</icon>
      </group>

      <label>PTZ top</label>
      <icon type="theme">camera-photo</icon>
      <statustip>Great user interface.</statustip>
    </qtgui>
  </class>

I should need eight different image_view with the corresponding topic preselected. How can i do it?
Thank you very much in advance ;)

Originally posted by Jose Luis on ROS Answers with karma: 375 on 2015-01-13
Post score: 4

A:

Finally I have achieved that i want. I have followed the suggestions of @130s and I have added other things that were necessary.
Perhaps my solution is not the best one or there are another possibilities, but it works perfect.
To obtain a custom ImageView plugin for each camera, I have done the following:

I've copied the original code of imageView into my own package.
I've modified some lines in the code for getting the image topic that i want for each camera.
I've created one class for each camera. (This is necessary because you need to instantiate the classes in the "plugin.xml" file and the attribute must be different for each instance)
I only use one .ui file. All the classes are using the same file:

--- CMakelist.txt ---
    set(my_cameras_UIS  src/my_cameras/image_view.ui)

The main concept to understand is in plugin.xml:

The Class name tag must be different for each instance.
I have obtained this:

Hopefully this will be useful for others.

Originally posted by Jose Luis with karma: 375 on 2015-01-19
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Dirk Thomas on 2015-01-19:
Instead of copying the code it would be much better to reuse the code of the existing plugin. If it does not provide the necessary API for that you might consider providing a pull request to enhance the existing plugin in a way that you can reuse it's functionality for you custom plugin.
Comment by Jose Luis on 2015-01-20:
I know what you say, is the best way to do this. But in this case, i needed a very concrete thing, with little changes in the code. It is not very reusable for others. I think that a pull request should be done with generic code.Thus, i have done it by this way.I appreciate your contribution, thanks

