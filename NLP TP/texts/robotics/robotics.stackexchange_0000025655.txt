Q:

erratic simulation does not work after ubuntu updates

I have been successfully using the erratic robot simulation in Gazebo (fuerte on ubuntu 12.04). I know this is not the recommended way to use Gazebo now, but I have been using simulator_gazebo 1.6.16 (I have just installed Gazebo 1.3).
I installed the erratic robot for simulation using:

sudo apt-get install ros-fuerte-erratic-robot

After some updates were installed (including python-rospkg, ros-fuerte-pr2-controllers, and ros-fuerte-pr2-mechanism) using the ubuntu update manager, I have not been able to launch Gazebo with the erratic robot.
For example, the output of

roslaunch erratic_navigation_apps demo_2dnav_slam.launch

(from (http://www.ros.org/wiki/simulator_gazebo/Tutorials/TeleopErraticSimulation)) is:

This code block was moved to the following github gist:
https://gist.github.com/answers-se-migration-openrobotics/0de983bba3c735ff03db3220ebd89dce

I'm not sure how much of the log files to post, but here is part of the master.log that contains an error (this error also occurs again later in the log file):
...
[rosmaster.master][INFO] 2013-01-15 11:44:10,003: +PUB [/base_scan/scan] /gazebo http://scott-ub:34652/
[rosmaster.master][ERROR] 2013-01-15 11:44:10,004: Traceback (most recent call last):
  File "/opt/ros/fuerte/lib/python2.7/dist-packages/rosmaster/master_api.py", line 161, in validated_f
    code, msg, val = f(*newArgs, **kwds)
  File "/opt/ros/fuerte/lib/python2.7/dist-packages/rosmaster/master_api.py", line 406, in searchParam
    search_key = self.param_server.search_param(caller_id, key)
  File "/opt/ros/fuerte/lib/python2.7/dist-packages/rosmaster/paramserver.py", line 116, in search_param
    raise ValueError("namespace must be global")
ValueError: namespace must be global

And this is the full text of the spawn_robot-4.log:
[rospy.client][INFO] 2013-01-15 11:44:08,337: init_node, name[/spawn_robot], pid[14482]
[xmlrpc][INFO] 2013-01-15 11:44:08,337: XML-RPC server binding to 0.0.0.0
[xmlrpc][INFO] 2013-01-15 11:44:08,338: Started XML-RPC server [http://scott-ub:45884/]
[rospy.init][INFO] 2013-01-15 11:44:08,338: ROS Slave URI: [http://scott-ub:45884/]
[rospy.impl.masterslave][INFO] 2013-01-15 11:44:08,338: _ready: http://scott-ub:45884/
[rospy.registration][INFO] 2013-01-15 11:44:08,338: Registering with master node http://localhost:11311
[xmlrpc][INFO] 2013-01-15 11:44:08,339: xml rpc node: starting XML-RPC server
[rospy.init][INFO] 2013-01-15 11:44:08,438: registered with master
[rospy.rosout][INFO] 2013-01-15 11:44:08,438: initializing /rosout core topic
[rospy.rosout][INFO] 2013-01-15 11:44:08,440: connected to core topic /rosout
[rospy.simtime][INFO] 2013-01-15 11:44:08,442: initializing /clock core topic
[rospy.simtime][INFO] 2013-01-15 11:44:08,445: connected to core topic /clock
[rosout][INFO] 2013-01-15 11:44:08,449: waiting for service /gazebo/spawn_urdf_model
[rospy.internal][INFO] 2013-01-15 11:44:08,453: topic[/clock] adding connection to [http://scott-ub:34652/], count 0
[rospy.internal][INFO] 2013-01-15 11:44:08,708: topic[/rosout] adding connection to [/rosout], count 0
[rospy.core][INFO] 2013-01-15 11:44:10,328: signal_shutdown [atexit]
[rospy.internal][WARNING] 2013-01-15 11:44:10,329: Unknown error initiating TCP/IP socket to scott-ub:32926 (http://scott-ub:34652/): Traceback (most recent call last):
  File "/opt/ros/fuerte/lib/python2.7/dist-packages/rospy/impl/tcpros_base.py", line 511, in connect
    self.socket.connect((dest_addr, dest_port))
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
error: [Errno 111] Connection refused

[rospy.internal][INFO] 2013-01-15 11:44:10,330: topic[/rosout] removing connection to /rosout
[rospy.impl.masterslave][INFO] 2013-01-15 11:44:10,330: atexit

None of the other log files have errors in them. Thanks in advance for any suggestions.
EDIT: I tried in groovy (there is not a debian for erratic in groovy, so I downloaded and compiled the source).
When using simulator_gazebo (1.2.5), executing

roslaunch erratic_navigation_apps demo_2dnav_slam.launch

results in
... logging to /home/scott/.ros/log/b7ffc898-6980-11e2-bc25-782bcbb7d7cd/roslaunch-scott-ub-8096.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://scott-ub:36638/

SUMMARY
========

PARAMETERS
 * /base_laser_self_filter/min_sensor_dist
 * /base_laser_self_filter/self_see_default_padding
 * /base_laser_self_filter/self_see_default_scale
 * /base_laser_self_filter/self_see_links
 * /base_laser_self_filter/sensor_frame
 * /base_shadow_filter/high_fidelity
 * /base_shadow_filter/scan_filter_chain
 * /base_shadow_filter/target_frame
 * /move_base_node/NavfnROS/allow_unknown
 * /move_base_node/TrajectoryPlannerROS/acc_lim_th
 * /move_base_node/TrajectoryPlannerROS/acc_lim_x
 * /move_base_node/TrajectoryPlannerROS/acc_lim_y
 * /move_base_node/TrajectoryPlannerROS/dwa
 * /move_base_node/TrajectoryPlannerROS/escape_vel
 * /move_base_node/TrajectoryPlannerROS/goal_distance_bias
 * /move_base_node/TrajectoryPlannerROS/heading_lookahead
 * /move_base_node/TrajectoryPlannerROS/holonomic_robot
 * /move_base_node/TrajectoryPlannerROS/max_rotational_vel
 * /move_base_node/TrajectoryPlannerROS/max_vel_x
 * /move_base_node/TrajectoryPlannerROS/min_in_place_rotational_vel
 * /move_base_node/TrajectoryPlannerROS/min_vel_x
 * /move_base_node/TrajectoryPlannerROS/occdist_scale
 * /move_base_node/TrajectoryPlannerROS/oscillation_reset_dist
 * /move_base_node/TrajectoryPlannerROS/path_distance_bias
 * /move_base_node/TrajectoryPlannerROS/sim_granularity
 * /move_base_node/TrajectoryPlannerROS/sim_time
 * /move_base_node/TrajectoryPlannerROS/vtheta_samples
 * /move_base_node/TrajectoryPlannerROS/vx_samples
 * /move_base_node/TrajectoryPlannerROS/xy_goal_tolerance
 * /move_base_node/TrajectoryPlannerROS/yaw_goal_tolerance
 * /move_base_node/aggressive_clear/reset_distance
 * /move_base_node/clearing_radius
 * /move_base_node/conservative_clear/reset_distance
 * /move_base_node/controller_frequency
 * /move_base_node/controller_patience
 * /move_base_node/footprint
 * /move_base_node/footprint_padding
 * /move_base_node/global_costmap/base_scan/clearing
 * /move_base_node/global_costmap/base_scan/data_type
 * /move_base_node/global_costmap/base_scan/expected_update_rate
 * /move_base_node/global_costmap/base_scan/marking
 * /move_base_node/global_costmap/base_scan/max_obstacle_height
 * /move_base_node/global_costmap/base_scan/min_obstacle_height
 * /move_base_node/global_costmap/base_scan/observation_persistence
 * /move_base_node/global_costmap/base_scan/sensor_frame
 * /move_base_node/global_costmap/base_scan/topic
 * /move_base_node/global_costmap/base_scan_marking/clearing
 * /move_base_node/global_costmap/base_scan_marking/data_type
 * /move_base_node/global_costmap/base_scan_marking/expected_update_rate
 * /move_base_node/global_costmap/base_scan_marking/marking
 * /move_base_node/global_costmap/base_scan_marking/max_obstacle_height
 * /move_base_node/global_costmap/base_scan_marking/min_obstacle_height
 * /move_base_node/global_costmap/base_scan_marking/observation_persistence
 * /move_base_node/global_costmap/base_scan_marking/sensor_frame
 * /move_base_node/global_costmap/base_scan_marking/topic
 * /move_base_node/global_costmap/global_frame
 * /move_base_node/global_costmap/inflation_radius
 * /move_base_node/global_costmap/map_type
 * /move_base_node/global_costmap/observation_sources
 * /move_base_node/global_costmap/obstacle_range
 * /move_base_node/global_costmap/publish_frequency
 * /move_base_node/global_costmap/raytrace_range
 * /move_base_node/global_costmap/robot_base_frame
 * /move_base_node/global_costmap/rolling_window
 * /move_base_node/global_costmap/static_map
 * /move_base_node/global_costmap/transform_tolerance
 * /move_base_node/global_costmap/unknown_cost_value
 * /move_base_node/global_costmap/update_frequency
 * /move_base_node/local_costmap/base_scan/clearing
 * /move_base_node/local_costmap/base_scan/data_type
 * /move_base_node/local_costmap/base_scan/expected_update_rate
 * /move_base_node/local_costmap/base_scan/marking
 * /move_base_node/local_costmap/base_scan/max_obstacle_height
 * /move_base_node/local_costmap/base_scan/min_obstacle_height
 * /move_base_node/local_costmap/base_scan/observation_persistence
 * /move_base_node/local_costmap/base_scan/sensor_frame
 * /move_base_node/local_costmap/base_scan/topic
 * /move_base_node/local_costmap/base_scan_marking/clearing
 * /move_base_node/local_costmap/base_scan_marking/data_type
 * /move_base_node/local_costmap/base_scan_marking/expected_update_rate
 * /move_base_node/local_costmap/base_scan_marking/marking
 * /move_base_node/local_costmap/base_scan_marking/max_obstacle_height
 * /move_base_node/local_costmap/base_scan_marking/min_obstacle_height
 * /move_base_node/local_costmap/base_scan_marking/observation_persistence
 * /move_base_node/local_costmap/base_scan_marking/sensor_frame
 * /move_base_node/local_costmap/base_scan_marking/topic
 * /move_base_node/local_costmap/global_frame
 * /move_base_node/local_costmap/height
 * /move_base_node/local_costmap/inflation_radius
 * /move_base_node/local_costmap/map_type
 * /move_base_node/local_costmap/observation_sources
 * /move_base_node/local_costmap/obstacle_range
 * /move_base_node/local_costmap/origin_x
 * /move_base_node/local_costmap/origin_y
 * /move_base_node/local_costmap/publish_frequency
 * /move_base_node/local_costmap/publish_voxel_map
 * /move_base_node/local_costmap/raytrace_range
 * /move_base_node/local_costmap/resolution
 * /move_base_node/local_costmap/robot_base_frame
 * /move_base_node/local_costmap/rolling_window
 * /move_base_node/local_costmap/static_map
 * /move_base_node/local_costmap/transform_tolerance
 * /move_base_node/local_costmap/update_frequency
 * /move_base_node/local_costmap/width
 * /move_base_node/recovery_behaviors
 * /robot_description
 * /robot_state_publisher/publish_frequency
 * /robot_state_publisher/tf_prefix
 * /rosdistro
 * /rosversion
 * /slam_gmapping/angularUpdate
 * /slam_gmapping/astep
 * /slam_gmapping/base_frame
 * /slam_gmapping/delta
 * /slam_gmapping/iterations
 * /slam_gmapping/kernelSize
 * /slam_gmapping/lasamplerange
 * /slam_gmapping/lasamplestep
 * /slam_gmapping/linearUpdate
 * /slam_gmapping/llsamplerange
 * /slam_gmapping/llsamplestep
 * /slam_gmapping/lsigma
 * /slam_gmapping/lskip
 * /slam_gmapping/lstep
 * /slam_gmapping/map_update_interval
 * /slam_gmapping/maxUrange
 * /slam_gmapping/odom_frame
 * /slam_gmapping/ogain
 * /slam_gmapping/particles
 * /slam_gmapping/resampleThreshold
 * /slam_gmapping/sigma
 * /slam_gmapping/srr
 * /slam_gmapping/srt
 * /slam_gmapping/str
 * /slam_gmapping/stt
 * /slam_gmapping/temporalUpdate
 * /slam_gmapping/xmax
 * /slam_gmapping/xmin
 * /slam_gmapping/ymax
 * /slam_gmapping/ymin
 * /use_sim_time

NODES
  /move_base_node/local_costmap/
    voxel_grid_throttle (topic_tools/throttle)
  /
    base_laser_self_filter (robot_self_filter/self_filter)
    base_shadow_filter (laser_filters/scan_to_cloud_filter_chain)
    gazebo (gazebo/gazebo)
    gazebo_gui (gazebo/gui)
    move_base_node (move_base/move_base)
    robot_state_publisher (robot_state_publisher/state_publisher)
    slam_gmapping (gmapping/slam_gmapping)
    spawn_robot (gazebo/spawn_model)
    voxel_visualizer (costmap_2d/costmap_2d_markers)

auto-starting new master
process[master]: started with pid [8120]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to b7ffc898-6980-11e2-bc25-782bcbb7d7cd
process[rosout-1]: started with pid [8133]
started core service [/rosout]
process[gazebo-2]: started with pid [8147]
Gazebo multi-robot simulator, version 1.2.5
Copyright (C) 2012 Nate Koenig, John Hsu, and contributors.
Released under the Apache 2 License.
http://gazebosim.org

process[gazebo_gui-3]: started with pid [8170]
Warning [parser.cc:358] Converting a deprecatd SDF source[/opt/ros/groovy/stacks/simulator_gazebo/gazebo_worlds/worlds/wg_collada.world].
  Version[1.0] to Version[1.2]
  Please use the gzsdf tool to update your SDF files.
    $ gzsdf convert [sdf_file]
Warning [Converter.cc:191] Deprecated SDF Values in original file:
<background rgba='0.5 0.5 0.5 1'

Warning [Converter.cc:191] Deprecated SDF Values in original file:
<background

Gazebo multi-robot simulator, version 1.2.5
Copyright (C) 2012 Nate Koenig, John Hsu, and contributors.
Released under the Apache 2 License.
http://gazebosim.org

Msg Waiting for master[ INFO] [1359401238.297721514]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...

Msg Connected to gazebo master @ http://localhost:11345
Msg Waiting for master
Msg Connected to gazebo master @ http://localhost:11345
process[spawn_robot-4]: started with pid [8208]
process[robot_state_publisher-5]: started with pid [8209]
/opt/ros/groovy/lib/robot_state_publisher/state_publisher
[ WARN] [1359401238.509989899]: The 'state_publisher' executable is deprecated. Please use 'robot_state_publisher' instead
[ERROR] [1359401238.512125486]: Material [Green] color has no rgba
[ERROR] [1359401238.512163917]: Material [Green] not defined in file
[ERROR] [1359401238.512226471]: Material [Blue] color has no rgba
[ERROR] [1359401238.512240719]: Material [Blue] not defined in file
[ERROR] [1359401238.512312242]: Material [Black] color has no rgba
[ERROR] [1359401238.512326624]: Material [Black] not defined in file
[ERROR] [1359401238.512398933]: Material [Black] color has no rgba
[ERROR] [1359401238.512414554]: Material [Black] not defined in file
[ERROR] [1359401238.512454940]: Material [Black] color has no rgba
[ERROR] [1359401238.512467869]: Material [Black] not defined in file
[ WARN] [1359401238.512779639]: The root link base_footprint has an inertia specified in the URDF, but KDL does not support a root link with an inertia.  As a workaround, you can add an extra dummy link to your URDF.
process[base_shadow_filter-6]: started with pid [8233]
process[base_laser_self_filter-7]: started with pid [8332]
process[slam_gmapping-8]: started with pid [8367]
process[move_base_node/local_costmap/voxel_grid_throttle-9]: started with pid [8368]
process[move_base_node-10]: started with pid [8442]
process[voxel_visualizer-11]: started with pid [8468]
[ INFO] [1359401239.481263489]: Subscribed to Topics: base_scan base_scan_marking
[ INFO] [1359401239.488517705]: Requesting the map...

[ INFO] [1359401239.489302008]: Still waiting on map...

loading model xml from ros parameter
[INFO] [WallTime: 1359401239.585223] [0.000000] waiting for service /gazebo/spawn_urdf_model
Error [TrimeshShape.cc:59] <mesh><filename>/opt/ros/groovy/stacks/simulator_gazebo/gazebo_worlds/Media/models/willowgarage2.stl</filename></mesh> is deprecated.
Error [TrimeshShape.cc:61] Use <mesh><uri>file:///opt/ros/groovy/stacks/simulator_gazebo/gazebo_worlds/Media/models/willowgarage2.stl</uri></mesh>
Warning [parser.cc:374] Gazebo SDF has no <gazebo> element in file[data-string]
Warning [parser_urdf.cc:437] do nothing with canonicalBody
Dbg [base_footprint] has no parent joint
Warning [parser.cc:313] parse from urdf.
[ INFO] [1359401240.463746266]: Laser plugin missing <hokuyoMinIntensity>, defaults to 101
[ INFO] [1359401240.463824837]: INFO: gazebo_ros_laser plugin should set minimum intensity to 101.000000 due to cutoff in hokuyo filters.
spawn status:  SpawnModel: successfully spawned model
Dbg plugin parent sensor name: robot_description
[ INFO] [1359401240.545290761]: starting diffdrive plugin in ns: 
[ INFO] [1359401240.608129322]: pluginlib WARNING: PLUGINLIB_DECLARE_CLASS is deprecated, please use PLUGINLIB_EXPORT_CLASS instead. You can run the script 'plugin_macro_update' provided with pluginlib in your package source folder to automatically and recursively update legacy macros.
[ INFO] [1359401240.608335488]: pluginlib WARNING: PLUGINLIB_DECLARE_CLASS is deprecated, please use PLUGINLIB_EXPORT_CLASS instead. You can run the script 'plugin_macro_update' provided with pluginlib in your package source folder to automatically and recursively update legacy macros.
[ INFO] [1359401240.608380390]: pluginlib WARNING: PLUGINLIB_DECLARE_CLASS is deprecated, please use PLUGINLIB_EXPORT_CLASS instead. You can run the script 'plugin_macro_update' provided with pluginlib in your package source folder to automatically and recursively update legacy macros.
[ INFO] [1359401240.608418552]: pluginlib WARNING: PLUGINLIB_DECLARE_CLASS is deprecated, please use PLUGINLIB_EXPORT_CLASS instead. You can run the script 'plugin_macro_update' provided with pluginlib in your package source folder to automatically and recursively update legacy macros.
Dbg plugin model name: robot_description
[ INFO] [1359401240.608567660]: starting gazebo_ros_controller_manager plugin in ns: 
[ INFO] [1359401240.608693151]: Callback thread id=0x7f275c7ada00
[spawn_robot-4] process has finished cleanly
log file: /home/scott/.ros/log/b7ffc898-6980-11e2-bc25-782bcbb7d7cd/spawn_robot-4*.log
Dbg plugin parent sensor name: robot_description
[ INFO] [1359401266.210791346, 0.001000000]: starting diffdrive plugin in ns: 
Dbg plugin model name: robot_description
[ INFO] [1359401266.213961598, 0.001000000]: starting gazebo_ros_controller_manager plugin in ns: 
[ INFO] [1359401266.214127828, 0.001000000]: Callback thread id=0x7f275c81f820
[ERROR] [1359401266.436481894, 0.001000000]: Tried to advertise a service that is already advertised in this node [/pr2_controller_manager/list_controllers]
[ERROR] [1359401266.436593701, 0.001000000]: Tried to advertise a service that is already advertised in this node [/pr2_controller_manager/list_controller_types]
[ERROR] [1359401266.436684166, 0.001000000]: Tried to advertise a service that is already advertised in this node [/pr2_controller_manager/load_controller]
[ERROR] [1359401266.436768297, 0.001000000]: Tried to advertise a service that is already advertised in this node [/pr2_controller_manager/unload_controller]
[ERROR] [1359401266.436869158, 0.001000000]: Tried to advertise a service that is already advertised in this node [/pr2_controller_manager/switch_controller]
[ERROR] [1359401266.436943296, 0.001000000]: Tried to advertise a service that is already advertised in this node [/pr2_controller_manager/reload_controller_libraries]
[ INFO] [1359401266.457805476, 0.022000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.
[ INFO] [1359401266.495811250, 0.056000000]: Starting to spin physics dynamic reconfigure node...
[ WARN] [1359401267.061316070, 0.601000000]: Message from [/base_shadow_filter] has a non-fully-qualified frame_id [base_footprint]. Resolved locally to [/base_footprint].  This is will likely not work in multi-robot systems.  This message will only print once.
 -maxUrange 4 -maxUrange 3.99 -sigma     0.05 -kernelSize 1 -lstep 0.05 -lobsGain 3 -astep 0.05
 -srr 0.01 -srt 0.02 -str 0.01 -stt 0.02
 -linearUpdate 0.5 -angularUpdate 0.436 -resampleThreshold 0.5
 -xmin -10 -xmax 10 -ymin -10 -ymax 10 -delta 0.025 -particles 80
[ INFO] [1359401267.063221833, 0.601000000]: Initialization complete
update frame 0
update ld=0 ad=0
Laser Pose= 1.08887e-05 2.92677e-12 1.11502e-05
m_count 0
Registering First Scan
[ INFO] [1359401267.475379580, 1.005000000]: Still waiting on map...

[ INFO] [1359401268.490956284, 2.003000000]: Received a 800 X 800 map at 0.025000 m/pix

[ INFO] [1359401268.746005702, 2.234000000]: MAP SIZE: 800, 800
[ INFO] [1359401268.756695152, 2.245000000]: Subscribed to Topics: base_scan base_scan_marking
[ INFO] [1359401268.941572418, 2.424000000]: Sim period is set to 0.10 

I can not see the walls of the environment and the robot's appearance is different than it was in fuerte, but topics such as /odom and /base_scan/scan are publishing and I can drive the robot around.
I also tried to use the run_gazebo script to use Gazebo 1.3.1, but the model does not spawn in Gazebo.  This is the output:

This code block was moved to the following github gist:
https://gist.github.com/answers-se-migration-openrobotics/3c3c71350bec2a4a41e299a5b60de27e

Would updating ros-groovy-simulator-gazebo help improved on either one of these results?  Thanks!
Originally posted by otto on Gazebo Answers with karma: 11 on 2013-01-17
Post score: 1

A:

You mentioned that you installed Gazebo 1.3, but your posted output says you're actually running Gazebo 1.0:
Gazebo multi-robot simulator, version 1.0.2
As a side note, the Gazebo tutorials on ros.org are only applicable to Gazebo 1.0.

Originally posted by nkoenig with karma: 7676 on 2013-01-19
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by otto on 2013-01-22:
Thanks for responding and sorry for the confusing post. I have both installed (Gazebo 1.0 with Ros Fuerte and Gazebo 1.3 as stand alone).  After a lack of progress with the problem described above with 1.0, I installed 1.3 to look into how practical it would be to move to using that version.
Comment by hsu on 2013-01-24:
could you try to run things in groovy?  If debbuild (http://www.ros.org/debbuild/groovy.html) finishes, simulator_gazebo 1.7.8 will have gazebo 1.3 in it.

