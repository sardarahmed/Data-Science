Q:

How to list all topics/services that are known by the server with roscpp?

How can I list all topics or services that are currently known by the server with roscpp?

Originally posted by ISibboI on ROS Answers with karma: 15 on 2013-12-08
Post score: 1

Original comments
Comment by atp on 2013-12-08:
Maybe sth like rostopic list && rosservice list | grep roscpp? I'm not sure about the exact syntax from my mind.
Comment by ISibboI on 2013-12-08:
Thx. With roscpp I mean using a C++ function.

A:

You can use the services of the omnipresent rosapi node, these are equivalent to the command line statements:
rosservice call rosapi/topics
rosservice call rosapi/services
Roscpp
ros::ServiceClient topicfinder = n.serviceClient<rosapi::Topics>("rosapi/topics");
ros::ServiceClient servicesfinder = n.serviceClient<rosapi::Services>("rosapi/services");

rosapi::Topics topicsrv;
rosapi::Services servicessrv;

topicfinder.call(topicsrv);
servicesfinder.call(servicessrv);

Rospy
from rosapi.srv import Topics, Services

topics = rospy.ServiceProxy('/rosapi/topics', Topics)
services = rospy.ServiceProxy('/rosapi/services', Services)
topiclist = topics()
servicelist = services()

I've probably got some typos and mistakes in here, but that's the general gist.

Originally posted by Chengarda with karma: 156 on 2013-12-12
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by tik0 on 2017-03-07:
It's much easier using the Master_API: ros::master::V_TopicInfo topics; ros::master::getTopics(topics). But anyway, nice answer.
Comment by Cerin on 2018-03-13:
This gives me rospy.service.ServiceException: service [/rosapi/services] unavailable
Comment by Markus on 2018-05-16:
Also for me as for Cerin same error.....
Any ideas how to code that for rospy with the Master_API @tik0

