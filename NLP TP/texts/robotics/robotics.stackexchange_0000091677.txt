Q:

Error while installing Autoware using source code

Hello there,
I am relatively new to Autoware and I am trying to install it on my Ubuntu 16.04.
I installed ros-kinetic and followed https://github.com/autowarefoundation/autoware/wiki/Source-Build
However, when I tried sudo ./colcon_release, it gave me the following messages:
steve@ubuntu:~/Documents/autoware/ros$ sudo ./colcon_releaseStarting >>> autoware_build_flags
Starting >>> autoware_msgs                           
Starting >>> autoware_config_msgs
Starting >>> tablet_socket_msgs
[7.829s] ERROR:asyncio:Task exception was never retrieved                  
future: <Task finished coro=<_wait_and_close_fds() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:253> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
[7.833s] ERROR:asyncio:Task exception was never retrieved
future: <Task finished coro=<_wait_and_close_fds() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:253> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
[7.836s] ERROR:asyncio:Task exception was never retrieved                  
future: <Task finished coro=<_wait_and_close_fds() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:253> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
[7.839s] ERROR:asyncio:Task exception was never retrieved
future: <Task finished coro=<_fd2callback() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:220> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
[7.840s] ERROR:asyncio:Task exception was never retrieved
future: <Task finished coro=<_fd2callback() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:220> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
[7.841s] ERROR:asyncio:Task exception was never retrieved
future: <Task finished coro=<_fd2callback() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:220> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
[7.842s] ERROR:asyncio:Task exception was never retrieved
future: <Task finished coro=<_fd2callback() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:220> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
--- stderr: autoware_msgs
CMake Error at CMakeLists.txt:4 (find_package):
  By not providing "Findcatkin.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "catkin", but
  CMake did not find one.

  Could not find a package configuration file provided by "catkin" with any
  of the following names:

    catkinConfig.cmake
    catkin-config.cmake

  Add the installation prefix of "catkin" to CMAKE_PREFIX_PATH or set
  "catkin_DIR" to a directory containing one of the above files.  If "catkin"
  provides a separate development package or SDK, be sure it has been
  installed.

---
Failed   <<< autoware_msgs  [ Exited with code 1 ]
--- stderr: tablet_socket_msgs
CMake Error at CMakeLists.txt:7 (find_package):
  By not providing "Findcatkin.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "catkin", but
  CMake did not find one.

  Could not find a package configuration file provided by "catkin" with any
  of the following names:

    catkinConfig.cmake
    catkin-config.cmake

  Add the installation prefix of "catkin" to CMAKE_PREFIX_PATH or set
  "catkin_DIR" to a directory containing one of the above files.  If "catkin"
  provides a separate development package or SDK, be sure it has been
  installed.

---
Aborted  <<< tablet_socket_msgs
--- stderr: autoware_config_msgs
CMake Error at CMakeLists.txt:4 (find_package):
  By not providing "Findcatkin.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "catkin", but
  CMake did not find one.

  Could not find a package configuration file provided by "catkin" with any
  of the following names:

    catkinConfig.cmake
    catkin-config.cmake

  Add the installation prefix of "catkin" to CMAKE_PREFIX_PATH or set
  "catkin_DIR" to a directory containing one of the above files.  If "catkin"
  provides a separate development package or SDK, be sure it has been
  installed.

---
Aborted  <<< autoware_config_msgs
--- stderr: autoware_build_flags
CMake Error at CMakeLists.txt:4 (find_package):
  By not providing "Findcatkin.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "catkin", but
  CMake did not find one.

  Could not find a package configuration file provided by "catkin" with any
  of the following names:

    catkinConfig.cmake
    catkin-config.cmake

  Add the installation prefix of "catkin" to CMAKE_PREFIX_PATH or set
  "catkin_DIR" to a directory containing one of the above files.  If "catkin"
  provides a separate development package or SDK, be sure it has been
  installed.

---
Aborted  <<< autoware_build_flags
[7.887s] ERROR:asyncio:Task exception was never retrieved
future: <Task finished coro=<_fd2callback() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:220> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine
[7.888s] ERROR:asyncio:Task exception was never retrieved
future: <Task finished coro=<_fd2callback() done, defined at /usr/lib/python3/dist-packages/colcon_core/subprocess.py:220> exception=RuntimeError('cannot reuse already awaited coroutine',)>
Traceback (most recent call last):
  File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step
    result = coro.send(None)
RuntimeError: cannot reuse already awaited coroutine

Summary: 0 packages finished [7.46s]
  1 package failed: autoware_msgs
  3 packages aborted: autoware_build_flags autoware_config_msgs tablet_socket_msgs
  4 packages had stderr output: autoware_build_flags autoware_config_msgs autoware_msgs tablet_socket_msgs
  136 packages not processed

My GCC version is 5.4.0 and env | grep ros shows:
steve@ubuntu:~/Documents/autoware/ros$ env | grep ros
ROS_ROOT=/opt/ros/kinetic/share/ros
ROS_PACKAGE_PATH=/opt/ros/kinetic/share
LD_LIBRARY_PATH=/opt/ros/kinetic/lib:/opt/ros/kinetic/lib/x86_64-linux-gnu
PATH=/opt/ros/kinetic/bin:/home/steve/bin:/home/steve/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
PWD=/home/steve/Documents/autoware/ros
PYTHONPATH=/opt/ros/kinetic/lib/python2.7/dist-packages
PKG_CONFIG_PATH=/opt/ros/kinetic/lib/pkgconfig:/opt/ros/kinetic/lib/x86_64-linux-gnu/pkgconfig
CMAKE_PREFIX_PATH=/opt/ros/kinetic
ROS_ETC_DIR=/opt/ros/kinetic/etc/ros

Originally posted by mangSteve on ROS Answers with karma: 13 on 2019-05-14
Post score: 0

A:

However, when I tried sudo ./colcon_release [..]

I'm not an autoware expert, but the only time colcon_release is mentioned in the instructions you link, it is not run with sudo. This is the section that mentions colcon_release (from here):

Compile
$ cd ~/Autoware/ros/
    $ rosdep update

$ rosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO
$ ./colcon_release

Note the ./colcon_release at the end. In fact, none of the build steps are run with sudo (and that would be something I'd expect).
I would suggest to follow the instructions and run colcon_release without sudo.

Originally posted by gvdhoorn with karma: 86574 on 2019-05-15
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by mangSteve on 2019-05-15:
Thanks for your reply.
But if I run it without sudo, the following messages may show up:
steve@ubuntu:~/Documents/Autoware/ros$ ./colcon_release
rm: cannot remove 'build/autoware_config_msgs/colcon_command_prefix_build.sh.env': Permission denied
rm: cannot remove 'build/autoware_config_msgs/CMakeCache.txt': Permission denied
rm: cannot remove 'build/autoware_config_msgs/colcon_command_prefix_build.sh': Permission denied
...

Comment by gvdhoorn on 2019-05-15:
This could be caused by your first attempt to run colcon_release as root (which is essentially what sudo does).
You can try to fix the situation with the following command:
sudo chown -R $USER: $HOME/Documents/Autoware/ros

which resets all files to be owned by your own user (ie: steve) instead of root.
Comment by mangSteve on 2019-05-15:
Thanks for your solution
After trying the command, I can run it without sudo. However, the same errors still occur.
Comment by gvdhoorn on 2019-05-15:
Which errors?
Comment by mangSteve on 2019-05-15:
Sorry for leaving such a long time.
Well, I still encountered the same errors like
...
CMake Error at CMakeLists.txt:4 (find_package):
By not providing "Findcatkin.cmake" in CMAKE_MODULE_PATH this project has
asked CMake to find a package configuration file provided by "catkin", but
CMake did not find one.

Could not find a package configuration file provided by "catkin" with any
of the following names:

  catkinConfig.cmake
  catkin-config.cmake

Add the installation prefix of "catkin" to CMAKE_PREFIX_PATH or set
"catkin_DIR" to a directory containing one of the above files.  If "catkin"
provides a separate development package or SDK, be sure it has been
installed.
...

Comment by gvdhoorn on 2019-05-15:
I'm not sure, but you may need to source /opt/ros/kinetic/setup.bash before starting colcon_release.
Just a guess though.
Comment by mangSteve on 2019-05-15:
In fact, I already did so when installing ros.
Anyway, thanks for your patience.
I think I need to remove everything before trying again. Maybe that would work it out.
Comment by gvdhoorn on 2019-05-15:\

In fact, I already did so when installing ros.

you need to repeat the same statement every time you start a new terminal. It is not a one-time setup.
Unless you've added that statement to $HOME/.bashrc (if using bash).
Comment by mangSteve on 2019-05-16:
That works, thanks a lot.

