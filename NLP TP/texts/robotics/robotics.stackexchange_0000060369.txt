Q:

Cannot load Mesh Marker in ros3djs

Continuation from here
Attempting to load a mesh marker in the browser results in the following errors:
XMLHttpRequest cannot load file:///pr2_description/meshes/base_v0/base.dae. Cross origin requests are only supported for HTTP. index.html:1
Uncaught NetworkError: Failed to execute 'send' on 'XMLHttpRequest': Failed to load 'file:///pr2_description/meshes/base_v0/base.dae'. ColladaLoader2.min.js:1

Edit:
The above error message occurs when trying to access file:///home/dlu/.../index.html. Accessing http://localhost/.../index.html results in the following error.
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost/pr2_description/meshes/base_v0/base.dae

As noted on the linked page, the mesh_resource given is  "package://pr2_description/meshes/base_v0/base.dae".

Originally posted by David Lu on ROS Answers with karma: 10932 on 2014-06-26
Post score: 2

Original comments
Comment by jihoonl on 2014-06-27:
Can you describe how you access the webpage? You might need to open the page with webserver. Accessing html file directly from filesystem may cause problem.
Comment by David Lu on 2014-06-27:
Updated to reflect webpage access.

A:

You need to tell the Collada loader where the meshes live (they must come from an HTTP file server as roslibjs has no access to the ROS file system). If a resource is package://pr2_description/meshes/base_v0/base.dae, roslibjs will replace this with http://localhost/pr2_description/meshes/base_v0/base.dae by default. You can change the preface with an optional argument.
Since you are using the PR2 meshes, you can use the Robot Web Tools file servers (http://wiki.ros.org/ros3djs#Mesh_Resource_Hosting). Any custom meshes will have to be setup on your local HTTP server. Setting up the interactive marker client to read from this server is similar to the line in this URDF example (http://wiki.ros.org/ros3djs/Tutorials/VisualizingAURDF#CA-ebdaf15416b7824dac6da89212baebbaf5c6df83_45). That is,
var imClient = new ROS3D.InteractiveMarkerClient({
  ros : ros,
  tfClient : tfClient,
  topic : '/basic_controls',
  camera : viewer.camera,
  rootObject : viewer.selectableObjects,
  path : 'http://resources.robotwebtools.org/'
});

Doc line as well: https://github.com/RobotWebTools/ros3djs/blob/develop/src/interactivemarkers/InteractiveMarkerClient.js#L14

Originally posted by rtoris288 with karma: 1173 on 2014-06-28
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by David Lu on 2014-06-30:
Thanks Russell!

