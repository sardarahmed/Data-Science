Q:

Please help, converting urdf.xacro to SDF

Hello all.
I am having trouble to convert the urdf.xacro files to sdf format, which is used by
the newest version of gazebo. Any help will be greatly appreciated.
Thank you All!
@Norman_Hendrich
@hsu, please help!!!!!

Originally posted by Gazer on ROS Answers with karma: 146 on 2013-05-13
Post score: 0

Original comments
Comment by ChickenSoup on 2013-05-13:
If you can provide more information, like the error msg etc, it would be easy to help.
Comment by Gazer on 2013-05-14:
Ok. I am interested in opening up the file download from https://github.com/utexas-bwi/segbot/tree/master/segbot_description.    I followed the gazebo 1.5 tutorial  from gazebosim's website, it's very clear in opening up the sdf. I am now using gazebo 1.7, according the forum, .urdf.xacro file is no
Comment by Gazer on 2013-05-14:
longer supported.  So I am thinking of converting the urdf.xacro file unto the sdf format. But I have no idea how to do that.
Comment by ChickenSoup on 2013-05-14:
did you run "rosrun xacro xacro.py [your_file.urdf.xacro] > [name_for_new_urdf.urdf]" and then "gzsdf print [name_for_new_urdf.urdf] > [name_for_new_sdf.urdf]"? and what is the error msg you're getting?
Comment by Gazer on 2013-05-15:
very weird.  There might be a problem with my rosrun xacro xacro.py,   when I ran it, it did convert xacro > urdf succesfully, but when I open the urdf it converts, it shows 
That urdf file is empty
Comment by ChickenSoup on 2013-05-15:
can you tell what exactly you typed?
Comment by Gazer on 2013-05-16:
sorry, thank you for all of your help so far. For some unknown reason, I tried the same command on friend's computer, it works flawlessly. But when I tried the same command :
rosrun xacro xacro.py  my.xacro.urdf > my.urdf
a file was created. But when I open my.urdf, that file was actually empty
Comment by Gazer on 2013-05-16:
I still haven't figure it out what went wrong, but I guess I would use friend's computer for now.
PS: I was also following following the gazebo tutorial from ROS website,
I was unable to
"roslaunch gazebo_worlds empty_world.launch"
and "rosrun gazebo gzsdf print" to convert a file. So I guess
Comment by Gazer on 2013-05-16:
there must be a problem in the gazebo I installed.
However, I update to Gazebo 1.7, and follow Gazeosim.org tutorial, gazebo is now able to launch...
I post this so everybody could see if they encounter the same problem
Thank you very much for your help, Peshala.

A:

@Gazer:
Apologies for the delayed response. You are trying to convert the wrong file. You need to run xacro on the top level file as shown below:
rosrun xacro xacro.py `rospack find segbot_description`/robots/segbot.urdf.xacro use_full_gazebo_model:=true

Originally posted by piyushk with karma: 2871 on 2013-10-17
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Lili Meng on 2013-10-17:
The following problems appeared:
File "/opt/ros/groovy/lib/python2.7/dist-packages/roslaunch/substitution_args.py", line 260, in _arg
raise ArgException(arg_name)
roslaunch.substitution_args.ArgException: use_full_gazebo_model
Comment by piyushk on 2013-10-21:
@Lili Meng: Groovy xacro has a bug in it. Download the hydro source here: https://github.com/ros/xacro/tree/hydro-devel
Comment by Lili Meng on 2013-10-30:
@piyushk  Cannot find the one you listed  https://github.com/ros/xacro/tree/hydro-devel
Comment by piyushk on 2013-11-01:
https://github.com/ros/xacro/tree/hydro-devel
Comment by piyushk on 2013-11-01:
Try typing out the link, or paste it from above. the original link I posted has bad html tag attached in the link.
Comment by Lili Meng on 2013-11-30:
@piyushk: Thank you, I have downloaded the new xacro and rosmake it, and after that tried the rosrun xacro xacro.py rospack find segbot_description/robots/segbot.urdf.xacro use_full_gazebo_model:=true, but it still has many problems.
Traceback (most recent call last):
File "/opt/ros/groovy/stacks/xacro/xacro.py", line 35, in 
xacro.main()
File "/opt/ros/groovy/stacks/xacro/src/xacro.py", line 563, in main
eval_self_contained(doc)
File "/opt/ros/groovy/stacks/xacro/src/xacro.py", line 504, in eval_self_contained
eval_all(doc.documentElement, macros, symbols)
File "/opt/ros/groovy/stacks/xacro/src/xacro.py", line 457, in eval_all
eval_all(body, macros, scoped)
File "/opt/ros/groovy/stacks/xacro/src/xacro.py", line 457, in eval_all
eval_all(body, macros, scoped)
File "/opt/ros/groovy/stacks/xacro/src/xacro.py", line 488, in eval_all
result = eval_text(at[1], symbols)
File "/opt/ros/groovy/stacks/xacro/src/xacro.py", line 409, in eval_text
Comment by piyushk on 2013-11-30:
The new xacro is a catkin package, and does not use rosbuild. I suspect you are seeing this error because it never built properly, and you are still using the system groovy version of xacro. See http://wiki.ros.org/catkin/Tutorials/using_rosbuild_with_catkin

