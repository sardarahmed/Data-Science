Q:

Why odom/filtered output on map frame is moving?

Hello, im working on a navigation system.
I am using two instances of ekf filter from robot_localization package. I am obteinig that in the "odom" frame, i receive the gps signal with the odometry_map signal with a  good performance, the signals are near enough to the robot whe it is static.
But when i visualice what is happening in the "map" frame, the robot is constantly moving around the ground, and the gps, and the /odometry/global signals are moving together with the robot.
So, the idea that i have is that the "odom -> map" trasnform frame is constantly moving alone. Why i am getting that? Is it becuase the GPS signal ? I am watching that sometimes the robot move in a area that more than 3m of error, which is usually the average gps error.

Originally posted by Johart24 on ROS Answers with karma: 3 on 2022-03-14
Post score: 0

A:

This is normal behavior if you configured it according to the documentation.
Idea is that local EKF handles wheel odometry and IMU to provide continuous vehicle trajectory (odom->base transform).
Global EKF takes global position from GPS and uses it to provide map->odom transform. This can (and most probably will) jump around due to GPS inaccuracies.

Originally posted by Nikodem with karma: 61 on 2022-03-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Johart24 on 2022-03-14:
Hey thanks for answer.  I have a concern. If i want to publish a gps coordinate waypoint, this inaccuracies in the map_frame are gonna interfere on the trajectory path creation?
Comment by Johart24 on 2022-03-14:
I share you a capture of how it looks like. https://ibb.co/D5Jv1tZ

