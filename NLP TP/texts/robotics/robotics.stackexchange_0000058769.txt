Q:

convert iplImage to sensor_msgs::ImageConstPtr

Hi everyone,
I have some problem to understand how to convert images with cvbridge. I red the tutorial : http://wiki.ros.org/cv_bridge/Tutorials/UsingCvBridgeToConvertBetweenROSImagesAndOpenCVImages .
But I can't find a way to convert a openCV images to ROS images message. I succed to convert from ROS to openCV.
I wanted to use the function toImageMsg() but it returns a sensor_msgs::Image but I want a sensor_msgs::ImageConstPtr.
Can somebody help me please?
Thank you.

Originally posted by RosFaceNoob on ROS Answers with karma: 42 on 2014-04-16
Post score: 0

A:

Try the following:
sensor_msgs::Image my_image = <somehow get this image with toImageMsg()>;
sensor_msgs::ImageConstPtr my_image_const_ptr = &my_image;

sensor_msgs::ImageConstPtr is nothing else than a constant shared pointer to a sensor_msgs::Image.

Originally posted by BennyRe with karma: 2949 on 2014-04-16
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by RosFaceNoob on 2014-04-16:
I did :
sensor_msgs::ImageConstPtr img_const = &img;
I have this error:
conversion from ‘IplImage** {aka IplImage**}’ to non-scalar type ‘sensor_msgs::ImageConstPtr {aka boost::shared_ptr<const sensor_msgs::Imagestd::allocator<void > >}’ requested 
I declared "img" like : 
IplImage *img
Comment by BennyRe on 2014-04-16:
I updated my answer. my_image should be the result of toImageMsg() I guess
Comment by RosFaceNoob on 2014-04-16:
So first I have to conver my IplImage to a cv_bridge::CvImagePtr, because you can only use toImageMsg() on a cv_bridge::CvImagePtr.
Do you know how to do it?

