Q:

ros2 component_container yaml parsing

Does the ros2 component_container use a different yaml file parser than a node that is launched with launch_ros.actions.Node?
I have a yaml file that contains a few parameters that works fine when the node is launched using a component_container. But, when I launch the node using its own main() executable and launch_ros.actions.Node, I get the following error:
[node-1]   'Couldn't parse params file: '--params-file /home/tom/ros2-packages/install/moog/share/moog/config/vehicle/base.yaml'. Error: Cannot have a value before ros__parameters at line 1, at /tmp/binarydeb/ros-eloquent-rcl-yaml-param-parser-0.8.4/src/parser.c:1491, at /tmp/binarydeb/ros-eloquent-rcl-0.8.4/src/rcl/arguments.c:471'

My yaml file does not contain a 'ros__parameters' line in it, which seems to be the format stated here:
https://github.com/ros2/rcl/tree/master/rcl_yaml_param_parser
But again, the yaml file is parsed just fine when using the component_container to launch.
If I add the ros__parameters line to the yaml file, then the parameters are not read properly when launching using component_container.
Any ideas?

Originally posted by julesvegas on ROS Answers with karma: 66 on 2020-03-10
Post score: 3

A:

This problem looks to be the same as: https://github.com/ros2/rclcpp/issues/715#issuecomment-497392626
Resolution is to load and parse the yaml file within the launch file, and then pass the parameters to the ComposableNode action: https://github.com/osrf/ros2_serial_example/blob/master/ros2_serial_example/launch/px4.launch.py

Originally posted by julesvegas with karma: 66 on 2020-03-11
This answer was ACCEPTED on the original site
Post score: 0

