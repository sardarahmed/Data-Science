Q:

How to publish a vector< pair  >?

Hi,
I have created a vector of type pair < int, int >, and now I'm trying to publish it on a ROS topic. The size of the vector is already known. How can I proceed ?
I have tried:
    vector_pub = nh.advertise<std::vector<pair <int, int> > >("vector", 100);
    vector_pub.publish(vector_node_position);

but it doesn't compile. Could you please help me?
Thanks :)

Originally posted by rosargh on ROS Answers with karma: 13 on 2017-08-30
Post score: 0

A:

One way would be to create two custom messages, call them something like my_msgs/Pair.msg and my_msgs/VectorPair.msg. The contents would be:
my_msgs/Pair.msg
int a
int b

my_msgs/VectorPair.msg
my_msgs/Pair[] data

In your publishing node you would do:
#include <my_msgs/VectorPair.h>
vector_pub = nh.advertise<my_msgs::VectorPair>("vector", 100);
my_msgs Pair pair;
my_msgs::VectorPair vector_node_position;
pair.a = 1;
pair.b = 2;
vector_node_position.data.push_back(pair);
vector_pub.publish(vector_node_position);

Note that creating/populating the pair message and then pushing it into the vector message could happen inside a loop.

Originally posted by Thomas D with karma: 4347 on 2017-08-30
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2017-08-30:
And if you'd like to avoid having to create the msg at the Publisher side, see ros/wiki/roscpp/MessageTraits. The Subscriber will still need the msg defs though.
Comment by rosargh on 2017-08-31:
Thank you Thomas D and gvdhoorn, I'll try this right away and come back for a feedback :)

