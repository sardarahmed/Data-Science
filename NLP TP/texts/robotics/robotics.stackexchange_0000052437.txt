Q:

Clearing all messages on a topic

I have been reading about the callback queue in roscpp but, I have not found the information I am looking for. I would like to know if there is a way to remove all messages in the callback queue.
As an example:
I have a subscriberNode that subscribes to topicFoo and topicInterrupt
5 messages were published to topicFoo from publisherNode.
After the first topicFoo message is processed in topicFooCallback, a topicInterrupt message is published and processed. At this point, I would like all messages in the topicFooCallback to be removed.
Is there a way to do this? Please let me know if any of this is unclear.

Originally posted by jnj11 on ROS Answers with karma: 61 on 2013-07-01
Post score: 4

A:

Interesting question. I didn't see anything in the API that looked like it would do what you want.  However, I would think re-initializing your subscriber would clear the queue.  Maybe there's a better alternative we could help you figure out if you can tell us what you want to do.

Originally posted by thebyohazard with karma: 3562 on 2013-07-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by tfoote on 2013-08-12:
You can also simply momentarily set the callback to do nothing so that you can drain them very quickly until it's empty.  It's not atomic, but you're downstream of an asyncronous link so that isn't any worse.
Comment by azerila on 2020-08-17:
how about if you have a latched publisher that has already published a few messages and you want to cancel/delete those messages not to fall into any subscriber's callback?

