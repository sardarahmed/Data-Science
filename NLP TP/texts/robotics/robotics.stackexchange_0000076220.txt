Q:

Could not set BinaryResponseListener output on device

Hi guys,
I got vectornav vn200, and I have followed exactly this tutorial : https://github.com/dawonn/vectornav When I write "roslaunch vectornav vn200.launch", I get an error:
quuser@quuser:~$ roslaunch vectornav vn200.launch
... logging to /home/quuser/.ros/log/17a60ad4-767d-11e6-9325-6c88140d9b00/roslaunch-quuser-3421.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://quuser:40251/

SUMMARY
========

PARAMETERS
 * /rosdistro: indigo
 * /rosversion: 1.11.20
 * /vectornav/async_output_rate: 100
 * /vectornav/async_output_type: 0
 * /vectornav/binary_data_output_port: 2
 * /vectornav/binary_gps_data_output_rate: 4
 * /vectornav/binary_imu_data_output_rate: 100
 * /vectornav/binary_ins_data_output_rate: 20
 * /vectornav/gps/frame_id: LLA
 * /vectornav/imu/frame_id: LLA
 * /vectornav/serial_baud: 115200
 * /vectornav/serial_port: /dev/ttyUSB0

NODES
  /
    vectornav (vectornav/vn200_node)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
process[vectornav-1]: started with pid [3440]
[ INFO] [1473419170.342982098]: Initializing vn200. Port:/dev/ttyUSB0 Baud:115200

[ INFO] [1473419170.370371743]: About to set SynchronizationControl
[ INFO] [1473419170.380570872]: Set SynchronizationControl
[FATAL] [1473419175.451857938]: Could not set BinaryResponseListener output on device via: /dev/ttyUSB0, Error Text: Unknown Error
[vectornav-1] process has died [pid 3440, exit code 1, cmd /home/quuser/catkin_ws/devel/lib/vectornav/vn200_node __name:=vectornav __log:=/home/quuser/.ros/log/17a60ad4-767d-11e6-9325-6c88140d9b00/vectornav-1.log].
log file: /home/quuser/.ros/log/17a60ad4-767d-11e6-9325-6c88140d9b00/vectornav-1*.log
all processes on machine have died, roslaunch will exit
shutting down processing monitor...
... shutting down processing monitor complete
done
quuser@quuser:~$ 

Error i saying
Could not set BinaryResponseListener output on device via: /dev/ttyUSB0, Error Text: Unknown Error

Here is my launch file content:
<launch>

    <node pkg="vectornav" type="vn200_node" name="vectornav"  output="screen" > 
      
      <param name="serial_port" type="string" value="/dev/ttyUSB0" />
      <param name="serial_baud" type="int"    value="115200" />
      
      <param name="binary_data_output_port" type="int"    value="2" />
      <param name="binary_gps_data_output_rate" type="int"    value="4" />
      <param name="binary_ins_data_output_rate" type="int"    value="20" />
      <param name="binary_imu_data_output_rate" type="int"    value="100" />
      
      <!-- Type: 0 None (Polling method), 19 IMU, 20 GPS, 22 INS -->
      <param name="async_output_type" type="int"    value="0" />
      <param name="async_output_rate" type="int"    value="100" />
      
      <param name="imu/frame_id" type="string" value="LLA" />
      <param name="gps/frame_id" type="string" value="LLA" />
    </node> 
    
</launch>

Before it was connected to /dev/ttyTHS0, I was getting error ls: cannot access /dev/ttyTHS0: No such file or directory, however i changed it to dev/ttyUSB0 and it is fine.

Originally posted by sn.badnawa on ROS Answers with karma: 1 on 2016-09-09
Post score: 0

A:

Check the owner and group of /dev/ttyUSB0. and try sudo chown quuser /dev/ttyUSB0.

EDIT
You can use the cutecom which is a serial port monitor to open /dev/ttyUSB0, and read data from your device.
You can install it by typing sudo apt-get install cutecom.
If cutecom can read your data, then you can say that your device works fine and there is something wrong with your ROS node program or launch file.

Originally posted by Shay with karma: 763 on 2016-09-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by sn.badnawa on 2016-09-09:
first the owner was dialout and the after adding quuser :
crw-rw-rw- 1 quuser dialout 188, 0 سبت  9 14:06 /dev/ttyUSB0
but still, I am getting same error
[FATAL] [1473425315.697490491]: Could not set BinaryResponseListener output on device via: /dev/ttyUSB0, Error Text: Unknown Error

Comment by sn.badnawa on 2016-09-09:
Yes, cutecom can read the data from Vectornav device and I am getting them properly.
So, what do you really suggest ?
Comment by Shay on 2016-09-09:
I don't know the details, I think maybe your param in the launch file is not right, or maybe you have to debug your vn200_node program.
Comment by sn.badnawa on 2016-09-09:
I am just a newbie, could you please let me know how to debug vn200_node file
Comment by Shay on 2016-09-10:
you can use GDB or print some debug infomation. First of all you have to make sure vn200_node can open your device and get the data.
Comment by sn.badnawa on 2016-09-10:
well, I checked content of my launch file, and as you said there were some problem with parameters, it was not matching with vn200_node.
Thank you for your kind help Shay : )

