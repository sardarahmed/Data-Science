Q:

Map is only being created in one direction

I have a two-wheeled differential robot with encoders, and a Kinect and I'm trying to build a map with gmapping. I'm converting the point cloud to a laser scan with depth_image_to_laserscan, and using ros_arduino_bridge to publish odometry and receive cmd_vel messages. The issue I'm having is that when it seems like my scans are locked into one direction. When I map, I'm constantly overwriting the same spot in a cone in front of my robot. When I drive the robot forward I don't see it's position on the map change, I only see the scan shifting out of place.
I've verified that I'm getting odometry with rostopic echo /odom. I've tried various TF configurations, and I still don't know what the issue is. I've been successful with HectorSLAM using no odometry, but I'd really like to see how gmapping compares in performance. I've supplied an image of the overwritten map, my and my TF configuration. Please let me know if there's anything else I can provide.

Originally posted by troman on ROS Answers with karma: 30 on 2015-07-24
Post score: 0

A:

It seems like the tf from baselink to odom is not right,you should write some codes to send the tf message according to your odometry data.I have tried the gmapping with a lidar,and it works very well.

Originally posted by redskydeng with karma: 118 on 2015-07-25
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by troman on 2015-07-25:
Thanks for the reply, I'm not sure what you mean but I've added two more screenshots of my TF setup and the output of /odom after driving forward a few feet. I've played around a bit more with the TFs so these are a little different than what I had in my last screenshot.
Comment by redskydeng on 2015-07-25:
Try turnning around your robot,and check how the orientation Z change.It should be more than 1.5 when your robot turn 90 degree.If it does not change a lot,the direction will not be right.

