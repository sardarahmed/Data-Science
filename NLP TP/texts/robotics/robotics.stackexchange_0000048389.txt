Q:

How do I migrate rosbuild_add_rostest_labelled to catkin?

The catkin migrating from rosbuild page provides no answer.

Originally posted by joq on ROS Answers with karma: 25443 on 2013-02-16
Post score: 3

A:

No one answered this, so I'll post my own solution. Suppose you have a device driver with unit tests that only work on a machine with that device attached. It will fail, if run as a regression test by the build farm.
So, in the catkin CMakeLists.txt, wrap add_rostest() inside a CMake if () block, like this:
if (${DEVICE_TEST})
  add_rostest(tests/camera_node_hz.test)
  add_rostest(tests/camera_nodelet_hz.test)
endif (${DEVICE_TEST})

Those tests will only run when explicitly configured via CMake:
$ cd build
$ cmake ../src -DDEVICE_TEST=true 
$ make run_tests

Originally posted by joq with karma: 25443 on 2013-04-22
This answer was ACCEPTED on the original site
Post score: 3

