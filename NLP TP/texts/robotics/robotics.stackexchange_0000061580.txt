Q:

Failed to build vision_opencv package under 14.04 (isolated catkin)

I have an isolated catkin_workspace running Hydro (build from source) on an Ubuntu Arm 14.04 running. Now I want to set up opencv support, so I pulled the 'vision_opencv' packages (groovy-devel branch) and did a catkin_make_isolated. Then I got this error:
==> Processing catkin package: 'image_geometry'
==> Building with env: '/ws/catkin/devel_isolated/cpp_common/env.sh'
==> cmake /ws/catkin/src/vision_opencv/image_geometry -DCATKIN_DEVEL_PREFIX=/ws/catkin/devel_isolated/image_geometry -DCMAKE_INSTALL_PREFIX=/ws/catkin/install_isolated in '/ws/catkin/build_isolated/image_geometry'
-- Using CATKIN_DEVEL_PREFIX: /ws/catkin/devel_isolated/image_geometry
-- Using CMAKE_PREFIX_PATH: /ws/catkin/devel_isolated/cpp_common;/ws/catkin/devel_isolated/console_bridge;/ws/catkin/devel_isolated/cmake_modules;/ws/catkin/devel_isolated/genpy;/ws/catkin/devel_isolated/genlisp;/ws/catkin/devel_isolated/gencpp;/ws/catkin/devel_isolated/genmsg;/ws/catkin/devel_isolated/catkin;/ws/catkin/install_isolated
-- This workspace overlays: /ws/catkin/devel_isolated/cpp_common;/ws/catkin/devel_isolated/cmake_modules;/ws/catkin/devel_isolated/genpy;/ws/catkin/devel_isolated/genlisp;/ws/catkin/devel_isolated/gencpp;/ws/catkin/devel_isolated/genmsg;/ws/catkin/devel_isolated/catkin;/ws/catkin/install_isolated
-- Using PYTHON_EXECUTABLE: /usr/bin/python
-- Python version: 2.7
-- Using Debian Python package layout
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /ws/catkin/build_isolated/image_geometry/test_results
-- Found gtest sources under '/usr/src/gtest': gtests will be built
-- catkin 0.5.88
CMake Error at /ws/catkin/install_isolated/share/catkin/cmake/catkinConfig.cmake:75 (find_package):
  Could not find a package configuration file provided by "sensor_msgs" with
  any of the following names:

    sensor_msgsConfig.cmake
    sensor_msgs-config.cmake

  Add the installation prefix of "sensor_msgs" to CMAKE_PREFIX_PATH or set
  "sensor_msgs_DIR" to a directory containing one of the above files.  If
  "sensor_msgs" provides a separate development package or SDK, be sure it
  has been installed.
Call Stack (most recent call first):
  CMakeLists.txt:4 (find_package)

-- Configuring incomplete, errors occurred!
See also "/ws/catkin/build_isolated/image_geometry/CMakeFiles/CMakeOutput.log".
See also "/ws/catkin/build_isolated/image_geometry/CMakeFiles/CMakeError.log".
<== Failed to process package 'image_geometry': 
  Command '/ws/catkin/devel_isolated/cpp_common/env.sh cmake /ws/catkin/src/vision_opencv/image_geometry -DCATKIN_DEVEL_PREFIX=/ws/catkin/devel_isolated/image_geometry -DCMAKE_INSTALL_PREFIX=/ws/catkin/install_isolated' returned non-zero exit status 1

Reproduce this error by running:
==> cd /ws/catkin/build_isolated/image_geometry && /ws/catkin/devel_isolated/cpp_common/env.sh cmake /ws/catkin/src/vision_opencv/image_geometry -DCATKIN_DEVEL_PREFIX=/ws/catkin/devel_isolated/image_geometry -DCMAKE_INSTALL_PREFIX=/ws/catkin/install_isolated

Command failed, exiting.
It looks like a dependency error. Maybe due to 14.04 some of the libraries are not compatible.
Any ideas?
Update
Here is a part of the CMakeError.log
CMakeFiles/cmTryCompileExec3305167895.dir/CheckSymbolExists.c.o: In function `main':
CheckSymbolExists.c:(.text+0xe): undefined reference to `pthread_create'
CheckSymbolExists.c:(.text+0x12): undefined reference to `pthread_create'
collect2: error: ld returned 1 exit status
make[1]: Leaving directory `/ws/catkin/build_isolated/image_geometry/CMakeFiles/CMakeTmp'
make[1]: *** [cmTryCompileExec3305167895] Error 1
make: *** [cmTryCompileExec3305167895/fast] Error 2

Originally posted by Long Hoang on ROS Answers with karma: 38 on 2014-08-06
Post score: 0

A:

I think the pthread error in CMakeError.log isn't useful - that's probably just part of the process for detecting which library the pthread functions are in.
The real error here is that the sensor_msgs package is missing. Do you have it in your workspace?

Originally posted by ahendrix with karma: 47576 on 2014-08-07
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Long Hoang on 2014-08-07:
Thanks. I got it! I just needed the common_msgs package:
http://wiki.ros.org/sensor_msgs

