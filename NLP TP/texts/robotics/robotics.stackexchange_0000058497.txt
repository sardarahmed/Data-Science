Q:

Octomap volume estimation

Hello Everyone,
I am trying to calculate the volume of octomap generated in octomap_server. Also I only want to calculate the volume containing occupied voxels(not the empty ones). Also some voxels overlap each other. So any  thoughts on calculate the the volume?. Thank you.

Originally posted by metal on ROS Answers with karma: 174 on 2014-04-05
Post score: 1

Original comments
Comment by AHornung on 2014-04-07:
Don't change your question and replace it with a completely different one! Leave your questions for future reference and post a new one if it's not an addition or clarification on your original question.
Comment by metal on 2014-04-08:
Sorry about that. I have re-posted the new question, here http://answers.ros.org/question/150731/iterating-through-leaves-in-an-octomap/.
Please share your thoughts on that. Thank you.

A:

That's quite easy if I understand it correctly and you want to compute the volume occupied by all occupied voxels. Just use a leaf_iterator in OctoMap to iterate over all leaf nodes. Then check whether the node is occupied (tree.isNodeOccupied(*it)), get the side length of the current voxel (it.getSize()) and compute the volume from it.
I'm not sure what you mean with "some voxels overlap". Leaf nodes in the octree cannot overlap.

Originally posted by AHornung with karma: 5904 on 2014-04-06
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by metal on 2014-04-07:
Hello,
Octomap_server already publishes occupied voxels as a marker topic. Subscribing to those and reading the scale of each voxel will help calculate the volume?. Please let me know. Thank you.
Comment by AHornung on 2014-04-07:
That should also work, although working on the octomap directly will be more efficient.
Comment by metal on 2014-04-07:
I agree, I want to work on the octomap directly too. Is there a way to subscribe to the topic "occupied_cells_vis_array" given by octomap_server. Then convert it to tree to iterate through the leaves.
Comment by AHornung on 2014-04-07:
Don't use the topic "occupied_cells_vis_array" unless you need a basic visualization, it's inefficient. Check the documentation of octomap_server, it is publishing the map as octomap_msgs::Octomap. You can deserialize the message with the conversion header in the octomap_msgs package.

