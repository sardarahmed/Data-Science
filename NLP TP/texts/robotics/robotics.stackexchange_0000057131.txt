Q:

[catkin] Examples for Environment Hooks that work in both devel- and install-space, referencing directories? (empy?)

Are there any examples of creating environment hooks in catkin that work in both devel-space and install-space?
From the CMake API, I saw that one of the two methods for handling conditionals inside of the template file is to use the basic CMake template engine or use empy with *.em files.
I tried out empy, but wasn't sure how CMake variables are communicated.
My next step is to dig a little more into the catkin docs and code to see what environment variables relate to devel-space and install-space.

Originally posted by eacousineau on ROS Answers with karma: 174 on 2014-02-08
Post score: 1

A:

In .em templates for environment hooks only the following variables are available from the CMake context: https://github.com/ros/catkin/blob/indigo-devel/cmake/templates/env-hook.context.py.in
If you need additional custom variables in your template you have to use .in files (which are expanded by the CMake configure_file function which will pass all CMake variable to the template).
Independent of the template type you can either use one template which conditionally deals with devel and install space (https://github.com/ros/ros/blob/hydro-devel/core/rosbuild/env-hooks/10.rosbuild.sh.em) or you can use separate templates for both. In that case you distinguish the template by inserting develspace / installspace between the filename and the extension (http://docs.ros.org/api/catkin/html/dev_guide/generated_cmake_api.html#catkin-add-env-hooks).

Originally posted by Dirk Thomas with karma: 16276 on 2014-02-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by eacousineau on 2014-02-08:
Ah, that makes sense! I had missed the point of the develspace / installspace extensions. And thank you for the empy reference.
Comment by eacousineau on 2014-02-09:
Got to play around with these a bit -- very nice! (More) props to you, Troy, Morten, and Gerkey!

