Q:

ROS Answers SE migration: 3D map in rviz

I need to build 3d map in rviz.
I have a recorded .bag file with the data from lidar which is going by straight line.
So basically i need some way to provide rviz a fake info about movement of the robot.
What is the easiest way to do that?

Originally posted by dan_yuzh on ROS Answers with karma: 3 on 2015-02-12
Post score: 0

A:

You have to publish tf data for your fake robot that moves the frame of the sensor data (for example "lidar_frame") in relation to another frame (for example "world"). If you then set your "Fixed Frame" in rviz to "world", you should see your lidar_frame moving and lidar data rendered as you intended. The easiest way to do that is to have a robot with a localization system which automatically generates the required tf data :) To fake things, you could make a small cpp or Python node that uses a TransformBroadcaster as described in the tf broadcaster tutorial.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2015-02-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by dan_yuzh on 2015-02-18:
Thanks a lot,
I now have tf broadcaster from tutorial which was slightly modified, so 3d map building working well, however, it have too much extra functions that i dont need like a window with turtle, etc
I need some clean tf broadcaster without any other features, but i didnt find any tutorials :(
Comment by dan_yuzh on 2015-03-02:
Thx a lot, everything is okay now. So now i have a cloud of points, is there any way to export it from rviz?
Comment by ajaymn on 2015-07-23:
Hello dan, please can you send me details on how you cleaned up the turtlesim related code. I am facing a similar issue wherein I would like to visualize 3d data in rviz from the 2d line data that I am getting from a laser scanner
Comment by ARCHANA on 2016-01-19:
Hi dan_yuzh, i am using ros jade. Can you tell me that is it possible to build 3d map with lidar without imu? thanks in advance.
Comment by JohnMMeyer on 2017-03-22:
Hello Dan,
I also would like to export my registered point cloud from RVIZ. Did you ever find a way to do that? Also for what it is worth, I created my registered point cloud using BLAM! from Erik Nelson, it has worked nicely.
https://github.com/erik-nelson/blam

