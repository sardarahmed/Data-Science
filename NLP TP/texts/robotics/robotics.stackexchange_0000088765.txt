Q:

robot localization weird bahavior when playing bag

I used GPS and IMU to localize my robot with  robot_localization.
After I recorded my data, which includes topics Imu, NavSatFix and TwistWithCovarianceStamped, I played the bag and launch the nodes.
The bag is available at here
The launch files are as following:

Top level: gps_imu_localization_bag.launch

robot_localization:

ekf_node: wam_v_ekf.launch
nav_sat_transform_node: wam_v_navsat.launch

The parameter files for my robot are:

ekf: wam_v_ekf.yaml
nav_sat: wam_v_navsat

After I launched the file several times, I notices that the results are not always the same, sometimes the result seems good[Fig. 1], while sometimes the result were very terrible[Fig. 2].
Fig. 1
Fig. 2
It really confused me that with the same topics and the same parameters, I got the different results.
Notice also that the direction of oscillation of Fig. 2 is from northeast to southwest, which northeast is the direction from the origin of UTM to my position, a,k,a., Taiwan.

Originally posted by sean on ROS Answers with karma: 21 on 2018-08-29
Post score: 0

A:

Please post sample input messages from every sensor input.
r_l is not great at fusing just IMU and GPS data. The filter doesn't handle IMU biases at all, so you'll quickly find that linear acceleration values will integrate without bound, causing the robot to run away. As a workaround, you can try converting your commanded velocities into a nav_msgs/Odometry message, and fuse the velocities into the filter. That will at least keep it from running away.

Originally posted by Tom Moore with karma: 13689 on 2018-09-05
This answer was ACCEPTED on the original site
Post score: 0

