Q:

Rostopic Hz inaccurate?

Hello everyone.
Sometimes when I measure the frequency of messages in a topic, the numbers printed don't make sense.
For example:
rostopic hz /robot/head/head_state 

gives:
subscribed to [/robot/head/head_state]     
average rate: 100.000
        min: 0.007s max: 0.015s std dev: 0.00097s window: 96
    average rate: 100.000
        min: 0.004s max: 0.016s std dev: 0.00111s window: 192
    average rate: 100.000
        min: 0.004s max: 0.016s std dev: 0.00100s window: 289
    average rate: 100.000
        min: 0.004s max: 0.016s std dev: 0.00112s window: 386
    average rate: 100.000
        min: 0.004s max: 0.016s std dev: 0.00105s window: 483
    average rate: 100.000
        min: 0.004s max: 0.017s std dev: 0.00109s window: 581
    average rate: 100.000
        min: 0.004s max: 0.017s std dev: 0.00116s window: 678
    average rate: 100.000
        min: 0.004s max: 0.017s std dev: 0.00115s window: 776

So it measures 776 messages in 8 seconds and still tells me that the average rate is 100.000?
My calculater tells me that there are 776 messages over 8 seconds -> = 97Hz.
Why aren't the numbers in my terminal not corresponding with this?

Originally posted by Sannoso on ROS Answers with karma: 71 on 2015-04-02
Post score: 4

A:

After a suggestion of tfoote, I found out that the bias was caused by simulation time. (I did not know there was such a thing). The added picture is a part of the gazebo simulator that I ran today. For a reason that I don't know, there is a real time factor of 0.97 and not 1.00.
This explains the 97Hz.

My conclusion is that the Rostopic Hz function prints every REAL second the amount of messages observed, but when calculating the average rate it compensates for the Real Time FActor, so the outcome is 100 Hz.
Thank you for your help tfoote.

Originally posted by Sannoso with karma: 71 on 2015-04-07
This answer was ACCEPTED on the original site
Post score: 3

