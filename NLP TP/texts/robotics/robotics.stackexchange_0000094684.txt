Q:

nav2_planner not working

I am correctly running rviz2, nav2_map_server and correctly visualizing the map. I want now to use a nav2_planner to see the path built. However it happens that when I run the node and activate it publish reapeatedly this:
[INFO] [global_costmap.global_costmap]: Timed out waiting for transform from base_link to map to become available, tf error: Invalid frame ID "map" passed to canTransform argument target_frame - frame does not exist. canTransform returned after 1.00296 timeout was 1.
Warning: Invalid frame ID "map" passed to canTransform argument target_frame - frame does not exist
         at line 133 in /home/jenkins-agent/workspace/ci_packaging_linux/ws/src/ros2/geometry2/tf2/src/buffer_core.cpp

Here the terminals where i run the nav2_util and nav2_planner:
Terminal 1:
lorenzoteo@lorenzoteo-HP-ZBook-15v-G5:~$ ros2 run nav2_util lifecycle_bringup nav2_planner

Terminal 2:
lorenzoteo@lorenzoteo-HP-ZBook-15v-G5:~$ ros2 run nav2_planner planner_server
[INFO] [nav2_planner]: Creating
[INFO] [global_costmap.global_costmap]: Creating Costmap
[INFO] [nav2_planner]: Configuring
[INFO] [global_costmap.global_costmap]: Configuring
[INFO] [global_costmap.global_costmap]: Using plugin "static_layer"
[INFO] [global_costmap.global_costmap]: Subscribing to the map topic (/map) with transient local durability
[INFO] [global_costmap.global_costmap]: Initialized plugin "static_layer"
[INFO] [global_costmap.global_costmap]: Using plugin "obstacle_layer"
[INFO] [global_costmap.global_costmap]: Subscribed to Topics: 
[INFO] [global_costmap.global_costmap]: Initialized plugin "obstacle_layer"
[INFO] [global_costmap.global_costmap]: Using plugin "inflation_layer"
[INFO] [global_costmap.global_costmap]: Initializing inflation layer!
[INFO] [global_costmap.global_costmap]: Initialized plugin "inflation_layer"
[INFO] [nav2_planner]: Created global planner plugin GridBased of type nav2_navfn_planner/NavfnPlanner
[INFO] [nav2_planner]: Configuring plugin GridBased of type NavfnPlanner
[INFO] [nav2_planner]: Activating
[INFO] [global_costmap.global_costmap]: Activating
[INFO] [global_costmap.global_costmap]: Checking transform
Warning: Invalid frame ID "map" passed to canTransform argument target_frame - frame does not exist
         at line 133 in /home/jenkins-agent/workspace/ci_packaging_linux/ws/src/ros2/geometry2/tf2/src/buffer_core.cpp
[INFO] [global_costmap.global_costmap]: StaticLayer: Resizing costmap to 1006 X 689 at 0.200000 m/pix
Warning: Invalid frame ID "map" passed to canTransform argument target_frame - frame does not exist
         at line 133 in /home/jenkins-agent/workspace/ci_packaging_linux/ws/src/ros2/geometry2/tf2/src/buffer_core.cpp

Originally posted by lorenzo on ROS Answers with karma: 88 on 2020-02-11
Post score: 1

Original comments
Comment by stevemacenski on 2020-02-11:
Did you give a starting pose estimate for there to be a complete TF tree?
Comment by lorenzo on 2020-02-12:
What do you mean exactly? I run these two following nodes for tf transforms:
ros2 run tf2_ros static_transform_publisher 0 0 0 0 0 0 world map
ros2 run tf2_ros static_transform_publisher 10 10 0 0 0 0 map base_link
Not enough?
Edit: I want to give the starting pose estimate through rviz.
Comment by Clionadh on 2020-05-22:
Did you fix this?

A:

Yes. I do not remind what is exactly the problem, but you need to set use_sim_time to false if you do not have gazebo running and the tf tree must be complete: map->odom->base_link.

Originally posted by lorenzo with karma: 88 on 2020-06-03
This answer was ACCEPTED on the original site
Post score: 0

