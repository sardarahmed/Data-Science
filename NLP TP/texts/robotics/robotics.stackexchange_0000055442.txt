Q:

Catkin fails on osx 10.9, can't find '__main__' module in empy-3.1-py2.7.egg/em.pyc

After a lot of trouble to install build everything with rosdep and brew, I got this error when trying to run:
./src/catkin/bin/catkin_make_isolated --install
-- Using CATKIN_DEVEL_PREFIX: /Users/bruno/ros_catkin_ws/devel_isolated/catkin
-- Using CMAKE_PREFIX_PATH: 
-- Using default Python package layout
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /Users/bruno/ros_catkin_ws/build_isolated/catkin/test_results
-- Found gtest: gtests will be built
-- catkin 0.5.77
/usr/bin/python: can't find '__main__' module in '/Library/Python/2.7/site-packages/empy-3.1-py2.7.egg/em.pyc'
CMake Error at cmake/safe_execute_process.cmake:11 (message):
  
  execute_process(/Users/bruno/ros_catkin_ws/build_isolated/catkin/catkin_generated/env_cached.sh
  "/usr/bin/python"
  "/Library/Python/2.7/site-packages/empy-3.1-py2.7.egg/em.pyc"
  "--raw-errors" "-F"
  "/Users/bruno/ros_catkin_ws/build_isolated/catkin/catkin_generated/pkg.develspace.context.pc.py"
  "-o"
  "/Users/bruno/ros_catkin_ws/devel_isolated/catkin/lib/pkgconfig/catkin.pc"
  "/Users/bruno/ros_catkin_ws/src/catkin/cmake/em/pkg.pc.em") returned error
  code 1
Call Stack (most recent call first):
  cmake/em_expand.cmake:23 (safe_execute_process)
  cmake/catkin_package.cmake:358 (em_expand)
  cmake/catkin_package.cmake:98 (_catkin_package)
  CMakeLists.txt:11 (catkin_package)

-- Configuring incomplete, errors occurred!
See also "/Users/bruno/ros_catkin_ws/build_isolated/catkin/CMakeFiles/CMakeOutput.log".

ls -l /usr/local//lib/python2.7/site-packages/
drwxr-xr-x    7 bruno  admin     238 23 Out 09:13 GDAL-1.10.1-py2.7.egg-info
drwxr-xr-x   26 bruno  admin     884 13 Nov 11:26 PyQt4
drwxr-xr-x   21 bruno  admin     714 13 Nov 01:31 PySide
drwxr-xr-x    7 bruno  admin     238 10 Nov 09:20 VTK-5.10.1-py2.7.egg-info
lrwxr-xr-x    1 bruno  admin      64  5 Nov 00:22 cv.py -> ../../../Cellar/opencv/2.4.6.1/lib/python2.7/site-packages/cv.py
lrwxr-xr-x    1 bruno  admin      65  5 Nov 00:22 cv2.so -> ../../../Cellar/opencv/2.4.6.1/lib/python2.7/site-packages/cv2.so
-rw-r--r--    1 bruno  admin     236 13 Nov 22:14 easy-install.pth
-rw-r--r--    1 root   admin  114277 27 Out  2003 em.py
-rw-r--r--    1 root   admin  131548 13 Nov 22:37 em.pyc
-rw-r--r--    1 root   admin    1165 13 Nov 22:37 empy-3.1-py2.7.egg-info
lrwxr-xr-x    1 bruno  admin      63 23 Out 09:13 gdal.py -> ../../../Cellar/gdal/1.10.1/lib/python2.7/site-packages/gdal.py
lrwxr-xr-x    1 bruno  admin      68 23 Out 09:13 gdalconst.py -> ../../../Cellar/gdal/1.10.1/lib/python2.7/site-packages/gdalconst.py
lrwxr-xr-x    1 bruno  admin      70 23 Out 09:13 gdalnumeric.py -> ../../../Cellar/gdal/1.10.1/lib/python2.7/site-packages/gdalnumeric.py
drwxr-xr-x    5 bruno  admin     170 10 Nov 21:09 git_remote_helpers
lrwxr-xr-x    1 bruno  admin      95 10 Nov 21:09 git_remote_helpers-0.1.0-py2.7.egg-info -> ../../../Cellar/git/1.8.4.3/lib/python2.7/site-packages/git_remote_helpers-0.1.0-py2.7.egg-info
drwxr-xr-x   40 bruno  admin    1360 12 Nov 22:03 hgext
drwxr-xr-x  105 bruno  admin    3570 12 Nov 22:03 mercurial
lrwxr-xr-x    1 bruno  admin      86 12 Nov 22:03 mercurial-2.8-py2.7.egg-info -> ../../../Cellar/mercurial/2.8/lib/python2.7/site-packages/mercurial-2.8-py2.7.egg-info
lrwxr-xr-x    1 bruno  admin      62 23 Out 09:13 ogr.py -> ../../../Cellar/gdal/1.10.1/lib/python2.7/site-packages/ogr.py
drwxr-xr-x   14 bruno  admin     476 23 Out 09:13 osgeo
lrwxr-xr-x    1 bruno  admin      62 23 Out 09:13 osr.py -> ../../../Cellar/gdal/1.10.1/lib/python2.7/site-packages/osr.py
drwxr-xr-x    4 bruno  admin     136 13 Nov 22:14 pip-1.4.1-py2.7.egg
-rw-r--r--    1 bruno  admin  503884 13 Nov 22:14 setuptools-1.3.2-py2.7.egg
-rw-r--r--    1 bruno  admin      29 13 Nov 22:14 setuptools.pth
lrwxr-xr-x    1 bruno  admin      70 13 Nov 01:21 shiboken.so -> ../../../Cellar/shiboken/1.2.0/lib/python2.7/site-packages/shiboken.so
lrwxr-xr-x    1 bruno  admin      61 10 Nov 21:57 sip.so -> ../../../Cellar/sip/4.15.3/lib/python2.7/site-packages/sip.so
lrwxr-xr-x    1 bruno  admin      67 10 Nov 21:57 sipconfig.py -> ../../../Cellar/sip/4.15.3/lib/python2.7/site-packages/sipconfig.py
-r--r--r--    1 bruno  admin   72957 10 Nov 21:58 sipconfig.pyc
lrwxr-xr-x    1 bruno  admin      70 10 Nov 21:57 sipdistutils.py -> ../../../Cellar/sip/4.15.3/lib/python2.7/site-packages/sipdistutils.py
-rw-r--r--    1 bruno  admin    2418 13 Nov 18:27 site.py
-rw-r--r--    1 bruno  admin    1739 13 Nov 18:27 site.pyc
-rw-r--r--    1 bruno  admin    2535 13 Nov 22:14 sitecustomize.py
-rw-r--r--    1 bruno  admin    1174 13 Nov 22:14 sitecustomize.pyc
drwxr-xr-x   44 bruno  admin    1496 10 Nov 09:20 vtk

ls -l /Library/Python/2.7/site-packages/
total 2616
drwxr-xr-x   14 root  wheel     476  5 Nov 00:11 Crypto
drwxr-xr-x    9 root  wheel     306 25 Out 09:52 Flask-0.10.1-py2.7.egg-info
drwxr-xr-x    9 root  wheel     306 25 Out 09:54 Flask_SQLAlchemy-1.0-py2.7.egg-info
-rw-r--r--    1 root  wheel    4930 24 Out 15:18 HermesClient-1.0.0-py2.7.egg
drwxr-xr-x   10 root  wheel     340 25 Out 09:52 Jinja2-2.7.1-py2.7.egg-info
drwxr-xr-x    8 root  wheel     272 25 Out 09:52 MarkupSafe-0.18-py2.7.egg-info
drwxr-xr-x    7 root  wheel     238 24 Out 15:09 MySQL_python-1.2.4-py2.7.egg-info
drwxr-xr-x   15 root  wheel     510 24 Out 15:09 MySQLdb
drwxr-xr-x   47 root  wheel    1598 10 Nov 18:11 OpenGL
drwxr-xr-x  167 root  wheel    5678 29 Out 17:00 PIL
-rw-r--r--    1 root  wheel       4 29 Out 17:00 PIL.pth
drwxr-xr-x    7 root  wheel     238 10 Nov 18:11 PyOpenGL-3.0.2-py2.7.egg-info
drwxr-xr-x   10 root  wheel     340 24 Out 15:09 PySQLPool
drwxr-xr-x    7 root  wheel     238 24 Out 15:09 PySQLPool-0.3.7-py2.7.egg-info
drwxr-xr-x    7 root  wheel     238 29 Out 01:54 PyYAML-3.10-py2.7.egg-info
drwxr-xr-x    9 root  wheel     306 10 Nov 17:17 Pygments-1.6-py2.7.egg-info
-rw-r--r--    1 root  wheel     119 22 Out 19:39 README
drwxr-xr-x    7 root  wheel     238 25 Out 09:54 SQLAlchemy-0.8.2-py2.7.egg-info
drwxr-xr-x   10 root  wheel     340 10 Nov 17:17 Sphinx-1.1.3-py2.7.egg-info
drwxr-xr-x    8 root  wheel     272 24 Out 15:05 Werkzeug-0.9.4-py2.7.egg-info
drwxr-xr-x    6 root  wheel     204 13 Nov 01:04 _markerlib
-rwxr-xr-x    1 root  wheel  130440 24 Out 15:09 _mysql.so
-rw-r--r--    1 root  wheel    2352 24 Out 15:09 _mysql_exceptions.py
-rw-r--r--    1 root  wheel    4243 24 Out 15:09 _mysql_exceptions.pyc
-rwxr-xr-x    1 root  wheel   79720 13 Nov 00:05 _psutil_osx.so
-rwxr-xr-x    1 root  wheel   25840 13 Nov 00:05 _psutil_posix.so
drwxr-xr-x    7 root  wheel     238 29 Out 01:54 argparse-1.2.1-py2.7.egg-info
-rw-r--r--    1 root  wheel   87791 29 Out 01:53 argparse.py
-rw-r--r--    1 root  wheel   65903 29 Out 01:54 argparse.pyc
drwxr-xr-x   31 root  wheel    1054 13 Nov 17:44 catkin_pkg
drwxr-xr-x    8 root  wheel     272 13 Nov 17:44 catkin_pkg-0.1.23-py2.7.egg-info
drwxr-xr-x   17 root  wheel     578 13 Nov 17:44 dateutil
drwxr-xr-x    9 root  wheel     306 29 Out 01:54 distribute-0.7.3-py2.7.egg-info
drwxr-xr-x   24 root  wheel     816 29 Out 01:54 docutils
drwxr-xr-x    7 root  wheel     238 29 Out 01:54 docutils-0.11-py2.7.egg-info
-rw-r--r--    1 root  wheel   15267 13 Nov 01:04 dot_parser.py
-rw-r--r--    1 root  wheel   13450 13 Nov 01:04 dot_parser.pyc
-rw-r--r--    1 root  wheel     332 13 Nov 23:45 easy-install.pth
-rw-r--r--    1 root  wheel     126 13 Nov 01:04 easy_install.py
-rw-r--r--    1 root  wheel     316 13 Nov 01:04 easy_install.pyc
drwxr-xr-x   26 root  wheel     884  5 Nov 00:11 ecdsa
drwxr-xr-x    7 root  wheel     238  5 Nov 00:11 ecdsa-0.10-py2.7.egg-info
-rw-r--r--    1 root  wheel   69736 13 Nov 23:45 empy-3.1-py2.7.egg
drwxr-xr-x   29 root  wheel     986 29 Out 11:23 epydoc
drwxr-xr-x    7 root  wheel     238 29 Out 11:23 epydoc-3.0.1-py2.7.egg-info
drwxr-xr-x   42 root  wheel    1428 25 Out 09:52 flask
drwxr-xr-x    6 root  wheel     204 25 Out 09:54 flask_sqlalchemy
drwxr-xr-x    5 root  wheel     170 24 Out 11:50 ipython-1.1.0-py2.7.egg
drwxr-xr-x    8 root  wheel     272 25 Out 09:52 itsdangerous-0.23-py2.7.egg-info
-rw-r--r--    1 root  wheel   30509 25 Out 09:52 itsdangerous.py
-rw-r--r--    1 root  wheel   33149 25 Out 09:52 itsdangerous.pyc
drwxr-xr-x   49 root  wheel    1666 25 Out 09:52 jinja2
drwxr-xr-x   16 root  wheel     544 13 Nov 01:41 kitchen
drwxr-xr-x    7 root  wheel     238 13 Nov 01:41 kitchen-1.1.1-py2.7.egg-info
drwxr-xr-x   14 root  wheel     476 25 Out 09:52 markupsafe
drwxr-xr-x    7 root  wheel     238  5 Nov 00:11 netifaces-0.8-py2.7.egg-info
-rwxr-xr-x    1 root  wheel   35256  5 Nov 00:11 netifaces.so
drwxr-xr-x   43 root  wheel    1462 29 Out 17:00 nose
drwxr-xr-x    9 root  wheel     306 29 Out 17:00 nose-1.3.0-py2.7.egg-info
drwxr-xr-x   38 root  wheel    1292 24 Out 15:03 numpy
drwxr-xr-x    7 root  wheel     238 24 Out 15:03 numpy-1.7.1-py2.7.egg-info
drwxr-xr-x   78 root  wheel    2652  5 Nov 00:11 paramiko
drwxr-xr-x    8 root  wheel     272  5 Nov 00:11 paramiko-1.12.0-py2.7.egg-info
drwxr-xr-x    4 root  wheel     136 24 Out 11:45 pip-1.4.1-py2.7.egg
-rw-r--r--    1 root  wheel  101430 13 Nov 01:04 pkg_resources.py
-rw-r--r--    1 root  wheel  108963 13 Nov 01:04 pkg_resources.pyc
drwxr-xr-x   24 root  wheel     816 13 Nov 00:05 psutil
drwxr-xr-x    7 root  wheel     238 13 Nov 00:05 psutil-1.1.3-py2.7.egg-info
drwxr-xr-x    7 root  wheel     238  5 Nov 00:11 pycrypto-2.6.1-py2.7.egg-info
drwxr-xr-x    8 root  wheel     272 13 Nov 01:04 pydot-1.0.28-py2.7.egg-info
-rw-r--r--    1 root  wheel   61340 13 Nov 01:04 pydot.py
-rw-r--r--    1 root  wheel   54875 13 Nov 01:04 pydot.pyc
drwxr-xr-x   30 root  wheel    1020 10 Nov 17:17 pygments
drwxr-xr-x    7 root  wheel     238 13 Nov 01:04 pyparsing-2.0.1-py2.7.egg-info
-rw-r--r--    1 root  wheel  154099 13 Nov 01:04 pyparsing.py
-rw-r--r--    1 root  wheel  151456 13 Nov 01:04 pyparsing.pyc
drwxr-xr-x    9 root  wheel     306 13 Nov 17:44 python_dateutil-2.2-py2.7.egg-info
drwxr-xr-x    6 root  wheel     204 24 Out 11:56 readline-6.2.4.1-py2.7-macosx-10.7-intel.egg
drwxr-xr-x   32 root  wheel    1088 24 Out 15:01 requests
drwxr-xr-x    8 root  wheel     272 24 Out 15:01 requests-2.0.1-py2.7.egg-info
drwxr-xr-x    8 root  wheel     272 29 Out 02:00 rosdep-0.10.23-py2.7.egg-info
drwxr-xr-x   37 root  wheel    1258 29 Out 02:00 rosdep2
drwxr-xr-x   54 root  wheel    1836 29 Out 01:54 rosdistro
drwxr-xr-x    8 root  wheel     272 29 Out 01:54 rosdistro-0.2.15-py2.7.egg-info
drwxr-xr-x   40 root  wheel    1360 29 Out 01:54 rosinstall
drwxr-xr-x    8 root  wheel     272 29 Out 01:54 rosinstall-0.6.30-py2.7.egg-info
drwxr-xr-x   10 root  wheel     340 29 Out 02:00 rosinstall_generator
drwxr-xr-x    8 root  wheel     272 29 Out 02:00 rosinstall_generator-0.1.4-py2.7.egg-info
drwxr-xr-x   20 root  wheel     680 13 Nov 17:42 rospkg
drwxr-xr-x    7 root  wheel     238 29 Out 01:54 rospkg-1.0.24-py2.7.egg-info
drwxr-xr-x   39 root  wheel    1326 13 Nov 01:04 setuptools
drwxr-xr-x   10 root  wheel     340 13 Nov 01:04 setuptools-1.3.2-py2.7.egg-info
drwxr-xr-x   18 root  wheel     612 13 Nov 11:47 simplejson
drwxr-xr-x    7 root  wheel     238 13 Nov 11:47 simplejson-3.3.1-py2.7.egg-info
drwxr-xr-x    7 root  wheel     238 29 Out 01:54 six-1.4.1-py2.7.egg-info
-rw-r--r--    1 root  wheel   20588 29 Out 01:53 six.py
-rw-r--r--    1 root  wheel   20619 29 Out 01:54 six.pyc
drwxr-xr-x   46 root  wheel    1564 10 Nov 17:17 sphinx
drwxr-xr-x   36 root  wheel    1224 25 Out 09:54 sqlalchemy
drwxr-xr-x   22 root  wheel     748 29 Out 01:54 vcstools
drwxr-xr-x    8 root  wheel     272 29 Out 01:54 vcstools-0.1.32-py2.7.egg-info
drwxr-xr-x   45 root  wheel    1530 24 Out 15:05 werkzeug
drwxr-xr-x    8 root  wheel     272 29 Out 01:54 wstool
drwxr-xr-x    8 root  wheel     272 29 Out 01:54 wstool-0.0.4-py2.7.egg-info
drwxr-xr-x   36 root  wheel    1224 29 Out 01:54 yaml

Originally posted by Bruno Normande on ROS Answers with karma: 35 on 2013-11-13
Post score: 2

Original comments
Comment by Artem on 2013-11-13:
Are you on OSX 10.8? What package is this?
Comment by Artem on 2013-11-13:
Have you seen this answer? http://answers.ros.org/question/36130/osx-fuerte-rosdep-install-a-fails-on-pcl/
Comment by Bruno Normande on 2013-11-13:
OSX 10.9, and I'm not installing catkin with brew, but with the command ./src/catkin/bin/catkin_make_isolated --install. I followed all steps in http://wiki.ros.org/hydro/Installation/OSX/Homebrew/Source
Comment by Artem on 2013-11-13:
Hmm looks like some python dependencies problem.  Try to do this command again and carefully check that there were no errors.      sudo pip install -U wstool rosdep rosinstall rosinstall_generator rospkg catkin-pig Distribute
Comment by Bruno Normande on 2013-11-13:
Everything reinstalled, without errors, but still same problem (I'm assuming you miss-typed catkin-pkg). It says that can't find main in empty, but i just tested the package and seems all right... :(
Comment by Artem on 2013-11-13:
What does which python say?
Comment by Artem on 2013-11-13:
Make sure that you are using python 2.7.5 that you installed with homebrew and not the system python.
Comment by Artem on 2013-11-13:
Can you execute ls -l /usr/local//lib/python2.7/site-packages/
Comment by Bruno Normande on 2013-11-13:
Just brewed python, the problem continues. Adding the result of ls in the question. I think maybe i have to clean everything up and start again from scratch, the upgrade from 10.8 to 10.9 broke a lot of things...

A:

I got this exact same error after installing empy using easy_install (because installation through rosdep using pip failed). For me the only way to solve the problem was to remove the installed version:
sudo pip uninstall empy

and then to download the package directly from the author: http://www.alcyone.com/software/empy/empy-latest.tar.gz, followed by installing the package by hand:
tar xzf empy-latest.tar.gz
cd empy-3.3
sudo python setup.py install

These steps got rid of the empy errors for me.

Originally posted by jensenb with karma: 316 on 2013-11-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Bruno Normande on 2013-11-14:
Thanks, that worked! (although I had already tried, and for some reason it didn't work before).

