Q:

fuerte gazebo crashing

Hi all,
gazebo worked fine a few weeks back using fuerte on ubuntu 12.04 but when I try to run it now it segfaults:
Msg Waiting for master.Msg Waiting for master[ INFO] [1344289145.061900655]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...
Msg Connected to gazebo master @ http://localhost:11345
Msg Connected to gazebo master @ http://localhost:11345
/opt/ros/fuerte/stacks/simulator_gazebo/gazebo/scripts/gui: line 2: 27815 Segmentation fault      (core dumped) `rospack find gazebo`/gazebo/bin/gzclient -g `rospack find gazebo`/lib/libgazebo_ros_paths_plugin.so
[gazebo_gui-3] process has died [pid 27812, exit code 139, cmd /opt/ros/fuerte/stacks/simulator_gazebo/gazebo/scripts/gui __name:=gazebo_gui __log:=/home/thomas/.ros/log/24a6f2ce-e00f-11e1-8d6a-88532e67b4d4/gazebo_gui-3.log].
log file: /home/thomas/.ros/log/24a6f2ce-e00f-11e1-8d6a-88532e67b4d4/gazebo_gui-3*.log
Segmentation fault (core dumped)
[empty_world_server-2] process has died [pid 27805, exit code 139, cmd /opt/ros/fuerte/stacks/simulator_gazebo/gazebo/scripts/gazebo /opt/ros/fuerte/stacks/simulator_gazebo/gazebo_worlds/worlds/empty.world __name:=empty_world_server __log:=/home/thomas/.ros/log/24a6f2ce-e00f-11e1-8d6a-88532e67b4d4/empty_world_server-2.log].
log file: /home/thomas/.ros/log/24a6f2ce-e00f-11e1-8d6a-88532e67b4d4/empty_world_server-2*.log

The gazebo log files mentioned do not exist.
Does anyone know how this can be fixed?
Thanks,
Thomas

Originally posted by ThomasK on ROS Answers with karma: 360 on 2012-08-06
Post score: 1

Original comments
Comment by hsu on 2012-08-06:
are you installing from the debs?  if so, which version is it?  (look in /opt/ros/fuerte/stacks/simulator_gazebo/CMakeLists.txt).  thanks.
Comment by ThomasK on 2012-08-06:
yes, it's version 1.6.11
Comment by hsu on 2012-08-06:
Is GLX direct rendering supported (glxinfo should give some useful outputs)?  sometimes system upgrade will require reboot for the new nvidia kernel driver to take effect.
Comment by ThomasK on 2012-08-06:
glxinfo and glxgears work and i just did a reboot to make sure.
Comment by hsu on 2012-08-06:
what launch file did you use?
Comment by ThomasK on 2012-08-06:
empty_world.launch in gazebo_worlds .. when launching the two nodes separately it crashes when starting the gui (edit: gazebo segfaults when starting the gui, the gui stays active when starting gazebo and gui separately .. edit2: ok i was wrong, sometimes the gui segfaults first, and sometimes both)
Comment by hsu on 2012-08-06:
Please list out all command line commands used to produce the problem.  (preferably copy and paste the console where this happened.   Also, you can edit your question to include them directly).  Thanks.
Comment by Jakub on 2012-08-06:
I've got the same issue. Since last update of simulator_gazebo debs, all my gazebo launch files stopped to work. The strangest thing is that gazebo_worlds empty_world.launch do work, but when I copy / paste this launch file and the world file to different location and update the paths gazebo crashes
Comment by Jakub on 2012-08-06:
Small update. When spawing models I've got "Error [ODEJoint.cc:287] Invalid index[1144465824]" just before segfault.
And yet another hint: "unpause physics service call failed: unable to connect to service: [Errno 104] Connection reset by peer"
Comment by ThomasK on 2012-08-07:
It usually segfaults when simply launching it through "roslaunch gazebo_worlds empty_world.launch" (see http://pastebin.com/6bkRHAP7 for all output). When I tried it at home yesterday (same laptop) it only segfaulted when I tried to insert some model using the gazebo interface ("insert model" tab).
Comment by hsu on 2012-08-07:
@ThomasK  Thank you for the console output.  Can you also post a gdb backtrace for the error?
Comment by ThomasK on 2012-08-07:
there you go: http://pastebin.com/8LTB6jHK
Comment by hsu on 2012-08-10:
@ThomasK  hm, any chance you can compile simulator_gazebo locally with debug symbols?
Comment by EmbeddedSystem on 2012-08-10:
I'm getting similar issues, here is the error: http://pastebin.com/c51iHjJV  The log file it mentions doesn't seem to exist either.
Comment by ThomasK on 2012-08-10:
@hsu isn't it already compiled with debug symbols? ROS_BUILD_TYPE is set to Debug in gazebo's CMakeLists and all other simulator_gazebo packages are RelWithDebInfo (why was the gazebo package changed to just Debug instead of RelWithDebInfo?)
Comment by hsu on 2012-08-10:
@ThomasK gazebo package (which includes the ros plugins for gazebo) is built with Debug, but not the simulator itself (CMAKE_BUILD_TYPE="release" in gazebo/Makefile.gazebo.tarball).  let's continue this on trac https://code.ros.org/trac/ros-pkg/ticket/5521.

A:

Ticket filed
Please continue discussion on trac.  Thanks.

Originally posted by hsu with karma: 5780 on 2012-08-10
This answer was ACCEPTED on the original site
Post score: 0

