Q:

How do I record video from webots simulated cameras?

I'm currently trying to find a way to record the output from Webots cameras to video files. Currently I'm saving frames every cycle and converting them to videos afterwards using Shotcut. Is there a smoother way of doing this? I need to record from 6 different cameras so I can emulate the real cameras on my system and make simulated video streams in different simulated scenarios (for some algorithm testing).
Does anyone have an idea of how to do this? Or is saving to frames using wb_camera_save_image the only way?
Much appreciated!

A:

Webots uses ffmpeg to create movies out of JPG images. The code snippet in Webots is located here. But since Webots embeds ffmpeg, you should be able to use it pretty easily from your controller program:

In your controller program, save every camera image as a JPG image in a specific folder. You should use a counter to name each image, e.g., image-001.jpg, image-002.jpg, etc.
At some point in your controller program, e.g., when you have enough images to create a movie, run ffmpeg with the following command line or similar: ffmpeg -framerate 32 -i image-%03d.jpg -c:a copy -crf 20 -c:v libx264 -pix_fmt yuv420p movie.mp4 (replace 32 by your actual camera frame rate).
Do this for every camera (you may use a different folder for each camera).

Disclaimer: I am a Webots developer working at Cyberbotics.

