Q:

rosbag randomly missing topics on record

Hi all.
We've got a very weird case. Our configuration:

main_computer: running roscore
slave_A_computer (ROS_MASTER_URI=main_computer)
slave_B_computer (ROS_MASTER_URI=main_computer)
slave_C_computer (ROS_MASTER_URI=main_computer)
ROS: indigo
Ubuntu 14.04 (x86)

All computers are connected in one GigE network and synced using chrony. On main_computer we run https://github.com/ros-drivers/nmea_navsat_driver and on each slave computers we run GigE camera driver and record the image and gps topics (along with some other low bandwidth stuff (diagnostics, tf, etc)) with rosbag (using c++ program, i.e. rosrun rosbag record). Recordings on all 3 computers are done simulatenously but locally on each computer.
Now a mysterious thing that happens is that in every e.g. 1 out of 100 bags recorded on slave computers we do not get ONE of the gps topics (out of 4 that nmea_navsat_driver publishes). So for instance slave_A and slave_B have all the topics but on slave_C /gps/fix would be missing. This is all happening on a field robot during operation and where it is impossible to actually pause and debug.
So my question is how to debug an issue like this? Clearly the topic is being advertised and active since 2 computers get it. Also since the 3rd computer gets 3 of 4 topics from the nmea_navsat_driver the network link is up. Is it then a rosbag tool that is not able to build up all socket connections? Can I somehow constantly log a list of active topics for every computer?
thx upfront

Originally posted by dejanpan on ROS Answers with karma: 1420 on 2016-05-03
Post score: 1

Original comments
Comment by Felix Endres on 2016-05-04:
Hi Dejan, curious problem. It happening in only 1 of 100 cases is really weird. I guess you know about rostopic list and rostopic hz /gps/fix?
Comment by dejanpan on 2016-05-05:
Thx @Felix Endress. I know yes and I could for instance write a program that would monitor that. And I am pretty sure it would tell me that the topic is missing and when it happens but then what do I do next?
Meanwhile I also found out that we are also missing some other topics from master comp.

A:

@tfoote: we were partiioning the bags based on size inside a single run.
What fixed above issue was NOT to record /rosout and /diagnostics topics. Instead we recorded /rosout_agg and /diagnostics_agg. Since we had around 30 nodes in the system with all of them publishing on /rosout there were apparently just too many connections. Not sure if it makes fully sense but we hadn't had this issue ever after.

Originally posted by dejanpan with karma: 1420 on 2016-11-02
This answer was ACCEPTED on the original site
Post score: 1

