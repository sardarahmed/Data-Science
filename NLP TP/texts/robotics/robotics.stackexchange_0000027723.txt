Q:

PID controller value exceeds CmdMax/Min value

I initialize my PID controller with specific max and min values:
 
common::PID posPID;
posPID.Init(0.01, 0.1, 1.0, 1.0, 0.0, 200.0, 0.0);

and when I do
posPID.Update(desiredVel - _spindle.angVel, _stepTime);
the value it returns can be negative or bigger than 200
Any hints what might be the problem?

Originally posted by missx on Gazebo Answers with karma: 13 on 2016-04-23
Post score: 0

A:

I ripped this right from the source...
// Check the command limits
if (!ignition::math::equal(this->cmdMax, 0.0) && this->cmd > this->cmdMax)
    this->cmd = this->cmdMax;
if (!ignition::math::equal(this->cmdMin, 0.0) && this->cmd < this->cmdMin)
this->cmd = this->cmdMin;

return this->cmd;

Looks to me like you can't have a min of zero. It has to be something other than zero to be a min. This is definitely a bug, and should be addressed. For now, you could just set it to a small number like 0.001 and see if that works.
I can't immediately see why it's not respecting the 200 limit however. How much greater are we talking about? Can you add a smallest-possible-reproducible example?

Originally posted by Peter Mitrano with karma: 768 on 2016-04-26
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by missx on 2016-04-26:
yea, you're right. with minimum 0 it doesn't work. thanks!
and with maximum - my bad - output value has never reached it
Comment by Peter Mitrano on 2016-05-09:
You should consider making a pull request to allow a minimum of 0! It would a simple first-time contribution. We could require -inf/inf as the values if you want no min or max, and then remove that check for zero.

