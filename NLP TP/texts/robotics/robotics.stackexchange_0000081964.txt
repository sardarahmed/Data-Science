Q:

Map gazebo world SLAM

Hi guys! I'm in trouble with creating the map of the willowgarage (i'm using it just for practice). I think that the problem is related to record the laser scan in the bag. I'm following this procedure for the creation of the bag and of the map:

roslaunch gazebo_ros willowgarage_world.launch
insert the robot in the environment
rosbag record -O example /laser_scan

For the creation of the map:

roscore
rosparam set use_sim_time true
rosrun gmapping slam_gmapping scan:=laser_scan
rosbag play --clock example
rosrun map_server map_saver -f map_example

From executing these commands, at the end, the server is waiting for the map without reaching any result. In the gmapping process, I have warning like:
[ WARN] [1500976433.556165904, 15.058000000]: MessageFilter [target=odom ]: Dropped 100.00% of messages so far. Please turn the [ros.gmapping.message_notifier] rosconsole logger to DEBUG for more information.
[ WARN] [1500976494.043539452, 0.045000000]: Detected jump back in time. Clearing TF buffer.
What is the error in the procedure that I'm following? Thanks!

Originally posted by tonio on ROS Answers with karma: 3 on 2017-07-25
Post score: 0

A:

You need to record the tf and odom topics (and tf_static, if applicable) when you record your bag file.

Originally posted by allenh1 with karma: 3055 on 2017-07-25
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by l_a_den on 2017-07-26:
Hi, allen, where does the tf topic comes from? What I think is that the tf topic is an output, not an input, there is a sensor can produce tf directly? Thanks a lot.
Comment by tonio on 2017-07-26:
I tried to build the map in real time without the bag through rviz but when I add the LaserScan topic, it says me that the status is error: For frame [base_laser]: Frame [base_laser] does not exist in the Transform voice. Are you suggesting me to use a node tf broadcaster?
Comment by allenh1 on 2017-07-30:
Yes -- you need tf to give the transforms needed to understand laser positions. Tf broadcaster will create the tf topic. But, if you're starting out with a new package, look into tf2 (since tf has been deprecated for some time now).

