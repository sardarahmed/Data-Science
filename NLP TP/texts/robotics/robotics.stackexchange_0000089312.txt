Q:

Array length handling when serializing messages

I am trying to code a rosbag serializer, and I am trying to generate code from the messages, like https://github.com/ros/genmsg
I noticed there's an inconsitency in how to handle unbounded array lengths.
In some cases, it is assumed the array elements are preceded with the length of the array: CameraInfo
In some others, the length is calculated from other properties of the message: Image, PointCloud2
Then there's cases in which it's not clear if the length needs to be handled based on the length of the whole message itself: CompressedImage.
So, are these cases handled manually? or is there some sort of non obvious rule?
I have noticed that in the definitions of some unbounded arrays, it is stated that the length needs to be computed from other parameters.

Originally posted by Vicente Penades on ROS Answers with karma: 130 on 2018-10-17
Post score: 0

A:

The serialization logic only considers the length of the actual array.
Any other fields in a message containing such length information are additionally information and might (or might not) match the actual data. They are serialized independently.

Originally posted by Dirk Thomas with karma: 16276 on 2018-10-17
This answer was ACCEPTED on the original site
Post score: 0

