Q:

Setting up navigation stack on p3dx

I am trying to set up the navigation stack on p3dx. I follow the instructions in http://www.ros.org/wiki/navigation/Tutorials/RobotSetup . When the move_base node comes up, I get the following warning repeatedly and after sometime move_base node crashes

The base_scan observation buffer has not been updated for 3.05 seconds, and it should be updated every 0.20 seconds

I can see the laser readings in rviz.
The crash is due to bad_alloc() exception. The memory usage increases gradually when the warnings appear and the free memory reduces to around 100 MB at which point the crash happens.
Observations from "rosrun tf view_frames"

The tf shows map->odom->base_link->laser.
The tf publishing rates are 9.57, 10.20 and 10.19 Hz respectively.
The "Most recent transform" says 0.078 and 0.073 and -0.040 secs old respectively.

Originally posted by Aravindhan K Krishnan on ROS Answers with karma: 125 on 2011-03-21
Post score: 0

A:

The warning that you're receiving from move_base means that, for one reason or another, the costmap is not receiving sensor data on the base_scan topic at the rate it expects. There are a few things to try:

Make sure that the move_base node is successfully subscribed to the topic it expects sensor_data on, in this case, that's the "base_scan" topic. Its possible that you have the wrong topic name specified in the costmap configuration.

Make sure that the sensor is publishing at a reasonable rate using the "rostopic hz" tool. So, for you, that'd be "rostopic hz base_scan." If the laser is not coming in at a reasonable rate, you'll have to solve that issue before navigation will work well.

Check the load on the computer you're running things on. Its possible that there's just too much going on and the system is completely bogged down. If this is the case, you may want to tune the navigation stack to use less CPU. You can do this by changing the update frequency of the costmap: http://www.ros.org/wiki/costmap_2d#Rate_parameters, or the controller_frequency parameter of move_base: http://www.ros.org/wiki/move_base#Parameters.

Hope this helps,
Eitan

Originally posted by eitan with karma: 2743 on 2011-03-22
This answer was ACCEPTED on the original site
Post score: 1

