Q:

ROS Stage and Rviz for Navigation

Hi all,
I have some queries about running navigation stack in Stage and RViz :

For my project I'm using base_link as my robot base frame and laser_frame as my laser base frame. However, after running Stage and RViz I found out that base_footprint frame and base_laser_link frame has been added to my TF, although I'm not using it at all. Initially I thought it is because of the default frame name in Stage and RViz node, so I remap the variables in my Stage & RViz launch file like this :

remap from="base_laser_link" to="laser_frame"
remap from="base_footprint" to="base_link"
But it doesn't do the work at all (I still have those unused frames in my TF).

My robot position doesn't seem to be synchronized in RViz and Stage. The initial position of my robot is different in RViz and Stage. And when I tried to set 2D Pose in RViz, the initial robot position in stage does not change at all.

When initializing RViz and Stage, the map itself is also not synchronized. The origin of my map in RViz is at the corner of the map while the origin of my map in Stage is at the center of the map.

I hope to know how to handle this issues. Your feedbacks are appreciated.

Originally posted by Andre Setiawan on ROS Answers with karma: 3 on 2013-04-22
Post score: 0

Original comments
Comment by ali ekber celik on 2013-11-30:
Hi,how did you solve your 2nd and 3rd problems?

A:

I have something similar to item 2 in this question. The initial pose in robot (/odom topic) is '0' although in stage world is another (defined in .world file).
For item 3 you must set both in .world file for stage and in mapserver the reference for the map origin. (Are you using mapserver?)
For item 1 those tf are published because the stageros node was made for doing so. You can ignore those that are not useful to you. Or if you like, you can make a custom simulator based on rosstage (I'm now trying to doing this to solve my issue).

Originally posted by gustavo.velascoh with karma: 756 on 2013-04-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Andre Setiawan on 2013-04-23:
Yes, I'm using map_server. For item 1, I tried to change the variable in launch file of Stage, but it doesn't work as I mentioned earlier. The best way I can think of is to change my TF tree to use base_footprint frame and base_laser_link frame in accordance to what Stage node use.
Comment by Andre Setiawan on 2013-04-23:
Another way is to change the frame names from Stage source code directly. Is there a command line to directly replace "base_footprint" in Stage source code to "base_link" and "base_laser_link" to "laser_frame"?
Comment by gustavo.velascoh on 2013-04-23:
As I said you before, tf names as topics names are defined in stageros.cpp. If you want to change them I think you should edit source file and re-build or make your custom 'stageros'.What happens with item 3? can you solve your issue?
Comment by Andre Setiawan on 2013-04-23:
I can solve the issue for item number 3 my adjusting the origin value of map.yaml and map.world file. Now the only problem is for item number 2.

