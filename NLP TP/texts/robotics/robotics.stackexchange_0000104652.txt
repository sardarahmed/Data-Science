Q:

Should global costmap have an obstacle layer?

I recently started using the NAV2 stack and I am still trying to understand basic concepts. As I understand it, obstacle avoidance and therefore local path re-planning should be done by the controller which theoretically works at higher frequencies that the planner. I was therefore wondering why one would add the obstacle layer in the global costmap. I understand that based on the configuration of the controller sometimes local re-planning is not possible (e.g., if a Regulated Pure Pursuit controller is used). Still, however, I cannot comprehend the intuition behind using an obstacle layer in the global costmap (i.e., why would someone completely avoid doing local re-planning and go directly to global re-planning). Similar questions to mine did not give any valuable insights in the intuition behind this choice:
StackExchangeLink

A:

Your StackExchange link is talking about a very specific case: slam. The optimizations and metrics for building a map (slam) and for efficiently navigating an existing map are not necessarily the same.
Here is an example. Imagine there are two long hallways that both lead to the goal, which is far away and not visible to the robot's sensors. The global planner has to choose one hallway, so it is useful to have the information that one hallway is obstructed. Of course, the system also needs some mechanism that eventually clears obstacles from the global costmap.

