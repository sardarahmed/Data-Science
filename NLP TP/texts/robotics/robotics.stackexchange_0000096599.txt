Q:

Slam_toolbox message filter dropping message

Hi guys,
I am trying to start mapping with slam_toolbox. (Ubuntu 18.04 with Eloquent)
When starting the online async node (or sync, I tested both) this message gets spammed and no map is produced:
[slam_toolbox-1] [INFO] [slam_toolbox]: Message Filter dropping message: frame 'base_scan' at time 1594996830.893 for reason 'Unknown'

I am publishing my daser data to base_scan and my TF-Tree looks like this:
odom -> base_fooprint -> base_link -> base_scan.
My Odom msg is published by the wheels with frame_id: odom  and child_frame_id: base_footprint.
I don't know if this is important but just to have everything in: I am filtering my lasermessage with an own node so it produces only 180° scan instead of 270°. I am replacing the unneccesary points with NAN.
In Rviz my TF looks clean, instead of map with the warning: No transform from [map] to [base_link]
My slam_toolbox yaml file (the rest is untouched but I think it should be all default):
slam_toolbox:
  ros__parameters:

    # Plugin params
    solver_plugin: solver_plugins::CeresSolver
    ceres_linear_solver: SPARSE_NORMAL_CHOLESKY
    ceres_preconditioner: SCHUR_JACOBI   
    ceres_trust_strategy: LEVENBERG_MARQUARDT
    ceres_dogleg_type: TRADITIONAL_DOGLEG
    ceres_loss_function: None

    # ROS Parameters
    odom_frame: odom
    map_frame: map
    base_frame: base_footprint
    scan_topic: /scan
    mode: mapping #localization

Dont know if this issue is related: https://github.com/SteveMacenski/slam_toolbox/issues/169.
I am not using a bridge but the error output seems to be the same.
Thanks in advance. If you need any more information just let me know and i will update the question.

Originally posted by pfedom on ROS Answers with karma: 74 on 2020-07-21
Post score: 3

A:

Got it.
My odometry transform was missing the timestamp.
Adding it got the slam working !

Originally posted by pfedom with karma: 74 on 2020-07-23
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by surfertas on 2020-07-23:
Adding a bit more details with regards to your solution would be helpful for future viewers. (e.g. where and how did you add the missing timestamp.) Thanks.
Comment by pfedom on 2020-07-23:
The transform from odom to base_footprint (wheel_odometry frame_id to child_frame_id) was missing the header.stamp part. I just missed it when I created the tf-broadcaster.
Adding it to the tf-broadcaster gave me seconds and nanoseconds in the transform message and the slam was working.
I hope this is well explained. If you need more information just comment again please.
Comment by Shneider1m7 on 2021-03-05:
Hey @pfedom I'm facing a similar problem when i launch slam toolbox online sync, I got "no map received warning" in rviz and "[rivz]: Message Filter dropping message: frame 'base_scan' at time 1594996830.893 for reason 'Unknown' "
I didn't get what you did.
Comment by sisaha9 on 2021-04-19:
@Shneider1m7 did you figure out what was the issue? I am facing the same problem right now

