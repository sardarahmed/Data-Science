Q:

Rosbag in Roslaunch, save rosbag to specific directory

Hey I wanted to use robsbag record in a roslaunch file like:
<node pkg="rosbag" type="record" name="record" output="screen"/>

How do I specify that I want to save the bag with a timestamp and to a specific location?
I am running on an embedded hardware and have therefore installed the needed ros packages for perception: ros-indigo-perception and ros-indigo-rosbag. Do I need any other packages?
I can run Rosbags without any issue, but start recording keeps failing. Running the following from the commandline, instead of launch file, achieves what I want:
rosbag record -o ~/../../media/ubuntu/E04E-7229/Rosbag/ -a

But running the command in the roslaunch file:
<node pkg="rosbag" type="record" name="record" output="screen" args="-o ~/../../media/ubuntu/E04E-7229/Rosbag/ -a" launch-prefix="xterm -e"/>

makes it crash with Error opening file! I tried changing the write rights for the launch file, but the error persists

Error writing: Error opening file: ~/Desktop/_2016-10-13-07-27-39.bag.active

The error was apparently now does not exist when writing to the Desktop but only when I write to the SD-Card. Nevertheless the .bag is not created when I use launch file. If I do the same thing in the terminal the file is created and no errors >/

Originally posted by jtim on ROS Answers with karma: 153 on 2016-10-12
Post score: 1

A:

you can use the args flag to pass in the arguments as you would from the command line:
<node pkg="rosbag" type="record" args="-O <PATH_TO_BAGFILE>" name="record" output="screen"/>

EDIT
Even though this is probably not the way it is intended, you could also go with the prefix (note, lower case o):
<node pkg="rosbag" type="record" args="-o <PATH_TO_BAGFILE>" name="record" output="screen"/>

e.g. -o ~/Desktop/ would result in the file /home/mig/Desktop/_2016-10-12-17-06-59.bag on my system. But this is rather a workaround then a proper solution.

EDIT2
whoops, soory about that. Seems like the ~ shortcut for the users home directory cannot be resolved from the launch file. So you need to specify the full path, i.e. /home/<USER>/... for it to work.

Originally posted by mgruhler with karma: 12390 on 2016-10-12
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by jtim on 2016-10-12:
hmm, cannot seem to get it to work, I try to access a folder on a SD-Card, where there is write access. So I did:  but cannot see any output.
Comment by jtim on 2016-10-12:
@mig Do I need to specify the name of the file? I would rather have that it is generated based on a timestamp, is this possible?
Comment by mgruhler on 2016-10-12:
yes, you need to specify the filename with -O. For an alternative, see edit above.
Comment by jtim on 2016-10-13:
Weird I cannot seem to get it to work: [ccamera/record-2] process has died [pid 26717, exit code 1, cmd /opt/ros/indigo/lib/rosbag/record -o ~/Desktop/ __name:=record __log:=/root/.ros/log/6c14908a-9087-11e6-ad7f-00044b5ab358/ccamera-record-2.log].
The logfile is not created either.
Comment by mgruhler on 2016-10-13:
whoops, soory about that. Seems like the ~ cannot be resolved here. So you need to specify the full path, i.e. /home/<USER>/... for it to work.

