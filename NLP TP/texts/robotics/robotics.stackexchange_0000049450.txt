Q:

Groovy RVIZ build fails on OS X

I am having a problem building groovy from source on OS X 10.8.3 using homebrew. The RVIZ catkiin package fails to build the python bindings with the following error message:
==> Processing catkin package: 'rviz'
==> Building with env: '/Users/brian/ros_catkin_ws/install_isolated/env.sh'
Makefile exists, skipping explicit cmake invocation...
==> make cmake_check_build_system in '/Users/brian/ros_catkin_ws/build_isolated/rviz'
==> make -j2 -l2 in '/Users/brian/ros_catkin_ws/build_isolated/rviz'
Linking CXX shared library /Users/brian/ros_catkin_ws/devel_isolated/rviz/lib/librviz.dylib
[ 60%] Built target rviz
Linking CXX executable /Users/brian/ros_catkin_ws/devel_isolated/rviz/lib/rviz/rviz
[ 61%] Built target executable
Linking CXX shared library /Users/brian/ros_catkin_ws/devel_isolated/rviz/lib/libdefault_plugin.dylib
[ 93%] Built target default_plugin 
Linking CXX executable /Users/brian/ros_catkin_ws/devel_isolated/rviz/lib/rviz/image_view
[ 94%] Built target rviz_image_view
[ 94%] Running Shiboken generator for librviz Python bindings...
./QtCore.framework/Headers/QtCore
/Users/brian/ros_catkin_ws/src/rviz/src/QtCore.framework/Headers/QtCore
....
    enum 'QRegExp::CaretMode' is specified in typesystem, but not declared
type 'QFileOpenEvent' is specified in typesystem, but not defined. This could potentially lead to compilation errors.
type 'QPyTextObject' is specified in typesystem, but not defined. This could potentially lead to compilation errors.
enum 'QDateTimeEdit::Section' is specified in typesystem, but not declared

Could not find a minimal constructor for type 'QPixmap'. This will result in a compilation error.

/bin/sh: line 1:  8180 Abort trap: 6           /usr/local/Cellar/shiboken/1.1.2/bin/shiboken --  generatorSet=shiboken --include-paths=/Users/brian/ros_catkin_ws/src/rviz/src::/usr/include:/Library/Frameworks/QtCore.framework --typesystem-paths=/usr/local/Cellar/pyside/1.1.2/share/PySide/typesystems --output-directory=/Users/brian/ros_catkin_ws/build_isolated/rviz/src/python_bindings/shiboken global.h typesystem.xml
make[2]: *** [src/python_bindings/shiboken/librviz_shiboken/librviz_shiboken_module_wrapper.cpp]    Error 134
make[1]: *** [src/python_bindings/shiboken/CMakeFiles/rviz_shiboken.dir/all] Error 2
make: *** [all] Error 2
make: INTERNAL: Exiting with 3 jobserver tokens available; should be 2!

<== Failed to process package 'rviz': 
Command '/Users/brian/ros_catkin_ws/install_isolated/env.sh make -j2 -l2' returned non-zero exit status 2

Could this be a problem with my installed shiboken / pyside version (1.1.2)? Any other suggestion or idea what might be causing the problem?

Originally posted by jensenb on ROS Answers with karma: 316 on 2013-03-17
Post score: 1

A:

So I managed to solve this problem and was able to successfully build rviz. It turns out that I had two versions of Qt installed on my system by mistake, one older version installed using the standalone installer located under /Library/Frameworks, and the most current version installed using homebrew under /usr/local/lib. The installed version of shiboken and PySide was linked against the homebrew Qt installation.
Unfortunately the rviz configuration chose the old Qt installation under /Library/Frameworks and was passing this information on to shiboken as indicated by:
--include-paths=/Users/brian/ros_catkin_ws/src/rviz/src::/usr/include:/Library/Frameworks/QtCore.framework 

The resulting warnings and errors messages like
enum 'QDateTimeEdit::Section' is specified in typesystem, but not declared

indicated that the PySide / shiboken version did not match up with the provided Qt Library headers.
Deleting all traces of the old Qt installation /Library/Frameworks fixed the problem for me.

Originally posted by jensenb with karma: 316 on 2013-03-24
This answer was ACCEPTED on the original site
Post score: 1

