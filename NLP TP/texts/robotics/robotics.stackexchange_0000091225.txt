Q:

sensor_msgs/Image data to sensor_msgs/CompressedImage data

I have an industrial camera (DVP interface), and I added some code in the driver to convert the cv image into ros image data. I want to use this camera to test the fiducials package. But it needs to subscribe to a sensor_msgs/CompressedImage topic, and now the driver can only provide the sensor_msgs/Image topic. Is there any way to convert the sensor_msgs/Image data into sensor_msgs/CompressedImage data?

Originally posted by anonymous38087 on ROS Answers with karma: 9 on 2019-04-02
Post score: 1

A:

Is there any way to convert the sensor_msgs/Image data into sensor_msgs/CompressedImage data?

yes: the republish node of the image_transport package can convert between uncompressed and compressed images (between any registered transports actually).
Note: this will incur overhead, as it subscribes, compressed and then publishes messages.

Originally posted by gvdhoorn with karma: 86574 on 2019-04-02
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by anonymous38087 on 2019-04-02:
Thank you! It solved my problem. This is my method:rosrun image_transport republish raw in:=/usb_cam/image_raw compressed out:=/usb_cam/image_raw. Before use this node, ros-$ROS_DISTRO-image-transport and ros-$ROS_DISTRO-image-transport-plugins should be installed.
Comment by gvdhoorn on 2019-04-02:\

out:=/usb_cam/image_raw

is that correct, or a typo?
I would not publish on the exact same topic. Or does republish add a subtopic (ie: /usb_cam/image_raw/compressed)?
Comment by anonymous38087 on 2019-04-02:
Because my camera driver will only generate a usb_cam/image_raw topic, and image_transport node will generate a new topic usb_cam/image_raw/compressed based on the parameter compressed of out.
Comment by sunt40 on 2020-10-19:
How to republish sensor_msgs/CompressedImage data to sensor_msgs/Image data ? I use "rosrun image_transport republish compressed in:=/usb_cam/image_raw/compressed raw out:=/usb_cam/image_raw". But thereis no data.When I run "rostopic echo /usb_cam/image_raw", There is nothing. Where is the problem ?

