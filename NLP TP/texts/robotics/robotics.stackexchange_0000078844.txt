Q:

How to make 2D nav goal work

I'm a student working on my final year project all I have to do is make this custom robot to move using 2d nav goal however, the robot just doesn't move where I want it to i'm very close to the deadline and freaking out any help would be appreciated.
This is the launch file that my seniors have been working on
yinht@yinht-desktop:~$ roslaunch hostbot hostbot.launch
... logging to /home/yinht/.ros/log/79283f6a-ee79-11e6-bbfe-00215cbf656c/roslaunch-yinht-desktop-2930.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://yinht-desktop:39397/

SUMMARY
========

PARAMETERS
 * /amcl/gui_publish_rate: 10.0
 * /amcl/kld_err: 0.05
 * /amcl/kld_z: 0.99
 * /amcl/laser_lambda_short: 0.1
 * /amcl/laser_likelihood_max_dist: 2.0
 * /amcl/laser_max_beams: 30
 * /amcl/laser_model_type: likelihood_field
 * /amcl/laser_sigma_hit: 0.2
 * /amcl/laser_z_hit: 0.5
 * /amcl/laser_z_max: 0.05
 * /amcl/laser_z_rand: 0.5
 * /amcl/laser_z_short: 0.05
 * /amcl/max_particles: 5000
 * /amcl/min_particles: 500
 * /amcl/odom_alpha1: 0.2
 * /amcl/odom_alpha2: 0.2
 * /amcl/odom_alpha3: 0.8
 * /amcl/odom_alpha4: 0.2
 * /amcl/odom_alpha5: 0.1
 * /amcl/odom_frame_id: odom
 * /amcl/odom_model_type: omni
 * /amcl/recovery_alpha_fast: 0.0
 * /amcl/recovery_alpha_slow: 0.0
 * /amcl/resample_interval: 1
 * /amcl/transform_tolerance: 0.1
 * /amcl/update_min_a: 0.5
 * /amcl/update_min_d: 0.2
 * /arduino/baud: 115200
 * /arduino/port: /dev/ttyUSB0
 * /camera/camera_nodelet_manager/num_worker_threads: 4
 * /camera/depth_rectify_depth/interpolation: 0
 * /camera/driver/auto_exposure: True
 * /camera/driver/auto_white_balance: True
 * /camera/driver/color_depth_synchronization: False
 * /camera/driver/depth_camera_info_url: 
 * /camera/driver/depth_frame_id: camera_depth_opti...
 * /camera/driver/depth_registration: False
 * /camera/driver/device_id: #1
 * /camera/driver/rgb_camera_info_url: 
 * /camera/driver/rgb_frame_id: camera_rgb_optica...
 * /diffusion_tf/angle_std_mean_deviation_deg: 10
 * /diffusion_tf/angular_scale: 1.0
 * /diffusion_tf/base_frame_id: base_link
 * /diffusion_tf/base_width: 0.34
 * /diffusion_tf/linear_scale: 1.0
 * /diffusion_tf/odom_frame_id: odom
 * /diffusion_tf/pos_std_mean_deviation: 0.1
 * /diffusion_tf/publish_tf: True
 * /diffusion_tf/rate: 40
 * /diffusion_tf/vit_ang_std_mean_deviation_deg: 3
 * /diffusion_tf/vit_std_mean_deviation_deg: 1
 * /hokuyo_laser/calibrate_time: False
 * /hokuyo_laser/frame_id: base_laser_link
 * /hokuyo_laser/intensity: False
 * /hokuyo_laser/max_ang: 1.4
 * /hokuyo_laser/min_ang: -1.4
 * /hokuyo_laser/port: /dev/ttyACM0
 * /move_base/TrajectoryPlannerROS/acc_lim_theta: 3.0
 * /move_base/TrajectoryPlannerROS/acc_lim_x: 2.0
 * /move_base/TrajectoryPlannerROS/acc_lim_y: 0.0
 * /move_base/TrajectoryPlannerROS/angular_sim_granularity: 0.025
 * /move_base/TrajectoryPlannerROS/dwa: True
 * /move_base/TrajectoryPlannerROS/escape_vel: -0.05
 * /move_base/TrajectoryPlannerROS/gdist_scale: 0.6
 * /move_base/TrajectoryPlannerROS/heading_lookahead: 0.325
 * /move_base/TrajectoryPlannerROS/heading_scoring: False
 * /move_base/TrajectoryPlannerROS/heading_scoring_timestep: 0.8
 * /move_base/TrajectoryPlannerROS/holonomic_robot: False
 * /move_base/TrajectoryPlannerROS/latch_xy_goal_tolerance: False
 * /move_base/TrajectoryPlannerROS/max_rotational_vel: 0.15
 * /move_base/TrajectoryPlannerROS/max_vel_theta: 0.15
 * /move_base/TrajectoryPlannerROS/max_vel_x: 0.3
 * /move_base/TrajectoryPlannerROS/max_vel_y: 0.0
 * /move_base/TrajectoryPlannerROS/meter_scoring: True
 * /move_base/TrajectoryPlannerROS/min_in_place_vel_theta: 0.5
 * /move_base/TrajectoryPlannerROS/min_vel_theta: -0.15
 * /move_base/TrajectoryPlannerROS/min_vel_x: 0.1
 * /move_base/TrajectoryPlannerROS/min_vel_y: 0.0
 * /move_base/TrajectoryPlannerROS/occdist_scale: 0.1
 * /move_base/TrajectoryPlannerROS/oscillation_reset_dist: 0.05
 * /move_base/TrajectoryPlannerROS/pdist_scale: 0.8
 * /move_base/TrajectoryPlannerROS/prune_plan: True
 * /move_base/TrajectoryPlannerROS/publish_cost_grid_pc: False
 * /move_base/TrajectoryPlannerROS/sim_granularity: 0.025
 * /move_base/TrajectoryPlannerROS/sim_time: 1.0
 * /move_base/TrajectoryPlannerROS/simple_attractor: False
 * /move_base/TrajectoryPlannerROS/vtheta_samples: 20
 * /move_base/TrajectoryPlannerROS/vx_samples: 8
 * /move_base/TrajectoryPlannerROS/vy_samples: 0
 * /move_base/TrajectoryPlannerROS/xy_goal_tolerance: 0.3
 * /move_base/TrajectoryPlannerROS/yaw_goal_tolerance: 0.15
 * /move_base/clearing_rotation_allowed: False
 * /move_base/controller_frequency: 5.0
 * /move_base/global_costmap/footprint: [[0.2, 0.2], [0.2...
 * /move_base/global_costmap/global_frame: /map
 * /move_base/global_costmap/inflation_radius: 0.1
 * /move_base/global_costmap/map_type: costmap
 * /move_base/global_costmap/max_obstacle_height: 0.6
 * /move_base/global_costmap/min_obstacle_height: 0.0
 * /move_base/global_costmap/observation_sources: scan
 * /move_base/global_costmap/obstacle_range: 2.5
 * /move_base/global_costmap/publish_frequency: 5.0
 * /move_base/global_costmap/raytrace_range: 3.0
 * /move_base/global_costmap/resolution: 0.01
 * /move_base/global_costmap/robot_base_frame: /base_link
 * /move_base/global_costmap/rolling_window: False
 * /move_base/global_costmap/scan/clearing: True
 * /move_base/global_costmap/scan/data_type: LaserScan
 * /move_base/global_costmap/scan/expected_update_rate: 0
 * /move_base/global_costmap/scan/marking: True
 * /move_base/global_costmap/scan/topic: /scan
 * /move_base/global_costmap/static_map: True
 * /move_base/global_costmap/transform_tolerance: 1.0
 * /move_base/global_costmap/update_frequency: 3.0
 * /move_base/local_costmap/footprint: [[0.2, 0.2], [0.2...
 * /move_base/local_costmap/global_frame: /odom
 * /move_base/local_costmap/height: 6.0
 * /move_base/local_costmap/inflation_radius: 0.1
 * /move_base/local_costmap/map_type: costmap
 * /move_base/local_costmap/max_obstacle_height: 0.6
 * /move_base/local_costmap/min_obstacle_height: 0.0
 * /move_base/local_costmap/observation_sources: scan
 * /move_base/local_costmap/obstacle_range: 2.5
 * /move_base/local_costmap/publish_frequency: 5.0
 * /move_base/local_costmap/raytrace_range: 3.0
 * /move_base/local_costmap/resolution: 0.07556
 * /move_base/local_costmap/robot_base_frame: /base_link
 * /move_base/local_costmap/rolling_window: True
 * /move_base/local_costmap/scan/clearing: True
 * /move_base/local_costmap/scan/data_type: LaserScan
 * /move_base/local_costmap/scan/expected_update_rate: 0
 * /move_base/local_costmap/scan/marking: True
 * /move_base/local_costmap/scan/topic: /scan
 * /move_base/local_costmap/static_map: False
 * /move_base/local_costmap/transform_tolerance: 1.0
 * /move_base/local_costmap/update_frequency: 3.0
 * /move_base/local_costmap/width: 6.0
 * /move_base/recovery_behavior_enabled: False
 * /robot_description: <?xml version="1....
 * /robot_state_publisher/publish_frequency: 20.0
 * /robot_state_publisher/use_gui: True
 * /rosdistro: indigo
 * /rosversion: 1.11.19
 * /ticks_meter: 14887.10852
 * /twist_to_motors/base_width: 0.3
 * /use_sim_time: False

NODES
  /camera/
    camera_nodelet_manager (nodelet/nodelet)
    depth_metric (nodelet/nodelet)
    depth_metric_rect (nodelet/nodelet)
    depth_points (nodelet/nodelet)
    depth_rectify_depth (nodelet/nodelet)
    depth_registered_sw_metric_rect (nodelet/nodelet)
    driver (nodelet/nodelet)
    points_xyzrgb_sw_registered (nodelet/nodelet)
    rectify_color (nodelet/nodelet)
    register_depth_rgb (nodelet/nodelet)
  /
    amcl (amcl/amcl)
    arduino (rosserial_python/serial_node.py)
    camera_base_link (tf/static_transform_publisher)
    camera_base_link1 (tf/static_transform_publisher)
    camera_base_link2 (tf/static_transform_publisher)
    camera_base_link3 (tf/static_transform_publisher)
    diffusion_tf (hostbot/diff_tf.py)
    hokuyo_laser (hokuyo_node/hokuyo_node)
    joint_state_publisher (joint_state_publisher/joint_state_publisher)
    map_server (map_server/map_server)
    move_base (move_base/move_base)
    robot_state_publisher (robot_state_publisher/state_publisher)
    twist_to_motors (hostbot/twist_to_motors.py)

auto-starting new master
process[master]: started with pid [2945]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 79283f6a-ee79-11e6-bbfe-00215cbf656c
process[rosout-1]: started with pid [2958]
started core service [/rosout]
process[robot_state_publisher-2]: started with pid [2962]
process[joint_state_publisher-3]: started with pid [2977]
process[camera/camera_nodelet_manager-4]: started with pid [2978]
process[camera/driver-5]: started with pid [2979]
process[camera/rectify_color-6]: started with pid [2980]
process[camera/depth_rectify_depth-7]: started with pid [2981]
process[camera/depth_metric_rect-8]: started with pid [2988]
process[camera/depth_metric-9]: started with pid [3006]
process[camera/depth_points-10]: started with pid [3008]
process[camera/register_depth_rgb-11]: started with pid [3014]
process[camera/points_xyzrgb_sw_registered-12]: started with pid [3025]
process[camera/depth_registered_sw_metric_rect-13]: started with pid [3033]
process[camera_base_link-14]: started with pid [3044]
process[camera_base_link1-15]: started with pid [3065]
process[camera_base_link2-16]: started with pid [3084]
process[camera_base_link3-17]: started with pid [3088]
process[twist_to_motors-18]: started with pid [3102]
process[diffusion_tf-19]: started with pid [3118]
process[arduino-20]: started with pid [3122]
process[hokuyo_laser-21]: started with pid [3132]
process[map_server-22]: started with pid [3137]
process[amcl-23]: started with pid [3152]
process[move_base-24]: started with pid [3173]
[INFO] [WallTime: 1486611619.100120] /twist_to_motors started
/home/yinht/catkin_ws/src/hostbot/nodes/twist_to_motors.py:42: SyntaxWarning: The publisher should be created with an explicit keyword argument 'queue_size'. Please see http://wiki.ros.org/rospy/Overview/Publishers%20and%20Subscribers for more information.
  self.pub_lmotor = rospy.Publisher('lwheel_vtarget', Float32)
/home/yinht/catkin_ws/src/hostbot/nodes/twist_to_motors.py:43: SyntaxWarning: The publisher should be created with an explicit keyword argument 'queue_size'. Please see http://wiki.ros.org/rospy/Overview/Publishers%20and%20Subscribers for more information.
  self.pub_rmotor = rospy.Publisher('rwheel_vtarget', Float32)
[INFO] [WallTime: 1486611619.119804] ROS Serial Python Node
[INFO] [WallTime: 1486611619.135599] Connecting to /dev/ttyUSB0 at 115200 baud
[INFO] [WallTime: 1486611619.675578] -I- /diffusion_tf started
/home/yinht/catkin_ws/src/hostbot/nodes/diff_tf.py:117: SyntaxWarning: The publisher should be created with an explicit keyword argument 'queue_size'. Please see http://wiki.ros.org/rospy/Overview/Publishers%20and%20Subscribers for more information.
  self.odomPub = rospy.Publisher("odom", Odometry)
[ INFO] [1486611619.722750314]: Initializing nodelet with 4 worker threads.
[ INFO] [1486611620.318574421]: Device "1d27/0601@1/8" found.
Warning: USB events thread - failed to set priority. This might cause loss of data...
[ INFO] [1486611620.827583713]: Loading from pre-hydro parameter style
[ INFO] [1486611620.846512649]: Using plugin "static_layer"
[ INFO] [1486611620.922095814]: Requesting the map...
[ INFO] [1486611621.125850438]: Resizing costmap to 1688 X 1246 at 0.075560 m/pix
[ INFO] [1486611621.224890103]: Received a 1688 X 1246 map at 0.075560 m/pix
[ INFO] [1486611621.228899185]: Using plugin "obstacle_layer"
[ INFO] [1486611621.231065622]:     Subscribed to Topics: scan
[ INFO] [1486611621.255926012]: Using plugin "inflation_layer"
[INFO] [WallTime: 1486611621.304239] Note: publish buffer size is 512 bytes
[INFO] [WallTime: 1486611621.304889] Setup publisher on lwheel [std_msgs/Int32]
[INFO] [WallTime: 1486611621.308742] Setup publisher on rwheel [std_msgs/Int32]
[INFO] [WallTime: 1486611621.328646] Note: subscribe buffer size is 512 bytes
[INFO] [WallTime: 1486611621.329027] Setup subscriber on lwheel_vtarget [std_msgs/Float32]
[INFO] [WallTime: 1486611621.339383] Setup subscriber on rwheel_vtarget [std_msgs/Float32]
[ INFO] [1486611621.464544792]: Loading from pre-hydro parameter style
[ INFO] [1486611621.482854423]: Using plugin "obstacle_layer"
[ INFO] [1486611621.542420668]:     Subscribed to Topics: scan
[ INFO] [1486611621.568243860]: Using plugin "inflation_layer"
[ INFO] [1486611621.674129475]: Created local_planner base_local_planner/TrajectoryPlannerROS
[ INFO] [1486611621.684672118]: Sim period is set to 0.20
[ INFO] [1486611621.996928824]: Recovery behavior will clear layer obstacles
[ INFO] [1486611622.073751895]: Recovery behavior will clear layer obstacles
[ INFO] [1486611622.109598365]: odom received!
[ INFO] [1486611767.107078516]: Starting color stream.
[ INFO] [1486611767.244406639]: using default calibration URL
[ INFO] [1486611767.244511719]: camera calibration URL: file:///home/yinht/.ros/camera_info/rgb_PS1080_PrimeSense.yaml
[ INFO] [1486611767.244824607]: Unable to open camera calibration file [/home/yinht/.ros/camera_info/rgb_PS1080_PrimeSense.yaml]
[ WARN] [1486611767.244875368]: Camera calibration file /home/yinht/.ros/camera_info/rgb_PS1080_PrimeSense.yaml not found.

this is the base_local_planner.yaml
controller_frequency: 5.0
recovery_behavior_enabled: false
clearing_rotation_allowed: false

TrajectoryPlannerROS:
   max_vel_x: 0.30
   min_vel_x: 0.10
   max_vel_theta: 0.15
   min_vel_theta: -0.15
   max_rotational_vel: 0.15
   max_vel_y: 0.0  # zero for a differential drive robot
   min_vel_y: 0.0
   min_in_place_vel_theta: 0.5
   escape_vel: -0.05
   acc_lim_x: 2.0
   acc_lim_y: 0.0 # zero for a differential drive robot
   acc_lim_theta: 3.0

   holonomic_robot: false
   yaw_goal_tolerance: 0.15 # about 6 degrees
   xy_goal_tolerance: 0.3  # 10 cm
   latch_xy_goal_tolerance: false
   pdist_scale: 0.8
   gdist_scale: 0.6
   meter_scoring: true

   heading_lookahead: 0.325
   heading_scoring: false
   heading_scoring_timestep: 0.8
   occdist_scale: 0.1
   oscillation_reset_dist: 0.05
   publish_cost_grid_pc: false
   prune_plan: true

   sim_time: 1.0
   sim_granularity: 0.025
   angular_sim_granularity: 0.025
   vx_samples: 8
   vy_samples: 0 # zero for a differential drive robot
   vtheta_samples: 20
   dwa: true
   simple_attractor: false

This is the costmap_common_params.yaml
obstacle_range: 2.5
raytrace_range: 3.0
#robot_radius: 0.2
footprint: [[0.2, 0.2], [0.2,-0.2 ], [-0.2,-0.2], [-0.2, 0.2]]
inflation_radius: 0.1
max_obstacle_height: 0.6
min_obstacle_height: 0.0
observation_sources: scan
scan: {data_type: LaserScan, topic: /scan, marking: true, clearing: true, expected_update_rate: 0}

and lastly the global_costmap_params.yaml
global_costmap:
   global_frame: /map
   robot_base_frame: /base_link
   update_frequency: 3.0
   publish_frequency: 5.0
   static_map: true
   rolling_window: false
   resolution: 0.01
   transform_tolerance: 1.0
   map_type: costmap

If I can get this robot to perform 2dnav where you point click to the desired location, I would complete my final project thanks again for my help

Originally posted by Acecryz on ROS Answers with karma: 25 on 2017-02-08
Post score: 0

Original comments
Comment by mgruhler on 2017-02-09:
Please use the preformatted text button (with 101010 on it) to post any code or terminal output...

A:

Seriously, you need to work a bit more on your problem description skills. This holds for your other question as well: http://answers.ros.org/question/254189/robot-does-not-listen-to-2d-pose-estimate/
As both rviz commands to the robot do not work, I guess you have rviz running on another machine (a laptop, e.g.).
You probably set the ROS_MASTER_URI. But for the buttons to properly work, you need to be able to ping both participants via IP and hostname.
Quick search about your problem led to this answer here on this page: http://answers.ros.org/question/10343/how-to-run-rviz-remotely/
Set the ROS_IP on your PC running rviz accordingly. This should help, hopefully.
More information:

http://wiki.ros.org/ROS/EnvironmentVariables#ROS_MASTER_URI
http://wiki.ros.org/ROS/NetworkSetup

Originally posted by mgruhler with karma: 12390 on 2017-02-09
This answer was ACCEPTED on the original site
Post score: 0

