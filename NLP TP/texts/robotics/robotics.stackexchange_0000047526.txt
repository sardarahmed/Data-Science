Q:

how to send empty message?

Hey,
I'm working with an Ar Drone and i would like to send from my node a command to the helicopter to take off.
The command in terminal is given(works): rostopic pub /ardrone/takeoff std_msgs/Empty
I try to send an empty msg from my node but the drone does not take off and i do not get an echo of the msg. What am I missing? or what is wrong with my code?
My code is:
#include <std_msgs/Empty.h>

int main(int argc, char **argv){

init(argc, argv, "takeoff_fly");
Nodehandle n;
std_msg::Empty myMsg;
Publisher takeOff=n.advertise<std_msgs::Empty>("/ardrone/takeoff",1);
takeOff.publish(myMsg);
spinOnce();

return 0;
}

Originally posted by zweistein on ROS Answers with karma: 231 on 2013-01-22
Post score: 2

A:

Try sleeping a bit before sending the message, or sending the message multiple times. This is happening because your publisher probably hasn't finished registering itself when you send the message. In this particular situation though, it might make more sense to do this as an action or a service, which both have ways of ensuring the other end is connected, and allow the other end to send feedback.

Originally posted by Dan Lazewatsky with karma: 9115 on 2013-01-22
This answer was ACCEPTED on the original site
Post score: 6

Original comments
Comment by dornhege on 2013-01-22:
Definitely sounds like a case for a service/action!
Comment by Martin Peris on 2013-01-22:
+1 for service/action
Comment by saikishor on 2017-05-05:
Is there any way to know the status of takeoff action?.

