Q:

ethzasl_sensor_fusion only works first time

Strangest thing happened at the end of completing the ethzasl_sensor_fusion getting started tutorial:
http://wiki.ros.org/ethzasl_sensor_fusion/Tutorials/getting_started
I followed the instructions and then ran the launch file. I see the graph working as expected (updated to rqt_plot). I then let the bag file run until it gets to the end. I'm thinking so far so good but then I try to run it again, now it won't work for me.
I have tried reinitialization everything again. I try over and over. The graph is now flat lining. I can't understand why it would only work once when nothing has changed.
The only thing that I can think of that may be different each time, is the time that I initialize the filter. This is always different as I stop the bag file after running it for approximately 1 second and then initialize as per instructions.
I either get an error warning:
=== ERROR === update: NAN at index 0
=== ERROR === prediction p: NAN at index 0
Or I get this message:
[ WARN] [1441884003.214357239]: large time-gap re-initializing to last state
And sometimes this:
[ WARN] [1441884003.679369485]: Negative scale detected: -0.39217. Correcting to 0.1
It is different depending on where the 'play head' is when I initialize.
I am running Indigo on Ubuntu 14.04.

Originally posted by K7 on ROS Answers with karma: 94 on 2015-09-12
Post score: 0

A:

In my case, you have to declare the variable q_wv in template_measurement.h. This should prevent you from getting nan.

Originally posted by ssw1 with karma: 16 on 2016-02-17
This answer was ACCEPTED on the original site
Post score: 0

