Q:

how to compute the centroid of the PointCloud2

I am considering how can I compute the centroid of sensor_msgs/PointCloud2, is there a direct way to do this? Because I only find he pcl::CentroidPoint< PointT > Class Template Reference *[link text] (http://docs.pointclouds.org/trunk/classpcl_1_1_centroid_point.html#details) on the website.

Originally posted by zhonghao on ROS Answers with karma: 27 on 2018-11-14
Post score: 0

A:

You'll first need to convert the sensor_msgs/PointCloud2 into a pcl::PointCloud object as below. Note you may have to change to type of the point cloud to match what you have.
#include <pcl/conversions.h>

...

pcl::PCLPointCloud2 point_cloud2;  // Input PointCloud2 message
pcl::PointCloud<pcl::PointXYZ> pclObj;  // pcl version of the point cloud
 
// Do the conversion
pcl::fromPCLPointCloud2( point_cloud2, pclObj);

Now you can loop through the pclObj.points vector adding them to a pcl::CentroidPoint object and then extract the centroid at the end. I Don't think there's a direct method to get the centroid from the PointCloud2 message itself.

Originally posted by PeteBlackerThe3rd with karma: 9529 on 2018-11-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by alessiadele on 2019-05-05:
Hi! I am trying to convert an image in a point cloud using PCL and I am using the code's lines that you have written; but my input is different, so I don't know how to change the line:
pcl::PCLPointCloud2 point_cloud2;

How can I using an image as input instead of sensor_msgs/PointCloud2?
Consider that I have a frame with all necessary informations (intrinsic and extrinsic parameters of camera, depth, and so on).
Thanks!
Comment by PeteBlackerThe3rd on 2019-05-06:
Please can you ask a new question instead of tagging on to the end of this one.

