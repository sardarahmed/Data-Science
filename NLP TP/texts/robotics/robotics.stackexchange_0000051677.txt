Q:

Marker long distance tracking with Kinect

I would like to use the Kinect to detect my Turtlebot and have a better odometry.
So the Kinect is located between two and five meters from the turtlebot.I tried so many package like ar_pose, visp_auto_tracker or ar_kinect. Right now the best is still ar_pose but only for less than one meter or two max.
With ar_pose, something strange happens, that works better with a small pattern(80mm) than with a large (200mm). And that, even when I modify the parameter marker_width = 200.
Other issue, I cannot use ar_pose with a Kinect image_mode equal to 1: SXGA_15Hz (1): 1280x1024@15Hz. That's too bad because image quality is a lot better.
Does anyone have some tips to increase the tracking ?
EDIT:
Here is a part of my launch file related of ar_pose.
 <!-- Reading Pattern -->
  <node pkg="ar_pose" type="ar_single" respawn="true" name="pattern_reader">
    <remap from="/usb_cam/image_raw" to="/openni/rgb/image_color" />
    <remap from="/usb_cam/camera_info" to="/openni/rgb/camera_info" />
    <param name="marker_pattern" type="string" value="$(find ar_pose)/data/patt.hiro"/>
    <param name="marker_width" type="double" value="200"/>
    <name threshold="threshold" type="double" value="100"/>
  </node>

I have printed a larger hiro pattern with fitting a A4 paper, it is a square as well.

Originally posted by jep31 on ROS Answers with karma: 411 on 2013-06-04
Post score: 0

Original comments
Comment by jelfring on 2013-06-04:
I experienced poor detections with the ar_kinect package as a result of missing depth information on the black parts of the marker (did you check this?). Info regarding the tracking range for markers using ar_pose can be found at: http://www.hitl.washington.edu/artoolkit/documentation/userarwork.htm
Comment by Procópio on 2013-06-05:
why you cannot use the better quality image?
Comment by jep31 on 2013-06-05:
I didn't check depth information that's right. Now I use ar_pose because that works with 2 or 3 meters even if it's difficult with some light. The range for marker on the website are very short, I understand that for 8 inches (200mm) I have only 54 inches (1m36). I think my biggest issue is light.
Comment by jep31 on 2013-06-05:
I cannot improve quality image because ar_pose find nothing when I use image_mode=1. I think it doesn't like SXGA. I have no output but no error message either.

A:

Have you tried to play around with the threshold value? In my experiments I had to change it all the time, as it was very exposed to outdoor light.
If you are feeling brave, you can write a program to subscribe to the image, apply the threshold and show the binarized image. This way you can adjust the values and see the image ar_pose is working on.

Originally posted by Procópio with karma: 4402 on 2013-06-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jep31 on 2013-06-05:
Yes I did but all my blind attempts were worse than default value. The pattern brights a lot in the kinect image, maybe print on a matte paper would be better.
Your program is a good idea that's right.

