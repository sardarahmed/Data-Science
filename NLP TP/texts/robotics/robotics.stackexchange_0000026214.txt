Q:

Laser Retro value not returned by the RaySensor sensor

Hi there,
I am setting the laser_retro value in the link of my model as following:
<collision name="basic_square_garden_collision">
<laser_retro>2000.0</laser_retro>
....

And then reading it out as following:
this->parent_ray_sensor_->GetLaserShape()->GetRetro(ja)
this->parent_ray_sensor_ is cast to RaySensor.

Now the problem is that the laser_retro value does not seem to be set and is then also not read. The latter I verified with the following command:
gztopic echo  /gazebo/default/lawnmower/base_footprint/lawnsensor/scan

Does anyone have an example for setting and reading out this value?

Originally posted by dejanpan on Gazebo Answers with karma: 60 on 2013-04-12
Post score: 0

A:

Setting up the return as follows worked for me but not sure if this is the right way:
diff -r 5ebae74ef4ea -r b1e29966c852 gazebo/physics/Collision.cc
--- a/gazebo/physics/Collision.cc   Thu Apr 04 16:55:58 2013 -0700
+++ b/gazebo/physics/Collision.cc   Fri Apr 12 21:27:45 2013 -0700
@@ -83,6 +83,13 @@
 {
   Entity::Load(_sdf);

+  float retro;
+  if (this->sdf->HasElement("laser_retro"))
+    {
+      retro = this->sdf->GetElement("laser_retro")->GetValueDouble();
+      this->SetLaserRetro(retro);
+    }
+

Originally posted by dejanpan with karma: 60 on 2013-04-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by nkoenig on 2013-04-24:
I believe this has been merged into Gazebo default, and will come out in Gazebo 1.8.0

