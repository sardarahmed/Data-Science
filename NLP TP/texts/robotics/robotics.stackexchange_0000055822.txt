Q:

kdl_parser and catkin

In catkin workspace I create package:
catkin_create_pkg leg_kinematics std_msgs rospy roscpp kdl_parser

In leg_kinematics/src/leg_kinematics.cpp:
#include "ros/ros.h"
#include <kdl_parser/kdl_parser.hpp>

int main(int argc, char **argv)
{
    KDL::Tree my_tree;
    ros::NodeHandle node;
    return 0;
}

In CMakeLists.txt:
cmake_minimum_required(VERSION 2.8.3)
project(leg_kinematics)

find_package(catkin REQUIRED COMPONENTS
  kdl_parser
  roscpp
  rospy
  std_msgs
)

catkin_package()

include_directories( include ${catkin_INCLUDE_DIRS})
add_executable(leg_kinematics src/leg_kinematics.cpp)
target_link_libraries(leg_kinematics ${catkin_LIBRARIES})

After catkin_make I got error:
CMakeFiles/leg_kinematics.dir/src/leg_kinematics.cpp.o: In function `main':
leg_kinematics.cpp:(.text+0x58): undefined reference to `KDL::Tree::Tree(std::string const&)'
CMakeFiles/leg_kinematics.dir/src/leg_kinematics.cpp.o: In function `KDL::TreeElement::~TreeElement()':
leg_kinematics.cpp:(.text._ZN3KDL11TreeElementD2Ev[_ZN3KDL11TreeElementD5Ev]+0x27): undefined reference to `KDL::Segment::~Segment()'
leg_kinematics.cpp:(.text._ZN3KDL11TreeElementD2Ev[_ZN3KDL11TreeElementD5Ev]+0x38): undefined reference to `KDL::Segment::~Segment()'

Why?)

Originally posted by tuuzdu on ROS Answers with karma: 85 on 2013-12-02
Post score: 0

A:

Looking at kdl_parser's CMakeLists.txt, it doesn't export its dependency on orocos_kdl, which is where your missing symbol is:
https://github.com/ros/robot_model/blob/hydro-devel/kdl_parser/CMakeLists.txt#L20
On one hand, kdl_parser might should export this as a dependency, but on the other hand, you are using orocos_kdl symbols directly. Therefore you should probably also directly depend on it in your package.xml, find_package it in your CMakeLists.txt, and include the appropriate header in your c++ file, and not rely on the #include <kdl_parser/kdl_parser.hpp> line to bring in the orocos_kdl symbols you need.
If you think this is a bug in kdl_parser, I would open a ticket against it in the robot_model repository:
https://github.com/ros/robot_model/issues

Originally posted by William with karma: 17335 on 2013-12-02
This answer was ACCEPTED on the original site
Post score: 2

