Q:

Color issue with URDF and multiple visual tags

I am trying to build a URDF model that comprises different components with different colors. However, I don't necessarily want every component to be its own link; I'm just aiming for a higher level of visual fidelity. I saw here that it's possible to have multiple <visual> tags within a given <link>:
http://answers.ros.org/question/10913/multiple-visual-entries-in-urdf/
...and indeed, this works. However, subsequent <visual> tags appear to have their  tags ignored, and instead get painted the color of the first <visual> tag. In other words, if I do this:
  <link name="link1">
    <visual>
      <geometry>
        <cylinder length="4" radius="1"/>
      </geometry>
      <material name="black_metal">
        <color rgba="0.1 0.1 0.1 1"/>
      </material>
    </visual>
    <visual>
      <geometry>
        <cylinder length="2" radius="5"/>
      </geometry>
      <material name="gold">
        <color rgba="1 0.549 0 1"/>
      </material>
    </visual>
  </link>

...then BOTH my cylinders end up getting colored as the "black_metal" material. Is this a bug, or am I simply using URDF in a manner which was not intended?
EDIT: I'm using Hydro.

Originally posted by Tom Moore on ROS Answers with karma: 13689 on 2014-04-18
Post score: 3

A:

I think this is current limitation of rviz, I created patches at https://github.com/ros-visualization/rviz/pull/812, but not seems good. Need someone to rewrite better one.

Originally posted by Kei Okada with karma: 1186 on 2014-09-14
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Tom Moore on 2014-09-15:
Cool, thanks for doing that! I'll check it out. If your PR gets accepted and merged, I'll select this as the answer.

