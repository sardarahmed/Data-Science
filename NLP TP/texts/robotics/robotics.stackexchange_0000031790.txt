Q:

Using Orocos with Gazebo

I would like to use Orocos in combination with Gazebo i.e. the control/kinematics is in Orocos and I would like to use Gazebo for the simulation
So now I have the following:

A ROS-node publishes the joint states and reads the control signal from topics.
An Orocos-component publishes the control signal and reads the joint states from topics.

So basically I'm using the pr2_mechanism for the ROS-node.
My Orocos components are running at 1 kHz in real time. The movement, according to the control signal, in Gazebo is also in real time but how does this relate to the simulation time of Gazebo. The simulation time is about 0.25 of the real time.
So what is the effect of this timing on the physics in simulation, if any?

Originally posted by Jeroen on ROS Answers with karma: 13 on 2011-05-24
Post score: 1

A:

The Orocos component is not synchronized with the Gazebo simulation. Can you check the frequency of the data that is spit out by gazebo? Having your controller running faster than this usually makes no sense ;)
You could make your controller data driven, which means it will do a new control-loop when new data is available by adding your InputPorts as EventPorts: addEventPort(your_inputport) and making the component NOT periodic. Then the component will only wake up when new data is received. You can find more information here: http://www.orocos.org/stable/documentation/rtt/v2.x/doc-xml/orocos-components-manual.html#id520378
This way your controller will be synchronized with gazebo, it will still be realtime but it will probably not run at 1 kHz.

Originally posted by Ruben Smits with karma: 543 on 2011-05-29
This answer was ACCEPTED on the original site
Post score: 2

