Q:

Problem with face recognition using kinect

Hello ; I am trying to make a face Recognition using the following package """ https://github.com/procrob/procrob_fu.. . but unfortunately I face many Challenges : 1_ this package provides the method of face recognition with webcam but in my project i use kinect ... 2_ when I apply the package on webcam images don't be added to the data file nor the train.txt 3_i can't understand what meant by "order_id" and how can i use it? i am working on ubuntu 12.04 and fuerte distribution ...

Originally posted by smart engineer on ROS Answers with karma: 11 on 2014-04-30
Post score: 0

Original comments
Comment by karthik_ms on 2014-05-01:
The link seems to be broken. Please update it.
Comment by Peter Heim on 2014-05-01:
I have used this package with groovy and a kinect and it works well
if you look at the read me file the order_id is the command to add images and retrain the database
Comment by smart engineer on 2014-05-02:
Thanx for your help ;
I execute the following commands ::
1_roscore
2_roslaunch openni_launch openni.launch
3-rosrun rviz rviz
4-rosrun rqt_reconfigure rqt_reconfigure
5_rosrun image_view image_view image:=/camera/rgb/image_color
6-roscd face_recognition
7-rosrun face_recognition Fserver
8-rosrun face_recognition Fclient
till here every thing work , but the rostopic part ,i can't understand how to use it at all .
"""rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 2 "your_name",,,,
rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 1 "none" ,,,,
rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 2 "your_friend's_name",,,
rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 0 "none",,,,
rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 1 "none" ,,,,
rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 4 "none" ,,,,""""
Is there any differences will occur if I use Groovy or Fuerte distribution ????
Comment by ahendrix on 2014-05-02:
Can you edit your question to add the commands you're running, and maybe spend some time trying to format it so that it's readable?

A:

You have to run the programs from the bin folder also you need to move the other files into that folder
from memory the data folder need to be below the bin folder. If you search for face recognition it will have the details
make sure you publish the camera in the correct topic. You may need to train the database first to train the database run
rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 3 "none" there is no reason to run image_view when you run
rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 0 "none" a window will open showing the recognition results

Originally posted by Peter Heim with karma: 215 on 2014-05-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by smart engineer on 2014-05-03:
@Peter Heim ; How can I run the program from the bin folder ?
what files must be moved and how?
Comment by Peter Heim on 2014-05-03:
cd to face_recognition/bin then rosrun face_recognition Fserver in another terminal rosrun face_recognition Fclient transfer train.txt, haarcascade_frontalface_alt.xml and the data folder
haarcascade_frontalface_alt
Comment by smart engineer on 2014-05-04:
@Peter Heim :::
I transfer the following files to  the Bin folder """ data folder ,, train.txt ,,, haarcascade_frontalface_alt.xml ,,,facedata..xml """
Then I Execute the following commands  :::
1_ roscore
2_roslaunch openni_launch openni.launch
3_rosrun rviz rviz >>> and here i edit the fixed frame to ""camera_depth_optical_frame""and added PointCloud2 and set the topic to /camera/depth/points
4_rosrun image_view image_view image:=/camera/rgb/image_color
5_roscd face_recognition
6_rosrun face_recognition Fserver
7_rosrun face_recognition Fclient
8_rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 2 "Somaya"
9_rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 0 "none"
10-rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 1 "none"
11_rostopic pub -1 /fr_order face_recognition/FRClientGoal -- 4 "none"
But still no saved images ,, what is wrong ????
and what the variable "none" in the rostopic pub-1 refers to ????
Comment by Peter Heim on 2014-05-04:
make sure the kinect is publishing images to /camera/image_raw you can use rxgraph to see if they are connected. I found it easier to change the topic in face_recognition.ccp and redo rosmake.
the none in the other 3 topics is just a place holder. when the server starts what does it print out
Comment by smart engineer on 2014-05-04:
@Peter Heim
I changed the face_recognition.cpp """" //subscribe to video stream through image transport class
image_sub_ = it_.subscribe("/camera/image_raw", 1, &FaceRecognition::imageCB, this) """"
after that when I tried to run the ""rosrun face_recognition Fserver""
it printed [ INFO] [1399282787.174585362]: Training data loaded (50 training images of 2 people):
[ INFO] [1399282787.174876259]: People:
[ INFO] [1399282787.174944313]: 
[ INFO] [1399282787.175038382]: , 
terminate called after throwing an instance of 'ros::InvalidNameException'
what():  Character [ ] is not valid as the first character in Graph Resource Name [ /camera/image_raw].  Valid characters are a-z, A-Z, / and in some cases ~.
Aborted (core dumped ....
Before Editing the face_recognition.cpp>>> it printed the following "" [ INFO] [1399282787.174585362]: Training data loaded (50 training images of 2 people):
[ INFO] [1399282787.174876259]: People:
[ INFO] [1399282787.174944313]: 
Comment by Peter Heim on 2014-05-10:
You have to change it to the topic published by your kinect don't use cut and past type it in i have found that will cause errors. Using rxgraph the face recognition node must connect to the kinect topic or no images will be produced

