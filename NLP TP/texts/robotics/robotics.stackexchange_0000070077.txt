Q:

Building mavros fail

Hi, all
I am having trouble with catkin_make mavros package error recently. It kept failing and saying:
c++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.8/README.Bugs> for instructions.
make[3]: *** [mavros/mavros/CMakeFiles/mavros.dir/src/lib/uas_stringify.cpp.o] Error 4
make[3]: *** Waiting for unfinished jobs....
c++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.8/README.Bugs> for instructions.
make[3]: *** [mavros/mavros/CMakeFiles/mavros.dir/src/lib/uas_data.cpp.o] Error 4
make[2]: *** [mavros/mavros/CMakeFiles/mavros.dir/all] Error 2
make[1]: *** [mavros/mavros/CMakeFiles/mavros.dir/rule] Error 2
make: *** [mavros] Error 2
Invoking "make mavros -j4 -l4" failed

I am using an armv7l embed platform.
The mavros package is clone from https://github.com/mavlink/mavros, master branch.
Using ROS Indigo and Ubuntu 14.04
I would be really grateful if somebody can do any help.
Thank you so much!

Originally posted by pcler on ROS Answers with karma: 35 on 2015-10-26
Post score: 0

Original comments
Comment by joq on 2015-10-26:
"Internal compiler error" suggests a bug in your compiler.
Comment by pcler on 2015-10-27:
Thank you so much! It does be the problem of memory limited! This error came out on different object file, so at first I was not sure whether it was the problem of compiler.

A:

.. or a compiler running out of memory. @pcler: are you running this on an embedded platform with (very) limited RAM? If so, that could be the issue.

Originally posted by gvdhoorn with karma: 86574 on 2015-10-26
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by joq on 2015-10-26:
That was my first thought, but wouldn't the compiler print a better message in that situation?
Comment by gvdhoorn on 2015-10-26:
Not in my experience. See Raspberry Pi2 roscpp failed during Indigo installation fi.
Comment by tfoote on 2015-10-27:
I have seen the same when running out of memory. First make sure you're not compiling with multiple threads. And if that doesn't work you should add swap space. The easiest is to put it on an USB thumb driver temporarily.
Comment by pcler on 2015-10-27:
Thank you so much! After I add 2G more swap then this error disappeared. The platform already owns 2G memory. I think the linking job of the package is really heavy

