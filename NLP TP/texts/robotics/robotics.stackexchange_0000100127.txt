Q:

List sourced workspaces

I'm experimenting with shell plugins, dynamically updating command line prompt.
Currently I'm running Zsh + OhMyZsh + powerlevel10k
I've managed to add ROS2 distro name and ROS2 domain ID to the command prompt. That was easy: I've added a shell function looking at environment vars ROS_DISTRO and ROS_DOMAIN_ID:
function prompt_my_ros2_env() {
    if [[ -v ROS_DISTRO ]]; then
        local ros_domain_id=""
        if [[ -v ROS_DOMAIN_ID ]]; then
            ros_domain_id="[$ROS_DOMAIN_ID]"
        fi

        p10k segment -t "$ROS_DISTRO$ros_domain_id"
    fi
}
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS+=my_ros2_env

Now I wonder, is it possible to create a list of sourced ROS2 workspaces?
I can see that some environment variables change after execution of source ./install/local_setup.zsh command, for example AMENT_PREFIX_PATH, PYTHONPATH, LD_LIBRARY_PATH. But sourcing one workspace adds several directories to almost each of them.

Originally posted by wl on ROS Answers with karma: 127 on 2021-09-19
Post score: 0

A:

I'm not sure whether this would help you, but if you use colcon, COLCON_PREFIX_PATH can be used to know sourced workspaces.

Originally posted by Kenji Miyake with karma: 307 on 2021-09-19
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by wl on 2021-09-23:
Indeed, this variable contains the list of of sourced workspaces. Thank you!
Unfortunately, my initial idea is not very useful, because this list occupies a lot of space, I'm not sure how to compress it and if I need it at all.

