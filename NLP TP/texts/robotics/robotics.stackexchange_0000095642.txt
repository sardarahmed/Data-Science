Q:

How to edit a map programmatically?

Hi,
Situation:
i am currently on Ubuntu, using ROS Melodic.
I work with a self built robot, that has a laser scanner.
With the gmapping package I create a map, that I save with the map_server package.
I get the mymap.pgm and the mymap.yaml file like expected.
Question:
How can I programatically edit the .pgm file to have borders? I want to take the path of the robot and use them to draw borders inside the file. Manually doing it with a photo editing program is not a solution (see background info).
Background:
I need to develop a mowing robot for outside purposes. I am not indoors with walls, and all sides of the map can be expected open, as the fences might not be detectable (small metal wires or ropes). It is required to drive around the borders of the property once to save the boundaries of the area that is to be mowed. I want to use the path of that drive around and draw it as a line inside the map. But is that actually the smartest way to do it? After some research I haven't found any good solutions.
Thanks for the help.

Originally posted by DesperateCookie on ROS Answers with karma: 23 on 2020-04-29
Post score: 2

A:

Create a scprit that, once you run it, will save the map and add borders using something like OpenCV.

Originally posted by Procópio with karma: 4402 on 2020-04-29
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by DesperateCookie on 2020-05-02:
Out solution now is like this

Log position inside a csv file
Calculate the correct pixel coordinates using the map.yaml information
Draw lines between the points using an pything image editing library

Comment by geoporus on 2020-07-29:
Hello! I am currently working on a project and I am facing kinda the same issue. I am trying to edit a map that I previously build using explore_lite + move_base and rtab_map packages so that I can add into it some virtual walls (no-go zones for the robot). Basically I am just trying to edit the map by drawing some lines into it given a set of coordinates, but I am having trouble in computing the correct pixel coordinates using the map.yaml information. Can you please give some information or hints related to how you did this specific thing? Thank you!
Comment by Procópio on 2020-08-19:
@geoporus, it is better to ask a new question regarding your specific issue.
Comment by darshb34 on 2020-11-21:
@DesperateCookie I am working on the same problem. Is it possible for you to share your code?
Thanks
Comment by ga on 2023-08-03:
@DesperateCookie  @darshb34  hey , did you solve the problem ?

