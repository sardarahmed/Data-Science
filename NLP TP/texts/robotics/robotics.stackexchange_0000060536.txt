Q:

gzserver: Symbol look up error in 'libgazebo_ros_control' results in exit code 127

Hello
I am using ros_control, gazebo and URDF to set up a simulation for a mobile robot. The urdf can be correctly shown in gazebo.
My system config is:
Ubuntu 13.04-i386 with ros-hydro
gazebo version: 1.9.5
ros-hydro-rosconsole version: 1.10.10
ros-hydro-ros-control / ros-hydro-ros-controllers version: 0.7.2
ros-hydro-gazebo-ros-control version: 2.3.5

Everything goes on well until I added libgazebo_ros_control plugin to it by:
<gazebo>
  <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
    <robotNamespace>/MYROBOT</robotNamespace>
  </plugin>
</gazebo>

and launch gazebo again. In this case, symbol look up error / exit code 127 happens:
[ INFO] [1404324642.777868664, 0.011000000]: gazebo_ros_control plugin is waiting for model URDF in parameter [/robot_description] on the ROS param server.
gzserver: symbol lookup error: /opt/ros/hydro/lib/libgazebo_ros_control.so: undefined symbol: _ZN3ros7package10getPluginsERKSsS2_RSt6vectorISsSaISsEEb
[gazebo-1] process has died [pid 3164, exit code 127, cmd /opt/ros/hydro/lib/gazebo_ros/gzserver /home/altrouge/catkin_ws/src/gazebo_ros_demos/rrbot_gazebo/worlds/rrbot.world __name:=gazebo __log:=/home/altrouge/.ros/log/250502be-0214-11e4-a398-000c29cc235d/gazebo-1.log].
log file: /home/altrouge/.ros/log/250502be-0214-11e4-a398-000c29cc235d/gazebo-1*.log

By GCC demangler, I can get:
undefined symbol: ros::package::getPlugins(std::string const&, std::string const&, std::vector<std::string, std::allocator<std::string> >&, bool)

For checking I git clone the RRbot demo from gazebo_ros tutorial (http://gazebosim.org/wiki/Tutorials/1.9/ROS_Motor_and_Sensor_Plugins), the same problem occurs.
If I remove the libgazebo_ros_control.so plugin in URDF file, everything returns right. With some googles I could find somebody suggests update rosconsole , but it doesn't work.
Would anybody know what's wrong? Thank you!

Originally posted by lockandfire on ROS Answers with karma: 276 on 2014-07-02
Post score: 0

A:

Recently I found that .so file highly depends on PCs and OSs. Therefore I git clone the gazebo_ros_pkg and use catkin_make_isolated to build them in Ubuntu. Then move the libgazebo_ros_contorl.so in devel_build/ to /opt/ros/hydro/lib/ to overwrite the one from apt-get. Then it goes well.

Originally posted by lockandfire with karma: 276 on 2014-07-20
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by demmeln on 2014-07-21:
It is worrying to me that this would be necessary. It would be interesting to see if this can be reproduced on a clean system with a new installtion of ROS from scratch with apt. If yes, then something with the deb-build process is broken and should be fixed.
Comment by lockandfire on 2014-07-22:
Today I find it is not necessary. I rebuild .so files in another virtual PC which still suffer from this problem, it did not work. The error in .so files can occur in any plugin, not only gazebo. That virtual pc was set up 2 months ago. However, reinstall ubuntu works.
Comment by demmeln on 2014-07-22:
Ok, you could have probably fixed it somehow with reinstalling ROS and making sure your APT sources and cache are up to date, but it seems for a virtual machine reinstalling the OS is likely quicker than finding the root cause. Thanks for reporting back.
Comment by microbot on 2019-07-06:
can anyone please helo me ?? I am having similar error with libgazebo_ros_control.so, I have cloned and catkin_make the package in ubuntu itself, I am still having this error. I am using Ros kinetic and gazebo 7.15 with ubuntu 16.04 OS. can anyone please help me point in the right direction to fix this error. I have been stuck here since long time.

