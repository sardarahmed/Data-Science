Q:

cannot launch kobuki_dashboard on kinetic

Hi, I'm trying to setup a turtlebot on ubuntu 16, ROS kinetic.
Installation went well so far. My laptop and the turtlebot netbook can ping each other. I can roslaunch on the turtlebot fine.
I am following the tutorial at: http://wiki.ros.org/turtlebot_bringup/Tutorials/indigo/PC%20Bringup
When I try the command rqt -s kobuki_dashboard, I get the following error:
RosPluginProvider.load(kobuki_dashboard/KobukiDashboard) exception raised in __builtin__.__import__(kobuki_dashboard.dashboard, [KobukiDashboard]):
Traceback (most recent call last):
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/rqt_gui/ros_plugin_provider.py", line 77, in load
    module = __builtin__.__import__(attributes['module_name'], fromlist=[attributes['class_from_class_type']], level=0)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/kobuki_dashboard/dashboard.py", line 8, in <module>
    from QtGui import QMessageBox, QAction
ImportError: cannot import name QMessageBox

PluginManager._load_plugin() could not load plugin "kobuki_dashboard/KobukiDashboard":
Traceback (most recent call last):
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui/plugin_handler.py", line 99, in load
    self._load()
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui/plugin_handler_direct.py", line 54, in _load
    self._plugin = self._plugin_provider.load(self._instance_id.plugin_id, self._context)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui/composite_plugin_provider.py", line 71, in load
    instance = plugin_provider.load(plugin_id, plugin_context)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui/composite_plugin_provider.py", line 71, in load
    instance = plugin_provider.load(plugin_id, plugin_context)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/rqt_gui_py/ros_py_plugin_provider.py", line 60, in load
    return super(RosPyPluginProvider, self).load(plugin_id, plugin_context)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui/composite_plugin_provider.py", line 71, in load
    instance = plugin_provider.load(plugin_id, plugin_context)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/rqt_gui/ros_plugin_provider.py", line 83, in load
    raise e
ImportError: cannot import name QMessageBox

Same when I try to launch the dashboard via rosrun kobuki_dashboard kobuki_dashboard.
It seems to be related to QT. Any ideas how to fix?
Cheers
Isaac

Edit: If I "fix" the file in question, "dashboard.py", by changing line 8 to:
from PyQt4.QtGui import QMessageBox, QAction

Then python will segfault. Here's a backtrace from gdb:
    #0  0x00007fff9645e5a4 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#1  0x00007ffff7de74ea in call_init (l=<optimized out>, argc=argc@entry=4, 
    argv=argv@entry=0x7fffffffd858, env=env@entry=0xeb2920) at dl-init.c:72
#2  0x00007ffff7de75fb in call_init (env=0xeb2920, argv=0x7fffffffd858, 
    argc=4, l=<optimized out>) at dl-init.c:30
#3  _dl_init (main_map=main_map@entry=0x2deef60, argc=4, argv=0x7fffffffd858, 
    env=0xeb2920) at dl-init.c:120
#4  0x00007ffff7dec712 in dl_open_worker (a=a@entry=0x7fffffffb310)
    at dl-open.c:575
#5  0x00007ffff7de7394 in _dl_catch_error (
    objname=objname@entry=0x7fffffffb300, 
    errstring=errstring@entry=0x7fffffffb308, 
    mallocedp=mallocedp@entry=0x7fffffffb2ff, 
    operate=operate@entry=0x7ffff7dec300 <dl_open_worker>, 
    args=args@entry=0x7fffffffb310) at dl-error.c:187
#6  0x00007ffff7debbd9 in _dl_open (
    file=0x2b49180 "/usr/lib/python2.7/dist-packages/PyQt4/QtGui.so", 
    mode=-2147483646, caller_dlopen=0x5231c3 <_PyImport_GetDynLoadFunc+243>, 
    nsid=-2, argc=<optimized out>, argv=<optimized out>, env=0xeb2920)
    at dl-open.c:660
#7  0x00007ffff75edf09 in dlopen_doit (a=a@entry=0x7fffffffb540) at dlopen.c:66
#8  0x00007ffff7de7394 in _dl_catch_error (objname=0xa6c770, 
    errstring=0xa6c778, mallocedp=0xa6c768, 
    operate=0x7ffff75edeb0 <dlopen_doit>, args=0x7fffffffb540)
    at dl-error.c:187
#9  0x00007ffff75ee571 in _dlerror_run (
    operate=operate@entry=0x7ffff75edeb0 <dlopen_doit>, 
    args=args@entry=0x7fffffffb540) at dlerror.c:163
#10 0x00007ffff75edfa1 in __dlopen (file=<optimized out>, mode=<optimized out>)
    at dlopen.c:87
#11 0x00000000005231c3 in _PyImport_GetDynLoadFunc ()
#12 0x0000000000522d6f in _PyImport_LoadDynamicModule ()
#13 0x00000000004afbad in ?? ()
#14 0x00000000004af34d in PyImport_ImportModuleLevel ()
#15 0x00000000004b0f78 in ?? ()
#16 0x00000000004b0cb3 in PyObject_Call ()
#17 0x00000000004ce5d0 in PyEval_CallObjectWithKeywords ()
#18 0x00000000004c6ed6 in PyEval_EvalFrameEx ()
#19 0x00000000004c2765 in PyEval_EvalCodeEx ()
#20 0x00000000004c2509 in PyEval_EvalCode ()
#21 0x00000000004c061b in PyImport_ExecCodeModuleEx ()
#22 0x00000000004bd6ee in ?? ()
#23 0x00000000004afbad in ?? ()
#24 0x00000000004af34d in PyImport_ImportModuleLevel ()
#25 0x00000000004b0f78 in ?? ()
#26 0x00000000004cada2 in PyEval_EvalFrameEx ()
#27 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#28 0x00000000004c9d8f in PyEval_EvalFrameEx ()
---Type <return> to continue, or q <return> to quit---
#29 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#30 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#31 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#32 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#33 0x00000000004c2765 in PyEval_EvalCodeEx ()
#34 0x00000000004ca099 in PyEval_EvalFrameEx ()
#35 0x00000000004c2765 in PyEval_EvalCodeEx ()
#36 0x00000000004ca099 in PyEval_EvalFrameEx ()
#37 0x00000000004c2765 in PyEval_EvalCodeEx ()
#38 0x00000000004ca099 in PyEval_EvalFrameEx ()
#39 0x00000000004c2765 in PyEval_EvalCodeEx ()
#40 0x00000000004ca099 in PyEval_EvalFrameEx ()
#41 0x00000000004c2765 in PyEval_EvalCodeEx ()
#42 0x00000000004ca099 in PyEval_EvalFrameEx ()
#43 0x00000000004c2765 in PyEval_EvalCodeEx ()
#44 0x00000000004ca099 in PyEval_EvalFrameEx ()
#45 0x00000000004c2765 in PyEval_EvalCodeEx ()
#46 0x00000000004c2509 in PyEval_EvalCode ()
#47 0x00000000004f1def in ?? ()
#48 0x00000000004ec652 in PyRun_FileExFlags ()
#49 0x00000000004eae31 in PyRun_SimpleFileExFlags ()
#50 0x000000000049e14a in Py_Main ()
#51 0x00007ffff7811830 in __libc_start_main (main=0x49dab0 <main>, argc=4, 
    argv=0x7fffffffd858, init=<optimized out>, fini=<optimized out>, 
    rtld_fini=<optimized out>, stack_end=0x7fffffffd848)
    at ../csu/libc-start.c:291
#52 0x000000000049d9d9 in _start ()

Any ideas? I concluded that it must be PyQt4.QtGui, and not PyQt5.QtGui, because the latter doesn't contain QMessageBox.

Originally posted by ibd on ROS Answers with karma: 3 on 2017-01-23
Post score: 0

Original comments
Comment by ibd on 2017-01-24:
Addendum: Maybe this is related to my other problem over here?
Comment by gvdhoorn on 2017-01-29:
If you installed the kobuki packages using apt-get (ie: used a released version), and it's failing like this, that would be something to report over at turtlebot/turtlebot/issues.
Comment by ibd on 2017-01-30:
I did indeed install everything using apt-get. Posted my questions there.
Comment by gvdhoorn on 2017-01-31:
It's always nice to link back to your issue then: turtlebot/turtlebot#250.

A:

The method at
https://github.com/turtlebot/turtlebot/issues/250
fixed the roomba dashboard for me
Thanks for the comment gvdhoorn
simply change QtGui to QtWidgets on the given line number in the file above the first ImportError: ....
also see
http://wiki.ros.org/kinetic/Migration
shows Qt requirements
it seems to be a simple syntax change between Qt4 and Qt5 due to using some new library
it would likely also fix other issues with a QMessageBox import error
hope this helps ;- )

Originally posted by Rizz with karma: 16 on 2018-04-01
This answer was ACCEPTED on the original site
Post score: 0

