Q:

How to add statements through json_prolog?

I ran tutorial.launch in knowrob_tutorial to start services that accept knowrob queries
<launch>
    <node name="json_prolog" pkg="rosprolog" type="run_with_prolog_env"
    args="ias_semantic_map $(find json_prolog)/bin/json_prolog knowrob_tutorial" />
</launch>

And now I can query knowrob from my program like this:
#!/usr/bin/env python

import roslib
roslib.load_manifest('json_prolog')
import rospy
import json_prolog

rospy.init_node('query_json_prolog')

prolog = json_prolog.Prolog()
query = prolog.query("owl_has(knowrob:'Drawer1',P,O)")

for sol in query.solutions():
    print sol 

query.finish()
rospy.spin()

However, I want to make use of the power of knowrob, that is, I want to add statements to knowrob knowledge base and make use of the reasoning mechanisms in knowrob. But I found there's only query I can use in json_prolog client libraries.
If I want to use pizza.owl I generated somewhere:
#!/usr/bin/env python

import roslib
roslib.load_manifest('json_prolog')
import rospy
import json_prolog

rospy.init_node('test_json_prolog')
prolog = json_prolog.Prolog()

query = prolog.query("owl_parser:owl_parse('/rosfuerte/home/project/test/owl/pizza.owl', false, false, true)")
query2 = prolog.query("owl_subclass_of(A, knowrob:'PizzaTopping')")

for sol in query2.solutions():
    print sol 

query.finish()

The solution I got is
{'A': 'http://ias.cs.tum.edu/kb/knowrob.owl#PizzaTopping'}
But I want to get
{'A': 'xxx#PizzaTopping'}
{'A': 'xxx#CheeseTopping'}
{'A': 'xxx#MeatTopping'}
{'A': 'xxx#SeafoodTopping'}
{'A': 'xxx#VegetableTopping'}

since the subclasses are defined in pizza.owl

How can I achieve that?
Thanks in advance.

Originally posted by Po-Jen Lai on ROS Answers with karma: 1371 on 2012-11-01
Post score: 0

A:

Are you sure that PizzaTopping is in the KnowRob namespace?
You query for knowrob:'PizzaTopping', but probably want to ask for  http://www.co-ode.org/ontologies/pizza/2005/05/16/pizza.owl#PizzaTopping.
Edit:
In your query, you need to set the correct IRI of the OWL class you are asking for. You find the base IRI of your ontology in the head of your OWL file in the line that looks like  xmlns="http://ias.cs.tum.edu/kb/knowrob.owl#".
Assuming you used the standard pizza.owl, you therefore need to query for:

prolog.query("owl_subclass_of(A, 'http://www.co-ode.org/ontologies/pizza/2005/05/16/pizza.owl#PizzaTopping')")

If you would like to abbreviate the long IRIs, you can define a namespace, e.g. in one of your init.pl using the rdf_db:rdf_register_ns directive. Have a look at the init.pl in ias_knowledge_base for an example.

Originally posted by moritz with karma: 2673 on 2012-11-01
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Po-Jen Lai on 2012-11-01:
The pizza.owl is generated by Protege by myself, in this situation how can I add this owl file to knowrob knowledge base?
Comment by moritz on 2012-11-01:
If you ask for OWL information, you need to specify the correct IRI, i.e. the same that is used in your OWL file. The KnowRob core concepts have the base IRI http://ias.cs.tum.edu/kb/knowrob.owl#, abbreviated as knowrob: Your pizza.owl probably uses a different namespace that needs to be used here.
Comment by Po-Jen Lai on 2012-11-01:
Yeah I think the problem is on prolog.query("owl_subclass_of(A, knowrob:'PizzaTopping')"), I should change knowrob to another namespace. But since I don't know what should I use to replace knowrob, is there any functions I can check namespaces? Or is there default namespace for the parsed pizza.owl?

