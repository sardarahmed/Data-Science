Q:

Black image for an Image publisher with image_transport

I made a node retrieving an image with openCV explained on this ROS tutorial. The image is ten converted into a format suitable for ROS, using CV_bridge functions.
Problem is, there is no image that are published at all on the \camera topic. I tried visualizing it using

rosrun image_view image_view

But the only thing that appear is a black image. I also tried using rviz camera, but nothing appears; rviz indicate that no image is received:
image description http://s29.postimg.org/cfodi8klj/Screen_Shot_01_04_15_at_04_44_PM.jpg
Here is the code of the publisher:
code http://s4.postimg.org/z0ucg90vh/Screen_Shot_01_04_15_at_03_42_PM.jpg
And here is the CMakeLists.txt file:
image description http://s21.postimg.org/flbi6xe07/Screen_Shot_01_04_15_at_04_58_PM.jpg
I made a standalone version of the code for openCV, and it display image correctly using imshow. I do believe that the problems lies in the conversion of the openCV image to the format required by the ROS nodes, but I do not know where to look to solve such problem.

Originally posted by Alexandre.Willame on ROS Answers with karma: 46 on 2015-01-04
Post score: 1

A:

The source code takes a sample image as argv[1]. I. e. in a folder where a image file like my_photo.jpg is located you have to run it like
rosrun image_transport_tutorial my_publisher my_photo.jpg

in order for telling it what to publish; otherwise it will just publish an empty image header...

Originally posted by Wolf with karma: 7555 on 2015-01-05
This answer was ACCEPTED on the original site
Post score: 0

