Q:

rtabmap map data (get_map)

Hi,
I have problem in loading the generated map using RTAB map, I already used rtabmap/get_map service but I don't know how to proceed and export the ply mesh using the command line or rviz. I want  to do that using the command line since rtabmapviz crashes when I load the cloud and then export the mesh since my map is really too big.
when I call get_map service in command line, I get a lot of information displayed (I loaded them to a file), snap shots of this information is available in the following link : images link
could this information be used to generate a mesh file (.ply), or is there another way other than rtabmapviz to generate a mesh file ??
Note: I use ubuntu 14.04, ros indigo and I preformed the mapping using rtabmap-ros package and writing a launch file to setup rtab to my robot.
Thanks

Originally posted by Randa on ROS Answers with karma: 3 on 2016-03-11
Post score: 0

A:

Hi,
The rtabmap_ros/GetMap service returns map data as a graph, not a point cloud. You can however subscribe to /rtabmap/cloud_map topic (which is a sensor_msgs/PointCloud2) to get the point cloud. With pcl_ros, you can save to PCD format (and convert to PLY):
 rosrun pcl_ros pointcloud_to_pcd input:=/rtabmap/cloud_map
 pcl_pcd2ply input.pcd output.ply

If you connect after mapping, call the service rtabmap_ros/PublishMap so that rtabmap will regenerate the map's cloud and send it back on the cloud_map topic. Parameters for cloud generation by rtabmap can be found on the ROS wiki with prefix cloud_ (e.g., cloud_voxel_size).
Note that in rtabmapviz you can decrease the resolution of the point clouds (increase voxel size) to save memory when exporting.
cheers

Originally posted by matlabbe with karma: 6409 on 2016-03-13
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Randa on 2016-03-20:
Thanks for your suggestion,
I already tried to subscribe to cloud_map and publish the cloud but nothing happened.. as if the cloud_map is empty although I can see the reconstructed map. maybe because the map is so big, I'll try to decrease the resolution and increase voxel size.

