Q:

Can't get correct position of ARMarkers

Hi everyone!
I'm using ar_pose to identify some markers. It identifies the markers correctly (pattern 1, 2, etc.), but their positions are not very good. The distance is not being correctly assigned. I guess this is not ar_pose's problem.
See the image below:

Could it be a depth_registration issue?
Also, I tried calibrating my camera (kinect) following these tutorials:

rgb calibration

IR calibration

If couldn't make myself clear, please, tell me, so that I can explain it better.
I would really appreciate if someone could help me!
Thanks!

Originally posted by Mendelson on ROS Answers with karma: 73 on 2013-04-11
Post score: 2

A:

Check your the file that specifies the patterns you will use. It contains the name, the marker to detect, its width and center position. If you have the wrong size there, the algorithm will think the markers are closer/farther then they really are.
This file will be loaded by the ar_pose package, for example in your launch file:
<param name="marker_pattern_list" type="string" value="$(find yourpackage)/yourpatterns"/>

yourpatterns file will look like this:
#the number of patterns to be recognized
3

#pattern 1
#Sample1
#data/patt.sample1
#250.0
#0.0 0.0

#pattern 2
Sample2
data/patt.sample2
250.0
0.0 0.0

#pattern 3
Hiro
data/patt.hiro
250.0
0.0 0.0

#pattern 4
Kanji
data/patt.kanji
250.0
0.0 0.0

You have to measure the size of your printed marker and write it in mm in the third field of each pattern block (where you read 250.0 here).

Originally posted by Procópio with karma: 4402 on 2013-06-03
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by jep31 on 2013-06-04:
What is the influence of the marker_width ? is it finally same thing ?
And if for instance I use directly a pattern file like patt.hiro ?
I'm trying to increase pattern size but I haven't very good results for the detection.
EDIT: One is for ar_single(marker_width), other is for ar_multi(file)
Comment by Procópio on 2013-06-04:
Hi. I updated the answer, hope it can give you more info. Please, post the patterns file you are using for your the experiment of your question (it is not patt.hiro).
Comment by jep31 on 2013-06-04:
My question is different so I have created a other topic:
http://answers.ros.org/question/64290/marker-long-distance-tracking-with-kinect/
I 'm posting a part of my launch file there
Comment by Procópio on 2013-06-05:
did you managed to get the correct distance of your markers?
Comment by jep31 on 2013-06-05:
Yes I did thanks, I printed a 200mm marker and position orientation are good. It's only a detection issue with some luminosity. My paper is bright with room light.

