Q:

Getting point cloud from image_rect_color using stereo_image_proc

I have a bag publishing left and right camera_info and image_rect_color topics.
How can I use stereo_image_proc to get the point cloud?
stereo_image_proc/disparity nodelet subscribes to image_rect and gives out disparity, which can be used by the stereo_image_proc/point_cloud2 nodelet.
Do I need to modify the source code, make a custom launch file or this can be done via an easier way that I am unable to see immediately?
Afai understand, I have to convert to mono image and then maybe remap or publish to the relevant topic.
ROS_NAMESPACE=stereo rosrun stereo_image_proc stereo_image_proc -> here the whole node subscribes to raw images which I don't have as a topic.

Originally posted by ratneshmadaan on ROS Answers with karma: 71 on 2015-09-27
Post score: 0

Original comments
Comment by ratneshmadaan on 2015-09-27:
https://github.com/ros-perception/image_pipeline/blob/indigo/stereo_image_proc/src/nodes/stereo_image_proc.cpp. Read the source. So, I need to comment out the debayer and rectify blocks. But I need an image_rect from image_rect_color(color to mono basically?) and then I can use the two nodelets.
Comment by ratneshmadaan on 2015-09-29:
As I had zero distortion - plumb bob model, with the parameters needed being [0,0,0,0,0], all I needed to do was remap:
rosbag play my_bag_file.bag /my_cam/left/image_rect_color:=/my_cam/left/image_raw /my_cam/right/image_rect_color:=/my_cam/right/image_raw

A:

As I had zero distortion - plumb bob model, with the parameters needed being {0,0,0,0,0}, all I needed to do was remap: rosbag play my_bag_file.bag /my_cam/left/image_rect_color:=/my_cam/left/image_raw /my_cam/right/image_rect_color:=/my_cam/right/image_raw

Originally posted by ratneshmadaan with karma: 71 on 2015-09-29
This answer was ACCEPTED on the original site
Post score: 0

