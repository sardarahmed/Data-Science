Q:

can't read image data

Hello, I'm trying to read data from a camera stream from vrep. The publisher is running fine, rotopic echo returns nonzero data being streamed, but if I subscribe and try to print out the data i get only zeros.
I think I'm doing something wrong, here's the code:
#include <ros/ros.h>
#include <sensor_msgs/Image.h>
#include "std_msgs/String.h"

void cameraROSCallback(const sensor_msgs::Image::ConstPtr& msg){
        for(int a=0; a<256; a++)
            {
            for(int b=0; b<256; b++)
                {ROS_INFO("[%3i],[%3i]: [%u]", a,b,msg->data[a,b]);}
            }
    }

int main(int argc, char **argv)
{
  ros::init(argc, argv, "image_listener");
  ros::NodeHandle n;

  ros::Subscriber sub = n.subscribe("vrep/visionSensorData", 1, cameraROSCallback);
  //ROS_INFO("I heard: [%s]", sub.getTopic().c_str());
  ros::spin();
}

and the output looks like this:
[ INFO] [1380705177.617130619]: [130],[129]: [0]
[ INFO] [1380705177.617170373]: [130],[130]: [0]
[ INFO] [1380705177.617215521]: [130],[131]: [0]
[ INFO] [1380705177.617270418]: [130],[132]: [0]
[ INFO] [1380705177.617330611]: [130],[133]: [0]
[ INFO] [1380705177.617374191]: [130],[134]: [0]
[ INFO] [1380705177.617416359]: [130],[135]: [0]
[ INFO] [1380705177.617457115]: [130],[136]: [0]
[ INFO] [1380705177.617497955]: [130],[137]: [0]
[ INFO] [1380705177.617535211]: [130],[138]: [0]
[ INFO] [1380705177.617575972]: [130],[139]: [0]
[ INFO] [1380705177.617616149]: [130],[140]: [0]
[ INFO] [1380705177.617653995]: [130],[141]: [0]
[ INFO] [1380705177.617690891]: [130],[142]: [0]
[ INFO] [1380705177.617726471]: [130],[143]: [0]
[ INFO] [1380705177.617767162]: [130],[144]: [0]
[ INFO] [1380705177.617804381]: [130],[145]: [0]
[ INFO] [1380705177.617838072]: [130],[146]: [0]
[ INFO] [1380705177.617870981]: [130],[147]: [0]
[ INFO] [1380705177.617904211]: [130],[148]: [0]

Originally posted by nickstu on ROS Answers with karma: 5 on 2013-10-01
Post score: 0

A:

Try this:
ROS_INFO("[%3i],[%3i]: [%u]", a,b,msg->data[a * b]);

msg->data is a one dimensional vector.

Originally posted by BennyRe with karma: 2949 on 2013-10-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by nickstu on 2013-10-02:
Thanks, that was the problem. Now it's working.

