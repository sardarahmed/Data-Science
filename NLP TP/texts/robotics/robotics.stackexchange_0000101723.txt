Q:

Get time stamp from ros msg

hello everyone. I have a problem. I experimented with robot work in gazebo virtual environment. I want to map the state of the manipulator to the obtained point cloud data (the point cloud used in the image detection process). My idea is to use time stamps to correspond to these data.
The time stamp acquisition code used for the status of the manipulator is as follows:
timestampName = round(time.time()*1000)

The code for obtaining the accurate time stamp of the point cloud through search is as follows:
timestampN2 = ptcloud_data.header.stamp

But the results obtained are very different. Here are some examples printed out.
=============== 14751000000
=============== 1652627473018
aaaaaaaaaaaa
=============== 14818000000
=============== 1652627473203
aaaaaaaaaaaa
=============== 14985000000
=============== 1652627473759
aaaaaaaaaaaa
=============== 15018000000
=============== 1652627473948

I understand that the reason for this is that the two sources of information are different. The first comes from the time source of gazebo. The second comes from the computer's time source. What should I do?
Can the time information of the point cloud be converted into the time information corresponding to the computer time?

Originally posted by kankanzheli on ROS Answers with karma: 3 on 2022-05-15
Post score: 0

A:

I will first describe what I understood - please correct me if I am wrong.
You have a controlled manipulator (so you have a source for  its state) and a RGB-D camera info (so a second source of messages). You want to store pairs of (a manipulator state, a cloud point message).
I think you can maybe use message_filters package to do this task:

http://wiki.ros.org/message_filters

http://docs.ros.org/en/lunar/api/message_filters/html/python/

Without using computer time, but with a timestamp in the header of the last manipulator pose, synchronized with point cloud data.
=============
If it's not the case:
Maybe you can use other source of time for the manipulator? Please check these:

https://answers.ros.org/question/253021/controlling-gazebo-timing/
http://wiki.ros.org/Clock

Originally posted by ljaniec with karma: 3064 on 2022-05-15
This answer was ACCEPTED on the original site
Post score: 0

