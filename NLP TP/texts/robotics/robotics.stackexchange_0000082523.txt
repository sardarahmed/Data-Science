Q:

relationship between rospy.init_node and rospy.Publisher?

More specifically, lets say the command
rospy.init_node('topic_publisher') 

creates a node with the name topic_publisher and then I state something like:
pub = rospy.Publisher('/counter', Int32, queue_size=1)

my question is: how does that node topic_publisher know anything about the pub object?  the pub object does not input the node name so how does it know which node is publishing it? Is it because its in the same executable file? THe system somehow knows anything after rospy.init_node is related to this node?

Originally posted by badrobot91 on ROS Answers with karma: 1 on 2017-08-25
Post score: 0

Original comments
Comment by jayess on 2017-08-26:
I was trying to write this as an answer but I don't feel like I have a complete understanding of everything to do so I'll leave this as a comment.
Comment by jayess on 2017-08-26:
Basically, the node doesn't know about the topics (topics can be registered before node instantiation). When created, topics register themselves with Master and have their names resolved depending on whether they're private or global.
Comment by jayess on 2017-08-26:
So, topic_publisher doesn't know about the /counter topic because the topic is registered with ROS Master (which in turn keeps track of all nodes, topics, and much more).

A:

Although on the tutorial Writing a Simple Publisher and Subscriber (Python) doesn't answer your question, we can see that our executable only can publish after call rospy.init_node, as you can see:

The next line, rospy.init_node(NAME, ...), is very important as it tells rospy the name of your node -- until rospy has this information, it cannot start communicating with the ROS Master.

When we try to publish without calling rospy.init_node, the following exception is raised:

rospy.exceptions.ROSInitException: time is not initialized. Have you called init_node()?

Originally posted by Ruben Alves with karma: 1038 on 2017-08-28
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jayess on 2017-08-28:
Do you mean "publish" instead of "public?"
Comment by Ruben Alves on 2017-08-29:
Yes ;)
Fixed. Thanks!

