Q:

Unmet dependencies in installing moveit_ros and universal robot

Hello everyone,
I hope this question is not somehow repetitive because I saw a bunch of "unmet dependencies ros-distro-Xpackage" type of questions changing the rospackage name. I tried almost all of the suggestions under the corresponding questions but my problem still persists.
I used to use moveit and universal robots without any issue. However now, because of a reason which I couldn't figure out why and since when, I cannot compute catkin_make. I have two packages with problem but let say I focus on moveit for now.
CMake Error at /opt/ros/kinetic/share/catkin/cmake/catkinConfig.cmake:83 (find_package):
Could not find a package configuration file provided by
"moveit_visual_tools" with any of the following names:

moveit_visual_toolsConfig.cmake
moveit_visual_tools-config.cmake

Add the installation prefix of "moveit_visual_tools" to CMAKE_PREFIX_PATH
or set "moveit_visual_tools_DIR" to a directory containing one of the above
files.  If "moveit_visual_tools" provides a separate development package or
SDK, be sure it has been installed.
Call Stack (most recent call first):
CMakeLists.txt:13 (find_package)

If I remove those packages from my workspace, then I can build without any problem. I tried to reinstall the whole package.

sudo apt-get install ros-kinetic-moveit

The following packages have unmet dependencies:
 ros-kinetic-moveit : Depends: ros-kinetic-moveit-commander but it is not going to be installed
                      Depends: ros-kinetic-moveit-planners but it is not going to be installed
                      Depends: ros-kinetic-moveit-plugins but it is not going to be installed
                      Depends: ros-kinetic-moveit-ros but it is not going to be installed
                      Depends: ros-kinetic-moveit-setup-assistant but it is not going to be installed
E: Unable to correct problems, you have held broken packages.

Also I tried the installation from the documentation of tutorials:

git clone https://github.com/ros-planning/moveit_tutorials.git -b kinetic-devel

git clone https://github.com/ros-planning/panda_moveit_config.git -b kinetic-devel

Whatever I tried, I have unmet dependency problems. First, I tried:

rosdep install -y --from-paths . --ignore-src --rosdistro kinetic

which returns me ridiculously another unmet dependency problems.
executing command [sudo -H apt-get install -y ros-kinetic-moveit-fake-controller-manager]
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 ros-kinetic-moveit-fake-controller-manager : Depends: ros-kinetic-moveit-ros-planning but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
ERROR: the following rosdeps failed to install
  apt: command [sudo -H apt-get install -y ros-kinetic-moveit-fake-controller-manager] failed

Then I dig into installing the whole chains of dependencies manually with all my patience:
user:~/moveit_ws$ sudo -H apt-get install -y ros-kinetic-moveit-ros-planning
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 ros-kinetic-moveit-ros-planning : Depends: ros-kinetic-moveit-ros-perception but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
user:~/moveit_ws$ sudo -H apt-get install -y ros-kinetic-moveit-ros-perception 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 ros-kinetic-moveit-ros-perception : Depends: ros-kinetic-opencv3 but it is not going to be installed
                                     Depends: ros-kinetic-cv-bridge but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
user:~/moveit_ws$ sudo -H apt-get install -y ros-kinetic-opencv3
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 ros-kinetic-opencv3 : Depends: libvtk6-qt-dev but it is not going to be installed
E: Unable to correct problems, you have held broken packages.

There seems no end. Even a very fundamental packages are not found. They are in somewhere since I used to work with them. Then I checked if my workspaces are in $ROS_PACKAGE_PATH, yes /opt/ros/kinetic and all my 3 workspaces were in there.
I feel I miss a very fundamental thing. Can someone please explain me what is the main reason of this unmet dependency problem? Where might be my already installed libraries? What may cause that I cannot compute catkin_make any longer? I cannot distinguish my problem so I really need help.
Thank you in advance.

Originally posted by Gates on ROS Answers with karma: 68 on 2019-09-06
Post score: 0

A:

I have figured out that this problem roots for having multiple workspaces and my mis-sourcing them in the first place. Since I am kind of noob in ROS still, I didn't know that I should have chained them. My random sourcing catkin_ws1/devel/setup.bash and catkin_ws2/devel/setup.bash whenever I install a new rospackage caused my .bashrc not to find the proper packages was the reason of not finding the packages which I had been using before.
I have tried the solutions here1, here2 and reconfiguring my PATH Environment Variable as described here3
export ROS_PACKAGE_PATH=/home/user/ros/ros-pkg:/another/path

I couldn't solve the issue and I reinstalled ros-kinetic-desktop-full but I strongly believe that I made some mistakes again in building up the workspaces chain. I don't think reinstalling the whole ros was the best solution. For someone, those links might be a solution that's why it is worth to suggest here.

Originally posted by Gates with karma: 68 on 2019-09-09
This answer was ACCEPTED on the original site
Post score: 0

