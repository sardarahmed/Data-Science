Q:

robot_localization and bag file output

Dear all,
Have anyone tried to run the test1.bag , test2.bag and test3.bag files included in the robot_localization package? Do you have any screen shot for correct output from these bag files and corresponding launch files? I would like to try them and compare the results with mine.
If you have them, could you please share with me?
If you have any other working samples especially (IMU + Raw Odometry), could you please share with me?
Best Regards
Min Latt

Originally posted by MIN LATT on ROS Answers with karma: 51 on 2017-08-04
Post score: 0

Original comments
Comment by lmathieu on 2017-08-04:
Hello,
If you want more bag file, you can check on marvhub , there is a lot of dataset from mit stata center. They contains IMU + Odometry from a pr2, maybe you can use them.
Comment by MIN LATT on 2017-08-04:
Thanks a lot for your support. robot_localization has three bag files. What I want is the corresponding output for these bag files so that I can check whether I am using robot_localization correctly. BTW does the bag file includes the expected output(ground truth) and (IMU + Raw Odometry)?
Comment by lmathieu on 2017-08-04:
The ground thruth is present according to the description of the set.
I'm not able to use the robot_localization package right now, but if i'm able to use it, I will send you a bag with my result so you can compare (But tomorrow at the earliest)
Comment by MIN LATT on 2017-08-04:
Thanks a lot. I am fine with waiting. "Good things come to those who wait"
Comment by gvdhoorn on 2017-08-04:
Is this a duplicate of #q268047?

A:

After not be able to use the package correctly (I need to understand EKF), I found the test files for robot_localization :

test1.bag
test2.bag
test3.bag

You have 2 way of launching these files (both require you to clone and compile the package on github, these file are not present with apt-get):
Quick method :
Launch these file like a normal .launch file :
roslaunch < your robot_localization package path >/test/test_ekf_localization_node_bag1.test
Then subscribe to the /odometry/filtered topic and look at the last message, the position should be nearby equal to the position defined at the end of the file. Example for bag1 :
      <param name="final_x" value="-40.0454"/>
      <param name="final_y" value="-76.9988"/>
      <param name="final_z" value="-2.6974"/>
      <param name="tolerance" value="1.0452"/>

I recorded the 3 results for EKF in bag files :

test1_result.bag
test2_result.bag
test3_result.bag

With rostest
Robot_localization come with a script to test the 2 nodes (ekf and ukf) with the 3 bag files.
But this is for the default parameters, if you want to test your own parameters, change them at the begining of the *.test files and run the stats recorder. If the output fail, you are probably doing something wrong.
To run the stats recorder, go to robot_localization/test/ and run ./record_all_stats.sh <output_path> (don't forget the output_path) , it will output :

< output_path >/ekf(1,2,3).txt

and  :

< output_path >/ukf(1,2,3).txt.

It will run 30 times each node for each bag file (so it will take a very long time...) and try to ouput statistic based on your parameters (try only. If you look at the script, it seem to run the tests 30 times only)

Have fun !

Originally posted by lmathieu with karma: 591 on 2017-08-07
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by MIN LATT on 2017-08-07:
Hi lmathieu,
Thanks a lot for your time and great effort. I will try with these bag files. Hopefully it works for me as well.
Thanks again.
Best Regards
Min Latt

