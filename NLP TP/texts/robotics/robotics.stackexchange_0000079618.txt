Q:

Self Localisation?

Hi,
I have AMCL working well - but setting the initial pose is annoying - is there a package that will set the likely pose of the robot based on is current samples of data relative to the map?
Thanks
Mark

Originally posted by MarkyMark2012 on ROS Answers with karma: 1834 on 2017-03-16
Post score: 0

Original comments
Comment by Augusto Luis Ballardini on 2017-03-16:
If I remember correctly, you can ask for a global localization using a service call, but I don't know if this is exactly what you want
Comment by MarkyMark2012 on 2017-03-17:
What I want it to be able to fire the system up and for the robot to be able to place itself within the map with out my using riviz to set the "Initial Pose"
Comment by Augusto Luis Ballardini on 2017-03-17:
ok, what about putting inside your launch file a publisher for the global localization service? look here http://answers.ros.org/question/11271/call-a-service-at-startup-with-a-launch-file/

A:

you can pass the initial position as arguments when launching your node, as initial_pose_x and initial_pose_y.
EDIT: if you want AMCL to "guess" on its own the initial position, you can set the parameters update_min_d and update_min_a to negative values. By doing so, the filter will update at the frequency of your /scan topic, without the need to move. (bear in mind that this will greatly increase your cpu usage).
However, there is no guarantee the filter will converge to the correct solution instead of converging to a local minima. Taking you comment about the 4 rooms, if they all look very alike, there is no way AMCL can know in which one you are.
EDIT2: it is wise to also use the /global_localization service, as told by @augusto-luis-ballardini , as it will spread your filter particles throughout the map, instead of concentrating them in the initial position loaded by AMCL.

Originally posted by Procópio with karma: 4402 on 2017-03-22
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by MarkyMark2012 on 2017-03-22:
Hi,
Thanks for the reply - yep I know you can pass the parameters though. My requirement is - assume you have 4 rooms in a map. The robot needs to be able to start up without being told work out room it's in and navigate from there.
Comment by Procópio on 2017-03-24:
ok, I will edit the answer with more details.
Comment by Goki on 2020-04-01:
Is there any way to calculate the localisation score? I tried it with the size of /particlecloud topic which spreads the pose array, but this method doesn't work with all cases. Say even when the initial pose is given wrong or if the robot finds its own position and that is not correct.
Regardless of any of these, the pose array size decreases when it gets moved using a joystick. So what are the ways in which you qualify the self localisation done is right or wrong.
Comment by Procópio on 2020-04-06:
@Goki there is no way of doing this from inside AMCL. You need an external reference to assess your localization

