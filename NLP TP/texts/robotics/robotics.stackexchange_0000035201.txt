Q:

Callback never called on c++

Hi!
I have a little project on C++. When it was very simple (take frame from Kinect, convert to cv::Mat and show it in window), everything works well. Some days ago I add classificator and after it, in some reasons, callback never calls, as I understand. I can't get, why it so, because of code not changed in general. Can somebody helps me with it? Thanks!
Here link to archive - http://dl.dropbox.com/u/16807894/depthListen.zip

Originally posted by CaptainTrunky on ROS Answers with karma: 546 on 2011-10-24
Post score: 0

Original comments
Comment by Ben_S on 2011-10-24:
Have you checked if the Kinect messages are getting published at all (Using rostopic hz /camera/depth/image)? Some people (including me) are having problems with the current openni driver sometimes not publishing the desired messages: http://answers.ros.org/question/2386

A:

You do a lot of work in your callback, and your subscribe queue is limited to one image. It is not surprising that frames get dropped while your callback is busy with your classifier.
As I see it, you have three options:

Ignore the frame drops, and process just those frames you can actually handle.

Increase the queue size. This will only work if you can keep up with the frame rate most of the time. Otherwise, your queue will just fill up and your node will lag behind accordingly.

Do less work in your callback. Improve the speed of your classifier.

Originally posted by roehling with karma: 1951 on 2011-10-24
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by CaptainTrunky on 2011-10-26:
Thank you very much. Both advices were very useful! Everything works fine.

