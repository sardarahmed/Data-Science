Q:

openni kinect gazebo no depth data

Hello
I'm trying to use the simulated kinect in gazebo, I just copy pasted the gazebo kinect snippet used in turtlebot and adapted it to my needs.
the topic /camera/image_raw is publishing and I can see the image in rviz
On the other hand no point cloud is being published on /camera/depth/points,
The topic has been started, just no data are published on it. Any ideas?
Regards, Moataz

Originally posted by Moataz Elmasry on ROS Answers with karma: 126 on 2011-08-18
Post score: 1

A:

Assuming you are on electric...
I am not sure about the missing image views in rviz, but w.r.t. the point clouds, you have just discovered a bug in the threshold logic based on connected clients in the gazebo_ros_camera plugin.  It's fixed in trunk.  One temporary hack around this bug is to:
1.
make sure no one is subscribed to the image_raw ros topic.
1.
now subscribe to the points topic
I'll shoot for a new release very soon.
sorry about the breakage.
John

Originally posted by hsu with karma: 5780 on 2011-08-18
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by hsu on 2011-08-19:
I had originally fixed only gazebo_ros_camera, which would have not been enough...  just pushed same changes for gazebo_ros_openni_kinect in trunk.  Can someone else test it out and let me know it's working correctly before I make the final release?  Thanks.
Comment by Moataz Elmasry on 2011-08-18:
when do you expect this fix to appear on unstable ubuntu repo?
Comment by Moataz Elmasry on 2011-08-18:
are you talking about the snippet gazebo_ros_openni_kinect.cpp::updatechild(). if (!this->myParent->IsActive())
{
// do this first so there's chance for sensor to run 1 frame after activate
if (this->pointCloudConnectCount > 0)
{
this->myParent->SetActive(true);
this->myParent->SimulateDepthData(true);
}
else if (this->imageConnectCount > 0)
{
this->myParent->SimulateDepthData(false);
this->myParent->SetActive(true);
}
}

