Q:

Using if statements with std_msgs::String::ConstPtr

I have a node that is getting action calls from another node. Once it gets the action, I want to call a specific function but the if statement doesn't ever return true.
How can I get an if statement to work with a std_msgs string?
void chattersCallback(const std_msgs::String::ConstPtr& msg)
{
  ROS_INFO("I heard: %s", msg->data.c_str());
  if ((msg->data.c_str()) == "Listen") {sendStopAction();}
}

The terminal shows
[ INFO] [1381550860.740367371]: I heard: Listen

But the If statement does not return true. There is another print statement in the sendStopAction() function

Originally posted by Alkaros on ROS Answers with karma: 103 on 2013-10-11
Post score: 0

A:

I guess your code example should be:
if (msg->data.c_str() == "Listen") ...

In C++ you can not just compare two char*. You neither have to use strcmp() or use the comparison operator of std::string:
if (msg->data == "Listen") ...

Originally posted by Dirk Thomas with karma: 16276 on 2013-10-11
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Alkaros on 2013-10-11:
Thank you. Yes, my code was msg->data.c_str(). I got confused and tried dropping the c_ just to see if it magically changed anything. Thanks again :)

