Q:

Adding Ultrasonics to my robot (Multiple sensors)

So I have a custom robot that I am using Hector Slam on (Neato Lidar) and I have yaml files that detail its size (but no model of the robot).  I can do navigation on the robot as the Hector Slam gives me /odem.
This is amazing and thanks everyone who helped.
Now I want to add some ultrasonics to the robot (3 on the front).  Now I understand you can publish under the same topics etc:
How would I tell the robot where the ultrasonics sensors are? (I guess on the file that contains the footprint?)
Are there any complications

Originally posted by burf2000 on ROS Answers with karma: 202 on 2017-01-31
Post score: 1

A:

I have [..] no model of the robot

and

How would I tell the robot where the ultrasonics sensors are?

A 'model' is actually one way to indicate to a big part of the infrastructure where various bits and pieces on your robot are, as that would cause (fi) the robot_state_publisher to start broadcasting TF frames. The publications representing the ultrasonic measurements would then include the name of their TF frame in the msg header, which other nodes can then use to transform the measurements into whatever local coordinate system they require.
In ROS, we model robots with URDF.
An alternative to this would be to just publish the TF transforms yourself, without using URDF and the robot_state_publisher. That you could do with the static_transform_publisher and the proper arguments.
I would recommend just modelling your robot with URDF, as it would also allow RViz to visualise all sorts of things. Personally I would not want to work on a ROS robot without at least a URDF.

Originally posted by gvdhoorn with karma: 86574 on 2017-01-31
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by burf2000 on 2017-01-31:
So I cant do it in the costmap_common_params.yaml https://github.com/burf2000/ROS_Robot/blob/master/burf_robot/param/costmap_common_params.yaml
Comment by gvdhoorn on 2017-01-31:
As far as I know, no.
But really: using ROS but not having a model of your robot is an uncommon situation (in my experience). Any reason to not just model your robot?
Comment by burf2000 on 2017-01-31:
So I found writing the XML a little confusing, So I have my robot as a model, with wheels etc, but got a little confused adding the sensors, especially Lidar https://github.com/burf2000/ROS_Robot/blob/master/robot.urdf
Comment by gvdhoorn on 2017-01-31:
I would really recommend you do the "urdf step-by-step" tutorials, if you haven't already. As to sensors: if you're not simulating things, the URDF is basically a way to configure their locations, relative to your base_link. You just need a link with ..
Comment by gvdhoorn on 2017-01-31:
.. the proper pose (ie: as the sensor is mounted on your robot).
"got a little confused" is a bit vague. What is it exactly that you didn't understand?
Comment by burf2000 on 2017-01-31:
I might be wrong but I did go through the step by step but will relook at it, I think I got confused with how to represent a sensor, my Lidar entry (in the file) never rendered, I then had a load of issues when I put it in RVIZ.  I guess I can google for a Ultrasonic example when I get home
Comment by gvdhoorn on 2017-01-31:
I'm not telling you to (re)do the tutorials, just suggesting that if you hadn't, it would be a good start. Looking at your urdf, I see different collision and visual geometry fi for your laser link (a box and a cylinder). That didn't make sense to me, hence my question.
Comment by gvdhoorn on 2017-01-31:
Perhaps it would also be good to pick up one of the books that deal with these things. Especially those that work out a complete example would perhaps be nice to read. this one fi has the example code ..
Comment by gvdhoorn on 2017-01-31:
.. here, which seems to contain at least two examples of 'complete' URDFs for two different robots.
Comment by burf2000 on 2017-01-31:
Thanks mate, I actually have 3 Ros books including the suggested one, its just finding quiet time to sit down and read (damn the kids)
Comment by burf2000 on 2017-01-31:
Updated URDF https://github.com/burf2000/ROS_Robot/blob/master/robot.urdf

