Q:

rosmake error: costmap_2d depends on non-existent package pcl

Hi all,
As a final installation step for ROS, I ran "rosmake -a" and encountered errors. It seems like it is not able to find the "pcl" package as well as yaml and openCV. I am not sure why these packages are missing and if you can point me to a way to get these packages and link them to ROS, I would appreciate it. I have attached the console output below.
thanks,
Grace
{-------------------------------------------------------------------------------
mkdir -p bin
cd build && cmake -Wdev -DCMAKE_TOOLCHAIN_FILE=rospack find rosbuild/rostoolchain.cmake  ..
[rosbuild] Building package costmap_2d
Failed to invoke /opt/ros/fuerte/bin/rospack deps-manifests costmap_2d
[rospack] Error: package/stack costmap_2d depends on non-existent package pcl
CMake Error at /opt/ros/fuerte/share/ros/core/rosbuild/public.cmake:129 (message):
Failed to invoke rospack to get compile flags for package 'costmap_2d'.
Look above for errors from rospack itself.  Aborting.  Please fix the
broken dependency!

Call Stack (most recent call first):
/opt/ros/fuerte/share/ros/core/rosbuild/public.cmake:203 (rosbuild_invoke_rospack)
CMakeLists.txt:4 (rosbuild_init)
-- Configuring incomplete, errors occurred!
[ rosmake ] Output from build of package costmap_2d written to:
[ rosmake ]    /home/ylee8/.ros/rosmake/rosmake_output-20120706-103941/costmap_2d/build_output.log
[rosmake-1] Finished <<< costmap_2d [FAIL] [ 0.17 seconds ]
[ rosmake ] Halting due to failure in package costmap_2d.
[ rosmake ] Waiting for other threads to complete.
[rosmake-6] Finished <<< bond [PASS] [ 0.93 seconds ]
[ rosmake ] Output from build of package bullet written to:ec ] [ cv_bridge: 1.1 sec ] [ camera_calibration_parsers: 1.0... [ 6 Active 24/186 Complete ]
[ rosmake ]    /home/ylee8/.ros/rosmake/rosmake_output-20120706-103941/bullet/build_output.log
[rosmake-7] Finished <<< bullet [PASS] [ 1.08 seconds ] -- WARNING: 4 compiler warnings
[rosmake-5] Finished <<< nav_core [PASS] [ 0.49 seconds ]
[rosmake-2] Finished <<< pluginlib [PASS] [ 1.46 seconds ]
[ rosmake ] Last 40 lines_bridge: 1.5 sec ] [ camera_calibration_parsers: 1.4 sec ] [ dynamic_reconfigure: 0.9 sec ]        [ 3 Active 27/186 Complete ]
{-------------------------------------------------------------------------------
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:147: error: expected ‘,’ or ‘...’ before ‘::’ token
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImagePtr cv_bridge::toCvCopyImpl(int)’:
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:156: error: ‘src_header’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:159: error: ‘dst_encoding’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:159: error: ‘src_encoding’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:162: error: ‘source’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:162: error: ‘class cv_bridge::CvImage’ has no member named ‘image’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:185: error: ‘source’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:185: error: ‘class cv_bridge::CvImage’ has no member named ‘image’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:190: error: ‘cv’ is not a class or namespace
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:190: error: ‘source’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:190: error: ‘class cv_bridge::CvImage’ has no member named ‘image’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp: In member function ‘void cv_bridge::CvImage::toImageMsg(sensor_msgs::Image&) const’:
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:210: error: ‘image’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:225: error: ‘uchar’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:225: error: ‘ros_data_ptr’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:225: error: expected primary-expression before ‘)’ token
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:226: error: ‘cv_data_ptr’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImagePtr cv_bridge::toCvCopy(const sensor_msgs::Image&, const std::string&)’:
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:248: error: ‘cv’ has not been declared
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:248: error: expected initializer before ‘tmp’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:251: error: ‘tmp’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:247: warning: unused variable ‘source_type’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImageConstPtr cv_bridge::toCvShare(const sensor_msgs::Image&, const boost::shared_ptr&, const std::string&)’:
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:273: error: ‘class cv_bridge::CvImage’ has no member named ‘image’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:273: error: ‘cv’ has not been declared
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:274: error: expected type-specifier before ‘uchar’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:274: error: expected ‘>’ before ‘uchar’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:274: error: expected ‘(’ before ‘uchar’
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:274: error: ‘uchar’ was not declared in this scope
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:274: error: expected primary-expression before ‘>’ token
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImagePtr cv_bridge::cvtColor(const cv_bridge::CvImageConstPtr&, const std::string&)’:
/home/ylee8/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:281: error: ‘const class cv_bridge::CvImage’ has no member named ‘image’
make[3]: *** [CMakeFiles/cv_bridge.dir/src/cv_bridge.o] Error 1
make[3]: Leaving directory /home/ylee8/ros/vision_opencv/cv_bridge/build' make[2]: *** [CMakeFiles/cv_bridge.dir/all] Error 2 make[2]: Leaving directory /home/ylee8/ros/vision_opencv/cv_bridge/build'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/ylee8/ros/vision_opencv/cv_bridge/build'
[ rosmake ] Output from build of package cv_bridge written to:
[ rosmake ]    /home/ylee8/.ros/rosmake/rosmake_output-20120706-103941/cv_bridge/build_output.log
[rosmake-3] Finished <<< cv_bridge [FAIL] [ 1.48 seconds ]
[ rosmake ] Halting due to failure in package cv_bridge.
[ rosmake ] Waiting for other threads to complete.
[ rosmake ] Last 40 linesmera_calibration_parsers: 1.7 sec ] [ dynamic_reconfigure: 1.2 sec ]                               [ 2 Active 27/186 Complete ]
{-------------------------------------------------------------------------------
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:89: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:90: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:90: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:92: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp: In function ‘bool camera_calibration_parsers::readCalibrationYml(std::istream&, std::string&, sensor_msgs::CameraInfo&)’:
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:113: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:113: error: expected ‘;’ before ‘parser’
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:114: error: ‘parser’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:118: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:118: error: expected ‘;’ before ‘doc’
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:119: error: ‘parser’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:119: error: ‘doc’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:121: error: expected primary-expression before ‘const’
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:121: error: expected ‘)’ before ‘const’
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:122: error: ‘name_node’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:138: error: expected primary-expression before ‘const’
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:138: error: expected ‘)’ before ‘const’
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:139: error: ‘model_node’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:146: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:146: error: expected initializer before ‘&’ token
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:148: error: ‘D_node’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:150: error: ‘YAML’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:150: error: expected initializer before ‘&’ token
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:153: error: ‘D_data’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:157: error: expected type-specifier before ‘YAML’
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:157: error: expected ‘)’ before ‘::’ token
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:157: error: expected ‘{’ before ‘::’ token
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:157: error: ‘::Exception’ has not been declared
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:157: error: ‘e’ was not declared in this scope
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:157: error: expected ‘;’ before ‘)’ token
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:177: error: expected ‘}’ at end of input
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp: At global scope:
/home/ylee8/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:177: error: expected ‘}’ at end of input
make[3]: *** [CMakeFiles/camera_calibration_parsers.dir/src/parse_yml.o] Error 1
make[3]: Leaving directory /home/ylee8/ros/image_common/camera_calibration_parsers/build' make[2]: *** [CMakeFiles/camera_calibration_parsers.dir/all] Error 2 make[2]: Leaving directory /home/ylee8/ros/image_common/camera_calibration_parsers/build'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/ylee8/ros/image_common/camera_calibration_parsers/build'

Originally posted by yglee on ROS Answers with karma: 60 on 2012-07-06
Post score: 0

A:

It sounds like you're doing a source based install, correct? If you're using Ubuntu, you'll have a much easier time using the debian-based binaries.
What version of ROS are you using? (electric, or fuerte?). You should install the perception_pcl stack, and vision_opencv, and make sure to do a rosdep install to ensure dependencies, such as yaml get pulled in.

Edit: Below probably the right way to do this:
It turns out that there's a variant that includes navigation. I would recommend following the Fedora installation instructions, and in section 1.2.2, install the mobile variant replacing the rosinstall commands shown with the following:
rosinstall ~/ros "http://packages.ros.org/cgi-bin/gen_rosinstall.py?rosdistro=fuerte&variant=mobile&overlay=no"

I believe this will get you everything you need, though I don't have a Red Hat machine to try it out with.

Originally posted by Dan Lazewatsky with karma: 9115 on 2012-07-06
This answer was ACCEPTED on the original site
Post score: 2

