Q:

CMakeLists: only link library if Raspberry Pi (or equivalent condition)

I have a package that I want to run on both a desktop/laptop (x64) and a Raspberry Pi (armhf). There's a node in my package that has to be run on the Raspberry Pi. It uses the wiringPi library. Obviously, doing catkin_make on something other than a RPi results in an error, so at the moment I just comment out those lines.
I'd like to find a way to only execute target_link_libraries() if the current computer/architecture/distro matches that of the RPi.

Originally posted by christophebedard on ROS Answers with karma: 641 on 2017-03-11
Post score: 0

Original comments
Comment by gvdhoorn on 2017-03-12:
@Chris_: this is really a CMake question, and not related to ROS per se (catkin == essentially CMake in this case). I'd advise you to do a (google) search for keywords like "cmake detect architecture" or "cmake detect raspberry pi". You'll probably find a solution much faster that way.
Comment by christophebedard on 2017-03-12:
@gvdhoorn yeah I figured it wasn't strictly ROS-related, but I thought I'd see if people went through the same stuff here. Thanks for the suggestion!

A:

You can add an if - Else - endif clause in your CMakeLists.txt using a self defined variable, e.g. IS_RASP, with different target_link_libraries commands in if and Else.
When calling Into catkin_make you can call it without additional arg on your Host anderen with catkin_make -DIS_RASP=1 in your device. Note you can pass Command Line args to cmake when calling it via catkin_make using the -D Just Like you would so in plain cmake.

Originally posted by Wolf with karma: 7555 on 2017-03-12
This answer was ACCEPTED on the original site
Post score: 1

