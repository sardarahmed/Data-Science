Q:

Phantomx Pincher MoveIt!

Hi,
Having just recently purchased a couple of phantomx pincher robotic arms and a couple of turtlebot2's I was hoping to attach them to the top and get some mobile robotic action on :).
But first I thought it best to try and at least get the robotic arms to move on their own.
Using Fergs / vanadium labs excellent models I was able to get a urdf of the phantomx pincher, in what I hope is a somewhat accurate setup, given I had to do it all by eye, rather than through the solidworks - urdf exporter.
So far from the simple rviz launch files it loads up ok in rviz, though I seem to only be able to view movement of the joints through 'tf', i guess I'm not loading an additional part in the launch file.
I have ported it over to moveit using the assistant, however loading up the demo.launch and playing around with it, it just doesn't seem quite right.
The first joint at the bottom doesn't seem to move / rotate when I manually try and move the gripper.
I know it can rotate because pressing the random goal state does place it into different positions, it is just that manually moving it about seems to restricted, particularly when I compare it with another moveit package for the fanuc m10ia.
I suppose I ask is this just expected behaviour or have I set up the urdf or moveit config incorrectly.
Also if anyone happens to have experience in setting up the parallel grippers i would appreciate it. I believe I need to use something like mimic on one of the joints and simply only move one.
Anyway here are the phantomx packages
https://github.com/cdrwolfe/phantomx_arm
Any help is appreciated.
Kind Regards
Wolfe

Originally posted by cdrwolfe on ROS Answers with karma: 137 on 2013-11-18
Post score: 0

Original comments
Comment by Yantian_Zha on 2014-04-19:
Hi Wolfe, do you know how to connect the Phantomx arm with turtlebot? I mean, how set the arm_base_joint's origin in accordance with the turtlebot?
Comment by Yantian_Zha on 2014-04-19:
And when I roslaunch phantomx_arm_description phantomx_upload.launch, there is error: Failed to build tree: parent link [plate_top_link] of joint [arm_base_joint] not found. Thanks so much!
Comment by cdrwolfe on 2014-05-03:
Hi Y. Zha, the stand along phantomx_arm wont load only the phantomx_arm_turtlebot_description minimal launch will. This is because as you posted I no longer link the single arm to a fixed global link, but to the top plate of the turtlebot. The full model is required.
Comment by cdrwolfe on 2014-05-03:
Have a look at 'phantomx_arm_turtlebot_description/launch/minimal.launch. Here you can see what is pretty much the turtlebot minimal.launch but with additional stuff added to include the arm. I ended up copying bits and bobs of the turtlebot package into the local phantomx_arm_turtlebot_description folder.
Comment by Yantian_Zha on 2014-05-03:
And in phantomx_arm_turtlebot_description/launch/minimal.launch file I found sentence "<.arg name="scan_topic"...", which caused the error: unused args [scan+topic] for include of [/p[y/ros/groovy/stacks/turtlebot/turtlebot_bringup/launch/3dsensor.launch. I'm using turtlebot2. Thanks!
Comment by jemalo on 2014-05-22:
Hi M. cdrwolfe, I'm recently working on phantomx arm and I met some similar problems. My urdf file for the arm has been put here: https://dl.dropboxusercontent.com/u/71137753/phantomx_5dof_qiu.urdf. The mimic tag works well in Rviz but not in Gazebo (so I fixed a finger in Gazebo simu).
Comment by jemalo on 2014-05-22:
Hi again M. cdrwolfe, I have some problems with IK solver. The KDL solver works not well for the 4-dof arm in my case. move_group often fails in a planning scenario. It hardly works in a pick/place scenario, even with a lot of grasp poses. Can you explain a bit how you get rid of this pb? Thanks!
Comment by cdrwolfe on 2014-05-22:
Hmmm, I never gto around to solving that part Im afraid, I simply made do with sending a command to open and close the gripper, I didn't get as far as having a pick and place process in RViz going which could utilise the gripper position / mesh
Comment by jemalo on 2014-05-22:
I found pkg "phantomx_arm_turtlebot_ikfast_plugin" in your github repository. Does it work well in your case? Have your tried it in your implementation? Thanks!
Comment by cdrwolfe on 2014-05-23:
Unfortunately it doesnt work, it requires the use of a script to convert the URDF to COLLADA, which is then used to create the IkFast plugin. However I never could get the conversion script to work because it kept hangnig / crashing etc. If you can create a COLLADAfile baed on the URDF you might be able to create a ikfast plugin. Its a shame because I feel it is really required to get the best out of it in MoveIt

A:

Because the arm has less than 6-dof, the default IK setup really won't work. You can try turning on "position_only_ik" -- I believe that is now an option in the RVIZ plugin under  the latest Hydro releases.
An alternative is to use an IKFast IK plugin, which can solve for the lower DOF arm to as close of a solution as possible. I had created an IKFast plugin for the turtlebot arm package (https://github.com/turtlebot/turtlebot_arm), but I believe it is now out of date due to a change in MoveIt's IK plugin base class.

Originally posted by fergs with karma: 13902 on 2013-11-18
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by nsprague on 2013-11-19:
Any chance that you will be bringing the turtlebot_arm package up to date?  I have several of these pincher arms that I would love to be able to use on a turtlebot with Hyrdo.
Comment by cdrwolfe on 2013-11-19:
Ahh, I didn't realise that moveit was restricted to arms with 6 dof+, I noticed that in the older turtlebot urdfs you included a fake joint, I wonder if it would be possible to add further fake joints to make it work?
Comment by cdrwolfe on 2013-11-19:
nsprague, I'm also looking to do the exact same thing, using hydro as well. Feel free to use the phantomx pincher arm urdfs if you want, unless fergs has a better version?? :)
Comment by nsprague on 2013-11-19:
Thanks Wolfe, I'll try it out when I get a chance.
Comment by cdrwolfe on 2013-11-19:
Right :0, typically with my experiences within these things I couldn't go down the Ikfast route because I have 13.04 and the Ikfast tutorial requires openrave which itself hasn't been upgraded for 13.04 :). and even with source installation I couldn't get the urdf_to_collada stuff to work either. However as fergs said, adding position_only_ik to the kinematics.yaml file worked a treat. I assume this is differant from the allow approaximate ik solutions shtick in Rviz as I didn'r find the option for the other one
Comment by cdrwolfe on 2013-11-19:
Next step is actually getting the gripper to function correctly :), each side is set as a prismatic joint, I was thinking it may be possible to mimc one side and somehow convert revolute joint info to prismatic joint info in someway.
Comment by fergs on 2013-11-20:
nsprague, I don't really have time to work on these packages at this time.
Comment by cdrwolfe on 2014-05-28:
Thanks Jorge, I will have a look when you commit it.

