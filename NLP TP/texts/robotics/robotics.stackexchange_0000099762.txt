Q:

Autoware: How to run ndt_gpu on the platform of Xavier NX

The newest version of master branch code which needs the cuda version is <=10.0. But Xavier NX's cuda version is 10.2.
And I have tested the ndt_gpu on my PC(rtx 1050ti, ubuntu 18.04, eigen 3.3.9), both cuda 10.0 and cuda 10.2 work well. But in Xavier NX, the program works strangely. The GPU is 100% and stuck somewhere.
So, does someone run the ndt_gpu successfully on the Xavier NX? How to change the original code ? THANKS A LOT.

Originally posted by bill4u on ROS Answers with karma: 13 on 2021-08-02
Post score: 1

A:

similar problem. All tests in PC (docker&host-ubuntu 18.04, nvidia-driver 470) work well. But in laptop (host-ubuntu 20.04,docker-ubuntu18, same gpu driver), for example, ndt_mapping did not publish message to /tf or /ndt_map, it just stucked.
One strange thing, very small chance (~1%), it can work normally for only 10+ frames of /points_raw, then stuck without any output. This really confuse me.
Is this problem caused by cuda version? my pc and laptop have cuda 11 in the host machine, but I use official Docker image for autoware (cuda-10 inside).

Originally posted by Cenbylin with karma: 16 on 2021-08-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by bill4u on 2021-08-08:
well, I compile the proj by source code and all work well in  PC and laptop witch cuda (10.0, 10.1, 10.2, 11.1).But stuck in the Xavier NX platform. I find it stuck in the gpu function of buildOctree(). Still dig into..
Comment by bill4u on 2021-08-11:
I have found the error lies in the buildParent()--->__syncthreads(). remove it from the for{} loop and put it outside the for loop will solve the problem!

