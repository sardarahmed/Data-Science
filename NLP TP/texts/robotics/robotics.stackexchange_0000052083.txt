Q:

Bloom Debian Generation

So... I'm trying to package my p2os-vanderbilt stack for groovy, and I am having some issues.
Upon running Bloom by the tutorial here, I received the following error:
allenh1@allenh1-Vostro-430:~/p2os-release$ git-bloom-release groovy
Processing release track settings for 'groovy'
Checking upstream devel branch for a package.xml(s) or stack.xml
Cloning into '/tmp/tmp6kdnW0/upstream'...
remote: Counting objects: 569, done.
remote: Compressing objects: 100% (341/341), done.
remote: Total 569 (delta 202), reused 550 (delta 183)
Receiving objects: 100% (569/569), 1.03 MiB | 1.32 MiB/s, done.
Resolving deltas: 100% (202/202), done.
stack.xml is present but going to be ignored because this is not a release for Fuerte.
Looking for packages in 'master' branch... found 4 packages.
Detected version '1.0.0' from package(s): ['p2os_urdf', 'p2os_teleop', 'p2os_driver', 'p2os_launch']

Executing release track 'groovy'
==> bloom-export-upstream /tmp/tmp6kdnW0/upstream git --tag 1.0.0 --display-uri https://github.com/allenh1/p2os.git --name p2os --output-dir /tmp/tmpi4MO7t
Checking out repository at 'https://github.com/allenh1/p2os.git' to reference '1.0.0'.
Exporting to archive: '/tmp/tmpi4MO7t/p2os-1.0.0.tar.gz'
WARNING [vcstools] Command failed: 'git archive -o /tmp/tmpi4MO7t/p2os-1.0.0.tar 1.0.0'
 run at: '/tmp/tmp6kdnW0/upstream'
 errcode: 128:
fatal: Not a valid object name
[/vcstools]
Failed to create archive of upstream repository at 'https://github.com/allenh1/p2os.git'
'1.0.0' is not a tag in the upstream repository...
'1.0.0' is not a branch in the upstream repository...
Tarball was not created.
<== Error running command 'bloom-export-upstream /tmp/tmp6kdnW0/upstream git --tag 1.0.0 --display-uri https://github.com/allenh1/p2os.git --name p2os --output-dir /tmp/tmpi4MO7t'

I'm very new to this, so it's probably some kind of obvious git setup thing. Thanks in advance,
-Hunter A.

Originally posted by allenh1 on ROS Answers with karma: 3055 on 2013-06-18
Post score: 1

A:

The error that you want to look at in the above snippet is this:
WARNING [vcstools] Command failed: 'git archive -o /tmp/tmpi4MO7t/p2os-1.0.0.tar 1.0.0'
 run at: '/tmp/tmp6kdnW0/upstream'
 errcode: 128:
fatal: Not a valid object name
[/vcstools]

This is git reporting that the 1.0.0 object name does not exist. Later bloom lets you know that 1.0.0 is neither a branch nor a tag:
Failed to create archive of upstream repository at 'https://github.com/allenh1/p2os.git'
'1.0.0' is not a tag in the upstream repository...
'1.0.0' is not a branch in the upstream repository...

Now for best practice you should have a branch called master, or groovy-devel, and/or hydro-devel and so on... This is where you do your work, fix bugs, and add features... When you are ready to release a version from that branch, then you create a tag which is exactly that version, e.g. 1.0.0. With git you can just do git tag 1.0.0 on the branch you are releasing from.
With catkin packages, you can use the catkin_prepare_release script to have it update the version in your package.xml, commit that change, tag your repository and push the results. This script helps automate the process and produces a consistent and conventional tagging scheme, and I highly recommend using it. (it is included with catkin)

Originally posted by William with karma: 17335 on 2013-06-18
This answer was ACCEPTED on the original site
Post score: 4

