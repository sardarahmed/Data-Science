Q:

catkin export cmake definitions/variables to depending packages

Is there a way to set cmake variables in one package and export them to all depending packages?
For clarity:
If I set a cmake variable in one packages CMakeLists.txt like:
set( My_Var "Hello World" )

I can it now has the value in this package, I can e. g. echo it like
message( "My_Var = ${My_Var}" )

which will result in the output:
My_Var = Hello World

However, if I put the same output in another package (which depends on the previous one), the result is empty:
message( "My_Var = ${My_Var}" )

Resulting output:
My_Var = 

Apparently, both packages have separate cmake namespaces. Now Is there a way to set a variable in one package, the mark it in some kind of way to be exported into depending packages and access its value in the depending packages?

Originally posted by Wolf on ROS Answers with karma: 7555 on 2014-09-10
Post score: 2

A:

Found solution:
*##########################################################################
1 ) created a folder cmake in the "first package" and added a file pkg_config_extras.cmake into it. It contains:
cmake_minimum_required(VERSION 2.8.3)

set( My_Var "Hello World" )

*##########################################################################

to make My_Var viewable in the "first package" 's CMakeLists.txt I added:
include( cmake/pkg_config_extras.cmake )
----> now I can output it there with correct result:
message( "My_Var = ${My_Var}" )
----> Result:
My_Var = Hello World

*##########################################################################

to make My_Var viewable in the "second package" 's CMakeLists.txt ("second package" depends on the "first package") I needed to add in the "first package" 's CMakeLists.txt a  CFG_EXTRAS when calling catkin_package:
catkin_package(
INCLUDE_DIRS include                  # unchanged, whatever was there before
LIBRARIES ${PROJECT_NAME}             # unchanged, whatever was there before
CATKIN_DEPENDS roscpp                 # unchanged, whatever was there before
DEPENDS OpenCV                        # unchanged, whatever was there before
CFG_EXTRAS pkg_config_extras.cmake    # added this line !!!!
)

----> now I can also output it in the "second package" 's CmakeLists.txt with correct result:
message( "My_Var = ${My_Var}" )

----> Result:
My_Var = Hello World

Originally posted by Wolf with karma: 7555 on 2014-09-10
This answer was ACCEPTED on the original site
Post score: 1

