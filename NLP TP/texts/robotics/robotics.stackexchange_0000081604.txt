Q:

tf broadcasting rate

hello
im trying to increase the rate of which tf transform is being published
it seems that no matter what i do the rate stays 1 hz
even if cout prints at 10 hz, when i tf_echo the transform it still appears to be
published at 1 hz
i didnt find in ROS ANSWER any documentation about that
thanks!
#include <ros/ros.h>
#include <iostream>
#include <tf/transform_broadcaster.h>

int main(int argc, char** argv){
  ros::init(argc, argv, "tfpub");
  ros::NodeHandle n;

  ros::Rate r(10.0);

  tf::TransformBroadcaster broadcaster;

  while(n.ok()){
    broadcaster.sendTransform(
      tf::StampedTransform(
        tf::Transform(tf::Quaternion(0, 0, 0, 1), tf::Vector3(0.1, 0.0, 0.2)),
        ros::Time::now(),"map", "odom"));
    std::cout<< ros::Time::now() <<std::endl;
    r.sleep();
    ros::spinOnce();

  }
}

Originally posted by alonsheader on ROS Answers with karma: 3 on 2017-07-02
Post score: 0

Original comments
Comment by ufr3c_tjc on 2017-07-02:
This probably won't fix the issue, but put the ros::spinOnce(); call before the r.sleep(); call. You should never have anything after a Rate.sleep() call as this messes with loop timing.

A:

The rate at which tf_echo prints to the screen is a command line argument and does not reflect the underlying message rates.
If you want to determine the rate of publishing you should use tf_monitor. There's a tutorial on debugging.

Originally posted by tfoote with karma: 58457 on 2017-07-02
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by DavidN on 2017-07-02:
Totally agree. The correct way to view the rate is actually using view_frames tool
Comment by alonsheader on 2017-07-03:
thank you!

