Q:

ROS Groovy simulator_gazebo on OSX

Hello everyone,
I am trying to install gazebo in the ROS (groovy) stack (simulator_gazebo), which I believe is still 1.3. I am compiling using clang 3.2 (actually it is based on 3.2).
At first it failed to find TBB and libxml2, which I fixed by adding their .pc files so that pkg-config could find them. Then it complained about -DMAC_OS_X_VERSION not being set, so I added
add_definitions(-DMAC_OS_X_VERSIONS=1080)

In the CMakeLists.txt. After that I believe I had some problems with gazebo using CLOCK_REALTIME, which isn't available on OSX so I replaced that with the OSX equivalent.
I have gotten a long way but now I am stuck with linking dependencies for gazebo_sensors and gazebo_physics. gazebo_sensors depends on gazebo_physics, however gazebo_physics seems to also depend on gazebo_sensors, causing a circular dependency. The dependency on gazebo_sensors for gazebo_physics did not exist, without this I was getting linking errors. Adding this link causes a circular dependency. Removing the dependency on gazebo_physics in gazebo_sensors allows it to compile gazebo_physics, but then it gets stuck with linking errors for gazebo_sensors because it is missing things from gazebo_physics there then.
I also tried compiling with gcc (4.2 and 4.7), but this gave me a whole set of different errors.
I had a similar problem with gazebo_physics and gazebo_physics_ode, gazebo_physics_ode needed to link against gazebo_physics, however gazebo_physics did not need to link against gazebo_physics_ode so I could just add the link to gazebo_physics in gazebo_physics_ode.
What can I try next? I can't seem to resolve the circular dependency that I apparently have. How come this compiles fine on Ubuntu (I assume)? Should I actually be asking this on ROS answers? I tried version 1.4 from gazebosim.org but it seems to give me the same problems.

Originally posted by Hansg91 on Gazebo Answers with karma: 11 on 2013-03-02
Post score: 1

A:

With pull requests from @Hansg91 and help from William at OSRF, I've made a homebrew formula for gazebo. It's still experimental. To try it:
Install homebrew:
ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)"
Install Xcode command-line development tools
Install XQuartz
Run the following commands:
brew tap ros/groovy
brew tap scpeters/gazebo
brew install gazebo
source /usr/local/share/gazebo/setup.sh
gazebo

Originally posted by scpeters with karma: 2861 on 2013-04-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Hansg91 on 2013-04-03:
Sounds great :) I don't think you really need XQuartz, you might only need it because somewhere the CMakeLists.txt checks if you have it, its not building against it I believe.
Comment by tkoolen on 2013-04-05:
Works perfectly so far! Thank you so much! I wish I could upvote, but I don't have enough karma for that...
Comment by tkoolen on 2013-04-05:
Has anybody tried getting drcsim to work on OSX by the way?
Comment by scpeters on 2013-04-05:
XQuartz is needed to build OGRE using the home-brew formula given by the ros/groovy tap. I haven't tried building drcsim yet. There's still a problem with plugins being hard-coded as '.so' files when they're actually '.dylib' files on the mac. Also, it crashes when I insert cameras. So there's still some work left to do. I just started a wiki page to track status on OS X, feel free to add any answers threads to the list at the bottom of this page.
Comment by scpeters on 2013-04-05:
XQuartz is needed to build OGRE using the home-brew formula given by the ros/groovy tap. I haven't tried building drcsim yet. There's still a problem with plugins being hard-coded as '.so' files when they're actually '.dylib' files on the mac. Also, it crashes when I insert cameras. So there's still some work left to do. I just started a wiki page to track status on OS X, feel free to add any answers threads to the list at the bottom of this page.
Comment by scpeters on 2013-04-05:
XQuartz is needed to build OGRE using the home-brew formula given by the ros/groovy tap. I haven't tried building drcsim yet. There's still a problem with plugins being hard-coded as '.so' files when they're actually '.dylib' files on the mac. Also, it crashes when I insert cameras. So there's still some work left to do. I just started a wiki page to track status on OS X, feel free to add any answers threads to the list at the bottom of this page.
Comment by scpeters on 2013-04-05:
XQuartz is needed to build OGRE using the home-brew formula given by the ros/groovy tap. I haven't tried building drcsim yet. There's still a problem with plugins being hard-coded as '.so' files when they're actually '.dylib' files on the mac. Also, it crashes when I insert cameras. So there's still some work left to do. I just started a wiki page to track status on OS X, feel free to add any answers threads to the list at the bottom of this page.
Comment by Hansg91 on 2013-04-08:
Well it is very nice to see that you picked up this task, I don't need gazebo anymore at the moment (intended to use it for navigation, but I am using Stage at the moment) but I have no doubt that for some future feature I will need it and be loving it on OSX :)
Comment by Andrew Hundt on 2014-03-28:
Note that these instructions are now out of date. I think the current homebrew steps are: brew tap osrf/homebrew-simulation ; brew install gazebo

