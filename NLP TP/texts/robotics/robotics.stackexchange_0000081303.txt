Q:

Importing a module that uses rospy from a module in Python3

Hi. I have a library that is fully written in Python3.5 and I want to interface it with a module that I wrote. The module that I wrote imports rospy, so it depends on Python2.7. When I try to do this I get the following error:
python3 script_running_library_in_python3.py
Traceback (most recent call last):
  File "script_running_library_in_python3.py", line 11, in <module>
    from module_using_rospy.core import SomeClass
  File "/home/hamza/catkin_ws/src/module_using_rospy/module_using_rospy/core.py", line 9, in <module>
    import rospy
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rospy/__init__.py", line 49, in <module>
    from .client import spin, myargv, init_node, \
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rospy/client.py", line 47, in <module>
    import yaml
  File "/usr/local/lib/python2.7/dist-packages/yaml/__init__.py", line 2, in <module>
    from error import *
ImportError: No module named 'error'

Any idea how I could make this work? Thank you!

Originally posted by hamzamerzic on ROS Answers with karma: 111 on 2017-06-16
Post score: 1

A:

It was an error in how I sourced things and how I set up PYTHONPATH. The problem is the collision between libraries, and whichever one shows up first in the PYTHONPATH gets used, so it is important to make sure to have paths from the adequate python version first.

Originally posted by hamzamerzic with karma: 111 on 2017-07-31
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by owerko on 2017-10-03:
Are you able to write nodes in python 3 without any problems?
Comment by hamzamerzic on 2017-10-03:
Yes, after fixing the PYTHONPATH it worked without issues. But keep in mind that some functionalities might not still be supported.

