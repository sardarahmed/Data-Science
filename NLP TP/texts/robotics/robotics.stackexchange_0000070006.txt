Q:

nav2d StartExploration finished without doing anything

Hello,
I am currently trying to use nav2d service : StartExploration to make my turtlebot robot map a unknown room with Ubuntu 14.04 and ROS Indigo.
When i use the service StartMapping to get the first map, the robot does move ahead and turn on itself to create the map. After that, when i launch the StartExploration service, it only say that "exploration has finished" without mapping the room.
Here is the rqt_console list of debug message for StartExploration : http://hpics.li/a24def6
I though it was a problem with the inflation radius, but after lowering the parameter in navigator.yaml and costmap.yaml the result stay the same.
Here is the map viewed by Rviz : http://hpics.li/537b9fc
Any hint on what topic i should look at to know where the problem is ?? i looked at Explore/goal, and a goal is indeed created each time i start the service, but the goal part of the message is blank.
EDIT :
map au format pgm : http://s000.tinyupload.com/?file_id=73152999357921914136
map au format yaml : http://s000.tinyupload.com/?file_id=55449211431842077369

Originally posted by Swan Baigne on ROS Answers with karma: 47 on 2015-10-20
Post score: 0

Original comments
Comment by mengeler on 2017-01-30:
So has there been any answer to this issue, because I am facing the same problem
Comment by jarvisschultz on 2017-01-30:
@mengeler Please only use answers to provide answers to questions. I've moved your answer to be a comment.
Comment by Sebastian Kasperski on 2017-02-01:
If you get "Exploration has finished.", open the map in RVIZ and check if there are reachable frontier cells. If you think there is at least one, set it manually as a goal point and see if the robot can go there. The problem is usually a too large robot_radius in the navigator.

A:

"Exploration has finished" means that there is no reachable frontier cell from the robot's position anymore. So with the inflation radius your already on the right track. But looking at your map it seems that your global map resolution is very low. This might also be a problem, as there must be at least 1 pixel left free after applying the inflation radius to all obstacles. So try increasing the map resolution and test the navigator by sending goal points in RVIZ.

Originally posted by Sebastian Kasperski with karma: 1658 on 2015-10-21
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Swan Baigne on 2015-10-21:
I forgot to mention it on the question, but i was able to create the map correctly by using RVIZ to send goal. I will test changing the map resolution and post here the results. Once again , thanks for answering
Comment by Swan Baigne on 2015-10-21:
Changed the grid_resolution parameter in mapper.yaml to 0.025, and the map is much clearer that before. But the exploration is still finished as soon as it begin, despite having clear boundary open.
Comment by Sebastian Kasperski on 2015-10-21:
Have you tried moving the robot manually with the joystick? (Using the joy_node->remote_controller->operator->robot chain) If your doors are too narrow for the used robot_radius, the planner will also not plan through them and therefor finish the exploration.
Comment by Swan Baigne on 2015-10-22:
i have tried to move the robot with simulated joystick ( turtlebot keyboard_teleop ), and i have no problem. I tried to reduce the robot_radius and inflation radius to minimum ( 0.01 ), and the exploration still finish instantly, so i think the problem don't come from not having enough free pixel.
Comment by Sebastian Kasperski on 2015-10-22:
Have you tried the navigation by setting a goal manually in RVIZ? And set the log-level to debug for the Navigator, if you haven't done so.
Comment by Swan Baigne on 2015-10-22:
for RVIZ yes, it works well with manually chosen goals.
And for the log level, i have this debug log when i try to launch the exploration :http://hpics.li/a24def6
Comment by Sebastian Kasperski on 2015-10-22:
That is strange... Can you send your global map again after the exploration finished. (You can save the map with "rosrun map_server map_saver", or make a screen in RVIZ without the local costmap.)
Comment by Swan Baigne on 2015-10-22:
added both maps (pgm and yaml ) to the initial question
Comment by Sebastian Kasperski on 2015-10-22:
Some parts of the map seem to be cluttered with obstacles. Try moving the robot around a bit and restart the exploration from different locations. Make sure not to stand in front of the robot to avoid obstacles in the map. It is really unusual to have navigation working but exploration not.
Comment by Swan Baigne on 2015-10-22:
Thanks for taking time to help me.
Tried on a obstacle free environment and after moving to different positions, still having the same problem.
Comment by Sebastian Kasperski on 2015-10-23:
Just for completeness; I assume you are using the default exploration strategy (nearest frontier). Can you try the other strategies by setting the "exploration_strategy" in navigator.yaml to "MultiWavefrontPlanner" or "MinPosPlanner"?
Comment by Swan Baigne on 2015-10-23:
Tried to change the strategy, and same results again.
Comment by Sebastian Kasperski on 2015-10-23:
As I expected, the decision whether exploration is finished should be equal among all strategies. Have you build nav2d from source or installed the binaries? Does the exploration work if you run tutorial3?
Comment by Swan Baigne on 2015-10-23:
I am currently using nav2d installed from apt-get, with a modified .launch file based on tutorial3.launch
Later i installed the source for nav2d_navigator and nav2d_operator in order to add some debug messages, but i am basically using the apt-get installed package

