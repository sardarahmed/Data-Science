Q:

Size of a CompressedImage

I have a compressed image in a bagfile.
I am subscribed to the topic with :
    sub=rospy.Subscriber("irat_red/camera/image/compressed",CompressedImage,image_callback,pub_vt)

I want to get the width and the hight of this CompressedImage to using it in a callback.
What should I do

Originally posted by Younès on ROS Answers with karma: 27 on 2017-09-29
Post score: 0

A:

In general, subscribing directly to a CompressedImage topic isn't what you want to do; in C++, you would want to use the image_transport mechanism, which will handle decompressing it for you.
Unfortunately, that doesn't work in Python.  Your options are either:

Run an image_transport/republish node that will subscribe to the CompressedImage topic, publish it as an Image topic, and subscribe to that.

Look at the format field of the CompressedImage message to determine the compression type, then use an appropriate Python library to manually decompress the image data and extract the height and width.

Originally posted by preed with karma: 88 on 2017-09-29
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Younès on 2017-09-30:
I can't use republish since it is not recognized by my Ubuntu 16.04. How could I resolve this problem?
Comment by preed on 2017-10-02:
It does exist in 16.04, although you might not have it installed.  Try sudo apt install ros-kinetic-image-transport.
Comment by Younès on 2017-10-02:
It was already installed in my Ubuntu. I used the command    rosrun image_transport  republish compressed in:=/irat_red/camera/image image_transport:=compressed raw out:=/irat_red/camera/image
It works

