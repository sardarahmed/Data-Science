Q:

Issue with usb_cam, can't open camera

I wanna to test whether this usb_cam works. But get the error below. Anyone can help? THX!!
@Laptop:~/ros_workspace/usb_cam$ roslaunch usb_cam-test.launch
... logging to /home/lanray/.ros/log/cb16e5d0-f5e3-11e1-bc19-001e64868dfe/roslaunch-Laptop-18031.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://Laptop:56876/

SUMMARY
========

PARAMETERS
 * /image_view/autosize
 * /rosdistro
 * /rosversion
 * /usb_cam/camera_frame_id
 * /usb_cam/image_height
 * /usb_cam/image_width
 * /usb_cam/io_method
 * /usb_cam/pixel_format
 * /usb_cam/video_device

NODES
  /
    image_view (image_view/image_view)
    usb_cam (usb_cam/usb_cam_node)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[usb_cam-1]: started with pid [18051]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[image_view-2]: started with pid [18062]
usb_cam video_device set to [/dev/video0]
usb_cam io_method set to [mmap]
usb_cam image_width set to [640]
usb_cam image_height set to [480]
usb_cam pixel_format set to [mjpeg]
usb_cam auto_focus set to [0]
VIDIOC_S_FMT error 22, Invalid argument
[usb_cam-1] process has died [pid 18051, exit code 1, cmd /home/lanray/ros_workspace/usb_cam/bin/usb_cam_node __name:=usb_cam __log:=/home/lanray/.ros/log/cb16e5d0-f5e3-11e1-bc19-001e64868dfe/usb_cam-1.log].
log file: /home/lanray/.ros/log/cb16e5d0-f5e3-11e1-bc19-001e64868dfe/usb_cam-1*.log

Originally posted by lanray on ROS Answers with karma: 11 on 2012-09-03
Post score: 1

Original comments
Comment by Kevin on 2012-09-03:
please post questions with useful titles and useful tags so that others can learn from your issues too.

A:

Hi there,
I have had a similar error some time back and I decided to google for the right solution before posting my own question. Fortunately, I got the answer straight and simple from the following link:
ROS Answers
However, to simply state the solution here all you have to do is to set the parameter pixel_format to 'yuyv' from its default value of 'mjpeg'
This could be done in the terminal by executing the following line before executing the 'rosrun' command:

rosparam set /usb_cam/pixel_format yuyv

and then,

rosrun usb_cam usb_cam_node

I have used this with several webcam and it worked fine in all of them. You may even make a launch file with this parameter set to 'yuyv' so that you need not repeat the command everytime you run usb_cam_node.
Am sure this will work.
Good luck with your task to achieve.
Regards,

Originally posted by SivamPillai with karma: 612 on 2012-09-03
This answer was ACCEPTED on the original site
Post score: 6

Original comments
Comment by Christoph on 2013-11-01:
To have an even more convenient way to handle this, you could create a small custom launch file for usb_cam that sets this parameter.
Comment by rflmota on 2014-09-20:
how to set the parameter in a launch file @Christoph ?
I tried this, but it didn't work:
  <param name="/usb_cam/pixel_format" value="yuyv"/>

Comment by aorait on 2016-03-21:
I have tried this solution however the problem still occurs sometimes. The camera is used for tracking an April Tag on the quad-copter and it is dangerous when the camera node suddenly stops working in the middle of flight. I am using Logitech Pro 9000 PC Internet Camera Webcam.  Alternate solution?

