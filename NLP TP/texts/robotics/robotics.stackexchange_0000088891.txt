Q:

service response empty

The wiki doesn't make it clear if response or request of a ROS service can be empty, and what will happen when either is empty.
I have seen rospy.Service fails if the handler returns None, so I guess ROS services without any response are not supported. Otherwise, what should the handler return?
But I am still not clear if ROS services with empty requests are officially supported. I see services with empty request can be called with no problem, but it would be nice to see this documented, so that when we see some tools cannot work with this case, we know it is a bug and will try fix it.
Best regards,
Yong

Originally posted by yong on ROS Answers with karma: 28 on 2018-09-06
Post score: 1

A:

I have seen rospy.Service fails if the handler returns None, so I guess ROS services without any response are not supported.

None != empty response. None indicates an error on the server side.
See the documentation (wiki/rospy/Overview/Services - Providing services, emphasis mine):

Create a new ROS Service with the specified name, service type (the auto-generated service class), and handler. The handler will be invoked with the service request message and should return the appropriate service response message. If the handler returns None or raises an exception, an error will be passed to the client.

Furthermore:

Otherwise, what should the handler return?

Every service definition always consists of a request and a response part (top and bottom of the .srv definition respectively). Services that have "nothing" on the response side still have a Response class generated, but it will just not contain any fields.
Service handlers that should return an empty response should therefore still instantiate a Response object and return that.
See again wiki/rospy/Overview/Services - Providing services on the wiki.

I see services with empty request can be called with no problem, but it would be nice to see this documented

I think the rospy overview page on services documents this quite well.

Originally posted by gvdhoorn with karma: 86574 on 2018-09-06
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by yong on 2018-09-06:
Thanks. So the handler can return args, kwargs (a dict) or a Reponse object directly.
Comment by yong on 2018-09-06:
Just doing some testing. The service call doesn't work for me though.
Comment by gvdhoorn on 2018-09-06:
If you're having issues with some specific piece of code I would suggest to post a new question. This particular question was about whether service server behaviour with empty responses was documented and specced. It is.
Comment by yong on 2018-09-06:
OK. got it work. will do.

