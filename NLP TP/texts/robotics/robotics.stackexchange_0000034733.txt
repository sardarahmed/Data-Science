Q:

error building a package with rosjava

Hi,
I'm trying to rosmake a package using the rosjava.mk as described here.
Everything works fine until I add a dependency on another (self created) package.
No problems occur with dependencies on core packages (like std_msgs) or if I don't use the rosjava.mk.
I get an extension during the run of generate_properties.py because the script is trying to locate the "installation of stack None":
[ rosmake ] All 18 linesest: 0.3 sec ]    
{-------------------------------------------------------------------------------
rosrun rosjava_bootstrap generate_properties.py test > ros.properties
Traceback (most recent call last):
File "/opt/ros/electric/stacks/rosjava_core/rosjava_bootstrap/scripts/generate_properties.py", line 174, in <module>
  generate_properties_main()
File "/opt/ros/electric/stacks/rosjava_core/rosjava_bootstrap/scripts/generate_properties.py", line 171, in generate_properties_main
  generate_ros_properties(package)
File "/opt/ros/electric/stacks/rosjava_core/rosjava_bootstrap/scripts/generate_properties.py", line 124, in generate_ros_properties
  props['ros.pkg.%s.version'%(p)] = get_package_version(p)
File "/opt/ros/electric/stacks/rosjava_core/rosjava_bootstrap/scripts/generate_properties.py", line 112, in get_package_version
  return get_stack_version_cached(s)
File "/opt/ros/electric/stacks/rosjava_core/rosjava_bootstrap/scripts/generate_properties.py", line 106, in get_stack_version_cached
  _stack_version_cache[s] = val = roslib.stacks.get_stack_version(s)
File "/opt/ros/electric/ros/core/roslib/src/roslib/stacks.py", line 310, in get_stack_version
  return get_stack_version_by_dir(get_stack_dir(stack, env=env))
File "/opt/ros/electric/ros/core/roslib/src/roslib/stacks.py", line 168, in get_stack_dir
  raise InvalidROSStackException("Cannot location installation of stack %s. ROS_ROOT[%s] ROS_PACKAGE_PATH[%s]"%(stack, env[ROS_ROOT], env.get(ROS_PACKAGE_PATH, '')))
roslib.stacks.InvalidROSStackException: Cannot location installation of stack None.

I'm using the newest ros-electric-rosjava-core (0.1.0-s1313710013~maverick).
Thanks!

Originally posted by martin on ROS Answers with karma: 3 on 2011-10-06
Post score: 0

A:

I believe that's fixed at head. You can try installing rosjava from source to fix the issue. Or, you can put your new package in a stack.

Originally posted by damonkohler with karma: 3838 on 2011-10-08
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by martin on 2011-10-13:
Putting it in a package worked (didn't try installing it from source). Thanks!

