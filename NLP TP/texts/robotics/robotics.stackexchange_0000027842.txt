Q:

Plugin tutorial: Gazebo starts but not plugin

I'm doing the Velodyne LiDAR plugin tutorial (http://gazebosim.org/tutorials?cat=guided_i&tut=guided_i5), but I can't get Gazebo to recognize the plugin. I have copied the code from steps 2-4 and successfully built it using cmake and make, but when I run the scene using
cd ~/velodyne_plugin/build
gazebo ../velodyne.world

Gazebo just starts the scene without outputting anything to the terminal. I also tried adding the code supposed to spin the joint, as in step 5, with the same result. I even tried removing the plugin library file (libvelodyne_plugin.so) that I built altogether, while still having the line
<plugin name="velodyne_control" filename="libvelodyne_plugin.so"/>

in my .world-file and Gazebo still launches the scene just fine. I also tried adding another model (the Cessna air plane) to the .world-file, and that one appears as it should.
Any ideas?
EDIT: My OS is Ubuntu 16.04, and I run Gazebo version 7.0.0
EDIT2: Using the --verbose tag gives the following output:
~/Developer/Gazebo/velodyne_plugin/build$gazebo ../velodyne.world --verbose
Gazebo multi-robot simulator, version 7.0.0
Copyright (C) 2012-2016 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

[Msg] Waiting for master.
Gazebo multi-robot simulator, version 7.0.0
Copyright (C) 2012-2016 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

[Msg] Waiting for master.
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
[Msg] Publicized address: 192.168.121.123
[Msg] Publicized address: 192.168.121.123
[Err] [Plugin.hh:165] Failed to load plugin libvelodyne_plugin.so: libvelodyne_plugin.so: cannot open shared object file: No such file or directory

Originally posted by hassanbot on Gazebo Answers with karma: 33 on 2016-08-09
Post score: 0

Original comments
Comment by chapulina on 2016-08-09:
Have you tried running gazebo in verbose mode? Just add --verbose to the command. Then update the question with the output.
Comment by Brosseau.F on 2016-08-10:
And also check that your GAZEBO_PLUGIN_PATH environment variable is correctly set.
Comment by hassanbot on 2016-08-10:
It was the environment variables that hadn't been set. Thanks! I updated the question with the verbose output and added the solution.

A:

The problem was I hadn't set the Gazebo environment variables. See this tutorial: http://gazebosim.org/tutorials?tut=components

Originally posted by hassanbot with karma: 33 on 2016-08-10
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by MaKaNu on 2017-10-16:
Could specify this? I installed Gazebo-7 and started with the tutorial same as you. We are using gazebo 7 because we use a UR5 Modell which requires ver 7 instead of 8. I think my envirment variables are correct, but I'm not shure about which are the right variables.

