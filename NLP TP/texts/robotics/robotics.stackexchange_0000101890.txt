Q:

[Nav2] Keepout Zones - dynamic change of KeepoutFilter mask file during simulation

Hello,
I would like to use these tutorials with filter masks (keep out and speed filter):

https://navigation.ros.org/tutorials/docs/navigation2_with_keepout_filter.html

https://navigation.ros.org/tutorials/docs/navigation2_with_speed_filter.html

As a basis for creating safety zones that the user can turn on and off while simulating multiple AMRs in the Gazebo world.
E.g. I prepared two mask files where robots can/cannot move:
1) a driveable corridor is free (there is no keep-out zone)
2) the same corridor, but this time it is blocked by a new part of the keep-out zone

The user can change state of these keep-out zones for selected robots using a special service. The robot can re-plan its global path to adapt after waiting a few seconds/cancel the target goal and await for a new move goal.
How should I approach this part of the problem with changing the keep-out mask file (PGM + YAML) in Costmap Filters during simulation? Would this be possible dynamically already? Or would this be a new feature to implement?
Best
≈Åukasz Janiec

Originally posted by ljaniec on ROS Answers with karma: 3064 on 2022-06-03
Post score: 0

Original comments
Comment by Alex-SSoM on 2022-06-07:
I have a similar use case in mind where a node on the robot could detect and update the Keepout zones depending on the sensor observations (camera + vision).
Comment by ljaniec on 2022-06-07:
@Alex-SSoM Yes, this kind of zone updates can be useful in many applications, that's why I am interested in this feature :)

A:

Unsure if dynamically changing filters is how you are supposed to go about it. Feels more like you are supposed to deal with dynamic objects via costmap changes, and doing keepout zones for areas you know ahead of time that you should avoid. You can make a custom costmap layer based on sensor data, other maps or anything else you deem useful. Tutorial here.
However, if you necessarily must do it your way, add a hook in the costmap filter interface for dynamically changing the parameters you need changed, add the equivalent response in existing costmaps (so as to not break them), implement your functionality, and you're done.

Originally posted by Per Edwardsson with karma: 501 on 2022-07-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ljaniec on 2022-09-20:
You receive a special badge, arrr!

