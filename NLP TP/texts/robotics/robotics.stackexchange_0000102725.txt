Q:

How can I remove active topic?

Hi, I wanted to use a python script to record a bag instead of using the command line in terminal.
My script is based on how record rosbag with python. However, the recorded topic stay active in the topic list even after I kill the process with Ctrl+C.
The code snippet is as follows:
import subprocess, shlex, psutil
command = "ros2 bag record -o subset /sensor/position"
command = shlex.split(command)
rosbag_proc = subprocess.Popen(command)

How can I fix this?
Any help is appreciated

Originally posted by Ima on ROS Answers with karma: 1 on 2022-11-18
Post score: 0

Original comments
Comment by Ranjit Kathiriya on 2022-11-18:
Follow the answer..

A:

Hello,
You can write a proper node for recoding a bag file.
You can follow a tutorial for recording a bag file using the python ros2 node.
https://docs.ros.org/en/galactic/Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-Py.html

I kill the process

Instead, you can unsubscribe to that by using the following line.
self.Node.destroy_subscription(self,self.subscriber)

Originally posted by Ranjit Kathiriya with karma: 1622 on 2022-11-18
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Ima on 2022-11-18:
Thanks for the reply! I, however, tried writing a ros2 node for recording a rosbag but Ros2 foxy doesn't provide the package rosbag2_py.
Comment by Ranjit Kathiriya on 2022-11-18:
Have a look in the future branch you will be able to get rosbag2_py
https://github.com/ros2/rosbag2/tree/foxy-future
https://github.com/ros2/rosbag2/issues/983
If you got your answer then accept the answer by pressing tick button.
Comment by Ima on 2022-11-21:
I can't change the whole branch to a new one, and what I'm looking for is removing the remaining active topics from the topic list
Comment by Ranjit Kathiriya on 2022-11-21:
Clone the git repo, then after change the branch to foxy, build it. I think you will be ready to go.

