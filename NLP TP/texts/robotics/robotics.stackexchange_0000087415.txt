Q:

graph listener ros2

Is there any documentation or notes available for understanding how to work with graph listener?
I'm trying to port/get rqt_graph working with ros2 and trying analyzing differences. Where I see with ros2 we do not have a framework for mapping node_names to topic_names, which is used with rqt.
Any clues/directions would be really helpful.

Originally posted by Sriram on ROS Answers with karma: 51 on 2018-06-19
Post score: 1

Original comments
Comment by alsora on 2018-09-11:
Hi Sriram, how is going with your porting? is it publicly available? i'm really interested in this feature and I could contribute if you have not finished yet to implement.

A:

Not really, there's documentation for the pieces, but no overarching documentation. The best option is to see how it is used in something like wait_for_service:
https://github.com/ros2/rclcpp/blob/bf89dc0797fa967e801688c2e80573902dc74ebf/rclcpp/src/rclcpp/client.cpp#L103-L153
You basically:

create an event ("graph event" object)
call Node::wait_for_graph_event(event, timeout)
when it returns check what you're watching for, e.g. if a service is ready or if the topic_names_and_types are different

The event just tells you that something changed, but it's up to you to detect what actually changed. In the future this might change, but for now that's the best we can offer. We didn't have event contain the source of the change because that would require us to queue up events and until now our code doesn't have any queueing (the middleware handles that for us).

Originally posted by William with karma: 17335 on 2018-06-19
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Sriram on 2018-06-19:
Thank you William for the snippet.
I'd another question linking to something above. How do we create a graph data with node name and topic name mapped? I did try to write a call back handler inside rmw_fastrtps. But didn't work. Any clues here?
Comment by William on 2018-06-19:
I don't understand what you mean by "a graph data with node name and topic name mapped", but it sounds like a new question, so you should start a new question and accept this answer if it answered your original question.

