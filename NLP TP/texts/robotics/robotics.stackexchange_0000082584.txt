Q:

How do I Use Unicode Strings in pubish/subscribe?

I want to publish and subscribe unicode strings (multibyte text).
but, If I did it then  UnicodeEncodeError was Occured.
Can I use multibyte text in publish and subscribe ?

Originally posted by NGI on ROS Answers with karma: 3 on 2017-08-30
Post score: 0

A:

Can I use multibyte text in publish and subscribe ?

I don't think that it is supported in ROS1. From ros/wiki/msg - Fields:

unicode strings are currently not supported as a ROS data type. utf-8 should be used to be compatible with ROS string serialization. In python 2, this encoding is automatic for unicode objects, but decoding must be done manually. In python 3, when using str, both encoding and decoding using 'utf-8' in the generated message code.

One workaround I can think of is to instead of using the string type, using the uint8 type. Serialise your wide-string yourself into that uint8 array, publish it, and in the subscriber recreate the wide-string.
That is not nice (as you lose the type info), but could work.

Originally posted by gvdhoorn with karma: 86574 on 2017-08-30
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by NGI on 2017-08-30:
Thank you for your answer.
I understood it.
For a while, I'll try it.
Comment by NGI on 2017-08-30:
I checked it.Thanks!
And, I found other way.
I can recieve Unicode Message by above sequence.
in Publish Node: Original text [unicode] => text.encode('utf-8') [change to str] => publish
in Subscribe Node: subscribe => text=data.data [str] => text.decode('utf-8') [unicode]
Thanks!
Comment by gvdhoorn on 2017-08-30:
If that works, then you should post it as an answer instead of a comment.

