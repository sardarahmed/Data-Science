Q:

install groovy from source fails at pcl

Hi,
I'm trying to install groovy from source on a Gentoo laptop using instructions from here:

www.ros.org/wiki/groovy/Installation/Source

It fails while building the point cloud library.  Please help on how to proceed.
Thanks.
The command I'm using to build is:
./src/catkin/bin/catkin_make_isolated --install-space /opt/ros/groovy --cmake-args -DSETUPTOOLS_DEB_LAYOUT=OF

This is the first error it threw up while building the pcl package:
[ 17%] Building CXX object examples/common/CMakeFiles/pcl_example_check_if_point_is_valid.dir/example_check_if_point_is_valid.cpp.o
Linking CXX shared library ../lib/libpcl_io.so
Linking CXX executable ../../bin/pcl_example_check_if_point_is_valid
/usr/lib/gcc/x86_64-pc-linux-gnu/4.6.3/../../../../x86_64-pc-linux-gnu/bin/ld: /usr/local/lib/vtk-5.10/libvtkCommon.a(vtkFloatArray.cxx.o): relocation R_X86_64_32 against `.rodata' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/vtk-5.10/libvtkCommon.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[2]: *** [lib/libpcl_io.so.1.6.0] Error 1
make[1]: *** [io/CMakeFiles/pcl_io.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....

But then it goes on and then breaks down completely here:
[ 22%] Building CXX object sample_consensus/CMakeFiles/pcl_sample_consensus.dir/src/prosac.cpp.o
Linking CXX shared library ../lib/libpcl_sample_consensus.so
[ 22%] Built target pcl_sample_consensus
make: *** [all] Error 2
Traceback (most recent call last):
  File "./src/catkin/bin/../python/catkin/builder.py", line 658, in build_workspace_isolated
    number=index + 1, of=len(ordered_packages)
  File "./src/catkin/bin/../python/catkin/builder.py", line 456, in build_package
    install, jobs, force_cmake, quiet, last_env, cmake_args, make_args
  File "./src/catkin/bin/../python/catkin/builder.py", line 359, in build_cmake_package
    run_command(make_cmd, build_dir, quiet)
  File "./src/catkin/bin/../python/catkin/builder.py", line 186, in run_command
    raise subprocess.CalledProcessError(proc.returncode, ' '.join(cmd))
CalledProcessError: Command '/home/ro/ros_catkin_ws/devel_isolated/nodelet_topic_tools/env.sh make -j4 -l4' returned non-zero exit status 2
<== Failed to process package 'pcl': 
  Command '/home/ro/ros_catkin_ws/devel_isolated/nodelet_topic_tools/env.sh make -j4 -l4' returned non-zero exit status 2

Reproduce this error by running:
==> /home/ro/ros_catkin_ws/devel_isolated/nodelet_topic_tools/env.sh make -j4 -l4

Command failed, exiting.

Originally posted by logicalguy on ROS Answers with karma: 1 on 2013-04-03
Post score: 0

A:

You need to fix your installation of VTK for your 64 bit architecture. You do not appear to have compiled it with -fPIC as stated in the error message.

Originally posted by tfoote with karma: 58457 on 2013-04-04
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by logicalguy on 2013-04-05:
Yes, I had to rebuild vtk from source and it worked.  Thanks.

