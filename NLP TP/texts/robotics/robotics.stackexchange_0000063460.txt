Q:

navigation with husky on Rviz and Gazebo : robot sliding and odom problem

Hello,
I am trying to navigate in a simple closed world with a husky robot, using move_base. I mapped the world with hector_mapping. When I navigate with move_base, the /encoder topic published by the ekf doesn't match with the /odom topic (/odom_combined).
Here are the frames :
map -> odom_combined -> base_footprint -> base_link

map -> odom_combined : own
broadcaster ("manual")
odom_combined -> base_footprint :
robot_pose_ekf
base_footprint -> base_link :
robot_state_publisher

AND
map-> odom  : amcl
Launching move_base:
<node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
  <remap from="/cmd_vel" to="/husky/cmd_vel_unsafe" /> 
  (and parameters)
</node>

Here are the notable arguments of localization (amcl) launching file :
<include file="$(find gazebo_simulation)/launch/includes/amcl.launch.xml">
        <arg name="scan_topic" value="/sick/scan"/>
        <arg name="odom_frame_id" value="odom_combined"/>
        <arg name="base_frame_id" value="base_footprint"/>
</include>

The other point is that the robot doesn't go straight away but always slides when publishing :
$rostopic pub -r 4 /husky/cmd_vel_unsafe geometry_msgs/Twist '{linear: {x: 1.0, y: 0.0, z: 0.0 }, angular: {x: 0.0, y: 0.0, z: 0.0 } }'

Any idea? Is it from gazebo world or from parameters of the robot?
Thank you

Originally posted by est_CEAR on ROS Answers with karma: 170 on 2014-10-21
Post score: 0

A:

Hello,
I found what was wrong : there were two problems.

First, I had multiple odom topics and so I uniformed the topics and/or remapped it in the good nodes, for instance with :

Then, the amcl couldn't publish its topics because of the broadcaster from map to odom frame that I added. The amcl need to publish this broadcaster, but it couldn't because any toic can have only one parent.

Now it works well.

Originally posted by est_CEAR with karma: 170 on 2014-10-26
This answer was ACCEPTED on the original site
Post score: 0

