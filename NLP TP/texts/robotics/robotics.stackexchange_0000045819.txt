Q:

Should I use a lock on resources in a listener node with multiple callbacks?

If I have a node which listens to multiple topics & has a callback for each topic, should I need locks/mutexes on the resources that are changed by more than one callback? My question stems from whether or not callback functions are executed in new threads--could code be concurrently executing in two different callback functions at once?

Originally posted by robzz on ROS Answers with karma: 328 on 2012-11-15
Post score: 3

A:

The answer depends on the number of spin loops you are running. Have a look at this page.
The short answer is: if you call spin only once in your applications, you shouldn't need to synchronize. If you have multiple spinners, synchronize.

Originally posted by Lorenz with karma: 22731 on 2012-11-15
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by AHornung on 2012-11-16:
...anf if it's C++ (was not clear in the original question). rospy uses one thread per callback by default.
Comment by robzz on 2013-01-20:
I was writing my node in python. I wasn't aware of the difference in handlers between python and C++. Thanks!

