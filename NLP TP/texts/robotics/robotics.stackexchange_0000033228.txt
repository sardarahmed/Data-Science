Q:

SMACH slows down after hours of execution of large FSM on PR2

When I run my SMACH code on the PR2 for a long time, about 90 minutes or more, it slows down considerably.  Everything is in one giant (albeit nested) SMACH fsm with about 125 states.  The slowdown affects everything in the (python) process, including state transitions and all other bits of code.  When running top I don't see any big CPU or memory usage increase.
Have you guys run into this on your SMACH codes? I've been bumping into this more and more as the code crashes less often (meaning longer code runtimes).  Restarting the robot (both hardware and software) does not seem to prevent this from happening again.
This happens even when smach_viewer is not running.

Originally posted by mbollini on ROS Answers with karma: 1 on 2011-07-25
Post score: 0

A:

We've been running smach state machines with a few dozen states for days-weeks at a time, and never saw this behavior. A few things you could check:

Verify that it is actually smach that is getting slower (e.g. using print's), and not the ros communication in/out of smach
Check the overall system load when this is happening (using for example top)
Does your smach process take up a full core?

Originally posted by Wim with karma: 2915 on 2011-07-25
This answer was ACCEPTED on the original site
Post score: 0

