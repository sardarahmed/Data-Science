Q:

Gazebo shuts down immediately

Hey,
I installed Gazebo 1.4.0 on Ubuntu 12.04 using apt-get at first and also compiling from source. The problem that I'm facing is that when I type in the 'gazebo' command, it shows the GUI for a second and then immediately shuts it down without giving any errors. What is the problem?

Originally posted by siddharth950 on Gazebo Answers with karma: 3 on 2013-02-05
Post score: 2

Original comments
Comment by Daniel Vaz on 2013-02-05:
Did you follow the step 5 of http://gazebosim.org/wiki/1.4/install ?
Comment by siddharth950 on 2013-02-05:
Yes I did. Does anyone have a working 1.4.0 version on Ubuntu 12.04?
Comment by siddharth950 on 2013-02-06:
I got it working! I installed a new copy of Ubuntu 12.04 and installed using sudo apt-get. It's working fine.

A:

Hi all,
firstly, let me apologise for writing this as an 'answer', I don't have enough Karma yet to post as a comment. I am in the same boat as the user above, and have been for a couple of weeks. I spent some time going through other posts, questions and answers looking for how to resolve this. I have tried various combinations of un-installing and reinstalling both ROS and Gazebo. Also, I have tried both 1.3 and 1.4 source installations, as well as the standard repository edition. The environment variables you asked for @nkoenig are as follows:
<user>@XPS-Ubuntu:~$ env | grep GAZEBO
GAZEBO_RESOURCE_PATH=/usr/share/gazebo-1.4:/usr/share/gazebo_models
GAZEBO_MASTER_URI=http://localhost:11345
GAZEBO_PLUGIN_PATH=/usr/lib/gazebo-1.4/plugins
GAZEBO_MODEL_DATABASE_URI=http://gazebosim.org/models

I have also triple checked paths and the like. Any suggestions would be very welcome as I would rather not have to do an OS reinstall as others have done to fix various issues.
If gazebo is called, the program crashes without an errors, sometimes it will get as far as the UI which will then go dark and crash, again without any errors. If gzclient is called after a successful gzserver or if gzmaster is called alone, we get the same result.
Thanks in advance and please let me know if there are further details you require. Again, sorry for posting this here in this format, however, I thought it better than starting a new question about the same issue.

Originally posted by treanorj with karma: 26 on 2013-02-06
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by nkoenig on 2013-02-06:
What is the output of: glxinfo | grep "direct rendering:"
Comment by treanorj on 2013-02-07:
@nkoenig Hi, thanks for the quick reply. The output is:
direct rendering: Yes
Comment by nkoenig on 2013-02-07:
can you open two terminals. In one terminal run gdb gzserver and in the other gdb gzclient. When gzclient fails, type bt at the gdb prompt. Post the out of the bt command.
Comment by treanorj on 2013-02-07:
Ok, so I have gdb gzserver happily working away in the first terminal, and in the second, I have gdb gzclient however while no gazebo comes up there does not seem to be a specified failure. When I type bt I get "No stack".
Comment by nkoenig on 2013-02-07:
What happens when you just run gzclient in a terminal. Make sure that no gzserver is running.
Comment by treanorj on 2013-02-07:
Running gzserver alone waits at the
Msg Waiting for master line
Comment by nkoenig on 2013-02-07:
Did you mean "Running gzclient"?
Comment by treanorj on 2013-02-07:
Yes, sorry, I mean running gzclient
Comment by nkoenig on 2013-02-07:
Can you try running the pr2.world: gzserver worlds/pr2.world in one terminal, and in another terminal: gztopic view /gazebo/default/pr2/head_tilt_link/head_mount_sensor/image? The gztopic view command should open a window with a greyscale image.
Comment by treanorj on 2013-02-07:
Before I get to the gztopic point, after I start gzserver worlds/pr2.world I get the usual
Msg Waiting for master
Msg Connected to gazebo master @ http://127.0.0.1:11345
Msg Publicized address: 192.168.1.56
Then multiple lines of the same warning:
Warning [ODEJoint.cc:116] joint friction not implemented
Which finishes then with a Segmentation fault (core dumped)
Apologies in the format of my replies, I don't know fully the wiki syntax.
Comment by nkoenig on 2013-02-07:
In one terminal, first run ulimit -c unlimited. Then run gzserver worlds/pr2.world. The segfault should occur, and a new file will be created called core. Then run gdb /usr/bin/gzserver core. At the gdb prompt, type bt. Post this output in a new answer block so that it's more readable. Thanks.

