Q:

actionlib feedback move_base

Dear all.
I have navigation stack implemented and I can send some goals to the move base.
I just want to cancel a goal before it reaches its position using feedback.
How can I use feedback?
I have use the following code, but it doesnt work.
ac.sendGoal(goal, &feedbackCb);
void  Pose_Goal::feedbackCb(const move_baseFeedbackConstPtr& feedback){
ROS_INFO("[X]:%f [Y]:%f",feedback->base_position.pose.position.x, feedback->base_position.pose.position.y);
}
any help I would appreciate it. Thanks in advance

Originally posted by acp on ROS Answers with karma: 556 on 2013-07-18
Post score: 0

Original comments
Comment by thebyohazard on 2013-07-18:
"It doesn't work" is pretty vague. Is it not compiling or is it compiling but not functioning as you intend it to? If it isn't compiling, you should put the error message from the compiler in the question next time. In this case, it looks like you didn't name a type for feedbackX_ and feedbackY_.

A:

Have a look at the api. The first function passed into sendGoal is the doneCB and only gets executed when the action server sends a result message.  You'll need to use all the arguments instead of relying on the defaults. Something like
ac.sendGoal(goal, &doneCb, &activeCb, &feedbackCb);

EDIT: here's the code you said you used.
ac.sendGoal(goal,boost::bind(&Pose_Goal::doneCb, this, _1, _2), Client::SimpleActiveCallback(),Client::SimpleFeedbackCallback());

void Pose_Goal::feedbackCb(const move_base_msgs::MoveBaseFeedbackConstPtr &feedback){ 
    ROS_INFO("[X]:%f [Y]:%f [W]: %f",feedback->base_position.pose.position.x,feedback->base_position.pose.position.y,feedback->base_position.pose.orientation.w); 
}

You need to pass your feedback function to sendGoal. Client::SimpleFeedbackCallback() is the default, do-nothing feedback callback. Put a reference or boost pointer to your Pose_Goal::feedbackCb instead.

Originally posted by thebyohazard with karma: 3562 on 2013-07-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by acp on 2013-07-19:
hi, well I have done the following:    ac.sendGoal(goal,boost::bind(&Pose_Goal::doneCb, this, _1, _2), Client::SimpleActiveCallback(),Client::SimpleFeedbackCallback());
Comment by acp on 2013-07-19:
void  Pose_Goal::feedbackCb(const move_base_msgs::MoveBaseFeedbackConstPtr &feedback){
ROS_INFO("[X]:%f [Y]:%f [W]: %f",feedback->base_position.pose.position.x,feedback->base_position.pose.position.y,feedback->base_position.pose.orientation.w);
}
Comment by acp on 2013-07-19:
But I can not get the position over feedbackCb, just wondering how to get the current position from feedbackCb
Comment by Dimi on 2020-04-21:
Did you find a way to solve that issue regarding the modification of goal using feedback, eventually ??

