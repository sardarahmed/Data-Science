Q:

Calling a rosservice with args from a launch file

Hello there ! Hope u are doing well,
I'm trying to call a rosservice directly from a launch file, i used this questions to write my own node and it turned out like that:
<node pkg="rosservice" type="rosservice" name="chg_ctrl" args="call --wait /controller_manager/switch_controller 
    start_controllers:[joint_group_vel_controller]
    stop_controllers:[scaled_pos_joint_traj_controller]
    strictness:1
    start_asap:false
    timeout:0.0" />

It is almost working because i get this message:
ERROR: Incompatible arguments to call service:
Field [start_controllers] must be a list or tuple instead of: str
Provided arguments are:
 * start_controllers:[joint_group_vel_controller] (type str)
 * stop_controllers:[scaled_pos_joint_traj_controller] (type str)
 * strictness:1 (type str)
 * start_asap:false (type str)
 * timeout:0.0 (type str)

Service arguments are: [start_controllers stop_controllers strictness start_asap timeout]
I tried a couple of things and I can't get rid of this error, did anyone already tried someting like that ?

Originally posted by Benjamin C on ROS Answers with karma: 40 on 2022-02-16
Post score: 1

A:

I think the following method of using &quot; to represent double quotation marks will work well.
<node pkg="rosservice" type="rosservice" name="chg_ctrl" args="call --wait /controller_manager/switch_controller 
    &quot;{ start_controllers: [joint_group_vel_controller],
    stop_controllers: [scaled_pos_joint_traj_controller],
    strictness: 1,
    start_asap: false,
    timeout: 0.0 }&quot;" />

Originally posted by miura with karma: 1908 on 2022-02-19
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Benjamin C on 2022-02-21:
HI Miura, thank you for your suggestion !
Using your code it definitely improved the result but not quite enough:
ERROR: Incompatible arguments to call service:
No field name [strictnes:1]
Provided arguments are:
 * {'start_controllers': ['joint_group_vel_controller'], 'stop_controllers': ['scaled_pos_joint_traj_controller'], 'strictnes:1': None, 'start_asap:false': None, 'timeout:0.0': None} (type dict)

Comment by miura on 2022-02-21:
Thank you for trying.
You may need a space after the colon.
I have updated the answer.
Comment by Benjamin C on 2022-02-23:
And now it does work !!! Thank you very much !
Could you just edit your answer to add the missing "s" at strictnes: 1 please ?
Have a great day !
Comment by miura on 2022-02-23:
Congratulations! The missing "s" has been added. Thanks for pointing it out.

