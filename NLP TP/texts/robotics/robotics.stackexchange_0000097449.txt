Q:

Utility to Record Sensor Data after Safety Event

During robot operations there may be a safety event that interrupts the process and should be documented. The prior 10-20 seconds of sensor data (lidar, odom, vision) would be good documentation about the event and we would like to have this data saved to the disk after the safety event is triggered.
Is there any pre-existing utility (particularly related to bag files) that can be used to produce this behavior (i.e. save the last 20 seconds of sensor data to disk after a boolean condition is triggered)?
Thanks so much!

Originally posted by JackB on ROS Answers with karma: 977 on 2020-10-30
Post score: 1

A:

It's not safety-rated, but ros/rosbag_snapshot seems like it would cover your use-case:

Solution for this ros_comm issue which acts similarly to the deprecated rosrecord -s command but with additional features. It is added as a new package here rather than patching rosbag based on the discussion here.
It subscribes to topics and maintains a buffer of recent messages like a dash cam. This is useful in live testing where unexpected events can occur which would be useful to have data on but the opportunity is missed if rosbag record was not running (disk space limits make always running rosbag record impracticable). Instead, users may run snapshot in the background and save data from the recent past to disk as needed.

Note: rosbag_snapshot has been released into both Kinetic, Melodic and Noetic, so no need to build it from source (sudo apt install ros-*-rosbag-snapshot should work on supported platforms).

Originally posted by gvdhoorn with karma: 86574 on 2020-10-31
This answer was ACCEPTED on the original site
Post score: 1

