Q:

Rosserial install - missing dependencies

Trying to install Rosserial by following the rosserial_arduino tutorial. Using hydro and ubuntu 12.04.
Every previous step worked fine, but when I get to actually installing the ros_lib using "rosrun rosserial_arduino make_libraries.py ." in ~/sketchbook/libraries, I get a failed to generate warning.
Scrolling up, I have several missing dependency warnings that afaik aren't missing.
There are a several but all but 1 of them are cmake_modules so I'll just copy an example of each type:
    [rqt_rviz]: Unable to find dependency: cmake_modules
ROS path [0]=/opt/ros/hydro/share/ros
ROS path [1]=/home/khitrir/catkin_ws/install/share
ROS path [2]=/home/khitrir/catkin_ws/install/stacks
ROS path [3]=/opt/ros/hydro/share
ROS path [4]=/opt/ros/hydro/stacks. Messages cannot be built.

[xacro]: Unable to find dependency: roslint
ROS path [0]=/opt/ros/hydro/share/ros
ROS path [1]=/home/khitrir/catkin_ws/install/share
ROS path [2]=/home/khitrir/catkin_ws/install/stacks
ROS path [3]=/opt/ros/hydro/share
ROS path [4]=/opt/ros/hydro/stacks. Messages cannot be built.

The actual warning at the end is as follows:
*** Warning, failed to generate libraries for the following packages: ***
image_view (missing dependency)
carrot_planner (missing dependency)
urdf (missing dependency)
rotate_recovery (missing dependency)
navfn (missing dependency)
dwa_local_planner (missing dependency)
robot_state_publisher (missing dependency)
rqt_rviz (missing dependency)
xacro (missing dependency)
clear_costmap_recovery (missing dependency)
move_base (missing dependency)
gazebo_ros (missing dependency)
collada_urdf (missing dependency)
move_slow_and_clear (missing dependency)

I've followed the tutorial closely, and I've found similar questions where the warnings are for different libraries. In there the answer was just incorrect sourcing, but I've matched the tutorial. One suggested ensuring "source /opt/ros/hydro/setup.bash" was run, which I also tried, to no effect.
The commands run for all but the one with the extra source followed this pattern:
cd <ws>/src
git clone https://github.com/ros-drivers/rosserial.git
cd <ws>
catkin_make
catkin_make install
source <ws>/install/setup.bash
cd <sketchbook>/libraries
rosrun rosserial_arduino make_libraries.py .

Originally posted by khitrir on ROS Answers with karma: 55 on 2015-03-23
Post score: 1

A:

Try a rosdep check --from-paths <ws>/src --ignore-src in a shell where you've sourced /opt/ros/hydro/setup.bash.

Edit:

No luck I'm afraid- Running that line I get:

All system dependencies have been satisified

Ok. And what is the output of rospack find cmake_modules after sourcing <ws>/install/setup.bash?

Running find cmake_modules and that definitely seems to be the problem. Result:

[rospack] Error: stack/package cmake_modules not found

Ok. And what is the output of rospack find cmake_modules after sourcing /opt/ros/hydro/setup.bash?

cmake has been functioning normally though?

The cmake_modules pkg only provides additional scripts for CMake. If your pkgs (or any of your dependencies) don't need them, you won't run into any trouble if they are not there. But I doubt they aren't there.

Originally posted by gvdhoorn with karma: 86574 on 2015-03-23
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by khitrir on 2015-03-23:
No luck I'm afraid- Running that line I get:
All system dependencies have been satisified

Comment by khitrir on 2015-03-23:
Running find cmake_modules and that definitely seems to be the problem. Result:
[rospack] Error: stack/package cmake_modules not found

cmake has been functioning normally though?
Comment by khitrir on 2015-03-26:
I'm not sure I understand your last edit - as in the missing dependencies is incorrect? The failed to install message is incorrect or just that as long as i don't need the referenced libraries I can move ahead?
Unfortunately I'm fairly certain I need at least 2 of the failed libraries.
Comment by gvdhoorn on 2015-03-26:
The cmake_modules pkg only provides scripts used by find_package(..) in CMakeLists.txt. If you don't use those scripts, then it would not matter if they were missing (just a response to:  "cmake has been functioning normally though").
Comment by khitrir on 2015-03-26:
Ah ok. Thanks for the clarification.
Any ideas how to fix the issue cmake_modules?
Comment by gvdhoorn on 2015-03-27:
Well, what is the output of rospack find cmake_modules after sourcing /opt/ros/hydro/setup.bash?
Comment by khitrir on 2015-03-29:
That was what I did with "find" before - the result was [rospack] Error: stack/package cmake_modules not found
Comment by gvdhoorn on 2015-03-29:
Pay attention to the setup.bash file sourced. The first question asks to source your catkin_ws/install space, the second to source the ROS Hydro default setup.bash. The output is identical each time? In that case, make sure you have ros-hydro-cmake-modules installed.
Comment by khitrir on 2015-03-29:
Running apt-cache policy on cmake-modules and roslint both said they were installed. However, looking further it seems they weren't properly there (there was no files anywhere it pointed to. Using the re-install in apt-get, something I'd tried before, didn't work. to be Cont.
Comment by khitrir on 2015-03-29:
I ended up unistalling roslint and cmake_modules manually, restarting and running apt-get update, and then manually installing again.  Now it installed perfectly. I'm unsure why using apt-get install --reinstall and the full ros-desktop reinstalls (inc, a manual one) didn't work before.
Tyvm gvd!
Comment by gvdhoorn on 2015-03-30:
Ok. That is strange. Good to hear it works now though.

