Q:

ekf_localization_node: what frame for IMU?

Hi there, I am trying to fuse GPS with IMU information with ekf_localization_node.    For now I have tied by map and odom frames to be always the same, so I assume that GPS is giving absolute map positions, and report them in the map frame.   I am confused about the IMU though:    it's heading estimate should be in the map frame as it's absolute, but it's motion estimates should be in the base_link frame because they are relative to the robot.    The imu message only has a single frame_id, so which should I set it to?    Or do I perhaps need to send two copies of the imu message with two different frames there, and set up ekf_localization_node to only attend to the relevant measurements in each?

Originally posted by charles.fox on ROS Answers with karma: 120 on 2015-09-10
Post score: 0

A:

Ah, you've stumbled upon the ol' "in what frame is IMU data reported" issue. See these:

http://answers.ros.org/question/50870/what-frame-is-sensor_msgsimuorientation-relative-to/
http://answers.ros.org/question/200480/imu-message-definition/
https://github.com/ros-infrastructure/rep/pull/95

In ekf_localization_node, I assume the frame_id in the message is the frame in which the sensor is mounted, so you should produce a base_link->imu transform (try using static_transform_publisher).

Originally posted by Tom Moore with karma: 13689 on 2015-09-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by charles.fox on 2015-09-11:
Thanks Tom, good to hear that from the source!

