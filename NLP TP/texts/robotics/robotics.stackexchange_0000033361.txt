Q:

Waiting on transform from /base_link to /map?

In http://www.ros.org/reps/rep-0105.html
says "map --> odom --> base_link"
and "Although intuition would say that both map and odom should be attached to base_link, this is not allowed because each frame can only have one parent."
In tf src,I have built two connections
    tf::Transform(tf::Quaternion(0,0,0, 1), tf::Vector3(0, 0, 0)),
    ros::Time::now(),"base_link", "base_laser")

    tf::Transform(tf::Quaternion(0,0,0, 1), tf::Vector3(20, 0, 0)),
    ros::Time::now(),"base_link", "odom")

If I write map->odom,it will says contain a loop.I don't know why.
    tf::Transform(tf::Quaternion(0,0,0, 1), tf::Vector3(0, 0, 0)),
    ros::Time::now(),"odom", "map")

My robot.launch says
  [ WARN] [1311950065.207360272]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: Could not find a connection between '/map' and '/base_link' because they are not part of the same tree.Tf has two or more unconnected trees.

What happened to base_link with two parents?
Why map->odom will contain a loop?
How to fix all the problems?
Thank you~

Originally posted by sam on ROS Answers with karma: 2570 on 2011-07-29
Post score: 0

Original comments
Comment by Eric Perko on 2011-07-29:
The output of rosrun tf view_frames can be very helpful for debugging this type of problem. I suggest you run it while everything is running and attach the PDF here.

A:

You are broadcasting those code-sniplets (for testing!), right?
You have to build a tree, or in this case a line as:
map -> odom -> base_link -> base_laser
If you look at the code sniplets you have posted, you can see, that you interchanged parent and child a bid.
You also have to continuously publish all transforms and later on obviously with real data.
If that doesn't help follow the comment by Eric Perko.

Originally posted by dornhege with karma: 31395 on 2011-07-29
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by sam on 2011-07-30:
Yeah,it's only for testing. And I am not really understand that what's the difference between "map->odom" and "odom->map"?

