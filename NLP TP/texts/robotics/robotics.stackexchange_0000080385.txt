Q:

Turtlebot minimal.launch not working with Jetson TK1

Hi all
After re-flashing my Jetson TK1 to 21.4, installing ROS and Turtlebot per the wiki, minimal.launch no longer brings up the Turtlebot with the expected chime.
The last few lines I get before the system hangs is
process[turtlebot_laptop_battery-8]: started with pid [13498]
process[capability_server-9]: started with pid [13506]
process[app_manager-10]: started with pid [13510]
process[master-11]: started with pid [13517]
process[interactions-12]: started with pid [13527]
process[zeroconf/zeroconf-13]: started with pid [13532]
[WARN] [WallTime: 1492941706.791976] Battery : unable to check laptop battery info [/sys/class/power_supply/BAT0/charge_full_design || /sys/class/power_supply/BAT0/energy_full_design does not exist]
[ INFO] [1492941707.253415215]: Zeroconf: service successfully established [turtlebot][_ros-master._tcp][11311]
[turtlebot_laptop_battery-8] process has finished cleanly
log file: /home/ubuntu/.ros/log/da9c7bfa-280b-11e7-ae6c-74da385e01c9/turtlebot_laptop_battery-8*.log

Looking inside the log file shows:
[rospy.client][INFO] 2017-04-23 18:01:46,635: init_node, name[/turtlebot_laptop_battery], pid[13498]
[xmlrpc][INFO] 2017-04-23 18:01:46,647: XML-RPC server binding to 0.0.0.0:0
[xmlrpc][INFO] 2017-04-23 18:01:46,647: Started XML-RPC server [http://192.168.0.14:44254/]
[rospy.init][INFO] 2017-04-23 18:01:46,647: ROS Slave URI: [http://192.168.0.14:44254/]
[rospy.impl.masterslave][INFO] 2017-04-23 18:01:46,651: _ready: http://192.168.0.14:44254/
[xmlrpc][INFO] 2017-04-23 18:01:46,658: xml rpc node: starting XML-RPC server
[rospy.registration][INFO] 2017-04-23 18:01:46,659: Registering with master node http://localhost:11311
[rospy.init][INFO] 2017-04-23 18:01:46,751: registered with master
[rospy.rosout][INFO] 2017-04-23 18:01:46,752: initializing /rosout core topic
[rospy.rosout][INFO] 2017-04-23 18:01:46,757: connected to core topic /rosout
[rospy.simtime][INFO] 2017-04-23 18:01:46,762: /use_sim_time is not set, will not subscribe to simulated time [/clock] topic
[rosout][WARNING] 2017-04-23 18:01:46,791: Battery : unable to check laptop battery info [/sys/class/power_supply/BAT0/charge_full_design || /sys/class/power_supply/BAT0/energy_full_design does not exist]
[rospy.core][INFO] 2017-04-23 18:01:46,793: signal_shutdown [Battery : unable to check laptop battery info [/sys/class/power_supply/BAT0/charge_full_design || /sys/class/power_supply/BAT0/energy_full_design does not exist]]
[rospy.impl.masterslave][INFO] 2017-04-23 18:01:46,803: Battery : unable to check laptop battery info [/sys/class/power_supply/BAT0/charge_full_design || /sys/class/power_supply/BAT0/energy_full_design does not exist]
[rospy.core][INFO] 2017-04-23 18:01:47,793: signal_shutdown [atexit]

Previously I was able to run the Turtlebot with the Jetson with no issue even though there was a warning because the Jetson TK1 obviously doesn't have a battery. It looks like now some kind of shutdown signal is being sent when the BAT0 file isn't found. Has anyone experienced this?
Cheers
Will

Originally posted by wjvh on ROS Answers with karma: 58 on 2017-04-23
Post score: 0

A:

Managed to solve this - not sure which step exactly was the fix but as I've been having trouble getting Turtlebot set up with the TK1 lately I've laid out the steps below in case anyone else is going through this process:
NB. Note that order here seems to be important

Flash with Jetpack 2.2 (this is the 21.4 L4T) - make sure to uncheck the OpenCV installation, it's too new for ROS
Perform the kernel tweaks needed to run the Realsense camera - even if you're not using it - ros-indigo-turtlebot & associated packages won't install without citing uvcvideo errors http://www.jetsonhacks.com/2016/06/20/intel-realsense-camera-installation-nvidia-jetson-tk1/
Install ROS using the ROS for ARM scripts provided here https://github.com/jetsonhacks/installROS - make sure to do the network configuration http://wiki.ros.org/turtlebot/Tutorials/indigo/Network%20Configuration
Then install Turtlebot the normal way http://wiki.ros.org/turtlebot/Tutorials/indigo/Turtlebot%20Installation
Then install the Grinch kernel https://github.com/jetsonhacks/installGrinch
Make sure Kobuki is the only FTDI device plugged in and run the Kobuki udev setup http://wiki.ros.org/turtlebot/Tutorials/indigo/Kobuki%20Base

This worked for me - Turtlebot/Jetson TK1 on L4T 21.4/ROS Indigo - not sure if I was having a udev issue, an issue with current draw from using the Jetsonhacks postFlash script which maxes CPU usage, or just made a configuration mistake. If I was braver I might try all this with Jetpack 3.0 and ROS Kinetic as dependencies are starting to become tricky with this setup - if anyone else has had success let me know!
W

Originally posted by wjvh with karma: 58 on 2017-04-23
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by db on 2017-08-03:
What is the grinch kernel for exactly? Also, the link you posted is for version 21.3... not sure if it will work right on or need some adjustment.
Comment by db on 2017-08-04:
Oh... after installing the grinch kernel I lost the UVCvideo module, so you can't really use this method with the r200 camera... I'm lost.

