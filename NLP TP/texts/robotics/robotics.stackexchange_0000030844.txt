Q:

Changing opencv2 installation options & recompiling

Hi,
I'd like to rebuild the opencv2 package with ffmpeg turned on (default is off). I used roscd to switch to opencv2 and sudo-edited the Makefile to turn the ffmpeg flag on. But now I don't know how to recompile the package. I tried renaming ROS_NOBUILD, but then rosmake gives me error about not having permission to rm several files.
Any suggestions on how to recompile?
~Robin

Originally posted by Robin on ROS Answers with karma: 87 on 2011-04-04
Post score: 2

A:

It's not a good idea to modify the system installation of a package.  For one thing, it's an artifact of the current deb packaging system that the sources are still available to be rebuilt; in the future, installed packages will contain just the pieces needed to use the package, not the sources.  More importantly, if you rebuild opencv2, then you should rebuild all packages that depend on it, to avoid getting into an inconsistent state.  While you might be ok in this case if you're only changing the contents of a shared library, it's a slippery slope, and inconsistent builds are a pain to debug.
Instead, you should create an overlay of the stacks that you want to modify and add it to your package path.  In this case, you'd check out from source vision_opencv and all the stacks you're using that depend (directly or indirectly) on vision_opencv, then make changes to opencv2 and rebuild everything.  rosinstall is a good tool to help you manage the contents of the overlay (but as far as I know there's no way automatically construct an appropriate rosinstall file for a given overlay situation).

Originally posted by Brian Gerkey with karma: 2916 on 2011-04-05
This answer was ACCEPTED on the original site
Post score: 2

