Q:

"Error [Joint.cc:408] Invalid joint index [2] when trying to apply force" with Gazebo 1.3

When spawning a URDF model using some custom controller plugins I get
Error [Joint.cc:408] Invalid joint index [2] when trying to apply force

spammed to the terminal when I spawn it using Gazebo 1.3 in Groovy (using .debs from the shadow-fixed repo). The controller plugins worked fine with fuerte before. Before I try delving deep into the differences between Gazebo plugin interfaces: Has anyone else encountered this and can provide some hints on where to look first?
The model otherwise appears to work (sensor data streaming for example).

Originally posted by Stefan Kohlbrecher on Gazebo Answers with karma: 473 on 2013-01-31
Post score: 0

A:

In older version of gazebo (1.0.x) that was in fuerte, index was ignored inside of ODEHingeJoint::SetForce):

void ODEHingeJoint::SetForce(int /*index*/, double _torque)
{
  if (this->childLink)
    this->childLink->SetEnabled(true);
  if (this->parentLink)
    this->parentLink->SetEnabled(true);
  dJointAddHingeTorque(this->jointId, _torque);
}

In latest groovy, ODEHigneJoint::SetForce was fixed to use the index correctly, thus exposing the bug you are seeing.

Originally posted by hsu with karma: 1873 on 2013-02-05
This answer was ACCEPTED on the original site
Post score: 2

