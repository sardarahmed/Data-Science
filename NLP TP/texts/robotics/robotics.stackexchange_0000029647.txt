Q:

problem in gpsd_client tutorials

Hi,
My name is Avinash Thiruvayipati, a graduate student in ASU.I am trying to work out gpsd_client tutorial.the link of the tutorial is http://www.ros.org/wiki/gpsd_client/Tutorials/Writing%20a%20Subscriber%20for%20gpsd_client%20%28C%2B%2B%29.
When trying to implement the tutorial it is not giving gps data.I mean according to the tutorial it should print the current gps latitude and longitude.So it is not able to subscribe to the fix message in gpsd_client.The code looks good to me.Could you please help me find where I am going wrong

Originally posted by avin111 on ROS Answers with karma: 83 on 2011-02-17
Post score: 2

A:

The relevant topic names and message types have been shuffled a bit since that tutorial was last updated. You'll want to replace gps_common::GPSFix with gps_common::NavSatFix (or sensor_msgs::NavSatFix if you're using Diamondback), and your #include should point to gps_common/NavSatFix.h. You'll also need to have a <depend package="gps_common"/> line in your package's manifest.xml. If you're using Cturtle, set gpsd_client's ~report_as parameter to "navsat".
#include <ros/ros.h>
// Change following lines to "gps_common" if you're using Cturtle
#include <sensor_msgs/NavSatFix.h>
#include <sensor_msgs/NavSatStatus.h>
using sensor_msgs;

void callback(const NavSatFixConstPtr &fix) {
  if (fix->status.status == NavSatStatus::STATUS_NO_FIX) {
    std::cout << "Unable to get a fix on the location." << std::endl;
    return;
  }
  
  std::cout << "Current Latitude: " << fix->latitude << std::endl;
  std::cout << "Current Longitude " << fix->longitude << std::endl;
}

int main(int argc, char **argv) {
  ros::init(argc, argv, "gps_subscriber");
  ros::NodeHandle nh;

  ros::Subscriber gps_sub = nh.subscribe("fix", 1, callback);

  ros::spin();
  return 0;
}

Originally posted by Ken with karma: 438 on 2011-02-17
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Ken on 2011-02-21:
@avin111 Updated with Cturtle instructions to match my e-mail. @Eric Perko Thanks, I've added /cturtle and /diamondback documentation to the wiki.
Comment by avin111 on 2011-02-18:
I did'nt switch to diamond back yet.I am using cturtle instead.So what are the message types in cturtle that has changed from gps_common::GPSFix.Thanks for the help.
Comment by Eric Perko on 2011-02-17:
So gpsd_client has been switch to Diamondback only support? If so, perhaps this should be documented and isn't? This WikiMacro should help you out with that: http://www.ros.org/wiki/WikiMacros#Version

