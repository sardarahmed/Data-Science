Q:

Map Display: Use different frame then /map

Hi,
I might have a very simple question but haven't found the solution yet. I am using Map display to visualize the Occupancy Grid type of message. Occupancy grid's frame should be centered at the vehicle (in-vehicle local frame e.g. like in an AV's occupancy grid visualizations).
However, in my stack, someone is already using /map frame to define the global frame of the world map, i.e. it doesn't translate with the vehicle.
Question is how can I change the frame used in Map display in rviz so I could use some newly defined frame, e.g. /local_vehicle_tf, rather than /map? Should I just define my new type of display in rviz? That seems to be overkill just to change the frame.
It's kind of a simple question but I haven't figured it out.
Thanks

Originally posted by BenQ1110 on ROS Answers with karma: 36 on 2019-11-12
Post score: 0

A:

There's no need to make a new type of display in Rviz. Instead, there are 3 simple things to do:

Make sure the occupancy grid message you publish contains the correct frame name in the header (eg. /local_vehicle_tf)

In RViz in the map display settings, make sure the "topic" field is set to listen to this new occupancy grid topic and not the one publishing the world map.

Change the "Fixed Frame" field in Global Options to your new frame ("/local_vehicle_tf")

That should be enough to display your local "map" and any other data that can be transformed into that frame. Eventually, you will want to make sure that this new TF frame is connected to the other frames in your robot. For instance, you could have a transform between the global map frame and your local_vehicle_tf frame. When you have a fully connected transform tree, step 3 is no longer necessary.
One last thing, the /local_vehicle_tf frame sounds like the frame that's normally called "baselink" (See https://www.ros.org/reps/rep-0105.html). You might want to use the standard name if that is correct for your situation.

Originally posted by Carl D with karma: 303 on 2019-11-12
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by BenQ1110 on 2019-12-02:
Thanks! That solves it.

