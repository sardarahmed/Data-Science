Q:

gscam core dumped with ximagesrc

Hi,
I want to use gscam for capturing a window image.
First, I have perfomed a simple test with:
$ export GSCAM_CONFIG="videotestsrc ! video/x-raw-rgb,framerate=5/1 ! ffmpegcolorspace"
And it works nicely. So I have set:
$ export GSCAM_CONFIG="ximagesrc xname=TurtleSim ! video/x-raw-rgb,framerate=5/1 ! ffmpegcolorspace"
But it fails :
[ INFO] [1374835465.214957489]: Publishing stream...
[ INFO] [1374835465.215447284]: Started stream.
Segmentation fault (core dumped)
It seems to be the std::copy from the buffer to the image.

Originally posted by Enric on ROS Answers with karma: 16 on 2013-07-26
Post score: 0

A:

I have figured it out a little bit.
It turns out that gray images do work, with this config:
GSCAM_CONFIG="ximagesrc xname=TurtleSim ! autoconvert ! video/x-raw-gray,framerate=1/1 "
and running gscam in MONO8 mode.
My guess is that the output format from ximagesrc is 32bpp whereas gscam expects 24bpp, so the buffer is overrun.
I haven't been able to make a conversion in the pipeline, but anyway gray images are fine :-)

Originally posted by Enric with karma: 16 on 2013-07-26
This answer was ACCEPTED on the original site
Post score: 0

