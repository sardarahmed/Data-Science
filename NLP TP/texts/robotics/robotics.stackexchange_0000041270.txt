Q:

problem with visualizing laserscan message on android

Hi,
I am trying to visualize laserscan message on android according to the ros_android_teleop_tutorial. However, what I got was always a dotted diagonal no matter what bag file I use.
I try to modify LaserScanLayer and log the vertices I receive. I do it like this:
String msg = "";
...
public void onNewMessage(LaserScan laserScan) {
    ...
    for (int i = 0; i < ranges.length; i++) {
    ...
        msg += "(" + vertices[3 * i + 3] + "," + vertices[3 * i + 4] + "," + vertices[3 * i + 5]+ ")\n";
    ...
    }
    Log.i(TAG, msg);
}

However, according to the log, it seems that the program can not go through the whole for loop, but been cut rudely in the midway. If the ranges.length is 380, only about half of it can be logged, which is shown in the msg log below.
Each complete msg looks like the following, at the end of which we can see that the msg is cut rudely :
06-11 10:09:24.197: I/LaserScan(664): (-1.7374197,-1.7374197,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7249954,-1.7553679,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-13.893168,-14.386794,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-13.767094,-14.507485,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-13.63997,-14.627071,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.1781359,-2.3770168,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.1432586,-2.3803282,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.102527,-2.3764727,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.0666199,-2.3773723,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.0302088,-2.3770669,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.992676,-2.3747764,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.9540671,-2.3704703,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.988056,-2.4550416,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.9603313,-2.4644709,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.9011965,-2.433417,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.8567567,-2.4197686,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.838579,-2.4398727,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7981837,-2.4301014,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7833744,-2.4545996,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.781049,-2.4969337,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7838547,-2.5476031,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7944058,-2.6108708,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7983943,-2.6662228,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7899609,-2.704329,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7951585,-2.7642944,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.8096522,-2.8405771,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.8171192,-2.9079902,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-10.449994,-17.05279,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-10.300785,-17.143332,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-10.150792,-17.232569,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-10.000026,-17.320494,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-9.848498,-17.407099,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-9.69622,-17.492378,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-9.543204,-17.576326,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-9.389461,-17.658936,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-9.235003,-17.7402,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-9.079842,-17.820114,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-8.923989,-17.89867,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-8.767457,-17.975864,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-8.610257,-18.05169,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-8.452401,-18.126139,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-8.293901,-18.19921,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-8.134771,-18.270893,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-7.9750204,-18.341185,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-7.814663,-18.41008,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-7.65371,-18.477573,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-7.492174,-18.54366,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-7.330068,-18.608334,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-7.167403,-18.67159,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-7.0041933,-18.733427,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-6.8404493,-18.793835,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-6.6761847,-18.852814,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-6.5114117,-18.910355,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-6.346143,-18.966457,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-6.180391,-19.021114,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-6.014168,-19.074322,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-5.847487,-19.12608,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-5.6803613,-19.176378,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-5.512802,-19.225218,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-5.344824,-19.272593,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-5.1764383,-19.3185,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-5.0076585,-19.362938,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-4.8384976,-19.4059,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-4.6689677,-19.447384,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-4.499083,-19.487387,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-4.328855,-19.525906,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-4.1582975,-19.562939,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-3.9874237,-19.59848,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-3.816246,-19.63253,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-3.6447778,-19.665085,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-3.4730318,-19.696142,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-3.3010216,-19.7257,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-3.1287596,-19.753756,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.9562597,-19.780306,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.7835345,-19.805351,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.6105974,-19.828888,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.4374616,-19.850914,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.2641401,-19.871428,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-2.090646,-19.89043,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.9169929,-19.907917,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.7431937,-19.923887,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.5692619,-19.938341,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.3952105,-19.951275,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.2210528,-19.96269,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-1.0468022,-19.972586,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-0.8724718,-19.98096,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-0.698075,-19.987814,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-0.5236251,-19.993145,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-0.34913522,-19.996952,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-0.17461881,-19.999237,0.0)
06-11 10:09:24.197: I/LaserScan(664): (-8.90891E-5,-20.0,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.17444064,-19.999239,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.34895706,-19.996956,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.5234469,-19.993149,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.69789696,-19.98782,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.87229383,-19.980968,0.0)
06-11 10:09:24.197: I/LaserScan(664): (1.0466242,-19.972595,0.0)
06-11 10:09:24.197: I/LaserScan(664): (1.2208749,-19.962702,0.0)
06-11 10:09:24.197: I/LaserScan(664): (1.3950328,-19.951288,0.0)
06-11 10:09:24.197: I/LaserScan(664): (1.5690843,-19.938354,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.12804464,-1.4636403,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.13429722,-1.394803,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.13998589,-1.3319415,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.14266515,-1.2522126,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.1484715,-1.2092549,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.15249619,-1.15837,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.15800932,-1.1243376,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.15777165,-1.055713,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.15963258,-1.0079154,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.16413516,-0.98086554,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.16401578,-0.9302094,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.17012489,-0.9179399,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.17031612,-0.87622637,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.17019252,-0.83654696,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.1749954,-0.8233114,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.17590782,-0.7934903,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.1801313,-0.78025484,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18041043,-0.75148267,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18044455,-0.72374153,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18375632,-0.7105502,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18556163,-0.6925419,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18600206,-0.67071736,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18855049,-0.6575687,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18437488,-0.6224531,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.1895084,-0.6198676,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.18592508,-0.58969176,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19044858,-0.5861529,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19555639,-0.5844686,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19222337,-0.55826867,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19476277,-0.55000424,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19479188,-0.535197,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19841,-0.53068215,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19733277,-0.51407945,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19707668,-0.50031793,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19845822,-0.49121073,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19779739,-0.47753417,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.19652855,-0.4630009,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.20333095,-0.46763784,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.20175499,-0.45315745,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.1978919,-0.43424207,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.20502399,-0.43968332,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.20245545,-0.4244643,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.20137845,-0.41289437,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.20364946,-0.40846488,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.20361409,-0.39962217,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.2034424,-0.39081606,0.0)
06-11 10:09:24.197: I/LaserScan(664): (0.21009323,-0.3951348,0.0)
06-11 10:09:24.197: I/LaserScan(664): (9.543

Does anyone have any idea why this happened? Is it the reason why I alway got a dotted diagonal on LaserScanLayer.

Originally posted by ira on ROS Answers with karma: 106 on 2012-06-11
Post score: 1

Original comments
Comment by ch1bo on 2012-06-11:
The vertices should be okay if you look at the coordinates (they lie not on a line)! Regarding the limited log you might ran into maximum log size (does that exist?) or the thread got interrupted? .. As I am working also on visualizing Laserscans: Do you experience a delay on your method calls?
Comment by ira on 2012-06-11:
Hi, thanks for the answer. The weird thing is that sometimes there will be some big blue triangles on the screen, which doesn't look like what I want. Do you also have something like that?
Comment by ira on 2012-06-11:
As for the delay, right now I am developing on the emulator now, the performance is not good, what i am doing now is just present the laser scan on screen. So I am not sure about your question. Or can you specify more what kind of delay is that?
Comment by ch1bo on 2012-06-18:
The visualization tutorial normally takes laserscan messages, converts the range values with their angles into vertices and draws a blue triangle-fan with opengl.
Comment by ch1bo on 2012-06-18:
Regarding the delay: I was reading lasercan msgs at 40Hz and the device couldn't cope with that amount because of performance issues in rosjava, which means that messages came in faster than they can be processed! I could resolve it somewhat by using different different string processing methods.

A:

As I thought you most likely ran into the limit of maximum length Logcat messages -> http://stackoverflow.com/questions/8888654/android-set-max-length-of-logcat-messages

Originally posted by ch1bo with karma: 51 on 2012-06-11
This answer was ACCEPTED on the original site
Post score: 0

