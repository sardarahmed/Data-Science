Q:

Turtlebot AMCL help

Hello,
My primary objective is to construct a scenario where AMCL/navigation stack would be used for 2d path planning for a Turtlebot using simulation. I currently have the turtlebot simulator from ROS Hydro. If I run that, and then "rosrun amcl amcl" and "rosrun map_server map_server "my_previously_constructed_map".yaml", I can see the map, base_link, an empty /scan topic, etc. in rviz. Of course, I can only set the initial pose, nothing moves if I set a goal.
So I have a few questions, and I'd be thankful if I can get some clarifications:

How would AMCL/nav stack work through the simulator (if it even does), because there is no valid laser scan data?
Is there a way where I can just see the solution path (in rviz) from the navigation stack through this simulated setup I have? The robot does not even have to move. This is a question because I do not have access to the turtlebot hardware: and amcl_demo, which incorporates move_base, does not run when the robot is not connected.
How should I go about, if I want to modify the path planning operation for the turtlebot? For instance, writing a custom code that feeds it a certain pattern of goals one by one, etc.

Thank you for your time.
Sai

Originally posted by SaiHV on ROS Answers with karma: 275 on 2013-08-27
Post score: 0

Original comments
Comment by jorge on 2013-08-27:
Assuming you are using Hydro sources.... I'm just now preparing a couple of demos on this:  build a 2D map of a Gazebo's virtual world, and then use it to navigate the world. Hopefully today all will be commited on https://github.com/turtlebot/turtlebot_simulator. I'll then post a detailed answer.
Comment by jorge on 2013-08-27:
Done. You can try gmapping_demo.launch and amcl_demo.launch. But I cannot update wiki tutorials now due to current migration.
Comment by SaiHV on 2013-08-28:
Thank you! I'll give them a try.
Comment by SaiHV on 2013-08-28:
Hi jorge, the demo files did work, and I was able to see the path. Is there some way to load a custom map into gazebo? Because I tried my map with amcl and move base; and the turtlebot just walked through obstacles: I assume it's because the fake /scan doesn't account for them?

A:

Now I can upgrade my post to an answer. We have created a turtlebot simulator tutorial that should answer to questions 1 and 2. Update the code and gazebo packages, as we made tons of changes in the last days.
And please, please, please report whatever fails or is bad explained. Thank you!
Question 3 goes out of the scope of the tutorial, but the fast answer is to create your own global planner plugin for the move_base node. I think the easiest way to do so is to duplicate the simple carrot planner and modify at your will.

Originally posted by jorge with karma: 2284 on 2013-08-29
This answer was ACCEPTED on the original site
Post score: 1

