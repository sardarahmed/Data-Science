Q:

turtlebot SCI Problem

Hi,
I am getting this kind of data when i do rostopic list on my workstation
rex@ubuntu:~$ export ROS_MASTER_URI=http://turtlebot-laptop:11311
rex@ubuntu:~$ rostopic list
/cmd_vel
/diagnostics
/imu/data
/imu/raw
/joint_states
/odom
/rosout
/rosout_agg
/turtlebot_node/parameter_descriptions
/turtlebot_node/parameter_updates
/turtlebot_node/sensor_state

And when I try to use the Dash board it says :
Failed to put the turtlebot in full mode: service call failed with error: service [/turtlebot_node/set_operation_mode] responded with an error: error processing request: Robot not connected, SCI not available
And the Minimal launch file output is :
rex@ubuntu:~roslaunch turtlebot_bringup minimal.launch
... logging to /home/rex/.ros/log/ad527dac-28bf-11e2-a05f-904ce58884e4/roslaunch-ubuntu-3227.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://192.168.1.101:39972/

SUMMARY
========

PARAMETERS
 * /use_sim_time
 * /robot_pose_ekf/sensor_timeout
 * /diagnostic_aggregator/analyzers/sensors/path
 * /robot_pose_ekf/imu_used
 * /robot_pose_ekf/odom_used
 * /robot/name
 * /diagnostic_aggregator/analyzers/nodes/timeout
 * /diagnostic_aggregator/analyzers/mode/timeout
 * /diagnostic_aggregator/analyzers/sensors/timeout
 * /diagnostic_aggregator/analyzers/power/type
 * /turtlebot_node/update_rate
 * /diagnostic_aggregator/analyzers/power/timeout
 * /diagnostic_aggregator/analyzers/mode/type
 * /diagnostic_aggregator/analyzers/digital_io/path
 * /diagnostic_aggregator/analyzers/digital_io/timeout
 * /diagnostic_aggregator/analyzers/nodes/path
 * /rosdistro
 * /robot_description
 * /diagnostic_aggregator/base_path
 * /robot_pose_ekf/freq
 * /robot_pose_ekf/publish_tf
 * /app_manager/interface_master
 * /robot_pose_ekf/vo_used
 * /diagnostic_aggregator/analyzers/sensors/type
 * /diagnostic_aggregator/analyzers/digital_io/startswith
 * /diagnostic_aggregator/analyzers/power/path
 * /robot_pose_ekf/output_frame
 * /diagnostic_aggregator/analyzers/mode/path
 * /diagnostic_aggregator/analyzers/digital_io/type
 * /diagnostic_aggregator/analyzers/mode/startswith
 * /rosversion
 * /diagnostic_aggregator/pub_rate
 * /robot_state_publisher/publish_frequency
 * /diagnostic_aggregator/analyzers/sensors/startswith
 * /diagnostic_aggregator/analyzers/power/startswith
 * /turtlebot_node/bonus
 * /robot/type
 * /diagnostic_aggregator/analyzers/nodes/type
 * /diagnostic_aggregator/analyzers/nodes/contains

NODES
  /
    appmaster (app_manager/appmaster)
    app_manager (app_manager/app_manager)
    turtlebot_node (turtlebot_node/turtlebot_node.py)
    turtlebot_laptop_battery (turtlebot_node/laptop_battery.py)
    robot_state_publisher (robot_state_publisher/state_publisher)
    diagnostic_aggregator (diagnostic_aggregator/aggregator_node)
    robot_pose_ekf (robot_pose_ekf/robot_pose_ekf)

ROS_MASTER_URI=http://turtlebot-laptop:11311

core service [/rosout] found
process[appmaster-1]: started with pid [3239]
process[app_manager-2]: started with pid [3240]
process[turtlebot_node-3]: started with pid [3241]
process[turtlebot_laptop_battery-4]: started with pid [3242]
process[robot_state_publisher-5]: started with pid [3246]
process[diagnostic_aggregator-6]: started with pid [3256]
process[robot_pose_ekf-7]: started with pid [3257]
turtlebot_apps.installed
loading installation data for [turtlebot_apps.installed]
[ WARN] [1352283367.262891124]: The root link base_footprint has an inertia specified in the URDF, but KDL does not support a root link with an inertia.  As a workaround, you can add an extra dummy link to your URDF.
ERROR: Cannot locate app file for turtlebot_teleop/android_teleop: package is not installed.
[INFO] [WallTime: 1352283369.609555] Starting app manager for turtlebot
[INFO] [WallTime: 1352283369.668527] Waiting for foreign master [http://localhost:11312] to come up...
[INFO] [WallTime: 1352283369.671613] Foreign master is available
[INFO] [WallTime: 1352283369.762669] Registering (/turtlebot/app_list,http://192.168.1.101:58981/) on master http://localhost:11312
[INFO] [WallTime: 1352283369.781682] Registering (/turtlebot/application/app_status,http://192.168.1.101:58981/) on master http://localhost:11312
turtlebot_apps.installed
loading installation data for [turtlebot_apps.installed]
[INFO] [WallTime: 1352283369.796770] Registering service (/turtlebot/list_apps,rosrpc://192.168.1.101:33609) on master http://localhost:11312
ERROR: Cannot locate app file for turtlebot_teleop/android_teleop: package is not installed.
[INFO] [WallTime: 1352283369.818413] Registering service (/turtlebot/start_app,rosrpc://192.168.1.101:33609) on master http://localhost:11312
[INFO] [WallTime: 1352283369.833082] Registering service (/turtlebot/stop_app,rosrpc://192.168.1.101:33609) on master http://localhost:11312
[INFO] [WallTime: 1352283373.409820] serial port: /dev/ttyUSB0
[INFO] [WallTime: 1352283373.410519] update_rate: 30.0
[INFO] [WallTime: 1352283373.410900] drive mode: twist
[INFO] [WallTime: 1352283373.411544] has gyro: True
[INFO] [WallTime: 1352283373.869534] self.gyro_measurement_range 150.000000
[INFO] [WallTime: 1352283373.870033] self.gyro_scale_correction 1.000000
[ERROR] [WallTime: 1352283377.066618] Failed to open port /dev/ttyUSB0.  Please make sure the Create cable is plugged into the computer. 

shutdown request: new node registered with same name
[ERROR] [WallTime: 1352283380.172416] Failed to contact device with error: ['NoneType' object has no attribute 'start']. Please check that the Create is powered on and that the connector is plugged into the Create.
[turtlebot_node-3] process has finished cleanly.
log file: /home/rex/.ros/log/ad527dac-28bf-11e2-a05f-904ce58884e4/turtlebot_node-3*.log
respawning...
[turtlebot_node-3] restarting process
process[turtlebot_node-3]: started with pid [3309]
[INFO] [WallTime: 1352283381.807797] serial port: /dev/ttyUSB0
[INFO] [WallTime: 1352283381.808558] update_rate: 30.0
[INFO] [WallTime: 1352283381.809344] drive mode: twist
[INFO] [WallTime: 1352283381.810150] has gyro: True
[INFO] [WallTime: 1352283382.154787] self.gyro_measurement_range 150.000000
[INFO] [WallTime: 1352283382.157791] self.gyro_scale_correction 1.000000
[ERROR] [WallTime: 1352283385.310458] Failed to open port /dev/ttyUSB0.  Please make sure the Create cable is plugged into the computer. 

shutdown request: new node registered with same name
[ERROR] [WallTime: 1352283388.360061] Failed to contact device with error: ['NoneType' object has no attribute 'start']. Please check that the Create is powered on and that the connector is plugged into the Create.
[turtlebot_node-3] process has finished cleanly.
log file: /home/rex/.ros/log/ad527dac-28bf-11e2-a05f-904ce58884e4/turtlebot_node-3*.log
respawning...
[turtlebot_node-3] restarting process
process[turtlebot_node-3]: started with pid [3321]
[INFO] [WallTime: 1352283389.202477] serial port: /dev/ttyUSB0
[INFO] [WallTime: 1352283389.203247] update_rate: 30.0
[INFO] [WallTime: 1352283389.203753] drive mode: twist
[INFO] [WallTime: 1352283389.204228] has gyro: True
[INFO] [WallTime: 1352283389.561660] self.gyro_measurement_range 150.000000
[INFO] [WallTime: 1352283389.562596] self.gyro_scale_correction 1.000000
^C[robot_pose_ekf-7] killing on exit
[diagnostic_aggregator-6] killing on exit
[turtlebot_laptop_battery-4] killing on exit
[robot_state_publisher-5] killing on exit
[app_manager-2] killing on exit
[turtlebot_node-3] killing on exit
 [appmaster-1] killing on exit
[INFO] [WallTime: 1352283390.912458] Unregistering (/turtlebot/app_list,http://192.168.1.101:58981/) from master http://localhost:11312
Traceback (most recent call last):
  File "/opt/ros/electric/stacks/ros_comm/clients/rospy/src/rospy/core.py", line 462, in signal_shutdown
    h()
  File "/opt/ros/electric/stacks/multimaster_experimental/app_manager/src/app_manager/app_manager.py", line 102, in shutdown
    self._api_sync.stop()
  File "/opt/ros/electric/stacks/multimaster_experimental/app_manager/src/app_manager/master_sync.py", line 290, in stop
    self.foreign_manager.unsubscribe_all()
  File "/opt/ros/electric/stacks/multimaster_experimental/app_manager/src/app_manager/master_sync.py", line 217, in unsubscribe_all
    self.unadvertise(t,u)
  File "/opt/ros/electric/stacks/multimaster_experimental/app_manager/src/app_manager/master_sync.py", line 161, in unadvertise
    m.unregisterPublisher(topic,uri)
  File "/opt/ros/electric/stacks/ros_comm/tools/rosgraph/src/rosgraph/masterapi.py", line 402, in unregisterPublisher
    return self._succeed(self.handle.unregisterPublisher(self.caller_id, topic, caller_api))
  File "/usr/lib/python2.7/xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1575, in __request
    verbose=self.__verbose
  File "/usr/lib/python2.7/xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1292, in single_request
    self.send_content(h, request_body)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1439, in send_content
    connection.endheaders(request_body)
  File "/usr/lib/python2.7/httplib.py", line 951, in endheaders
    self._send_output(message_body)
  File "/usr/lib/python2.7/httplib.py", line 811, in _send_output
    self.send(msg)
  File "/usr/lib/python2.7/httplib.py", line 773, in send
    self.connect()
  File "/usr/lib/python2.7/httplib.py", line 754, in connect
    self.timeout, self.source_address)
  File "/usr/lib/python2.7/socket.py", line 571, in create_connection
    raise err
error: [Errno 111] Connection refused
[ERROR] [WallTime: 1352283391.321252] Failed to contact device with error: ['NoneType' object has no attribute 'start']. Please check that the Create is powered on and that the connector is plugged into the Create.
shutting down processing monitor...
... shutting down processing monitor complete
done

Please suggest me the solution.

Originally posted by kunalrex2010 on ROS Answers with karma: 1 on 2012-11-06
Post score: 0

A:

The problem comes not from the dashboard. It starts earlier:
[ERROR] [WallTime: 1352283377.066618] Failed to open port /dev/ttyUSB0.  Please make sure the Create cable is plugged into the computer. 
This means that turtlebot_node.py was never even able to connect to your iRobot device in the first place.
I would suggest you start with a simple
rosrun turtlebot_node turtlebot_node.py

in order to see clearer what it going wrong. Once you figured that out, continue with the big launch file.
Why turtlebot_node.py actually gets no connection to your iRobot device can have different reasons.

Does your user have permission to open a serial port?
On my setup it happens, that I have to replug the serial converter once after rebooting my laptop for god knows what reasons. After that it works like a charm.
Are there probably more serial-usb devices on your system and /dev/ttyUSB0 is already occupied?

A good starting point might be to manually connect to serial port and see if that works.
Good luck. :)

Originally posted by JBuesch with karma: 237 on 2012-11-07
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by nemesis on 2013-12-10:
Hi. I have a query. I installed the turtlebot package as per the wiki but I am missing the turtlebot_node (and turtlebot_driver) too. Any idea what to do?
Comment by JBuesch on 2013-12-10:
Please open a new question for that. This is a Q&A platform and not a forum. Nobody will find your question in this post. And from what you wrote I have no idea at all. When you put a new question, please provide as much information as you can do in order to relieve people from guessing.  :)

