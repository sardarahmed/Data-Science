Q:

Turtlebot 2 and ros-hydro-cmvision problem

We just got in some Turtlebot 2 robots for our robotics class, having used the Turtlebot 1 platform for 3 years.
In our testing so far, we have only found one problem.
We're running Ubuntu 12.04.5 LTS, 3.13.0-32-generic, all updates applied, and added two ROS packages:
sudo apt-get install ros-hydro-cmvision fltk1.1-doc wx2.8-doc
sudo apt-get install ros-hydro-image-view
Our startup process (each in it's own terminal):
roscore
roslaunch turtlebot_bringup minimal.launch
roslaunch turtlebot_dashboard turtlebot_dashboard.launch
Then we launch the Kinect with:
roslaunch openni_launch openni.launch
If we then launch the image viewer:
rosrun image_view image_view image:=/camera/rgb/image_color
And cmvision:
rosrun cmvision colorgui image:=/camera/rgb/image_color
In the following print screen of the desktop, the image viewer comes up as expected (/camera/rgb/image_color on the right with the red rectangle). cmvision, however, has blue where the red is (Color Gui on the left).
CMVsion Example http://www.nd.edu/%7Emmcnally/ros/kinect-test.png
Does anyone know what's going on there, or, more importantly, how to fix it?
Thanks.
M. D.

Originally posted by M. D. on ROS Answers with karma: 13 on 2015-01-14
Post score: 1

A:

I'm surprised this bug went unnoticed for this long. It looks like cmvision doesn't even bother checking the format of the image message, and just assumes it is RGB. I believe the Kinect publishes in BGR.
The offending lines:
https://github.com/utexas-bwi/cmvision/blob/hydro-devel/src/cmvision_color_blob_finder.cpp#L173
https://github.com/utexas-bwi/cmvision/blob/hydro-devel/src/color_gui.cpp#L194
The issue has been file here: https://github.com/utexas-bwi/cmvision/issues/3
Since both color_gui and blob_finder suffer from the same bug, as long as you you use the same camera (aka image format) with both those nodes, it shouldn't matter if color_gui is displaying the colors incorrectly. Not pretty, but it should work until the issue is resolved.

Originally posted by piyushk with karma: 2871 on 2015-01-15
This answer was ACCEPTED on the original site
Post score: 0

