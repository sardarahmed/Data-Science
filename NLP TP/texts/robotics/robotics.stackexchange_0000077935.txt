Q:

How to do motion planing with closed loop chain/graph robot structure?

URDF supports only tree structure. SDF support graph structure but it is only for simulation. Moveit supports only URDF so I think I cant use it for motion planing (except if I close it with maths, witch is difficult). I think collada files supports closed loop chain but can I use it on ROS Moveit? Collada is working well with OpenRave but can it communicate with ROS so I can link it with my robot? This is the robot structure:

Is there any way to suggest me how I can do motion planing with closed loop chain?

Originally posted by jake123 on ROS Answers with karma: 23 on 2016-12-20
Post score: 2

Original comments
Comment by mohamad mahdavian on 2019-01-23:
Can I know how did you model a closed chain in collada (.dae) files?!
Comment by Angel-J on 2019-05-06:
urdf not support closed kinematic loops，
the closed_loop_plugin can solve the issue that URDF not support Closed loop chains/graph.
more details, please refer to：https://github.com/wojiaojiao/pegasus_gazebo_plugins
or
http://wiki.ros.org/Angel_jj/closed_loop_plugin

A:

Not sure I can answer all of your questions fully, but:

URDF supports only tree structure. SDF support graph structure but it is only for simulation.

SDF is not "only for simulation" per se, but it's true that right now it's really only used by Gazebo and nothing else.

Moveit supports only URDF so I think I cant use it for motion planing (except if I close it with maths, witch is difficult)

If you mean: "MoveIt supports only URDF and I can't model my robot in URDF, so ..", then yes, that is basically true. It's not really only URDF that is a problem: there is no support for IK/FK with closed chains in the components that are typically used in ROS (anything using KDL fi), so even if you could model your robot, there are no solvers (easily) available.

I think collada files supports closed loop chain but can I use it on ROS Moveit?

You can use Collada, but it is only used as a format to store robot geometry in (ie: meshes). None of the other features of Collada are supported (directly).

Collada is working well with OpenRave but can it communicate with ROS so I can link it with my robot?

The people over at github.com/personalrobotics have quite a few packages that let you integrate ROS and OpenRAVE. I'm not sure as to which level that integration works, but I seem to remember they at least have packages for loading URDFs, SRDFs, ROS kinematics plugins, various planners used in MoveIt, etc. You might want to look there for some inspiration.

Is there any way to suggest me how I can do motion planing with closed loop chain?

This is not going to be a satisfactory answer, but I think it would depend a bit on whether the closed-loop nature of your robot is really a property that you want to exploit, or if it's something that is there, but is not really used/usable:

if you really need to plan for the closed loop: I'm not sure that is possible right now (see comment above about there not being any solvers available fi). I do remember a potentially relevant discussion on moveit-users on ways to work-around the current limitations -- with MoveIt at least, there are many other frameworks that could probably plan for closed loops. See Planning for dual arm manipulation in object space.

if you have a robot that includes a closed loop to increase its max payload (and connects counterweights using the closed loop), or to reduce weight in the links (so it can place all actuators at the base fi), then you could either use mimic joints to model the parallel structure, or you could ignore it entirely. Most industrial robots fi that include parallel structures implicitly take care of the kinematics, reducing your planning problem to that of a regular serial chain.

A bit of context (slightly off-topic): Collada has also come up as one of the (many) possible formats for ROS2 (see [URDF-NG] Next-generation robot descriptions and [URDF-NG] ROS2 URDF2 discussion (also check the meeting and the meeting minutes linked in the first post).

Originally posted by gvdhoorn with karma: 86574 on 2016-12-20
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by jake123 on 2016-12-20:
When ROS2 will be released officially and why we don't use it now?
Comment by gvdhoorn on 2016-12-20:
That is really a completely different question, and I don't know the answer. Note that the discussion about a "next generation robot description format" is really just that: a discussion. Nothing has been decided or implemented. Using ROS2 will not help you with your problem at this point.
Comment by jake123 on 2016-12-20:
Ok. When I use mimic tag on t_joint_1 and check the urdf with check _urdf "name.urdf" it gives error about the tag. Maybe should I use this tag on SRDF that is officially supported or not?
Comment by gvdhoorn on 2016-12-20:
This is a bit of a different question to your original one, and might be better handled by you opening a new question. In general (and without seeing your urdf): mimic joints should work in URDF and are supported by MoveIt.
Comment by danish-answers on 2017-01-20:
thanks for all that info. it was reassuring

