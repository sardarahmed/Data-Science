Q:

fromROSMsg saves an unstructured pointcloud?

When retrieving pointclouds from kinect openni (topic: /camera/rgb/points) and calling
pcl::fromROSMsg(*pcl2_msg_, pcl_xyzrgb_);

the pointcloud goes from structured tu unstructured.
ROS_INFO("msg size %d %d size %d %d ",pcl2_msg_->height, pcl2_msg_->width, (int) pcl_xyzrgb_.height, (int)pcl_xyzrgb_.width);

outputs
[ INFO] [1328803389.512748025]: msg size 480 640 size 1 101595 
[ INFO] [1328803389.945569604]: msg size 480 640 size 1 101593 
[ INFO] [1328803390.400027375]: msg size 480 640 size 1 101676 
[ INFO] [1328803390.840122150]: msg size 480 640 size 1 101569

and so on.
Any hint why this happens and how to keep the pointcloud dense and structured?

Originally posted by quimnuss on ROS Answers with karma: 169 on 2012-02-09
Post score: 0

Original comments
Comment by quimnuss on 2012-02-10:
I had diagnosed the problem wrong, it's not fromROSMsg that unstructures the point cloud but removePlanes and copyPointCloud when going from xyz to rgb.
Comment by Dan Lazewatsky on 2012-02-09:
I've used fromROSMsg and maintained the dense pointcloud structure. Are you running it through any of the nodelet filters first? Those tend to output unstructured clouds. How are you initializing pcl_xyzrgb_?
Comment by karthik on 2012-06-07:
But how do you decide that its unstructured cloud. 480x640 mentions that its structured. when u have it as 1x307200 then it is unstructured. So i guess its fine here.

A:

I believe it's the extract.filter that unstructures the pointcloud, which I guess is the intended behaviour.

Originally posted by quimnuss with karma: 169 on 2012-02-10
This answer was ACCEPTED on the original site
Post score: 0

