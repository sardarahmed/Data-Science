Q:

Micro-ros reading operation

I
In Microros Client, It is the function rclc_executor_spin_some() that go check if there is data available in the (custom)transport? I don't understand which is the flow to arrive to the Micro-XRCE-DDS function uxr_run_session_<...> for read the message just arrived.
I miss the RCL part in the flow:
RCLC: rclc_executor_spin_some() --> RCL: .???.. --> RMW: run_xrce_session() --> Micro-XRCE-DDS-Client: uxr_run_session() and recv_msg()
In other word I would like to understand how MicroRos listen incoming message. ( And who? It s the executor?)
Thank you so much in advance.

Originally posted by Cccrri on ROS Answers with karma: 1 on 2021-09-24
Post score: 0

A:

Solved here: https://github.com/ros2/rclc/issues/200:

rclc_executor_spin_some -> rcl_wait -> rmw_wait -> uxr_run_session_until_data and the former will call your transport read and write functions.
In general the spin function in the executor is in charge of waiting for the middleware: in this step the middleware is ran and if there is any data it is stored in RMW layer static buffers. Then the executor performs a rcl_take that retrieves that data.
Let me know if you have further questions.

Originally posted by Pablogs with karma: 443 on 2021-09-27
This answer was ACCEPTED on the original site
Post score: 0

