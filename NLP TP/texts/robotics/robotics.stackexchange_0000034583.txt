Q:

rosmake --pre-clean without svn update

Hi,
I was working with "simulator_gazebo" developers version adding some sensors, now that i'm done and want to integrate my package into my repository, it should be easy but it isn't! The problems is when i do a "make clean" or a "rosmake --pre-clean" (fresh make) the package is pre-configured to download the package from his original repository and after that all my work is lost because it overwrite my code with the original version....
Where is the svn configuration of the package or how can I avoid that the package is svn updated doing make clean or rosmake --pre-clean??
I see several files that specify a SVN_URL, SVN_PACKAGE, SVN_PATCH... but i don't know which or how i should modify it.
Thanks

Originally posted by jrcapriles on ROS Answers with karma: 370 on 2011-09-29
Post score: 0

A:

ROS gazebo is a third-party library. The ROS package wraps the standard gazebo implementation.
To modify gazebo, itself, it looks like you need to create a patch for your changes (as a diff against the downloaded version), and add that to the patches/ subdirectory.

Originally posted by joq with karma: 25443 on 2011-09-29
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jrcapriles on 2011-09-30:
Ok ok thanks for this advice i will do it! And thanks for your help!
Comment by joq on 2011-09-30:
You can submit your patch to the ROS gazebo package maintainer. Open an enhancement ticket explaining what it does and add your patch as an attachment. Or, it can be submitted to the upstream gazebo developers.
Comment by jrcapriles on 2011-09-30:
Since the package is in its final place, and anyone is going to change the code of simulator gazebo for now, i added a ROS_NOBUILD and now when i do rosmake --pre-clean or make clean the file isn't modified. It's a temporary solution while i discover how to integrate the patches to gazebo itself
Comment by jrcapriles on 2011-09-30:
I found one way to do it, i find and replace in all files the original address with the new address then eliminate all autogenerated files (CMakeCache.txt, CMakeFiles/ src_gen/ srv_gen/ src/gazebo/ and the libs that it found conflict with.. then cmake . and finally make. All work fine.
Comment by jrcapriles on 2011-09-29:
Thanks Jack, i made the diff patch and added to the patches/subdirectory. Do you know where i have to specify that the patch is needed to be done?

