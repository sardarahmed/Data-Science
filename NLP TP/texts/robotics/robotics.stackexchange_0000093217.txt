Q:

Docker or snap for ROS projects

Hi guys, recently I had to deal with issues in my project with different computers having slightly different environment.
Ideally I want all the developers and robot to have the identical environment for both development and production. I read a little about docker as well as snap but kind of confused on which one is better fit for this.
What does the general ROS community use? Is there any gotchas and limitations to either? I'm concerned it may require significant work to reconfigure my setup.

Originally posted by mugetsu on ROS Answers with karma: 195 on 2019-09-06
Post score: 2

A:

This sentence alone

I want all the developers and robot to have the identical environment for both development and production

Docker. I'm a fan of snaps for deployment of certain assets but you cannot develop inside of a snap, they're read only and take a bunch of time to generate each snap (think 20-30 minutes).
Snaps are for deployment (usually in the cloud, but also on robots/IoT) and cannot be used for development from their read-only state packaging up the entire code/dependencies around Ubuntu Core. The general community uses Docker by in large and OSRF even provides base images on DockerHub to pull from for base, desktop, and specialty installs https://hub.docker.com/_/ros.
Docker is pretty easy to get started with, here's an example of building one of my packages in docker: https://github.com/SteveMacenski/slam_toolbox/blob/melodic-devel/Dockerfile. As you can see, its < 25 lines. Launch the container and then you can run your ROS packages (and/or create an entry point so its automatic).
Edit: More info on snaps and ROS can be found here https://snapcraft.io/docs/catkin-plugin. Analogous to my docker example, here's a snapcraft yaml I use for deployment of the same project https://github.com/SteveMacenski/slam_toolbox/blob/melodic-devel/snap/snapcraft.yaml. Feel free to use those two as testing grounds to get the hang of it since I happen to use both in this particular case

Originally posted by stevemacenski with karma: 8272 on 2019-09-06
This answer was ACCEPTED on the original site
Post score: 6

Original comments
Comment by mugetsu on 2019-09-09:
so basically, docker for dev and snap for deployment. Why use snap for deployment over docker?
Comment by stevemacenski on 2019-09-09:
If you want to use docker to deploy as well, theres nothing stopping you. Its just a different philosophy
Comment by abhishek47 on 2021-04-05:
The snapcraft yaml link is a 404, would be helpful if still available :)
Comment by dinesh on 2021-04-08:
how can snap be installed inside the docker container and what benefit does it provides for deployment purpose. https://answers.ros.org/question/375728/publish-ros-package-with-snap-inside-docker/

