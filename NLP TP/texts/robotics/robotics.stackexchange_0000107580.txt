Q:

Ros2 Dictionary srv/msg type

I would like to be able to return a dictionary as a Response in my interface,
Is it possible to return a python dictionary or should I write code similar to this:
uint8 action

---

item1Class dict
-- other msg types below ---

where item1Class is a struct
This is probably not possible, essentially I want:

    observation = {
        "lidar": lidar_data,
        "pose": {
            "positionX": X,
            "positionY": Y,
            "orientation": yaw,
        },
    }

as a srv message where lidar is float32[] and all pose variable are floats.

Whats the best practice using Ros2 to achieve this. Or is this not what srv/msg was intended for?

A:

Dictionaries are not a natively supported type. And we actually encourage things to be strongly typed, where a dictionary is not because it can contain approximately arbitrary data. When you receive a ROS datatype it will be a fully defined datatype with it's own structure.
The best practice is to define a .srv file to contain these along these lines to cover your description above.
uint8 action

---

sensor_msgs/LaserScan lidar_data
geometry_msgs/Pose pose

Messages to consider:

LaserScan
Pose

