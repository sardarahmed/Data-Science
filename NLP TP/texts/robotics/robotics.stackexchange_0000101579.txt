Q:

ROS Answers SE migration: Rviz2 Crash

Hi,
I am using ROS2 Foxy on the ubuntu20 system. when I launch rviz2 it crashes with the below error message.
[rviz2-1] 1650910831.701056240 [rviz2] [ERROR] InternalErrorException: Vertex Buffer: Out of memory in GLHardwareVertexBuffer::lock at /tmp/binarydeb/ros-foxy-rviz-ogre-vendor-8.2.6/obj-x86_64-linux-gnu/ogre-v1.12.1-prefix/src/ogre-v1.12.1/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 125)
[rviz2-1] terminate called after throwing an instance of 'Ogre::InternalErrorException'
[rviz2-1]   what():  InternalErrorException: Vertex Buffer: Out of memory in GLHardwareVertexBuffer::lock at /tmp/binarydeb/ros-foxy-rviz-ogre-vendor-8.2.6/obj-x86_64-linux-gnu/ogre-v1.12.1-prefix/src/ogre-v1.12.1/RenderSystems/GL/src/OgreGLHardwareVertexBuffer.cpp (line 125)

Below are the details of my graphics card
*-display                 
       description: VGA compatible controller
       product: GP107M [GeForce GTX 1050 Mobile]
       vendor: NVIDIA Corporation
       physical id: 0
       bus info: pci@0000:01:00.0
       version: a1
       width: 64 bits
       clock: 33MHz
       capabilities: pm msi pciexpress vga_controller bus_master cap_list rom
       configuration: driver=nvidia latency=0
       resources: irq:152 memory:c2000000-c2ffffff memory:b0000000-bfffffff memory:c0000000-c1ffffff ioport:6000(size=128) memory:c0000-dffff
*-display
       description: Display controller
       product: Intel Corporation
       vendor: Intel Corporation
       physical id: 2
       bus info: pci@0000:00:02.0
       version: 05
       width: 64 bits
       clock: 33MHz
       capabilities: pciexpress msi pm bus_master cap_list
       configuration: driver=i915 latency=0
       resources: irq:150 memory:c4000000-c4ffffff memory:a0000000-afffffff ioport:7000(size=64)

Thanks in advance.

Originally posted by Flash on ROS Answers with karma: 126 on 2022-04-25
Post score: 0

A:

Ogre errors are related to your graphics driver/capabilities if I'm not mistaken.

Out of memory in GLHardwareVertexBuffer

That makes me curious what kind of system you're running it on. I remember having issues with RViz2 (in Nav2 specifically) on my laptop if I also had Gazebo running. Eventually I got it working by disabling some of the visual stuff in RViz2 (think global/local costmaps, amcl cloud, sensor pointclouds). I basically overloaded my graphics card.

Originally posted by Joe28965 with karma: 1124 on 2022-04-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Flash on 2022-04-26:
updated my question with details of my graphics card
Comment by Joe28965 on 2022-04-26:
It would also be helpful to know what you're running besides RViz (Gazebo, openCV?) and what you've opened in RViz. Does it already crash when RViz is empty (by just running rviz2 from the command line), or is it when running a specific RViz configuration?
The error is an "Out of memory" error. The GTX 1050 mobile has 2GB DDR5. Have you simply opened so much that your 2GB is full? Because that's my guess.
Comment by Flash on 2022-04-26:
I am using a zed2i camera which is running a bunch of nodes in which person detection is also one. This didn't happen initially when I ran it but after the next day or 2, I started seeing this issue.

