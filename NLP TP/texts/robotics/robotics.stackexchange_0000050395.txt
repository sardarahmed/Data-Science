Q:

ros_desktop OS X Build Issue

I would like to build everything required to run rviz on my OS 10.8.3 machine. I followed the instructions here:
http://www.ros.org/wiki/groovy/Installation/OSX/MacPorts/Source
...except that I changed ros_comm to desktop in the wstool command. When I run the prescribed cmake command, I get this output:

cmake .. -DCMAKE_INSTALL_PREFIX=/opt/ros/groovy  -DSETUPTOOLS_DEB_LAYOUT=OFF
-- Using CATKIN_DEVEL_PREFIX: /Users/ayrton/ros_catkin_ws/src/build/devel
-- Using CMAKE_PREFIX_PATH: 
-- Found gtest: gtests will be built
CMake Warning at catkin/cmake/test/nosetests.cmake:90 (message):
  nosetests not found, Python tests can not be run (try installing package
  'python-nose')
Call Stack (most recent call first):
  catkin/cmake/all.cmake:133 (include)
  CMakeLists.txt:12 (include)

-- Using CATKIN_TEST_RESULTS_DIR: /Users/ayrton/ros_catkin_ws/src/build/test_results
-- catkin 0.5.65
-- BUILD_SHARED_LIBS is on
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- ~~  traversing 156 packages in topological order:
-- ~~  - angles
-- ~~  - bond_core (metapackage)
WARNING: The metapackage 'bond_core' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/bond_core/CMakeLists.txt
-- ~~  - common_msgs (metapackage)
WARNING: The metapackage 'common_msgs' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/common_msgs/CMakeLists.txt
-- ~~  - console_bridge
-- ~~  - class_loader
-- ~~  - convex_decomposition
-- ~~  - cpp_common
-- ~~  - diagnostics (metapackage)
WARNING: The metapackage 'diagnostics' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/diagnostics/CMakeLists.txt
-- ~~  - driver_common (metapackage)
WARNING: The metapackage 'driver_common' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/driver_common/CMakeLists.txt
-- ~~  - genmsg
-- ~~  - gencpp
-- ~~  - genlisp
-- ~~  - genpy
-- ~~  - geometry (metapackage)
WARNING: The metapackage 'geometry' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/geometry/CMakeLists.txt
-- ~~  - geometry_experimental (metapackage)
WARNING: The metapackage 'geometry_experimental' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/geometry_experimental/CMakeLists.txt
-- ~~  - image_common (metapackage)
WARNING: The metapackage 'image_common' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/image_common/CMakeLists.txt
-- ~~  - ivcon
-- ~~  - kdl (metapackage)
WARNING: The metapackage 'kdl' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/kdl/CMakeLists.txt
-- ~~  - message_generation
-- ~~  - message_runtime
-- ~~  - mk
-- ~~  - nodelet_core (metapackage)
WARNING: The metapackage 'nodelet_core' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/nodelet_core/CMakeLists.txt
-- ~~  - opencv2 (plain cmake)
-- ~~  - orocos_kdl
-- ~~  - orocos_kinematics_dynamics (metapackage)
WARNING: The metapackage 'orocos_kinematics_dynamics' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/orocos_kinematics_dynamics/CMakeLists.txt
-- ~~  - python_orocos_kdl
-- ~~  - qt_dotgraph
-- ~~  - qt_gui
-- ~~  - qt_gui_app
-- ~~  - qt_gui_core (metapackage)
-- ~~  - qt_gui_py_common
-- ~~  - ros (metapackage)
-- ~~  - ros_comm (metapackage)
-- ~~  - ros_tutorials (metapackage)
-- ~~  - rosbash
-- ~~  - rosboost_cfg
-- ~~  - rosbuild
-- ~~  - rosclean
-- ~~  - roscpp_traits
-- ~~  - roscreate
-- ~~  - rosgraph
-- ~~  - roslang
-- ~~  - roslaunch
-- ~~  - rosmake
-- ~~  - rosmaster
-- ~~  - rosmsg
-- ~~  - rospack
-- ~~  - roslib
-- ~~  - rosparam
-- ~~  - rospy
-- ~~  - rosservice
-- ~~  - rostime
-- ~~  - roscpp_serialization
-- ~~  - python_qt_binding
-- ~~  - rosunit
-- ~~  - rosconsole
-- ~~  - pluginlib
-- ~~  - qt_gui_cpp
-- ~~  - resource_retriever
-- ~~  - rosconsole_bridge
-- ~~  - rostest
-- ~~  - rqt_action
-- ~~  - rqt_bag
-- ~~  - rqt_bag_plugins
-- ~~  - rqt_common_plugins (metapackage)
-- ~~  - rqt_console
-- ~~  - rqt_dep
-- ~~  - rqt_graph
-- ~~  - rqt_gui
-- ~~  - rqt_logger_level
-- ~~  - rqt_msg
-- ~~  - rqt_plot
-- ~~  - rqt_publisher
-- ~~  - rqt_py_common
-- ~~  - rqt_py_console
-- ~~  - rqt_reconfigure
-- ~~  - rqt_service_caller
-- ~~  - rqt_shell
-- ~~  - rqt_srv
-- ~~  - rqt_topic
-- ~~  - rqt_web
-- ~~  - smclib
-- ~~  - std_msgs
-- ~~  - actionlib_msgs
-- ~~  - bond
-- ~~  - diagnostic_msgs
-- ~~  - geometry_msgs
-- ~~  - eigen_conversions
-- ~~  - kdl_conversions
-- ~~  - nav_msgs
-- ~~  - rosgraph_msgs
-- ~~  - bondpy
-- ~~  - diagnostic_common_diagnostics
-- ~~  - rqt_gui_py
-- ~~  - sensor_msgs
-- ~~  - camera_calibration_parsers
-- ~~  - cv_bridge
-- ~~  - image_geometry
-- ~~  - shape_msgs
-- ~~  - std_srvs
-- ~~  - stereo_msgs
-- ~~  - tf2_msgs
-- ~~  - trajectory_msgs
-- ~~  - urdfdom_headers
-- ~~  - srdfdom
-- ~~  - srdf
-- ~~  - urdfdom
-- ~~  - urdf_interface
-- ~~  - urdf_parser
-- ~~  - vision_opencv (metapackage)
WARNING: The metapackage 'vision_opencv' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/vision_opencv/CMakeLists.txt
-- ~~  - visualization_msgs
-- ~~  - xmlrpcpp
-- ~~  - roscpp
-- ~~  - bondcpp
-- ~~  - collada_parser
-- ~~  - dynamic_reconfigure
-- ~~  - nodelet
-- ~~  - roscpp_tutorials
-- ~~  - rosout
-- ~~  - actionlib
-- ~~  - diagnostic_aggregator
-- ~~  - diagnostic_updater
-- ~~  - message_filters
-- ~~  - image_transport
-- ~~  - camera_info_manager
-- ~~  - polled_camera
-- ~~  - rosnode
-- ~~  - rospy_tutorials
-- ~~  - rostopic
-- ~~  - roswtf
-- ~~  - rqt_gui_cpp
-- ~~  - rqt_image_view
-- ~~  - self_test
-- ~~  - tf
-- ~~  - laser_geometry
-- ~~  - tf2
-- ~~  - tf2_ros
-- ~~  - tf2_geometry_msgs
-- ~~  - tf2_kdl
-- ~~  - tf2_tools
-- ~~  - tf_conversions
-- ~~  - timestamp_tools
-- ~~  - topic_tools
-- ~~  - rosbag
-- ~~  - diagnostic_analysis
-- ~~  - driver_base
-- ~~  - interactive_markers
-- ~~  - nodelet_topic_tools
-- ~~  - rqt_launch
-- ~~  - turtlesim
-- ~~  - urdf
-- ~~  - collada_urdf
-- ~~  - kdl_parser
-- ~~  - robot_model (metapackage)
WARNING: The metapackage 'robot_model' has no CMakeLists.txt. Please add one to the package source. You can use the following file: /Users/ayrton/ros_catkin_ws/src/build/catkin_generated/metapackages/robot_model/CMakeLists.txt
-- ~~  - robot_state_publisher
-- ~~  - rviz
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
CMake Error at catkin/cmake/catkin_workspace.cmake:88 (message):
  This workspace contains non-catkin packages in it, and catkin cannot build
  a non-homogeneous workspace without isolation.
Call Stack (most recent call first):
  CMakeLists.txt:48 (catkin_workspace) 

My questions are:

Is it the case that there are non-catkin ported packages in groovy?

If so, which ones? Can I exclude them from the build?

If I instead follow the tutorial exactly and only pull down ros_comm, what can I do to merge in only those packages that I need to build rviz?

Originally posted by Tom Moore on ROS Answers with karma: 13689 on 2013-04-16
Post score: 1

A:

First, the tutorial at http://www.ros.org/wiki/groovy/Installation/OSX/MacPorts/Source is likely way out-of-date. I don't know if anyone is maintaining those instructions.
Second, the error you are getting is because you have to use catkin_make_isolated instead of catkin_make because your workspace contains packages like opencv which are not catkin packages, but are required for building all of ROS from source. (therefore you cannot exclude any of those packages, except pcl*).
You should look at the Homebrew instructions and substitute in macports where ever you see fit instead.
You can replace desktop with rviz in the wstool url and you will get only the packages required for rviz.

Originally posted by William with karma: 17335 on 2013-04-16
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Tom Moore on 2013-04-16:
Excellent, thanks for all the info!

