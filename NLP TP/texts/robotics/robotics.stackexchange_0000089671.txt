Q:

libEGL.so missing while building melodic on ARM ubuntu 18.04

Got the errors below after running:
rosdep install --from-paths src --ignore-src --rosdistro melodic -y

I am not sure how to fix or what is wrong:
CMake Error at /usr/lib/aarch64-linux-gnu/cmake/Qt5Gui/Qt5GuiConfig.cmake:27 (message):
  The imported target "Qt5::Gui" references the file

     "/usr/lib/aarch64-linux-gnu/libEGL.so"

  but this file does not exist.  Possible reasons include:

  * The file was deleted, renamed, or moved to another location.

  * An install or uninstall procedure did not complete successfully.

  * The installation package was faulty and contained

     "/usr/lib/aarch64-linux-gnu/cmake/Qt5Gui/Qt5GuiConfigExtras.cmake"

  but not all the files it references.

Call Stack (most recent call first):
  /usr/lib/aarch64-linux-gnu/cmake/Qt5Gui/Qt5GuiConfigExtras.cmake:32 (_qt5_Gui_check_file_exists)
  /usr/lib/aarch64-linux-gnu/cmake/Qt5Gui/Qt5GuiConfigExtras.cmake:54 (_qt5gui_find_extra_libs)
  /usr/lib/aarch64-linux-gnu/cmake/Qt5Gui/Qt5GuiConfig.cmake:184 (include)
  /usr/lib/aarch64-linux-gnu/cmake/Qt5Widgets/Qt5WidgetsConfig.cmake:101 (find_package)
  src/qt_gui_cpp/CMakeLists.txt:3 (find_package)

-- Configuring incomplete, errors occurred!
See also "/home/rock64/ros_catkin_ws/build_isolated/qt_gui_cpp/CMakeFiles/CMakeOutput.log".
See also "/home/rock64/ros_catkin_ws/build_isolated/qt_gui_cpp/CMakeFiles/CMakeError.log".
<== Failed to process package 'qt_gui_cpp': 
  Command '['/home/rock64/ros_catkin_ws/install_isolated/env.sh', 'cmake', '/home/rock64/ros_catkin_ws/src/qt_gui_core/qt_gui_cpp', '-DCATKIN_DEVEL_PREFIX=/home/rock64/ros_catkin_ws/devel_isolated/qt_gui_cpp', '-DCMAKE_INSTALL_PREFIX=/home/rock64/ros_catkin_ws/install_isolated', '-DCMAKE_BUILD_TYPE=Release', '-G', 'Unix Makefiles']' returned non-zero exit status 1

Reproduce this error by running:
==> cd /home/rock64/ros_catkin_ws/build_isolated/qt_gui_cpp && /home/rock64/ros_catkin_ws/install_isolated/env.sh cmake /home/rock64/ros_catkin_ws/src/qt_gui_core/qt_gui_cpp -DCATKIN_DEVEL_PREFIX=/home/rock64/ros_catkin_ws/devel_isolated/qt_gui_cpp -DCMAKE_INSTALL_PREFIX=/home/rock64/ros_catkin_ws/install_isolated -DCMAKE_BUILD_TYPE=Release -G 'Unix Makefiles'

Command failed, exiting.

Originally posted by lukewd on ROS Answers with karma: 116 on 2018-11-22
Post score: 0

A:

I resolved this by first going into the /usr/lib/aarch64-linux-gnu directory and observing there was a libEGL.so symlink to a nonexistant file in that same directory. There were a few other libEGL.so type files so I updated the symlink.
In my case on a rockpro64 using Ubuntu 18.04 I did:
cd /usr/lib/aarch64-linux-gnu
sudo ln -s libEGL_mesa.so.0.0.0 libEGL.so
First I removed the bogus symlink, not sure if that was necessary or not.
If you have another file similar but not identical to libEGL_mesa.so.0.0.0, I assume you would use that instead.
After doing this the build completed normally.
UPDATE*
Trying this again with latest sources led to several more missing files, including:
libglesv2.so -> I did a "sudo find / -name "libGLESv2.so", it was in a chromium-browser folder. I copied it to the expected location.
Compiling ran out of memory while compiling pcl_ros/segmentation/extract_clusters.cpp.o.
I added 4gb of swap and set swappiness to 25. (Not sure if that was an optimal setting but it worked to get past that point).
For reference, I started with this linux image http://wiki.pine64.org/index.php/ROCKPro64_Software_Release#LXDE_Desktop_aarch64_.5BmicroSD_.2F_eMMC_Boot.5D_.5B0.7.9.5D

Originally posted by lukewd with karma: 116 on 2018-11-22
This answer was ACCEPTED on the original site
Post score: 0

