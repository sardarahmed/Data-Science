Q:

How is a std_msgs/msg/ByteMultiArray message published via CLI?

I can see how a std_msgs/msg/Byte message is published via CLI, in fact, there are two ways to do this. (see https://answers.ros.org/question/375231/ros2-foxy-how-to-publish-byte-message-from-commandline/)
And I know how other MultiArray messages are published via CLI. (see https://answers.ros.org/question/189073/rostopic-pub-multiarray/?answer=189097#post-id-189097)
But how do you do that for a std_msgs/msg/ByteMultiArray?
I have tried:
ros2 topic pub -1 /whatever std_msgs/msg/ByteMultiArray "{data: [{3}, {4}]}"

and
ros2 topic pub -1 /whatever std_msgs/msg/ByteMultiArray "{data: [0x03, 0x04]}"

But both comes back with:
Failed to populate field: The 'data' field must be a set or sequence and each value of type 'bytes'

Other info:

Ubuntu 20
galactic

Originally posted by Cadmus on ROS Answers with karma: 25 on 2022-09-10
Post score: 1

Original comments
Comment by shonigmann on 2022-09-10:
Trying all the usual patterns I could think of, I similarly wasn't able to get this to work from the CLI, so perhaps its a bug, and it may merit a Github issue (or perhaps I wasn't creative enough with my syntax).
As an aside, please note the deprecation warning:

This was originally provided as an example message. It is deprecated as of Foxy. It is recommended to create your own semantically meaningful message.

Comment by Cadmus on 2022-09-12:
I am using std_msgs/msg/ByteMultiArray because its something that everyone can try. The actual thing I'm trying to do is to pub a custom message with a byte[] field
Comment by Cadmus on 2022-09-12:
Issue raised at https://github.com/ros2/ros2cli/issues/760

A:

Confirmed that there was no way of doing this. PR to fix issue is here: https://github.com/ros2/rosidl_python/pull/184
It appears that in the future we will be able to do:
ros2 topic pub -1 /whatever std_msgs/msg/ByteMultiArray "{data: [1, 2, 3]}"

Originally posted by Cadmus with karma: 25 on 2022-09-21
This answer was ACCEPTED on the original site
Post score: 1

