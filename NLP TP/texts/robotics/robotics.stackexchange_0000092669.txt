Q:

[SVO] Get pose for a long time

I'm using the SVO package. I already calibrated my bottom camera (using the Pinhole model, with the specs of camera_calibration modified to be in the format expected) and modified my .launch file so it gets the images from the output of the image_proc (i.e, grayscale and rectified), but it's very difficult to obtain the pose of the camera over a long period of time.
This is my .launch file:
<launch>
  
    <node pkg="svo_ros" type="vo" name="svo" clear_params="true" output="screen">
    
        <!-- Camera topic to subscribe to -->
        <param name="cam_topic" value="/ardrone/bottom/image_rect" type="str" />
        
        <!-- Camera calibration file -->
        <rosparam file="$(find svo_ros)/param/ardrone_bottom.yaml" />
        
        <!-- Default parameter settings: choose between vo_fast and vo_accurate -->
        <rosparam file="$(find svo_ros)/param/vo_fast.yaml" />

    </node>
        
</launch>

and this is how I use the image_proc package:
ROS_NAMESPACE=/ardrone/bottom rosrun image_proc image_proc

rosnode info svo gives this output:
Node [/svo]
Publications: 
 * /rosout [rosgraph_msgs/Log]
 * /svo/dense_input [svo_msgs/DenseInput]
 * /svo/image [sensor_msgs/Image]
 * /svo/image/compressed [sensor_msgs/CompressedImage]
 * /svo/image/compressed/parameter_descriptions [dynamic_reconfigure/ConfigDescription]
 * /svo/image/compressed/parameter_updates [dynamic_reconfigure/Config]
 * /svo/image/compressedDepth [sensor_msgs/CompressedImage]
 * /svo/image/compressedDepth/parameter_descriptions [dynamic_reconfigure/ConfigDescription]
 * /svo/image/compressedDepth/parameter_updates [dynamic_reconfigure/Config]
 * /svo/image/theora [theora_image_transport/Packet]
 * /svo/image/theora/parameter_descriptions [dynamic_reconfigure/ConfigDescription]
 * /svo/image/theora/parameter_updates [dynamic_reconfigure/Config]
 * /svo/info [svo_msgs/Info]
 * /svo/keyframes [visualization_msgs/Marker]
 * /svo/points [visualization_msgs/Marker]
 * /svo/pose [geometry_msgs/PoseWithCovarianceStamped]
 * /tf [tf2_msgs/TFMessage]

Subscriptions: 
 * /ardrone/bottom/image_rect [sensor_msgs/Image]
 * /svo/remote_key [unknown type]

Services: 
 * /svo/get_loggers
 * /svo/image/compressed/set_parameters
 * /svo/image/compressedDepth/set_parameters
 * /svo/image/theora/set_parameters
 * /svo/set_logger_level

contacting node http://juan:34907/ ...
Pid: 19891
Connections:
 * topic: /rosout
    * to: /rosout
    * direction: outbound
    * transport: TCPROS
 * topic: /tf
    * to: /rqt_gui_py_node_20048
    * direction: outbound
    * transport: TCPROS
 * topic: /ardrone/bottom/image_rect
    * to: /ardrone/bottom/image_proc (http://juan:40291/)
    * direction: inbound
    * transport: TCPROS

When I run roslaunch svo_ros live.launch this is the output:
... logging to /home/juan/.ros/log/1b6a94be-ab2c-11e9-84b5-68ecc55d6600/roslaunch-juan-19873.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://juan:45331/

SUMMARY
========

CLEAR PARAMETERS
 * /svo/

PARAMETERS
 * /rosdistro: kinetic
 * /rosversion: 1.12.14
 * /svo/cam_cx: 254.861406985
 * /svo/cam_cy: 132.774654931
 * /svo/cam_d0: 0.0254329004542
 * /svo/cam_d1: 0.00484972274251
 * /svo/cam_d2: -0.00316468715909
 * /svo/cam_d3: -0.0168351839378
 * /svo/cam_fx: 724.628466389
 * /svo/cam_fy: 722.57992602
 * /svo/cam_height: 360
 * /svo/cam_model: Pinhole
 * /svo/cam_topic: /ardrone/bottom/i...
 * /svo/cam_width: 640
 * /svo/grid_size: 30
 * /svo/loba_num_iter: 0
 * /svo/max_n_kfs: 10

NODES
  /
    svo (svo_ros/vo)

ROS_MASTER_URI=http://localhost:11311

process[svo-1]: started with pid [19891]
create vo_node
[ WARN] [1563654227.665696970]: Cannot find value for parameter: svo/publish_img_pyr_level, assigning default: 0
[ WARN] [1563654227.666169164]: Cannot find value for parameter: svo/publish_every_nth_img, assigning default: 1
[ WARN] [1563654227.666518905]: Cannot find value for parameter: svo/publish_every_nth_dense_input, assigning default: 1
[ WARN] [1563654227.667630230]: Cannot find value for parameter: svo/publish_world_in_cam_frame, assigning default: 1
[ WARN] [1563654227.668068619]: Cannot find value for parameter: svo/publish_map_every_frame, assigning default: 0
[ WARN] [1563654227.668674232]: Cannot find value for parameter: svo/publish_point_display_time, assigning default: 0
[ WARN] [1563654227.723902281]: Cannot find value for parameter: svo/publish_markers, assigning default: 1
[ WARN] [1563654227.724265622]: Cannot find value for parameter: svo/publish_dense_input, assigning default: 0
[ WARN] [1563654227.724677337]: Cannot find value for parameter: svo/accept_console_user_input, assigning default: 1
[ INFO] [1563654227.725143039]: Found parameter: svo/cam_model, value: Pinhole
[ INFO] [1563654227.725506489]: Found parameter: svo/cam_width, value: 640
[ INFO] [1563654227.725973892]: Found parameter: svo/cam_height, value: 360
[ INFO] [1563654227.726546888]: Found parameter: svo/cam_fx, value: 724.628
[ INFO] [1563654227.727511861]: Found parameter: svo/cam_fy, value: 722.58
[ INFO] [1563654227.727973110]: Found parameter: svo/cam_cx, value: 254.861
[ INFO] [1563654227.728630592]: Found parameter: svo/cam_cy, value: 132.775
[ INFO] [1563654227.729008329]: Found parameter: svo/cam_d0, value: 0.0254329
[ INFO] [1563654227.729363371]: Found parameter: svo/cam_d1, value: 0.00484972
[ INFO] [1563654227.729756166]: Found parameter: svo/cam_d2, value: -0.00316469
[ INFO] [1563654227.730147455]: Found parameter: svo/cam_d3, value: -0.0168352
[ WARN] [1563654227.733062765]: Cannot find value for parameter: svo/init_tz, assigning default: 0
[ WARN] [1563654227.733556722]: Cannot find value for parameter: svo/init_ty, assigning default: 0
[ WARN] [1563654227.733977116]: Cannot find value for parameter: svo/init_tx, assigning default: 0
[ WARN] [1563654227.734430037]: Cannot find value for parameter: svo/init_rz, assigning default: 0
[ WARN] [1563654227.734932064]: Cannot find value for parameter: svo/init_ry, assigning default: 0
[ WARN] [1563654227.735423323]: Cannot find value for parameter: svo/init_rx, assigning default: 0
[ WARN] [1563654227.735955773]: Cannot find value for parameter: svo/trace_name, assigning default: svo
[ WARN] [1563654227.736392991]: Cannot find value for parameter: svo/trace_dir, assigning default: /tmp
[ WARN] [1563654227.736796847]: Cannot find value for parameter: svo/n_pyr_levels, assigning default: 3
[ WARN] [1563654227.737244459]: Cannot find value for parameter: svo/use_imu, assigning default: 0
[ WARN] [1563654227.737669875]: Cannot find value for parameter: svo/core_n_kfs, assigning default: 3
[ WARN] [1563654227.738058809]: Cannot find value for parameter: svo/map_scale, assigning default: 1
[ INFO] [1563654227.738430533]: Found parameter: svo/grid_size, value: 30
[ WARN] [1563654227.738862273]: Cannot find value for parameter: svo/init_min_disparity, assigning default: 50
[ WARN] [1563654227.739248454]: Cannot find value for parameter: svo/init_min_tracked, assigning default: 50
[ WARN] [1563654227.739637115]: Cannot find value for parameter: svo/init_min_inliers, assigning default: 40
[ WARN] [1563654227.740006831]: Cannot find value for parameter: svo/klt_max_level, assigning default: 4
[ WARN] [1563654227.740380200]: Cannot find value for parameter: svo/klt_min_level, assigning default: 2
[ WARN] [1563654227.740740894]: Cannot find value for parameter: svo/reproj_thresh, assigning default: 2
[ WARN] [1563654227.741099962]: Cannot find value for parameter: svo/poseoptim_thresh, assigning default: 2
[ WARN] [1563654227.741450441]: Cannot find value for parameter: svo/poseoptim_num_iter, assigning default: 10
[ WARN] [1563654227.741803248]: Cannot find value for parameter: svo/structureoptim_max_pts, assigning default: 20
[ WARN] [1563654227.742164223]: Cannot find value for parameter: svo/structureoptim_num_iter, assigning default: 5
[ WARN] [1563654227.742532429]: Cannot find value for parameter: svo/loba_thresh, assigning default: 2
[ WARN] [1563654227.742911644]: Cannot find value for parameter: svo/loba_robust_huber_width, assigning default: 1
[ INFO] [1563654227.743310220]: Found parameter: svo/loba_num_iter, value: 0
[ WARN] [1563654227.743721830]: Cannot find value for parameter: svo/kfselect_mindist, assigning default: 0.12
[ WARN] [1563654227.744105338]: Cannot find value for parameter: svo/triang_min_corner_score, assigning default: 20
[ WARN] [1563654227.744500379]: Cannot find value for parameter: svo/triang_half_patch_size, assigning default: 4
[ WARN] [1563654227.744922057]: Cannot find value for parameter: svo/subpix_n_iter, assigning default: 10
[ INFO] [1563654227.745295054]: Found parameter: svo/max_n_kfs, value: 10
[ WARN] [1563654227.745654709]: Cannot find value for parameter: svo/img_imu_delay, assigning default: 0
[ WARN] [1563654227.745998801]: Cannot find value for parameter: svo/max_fts, assigning default: 120
[ WARN] [1563654227.746347076]: Cannot find value for parameter: svo/quality_min_fts, assigning default: 50
[ WARN] [1563654227.746707095]: Cannot find value for parameter: svo/quality_max_drop_fts, assigning default: 40
[ INFO] [1563654227.746815033]: SVO initialized
[ INFO] [1563654227.747361241]: Found parameter: svo/cam_topic, value: /ardrone/bottom/image_rect
[ INFO] [1563654228.140570988]: RESET
[ WARN] [1563654228.141023198]: First image has less than 100 features. Retry in more textured environment.
[ WARN] [1563654230.194863458]: First image has less than 100 features. Retry in more textured environment.
[ WARN] [1563654232.255400983]: First image has less than 100 features. Retry in more textured environment.
[ WARN] [1563654234.306474166]: First image has less than 100 features. Retry in more textured environment.
[ INFO] [1563654235.023326256]: Init: Selected first frame.
[ INFO] [1563654235.099029141]: Init: KLT tracked 105 features
[ INFO] [1563654235.099074841]: Init: KLT 6.19027px average disparity.
[ INFO] [1563654235.132374307]: Init: KLT tracked 105 features
[ INFO] [1563654235.132411503]: Init: KLT 9.05672px average disparity.
[ INFO] [1563654235.187872374]: Init: KLT tracked 103 features
[ INFO] [1563654235.187911980]: Init: KLT 22.0311px average disparity.
[ INFO] [1563654235.247569725]: Init: KLT tracked 103 features
[ INFO] [1563654235.247609159]: Init: KLT 29.52px average disparity.
[ INFO] [1563654235.295675335]: Init: KLT tracked 97 features
[ INFO] [1563654235.295720648]: Init: KLT 49.3085px average disparity.
[ INFO] [1563654235.338627980]: Init: KLT tracked 93 features
[ INFO] [1563654235.338677435]: Init: KLT 57.1931px average disparity.
[ INFO] [1563654235.348873497]: Init: Homography RANSAC 39 inliers.
[ WARN] [1563654235.348895448]: Init WARNING: 40 inliers minimum required.
[ INFO] [1563654235.348931120]: RESET

and it stays there. I'm in a place with good light and a lot of things in the floor and at different heights.
What can I do to have the model giving me the pose of the camera every time? Do I have to see that output in the topic /svo/pose of in /svo/points?

Originally posted by Dylan on ROS Answers with karma: 51 on 2019-07-21
Post score: 0

A:

[ WARN] [1563654234.306474166]: First
image has less than 100 features.
Retry in more textured environment.

tells that environment doesn't have enough features.
it's very important that when svo is in Init mode , camera moves slowly and linearly.

[ WARN] [1563654235.348895448]: Init
WARNING: 40 inliers minimum required.
[ INFO] [1563654235.348931120]: RESET

it's tells you move camera badly in init mod or  environment doesn't have enough features. i tested svo for drone in long time flight over 20 minutes and it's work very well

Originally posted by Hamid Didari with karma: 1769 on 2019-07-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Dylan on 2019-07-22:
Ok, but then it says [ INFO] [1563654235.023326256]: Init: Selected first frame., so I think that initializatiom is correct
Comment by Hamid Didari on 2019-07-22:
in svo, first an init image select and track features till camera moves enough and needs at least 40 features.it can see by green line on the image that comes from svo and after init the green line disappeared you can change the time of tracking by changing init_min_tracked and by changing init_min_inliers change minimum of features that needed
Comment by Dylan on 2019-07-22:
Ok, and which parameters did you use? I’m using an AR.Drone 2.0, which bottom’s camera is not so good
Comment by Hamid Didari on 2019-07-22:
in my opinion you better use orb slam and font camera it's better because svo works well with wide lens cameras
Comment by Dylan on 2019-07-22:
I need to use the bottom camera. I will use svo because it was recommended to me and I already spent a lot of time trying to make it works. Can you tell me about the parameters you used, or any good tutorial? The official tutorial is too short

