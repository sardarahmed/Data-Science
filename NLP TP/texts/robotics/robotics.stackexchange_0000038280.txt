Q:

Problems modifying teleop_base_keyboard

Hey there,
I wanted to try out a code that sends Twist/cmd_vel parameters over a topic. Therefore, I tried simplifying the code for teleop_base_keyboard (available here) with this code.
When I run it, instead of just taking in my keystrokes and not displaying them on screen, it does and I have to push enter to see the printf on what's being sent (right after the chatter_pub.publish(cmdvel); line). And even then, the values never change. I get the feeling it's never entering in any cases apart from the default one. What's displayed is:
Reading from keyboard
---------------------------
w/x : increase/decrease max linear speed by 10%
e/c : increase/decrease max angular speed by 10%
---------------------------
anything else : stop
---------------------------
wwww
The speed information sent is: 
 Linear speed x 0.000000  
  Angular speed z 0.000000  
w
 The speed information sent is: 
 Linear speed x 0.000000  
  Angular speed z 0.000000  
 The speed information sent is: 
 Linear speed x 0.000000  
  Angular speed z 0.000000  

Any input on what I'm doing wrong?
Thanks :)!

Originally posted by jlo on ROS Answers with karma: 385 on 2012-02-27
Post score: 0

A:

Based on your code, it's never going to send command messages. Only your default case sets "dirty" to true. That means that you will only issue commands if you reach the default case. And in the default case, speed and turn are zero, so multiplying speed and max_speed will always result in zero.

Originally posted by DimitriProsser with karma: 11163 on 2012-02-27
This answer was ACCEPTED on the original site
Post score: 1

