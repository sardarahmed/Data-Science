Q:

vision_ssd_detect does not detect

Ubuntu 16.04, CUDA8 and caffe installed properly:

vision_ssd_detect node runs (using provided launch) without any warnings
nvidia-smi says that it uses approximately 600MB of 1080ti's video memory regardless of image_raw resolution (compared 1920x1200 with 320x200)
rqt_graph shows that vision_ssd_detect node subscribed to the right topic

But nevertheless, vision_ssd_detect does not return any detected objects:

rostopic echo /detection/image_detector/objects command returns messages with empty list of objects, here's full message example: header:  seq: 426 stamp:  secs: 1562840561 nsecs: 831216836 frame_id: "cam_fc_near" objects: []

Hence Image Viewer Plugin does not show any activity on image

It is worth noting that YOLOv3 from vision_darknet_detect works properly, here's the example of its /detection/image_detector/objects message:
`    header:
seq: 187
stamp:
secs: 1562840690
nsecs: 964700791
frame_id: "cam_fc_near"
objects:
header: 
  seq: 0
  stamp: 
    secs: 0
    nsecs:         0
  frame_id: ''
id: 0
label: "traffic light"
score: 0.666867136955
color: 
  r: 0.0
  g: 0.0
  b: 0.0
  a: 0.0
valid: True...
...behavior_state: 0
user_defined_info: []

`

Originally posted by sergiev on ROS Answers with karma: 3 on 2019-08-01
Post score: 0

Original comments
Comment by amc-nu on 2019-08-05:
Can you please share?

Autoware version
SSD Caffe hash commit
Link to the prototext and pretrained model weights you're using
Output log of vision_ssd_detect. (Please use pastebin or some service to share the file)

So we can try to reproduce your problem?
Comment by sergiev on 2019-08-05:\

I'm using Autoware 1.12, it was set up according official instruction
git rev-parse HEAD returned 4817bf8b4200b35ada8ed0dc378dceaf38c539e4
all prototxts and caffemodel described here
here's the output log of roslaunch vision_ssd_detect vision_ssd_detect_launch

A:

Thanks for sharing the information.
Looking at your files. The problem is you're using Vanilla Caffe GoogleNet classification models, not the SSD detection models.
Please download the ones from the SSD's README repo marked as COCO from here:
https://github.com/weiliu89/caffe/tree/ssd#models
These links:

COCO SSD300: https://drive.google.com/open?id=0BzKzrI_SkD1_NDlVeFJDc2tIU1k
COCO SSD512: https://drive.google.com/open?id=0BzKzrI_SkD1_TW4wTC14aDdCTDQ

Finally, before launching delete the lines 1607 to 1609 from the deploy.prototxt file included in the tar file.
(Remove these lines =>)
    save_output_param {
      label_map_file: "data/VOC0712/labelmap_voc.prototxt"
    }

Originally posted by amc-nu with karma: 136 on 2019-08-05
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by huifeng on 2019-10-11:
I tried with COCO SSD512 model (my autoware version is autoware_v1_10 and cuda 9.0). Still there is no detected object. No warning and error  are in log. Do you know if there is anything more that I can try? thx

