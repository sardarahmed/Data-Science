Q:

How to write PCD file from topic without loss data?

I use RGBDSLAM to build the room model and sent topic by menu's 'Graph->Send Model'.
It send model to /rgbdslam/batch_clouds.
I write a receiver to receive that topic ,save it to PCD file, and use pcd_viewer to check.
It shows:

The above is RGBDSLAM's model.
The below is viewer by opening pcd file .
I turn it by moving cursor and it seems loss many data.
My receiver code is:
  #include <ros/ros.h>
  #include "std_msgs/String.h"
  
  #include <pcl/io/pcd_io.h>
  #include <pcl/point_types.h>
  

  void pcd_receive_Callback(const sen      sor_msgs::PointCloud2::ConstPtr& msg)
  {
          pcl::PointCloud<pcl::PointXYZRGB> cloud;
          pcl::fromROSMsg(*msg, cloud);
          pcl::io::savePCDFileASCII ("test_pcd.pcd", cloud);      
  }
  
  
  int  main (int argc, char** argv)
  {

          ros::init(argc, argv, "pcd_write_topic");
          ros::NodeHandle n;

          ros::Subscriber sub = n.subscribe("/rgbdslam/batch_clouds", 1000, pcd_receive_Callback);
          ros::spin();
  
  
          return (0);
  }
  

How to solve it?
Thank you~

Originally posted by sam on ROS Answers with karma: 2570 on 2012-06-10
Post score: 2

A:

Are you aware that you can save pcd files directly from rgbdslam?
Maybe the clouds are sent to fast for your machine and some are dropped. You can throttle the rate at which the clouds are sent by rgbdslam with a parameter. In your launch file set
<param name="config/send_clouds_rate"              value="2"/>

This will send the clouds out at 2 Hz.

Originally posted by Felix Endres with karma: 6468 on 2012-06-12
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by sam on 2012-06-12:
How to save to pcd file from rgbdslam directly? Thank you~
Comment by Felix Endres on 2012-06-12:
In the GUI: Graph->Save as... or Graph->Save Node-Wise. See the Status bar for a description.

