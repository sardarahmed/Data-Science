Q:

Is there a way to synchronize ROS time and the time originating from a rosbag?

Some details: I'd like to compare real world data with simulated data, for this reason I'd like to play a rosbag (containing the real world data) and apply the recorded commands to a Gazebo model of the robot. For this purpose I set /use_sim_time to true and call rosbag play with the option --clock. Unfortunately I observe jumps in /clock topic - as it seems to me both the simulated time (from Gazebo) and the time originating from the rosbag are published to /clock. This leads in the end to a defective result - in particular the odometry data provided by the robot_localization package comes along with huge variances (magnitude 1e+4).
Is there a solution to this problem? I would appreciate your help.
BR, Florian

Originally posted by florian on ROS Answers with karma: 15 on 2022-02-24
Post score: 1

A:

You likely recorded your bag with -a. You need to get the /clock topic out of it: rosbag filter your_bag.bag clock_removed.bag "topic != /clock"

Originally posted by Tom Moore with karma: 13689 on 2022-02-25
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by florian on 2022-02-25:
Thank you Tom. This worked for me. =)
BR, Florian
Comment by Mike Scheutzow on 2022-02-25:
@florian  Please don't create "an answer" that is not actually an answer to the question. To thank someone who helped you, you should use the link "add a comment" under their response.
Comment by rcbot on 2023-02-20:
I found small syntax error in Tom's rosbag command. the topic name should be in single quote (for example: "topic != '/clock' ")
rosbag filter your_bag.bag clock_removed.bag "topic != '/clock' "

