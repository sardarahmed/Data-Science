Q:

rviz increase network traffic on lo interface

Hi, there,
I have a robot with Velodyn 32E installed. This laser outputs data at around 18Mbps. In my configuration, the robot is configured as ROS master, a base station computer is configured as a client. When I start the launch file to launch the velodyne laser driver node at the robot side, I also run the rviz at my base station side. Now, I have an interesting observation, once I start rviz, even without subscribe to anything, the loopback (lo) network interface at my base station computer shoots up to 18Mbps. What happened here?   Thanks a lot.
UPDATE:
<launch> 
  <arg name="pcap" default=""/> 
  <arg name="calibration" default="$(find velodyne_pointcloud)/params/32db.yaml"/> 
  <include file="$(find velodyne_driver)/launch/nodelet_manager.launch"> 
    <arg name="model" value="32E"/> 
    <arg name="pcap" value="$(arg pcap)"/> 
  </include> 
  <include file="$(find velodyne_pointcloud)/launch/cloud_nodelet.launch"> 
    <arg name="calibration" value="$(arg calibration)"/> 
  </include> 
</launch>

Originally posted by BenMa on ROS Answers with karma: 76 on 2013-09-02
Post score: 1

Original comments
Comment by joq on 2013-09-03:
Are you running the node or nodelet versions of the driver and pointcloud conversion packages?
Comment by BenMa on 2013-09-03:
I am running the nodelet from the velodyne driver package.
Comment by joq on 2013-09-03:
Please update your question to add the launch script you use.
Comment by BenMa on 2013-09-04:
I simply run the sample launch file,
Comment by joq on 2013-09-04:
What version of the driver are you running? What ROS distro?
Comment by BenMa on 2013-09-04:
ROS is fuerte, Ubuntu12.04. I installed the stack by running sudo apt-get install ros-fuerte-velodyne
Comment by joq on 2013-09-04:
Since you are running velodyne_driver and velodyne_pointcloud on the same nodelet manager process, I would not expect that to generate loopback traffic by itself. Once rviz subscribes, the extra traffic makes sense. Is rviz already subscribed due to an earlier invocation?
Comment by BenMa on 2013-09-04:
I deleted all the rviz subscriptions and use bmon to check the lo traffic. It is still around 18 Mbps. and this slows down a lot of other coms

A:

I don't yet understand what is happening. I am only writing this as an "answer" for easier formatting.
You may get some insights from running this command on the robot:
$ rostopic bw /velodyne_packets

For your 32E, I'd expect that to report about 2MB/s (bytes, not bits). But, as long as velodyne_pointcloud is the only subscriber, I would not expect that bandwidth to appear on loopback. While rostopic is running, I would.
$ rostopic bw /velodyne_points

The corresponding point cloud published by velodyne_pointcloud will be considerably larger. It should not appear on the network unless something external to the nodelet process (like rostopic or rviz) is subscribing.

Originally posted by joq with karma: 25443 on 2013-09-05
This answer was ACCEPTED on the original site
Post score: 0

