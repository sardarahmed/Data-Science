Q:

Maths behind these calculations?

Hi,
I keep stumbling upon these two equations in odom calculations as they are used quite frequently in literature, however I can't seem to find any explanation on to how they are derived (an full example here: https://answers.ros.org/question/9494/running-a-simulated-odometry-node):
double delta_x = (vx * cos(th) - vy * sin(th)) * dt;
double delta_y = (vx * sin(th) + vy * cos(th)) * dt;

Could anyone please help me understand what's happening here? Perhaps if you have a reference that would be really helpful!

Originally posted by Hypomania on ROS Answers with karma: 120 on 2019-04-17
Post score: 0

A:

#q231942 will probably fully answer your question.
Just to sum-up the answer :
This is because all the information you get comes from the robot so your postions and velocities are in the robot frame. You need to convert to another frame (odom, map, etc...), and to do that you need to apply a rotation matrix.

Originally posted by Delb with karma: 3907 on 2019-04-17
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Hypomania on 2019-04-17:
Thank you for that, just what I needed!
Comment by Hypomania on 2019-04-17:
Sorry to bother you again, just to confirm, these calculations is where the data from the base_link frame is converted into odom or map frame?
Comment by Delb on 2019-04-18:
It just depends on what theta is because this formula can be apllied to convert from one frame to any other. Here i'm assuming it's to convert from the robot frame to odom since your example comes from someone who create an odometry node.
Comment by Hypomania on 2019-04-18:
Thank you for that, that's spot on!

