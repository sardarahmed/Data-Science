Q:

Error Rosmake usb_camera

Good evening
We are trying to "rosmake" the package usb_camera but rosmake fail. Here is the output :

mkdir -p bin
cd build && cmake -Wdev
-DCMAKE_TOOLCHAIN_FILE=/opt/ros/groovy/share/ros/core/rosbuild/rostoolchain.cma$
-- The C compiler identification is GNU 4.6.3
-- The CXX compiler identification is GNU 4.6.3
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Found PythonInterp: /usr/bin/python (found version "2.7.3")
[rosbuild] Building package usb_cam
Failed to invoke
/opt/ros/groovy/bin/rospack
deps-manifests usb_cam
[rospack] Error: the rosdep view is
empty: call 'sudo rosdep init' and
'rosdep update'
CMake Error at
/opt/ros/groovy/share/ros/core/rosbuild/public.cmake:129
(message):
Failed to invoke rospack to get
compile flags for package 'usb_cam'.
Look above for errors from rospack
itself.  Aborting.  Please fix the
broken dependency!
Call Stack (most recent call first):
/opt/ros/groovy/share/ros/core/rosbuild/public.cmake:203
(rosbuild_invoke_rospack)
CMakeLists.txt:5 (rosbuild_init)
-- Configuring incomplete, errors occurred! make: *** [all] Error 1

I´ve tried to do sudo rosdep init and the rosdep update but the update also failed :
pi@raspberrypi ~ $ rosdep update
reading in sources list data from /etc/ros/rosdep/sources.list.d
Hit https://github.com/ros/rosdistro/raw/master/rosdep/osx-homebrew.yaml
Hit https://github.com/ros/rosdistro/raw/master/rosdep/gentoo.yaml
Hit https://github.com/ros/rosdistro/raw/master/rosdep/base.yaml
Hit https://github.com/ros/rosdistro/raw/master/rosdep/python.yaml
Hit https://github.com/ros/rosdistro/raw/master/rosdep/ruby.yaml
Hit https://github.com/ros/rosdistro/raw/master/releases/fuerte.yaml
Query rosdistro index https://raw.github.com/ros/rosdistro/master/index.yaml
ERROR: Rosdep experienced an error: Unable to handle 'index' format version '2', please update rosdistro
Please go to the rosdep page [1] and file a bug report with the stack trace below.
[1] : http://www.ros.org/wiki/rosdep
rosdep version: 0.10.20
Traceback (most recent call last):
File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 118, in rosdep_main
exit_code = _rosdep_main(args)
File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 261, in _rosdep_main
return _no_args_handler(command, parser, options, args)
File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 269, in _no_args_handler
return command_handlerscommand
File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 426, in command_update
error_handler=update_error_handler)
File "/usr/lib/pymodules/python2.7/rosdep2/sources_list.py", line 422, in update_sources_list
for d, dist in get_index().distributions.iteritems():
File "/usr/lib/pymodules/python2.7/rosdep2/rosdistrohelper.py", line 58, in get_index
_RDCache.index = rosdistro.get_index(_RDCache.index_url)
File "/usr/lib/pymodules/python2.7/rosdistro/init.py", line 106, in get_index
return Index(data, base_url)
File "/usr/lib/pymodules/python2.7/rosdistro/index.py", line 51, in init
assert int(data['version']) == 1, "Unable to handle '%s' format version '%d', please update rosdistro" % (Index._type, int(data['version']))
AssertionError: Unable to handle 'index' format version '2', please update rosdistro
What´s happening? Can you help me please ?

Originally posted by 4LV4R0 on ROS Answers with karma: 70 on 2014-02-11
Post score: 0

Original comments
Comment by 4LV4R0 on 2014-02-11:
I have also followed this " http://answers.ros.org/question/122266/how-can-i-fix-unable-to-handle-index-format-version-2-please-update-rosdistro/" but everything is up to date ...
Comment by ahendrix on 2014-02-11:
What are your ROS and OS versions?
Comment by 4LV4R0 on 2014-02-11:
Ros groovy and Raspbian wheezy
Comment by ahendrix on 2014-02-11:
It sounds like the version of python-rosdep that's available in the repository that you're using isn't up to date. I would try to get in contact with the repository maintainer.
Comment by 4LV4R0 on 2014-02-12:
Thanks for your help. I´ll try to get in contact witg him.

A:

I started a thread into https://groups.google.com/forum/#!topic/ros-sig-embedded/6IEx-SqhaAo and repositorys of raspbian groovy have been updated.
I have upgrade by apt-get upgrade and everything was finally fine!

Originally posted by 4LV4R0 with karma: 70 on 2014-02-18
This answer was ACCEPTED on the original site
Post score: 0

