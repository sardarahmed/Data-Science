Q:

How do I numpy-ize a Service node or a Client node to manage Request or Response containing numpy array?

Hi,
I am trying to transmit a numpy array in a response of a service but I have some trouble to convert it in the appropriate type. I saw the numpy_msg tutorials it works fine for messages but I don't get how to make it work for request/response of services.
Thanks to you!

Originally posted by sylou on ROS Answers with karma: 1 on 2011-11-21
Post score: 0

A:

The numpy serialization/deserialization stubs has been generated in the corresponding PKG.srv.*; So one can probably override the default serialize() deserialize() in the same manner as numpy_msg does. Take the rospy_tutorial/005_AddTwoInts for an example,
You'll probably need to add these new lines:
import rospy.numpy_msg
AddTwoInts._request_class = rospy.numpy_msg.numpy_msg(AddTwoIntsRequest)
AddTwoInts._response_class = rospy.numpy_msg.numpy_msg(AddTwoIntsResponse)
AddTwoIntsRequest = rospy.numpy_msg.numpy_msg(AddTwoIntsRequest)
AddTwoIntsResponse= rospy.numpy_msg.numpy_msg(AddTwoIntsResponse)

I haven't got a chance to test the code myself, but hope this give you some idea.

Originally posted by tingfan with karma: 91 on 2011-12-05
This answer was ACCEPTED on the original site
Post score: 0

