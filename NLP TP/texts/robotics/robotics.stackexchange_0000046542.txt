Q:

How to read message from ros::MessageEvent object

I am trying to extract content of the message from ros::MessageEvent object.
The parameter
ros::MessageEvent<topic_tools::ShapeShifter const> msg_event
is passed to subscription callback function. We know the message type and definition. How can we extract the content of message from ShapeShifter object?
I am trying to do this. But I am stuck about how extract the information further.
boost::shared_ptr<topic_tools::ShapeShifter const> pose = msg_event.getMessage();
Thanks

Originally posted by Subhash on ROS Answers with karma: 1 on 2012-12-13
Post score: 0

Original comments
Comment by Lorenz on 2012-12-16:
Unfortunately, you failed to provide some information which makes it hard to be helpful. Please provide real code and the actual error messages you get. Additionally, always provide your Ubuntu version and the ROS version you are using. Read http://ros.org/wiki/Support

A:

I don't know how your code exactly looks like or what exactly you are trying to do but in order to instantiate a real message from a shape shifter message, you need to know its type and and you need to include the corresponding header files. For instance, to instantiate a geometry_msgs::Pose message:
#include <geometry_msgs/Pose.h>

void pose_subscriber(const boost::shared_ptr<const topic_tools::ShapeShifter> message) {
  boost::shared_ptr<geometry_msgs::Pose> pose = message.instantiate<geometry_msgs::Pose>();
  // Do stuff...
}

// The subscriber somewhere in your code...
ros::Subscriber subscriber = node_handle.subscribe<topic_tools::ShapeShifter>("pose_topic", 1, &pose_subscriber);

Originally posted by Lorenz with karma: 22731 on 2012-12-16
This answer was ACCEPTED on the original site
Post score: 0

