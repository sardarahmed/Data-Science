Q:

rosversion error when trying to run roscore

Hello,
when I try to run the roscore or start my project launch file I get the following error:
... logging to /home/nvidia/.ros/log/1c5e18a0-aae7-11e8-8e0e-00044b8d24bd/roslaunch-tegra-ubuntu-30432.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

Traceback (most recent call last):
   File "/usr/local/bin/rosversion", line 7, in <module>
     from rospkg.rosversion import main
ImportError: No module named rosversion
Invalid <param> tag: Cannot load command parameter [rosversion]: command [rosversion roslaunch] returned with code [1].

Param xml is <param command="rosversion roslaunch" name="rosversion"/>
The traceback for the exception was written to the log file

The ROS environment variables command env | grep ROS gives me the following:
ROS_ROOT=/opt/ros/kinetic/share/ros
ROS_PACKAGE_PATH=/home/nvidia/EVObot/src:/opt/ros/kinetic/share
ROS_MASTER_URI=http://localhost:11311
ROSLISP_PACKAGE_DIRECTORIES=/home/nvidia/EVObot/devel/share/common-lisp
ROS_DISTRO=kinetic
ROS_ETC_DIR=/opt/ros/kinetic/etc/ros

The rosversion -d command gives me the same error but actually on ROS Kinetic (edited from "Hydro 1.12.13").
The strange thing is, I did not change anything ROS related and it worked correctly before the strange error.
It seems there is a problem with the rosversion-file but it contains the following code:
#!/usr/bin/python2.7

# -*- coding: utf-8 -*-
import re
import sys

from rospkg.rosversion import main

if __name__ == '__main__':
    sys.argv[0] = re.sub(r'(-script\.pyw|\.exe)?$', '', sys.argv[0])
    sys.exit(main())

I'm grateful for any help!

Originally posted by cfk on ROS Answers with karma: 1 on 2018-08-28
Post score: 0

Original comments
Comment by gvdhoorn on 2018-08-28:
Hydro? Is this a special deployment on an old platform? Why does your ROS_ROOT say /opt/ros/kinetic?
Comment by cfk on 2018-08-29:
Sorry that was a stupid mistake. I checked my documents where I wrote down an older version of my system. Of couse I'm on ROS Kinetic.

A:

File "/usr/local/bin/rosversion"

this line seems to suggest you have a pip installed version of python-rospkg.
It could be that updated packages have been released, but since your /usr/local version is always taken instead of the regular one, you're still running the pip installed version.
The currently released rosversion file for Kinetic (in /usr/bin) starts with this (after the license block):
from __future__ import print_function

import os
import sys
import traceback

import rospkg
from rospkg.common import PACKAGE_FILE
from rospkg.rospack import ManifestManager

[..]

Originally posted by gvdhoorn with karma: 86574 on 2018-08-28
This answer was ACCEPTED on the original site
Post score: 1

