Q:

Fanuc Roboguide and ROS MoveIt Execution

Dear all,
My question concerns about specific details needed so that we can see movements that occur inside ROS/MoveIt/Rviz also in the simulated robot inside Roboguide.
Briefly, I use Ubuntu 18.04.2 LTS bionic and  ros-melodic.  I have ROS/Moveit respositories for fanuc. I downloaded, installed and built these repositories from this link under my catkin_ws.
On Windows side, I have installed Roboguide. I have followed  this link and  this link  to make necessary configurations inside Roboguide on the virtual controller. When creating the work-cell, I chose R-1000iA/80F robot model.
On Linux side, specifically, I used fanuc_r1000ia80f_moveit_config repo.
On the TP, I have started the ROS TPE program. The following message appears:
38497     RSTA Waiting for ROS state prox

then I run the following on a terminal in ROS pc.
roslaunch fanuc_r1000ia_support robot_state_visualize_r1000ia80f.launch robot_ip:=192.168.0.4 use_bswap:=false

Immediately, the following message appears on TP.
38499      RSTA Connected. 

When I jog the robot in Roboguide. RVIZ shows the same movements.
Within rviz, using the motion planning plugin, I can plan a very simple movement specifying an end state. However, when I try to execute, it waits for a while and then fails.
I received the following errors on the terminal in my ROS PC.
    [ERROR] [1597341098.351110836]: Unable to identify any set of controllers that can actuate the specified joints: [ joint_1 joint_2 joint_3 joint_4 joint_5 joint_6 ]
[ERROR] [1597341098.351167409]: Known controllers and their joints:

[ERROR] [1597341098.351240102]: Apparently trajectory initialization failed

Please, can you help me in this regard. Some suggestions or indicators to anything that may be the cause of this problem.
thanks,
Zahid

Originally posted by zahid990170 on ROS Answers with karma: 135 on 2020-07-13
Post score: 1

A:

If you only start the robot_state_visualize_r1000ia80f.launch, which allows you to visualise the current state, but nothing more, you cannot control motion.

Edit:

I had added a move_group node in the launch file to be able to experiment with motion control

Do not edit the files in the support packages. For normal usage, there is no need. If you think you need to change something in them, it's most likely because you haven't configured something correctly.
Also: the robot_state_visualize does not start the necessary driver components to be able to command motion, even if you'd add move_group to the .launch file.

However, later I used the following
roslaunch fanuc_r1000ia80f_moveit_config moveit_planning_execution.launch robot_ip:=192.168.0.4 use_bswap:=false

I was able to see the movements that I performed in rviz being done in Roboguide.

That would indeed be the correct .launch file to use for commanding the robot via MoveIt in Roboguide.

But, now I am getting this error TPIF-052 WARN FWD/BWD is disabled and I cannot run the ROS TP program again.I had tried FCTN->Abort All, but it does not work.

You could see whether FCTN->Disable FWD/BWD helps.
But seeing as you write you could command the robot in Roboguide using MoveIt, there is nothing wrong with the ROS side, including fanuc_driver.
I would suggest you ask Fanuc about your problems with the Teach Pendant and/or your controller.

Originally posted by gvdhoorn with karma: 86574 on 2020-08-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by zahid990170 on 2020-08-14:
thanks @gvdhoorn, I had added a move_group node in the launch file to be able to experiment with motion control. However, later I used the following
roslaunch fanuc_r1000ia80f_moveit_config moveit_planning_execution.launch robot_ip:=192.168.0.4 use_bswap:=false

I was able to see the movements that I performed in rviz being done in Roboguide.  But, now I am getting this error TPIF-052 WARN FWD/BWD is disabled and I cannot run the ROS TP program again.I had tried FCTN->Abort All, but it does not work.

