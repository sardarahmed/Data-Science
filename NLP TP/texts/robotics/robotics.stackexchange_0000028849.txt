Q:

'world' is protected, how do I get a pointer?

Hi, super dumb question... I'm writing a sensor plugin (subclass SensorPlugin) that wraps an Altimeter sensor and I need access to SimTime(). How do I get a pointer to the world object to call SimTime()? I see it in the sensor API (include/gazebo-9/gazebo/sensors/Sensor.hh) but it's protected. Is there some magic global variable that I'm missing?

Originally posted by clydemcqueen on Gazebo Answers with karma: 62 on 2019-09-23
Post score: 1

A:

It's not recommended to access the world from a sensor plugin because sensors don't run in the physics thread.
Maybe what you want are Altimeter::LastUpdateTime or Altimeter::LastMeasurementTime?

Originally posted by chapulina with karma: 7504 on 2019-09-23
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by clydemcqueen on 2019-09-24:
Thanks for the quick reply! I suspected as much. Altimeter::LastMeasurementTime is always 0 and Altimeter::LastUpdateTime seems 10-20ms later than ros_node->now(), which itself is later than Camera::LastMeasurementTime. Any advice? Perhaps I need to write a camera sensor plugin that will give me consistent time across multiple sensors? Or fix Altimeter::LastMeasurementTime?
Comment by clydemcqueen on 2019-11-23:
My workaround (so far): I hacked up a version of gazebo_ros_pkgs that use wall time, rather than SimTime or ROS time. While not ideal, all sensors report the same time. If there are other good options I'd love to hear about them!

