Q:

Sourcing workspace generated by a catkin_make install

I'm trying to distribute a binary version of my package. I have the catkin_make install command create the install directory in the right place and copy the required libs. The contents of the install directory are as follows:
include
(contains exported packages with generated header files for messages)
lib
(contains 3rd party dependencies as well as exported packages with executables)
share
(contains exported packages with misc. files such as package.xml)
My problem is that when I copy this directory to a new computer, I can't use ROS to run anything from it. I tried doing the following on the new machine within the distributed install directory:

Create a src directory
Run catkin_init_workspace
Run catkin_make to generate the devel and build directories
Source the generated devel/setup.bash script

rosrun my_package my_package_node still doesn't find my package. What can I do to get ROS to see my installed packages the way packages in /opt/ros/indigo work?

Originally posted by autonomy on ROS Answers with karma: 435 on 2016-03-24
Post score: 1

A:

You cannot use the devel folder as a redistributable, as it also references the src folder. Do this instead:

create a src directory (and fill it with your code)
run catkin_make install (catkin_init_workspace isn't necessary as catkin_make will do it implicitly)
copy/archive the install folder and move it to a new computer

And it should work so long as you have any dependencies that were not in the workspace installed.

Originally posted by William with karma: 17335 on 2016-03-24
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by autonomy on 2016-03-24:
That's essentially what I did (catkin_make_install and copied the install directory). But I can't use rosrun/roslaunch with my install folder on the new computer - it doesn't find the packages/launch files.
Comment by William on 2016-03-24:
It is catkin_make install not catkin_make_install and your question doesn't describe the install folder at all... If you're copying the install folder and it still isn't working then we'll need more information. Did you source the setup file in the install folder after copying it over?
Comment by autonomy on 2016-03-24:
Well yeah, it's a typo, there's no such command as catkin_make_install. And what do you mean my question "doesn't describe the install folder" - is it supposed to be different from what I did list? Mine only contains include, lib, and share directories. There is no setup file anywhere.
Comment by William on 2016-03-24:
Your question only mentions the devel folder, which is not the same as the install folder.
Comment by William on 2016-03-24:
"Source the generated devel/setup.bash script"
Comment by William on 2016-03-24:
If your install folder doesn't contain a setup.*sh file then I'd have to guess your workspace doesn't contain a catkin package.
Comment by autonomy on 2016-03-24:
Yeah, my install folder does not contain anything but include, lib, and share dirs. I'm attempting to generate the devel dir and setup.bash scripts by running catkin_init_workspace in the install directory on the new machine. So you think my package is not catkinized correctly?
Comment by joq on 2016-03-24:
If your install space has no setup.bash, then it was never created correctly.
Comment by gvdhoorn on 2016-03-24:
@autonomy: can you add the contents of your CMakeLists.txt to your OP? Do you have a catkin_package(..) statement in there somewhere?
Comment by William on 2016-03-24:
How did you create your install folder? by running catkin_make install? We don't seem to be on the same page in our terminology, have you had a look at http://www.ros.org/reps/rep-0128.html?
Comment by vacky11 on 2018-01-09:
Along with all the steps mentioned in the answer above, add the following line in your .bashrc file
source ~/catkin_ws/install/setup.bash

Comment by gvdhoorn on 2018-01-09:
@vacky11: but only if you actually have catkin_make install packages into the install space. Otherwise the line you show does nothing.

