Q:

Stereo Camera does not generate depth image

My camera is a usb driverless stereo camera that generate both left and right images into one. I'm trying to get the depth image from the camera but after split the images and running the stereo_image_proc there is no topic as "camera/depth/image" but only compressedDepth and which can not be viewed. Is there any package to generate depth image or convert the compresseddepth to viewable depth image? The topic list is shown below

/sxs_stereo/disparity
/sxs_stereo/left/camera_info
/sxs_stereo/left/image_color
/sxs_stereo/left/image_color/compressed
/sxs_stereo/left/image_color/compressed/parameter_descriptions
/sxs_stereo/left/image_color/compressed/parameter_updates
/sxs_stereo/left/image_color/compressedDepth
/sxs_stereo/left/image_color/compressedDepth/parameter_descriptions
/sxs_stereo/left/image_color/compressedDepth/parameter_updates
/sxs_stereo/left/image_color/theora
/sxs_stereo/left/image_color/theora/parameter_descriptions
/sxs_stereo/left/image_color/theora/parameter_updates
/sxs_stereo/left/image_mono
/sxs_stereo/left/image_mono/compressed
/sxs_stereo/left/image_mono/compressed/parameter_descriptions
/sxs_stereo/left/image_mono/compressed/parameter_updates
/sxs_stereo/left/image_mono/compressedDepth
/sxs_stereo/left/image_mono/compressedDepth/parameter_descriptions
/sxs_stereo/left/image_mono/compressedDepth/parameter_updates
/sxs_stereo/left/image_mono/theora
/sxs_stereo/left/image_mono/theora/parameter_descriptions
/sxs_stereo/left/image_mono/theora/parameter_updates
/sxs_stereo/left/image_raw
/sxs_stereo/left/image_raw/compressed
/sxs_stereo/left/image_raw/compressed/parameter_descriptions
/sxs_stereo/left/image_raw/compressed/parameter_updates
/sxs_stereo/left/image_raw/compressedDepth
/sxs_stereo/left/image_raw/compressedDepth/parameter_descriptions
/sxs_stereo/left/image_raw/compressedDepth/parameter_updates
/sxs_stereo/left/image_raw/theora
/sxs_stereo/left/image_raw/theora/parameter_descriptions
/sxs_stereo/left/image_raw/theora/parameter_updates
/sxs_stereo/left/image_rect
/sxs_stereo/left/image_rect/compressed
/sxs_stereo/left/image_rect/compressed/parameter_descriptions
/sxs_stereo/left/image_rect/compressed/parameter_updates
/sxs_stereo/left/image_rect/compressedDepth
/sxs_stereo/left/image_rect/compressedDepth/parameter_descriptions
/sxs_stereo/left/image_rect/compressedDepth/parameter_updates
/sxs_stereo/left/image_rect/theora
/sxs_stereo/left/image_rect/theora/parameter_descriptions
/sxs_stereo/left/image_rect/theora/parameter_updates
/sxs_stereo/left/image_rect_color
/sxs_stereo/left/image_rect_color/compressed
/sxs_stereo/left/image_rect_color/compressed/parameter_descriptions
/sxs_stereo/left/image_rect_color/compressed/parameter_updates
/sxs_stereo/left/image_rect_color/compressedDepth
/sxs_stereo/left/image_rect_color/compressedDepth/parameter_descriptions
/sxs_stereo/left/image_rect_color/compressedDepth/parameter_updates
/sxs_stereo/left/image_rect_color/theora
/sxs_stereo/left/image_rect_color/theora/parameter_descriptions
/sxs_stereo/left/image_rect_color/theora/parameter_updates
/sxs_stereo/points2
/sxs_stereo/right/camera_info
/sxs_stereo/right/image_color
/sxs_stereo/right/image_color/compressed
/sxs_stereo/right/image_color/compressed/parameter_descriptions
/sxs_stereo/right/image_color/compressed/parameter_updates
/sxs_stereo/right/image_color/compressedDepth
/sxs_stereo/right/image_color/compressedDepth/parameter_descriptions
/sxs_stereo/right/image_color/compressedDepth/parameter_updates
/sxs_stereo/right/image_color/theora
/sxs_stereo/right/image_color/theora/parameter_descriptions
/sxs_stereo/right/image_color/theora/parameter_updates
/sxs_stereo/right/image_mono
/sxs_stereo/right/image_mono/compressed
/sxs_stereo/right/image_mono/compressed/parameter_descriptions
/sxs_stereo/right/image_mono/compressed/parameter_updates
/sxs_stereo/right/image_mono/compressedDepth
/sxs_stereo/right/image_mono/compressedDepth/parameter_descriptions
/sxs_stereo/right/image_mono/compressedDepth/parameter_updates
/sxs_stereo/right/image_mono/theora
/sxs_stereo/right/image_mono/theora/parameter_descriptions
/sxs_stereo/right/image_mono/theora/parameter_updates
/sxs_stereo/right/image_raw
/sxs_stereo/right/image_raw/compressed
/sxs_stereo/right/image_raw/compressed/parameter_descriptions
/sxs_stereo/right/image_raw/compressed/parameter_updates
/sxs_stereo/right/image_raw/compressedDepth
/sxs_stereo/right/image_raw/compressedDepth/parameter_descriptions
/sxs_stereo/right/image_raw/compressedDepth/parameter_updates
/sxs_stereo/right/image_raw/theora
/sxs_stereo/right/image_raw/theora/parameter_descriptions
/sxs_stereo/right/image_raw/theora/parameter_updates
/sxs_stereo/right/image_rect
/sxs_stereo/right/image_rect/compressed
/sxs_stereo/right/image_rect/compressed/parameter_descriptions
/sxs_stereo/right/image_rect/compressed/parameter_updates
/sxs_stereo/right/image_rect/compressedDepth
/sxs_stereo/right/image_rect/compressedDepth/parameter_descriptions
/sxs_stereo/right/image_rect/compressedDepth/parameter_updates
/sxs_stereo/right/image_rect/theora
/sxs_stereo/right/image_rect/theora/parameter_descriptions
/sxs_stereo/right/image_rect/theora/parameter_updates
/sxs_stereo/right/image_rect_color
/sxs_stereo/right/image_rect_color/compressed
/sxs_stereo/right/image_rect_color/compressed/parameter_descriptions
/sxs_stereo/right/image_rect_color/compressed/parameter_updates
/sxs_stereo/right/image_rect_color/compressedDepth
/sxs_stereo/right/image_rect_color/compressedDepth/parameter_descriptions
/sxs_stereo/right/image_rect_color/compressedDepth/parameter_updates
/sxs_stereo/right/image_rect_color/theora
/sxs_stereo/right/image_rect_color/theora/parameter_descriptions
/sxs_stereo/right/image_rect_color/theora/parameter_updates
/sxs_stereo/stereo_image_proc/parameter_descriptions
/sxs_stereo/stereo_image_proc/parameter_updates
/sxs_stereo/stereo_image_proc_debayer_left/parameter_descriptions
/sxs_stereo/stereo_image_proc_debayer_left/parameter_updates
/sxs_stereo/stereo_image_proc_debayer_right/parameter_descriptions
/sxs_stereo/stereo_image_proc_debayer_right/parameter_updates
/sxs_stereo/stereo_image_proc_rectify_color_left/parameter_descriptions
/sxs_stereo/stereo_image_proc_rectify_color_left/parameter_updates
/sxs_stereo/stereo_image_proc_rectify_color_right/parameter_descriptions
/sxs_stereo/stereo_image_proc_rectify_color_right/parameter_updates
/sxs_stereo/stereo_image_proc_rectify_mono_left/parameter_descriptions
/sxs_stereo/stereo_image_proc_rectify_mono_left/parameter_updates
/sxs_stereo/stereo_image_proc_rectify_mono_right/parameter_descriptions
/sxs_stereo/stereo_image_proc_rectify_mono_right/parameter_updates

Originally posted by mibclaric on ROS Answers with karma: 1 on 2019-07-03
Post score: 0

A:

The wiki page for stereo_image_proc says that is publishes disparity and points2 topics. I see both of those in your output:
/sxs_stereo/disparity
/sxs_stereo/points2

You can usually use those images for 3D processing, depending on your application. If you really need a depth image for some reason, you can probably find a node to convert the disparity image to a depth image.

Originally posted by ahendrix with karma: 47576 on 2019-07-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by mibclaric on 2019-07-08:
Thank you! That makes sense! However, when I try to run the point cloud on rviz, there is an error message showed up that the topic "/sxs_stereo/points2" have an empty frame_ID, I know for the image_publisher I can change the frame_ID by changing the parameter, but there is no parameter in stereo_image_proc for frame_ID. How can I add it? Should I create a tf broadcaster?
Comment by ahendrix on 2019-07-08:
From the stero_iamge_proc wiki page:

Point clouds are generated in the optical frame of the left imager (X Right, Y Down, Z out).

You probably just need to set the frame_id on your left stereo image.

