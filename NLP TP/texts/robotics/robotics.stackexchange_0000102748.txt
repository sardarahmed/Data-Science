Q:

Need help on 'Unmet dependencies' error when installing ROS Melodic

System: I'm running Ubuntu 18.04.6 64 bit with kernel 5.4.0-131-generic on Intel Core i5 CPU
Please help me successfully install ROS Melodic
When following the installation guide for ROS Melodic the following encountered an error:
(I have scoured the internet to find a solution, but nothing has worked!)
(base) sam@nexus:~$ sudo apt install ros-melodic-desktop-full
Reading package lists... Done
Building dependency tree       
Reading state information... Done
ros-melodic-desktop-full is already the newest version (1.4.1-0bionic.20221025.215612).
You might want to run 'apt --fix-broken install' to correct these.
The following packages have unmet dependencies:
 python-rosdep-modules : Depends: python-rospkg-modules (>= 1.4.0) but it is not going to be installed
 python-rosdistro-modules : Depends: python-rospkg-

modules but it is not going to be installed
 ros-melodic-rqt-gui : Depends: python-rospkg-modules but it is not going to be installed
 ros-melodic-rqt-robot-monitor : Depends: python-rospkg-modules but it is not going to be installed
E: Unmet dependencies. Try 'apt --fix-broken install' with no packages (or specify a solution).

============================
Then I tried:
(base) sam@nexus:~$ sudo apt --fix-broken install
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Correcting dependencies... Done
The following packages were automatically installed and are no longer required:
  efibootmgr libfwup1 libllvm9 linux-hwe-5.4-headers-5.4.0-124 linux-hwe-5.4-headers-5.4.0-125 linux-hwe-5.4-headers-5.4.0-126 linux-hwe-5.4-headers-5.4.0-128
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  python-rospkg-modules

The following NEW packages will be installed:
  python-rospkg-modules
0 upgraded, 1 newly installed, 0 to remove and 8 not upgraded.
948 not fully installed or removed.
Need to get 0 B/24.0 kB of archives.
After this operation, 135 kB of additional disk space will be used.
Do you want to continue? [Y/n] Y
(Reading database ... 341929 files and directories currently installed.)
Preparing to unpack .../python-rospkg-modules_1.4.0-1_all.deb ...
Unpacking python-rospkg-modules (1.4.0-1) ...
dpkg: error processing archive /var/cache/apt/archives/python-rospkg-modules_1.4.0-1_all.deb (--unpack):

 trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/__init__.py', which is also in package python-rospkg 1.1.4-1
Errors were encountered while processing:
 /var/cache/apt/archives/python-rospkg-modules_1.4.0-1_all.deb
E: Sub-process /usr/bin/dpkg returned an error code (1)

============================
Then I tried:
(base) sam@nexus:~$ sudo apt --fix-broken install python-rospkg-modules
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  efibootmgr libfwup1 libllvm9 linux-hwe-5.4-headers-5.4.0-124 linux-hwe-5.4-headers-5.4.0-125 linux-hwe-5.4-headers-5.4.0-126 linux-hwe-5.4-headers-5.4.0-128
Use 'sudo apt autoremove' to remove them.
The following NEW packages will be installed:
  python-rospkg-modules
0 upgraded, 1 newly installed, 0 to remove and 8 not upgraded.

948 not fully installed or removed.
Need to get 0 B/24.0 kB of archives.
After this operation, 135 kB of additional disk space will be used.
(Reading database ... 341929 files and directories currently installed.)
Preparing to unpack .../python-rospkg-modules_1.4.0-1_all.deb ...
Unpacking python-rospkg-modules (1.4.0-1) ...
dpkg: error processing archive /var/cache/apt/archives/python-rospkg-modules_1.4.0-1_all.deb (--unpack):
 trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/__init__.py', which is also in package python-rospkg 1.1.4-1
Errors were encountered while processing:
 /var/cache/apt/archives/python-rospkg-modules_1.4.0-1_all.deb

E: Sub-process /usr/bin/dpkg returned an error code (1)

============================
FYI:
(base) sam@nexus:~$ apt-cache show python-rospkg-modules
Package: python-rospkg-modules
Priority: optional
Section: python
Installed-Size: 132
Maintainer: Ken Conley <kwc@willowgarage.com>
Architecture: all
Version: 1.4.0-1
Replaces: python-rospkg (<< 1.1.0)
Depends: python (<< 2.8), python (>= 2.7), python-yaml, python:any (>= 2.6.6-7~), python-catkin-pkg-modules, lsb-release
Conflicts: python-rospkg (<< 1.1.0)

Filename: pool/main/p/python-rospkg-modules/python-rospkg-modules_1.4.0-1_all.deb
SHA512: 98cfab3b71859449fcc3123bf433113bcdede6c230685435f616bf620b00f34bc7634bd5971dd260402dbacf3a46f89042cdf8a91b077cf454b0106a51ddcc60
Size: 24020
SHA256: 17d89de452b1be9dc22a67875782497aa6f00b37a80905e2cac821f916e059fe
SHA1: f37cd81928257147c44d799421086e160fad2663
MD5sum: 2fbacb0e4fe9e296e2bedca4baf42872
Description: ROS package library
         Library for retrieving information about ROS packages and stacks.

Description-md5: 1f0f66a0136715f5b0d845083b68d081
Homepage: http://wiki.ros.org/rospkg

============================
Finally, I tried:
(base) sam@nexus:~$ sudo dpkg -i --force-overwrite /var/cache/apt/archives/python-rospkg-modules_1.4.0-1_all.deb
[sudo] password for sam: 
(Reading database ... 341929 files and directories currently installed.)
Preparing to unpack .../python-rospkg-modules_1.4.0-1_all.deb ...
Unpacking python-rospkg-modules (1.4.0-1) ...
dpkg: warning: overriding problem because --force enabled:
dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/__init__.py', which is also in package python-rospkg 

1.1.4-1

dpkg: warning: overriding problem because --force enabled:
dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/common.py', which is also in package python-rospkg 1.1.4-1
dpkg: warning: overriding problem because --force enabled:
    dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/distro.py', which is also in package python-rospkg 

1.1.4-1
dpkg: warning: overriding problem because --force enabled:
dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/environment.py', which is also in package python-rospkg 1.1.4-1
dpkg: warning: overriding problem because --force enabled:

dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/manifest.py', which is also in package python-rospkg 1.1.4-1
dpkg: warning: overriding problem because --force enabled:
dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/os_detect.py', which is also in package python-rospkg 1.1.4-1
dpkg: warning: overriding problem because --force enabled:

dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/rospack.py', which is also in package python-rospkg 1.1.4-1
dpkg: warning: overriding problem because --force enabled:
dpkg: warning: trying to overwrite '/usr/lib/python2.7/dist-packages/rospkg/stack.py', which is also in package python-rospkg 1.1.4-1
dpkg: dependency problems prevent configuration of python-rospkg-modules:

 python-rospkg-modules depends on python-catkin-pkg-modules; however:
  Package python-catkin-pkg-modules is not configured yet.

dpkg: error processing package python-rospkg-modules (--install):
 dependency problems - leaving unconfigured
Errors were encountered while processing:
 python-rospkg-modules

============================
How do I fix this for a successful install?

Originally posted by TurtleBot_Fan on ROS Answers with karma: 287 on 2022-11-22
Post score: 0

A:

Before I asked for help, many probable solutions were found on the internet, but none worked.
While doing a completely different internet query, I stumbled on the answer.
Just do the following when all else fails: sudo apt -o Dpkg::Options::="--force-overwrite" --fix-broken install
All will then work!

Originally posted by TurtleBot_Fan with karma: 287 on 2022-11-23
This answer was ACCEPTED on the original site
Post score: 0

