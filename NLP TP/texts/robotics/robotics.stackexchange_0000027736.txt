Q:

Gazebo 6 update rate settings

Hello everybody,
I am working with Gazebo 6 and I would like to decrease CPU consommation.
I saw many post on this and for example this one : http://answers.ros.org/question/35699/gazebo-real-and-simulation-time/
But when I try to set the update rate to a negative value in the world file, Gazebo run as fast as possible (gzserver at 305% CPU on an empty world).
<physics type="ode">
        <max_step_size>0.001</max_step_size>
        <real_time_factor>1</real_time_factor>
        <real_time_update_rate>-1</real_time_update_rate>
        <gravity>0 0 -9.8</gravity>
</physics>

I would like the simulation to run real time factor without using 100% CPU for an empty world.
Is this behavior should work with max_step_size set to 0.001 and real_time_update_rate set to 1000 ?
Is there a configuration problem with my computer ? (I7 - nvidia GTX 850m)
Thanks in advance.

Originally posted by Brosseau.F on Gazebo Answers with karma: 284 on 2016-05-06
Post score: 0

A:

A negative value for  <real_time_update_rate> will cause Gazebo to run as fast as possible, and will therefore consume as much CPU as possible.
If you want to run in real time, set the <real_time_update_rate> to be 1.0/<max_step_size>.
When I run gzserver with an empty world, I get around 7.3% CPU usage. Can you try running just gzserver?

Originally posted by nkoenig with karma: 7676 on 2016-05-10
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Brosseau.F on 2016-05-11:
I run gzserver as you said and I have 6% CPU usage. When I run an empty world using roslaunch and launch file I get 13 % CPU usage for gzserver. But gzclient is always at 100% CPU usage. Is this the expected behavior ?
Comment by nkoenig on 2016-05-11:
Running gzserver through roslaunch shouldn't double the CPU usage. That requires some exploration. Gzclient will consume 100% CPU.
Comment by Brosseau.F on 2016-05-18:
Ok thanks for your answer.

