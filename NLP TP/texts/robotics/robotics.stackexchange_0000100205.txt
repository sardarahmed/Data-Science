Q:

"what(): can't subtract times with different time sources [2 != 1]" error when spawning diff_drive_controller on ros2_control

I'm using ros2_control to control my robot.
After exectue controller_manager, when I spawned "diff_drive_controller" I have this error.
[ros2_control_node-1] [INFO] [1632907663.808010997] [controller_manager]: update rate is 50 Hz
[ros2_control_node-1] [INFO] [1632907695.226861708] [controller_manager]: Loading controller 'diff_drive_controller'
[ros2_control_node-1] [INFO] [1632907695.255700365] [controller_manager]: Configuring controller 'diff_drive_controller'
[ros2_control_node-1] terminate called after throwing an instance of 'std::runtime_error'
[ros2_control_node-1]   what():  can't subtract times with different time sources [2 != 1]

another terminal shown as
$ ros2 control load_controller --set-state start diff_drive_controller
Sucessfully loaded controller diff_drive_controller into state active

I tried add parameter use_sim_time: True to controller_manager, diff_drive_controller.. but result is same..
How can I solve this error?

Originally posted by byeongkyu on ROS Answers with karma: 126 on 2021-09-29
Post score: 0

A:

It was solved by updating ros2_control packages.

Originally posted by byeongkyu with karma: 126 on 2021-10-06
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by destogl on 2021-11-29:
This should not actually be solved by solely updating the packages. This can still be an issue, depending which time-source is used in a commanding package.
Comment by afrixs on 2021-12-08:
Building ros2_control and (for simulation) gazebo_ros2_control from source solved the issue for me too (diff_drive_controller can be installed via apt)... Crash didn't occur no matter whether controller_manager spawner node was launched with use_sim_time:=True or False. Looks like some kind of incompatibility between packages in current Galactic sync.

