Q:

Convert Protobuf Message to ROS Message

Hi,
i just got the issue, that my incoming message (via an external libary) is in Protobuf 2.5 format.
i got those .proto files and let them generate in catkin_make
now i need a gateway function cause already existing nodes need the data as ros message
those are generated via the .msg files
the .proto files have the same internal stuff than the .msg file
as example the .proto file:
package Grid
message MsgExample
{
optional float f_A = 10 [default = - 66666.0];
optional float f_B = 20 [default = - 55555.0];
optional int32 i_A = 1 [default = 0];

and my ros message looks like:
#MsgExample

float32 f_A
float32 f_B
int32 i_A

is it possible to directly copy the to each other?
not only one by one, cause in some cases these are really big number of different variables inside of a message.
at the moment i have to do for every message
ros_message::MsgExample myRosMessage;

    Grid::MsgExample myProtoMessage
   // this data i get from a callback (not important for my question where the data coming from)
    
    myRosMessage.f_A = myProtoMessage .f_a();
    myRosMessage.f_B = myProtoMessage .f_b();
    myRosMessage.i_A = myProtoMessage .i_a();

to publish the ros message later
is need something to directy publish the protobuf message as ros message
or to only do it with one operation
like
myRosMessage = myProtoMessage

is this possible?
thanks for your help and intrest
best regards
Rene Gaertner

Originally posted by ReneGaertner on ROS Answers with karma: 21 on 2015-02-25
Post score: 0

A:

My recommendation would be to write a function which does the conversion for you for each data type. You can do tricks and overload operators but that usually ends up with less readable code.

Originally posted by tfoote with karma: 58457 on 2015-02-25
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by tfoote on 2015-02-27:
Unfortunately if you change the message definitions you will need to update the code. If you want to fully automate that you're starting to look at code generators and ways to define the mappings between the two messages. You will need to maintain a mapping between them, in code is usually easiest
Comment by ReneGaertner on 2015-03-02:
i  m just going that way, i have a file with the mapping options and search for my topic name to find which one is for which other message, than i choose the 2 header files of the message and fill them to each other. At the moment it s not working but seems to be a good way to do it.
Comment by jinder1s on 2018-04-20:
Hi tfoote,
I'm curious if you would change your recommendations now?(Sorry if this is not the right avenue to ask that question)
-jinder
Comment by tfoote on 2018-04-20:
No, why would you expect a change in the recommendation?

