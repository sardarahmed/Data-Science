Q:

topic remapping in synchronised message_filters

I am trying to synchronise a compressed depth image and its camera info:
image_transport::SubscriberFilter sub_image(it, "image", 10);
message_filters::Subscriber<sensor_msgs::CameraInfo> sub_info(n, "camera_info", 10);
message_filters::Synchronizer<ApproxSync> sync(ApproxSync(100), sub_info, sub_image);

The original topics are:

/camera/depth/image_rect_raw/compressedDepth
(to be mapped to: image)
/camera/depth/camera_info (to be mapped to: camera_info)

Only the compressed depth has been logged.
I am using the arguments
image:=/camera/depth/image_rect_raw _image_transport:=compressedDepth camera_info:=/camera/depth/camera_info for the executable, which are supposed to remap the topics and select the image transport.
However, rqt's Node Graph shows that the node is subscribing to /image/compressedDepth, i.e. it is ignoring the topic remapping for image but applies the image transport extension of the topic before the remapping.
The synchronisation works, when using the full topic names and only the argument _image_transport:=compressedDepth:
image_transport::SubscriberFilter sub_image(it, "/camera/depth/image_rect_raw", 10);
message_filters::Subscriber<sensor_msgs::CameraInfo> sub_info(n, "/camera/depth/camera_info", 10);

Originally posted by Christian Rauch on ROS Answers with karma: 214 on 2018-05-04
Post score: 0

A:

A workaround is to manually remap the topic via ros::names::remap(<topic>):
image_transport::SubscriberFilter sub_image(it, ros::names::remap("image"), 10);
message_filters::Subscriber<sensor_msgs::CameraInfo> sub_info(n, ros::names::remap("camera_info"), 10);

Originally posted by Christian Rauch with karma: 214 on 2018-05-06
This answer was ACCEPTED on the original site
Post score: 1

