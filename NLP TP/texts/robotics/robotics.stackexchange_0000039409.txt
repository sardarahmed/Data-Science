Q:

The rosmake error on compiling mjpeg_server package

Hi, all,
 I want to find way to load the video on the web browser, after I can not try 

gscam and rosbridge, I find maybe I can use mjpeg_server and rosbridge. I think the
materials on bosch-ros-pkg is very useful, however, when I use the way from the
remote_lab, the rosmake can not pass on the
robot_booking, the errors are:
CMake Error at /opt/ros/diamondback/ros/core/rosbuild/public.cmake:113 (message):
Failed to invoke rospack to get compile flags for package 'robot_booking'.
Look above for errors from rospack itself.  Aborting.  Please fix the
broken dependency!

Call Stack (most recent call first):
/opt/ros/diamondback/ros/core/rosbuild/public.cmake:183 (rosbuild_invoke_rospack)
CMakeLists.txt:12 (rosbuild_init)
-- Configuring incomplete, errors occurred!
[ rosmake ] Output from build of package robot_booking written to:
[ rosmake ]    /home/tairen/.ros/rosmake/rosmake_output-20120408-182840/robot_booking/build_output.log
[rosmake-1] Finished <<< robot_booking [FAIL] [ 1.01 seconds ]
[ rosmake ] Halting due to failure in package robot_booking.
[ rosmake ] Waiting for other threads to complete.
[rosmake-3] Finished <<< rosjs_pr2interaction [PASS] [ 1.24 seconds ]
[ rosmake ] Output from build of package pointcloud_snapshot_service written to:
After that, I think I just need to the mjpeg_server package, so I compile the 
 mjpeg_server individually, the error occurs again:

In file included from     /opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/flann_base.hpp:39:0,
from   /opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/flann.hpp:48,
from /opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/opencv.hpp:48,
from /opt/ros/diamondback/stacks/remotelab/remote_lab/mjpeg_server/src/mjpeg_server.cpp:51:
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:66:2: error: expected identifier before numeric constant
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:66:2: error: expected ‘}’ before numeric constant
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:66:2: error: expected unqualified-id before numeric constant
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:124:32: error: expected ‘)’ before ‘algorithm_’
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:128:10: error: ‘flann_algorithm_t’ does not name a type
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:132:2: error: ‘flann_algorithm_t’ does not name a type
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:136:9: error: ‘ObjectFactory’ does not name a type
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:137:12: error: ‘ParamsFactory’ does not name a type
/opt/ros/diamondback/stacks/vision_opencv/opencv2/opencv/include/opencv2/flann/general.h:146:1: error: expected declaration before ‘}’ token
make[3]: *** [CMakeFiles/mjpeg_server.dir/src/mjpeg_server.o] Error 1
make[3]: Leaving directory /opt/ros/diamondback/stacks/remotelab/remote_lab/mjpeg_server/build' make[2]: *** [CMakeFiles/mjpeg_server.dir/all] Error 2 make[2]: Leaving directory /opt/ros/diamondback/stacks/remotelab/remote_lab/mjpeg_server/build'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/opt/ros/diamondback/stacks/remotelab/remote_lab/mjpeg_server/build'
I check the error, it looks like there is error on the /opencv2/flann/general.h,
but the general.h is very neat, I do not find the errors what are show above, so
what is the problem, is problem in my diamondback stacks? Can anyone give me a 
suggestion?
  Thanks a lot!!!

Originally posted by tairen on ROS Answers with karma: 56 on 2012-04-08
Post score: 0

A:

Maybe it depends on different version, when I use the ROS electric version to compile mjpeg_server package, I can avoid these errors, and more greatly, I can use the compiled package bin file on the diamondback too.
Hope this will help others who still want to use diamondback + mjpeg_server for some special reasons.

Originally posted by tairen with karma: 56 on 2012-04-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by marija on 2012-12-13:
I was also interested in using diamondback + mjpeg_server. I checked out the package at http://svn.code.sf.net/p/bosch-ros-pkg/code/branches/diamondback/stacks/remote_lab/mjpeg_server/ , compiled it without errors and works like a charm!

