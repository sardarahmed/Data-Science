Q:

hokuyo_node using 2 hokuyos at the same time

I have 2 hokuyo lasers which I want to use for mapping with hector_slam. I want both of them to map simultaneously so I could get a 360' view at once.
What would be a good way to do this? Should both lasers publish to 1 topic? or should they use 2 different topics, and if so would I be able to incorporate 2 topics into 1 map?
Thanks!

Originally posted by kost9 on ROS Answers with karma: 97 on 2014-10-05
Post score: 1

A:

I'm not familiar with how hector_slam works, but you may be able to get away with publishing both scans on the same topic but with different tf frames for orientation.
Otherwise, you could create an intermediary node using a time sync message filter, convert both to pointclouds, add the two clouds, and then turn the combined cloud back into a laserscan.

Originally posted by paulbovbel with karma: 4518 on 2014-10-06
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by kost9 on 2014-10-06:
Thanks for the answer, I shall try the first method you suggested. I now only need to figure out how to manipulate tf frames.
Comment by kost9 on 2014-10-08:
So far I wrote a simple launch file that runs two hokuyo_nodes with different names and usb ports connected. Both of them publish to /scan. I can see data from 2 lasers in rviz (which reads /scan via hector_slam but maps are inconsistent)
Now how can I transform the frame of one laser into second?
Comment by paulbovbel on 2014-10-08:
You can't easily, since laserscans use polar coordinates. I'm not sure about your setup - I assume both lasers publishing to different frames that are properly connected to the tf tree.
Comment by paulbovbel on 2014-10-08:
You can try the method I suggested where you turn the laserscans into pointclouds, which are Cartesian and can be transformed using tf.
Comment by kost9 on 2014-10-10:
Yes, I have 2 frames: laser and laser_1; the parent for both is base_link; So I added to the launch file this:

where pi is 3.14....   for 180 degrees of yaw.
Comment by kost9 on 2014-10-10:
When mapping I get a 360 degree view but it's very very inconsistent and the map is very strange, it looks like several maps overlapping, any ideas on that?
Comment by paulbovbel on 2014-10-13:
You should ask a new question, providing details on your setup (tf an otherwise), pictures of the laserscans overlaid on each other in rviz to show that your odometry is decent, pictures of your maps, and more details on your issue.

