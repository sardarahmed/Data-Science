Q:

Using the estimated robot pose from robot_pose_ekf with amcl

Hi all,
I am using robot_pose_ekf to fuse data from Wheel encoders and IMU to estimate the 3D pose of the robot. Then, I am using amcl to take care of odometry drift and finally the move_base package does the navigation. I am generating the odom message of the type nav_msgs/Odometry from the wheel encoders which is used by the base_local_planner. I know robot_pose_ekf provides odom_combined to base_link transformation which is used by amcl.
My question is once robot_pose_ekf fuses the data from wheel encoders and IMU and generates the estimated 3D pose of the robot of the type geometry_msgs/PoseWithCovarianceStamped on the topic robot_pose_ekf/odom_combined, how and where is this output used in the navigation package as a whole (move_base or amcl)?
Thanks in advance.
Naman Kumar

Originally posted by Naman on ROS Answers with karma: 1464 on 2015-04-29
Post score: 2

A:

amcl dont use geometry_msgs/PoseWithCovarianceStamped  message. Its nothing but tf from odom_combined -> base_link combined with covariance.  As you mentioned amcl get the same pose from tf and amcl doesnt need pose covariance.

Originally posted by bvbdort with karma: 3034 on 2015-05-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Naman on 2015-05-01:
Thanks! So, basically the estimated robot pose from robot_pose_ekf is not used anywhere, its just the transformation between odom_combined and base link (which contains all the relevant information) which is used by amcl, right?
Comment by bvbdort on 2015-05-01:
yes , transformation is nothing but estimate pose from ekf without covariance info.
Comment by Naman on 2015-05-01:
Ok..Thanks!
Comment by marawy_alsakaf on 2017-11-07:
"the estimated robot pose from robot_pose_ekf is not used anywhere," is that right ??
so why we use it?
Comment by bvbdort on 2017-11-07:
No, covariance information is not used in amcl.
Comment by marawy_alsakaf on 2017-11-07:
ok so i need to do robot_pose_ekf for encoders and IMU, and AMCL would use it instead of tf_diff ?
Comment by bvbdort on 2017-11-08:
amcl needs odometry, most of the time odometry is from encoder and IMU

