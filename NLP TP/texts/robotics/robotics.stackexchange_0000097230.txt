Q:

specify rosbag save path in launchfile

Hey,
I'm trying to specify the path to which my rosbag files will be written to. The call to launch the datalogging is happening in the launch file.
The issue I'm having is I want it to be repeatable on other peoples machines so I don't want to have to include the full file path. ie /home/doug/catkin_ws/src/bagfiles/chatter something like /home/(find user)/catkin_ws/src/bagfiles/chatter would be ideal.
the whole section of code that calls rosbag in the launchfile.
<arg name="data_log" default="true" />

  <group if="$(arg data_log)">
    <arg name="topics_logged" default="/chatter"/>

    <node pkg="rosbag" type="record" 
    args="-o /home/doug/catkin_ws/src/bagfiles/chatter /chatter" name="record" output="screen"/>
  </group>

Thanks for any help!

Originally posted by TheMilkman92 on ROS Answers with karma: 23 on 2020-10-04
Post score: 2

A:

You can use the $(env ...) substitution arg.
So
<node pkg="rosbag" type="record" 
args="-o /home/$(env USER)/catkin_ws/src/bagfiles/chatter /chatter" name="record" output="screen"/>

Then again, that user would need to have the directory structure ~/catkin_ws/src/bagfiles/chatter present. I suggest to use something that is definitiely available, i.e. either directly storing into the home directory, or something read-writable by any user...

Originally posted by mgruhler with karma: 12390 on 2020-10-05
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by gvdhoorn on 2020-10-05:\

Then again, that user would need to have the directory structure ~/catkin_ws/src/bagfiles/chatter present.

Exactly. This is only a partial solution I would say.

I suggest to use something that is definitiely available, i.e. either directly storing into the home directory, or something read-writable by any user...

why not use a roslaunch arg and specify the full path when starting the .launch file?
Comment by TheMilkman92 on 2020-10-05:
@mgruhler Thanks for you help! You should change the ($env USER) to $(env USER) in your response. otherwise that works perfectly!
@gvdhoom That's completely fair, but it would be a rare case that someone would call the workspace something other than catkin_ws right? I can just put that in our documentation. Unless, is there another directory that would make more sense for something like this?
Comment by gvdhoorn on 2020-10-05:\

but it would be a rare case that someone would call the workspace something other than catkin_ws right?

no, that's not rare at all.
At this moment I have 43 workspaces, none of which are called catkin_ws.
Comment by mgruhler on 2020-10-06:\

You should change the ($env USER) to $(env USER) in your response.

@TheMilkman92 whoops, you are right. Sorry about that.

no, that's not rare at all.

I totally agree with @gvdhoorn (though I don't have THAT many workspaces :-D ). I never call my workspaces catkin_ws. This is merely something like a "tutorial convention"...
Comment by TheMilkman92 on 2020-10-08:
I see @gvdhoorn and @mgruhler, I'll put it outside the workspace in the USER directory. Thanks for the help!

