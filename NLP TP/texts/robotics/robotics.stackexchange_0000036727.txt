Q:

running rosjava pub/sub tutorial as NodeRunner

Hi there,
I took a look at the rosjava pub and sub tutorials today and tried to get them to run through the NodeRunner class.
I thus created the below MyRobot.java file with the main, placed it into the folder with the [Talker|Listener].java files and successfully compiled it.
package org.ros.tutorials.pubsub;
import org.ros.node.NodeRunner;
import com.google.common.base.Preconditions;
import org.ros.node.Node;
import org.ros.node.NodeMain;
import org.ros.node.NodeConfiguration;
import org.ros.node.DefaultNodeRunner;
import org.ros.tutorials.pubsub.Talker;
public class MyRobot 
{
  public static void main(String[] args) 
  {
    NodeMain nodeMain =  new Talker();
    //        NodeConfiguration nodeConfiguration;
    NodeConfiguration nodeConfiguration = NodeConfiguration.newPrivate();
    NodeRunner nodeRunner = DefaultNodeRunner.newDefault();
    nodeRunner.run(nodeMain, nodeConfiguration);
    nodeRunner.shutdown();
  }
}

The problem however is that I am now NOT able to successfully execute it.
I tried with "java MyRobot" command (in targer/classed folder) but all I am getting back is the following error message:
Exception in thread "main" java.lang.NoClassDefFoundError: MyRobot
Caused by: java.lang.ClassNotFoundException: MyRobot
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: MyRobot. Program will exit.

If anyone could tell me why the class is not being found I'd greatly appreciate it.
best, D.

Originally posted by dejanpan on ROS Answers with karma: 1420 on 2011-12-26
Post score: 2

A:

First, the rosjava_tutorial_pubsub has been updated to use NodeMainExecutor. I suggest pulling the latest version.
Second, you'll need to run rosjava nodes using the rosjava_bootsrap run.py script. It will take care of constructing the correct class path to load your node. The error you received is due to an incorrect class path.
rosrun rosjava_bootstrap run.py  <node_class>

Originally posted by damonkohler with karma: 3838 on 2012-01-17
This answer was ACCEPTED on the original site
Post score: 1

