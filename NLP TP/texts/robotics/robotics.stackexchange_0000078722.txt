Q:

Problem running Kinect2_Bridge. libva not found

I got my kinect2 working previously but then I broke my system and had to format my drive and reinstall everything.
I didn't make notes for my new installation but I thought I got everything installed the way it should be. Here is what happens when I run
source catkin_ws/devel/setup.bash 
 roslaunch kinect2_bridge kinect2_bridge.launch 

:
... logging to /home/adam/.ros/log/f3965c50-e997-11e6-9149-bc5ff47402d3/roslaunch-adam-3008.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://adam:44530/

SUMMARY
========

PARAMETERS
 * /kinect2_bridge/base_name: kinect2
 * /kinect2_bridge/base_name_tf: kinect2
 * /kinect2_bridge/bilateral_filter: True
 * /kinect2_bridge/calib_path: /home/adam/catkin...
 * /kinect2_bridge/depth_device: -1
 * /kinect2_bridge/depth_method: default
 * /kinect2_bridge/edge_aware_filter: True
 * /kinect2_bridge/fps_limit: -1.0
 * /kinect2_bridge/jpeg_quality: 90
 * /kinect2_bridge/max_depth: 12.0
 * /kinect2_bridge/min_depth: 0.1
 * /kinect2_bridge/png_level: 1
 * /kinect2_bridge/publish_tf: False
 * /kinect2_bridge/queue_size: 5
 * /kinect2_bridge/reg_device: -1
 * /kinect2_bridge/reg_method: default
 * /kinect2_bridge/sensor: 
 * /kinect2_bridge/use_png: False
 * /kinect2_bridge/worker_threads: 4
 * /kinect2_points_xyzrgb_hd/queue_size: 5
 * /kinect2_points_xyzrgb_qhd/queue_size: 5
 * /kinect2_points_xyzrgb_sd/queue_size: 5
 * /rosdistro: kinetic
 * /rosversion: 1.12.6

NODES
  /
    kinect2 (nodelet/nodelet)
    kinect2_bridge (nodelet/nodelet)
    kinect2_points_xyzrgb_hd (nodelet/nodelet)
    kinect2_points_xyzrgb_qhd (nodelet/nodelet)
    kinect2_points_xyzrgb_sd (nodelet/nodelet)

auto-starting new master
process[master]: started with pid [3019]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to f3965c50-e997-11e6-9149-bc5ff47402d3
process[rosout-1]: started with pid [3032]
started core service [/rosout]
process[kinect2-2]: started with pid [3049]
process[kinect2_bridge-3]: started with pid [3050]
process[kinect2_points_xyzrgb_sd-4]: started with pid [3051]
process[kinect2_points_xyzrgb_qhd-5]: started with pid [3052]
process[kinect2_points_xyzrgb_hd-6]: started with pid [3057]
[ INFO] [1486074952.232479271]: Loading nodelet /kinect2_bridge of type kinect2_bridge/kinect2_bridge_nodelet to manager kinect2 with the following remappings:
[ INFO] [1486074952.237872204]: waitForService: Service [/kinect2/load_nodelet] has not been advertised, waiting...
[ INFO] [1486074952.241210966]: Initializing nodelet with 4 worker threads.
[ INFO] [1486074952.258647625]: waitForService: Service [/kinect2/load_nodelet] is now available.
[ERROR] [1486074952.330776903]: Failed to load nodelet [/kinect2_bridge] of type [kinect2_bridge/kinect2_bridge_nodelet] even after refreshing the cache: Failed to load library /home/adam/catkin_ws/devel/lib//libkinect2_bridge_nodelet.so. Make sure that you are calling the PLUGINLIB_EXPORT_CLASS macro in the library code, and that names are consistent between this macro and your XML. Error string: Could not load library (Poco exception = libva-drm.so.1: cannot open shared object file: No such file or directory)
[ERROR] [1486074952.330812121]: The error before refreshing the cache was: Failed to load library /home/adam/catkin_ws/devel/lib//libkinect2_bridge_nodelet.so. Make sure that you are calling the PLUGINLIB_EXPORT_CLASS macro in the library code, and that names are consistent between this macro and your XML. Error string: Could not load library (Poco exception = libva-drm.so.1: cannot open shared object file: No such file or directory)
[FATAL] [1486074952.330969872]: Failed to load nodelet '/kinect2_bridge` of type `kinect2_bridge/kinect2_bridge_nodelet` to manager `kinect2'
[kinect2_bridge-3] process has died [pid 3050, exit code 255, cmd /opt/ros/kinetic/lib/nodelet/nodelet load kinect2_bridge/kinect2_bridge_nodelet kinect2 __name:=kinect2_bridge __log:=/home/adam/.ros/log/f3965c50-e997-11e6-9149-bc5ff47402d3/kinect2_bridge-3.log].
log file: /home/adam/.ros/log/f3965c50-e997-11e6-9149-bc5ff47402d3/kinect2_bridge-3*.log
[kinect2_bridge-3] restarting process
process[kinect2_bridge-3]: started with pid [3195]

From my understanding libva is a graphics library and it is weird that it can't be found. I have NVIDIA GTX 660
when i run nvidia-smi:
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 367.57                 Driver Version: 367.57                    |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX 660     Off  | 0000:01:00.0     N/A |                  N/A |
| 30%   26C    P5    N/A /  N/A |    353MiB /  1997MiB |     N/A      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID  Type  Process name                               Usage      |
|=============================================================================|
|    0                  Not Supported                                         |
+-----------------------------------------------------------------------------+

Can someone please help me fix this?

Originally posted by ateator1 on ROS Answers with karma: 18 on 2017-02-02
Post score: 0

A:

Wooow I feel stupid. Apparently something wen wrong when installing libfreenect2. I suspect it was because I just did a quick and dirty copy and paste of their installation commands where they use "make install" without sudo. I added it, installed and we're good to go

Originally posted by ateator1 with karma: 18 on 2017-02-02
This answer was ACCEPTED on the original site
Post score: 0

