Q:

motion_analysis_mocap fails to build

Hello all
I just made my first foray into ros a few days ago. I am now trying to install the motion_analysis_mocap stack.  I'm installing it from source in my overlay (since I can't seem to find any other way to do it). I do this like so:
roslocate info motion_analysis_mocap > motion_analysis_mocap.rosinstall

rosinstall <myrosoverlaydir> motion_analysis_mocap.rosinstall

this seems to work fine, but the 'documentation' package was lacking, and rather than install it like I thought rosinstall was supposed to, I had to install it with my package manager (I'm on ubuntu oneiric)
Then I run:
rosmake motion_analysis_mocap

and I get this error:
  [100%] Building CXX object CMakeFiles/evart.dir/src/nodes/tracker.o
  <myrosoverlaydir>/stacks/motion_analysis_mocap/evart_bridge/src/nodes/tracker.cpp: In member function ‘void evart::Tracker::callback(const evas_body_segments_t&)’:
  <myrosoverlaydir>/stacks/motion_analysis_mocap/evart_bridge/src/nodes/tracker.cpp:119:7: error: ‘class btQuaternion’ has no member named ‘setRPY’
  make[3]: *** [CMakeFiles/evart.dir/src/nodes/tracker.o] Error 1

So my educated guess is that the setRPY method of the btQuaternion class should initialize the quaternion given roll, pitch, and yaw angles. That class appears to come from the btQuaternion.h include in the tracker.cpp file.  Searching my /opt/ros/fuerte folder for btQuaternion.h yields two such files:
/opt/ros/fuerte/stacks/geometry_experimental/tf2/include/LinearMath/btQuaternion.h /opt/ros/fuerte/stacks/bullet/include/LinearMath/btQuaternion.h
Both define a btQuaternion class.  The first has a setRPY method, the second does not.  (It's got setZYX instead)
My guess is therefore that this is somehow a dependency/path problem (bullet's include path getting put before geometry_experimental/tf2's).  Can anybody offer any help as to how I might resolve it?

Originally posted by stochastic on ROS Answers with karma: 33 on 2012-07-23
Post score: 1

Original comments
Comment by prince on 2012-07-23:
I do not have access to this package. Which package dependency is mentioned in manifest.xml? Had you tried it in electric ?
Comment by KruseT on 2012-07-23:
Report this to the bug tracker: https://github.com/laas/motion_analysis_mocap/issues
Comment by stochastic on 2012-07-25:
@prince: bullet was the dependency in question, apparently (see Thomas's answer below)

A:

Hello,
I am the maintainer of this stack, I am currently trying to reproduce your issue.
I'll edit this post after patching the stack (this afternoon).
This issue was due to the removal of some ROS-specific patches from Bullet in Fuerte.
I switched to tf datatypes and now it works on my computer.
Please pull the latest changes from the Git repository. Commit ed053a2454b028c22f6117bdf01e49a1693e57f7 should fix the issue.
Edit: I'll release this stack into Fuerte so that it can be installed through apt-get but I will not have time to deal with that until next week.

Originally posted by Thomas with karma: 4478 on 2012-07-24
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by stochastic on 2012-07-25:
I can verify that that release shows up after doing rosws update, and does indeed fix the issue: compiles with no error.  thanks Thomas!
Comment by Thomas on 2012-08-02:
FYI the stack has been released in Fuerte today.

