Q:

reduction in image quality in ROS

Hi,
I am working on iball 12MP camera in ubuntu . The quality of image is good when i view the video using guvcview software.
When i launch the camera.launch file and view raw image, the video quality is degrading badly in the raw image.
Has anyone faced the same problem?
I'm working on face detection and recognition program, the input video quality is very bad, since the video goes into ROS and OpenCV. The final output also degrades.
So please post your views.
my launch file
<launch>
<node name="uvc_cam_node" pkg="uvc_cam" type="uvc_cam_node" output="screen"> 
    <param name="device" value="/dev/video0" /> 
    <param name="width" value="640" /> 
    <param name="height" value="480" /> 
    <param name="frame_rate" value="60" /> 
</node>
</launch>

i have attatched 2 images from guvcview and uvc_cam driver below

Originally posted by nandhini on ROS Answers with karma: 46 on 2012-03-22
Post score: 1

Original comments
Comment by joq on 2012-03-22:
What ROS camera driver are you using? What driver parameters?
Comment by nandhini on 2012-03-22:
i'm using the driver given in the link https://github.com/ericperko/uvc_cam
Comment by Eric Perko on 2012-03-23:
Please update your question to include the camera launch file you are using. When you view it in guvcview, what are the parameters set to (e.g. fps, width, height, auto_exposure) and are they the same in the camera launch file?

A:

Since you are not setting the camera parameters manually in the launch file, they are getting set to the default in the driver. Note that the driver's defaults are NOT initialized to the current settings on the camera (they are specified either in the driver code or in the UVCCam.cfg file), so whatever parameters you set in guvcview are not what is being set by uvc_cam. This could result in very dark images, as that is the desired behavior for the use case the driver forked for.
See my answer to Logitech webcams very "dark" when using uvc_cam for details on how to "undarken" your image when using my uvc_cam driver.
Your best bet is to find the set of parameters you like using the guvcview program, record them, set them with dynamic_reconfigure's reconfigure_gui while the uvc_cam driver is running (or in the launch file before starting up) and then any values you changed from default you should set in your launch file. Note that setting any unsupported modes in the reconfigure_gui may crash the driver or cause the camera to lock up and need power-cycled (Usually this is only if you try to change the resolution, as the reconfigure_gui doesn't wait to get both a width and height pair before reconfiguring the driver. I suggest setting the width and height in the launch file beforehand.)
If your problem is not a very dark image, then I suggest you include both an image from while guvcview is running and an image of the same scene with the uvc_cam driver so that we can understand the type of degradation you are seeing.

Originally posted by Eric Perko with karma: 8406 on 2012-03-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by nandhini on 2012-03-26:
Eric, thank you. soon i will attatch those 2 images for u to compare...
Comment by Eric Perko on 2012-03-27:
From your launch file, you aren't setting things like saturation, gain or contrast. I believe the defaults for those result in crappy color images like the ones you see. Try using the reconfigure_gui to play with the values or just set them in the launch file to whatever it's set to in guvcview.
Comment by nandhini on 2012-03-27:
Thank you Eric! I will do
Comment by nandhini on 2012-03-29:
is it possible to launch stereo view in uvc_cam?
Comment by Eric Perko on 2012-03-30:
uvc_cam only supports streaming from one camera at a time, per instance of the driver. You could run two uvc_cam nodes, each connected to a different camera (with each pushed down into a namespace) to view two cameras at the same time. However, there wouldn't be any explicit synchronization.

