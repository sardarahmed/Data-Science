Q:

how to write an IK plugin in moveit

I want to write a IK plugin in moveit for my own robot just like PR2. I read the IK plugin of PR2 but didn't know how to write it exactly. I wonder what function I should write to connent the IK to moveit. The ROS version I use is Indigo.Thank you!

Originally posted by gutianqi on ROS Answers with karma: 41 on 2016-03-07
Post score: 1

A:

If you are just trying to use a different robot with MoveIt!, you don't need a new IK plugin. The IK plugin is what Moveit uses for computing the inverse kinematics and the default one uses KDL which is a generic solver that should work for any kind of robot arm.
All Moveit! needs to work with a new robot is your robot's URDF file and you have to go through the MoveIt! setup wizard.
If you already knew this and have tried the default plugin and are not happy with the performance, there are two easy alternative IK plugins that I am aware of, the OpenRave IKFast plugin and the Trac-IK one. The IKFast method creates a solver that is custom to your robot since it is an analytical solver, Trac-IK is similar to the KDL one (both are numerical solvers) which should work for all robots.
If you have went through the trouble of solving the analytical IK solution for your arm by hand, you can make you own plugin from scratch, but that is not too easy.
Long story short: You shouldn't need to make your own plugin unless you've tried the default one and are not happy with it.

Originally posted by Airuno2L with karma: 3460 on 2016-03-07
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by gutianqi on 2016-03-07:
Thank you very much ! I have tried  IKFast plugin but this tutorial in Moveit seems not that right when I typed
sudo apt-get install openrave0.8-dp-ikfast .
the system couldn't find the openrave0.8 install package.
Comment by Airuno2L on 2016-03-08:
Have you tried the default MoveIt plugin? Did it not work?
Comment by pbeeson on 2016-03-21:
The TRAC-IK plugin should work if KDL does not.  There is a list of over a dozen or so common robot platforms on the TRAC-IK Bitbucket page with IK results.  If you have a URDF, I can run a quick test and tell you how well KDL and TRAC-IK perform.
Comment by kmohan on 2016-07-26:
@pbeeson and @Airuno2L Does the TRAC-IK plugin support mimic joints? KDL doesn't seem to support it and I am having a hard time with the IKFast plugin.
Comment by Airuno2L on 2016-07-28:
I'm not sure, are you trying to do IK with a parallel manipulator?
Comment by kmohan on 2016-08-01:
@Airuno2L It is not a parallel manipulator. However, it does have a parallel linkage connecting the end effector to the base.
Comment by Airuno2L on 2016-08-02:
It sounds like a closed-loop mechanism, maybe a picture added to the question would help? I don't think KDL or even URDF has support for closed-loop structures but I could be wrong.
Comment by kmohan on 2016-08-02:
@Airuno2L , it is not a closed loop structure. Here is a picture of my robot. The end effector is not included in the picture and would be attached to the red colored gear-like link (called "driver") at the very end
Comment by jeroendm on 2018-07-28:
It would still be interesting to have some pointers to information on the original question (building a custom IK plugin). Information on it seems difficult to find, apart from going to the source code of MoveIt!.

