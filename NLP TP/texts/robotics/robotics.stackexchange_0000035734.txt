Q:

map_saver doesn't return from "Waiting for the map"

I'm doing turtlebot's tutorial "Build a map with SLAM" and can't generate a map file. Actually I succeeded only first 2 times. Since then map_saver always says:
turtlebot@turtlebot-1:~$ rosrun map_server map_saver -f /tmp/my_map
[ INFO] [1321409343.272498323]: Waiting for the map
^C         <---- I manually killed 
^CTerminated
turtlebot@turtlebot-1:~$ 

and the process map_server keeps consuming around 95%.
When I succeeded:
turtlebot@turtlebot-1:/tmp$ rosrun map_server map_saver -f /tmp/my_map
[ INFO] [1321405355.532849715]: Waiting for the map
[ INFO] [1321405355.807251282]: Received a 480 X 544 map @ 0.050 m/pix
[ INFO] [1321405355.812693593]: Writing map occupancy data to /tmp/my_map.pgm
[ INFO] [1321405355.851996657]: Writing map occupancy data to /tmp/my_map.yaml
[ INFO] [1321405355.853300442]: Done

I used teleop to move turtlebot.
Env) Ubuntu 10.04, ROS/turtlebot electric

Originally posted by 130s on ROS Answers with karma: 10937 on 2011-11-15
Post score: 2

Original comments
Comment by 130s on 2011-11-18:
@bhaskara sure will do. Good to know that. Thx!
Comment by bhaskara on 2011-11-17:
Next time it happens, can you try doing rostopic echo --noarr -n 1 map.  That would indicate whether the map is being published.

A:

it seems to me that your nodes are not able to communicate with each other.
you could try running rxgraph next to the two nodes and see if the actually share the same map topic.
if not, make sure that

a roscore is still running
both nodes can see the same master

quick question: are both nodes running on the same machine?
Raph

Originally posted by raphael favier with karma: 1382 on 2011-11-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by 130s on 2011-12-01:
I've closed this session since I haven't seen the phenomenon these days.
Comment by 130s on 2011-11-21:
@davo thx for the interest but is your comment about my question? You mentioned several things (timesync, laser scan, tf etc.) but intuitively I don't figure out how they are associated with my issue and what can I do for the problem.
Comment by davo on 2011-11-20:
hi, I was doing this on  a custom bot start off with basics, timesync!  Ensure all your nodes/topics/tf's are  named properly esp laser scan . follow the diagnostics for tf.  i was dropping odom stationary/wireless range/usb b/w. The tf diags/trouble guides very good, check logs...good luck
Comment by 130s on 2011-11-18:
@raphael favier thx. Next time the issue occurs then I'll check if nodes are connected on rxgraph. Yes gmapping_demo and map_saver are running on the same machine, so that they should be using the same master. In my understanding roscore is already run by the service 'turtlebot' right?

