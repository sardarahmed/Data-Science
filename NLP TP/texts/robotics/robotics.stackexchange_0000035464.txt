Q:

Two joints for one link

I´m buliding a URDF robot. The gripper need to connect two links to another link.
Anybody know any way to connect two joins to the same link in different points?
Thanks guys!!
(and sorry for my english)

This is the joint that contains the tag :
  <joint name="gripper_cuerpo_a_biela_der" type="revolute"> 
<parent link="gripper_cuerpo"/>
<child link="gripper_biela_der"/>    
<origin rpy="0 0 0" xyz="0.014 0 0.021"/>
<axis xyz="0 -1 0"/>
<limit lower="0.0" upper="0.548" velocity="0.5" effort="1000"/>
<mimic joint="gripper_cuerpo_a_biela_izq" multiplier="1" offset="0"/> 
 <!-- DONT WORK IN RVIZ, NEVER OR AT THE MOMENT?--></joint>

and this is the error in the terminal:
riqui@riqui:~/ros_workspace/modelquad/modelvisual/robots$ roslaunch modelquad display_gripper_rviz.launch model:=gripper.urdf gui:=true
process[joint_state_publisher-1]: started with pid [7100] process[robot_state_publisher-2]: started with pid [7101] process[rviz-3]: started with pid [7102] Traceback (most recent call last): File "/home/riqui/ros/stacks/urdf_tools/joint_state_publisher/joint_state_publisher", line 209, in <module> jsp.loop() File "/home/riqui/ros/stacks/urdf_tools/joint_state_publisher/joint_state_publisher", line 108, in loop baseval = self.free_joints[parent]['value'] KeyError: ''

Originally posted by Rikki on ROS Answers with karma: 90 on 2011-11-05
Post score: 5

A:

In some situations, you can use the <mimic> tag to force the joint angles to be the same. I've labeled three joints below. A is independently driven, B is set to always have the same angle as A, and C has negative A's value. I think this assumes that these links form a parallelogram.
Depending on what version of JointStatePublisher you're using, the visualization should work automatically if you have the mimic tags set up.

Edit: The syntax (although not documented anywhere) is
<mimic joint="gripper_cuerpo_a_biela_izq" multiplier="1" offset="0"/> 
Re-edit: OP had the correct syntax to begin with. I've pushed a new version of urdf_python that clears up the disconnect.

Originally posted by David Lu with karma: 10932 on 2011-11-08
This answer was ACCEPTED on the original site
Post score: 6

Original comments
Comment by Rikki on 2011-11-18:
This works perfect! Thanks David Lu!!
Comment by Rikki on 2011-11-18:
OK! It's works perfect! Thanks David Lu!!
Comment by David Lu on 2011-11-11:
Nevermind, see my edit above.
Comment by David Lu on 2011-11-11:
Rikki - Can you please send me (davidlu@wustl.edu) or post your whole URDF?
Comment by Rikki on 2011-11-11:
I am trying that the left-first link mimic to the right-first link. THANKS DAVID
Comment by Rikki on 2011-11-11:
Hi David! I've downloaded and your urdf_tools stack (which contains the jointstatepublisher with ). I've checked that my gripper.urdf still operates ok in RVIZ with the new jointstatepublisher, but that fails when include  in my URDF. I post above the mimic-joint and the error.
Comment by Rikki on 2011-11-08:
OK!! Tomorrow I will work in this using the  tag (It´s 22:00 in Spain and I have to dinner :) ). 1 million thanks for help me!
Comment by Dave Coleman on 2012-03-06:
The mimic tag, as discussed here, works great when using David Lu's joint_state_publisher simulator. However when using real joint state data from a physical robot, the mimic tag does not appear to work. Are there pre-built ways to mimic real joint data, or do I need to write this node myself?

