Q:

Range sensor in Gazebo always reports the minimum range

I will apologize in advance for any faux pas with respect to posting questions here.  This is my first time posting a question on this forum.  I'm a relatively new ROS user, and am really struggling to get something working that should be pretty simple.
I am attempting to use a set of range sensors, arranged around the lower portion of my robot frame, to be used for collision avoidance.  Unfortunately, I cannot get the sensors to read anything in Gazebo other than roughly the minimum distance allowed for the sensor.  I'm guessing that the range plugin is experiencing a collision with the body representing the sensor.  I've tried removing the collision tag from the links representing the sensors.  I've even tried arranging the sensor links a short distance away from the actual robot body, to rule out that there weren't any collisions occurring with the links the sensors are being attached to.  Unfortunately, I get the same result no matter what.
Link sensor_fl_range_1 represents the range sensor.  When I echo the topic for this sensor, /proximity/frontleft, it returns only the following result:
header: 
    seq: 11  
    stamp: 
        secs: 95 
        nsecs: 148000000 
    frame_id: "sensor_fl_range_1" 
radiation_type: 1 
field_of_view: 0.20000000298023224 
min_range: 0.05000000074505806 
max_range: 2.0 
range: 0.05668118596076965

My environment is using ROS Noetic.  I'm currently doing my development online at theconstructsim.com.  Here's what I get back regarding the OS:
user:~$ cat /etc/os-release
NAME="Ubuntu"
VERSION="20.04.1 LTS (Focal Fossa)"
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME="Ubuntu 20.04.1 LTS"
VERSION_ID="20.04"
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
VERSION_CODENAME=focal
UBUNTU_CODENAME=focal

Would anyone happen to have some time to take a look at this URDF, and let me know what I'm doing wrong.  I've been beating my skull against my desk for two days now, to no avail.  I'll apologize in advance for the length of the URDF.  I haven't gotten to a point where I am ready to factor the model out using xacro's yet.
<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="echo_bot">
<material name="black">
    <color rgba="0 0 0 1"/>
</material>
<material name="grey">
    <color rgba=".2 .2 .2 1"/>
</material>
<material name="red">
    <color rgba="0.8 0.0 0.0 1.0"/>
</material>
<material name="orange">
    <color rgba="1 0.42 0.0392 1.0"/>
</material>
<material name="silver">
    <color rgba="0.403 0.501 0.623 1.0"/>
</material>

<!-- base_link - box - 8.5in 18in 10in -->
<link name="base_link">        
    <visual>
        <geometry>
            <box size="0.2159 0.4572 0.254"/>
        </geometry>            
        <material name="grey"/>
    </visual> 
    <collision>
        <geometry>
            <box size="0.2159 0.4572 0.254"/>
        </geometry>
    </collision>
    <!--
    <inertial>
        <mass value="4.53592"/>
        <inertia ixx="0.232785509428" ixy="0.0" ixz="0.0"
                iyy="0.0344460977743" iyz="0.0"
                izz="0.262842015982"/>
    </inertial>         
    -->
</link>

<!-- bottom_frame_link - box - 30.75in 10in 3in -->
<link name="bottom_frame_link">
    <visual>
        <geometry>
            <box size="0.78105 0.2921 0.0762"/>                
        </geometry>            
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="grey"/>
    </visual>      
    <collision>
        <geometry>
            <box size="0.78105 0.2921 0.0762"/>                
        </geometry>            
    </collision>
    <inertial>
        <mass value="4.53592"/>
        <inertia ixx="0.232785509428" ixy="0.0" ixz="0.0"
                iyy="0.0344460977743" iyz="0.0"
                izz="0.262842015982"/>
    </inertial>       
</link>

<!-- sensor_fl_range_1 - front corner of robot -->
<link name="sensor_fl_range_1">
    <visual>
        <geometry>
            <box size="0.005 0.005 0.005"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="red"/>
    </visual>
    <inertial>
        <mass value="0.00453592"/>
        <inertia ixx="4.95353175958e-08" ixy="0.0" ixz="0.0"
                iyy="6.8587362825e-08" iyz="0.0"
                izz="4.95353175958e-08"/>
    </inertial>        
</link>

<joint name="sensor_fl_range_1_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="sensor_fl_range_1"/>
    <origin xyz="0.3987 -0.13245837 0" rpy="0 0 0"/>
</joint>    

<gazebo reference="sensor_fl_range_1">
    <material>Gazebo/Red</material>
    <selfCollide>false</selfCollide>
    <sensor type="ray" name="sensor_fl_range_1">
        <pose>0 0 0 0 0 0</pose>
        <visualize>false</visualize>
        <update_rate>10</update_rate>
        <ray>
            <scan>
                <horizontal>
                    <samples>10</samples>
                    <resolution>1</resolution>
                    <min_angle>-10.0</min_angle>
                    <max_angle>10.0</max_angle>
                </horizontal>
                <vertical>
                    <samples>10</samples>
                    <resolution>1</resolution>
                    <min_angle>-10.0</min_angle>
                    <max_angle>10.0</max_angle>
                </vertical>
            </scan>
            <range>
                <min>0.05</min>
                <max>2.0</max>
                <resolution>0.05</resolution>
            </range>
        </ray>
        <plugin filename="libgazebo_ros_range.so" name="gazebo_ros_range">
            <topicName>proximity/frontleft</topicName>
            <frameName>sensor_fl_range_1</frameName>
            <gaussianNoise>0.000</gaussianNoise>
            <alwaysOn>true</alwaysOn>.
            <updateRate>10</updateRate>
            <radiation>infrared</radiation>
            <fov>0.20</fov>
            <visualize>false</visualize>
        </plugin>
    </sensor>
</gazebo>    

<!-- sensor_fr_range_1 - front corner of robot -->
<link name="sensor_fr_range_1">
    <visual>
        <geometry>
            <box size="0.005 0.005 0.005"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="red"/>
    </visual>
    <inertial>
        <mass value="0.00453592"/>
        <inertia ixx="4.95353175958e-08" ixy="0.0" ixz="0.0"
                iyy="6.8587362825e-08" iyz="0.0"
                izz="4.95353175958e-08"/>
    </inertial>            
</link>

<joint name="sensor_fr_range_1_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="sensor_fr_range_1"/>
    <origin xyz="0.3987 0.13245837 0" rpy="0 0 0"/>
</joint>   

<gazebo reference="sensor_fr_range_1">
    <material>Gazebo/Red</material>
    <selfCollide>false</selfCollide>
    <sensor type="ray" name="sensor_fr_range_1">
        <pose>0 0 0 0 0 0</pose>
        <visualize>false</visualize>
        <update_rate>10</update_rate>
        <ray>
            <scan>
                <horizontal>
                    <samples>10</samples>
                    <resolution>1</resolution>
                    <min_angle>-10.0</min_angle>
                    <max_angle>10.0</max_angle>
                </horizontal>
                <vertical>
                    <samples>10</samples>
                    <resolution>1</resolution>
                    <min_angle>-10.0</min_angle>
                    <max_angle>10.0</max_angle>
                </vertical>
            </scan>
            <range>
                <min>0.05</min>
                <max>2.0</max>
                <resolution>0.05</resolution>
            </range>
        </ray>
        <plugin name="gazebo_ros_range" filename="libgazebo_ros_range.so">
            <topicName>proximity/frontright</topicName>
            <frameName>sensor_fr_range_1</frameName>
            <gaussianNoise>0.000</gaussianNoise>
            <updateRate>10</updateRate>
            <radiation>infrared</radiation>
            <fov>0.20</fov>
            <visualize>true</visualize>
        </plugin>
    </sensor>
</gazebo>         

<joint name="frame_joint" type="fixed">
    <parent link="base_link"/>
    <child link="bottom_frame_link"/>
    <origin xyz="0 0 -0.0889"/>
</joint>

<!-- front caster -->
<link name="front_caster_post">
    <visual>
        <geometry>
            <box size="0.0254 0.0254 0.0762"/>
        </geometry>
        <material name="black"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.0254 0.0254 0.0762"/>
        </geometry>        
    </collision>
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.000243866178933" ixy="0.0" ixz="0.0"
                iyy="0.000243866178933" iyz="0.0"
                izz="4.87732357867e-05"/>
    </inertial>        
</link>

<link name="front_caster_wheel">
    <visual>
        <geometry>
            <sphere radius="0.0508"/>
        </geometry>
        <material name="black"/>
    </visual>
    <collision>
        <geometry>
            <sphere radius="0.0508"/>
        </geometry>
    </collision>
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="2.9029888" ixy="0.0" ixz="0.0"
                iyy="2.9029888" iyz="0.0"
                izz="2.9029888"/>
    </inertial>       
</link>

<gazebo reference="front_caster_wheel">
    <turnGravityOff>false</turnGravityOff>
</gazebo>    

<joint name="front_caster_wheel_joint" type="fixed">
    <parent link="front_caster_post"/>
    <child link="front_caster_wheel"/>
    <origin xyz="0 0 -0.0381" rpy="0 0 0"/>
</joint>

<joint name="front_caster_post_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="front_caster_post"/>
    <origin xyz="0.339725 0 -0.0762"/>
</joint>

<!-- rear caster -->
<link name="rear_caster_post">
    <visual>
        <geometry>
            <box size="0.0254 0.0254 0.0762"/>
        </geometry>
        <material name="black"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.0254 0.0254 0.0762"/>
        </geometry>        
    </collision>
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.000243866178933" ixy="0.0" ixz="0.0"
                iyy="0.000243866178933" iyz="0.0"
                izz="4.87732357867e-05"/>
    </inertial>        
</link>

<link name="rear_caster_wheel">
    <visual>
        <geometry>
            <sphere radius="0.0508"/>
        </geometry>
        <material name="black"/>
    </visual>
    <collision>
        <geometry>
            <sphere radius="0.0508"/>
        </geometry>
    </collision>
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="2.9029888" ixy="0.0" ixz="0.0"
                iyy="2.9029888" iyz="0.0"
                izz="2.9029888"/>
    </inertial>
</link>

<gazebo reference="rear_caster_wheel">
    <turnGravityOff>false</turnGravityOff>
</gazebo>

<joint name="rear_caster_wheel_joint" type="fixed">
    <parent link="rear_caster_post"/>
    <child link="rear_caster_wheel"/>
    <origin xyz="0 0 -0.0381" rpy="0 0 0"/>
</joint>

<joint name="rear_caster_post_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="rear_caster_post"/>
    <origin xyz="-0.339725 0 -0.0762"/>
</joint>    

<!-- front_fenders_rear_box -->
<link name="front_fenders_rear_box">
    <visual>
        <geometry>
            <box size="0.01905 0.4572 0.0762"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="grey"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.01905 0.4572 0.0762"/>
        </geometry>
    </collision>   
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.000233197033605" ixy="0.0" ixz="0.0"
                iyy="0.00812074375848" iyz="0.0"
                izz="0.00791498167"/>
    </inertial>             
</link>

<joint name="front_fender_rear_box_joint" type="fixed">
    <parent link="base_link"/>
    <child link="front_fenders_rear_box"/>
    <origin xyz="0.117475 0 -0.0889"/>
</joint>

<!-- rear_fenders_rear_box -->
<link name="rear_fenders_rear_box">
    <visual>
        <geometry>
            <box size="0.01905 0.4572 0.0762"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="grey"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.01905 0.4572 0.0762"/>
        </geometry>
    </collision>       
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.000233197033605" ixy="0.0" ixz="0.0"
                iyy="0.00812074375848" iyz="0.0"
                izz="0.00791498167"/>
    </inertial>         
</link>

<joint name="rear_fender_rear_box_joint" type="fixed">
    <parent link="base_link"/>
    <child link="rear_fenders_rear_box"/>
    <origin xyz="-0.117475 0 -0.0889"/>
</joint>

<!-- front_left_fender  10.753in 4in 3in-->

<link name="front_left_fender">
    <visual>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="grey"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
    </collision>
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.00303923124767" ixy="0.0" ixz="0.0"
                iyy="0.000609665447333" iyz="0.0"
                izz="0.00320993757293"/>
    </inertial>                
</link>

<joint name="front_left_fender_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="front_left_fender"/>
    <origin xyz="0.245 -0.140 0" rpy="0 0 0.310"/>
</joint>

<!-- front_right_fender - 10.753in 4in 3in -->
<link name="front_right_fender">
    <visual>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="grey"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
    </collision>   
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.00303923124767" ixy="0.0" ixz="0.0"
                iyy="0.000609665447333" iyz="0.0"
                izz="0.00320993757293"/>
    </inertial>             
</link>

<joint name="front_right_fender_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="front_right_fender"/>
    <origin xyz="0.245 0.140 0" rpy="0 0 -0.310"/>
</joint>

<!-- rear_left_fender  10.753in 4in 3in-->
<link name="rear_left_fender">
    <visual>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="grey"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
    </collision>   
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.00303923124767" ixy="0.0" ixz="0.0"
                iyy="0.000609665447333" iyz="0.0"
                izz="0.00320993757293"/>
    </inertial>             
</link>

<joint name="rear_left_fender_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="rear_left_fender"/>
    <origin xyz="-0.245 -0.140 0" rpy="0 0 -0.310"/>
</joint>  

<!-- rear_right_fender - 10.753in 4in 3in -->
<link name="rear_right_fender">
    <visual>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="grey"/>
    </visual>
    <collision>
        <geometry>
            <box size="0.2731262 0.1016 0.0762"/>
        </geometry>
    </collision>   
    <inertial>
        <mass value="0.453592"/>
        <inertia ixx="0.00303923124767" ixy="0.0" ixz="0.0"
                iyy="0.000609665447333" iyz="0.0"
                izz="0.00320993757293"/>
    </inertial>             
</link>

<joint name="rear_right_fender_joint" type="fixed">
    <parent link="bottom_frame_link"/>
    <child link="rear_right_fender"/>
    <origin xyz="-0.245 0.140 0" rpy="0 0 0.310"/>
</joint>      

<!-- right_wheel - cylinder - 10in diameter / 5in radius, 3.5in length -->
<link name="right_wheel">        
    <visual>
        <origin rpy="1.5708 0 0" xyz="0 0 0"/>  
        <geometry>
            <cylinder length="0.0889" radius="0.127"/>
        </geometry>                        
        <material name="black"/>
    </visual>  
    <collision>
        <origin rpy="1.5708 0 0" xyz="0 0 0"/>  
        <geometry>
            <cylinder length="0.0889" radius="0.127"/>
        </geometry>
    </collision>  
    <inertial>
        <mass value="6.80389"/>
        <inertia ixx="0.0319160330764" ixy="0.0" ixz="0.0"
                iyy="0.0319160330764" iyz="0.0"
                izz="0.054869970905"/>
    </inertial>                          
</link>

<joint name="right_wheel_joint" type="revolute">
    <parent link="base_link"/>
    <child link="right_wheel"/>
    <origin xyz="0 -0.27305 -0.127" rpy="0 0 0"/>
    <limit lower="-100.0" upper="100.0" effort="0.1" velocity="0.005"/>
    <axis xyz="0 1 0"/>
</joint>

<!-- left_wheel - cylinder - 10in diameter / 5in radius, 3.5in length -->
<link name="left_wheel">        
    <visual>
        <origin rpy="1.5708 0 0" xyz="0 0 0"/>  
        <geometry>
            <cylinder length="0.0889" radius="0.127"/>
        </geometry>                        
        <material name="black"/>
    </visual>    
    <collision>
        <origin rpy="1.5708 0 0" xyz="0 0 0"/>  
        <geometry>
            <cylinder length="0.0889" radius="0.127"/>
        </geometry>
    </collision>      
    <inertial>
        <mass value="6.80389"/>
        <inertia ixx="0.0319160330764" ixy="0.0" ixz="0.0"
                iyy="0.0319160330764" iyz="0.0"
                izz="0.054869970905"/>
    </inertial>                    
</link>

<joint name="left_wheel_joint" type="revolute">
    <parent link="base_link"/>
    <child link="left_wheel"/>
    <origin xyz="0 0.27305 -0.127" rpy="0 0 0"/>
    <limit lower="-100.0" upper="100.0" effort="0.1" velocity="0.005"/>
    <axis xyz="0 1 0"/>
</joint>
</robot>

Originally posted by Jim Greene on ROS Answers with karma: 26 on 2021-02-28
Post score: 0

A:

I actually found the issue.  I had copied/pasted the definition for the ray sensor, and had not paid attention to the fact that the min_angle/max_angle vlaues for the scan element were in degrees, and not radians.  After changing these values, and providing a proper pose to identify where the beam originates its link, and everything started working perfectly.
Here's what my sensor definition looks like now:
<gazebo reference="sensor_fl_range_1">
    <material>Gazebo/Red</material>
    <selfCollide>0</selfCollide>
    <sensor type="ray" name="sensor_fl_range_1">
        <pose>0.0025 0 0 0 0 0</pose>
        <visualize>true</visualize>
        <update_rate>10</update_rate>
        <ray>
            <scan>
                <horizontal>
                    <samples>10</samples>
                    <resolution>1</resolution>
                    <min_angle>-0.174533</min_angle>
                    <max_angle>0.174533</max_angle>
                </horizontal>
                <vertical>
                    <samples>10</samples>
                    <resolution>1</resolution>
                    <min_angle>-0.174533</min_angle>
                    <max_angle>0.174533</max_angle>
                </vertical>
            </scan>
            <range>
                <min>0.05</min>
                <max>2.0</max>
                <resolution>0.05</resolution>
            </range>
        </ray>
        <plugin filename="libgazebo_ros_range.so" name="gazebo_ros_range">
            <topicName>proximity/frontleft</topicName>
            <frameName>sensor_fl_range_1</frameName>
            <gaussianNoise>0.000</gaussianNoise>
            <alwaysOn>true</alwaysOn>.
            <updateRate>10</updateRate>
            <radiation>infrared</radiation>
            <fov>0.20</fov>
            <visualize>true</visualize>
        </plugin>
    </sensor>
</gazebo>    

I also wouldn't recommend using this robot definition as good example, due to the fact that I used joints for the creation of my caster wheels.  I discovered, after a good bit of reading last night, that this is in fact a really bad idea.

Originally posted by Jim Greene with karma: 26 on 2021-03-01
This answer was ACCEPTED on the original site
Post score: 1

