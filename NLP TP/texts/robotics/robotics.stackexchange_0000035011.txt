Q:

Get IR stream from kinect

Hi, everybody,
I need to capture the IR stream from IR camera of kinect and I have to use OpenCv Library for analizing it. Doing so, I built a subscriber at the topic camera/ir/image_raw of openni_launch and converted the captured image with cv_bridge::toCvCopy(img, enc:MONO16), but as result I had a really very dark image (almost totally black).
I tried to used the IR camera with command:
rosrun image_view image_view image:=camera/ir/image_raw

and it works properly, so I ask to you: why it doesn't work in my source?
I write below my code:
ros::Subscriber subIRKinect = nh.subscribe("camera/ir/image_raw", 1000, getKinectIRImage);

void getKinectIRImage (const sensor_msgs::ImageConstPtr img)
{
    //image type mono16
    try
    {
        cv_ptr = cv_bridge::toCvCopy(img, enc::MONO16);
    }
    catch (cv_bridge::Exception& e)
    {
        ROS_ERROR("cv_bridge exception: %s", e.what());
    }
 }

Thanks in advance everybody can help me!! ;)

Originally posted by Deby85 on ROS Answers with karma: 26 on 2011-10-17
Post score: 1

A:

Thank you Felix, I solved my problem simply using the the following command:
frame = img_bridge_.imgMsgToCv(img, "bgr8");

and now it works properly. :D
Hoping don't boring you, I have another question for you or everybody could help me: I installed ROS and openni_kinect on another computer exactly how I made previously on mine, but when I try to used the IR camera with command:
rosrun image_view image_view image:/camera/ir/image_raw

It returns me the following error:
Illegal Instruction

I've looked for a solution on the web, but I haven't found it. Could someone help me ??
Thanks in advance

Originally posted by Deby85 with karma: 26 on 2011-11-07
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Kadir Firat Uyanik on 2012-01-17:
This illegal instruction was a bug a in opencv, and I heard that it's been fixed in the latest release. You may want to update your opencv package.
Comment by dornhege on 2011-11-08:
For a new question open a new thread. This one sounds like you are using binaries that don't fit your system.

