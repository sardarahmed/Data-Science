Q:

AX12 dual motor index out of range

I'm working through the ax12 smart arm tutorials on diamondback with ubuntu 10.4 as
soon as i start a dual motor controller i receive this error
[ERROR] [WallTime: 1301047084.826573] bad callback: <bound method JointPositionControllerDualAX12.process_motor_states of <joint_position_controller_dual_motor.JointPositionControllerDualAX12 instance at 0x8f0e06c>>
Traceback (most recent call last):
  File "/opt/ros/diamondback/stacks/ros_comm/clients/rospy/src/rospy/topics.py", line 563, in _invoke_callback
    cb(msg)
  File "/home/peter/ros/ua-ros-pkg/arrg/ua_controllers/ax12_controller_core/src/ax12_controller_core/joint_position_controller_dual_motor.py", line 146, in process_motor_states
    state = states[self.master_id]
IndexError: list index out of range

This error just cycles continuously but the joint will move with commands

Originally posted by Peter Heim on ROS Answers with karma: 215 on 2011-03-24
Post score: 0

Original comments
Comment by tfoote on 2011-04-03:
Or add it to your question with block quotes.
Comment by mjcarroll on 2011-03-28:
Can you put this on pastebin or somewhere that doesn't mangle the formatting?
Comment by Peter Heim on 2011-03-26:
head_pan_controller:
controller:
package: ax12_controller_core
module: joint_position_controller
type: JointPositionControllerAX12
joint_name: head_pan_joint
joint_speed: 1.17
motor:
id: 7
init: 512
min: 0
max: 1024
head_tilt_controller:
controller:
package: ax12_controller_core
module: joint_position_controller
type: JointPositionControllerAX12
joint_name: head_tilt_joint
joint_speed: 1.17
motor:
id: 8
init: 512
min: 800
max: 300
pan_base_controller:
controller:
package: ax12_controller_core
module: joint_position_controller
type: JointPositionControllerAX12
joint_name: base_pan_joint
joint_speed: 1.17
motor:
id: 3
init: 512
min: 273
max: 751
shoulder_tilt_controller:
controller:
package: ax12_controller_core
module: joint_position_controller_dual_motor
type: JointPositionControllerDualAX12
joint_name: shoulder_tilt_joint
joint_speed: 1.17
motor_master:
id: 6
init: 512
min: 717
max: 126
motor_slave:
id: 2
elbow_tilt_controller:
controller:
package: ax12_controller_core
module: joint_position_controller
type: JointPositionControllerAX12
joint_name: elbow_tilt_joint
joint_speed: 1.17
motor:
id: 5
init: 512
min: 881
max: 126
wrist_rotate_controller:
controller:
package: ax12_controller_core
module: joint_position_controller
type: JointPositionControllerAX12
joint_name: wrist_rotate_joint
joint_speed: 1.17
motor:
id: 4
init: 512
min: 1023
max: 0
Comment by Peter Heim on 2011-03-26:
motor_statemotor_states:
timestamp: 1301225172.3
id: 2
goal: 172
position: 171
error: -1
speed: 0
load: 0.0
voltage: 12.7
temperature: 41
moving: False

timestamp: 1301225172.31
id: 3
goal: 737
position: 737
error: 0
speed: 0
load: 0.0
voltage: 13.0
temperature: 41
moving: False
timestamp: 1301225172.31
id: 4
goal: 512
position: 512
error: 0
speed: 0
load: 0.0
voltage: 12.7
temperature: 42
moving: False
timestamp: 1301225172.31
id: 5
goal: 315
position: 315
error: 0
speed: 0
load: 0.0
voltage: 12.7
temperature: 41
moving: False
timestamp: 1301225172.32
id: 6
goal: 862
position: 863
error: 1
speed: 4
load: 0.0078125
voltage: 12.6
temperature: 41
moving: False
timestamp: 1301225172.32
id: 7
goal: 1023
position: 1023
error: 0
speed: 0
load: 0.0
voltage: 13.0
temperature: 40
moving: False
timestamp: 1301225172.33
id: 8
goal: 549
position: 550
error: 1
speed: 4
load: 0.0078125
voltage: 12.7
temperature: 42
moving: False

^Cpeter@robot:~$
Comment by arebgun on 2011-03-25:
Can you post your controller configuration and output of rostopic echo /motor_states/ttyUSB0?

A:

This was a bug in the dual motor controller code, it is fixed as of revision 1303.

Originally posted by arebgun with karma: 2121 on 2011-04-04
This answer was ACCEPTED on the original site
Post score: 2

