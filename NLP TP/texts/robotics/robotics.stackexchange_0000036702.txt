Q:

Deprecated issue in electric regarding one of scan member functions

I have a line of code that has deprecated issue in electric and I would like to know what is its better substitute.
Issue:
=> scan.set_ranges_size((int)(90/0.25));
[Warning:‘void sensor_msgs::LaserScan_::set_ranges_size(uint32_t) [with ContainerAllocator = std::allocator]’ is deprecated (declared at /opt/ros/electric/stacks/common_msgs/sensor_msgs/msg_gen/cpp/include/
sensor_msgs/LaserScan.h:85)]
P/S: Waiting for @joq's answer for he has done it already. This post is a refactor one.

Originally posted by alfa_80 on ROS Answers with karma: 1053 on 2011-12-24
Post score: 1

Original comments
Comment by alfa_80 on 2011-12-24:
Another one is here: http://answers.ros.org/question/3420/deprecated-issue-regarding-btquaternion-in
Comment by alfa_80 on 2011-12-24:
@joq: Thanks a lot for the suggesting of dividing them. Yes, it's indeed better for the community.
Comment by alfa_80 on 2011-12-24:
I've just divided them, could you please cut and paste your previous answer accordingly. Thanks in advance.
Comment by joq on 2011-12-24:
It would probably work better for others with similar problems to divide this into two separate questions: one for set_ranges_size and another for the btQuaternion constructor.

A:

Use the std::vector resize method directly:
scan.ranges.resize((int)(90/0.25));

Be careful of that (int) cast. I believe the floating point result will be exact in this example, so truncation should not be an issue. Generally, it is better to round explicitly.

Originally posted by joq with karma: 25443 on 2011-12-24
This answer was ACCEPTED on the original site
Post score: 1

