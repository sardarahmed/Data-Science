Q:

Skip package for release on ARM

I have a repository that contains a metapackage and several packages. One of those packages is a simulation package and provides some gazebo plugins, and so depends on the gazebo_plugins package.
I am releasing this set of packages through the buildfarm, but the prerelease test fails for the ARM builds because the the gazebo_plugins package is not built for ARM. I can't simply skip the builds in my CMakeLists.txt using something like if (gazebo_plugins_FOUND) <build my plugins> endif(), because the prerelease test fails at the rosdep level with KeyError: "The cache has no package named 'ros-kinetic-gazebo-plugins'". So as long as gazebo_plugins is listed as a dependency in my package.xml, it's going to fail on the buildfarm.
My question is, how can I simply skip that package for the ARM builds on the buildfarm? This appears to be what is happening for the gazebo_plugins package; the Jenkins jobs for the ARM builds report their status as "Aborted." How can I replicate this behavior and abort just my simulation package for ARM while still building it for the other architectures, and while also building all my other packages for ARM? Or is anyone aware of a better solution?

Originally posted by dpkoch on ROS Answers with karma: 132 on 2018-03-08
Post score: 0

A:

In general you can register any package to be blacklisted on e.g. ARM in the buildfarm configuration (see https://github.com/ros-infrastructure/ros_buildfarm_config/blob/cf2c2ee032d19d4bacb005f7b0ad20d5950536c0/kinetic/release-armhf-build.yaml#L14, note that the files are on the production branch). That would disable the job in question.
In this specific case the problem with the dependencies originates from issues building OpenCV related packages on ARM. That should be a temporary problem and it is expected that this will be fixed in the (near) future. Therefore I would suggest to give it a little bit of time and hope it gets addressed. Then your package can get built for ARM too.

Originally posted by Dirk Thomas with karma: 16276 on 2018-03-09
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by tfoote on 2018-03-12:
There was a regression in opencv that we rolled back gazebo_plugins is building successfully now on Kinetic. https://github.com/ros/rosdistro/pull/17031
Comment by dpkoch on 2018-03-12:
This fixes my issues, my prerelease tests now run successfully. Thanks for the info.

