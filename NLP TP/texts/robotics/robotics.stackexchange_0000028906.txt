Q:

How to rebuild ign-msgs for gazebo9?

I've install gazebo9 on a Bionic machine which has more up to date versions of protobuf than gazebo is expecting. Specifically, the apt package for ign-msgs1 was compiled with something before protobuf 3. So naturally, I'm trying to rebuild ign-msgs1 so that it will be up to date. However, this fails because there are macros in ign-msgs1 Utils.cmake which are defined by ign-cmake0 in IgnUtils.cmake. This conflict makes it impossible to rebuild ign-msgs1 on Bionic.
I can't upgrade from ign-msgs1 without recompiling everything else, so I'm wondering if there's a way to make ign-msgs use its own macros instead of getting them stomped on by ign-cmake0

Originally posted by Peter Mitrano on Gazebo Answers with karma: 768 on 2020-01-14
Post score: 0

A:

The solution here was to build protobuf 3.0.0 from source. The ubuntu package installed 3.8.0 because I was using a Lambda Labs machine which requires 3.8.0 for some other packages
Luckily, it's incredibly easy. Install protobuf 3.0.0 (from github releases for example) using the cmake install process (not the make process!). In protobuf, go to the cmake subdirectory and do the usual
mkdir build
cd build
cmake ..
make
sudo make install

Then if you're building with cmake, just make sure you either 1) append /usr/local to CMAKE_PREFIX_PATH or set CMAKE_INSTALL_PREFIX=/usr when building proto.
For me, this process installed /usr/local/lib/cmake/protobuf/protobuf-config.cmake, which could be found by catkin (or normal cmake) without messing with system protobuf 3.8.0

Originally posted by Peter Mitrano with karma: 768 on 2020-01-15
This answer was ACCEPTED on the original site
Post score: 1

