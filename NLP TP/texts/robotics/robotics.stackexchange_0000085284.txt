Q:

Rviz odometry is all yellow

Hello guys!
I have a problem in displaying odometry in Rviz.
I use robot localization to fuse odometry from wheels and visual odometry from Kinect. When I turn on visualization in Rviza all screen seems to be yellow. And after several moves it totaly paints all with yellow colour.

I disabled tf from wheel odometry and from visual odometry. Only robot_localization provides tf with odom.
Here is my robot_localization launch.
<launch>
<node pkg="robot_localization" type="ekf_localization_node" name="ekf_localization" clear_params="true">

  <remap from="odometry/filtered" to="odom" />

  <param name="frequency" value="30"/>  
  <param name="sensor_timeout" value="0.1"/>  

  <param name="two_d_mode" value="false"/>
  <param name="transform_time_offset" value="0.0"/>

  <param name="map_frame" value="map"/>
  <param name="odom_frame" value="odom"/>
  <param name="base_link_frame" value="base_link"/>
  <param name="world_frame" value="odom"/>

  <param name="odom0" value="odom_base"/>
   <param name="odom1" value="odom_visual"/>

  <rosparam param="odom0_config">[true, true, false,  
                                  false, false, true, 
                                  false, false, false,   
                                  false, false, true,
                                  false, false, false]</rosparam>

  <rosparam param="odom1_config">[false, false, false, 
                                  false, false, false, 
                                  true, true, false,   
                                  false, false, false,
                                  false, false, false]</rosparam>

  <param name="odom0_differential" value="false"/>
<param name="odom1_differential" value="false"/>

  <param name="odom0_relative" value="false"/>
<param name="odom1_relative" value="false"/> 

  <param name="use_odometry_yaw" value="false"/>-->

  <param name="debug"           value="false"/>
  <param name="debug_out_file"  value="debug_ukf_localization.txt"/>

  <param name="alpha" value="0.001"/> 
  <param name="kappa" value="0"/> 

  <param name="beta" value="2"/>

</node>
 
</launch>

And in addition odom that I get is very inaccurate.
So what's problem? Why everything is yellow?

Originally posted by Andrey on ROS Answers with karma: 43 on 2018-02-12
Post score: 2

Original comments
Comment by gvdhoorn on 2018-02-13:
Odometry arrows can be yellow, that is normal. Can you check whether the scaling is off? Try zooming out (mouse scrollwheel) very far. Perhaps the arrows are just really big, and the RViz view is rendered from inside the arrow.
Comment by Andrey on 2018-02-14:
Yes. I just zoomed out and saw what was not right. I removed check mark from "covariance" in odom display and it work ok.
Thank you!
Comment by gvdhoorn on 2018-02-14:
Disabling covariance rendering is not a solution. What you're seeing could indicate that your covariances are way too large. That would not just be a visualisation problem, but a problem in general.
I would suggest you try to figure out where those covariances are coming from.

A:

A few things:

I'm guessing the yellow in rviz is the massive covariance (probably rotational). If you uncheck the Covariance checkbox under your rviz Odometry display, it'll likely go away.
Thanks for posting your launch file. However, I can't make any comment regarding "why is the filter doing XYZ?" unless I have sample input messages from all of your sensors.
I note that you have a hanging XML comment tag next to use_odometry_yaw
Do both of your odom input sources exist in the same coordinate frame? You are fusing both absolutely.
You have two_d_mode set to false, but are fusing only 2D variables. This will make your covariance for Z, roll, and pitch (as well as their velocities) explode.

Originally posted by Tom Moore with karma: 13689 on 2018-02-19
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by Andrey on 2018-02-19:
Thanks, Tom!
How can I check if both of odoms exit in the same coordinate frames?
Comment by Tom Moore on 2018-02-26:
Visualize them both at the same time . If they are always pretty much in agreement, you're fine. If they start to diverge (e.g., the headings start to differ, or they move apart from each other), then you need make one of them differential.

