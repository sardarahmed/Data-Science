Q:

usb_cam on pandaboard / fatal error: libavcodec/avcodec.h

Hi there,
I'm trying to install the usb_cam package on my Pandaboard (Armel architecture / System Oneric 11.10-Server. I used:
$ sudo apt-get install ros-electric-bosch-drivers      

which probably fails because of the armel architecture. Therefore I choosed the installation from source.
$ svn co https://bosch-ros-pkg.svn.sourceforge.net/svnroot/bosch-ros-pkg/branches/electric/stacks/bosch_drivers/
$ roscd usb_cam
$ rosmake --rosdep-install

I get the following failure message:
E: Unable to locate package yaml-cpp0.2.6-dev
E: Couldn't find any package by regex 'yaml-cpp0.2.6-dev'
Failed to install yaml-cpp!
[ rosmake ] rosdep install failed: Rosdep install failed

I installed the yaml_cpp from source with:
$ hg clone ttp://code.google.com/p/yaml-cpp/
$ svn co
$ mkdir build
$ cd build
$ cmake -DBUILD_SHARED_LIBS=ON ..
$ make
$ sudo make install

without any problems. But when I try to make the usb_cam package by:
$ rosmake usb_cam --rosdep-install

it stills produces the same failure (missing yaml_cpp)

By compiling just the usb_cam package:
$ rosmake usb_cam --no-rosdep
it produces the following failure
[rosmake-0] Starting >>> usb_cam [ make ]
[ rosmake ] Last 40 linesb_cam: 20.6 sec ]           [ 1 Active 33/34 Complete ]
{-------------------------------------------------------------------------------
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [  0%] Built target rosbuild_premsgsrvgen
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  Scanning dependencies of target ROSBUILD_gensrv_cpp
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [  0%] Built target ROSBUILD_gensrv_cpp
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  Scanning dependencies of target ROSBUILD_gensrv_lisp
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [  0%] Built target ROSBUILD_gensrv_lisp
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  Scanning dependencies of target rospack_gensrv
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [  0%] Built target rospack_gensrv
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  Scanning dependencies of target rospack_gensrv_all
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [  0%] Built target rospack_gensrv_all
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  Scanning dependencies of target rospack_genmsg_libexe
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [  0%] Built target rospack_genmsg_libexe
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  Scanning dependencies of target rosbuild_precompile
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [  0%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  Scanning dependencies of target usb_cam
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  make[3]: Entering directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  [ 50%] Building CXX object src/libusb_cam/CMakeFiles/usb_cam.dir/usb_cam.o
  /home/panda/ros_workspace/bosch_drivers/usb_cam/src/libusb_cam/usb_cam.cpp:55:32: fatal error: libavcodec/avcodec.h: No such file or directory
  compilation terminated.
  make[3]: *** [src/libusb_cam/CMakeFiles/usb_cam.dir/usb_cam.o] Error 1
  make[3]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  make[2]: *** [src/libusb_cam/CMakeFiles/usb_cam.dir/all] Error 2
  make[2]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/panda/ros_workspace/bosch_drivers/usb_cam/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package usb_cam written to:
[ rosmake ]    /home/panda/.ros/rosmake/rosmake_output-20120613-131920/usb_cam/build_output.log
[rosmake-0] Finished <<< usb_cam [FAIL] [ 20.65 seconds ]
[ rosmake ] Halting due to failure in package usb_cam.
[ rosmake ] Waiting for other threads to complete.
[ rosmake ] Results:
[ rosmake ] Built 34 packages with 1 failures.
[ rosmake ] Summary output to directory
[ rosmake ] /home/panda/.ros/rosmake/rosmake_output-20120613-131920

would be great to get some help because there is a different Question on that with the same kind of problem.
http://answers.ros.org/question/36319/how-to-install-yaml-cpp026-dev-how-to-install-from/?comment=36448#comment-36448

Originally posted by dinamex on ROS Answers with karma: 447 on 2012-06-13
Post score: 0

A:

It looks like you need to install libavcodec. I don't know the exact command to install it off the top of my head, but the format will look like this:
sudo apt-get install libavcodec

The exact package name might not be libavcodec. It maybe looks something like libavcodec-VERSION-NUMBER or libavcodec-dev. In these situations you can search for packages with a command like this:
apt-cache search libavcodec

This will find all packages that have text containing "libavcodec". This should find the correct package for you to install.

Originally posted by derekjchow with karma: 341 on 2012-06-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by dinamex on 2012-06-13:
That worked. I just used $sudo apt-get install libavcodec-dev libavcodec53 and compiled it afterwards. thank you very much.

