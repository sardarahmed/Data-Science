Q:

point_cloud2.read_points and then?

I have a topic publishing a point cloud of type sensors_msgs.PointCloud2. I can subscribe to it and read it using sensors_msgs.point_cloud2.read_points function but then I get and object of type "generator". How do I access the coordinates of the points in this object?  I want to write a service that checks the maximum allowed height in some specific target areas (the point cloud represents the ceiling). I am using python.

Originally posted by Mehdi. on ROS Answers with karma: 3339 on 2016-07-27
Post score: 3

A:

read_points gives you a generator (keyword 'yield'). So you can just iterate over it to find your obstacles and not crash your shiny robot
from sensor_msgs.msg import PointCloud2
from sensor_msgs import point_cloud2

def callback_pointcloud(data):
    assert isinstance(data, PointCloud2)
    gen = point_cloud2.read_points(data)
    print type(gen)
    for p in gen:
      print p  # type depends on your data type, first three entries are probably x,y,z

Originally posted by NEngelhard with karma: 3519 on 2016-07-27
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Avhi on 2021-12-19:
What would be the other 3 entries ? are they RGB color values ?
Comment by bwhal on 2023-05-15:
When I use this code, it gives me an assertion error: cloud is not a sensor_msgs.msg.PointCloud2. What would be causing this and how would I fix it?

