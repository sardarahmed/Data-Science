Q:

How to copy .so file from src to devel when catkin_make?

I have an external .so library to link. If I put it only in src/lib/ and try to find_library() it, the catkin_make always fail. But if I manually put the .so file in devel/lib/, it works. Is there any way that I can automatically copy the .so file from src/lib/ to devel/lib/ ?
Here is a confusing thing. When I output the ${PROJECT_SOURCE_DIR}, it is the src folder, but when I use this address to find_library, it will be directed to devel folder. But I didn't put .so file in devel/lib/.
My code in CMakeLists.txt:
message("PROJECT_SOURCE_DIR: ${PROJECT_SOURCE_DIR}")
find_library(DYNAMSOFT_LIBRARY 
  NAMES libDynamsoftBarcodeReader.so 
  PATHS ${PROJECT_SOURCE_DIR}/lib/)
message("DYNAMSOFT_LIBRARY: ${DYNAMSOFT_LIBRARY}")

Corresponding output in terminal:
PROJECT_SOURCE_DIR: /home/zhiyang/mfp_workspace/src/srsnode_barcode_reader
DYNAMSOFT_LIBRARY: /home/zhiyang/mfp_workspace/devel/lib/libDynamsoftBarcodeReader.so

Originally posted by Crisliu7 on ROS Answers with karma: 1 on 2018-08-21
Post score: 0

A:

The ROS package for the prosilica gige SDK does something similar: https://github.com/ros-drivers/prosilica_gige_sdk/blob/hydro-devel/CMakeLists.txt . It's a bit more complex because it's also packaging libraries for several different architectures and detecting the architecture at build time.

Originally posted by ahendrix with karma: 47576 on 2018-08-21
This answer was ACCEPTED on the original site
Post score: 0

