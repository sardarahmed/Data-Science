Q:

Something is wrong with "cv_bridge" when I rosmake "gencam_cu" package

There are 2 cameras in our project: bumblebee2 and Logitech quickcam C160. And then I want do my research use Logitech quickcam C160, while I can't install the device very well.
And I reference to "http://www.ros.org/wiki/gencam_cu", which is said to combine the Logitech Quickcam using OpenCV and publishes image data.
And I command it with $ rosmake theora_image_transport, and it report a bug:
   /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp: 
   At global scope:  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:136: error: ISO C++ forbids declaration of ‘std_msgs’ with no type
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:136: error: expected ‘,’ or ‘...’ before ‘::’ token
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImagePtr cv_bridge::toCvCopyImpl(const cv::Mat&, int)’:
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:144: error: ‘class cv_bridge::CvImage’ has no member named ‘header’
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:144: error: ‘src_header’ was not declared in this scope
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:147: error: ‘dst_encoding’ was not declared in this scope
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:147: error: ‘src_encoding’ was not declared in this scope
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp: In member function ‘void cv_bridge::CvImage::toImageMsg(sensor_msgs::Image&) const’:
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:190: error: ‘header’ was not declared in this scope
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImagePtr cv_bridge::toCvCopy(const sensor_msgs::Image&, const std::string&)’:
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:216: error: cannot convert ‘const roslib::Header_<std::allocator<void> >’ to ‘int’ for argument ‘2’ to ‘cv_bridge::CvImagePtr cv_bridge::toCvCopyImpl(const cv::Mat&, int)’
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImageConstPtr cv_bridge::toCvShare(const sensor_msgs::Image&, const boost::shared_ptr<const void>&, const std::string&)’:
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:234: error: ‘class cv_bridge::CvImage’ has no member named ‘header’
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘cv_bridge::CvImagePtr cv_bridge::cvtColor(const cv_bridge::CvImageConstPtr&, const std::string&)’:
  /home/jason/stacks/vision_opencv/cv_bridge/src/cv_bridge.cpp:246: error: ‘const class cv_bridge::CvImage’ has no member named ‘header’
  make[3]: *** [CMakeFiles/cv_bridge.dir/src/cv_bridge.o] Error 1
  make[3]: Leaving directory `/home/jason/stacks/vision_opencv/cv_bridge/build'
  make[2]: *** [CMakeFiles/cv_bridge.dir/all] Error 2
  make[2]: Leaving directory `/home/jason/stacks/vision_opencv/cv_bridge/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/jason/stacks/vision_opencv/cv_bridge/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package cv_bridge written to:
[ rosmake ]    /home/jason/.ros/rosmake/rosmake_output-20110301-105339/cv_bridge/build_output.log
[rosmake-1] Finished <<< cv_bridge [FAIL] [ 1.32 seconds ]                      
[ rosmake ] Halting due to failure in package cv_bridge. 
                                       
[ rosmake ] /home/jason/.ros/rosmake/rosmake_output-20110301-105339

Any one can help me?
PS: and i try anther package which include cv_bridge, but i find the same problems. They all report that :/home/jason/stacks/find_object/cv_bridge/include/cv_bridge/cv_bridge.h:62: error: ‘std_msgs’ has not been declared.
I read the source, and find that it already was defined in cv_bridge.h. So i guess it may loss some include files? or cv_bridge.h has changed now? I confused. Some ones give me advice?

Originally posted by Yongqiang Gao on ROS Answers with karma: 133 on 2011-02-28
Post score: 0

A:

Hi,
Could you share experience with us how you solve this problem?
If anyone who encounter this problem he will glade to see how you solve it,thanks~

Originally posted by sam with karma: 2570 on 2011-02-28
This answer was ACCEPTED on the original site
Post score: 0

