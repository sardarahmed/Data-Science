Q:

Arduino publish Odom

Hi
Arduino MEGA 2560 can publish odometry values (nav_msgs/Odometry.msg)?
I am using an H-bridge that is connected to arduino and the arduino connected to raspberryPi. I'm using ros_serial communication between arduino and raspbery.
What is advised?
thanks

Originally posted by mateusguilherme on ROS Answers with karma: 125 on 2019-11-08
Post score: 0

A:

Yes you can publish any message type from your arduino. You need to write a .ino script to do so.
Make sure you include the following lines:
#include <ros.h>
#include <nav_msgs/Odometry.h>

at the top before the line
#include "Arduino.h"

Edit: The rosserial library even has an example sketch named Odom. You can check it out.

Originally posted by parzival with karma: 463 on 2019-11-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by mateusguilherme on 2019-11-09:
I was able to implement the arduino odometry, but the rate was very low, around 8 hz.  So I made arduino publish geometry_message / Twist and calculate odometry on a python node in raspberry (got rates around 100hz). I think the nav_message / Odometry message is too much for arduino to process
thanks
Comment by parzival on 2019-11-09:
Yes, it is better to keep arduino scripts light, mostly for input and output, and let main computer handle the computation to be done with that data.

