Q:

Qt Creator 2.8.1 ROS and Catkin problems

I am using Ubuntu 12.04LTS 64-bit, Hydro, Qt 5.1.1, and Qt Creator 2.8.1.
I have been working on some wet ROS packages using Qt Creator without a hitch when using Qt Creator 2.4.1 and Qt 4.8 from Ubuntu's software center. However, I want to take advantage of some of the nice new openGL helper functions in Qt 5.1 so I installed it alongside 4.8. I also installed the latest version of Qt Creator (2.8.1) as recommended by that community.
Qt Creator 2.8.1 is working great for non-ROS projects using a .pro file. But when I try to open ROS package from a CMakeLists.txt I get a few weird problems that I'm not sure how to fix. I'll walk you through what happens.
I open my catkin workspace using CMakeLists.txt: $ /opt/qtcreator-2.8.1/bin/qtcreator sandbox/src/CMakeLists.txt
With Qt Creator 2.4.1, the build directory auto-populates with something like /sandbox/qt-build and I would simply change it to /sandbox/build. However, with 2.8.1 the auto-populated build directory is "/opt/ros/hydro/share/catkin/cmake-build". So I switch it to "/sandbox/build".
Then I press next and Run CMake. CMake executes with no errors, just as I would expect it to.  -- Configuring done
-- Generating done
-- Build files have been written to: /home/pwn/sandbox/build
I Click finish, and get the following error:  
"Cannot create file /opt/ros/hydro/share/catkin/cmake/toplevel.cmake.user: Permission denied"
After click finish, the project is populated with a bunch of catkin nonsense, but none of my actual ROS packages.
I then get two popup windows with the following error: 
"Cannot create file /opt/ros/hydro/share/catkin/cmake/toplevel.cmake.user: Permission denied"
Has anyone else run into any of these sorts of issues with the newer version of Qt Creator? Have you found any solutions?
For now I am just using Qt Creator 2.4.1 and it continues to work well, but I would love to have only one version on my computer that works for ROS and other projects.

Originally posted by pnyholm on ROS Answers with karma: 97 on 2013-10-16
Post score: 5

A:

The following worked for me with qtcreator 3.0.1 on Ubuntu 14.04 (Trusty) with ROS Indigo
Within your src directory, check which file the symlink CMakeLists.txt points to. In my case (Indigo on Trusty), ls -l tells me:

CMakeLists.txt -> /opt/ros/indigo/share/catkin/cmake/toplevel.cmake

Then replace the symlink with a copy of toplevel.cmake:

rm CMakeLists.txt

cp /opt/ros/indigo/share/catkin/cmake/toplevel.cmake CMakeLists.txt

Originally posted by sebsch with karma: 790 on 2014-04-17
This answer was ACCEPTED on the original site
Post score: 9

Original comments
Comment by Andromeda on 2014-12-05:
Doing that...are you sure you don't mess up your system?
I have the same problem with the same version of Qt Creator.
There a way to undo those operation of QtCreator doesn't run?
Comment by pnyholm on 2014-12-05:
I have been applying this fix to my workspaces and it doesn't seem to mess up my system at all. Not sure about the answer to your second question
Comment by feixiao on 2015-12-21:
I try, it works!!thank you! but can anybody tell me why?

