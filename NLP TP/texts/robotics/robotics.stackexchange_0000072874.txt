Q:

How can I get time difference of two messages published by same publisher on same topic?

I need to calculate time gap between two messages from same publisher on same topic and print it in printable format like string. Please somebody help me.

Originally posted by cybodroid on ROS Answers with karma: 234 on 2016-03-18
Post score: 0

A:

Use ros::Time (or any system library for time..) :
ros::Time lasttime=ros::Time::now();
ros::Duration(3).sleep();
ros::Time currtime=ros::Time::now();
ros::Duration diff=currtime-lasttime;

cout<<"diff: "<<diff<<endl;

Note that depending on your application you may want to measure either 1) the time difference between the two calls to publish() by your publisher, or 2) the time difference between the two executions of the callback of your subscriber.
The two can be quite different depending on the amount of delay on your network and whether your subscribing node is busy doing something else when the message is published on the topic...
A robust approach is to include timestamps in the messages that you publish, so that your subscribing node can check if the messages are outdated, or even if they are not arriving in chronological order.

Originally posted by al-dev with karma: 883 on 2016-03-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by naihart on 2022-04-12:
Hi, I tried this code but printed it with ROS_INFO
 ROS_INFO("%2f secs", diff);

and it prints out 0.0000000 secs. any idea what the problem might be?

