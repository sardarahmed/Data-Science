Q:

Integrating Gazebo and MoveIt for trajectory execution for YuMi

Hi,
I am in the process of integrating Gazebo to view the trajectory generated by MoveIt! for ABB YuMi robot in ROS Kinetic.
I am using these packages as a starting point: https://github.com/OrebroUniversity/yumi
Apart from the two controllers.yaml files, [https://github.com/OrebroUniversity/yumi/blob/master/yumi_control/config/controllers.yaml   and
https://github.com/OrebroUniversity/yumi/blob/master/yumi_moveit_config/config/controllers.yaml ]
I have the controllers for Gazebo and the overall graph that can be found here:
https://drive.google.com/drive/folders/0Bx0AJvW-lbnBUjUwdE80R1Fxa00
As seen from the graph, the FollowJointTrajectory Action is not attached to either Gazebo or MoveIt.
I am trying to better understand the implementation of various controller configurations.
What do I need to add/change so that the FollowJointTrajectory action interface receives the planned trajectory from MoveIt and sends it to Gazebo?

Originally posted by amuni on ROS Answers with karma: 13 on 2017-06-26
Post score: 0

Original comments
Comment by gvdhoorn on 2017-06-27:
@amuni: could you please attach the screenshot of rqt_graph to your question? I've given you enough karma for that.
Comment by mvish7 on 2018-11-30:
@amuni: I'm working on similar problem(moveit gazebo integration for trajectory execution for panda robot). I tried to make sense from this questions and it's helpful. I'm still having some problems.
I would like to request you if can share link of your git repository which i can refer to?
Thanks.

A:

I can't access your graph without a google account. Please post it publicly.

What do I need to add/change so that the FollowJointTrajectory action interface receives the planned trajectory from MoveIt and sends it to Gazebo?

In your moveit configuration the controller is configured to listen on a ROS action in
/left_arm/joint_trajectory_action/{goal,cancel,feedback...}
So if this is not the topic defined for the gazebo controllers to listen on, then you will have to change either the moveit configuration or the gazebo configuration to match the other one.

Originally posted by v4hn with karma: 2950 on 2017-06-27
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by amuni on 2017-06-27:
Thanks for the reply. Just made the files public.
I will also double check the controller configurations.
Comment by amuni on 2017-06-27:
I get the following error while launching controllers: [ERROR] [1498569385.724952352, 15.067000000]: Action client not connected: left_arm/joint_trajectory_action [ERROR] [1498569418.091922119, 30.136000000]: Action client not connected: right_arm/joint_trajectory_action
Comment by v4hn on 2017-06-27:
Yes, you get this error because moveit expects the FollowJointTrajectory action server to be available at right_arm/joint_trajectory_action, but there is no action server running there.
You have a FollowJointTrajectory server running at yumi/joint_trajectory_pos_controller/follow_joint_trajectory
Comment by v4hn on 2017-06-27:
though, is this the one that can controll the right arm? In this case just change the name in the moveit controllers file from name: "right_arm" to name: "yumi/joint_trajectory_pos_controller" instead. (or change the gazebo controller name to "right_arm"
Comment by amuni on 2017-06-27:
I changed the names of controllers for Gazebo to match the moveIt ones but I still get the same error. I now have an additional error: [ERROR] [1498573871.290679059, 23.978000000]: Unable to connect to move_group action server 'move_group' within allotted time (30s)
--Uploaded new files on same link
Comment by amuni on 2017-06-27:
So turns out I was launching the wrong controllers file from moveit_controller_manager. It's working now.
Thanks again for your help.

