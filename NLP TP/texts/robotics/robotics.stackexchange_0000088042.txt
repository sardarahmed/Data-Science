Q:

Extracting compressed image data from bag file results in doubled up or dropped frames

Hi,
I'm trying to extract compressed images from a bag file. Here is my launch file:
<launch>   
  <!-- Play Bag File -->   
  <node pkg="rosbag" type="play" name="rosbag" required="true" args="-r
  0.2 /media/nick/Samsung\ USB/bag_files/_2018-07-20-16-30-09.bag"/>

  <!-- Uncompress images -->   
  <node pkg="image_transport" type="republish" name="decompress_node" args="compressed in:=/webcam1/image out:=/webcam1/image" />

  <!-- Extract images -->
  <node name="extract" pkg="image_view" type="extract_images" respawn="false" required="true" output="screen" cwd="ROS_HOME">
    <remap from="image" to="/webcam1/image"/>
  </node>
</launch>

This results in some frames not being saved and some frames being saves multiple times. Also a lot of frames are saved out of order so the video I make out of the frames is really choppy.

Originally posted by shoemakerlevy9 on ROS Answers with karma: 545 on 2018-07-22
Post score: 1

A:

You are re-publishing the decompressed images on the same topic as the originals.
in:=/webcam1/image out:=/webcam1/image

So your file extraction node is receiving both, possibly with a time delay pushing them out of order. If you use a different topic name for the decompressed images it should solve this.
Hope this helps.

Originally posted by PeteBlackerThe3rd with karma: 9529 on 2018-07-23
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by shoemakerlevy9 on 2018-07-23:
It appears that image transport adds /compressed to the topic name.
For instance when I change it to "in:=/webcam1/image/compressed out:=/webcam1/image" this is what I get in rostopic list.
/webcam1/image
/webcam1/image/compressed
/webcam1/image/compressed/compressed
Comment by PeteBlackerThe3rd on 2018-07-23:
Try running the launch file without the bag file playback. rostopic echo each of these topics then publish a single image to the input topic. Looking closely at what happens may shed some light on what's going on.

