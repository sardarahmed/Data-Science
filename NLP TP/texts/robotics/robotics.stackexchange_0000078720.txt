Q:

rqt segmentation fault following tutorials

Hi everybody
I just installed ROS Kinetic Kame on Ubuntu 16.04 following the tutorials. When I get to the 6th beginner tutorial (Understanding ROS Topics, http://wiki.ros.org/ROS/Tutorials/UnderstandingTopics), at 2.1, when I try to run rqt_graph, I get the message "Segmentation fault (core dumped)". This also happens when running rqt directly.
I've been looking around for a solution, but I did not find anybody with this problem. I have tried reinstalling both ROS and rqt packages, but it didn't make any difference. Besides, the wiki page for rqt (http://wiki.ros.org/rqt) throws an "Internal Server Error", so I cannot get much info.
Any help would be appreciated. Thanks a lot
** Update 1: already updated Qt, no changes
** Update 2: here is the gdb:
(gdb) run /opt/ros/kinetic/bin/rqt
Starting program: /usr/bin/python /opt/ros/kinetic/bin/rqt
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
[New Thread 0x7fffe72f0700 (LWP 7034)]
[New Thread 0x7fffdd857700 (LWP 7035)]
[New Thread 0x7fffdd056700 (LWP 7036)]
[New Thread 0x7fffdc855700 (LWP 7037)]
[New Thread 0x7fffcf675700 (LWP 7039)]
[New Thread 0x7fffcee74700 (LWP 7040)]

Thread 1 "python" received signal SIGSEGV, Segmentation fault.
0x0000000000000000 in ?? ()

(gdb) backtrace
#0  0x0000000000000000 in ?? ()
#1  0x00007fffccf5a337 in ?? () from /opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui_cpp/libqt_gui_cpp_sip.so
#2  0x00007fffef322811 in ?? () from /usr/lib/python2.7/dist-packages/sip.x86_64-linux-gnu.so
#3  0x00007fffef31f642 in ?? () from /usr/lib/python2.7/dist-packages/sip.x86_64-linux-gnu.so
#4  0x00000000004b670c in ?? ()
#5  0x00000000004b0cb3 in PyObject_Call ()
#6  0x00000000004c9faf in PyEval_EvalFrameEx ()
#7  0x00000000004c2765 in PyEval_EvalCodeEx ()
#8  0x00000000004de6fe in ?? ()
#9  0x00000000004b0cb3 in PyObject_Call ()
#10 0x00000000004f492e in ?? ()
#11 0x00000000004b0cb3 in PyObject_Call ()
#12 0x00000000004f46a7 in ?? ()
#13 0x00000000004b670c in ?? ()
#14 0x00000000004b0cb3 in PyObject_Call ()
#15 0x00000000004c9faf in PyEval_EvalFrameEx ()
#16 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#17 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#18 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#19 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#20 0x00000000004c9d8f in PyEval_EvalFrameEx ()
#21 0x00000000004c2765 in PyEval_EvalCodeEx ()
#22 0x00000000004ca099 in PyEval_EvalFrameEx ()
#23 0x00000000004c2765 in PyEval_EvalCodeEx ()
#24 0x00000000004ca099 in PyEval_EvalFrameEx ()
#25 0x00000000004c2765 in PyEval_EvalCodeEx ()
#26 0x00000000004c2509 in PyEval_EvalCode ()
#27 0x00000000004f1def in ?? ()
#28 0x00000000004ec652 in PyRun_FileExFlags ()
#29 0x00000000004eae31 in PyRun_SimpleFileExFlags ()
#30 0x000000000049e14a in Py_Main ()
#31 0x00007ffff7811830 in __libc_start_main (main=0x49dab0 <main>, argc=2, argv=0x7fffffffdcd8, init=<optimized out>, fini=<optimized out>, 
    rtld_fini=<optimized out>, stack_end=0x7fffffffdcc8) at ../csu/libc-start.c:291
#32 0x000000000049d9d9 in _start ()
(gdb)

Originally posted by juakofz on ROS Answers with karma: 23 on 2017-02-02
Post score: 2

Original comments
Comment by Dirk Thomas on 2017-02-03:
The wiki page works fine for me.
Can you post a stack trace from running it with gdb. Maybe that helps in identifying the problem.
Comment by juakofz on 2017-02-03:
Yeah, the wiki page now works. I edited my post with the stack trace (I hope I did it right)
Comment by Robotics_weekends on 2017-02-15:
Hi. I have the same problem! Fighting with it for 3 days!!! Any rqt_* app throws segfault. My system - Ubuntu 16.04, ROS Kinetic, CPU- core i7-6700, GPU- GeForce GTX 970M.
P.S. But strange thing - on my old pc (core2 Duo + old GeForce) with the same OS and ROS version rqt works like a charm!
Comment by Dirk Thomas on 2017-02-15:
I would suggest to compare the version numbers of all involved packages (Qt, ros-kinetic-python-qt-binding, ros-kinetic-qt-gui, rqt, PyQt / PySide, etc.).
Comment by gvdhoorn on 2017-02-16:
Yeah, make sure you don't have any partial updates anywhere. Without ABI compatibility guarantees, partial upgrades can lead to hard to explain SEGFAULTs that seem to make no sense.
Comment by juakofz on 2017-02-16:
I fixed the issue by brute force by basically doing a clean ubuntu install. Sooo... yeah, good luck
Comment by Robotics_weekends on 2017-02-19:
I've fix it!!! As you said guys, issue was in different versions of pyqt, python-sip and some other libraries. In my case, newer versions were got from Cura ppa repository. Thank you for help!
Comment by damjan on 2017-05-19:
@juakofz If you feel like my answer below (based on the comment from @CIRobotics) solves the issue, can you please accept it as the right answer?

A:

Had this same issue, and the fix proposed by @CIRobotics in comments worked for me too. I'll just elaborate on the exact steps I took to resolve it.
The issue is caused by newer versions of packages (python-pyqt5 and python-sip) installed by the Cura PPA. The following steps solved the issue for me:

Uninstall the newer package versions that were installed from the PPA:
sudo apt remove python-pyqt5 pyton3-pyqt5 python-sip python3-sip sip-dev

Remove the PPA:
sudo rm /etc/apt/sources.list.d/thopiekar-ubuntu-cura-xenial.list
sudo apt update

Reinstall ros-kinetic-desktop-full
sudo apt install ros-kinetic-desktop-full

Check with sudo apt autoremove for any other packages that were broken by the downgrade and install or autoremove them as necessary.

A more elegant solution might be to use the ppa-purge tool as described here, however, I discovered that link after I had already fixed the issue, so I could not try it out.
Of course, the drawback of the above solution is that you will not be able to use the Cura software on your Xenial system. I'm dual-booting Windows, so I'll just install the Windows version. I'm currently not aware of a more elegant solution.

Originally posted by damjan with karma: 446 on 2017-04-16
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by gvdhoorn on 2017-04-25:
A bit of info on why these problems might happen: if the pyqt pkgs provided in the Cura PPA aren't ABI compatible with the ones the ROS pkgs use, you can run into things like SEGFAULTs.
Comment by Loy on 2017-11-09:
If you want to use Cura regardless, Ultimaker provides fully packaged .AppImages ( that include the dependencies. IIRC, Ultimaker compiles Qt from source.

