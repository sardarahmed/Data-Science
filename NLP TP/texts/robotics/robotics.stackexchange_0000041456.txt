Q:

p3at doesnt update position on /map when moving forward

Hello everyone,
I am trying to make my robot navigate autonomously. I am using the p3at robot along with a hokuyo laser (URG-04LX-UG01). The problem is that the robot cant tell that it is moving forward or backwards on the map where as it works when it is only moving left and right.
I am using Rosaria to control the robot, along with ROS electric and ubuntu 10.10.
I tried making a map using the gmapping package. It would create a map if I simply spun the robot left or right (this is because the hokuyo laser only looks forward), but when i tried moving it forward the map would mess up since the robot didnt move inside the map. When this failed I tried to use hector_mapping instead and changed some of the parameters so that it didnt use odometry. This worked and I could successfully create a good map.
Now however I have tried to make it autonomous using move_base and I have the same problem. It will start on the map in the initial position and then I will point in RVIZ its target destination. The robot will move forward, but in RVIZ the robot will stay in the same position in the map. When it approaches a wall it will see it as a giant obstacle moving towards it rather than the wall in the map. Meanwhile, it is clear that it registers in rviz when it has turned left or right. I have been loosely following the tutorials found online at http://www.ist.tugraz.at/robotics/bin/view/Main/Ros_first_steps
Here is a picture of the view frames.
http://a6.sphotos.ak.fbcdn.net/hphotos-ak-ash4/208961_3665161141032_580956200_n.jpg
Any help will be greatly appreciated. I have been stuck on this problem for a long time.
Thanks!
Michael

Originally posted by michaelsrobot on ROS Answers with karma: 3 on 2012-06-18
Post score: 0

A:

Looks like your fixed frame is not correct. Have you checked that in RViz, the fixed frame is 'map' or 'odom'?
The other possibility is your /odom frame broadcaster is not doing it correctly. I suggest you do the sanity check in here before you proceed with gmapping. At the very least, you should get a rough map using just teleop, fixed frame = /odom, and long decay time for laser scan in rviz.

Originally posted by weiin with karma: 2268 on 2012-06-18
This answer was ACCEPTED on the original site
Post score: 2

