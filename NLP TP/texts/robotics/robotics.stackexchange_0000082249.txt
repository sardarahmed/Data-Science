Q:

RViz & amcl - fixed_frame mismatch for initialpose

I have a multi-robot system (two robots, for now) in which each is pushed into a namespace (/robot1 and /robot2) using Jakub's answer on how to setup a mulit-robot system (which I updated for Indigo and use the Pioneer 3dx instead of the turtlebot).
Most everything is working fine except for when I try to set the inital pose manually for amcl using RViz. I set the fixed_frame to be /map which is what both robots (and amcl for both) are using. amcl is subscribed to /robot1/initialpose for one robot and /robot2/initialpose for the other so, using the Tool Properties in RViz I set the topic for the 2D Pose Estimate to be /robot1/initialpose.
When I attempt to set the pose from RViz I get the following warning from amcl:
Ignoring initial pose in frame "map"; initial poses must be in the global frame, "/map"

This warning comes up despite the fact that I set /map as the fixed_frame in RViz. When I echo the topic and set the pose, I get this:
header: 
  seq: 0
  stamp: 
    secs: 282
    nsecs: 751000000
  frame_id: map
pose: 
  pose: 
    position: 
      x: 25.1116027832
      y: 51.6672058105
      z: 0.0
    orientation: 
      x: 0.0
      y: 0.0
      z: -0.827484384125
      w: 0.561488730099
  covariance: [0.25, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.25, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.06853891945200942]

which results in the above error (note the frame_id of map without a /). However, if I publish the same message myself but with a frame_id of /map instead of map I get the following output from amcl:
Setting pose (408.542000): 25.112 51.667 -1.949

How do I change thefixed_frame for the initialpose or am I missing sometheing here? Is it a bug?

Originally posted by jayess on ROS Answers with karma: 6155 on 2017-08-09
Post score: 2

A:

The problem seems to be, that RVIZ removes any leading '/' from the fixed_frame (you actually see it in the GUI), which doesn't look right to me. Can you set amcl to use the "map" frame without the leading '/'?

Originally posted by Sebastian Kasperski with karma: 1658 on 2017-08-10
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by jayess on 2017-08-10:
Your solution worked. I find some parts of the namespacing to be a little confusing and this is one area where that showed. I thought that I had to have the / prepended to the beginning of the frame_id. Looks like I was wrong.
Comment by nightwish on 2018-06-19:
Hi, I followed the tutorial too and got the same problem. I set amcl to use the "map" frame without the leading '/' as the suggestion of @Sebastian and there was no error or warning message in output.
However, the robot's position in rviz remain unchanged.
Could you help me deal with this?
Thanks!
Comment by jayess on 2018-06-19:
@nightwish please create a new question and reference this question.

