Q:

actionlib client question

Hi all, I want to use actionlib to send gripping control cmd to gripper_controller(arbotix package), but after compiling I ran my node, and get strange info: "terminate called after throwing an instance of 'ros::InvalidNameException'
what():  Using ~ names with NodeHandle methods is not allowed.  If you want to use private names with the NodeHandle interface, construct a NodeHandle using a private name as its namespace.  e.g. ros::NodeHandle nh("~");  nh.getParam("my_private_name"); (name = [~gripper_action])
Aborted (core dumped)"
I cannot change my code as the note's "nh.getParam("my_private_name")" because I need sentence like "GripperMoveClient ac("~gripper_action",true);" to define my client.
Pls help me, thanks! Below is my actionlib client code.
#include ros/ros.h>  //in order to show for you I //deliberately lose "<"

#include actionlib/client/simple_action_client.h>

#include control_msgs/GripperCommandAction.h>

typedef actionlib::SimpleActionClient<control_msgs::GripperCommandAction> GripperMoveClient;

int main(int argc, char** argv){

ros::init(argc, argv, "grasping_points_node");

GripperMoveClient ac("~gripper_action",true);

 while(!ac.waitForServer(ros::Duration(5.0))){

  ROS_INFO("Waiting...");}

  control_msgs::GripperCommandGoal goal;

  goal.command.position=0.01;
  
  ac.sendGoal(goal);

}

Originally posted by Yantian_Zha on ROS Answers with karma: 74 on 2014-04-26
Post score: 0

A:

This solves your error message:
ros::NodeHandle pn("~");
GripperMoveClient ac(pn, "gripper_action", true);

By constructing the private node handle with namespace "~", and then passing that to your action client, the effect will be that you're subscribing to"~/gripper_action", which will be resolved to "/grasping_points_node/gripper_action". Are you sure you want that to happen? It only makes sense if the action server that you're trying to connect to is running in the private namespace of your client node, i.e. in almost all cases it's part of the same node.
Probably you should run rostopic list on the command line to figure out the final resolved name of the gripper_action topic.
Here is some more information on how ~ is resolved in ROS.

Originally posted by Martin GÃ¼nther with karma: 11816 on 2014-05-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Yantian_Zha on 2014-05-09:
Thanks for your kind reply, and I solved my problem.

