Q:

obstacles are not removed from the costmap

Hi,
I've searched and i found similar questions, but no conclusions.
scenario:
ROS: Indigo
Laser: XV11
The robot is stable not moving, i move near the robot, and the map is updated with an obstacle, i move away, and the obstacle is not removed (unless the move_base is restarted), the laser is clear, the obstacle is still there plus some yellow dots.
rviz snapshots:
initial:
https://dl.dropboxusercontent.com/u/17246489/PIC0.png
obstacle present:
https://dl.dropboxusercontent.com/u/17246489/PIC1-NEWOBSTACLE.png
obstacle gone:
https://dl.dropboxusercontent.com/u/17246489/PIC2-OBSTACLE-GONE.png
obstacle gone (laser only):
https://dl.dropboxusercontent.com/u/17246489/PIC3-OBSTACLE-GONE-LASERONLY.png
If i go again to the front of the robot the obstacle area get's bigger, and stays there even when i move away.
Any clues ?
Regards,
Tiago
Update1: (costmap parameters)
==========================================================

robot_radius: 0.22545

inflation_layer:
  enabled: true
  cost_scaling_factor: 10.0
  inflation_radius: 0.25

obstacle_layer:
  enabled: true
  obstacle_range: 2.5
  raytrace_range: 3.0
  max_obstacle_height: 0.6
  min_obstacle_height: 0.0
  observation_sources: scan_source
  scan_source:
    data_type: LaserScan
    topic: /xv11
    marking: true
    clearing: true
    expected_update_rate: 0.4
    observation_persistence: 0.0

==========================================================

local_costmap:
   plugins:
      - {name: sonar_source, type: "range_sensor_layer::RangeSensorLayer"}
      - {name: obstacle_layer, type: 'costmap_2d::ObstacleLayer'}
      - {name: inflation_layer, type: 'costmap_2d::InflationLayer'}
   global_frame: /odom
   robot_base_frame: /base_footprint
   update_frequency: 3.0
   publish_frequency: 1.0
   static_map: false
   rolling_window: true
   transform_tolerance: 1.0
   map_type: costmap
   width: 6.0
   height: 6.0
   resolution: 0.01

==========================================================

global_costmap:
  plugins:
    - {name: sonar_source, type: "range_sensor_layer::RangeSensorLayer"}
    - {name: static_layer, type: 'costmap_2d::StaticLayer'}
    - {name: obstacle_layer, type: 'costmap_2d::ObstacleLayer'}
    - {name: inflation_layer, type: 'costmap_2d::InflationLayer'}
  global_frame: /map
  robot_base_frame: /base_footprint
  update_frequency: 1.0
  publish_frequency: 0.0
  static_map: true
  rolling_window: false
  resolution: 0.01
  transform_tolerance: 1.0
  map_type: costmap

Originally posted by P Tiago P on ROS Answers with karma: 3 on 2015-07-25
Post score: 0

Original comments
Comment by David Lu on 2015-07-26:
We can't help without seeing your configuration files. please post the parameters for move base.
Comment by P Tiago P on 2015-07-26:
@David: Thanks for asking, I've updated the post.
Comment by David Lu on 2015-07-31:
I'm unclear what your third picture is showing. What does the costmap look like after you move away?
Comment by P Tiago P on 2015-08-07:
@David: I updated the screenshots

A:

It looks like you just have a single square filled in. This may be an effect of having not enough lasers or too high of a resolution. I imagine if the robot turns slightly, the obstacle will disappear.

Originally posted by David Lu with karma: 10932 on 2015-08-07
This answer was ACCEPTED on the original site
Post score: 0

