Q:

Rostopic on Mac

I am continuing my quest to get ROS working on my Mac. I deleted my old ros_catkin_ws fully, and then redid the installation script (I know, it's not complete or supported, but I have to try.) For a change I thought I should try kinetic-ors-com-wet-install.
All went well ,without errors. And roscore started up fine.
Then this:
bash-3.2$ rostopic -h
Fatal Python error: PyThreadState_Get: no current thread
Abort trap: 6

Anyone have a pointer for me on that one/ Thanks!

Originally posted by pitosalas on ROS Answers with karma: 628 on 2017-07-21
Post score: 1

A:

Hi, I encountered the same problem.
I finally solved it by referring to https://qiita.com/furushchev/items/bc0d2b9d6c84741645f0
This problem is caused by the wrong reference to System standard Python in roslz4.
$ otool -L $CATKIN_WS/install_isolated/lib/python2.7/site-packages/roslz4/_roslz4.so

You can find:
_roslz4.so:
    _roslz4.so (compatibility version 0.0.0, current version 0.0.0)
    libroslz4.dylib (compatibility version 0.0.0, current version 0.0.0)
    /System/Library/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.10)
    /usr/local/opt/lz4/lib/liblz4.1.dylib (compatibility version 1.0.0, current version 1.8.1)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1238.0.0)

so, we should change it to the Python we currently use:
$ install_name_tool -change /System/Library/Frameworks/Python.framework/Versions/2.7/Python /usr/local/bin/python _roslz4.so

then rostopic turns out to be OK for me.
Hope I could help.

Originally posted by heretic1993 with karma: 16 on 2018-03-16
This answer was ACCEPTED on the original site
Post score: 0

