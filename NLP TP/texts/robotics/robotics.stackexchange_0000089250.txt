Q:

Costmap2D failing to mark laser scan data as obstacles on one side

My obstacle layer is only marking obstacles on one half of the robot.

The raw laser scan data is correct and it is correctly visualised in RVIZ and you can see. The unmarked obstacles are always on the right-side of the robot (0 to -pi), even as it turns in the costmap. If it was an issue with the costmap itself, I would expect the error to be independent of the robot, however this is not the case.
Does this look familiar or have any suggestions?
local_costmap_params.yaml:
local_costmap:
  global_frame: odom
  robot_base_frame: base_link
  update_frequency: 5.0
  publish_frequency: 2.0
  static_map: false
  rolling_window: true
  width: 7.0
  height: 7.0
  resolution: 0.05
  transform_tolerance: 0.5

  plugins:
   #- {name: sonar_layer, type: "range_sensor_layer::RangeSensorLayer"}
   - {name: obstacle_layer, type: 'costmap_2d::ObstacleLayer'}
   - {name: inflation_layer, type: 'costmap_2d::InflationLayer'}

  sonar_layer:
    topics: ['/ultrasonic1','/ultrasonic2','/ultrasonic3']
    clear_threshold: 0.4
    mark_threshold: 0.6
    clear_on_max_reading: true
    no_readings_timeout: 0.0

common_costmap_params.yaml:
footprint: [[0.28, 0.245], [0.28,-0.245], [-0.28,-0.245], [-0.28,0.245]]
obstacle_layer:
  observation_sources: laser_scan_sensor
  laser_scan_sensor:
    topic: /scan
    sensor_frame: /scan
    data_type: LaserScan
    marking: true
    clearing: true
    expected_update_rate: 5.0
    inf_is_valid: true
  obstacle_range: 6
  raytrace_range: 15

inflation_layer:
  inflation_radius: 0.35
  cost_scaling_factor: 10.0

TF publisher from /base_link to /scan:
<node name="base_link_to_scan" pkg="tf" type="static_transform_publisher" args="0.20 0 0 3.1415 0 0 /base_link /scan 100"/>

EDIT 1
warning message on move_base bringup:
[ INFO] [1539238779.564957513]: Using plugin "obstacle_layer"
[ INFO] [1539238779.620244801]:     Subscribed to Topics: laser_scan_sensor
[ INFO] [1539238780.103866224]: Using plugin "inflation_layer"
[ WARN] [1539238780.699934704]: Illegal bounds change, was [tl: (-179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.000000, -179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.000000), br: (179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.000000, 179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.000000)], but is now [tl: (-340282346638528859811704183484516925440.000000, -340282346638528859811704183484516925440.000000), br: (340282346638528859811704183484516925440.000000, 340282346638528859811704183484516925440.000000)]. The offending layer is local_costmap/inflation_layer
[ INFO] [1539238780.918647320]: Created local_planner base_local_planner/TrajectoryPlannerROS
[ INFO] [1539238781.130984061]: Sim period is set to 0.10
[ INFO] [1539238782.598323429]: Recovery behavior will clear layer obstacles
[ INFO] [1539238782.684406268]: Recovery behavior will clear layer obstacles

EDIT 2
Local Costmap is centered on the robot:

result from echo on /scan
    header: 
  seq: 660
  stamp: 
    secs: 1539183847
    nsecs: 932467526
  frame_id: "scan"
angle_min: -3.12413907051
angle_max: 3.14159274101
angle_increment: 0.00871450919658
time_increment: 9.44497514865e-05
scan_time: 0.0679093673825
range_min: 0.15000000596
range_max: 12.0
ranges: [3.6559998989105225, 3.635999917984009, 3.611999988555908, 3.6080000400543213, 3.0759999752044678, 3.2079999446868896, 3.7200000286102295, 3.7200000286102295, 3.6640000343322754, 3.6440000534057617, 3.6480000019073486, 2.5920000076293945, 2.615999937057495, inf, 2.6559998989105225, 2.6559998989105225, 2.6480000019073486, 2.635999917984009, 2.631999969482422, 2.635999917984009, 2.631999969482422, 2.631999969482422, 2.611999988555908, 2.6080000400543213, 2.611999988555908, 2.619999885559082, 2.628000020980835, 2.615999937057495, 2.615999937057495, 2.611999988555908, 2.611999988555908, 2.611999988555908, 2.619999885559082, 2.624000072479248, 2.624000072479248, 2.6440000534057617, 2.6480000019073486, 2.640000104904175, 2.6640000343322754, 2.6640000343322754, 2.671999931335449, 2.6679999828338623, 2.6760001182556152, 2.6760001182556152, 2.680000066757202, 2.687999963760376, 2.691999912261963, 2.691999912261963, 2.7039999961853027, 2.7239999771118164, 2.7279999256134033, 2.7279999256134033, 2.7320001125335693, 2.752000093460083, 2.75600004196167, 2.75600004196167, 2.75600004196167, 2.7679998874664307, 2.7839999198913574, 2.7839999198913574, 2.7960000038146973, 2.812000036239624, 2.808000087738037, 2.7920000553131104, 2.7920000553131104, 2.7799999713897705, 2.7960000038146973, 2.808000087738037, 2.808000087738037, 2.815999984741211, 2.812000036239624, 2.815999984741211, 2.8320000171661377, 2.8320000171661377, 2.8480000495910645, 2.875999927520752, 2.9040000438690186, 2.9119999408721924, 2.936000108718872, 3.007999897003174, 3.052000045776367, 3.0480000972747803, 3.0480000972747803, 4.084000110626221, inf, inf, inf, inf, inf, 4.176000118255615, 4.176000118255615, inf, 4.184000015258789, 4.184000015258789, inf, inf, 5.464000225067139, 5.464000225067139, 5.544000148773193, 5.535999774932861, 5.656000137329102, inf, 5.823999881744385, 5.823999881744385, inf, inf, 5.935999870300293, 5.935999870300293, 5.992000102996826, inf, inf, inf, 4.631999969482422, 4.631999969482422, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, 5.248000144958496, 5.248000144958496, inf, inf, inf, inf, inf, 5.104000091552734, 5.104000091552734, inf, 5.0320000648498535, 5.0320000648498535, 4.984000205993652, 4.984000205993652, 4.9679999351501465, 4.935999870300293, 4.9039998054504395, 4.9039998054504395, 4.880000114440918, 4.880000114440918, 4.880000114440918, 4.840000152587891, 4.800000190734863, 4.815999984741211, 4.776000022888184, 4.736000061035156, 4.760000228881836, 4.760000228881836, 4.736000061035156, 4.728000164031982, 4.696000099182129, 4.631999969482422, 4.624000072479248, 4.631999969482422, 4.631999969482422, 4.624000072479248, 4.624000072479248, 4.5920000076293945, 4.535999774932861, 4.519999980926514, 3.98799991607666, 3.864000082015991, 4.5, 4.504000186920166, 4.504000186920166, 4.504000186920166, 4.48799991607666, 4.504000186920166, 4.504000186920166, 4.48799991607666, 4.464000225067139, 4.455999851226807, 4.447999954223633, 4.48799991607666, 4.5279998779296875, 4.5279998779296875, 4.4720001220703125, 4.440000057220459, 4.423999786376953, 4.423999786376953, 4.440000057220459, 4.415999889373779, 4.415999889373779, 4.440000057220459, 4.440000057220459, 4.415999889373779, 4.400000095367432, 4.383999824523926, 4.400000095367432, 4.311999797821045, 4.168000221252441, 4.1519999504089355, 4.248000144958496, 4.248000144958496, 4.375999927520752, 4.375999927520752, 4.4079999923706055, 4.4079999923706055, 4.4079999923706055, 4.423999786376953, 4.4079999923706055, 4.375999927520752, 4.375999927520752, 4.368000030517578, 4.400000095367432, 4.440000057220459, inf, 3.8919999599456787, 3.8919999599456787, inf, inf, inf, inf, inf, 4.400000095367432, 4.400000095367432, 4.415999889373779, 4.415999889373779, 4.440000057220459, 4.455999851226807, 4.455999851226807, 4.51200008392334, 4.544000148773193, 4.535999774932861, 4.544000148773193, 4.567999839782715, 4.599999904632568, 4.576000213623047, 4.535999774932861, 4.455999851226807, 4.455999851226807, 4.4079999923706055, 4.415999889373779, 4.335999965667725, 4.25600004196167, 4.616000175476074, 4.656000137329102, 4.599999904632568, 4.464000225067139, 4.464000225067139, 4.415999889373779, 4.808000087738037, 4.823999881744385, 4.808000087738037, 4.840000152587891, 4.855999946594238, 4.840000152587891, 4.23199987411499, 4.23199987411499, 4.176000118255615, 4.136000156402588, 4.159999847412109, 4.159999847412109, 4.168000221252441, 4.184000015258789, 4.216000080108643, 4.375999927520752, 4.375999927520752, 4.51200008392334, 4.51200008392334, inf, 5.111999988555908, 5.111999988555908, inf, inf, 5.216000080108643, 5.216000080108643, 5.1519999504089355, 5.1519999504089355, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, 4.559999942779541, 4.559999942779541, 3.3239998817443848, 3.3239998817443848, 3.308000087738037, 3.2839999198913574, 3.25600004196167, 3.24399995803833, inf, 7.679999828338623, 7.679999828338623, 7.6479997634887695, 7.239999771118164, 7.239999771118164, 5.888000011444092, inf, 7.184000015258789, 7.184000015258789, 7.079999923706055, inf, 4.440000057220459, 4.440000057220459, 7.144000053405762, 7.159999847412109, inf, inf, inf, 5.74399995803833, 5.74399995803833, inf, 6.696000099182129, 6.696000099182129, inf, 6.703999996185303, 6.703999996185303, inf, inf, 6.76800012588501, 6.76800012588501, 4.303999900817871, 4.303999900817871, 6.639999866485596, inf, inf, 6.5920000076293945, 6.5920000076293945, inf, 6.552000045776367, 6.552000045776367, 6.552000045776367, 6.607999801635742, 6.584000110626221, inf, inf, 6.552000045776367, 6.552000045776367, 2.74399995803833, 2.74399995803833, inf, inf, 2.74399995803833, 2.74399995803833, 2.7360000610351562, 2.7360000610351562, 2.752000093460083, 2.747999906539917, 2.747999906539917, 2.752000093460083, 2.752000093460083, 6.639999866485596, 6.639999866485596, 6.624000072479248, 6.559999942779541, 6.559999942779541, 6.51200008392334, 6.567999839782715, 6.5920000076293945, 6.624000072479248, 6.711999893188477, 6.639999866485596, 6.495999813079834, 5.97599983215332, 5.992000102996826, 5.992000102996826, 6.0, 1.1480000019073486, 1.1480000019073486, inf, 1.1440000534057617, 1.1440000534057617, 1.4880000352859497, inf, 3.1080000400543213, 3.1080000400543213, 3.0880000591278076, 3.0880000591278076, 1.1160000562667847, inf, 1.1160000562667847, 1.1160000562667847, 2.8519999980926514, 2.8519999980926514, 2.868000030517578, 2.868000030517578, 2.871999979019165, 2.871999979019165, 2.871999979019165, 2.888000011444092, 2.8919999599456787, 1.4819999933242798, 1.4819999933242798, inf, 1.1480000019073486, 1.1480000019073486, inf, inf, 3.0239999294281006, 3.0239999294281006, 3.0280001163482666, 3.0239999294281006, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, 6.639999866485596, 6.639999866485596, 6.783999919891357, 14.184000015258789, 14.184000015258789, inf, inf, 13.592000007629395, 13.592000007629395, inf, inf, inf, inf, inf, inf, inf, inf, 13.215999603271484, 13.215999603271484, inf, 13.152000427246094, 13.152000427246094, inf, inf, inf, inf, inf, 7.136000156402588, 7.136000156402588, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, 8.720000267028809, 8.720000267028809, inf, 8.751999855041504, 8.751999855041504, 8.736000061035156, 2.752000093460083, 2.752000093460083, inf, 2.7639999389648438, 2.7639999389648438, 2.75600004196167, 2.747999906539917, 2.74399995803833, 2.740000009536743, 2.7160000801086426, 2.7039999961853027, 2.696000099182129, 2.680000066757202, 2.684000015258789, 2.684000015258789, 2.684000015258789, 2.6760001182556152, 2.6679999828338623, 2.640000104904175, 2.635999917984009, 2.640000104904175, 2.635999917984009, 2.628000020980835, 2.628000020980835, 2.624000072479248, 2.568000078201294, 2.4839999675750732, 2.444000005722046, 2.4639999866485596, 2.496000051498413, 2.492000102996826, 2.4839999675750732, 2.48799991607666, 2.48799991607666, 2.48799991607666, 2.48799991607666, 2.4600000381469727, 2.440000057220459, 2.4800000190734863, 2.5160000324249268, 6.223999977111816, 6.223999977111816, 6.223999977111816, 6.216000080108643, 6.136000156402588, 6.144000053405762, 6.199999809265137, 6.199999809265137, 6.119999885559082, 6.0879998207092285, 6.136000156402588, 6.159999847412109, 6.168000221252441, 6.168000221252441, 6.176000118255615, 6.176000118255615, 6.208000183105469, 6.263999938964844, 6.239999771118164, 6.199999809265137, 6.208000183105469, 6.199999809265137, 6.199999809265137, 6.168000221252441, 6.144000053405762, 6.176000118255615, 6.176000118255615, 5.25600004196167, 5.9120001792907715, 5.303999900817871, 4.815999984741211, 4.703999996185303, inf, inf, 3.9040000438690186, 3.9040000438690186, 3.803999900817871, 3.803999900817871, 3.7239999771118164, 3.615999937057495, 3.5199999809265137, 3.447999954223633, 3.3519999980926514, 3.240000009536743, 3.1519999504089355, 3.0840001106262207, 2.9839999675750732, 2.888000011444092, 2.888000011444092, 2.8239998817443848, 2.7799999713897705, 2.7799999713897705, 2.812000036239624, 2.815999984741211, 2.819999933242798, 2.859999895095825, 2.864000082015991, 2.864000082015991, 2.859999895095825, 2.880000114440918, 2.8959999084472656, 2.9159998893737793, 2.9040000438690186, 2.9159998893737793, 2.9600000381469727, 2.9679999351501465, 2.98799991607666, 2.98799991607666, 3.007999897003174, 3.0360000133514404, 3.068000078201294, 3.0959999561309814, 3.124000072479248, 3.131999969482422, 3.140000104904175, 3.140000104904175, 3.1519999504089355, 3.180000066757202, 3.2119998931884766, 3.2279999256134033, 3.247999906539917, 3.2960000038146973, 3.312000036239624, 3.3399999141693115, 3.388000011444092, 3.388000011444092, 3.4119999408721924, 3.431999921798706, 3.4600000381469727, 3.4800000190734863, 3.48799991607666, 3.5280001163482666, 3.5920000076293945, 3.5920000076293945, 3.624000072479248, 3.640000104904175, 3.6559998989105225, 3.7119998931884766, 3.75600004196167, 3.7720000743865967, 3.799999952316284, 3.8440001010894775, 3.8440001010894775, 3.9159998893737793, 3.947999954223633, 3.9639999866485596, 4.007999897003174, 4.039999961853027, 4.064000129699707, 4.136000156402588, 4.136000156402588, 4.216000080108643, 4.263999938964844, 4.320000171661377, 4.3520002365112305, 4.392000198364258, 4.455999851226807, 4.51200008392334, 4.607999801635742, 4.607999801635742, 4.664000034332275, 4.71999979019165, 4.815999984741211, 4.920000076293945, 4.97599983215332, 5.02400016784668, 5.144000053405762, 5.216000080108643, 5.216000080108643, 5.28000020980835, 5.415999889373779, 5.51200008392334, 5.607999801635742, 5.711999893188477, 5.8480000495910645, 6.0, 6.104000091552734, 6.104000091552734, 6.184000015258789, 6.335999965667725, 6.504000186920166, 6.552000045776367, 6.855999946594238, 6.984000205993652, 7.1519999504089355, 7.1519999504089355, 7.248000144958496, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, 3.799999952316284, 3.799999952316284, 3.7639999389648438, 2.944000005722046, 3.7039999961853027, 3.2679998874664307, 3.759999990463257, 3.759999990463257, 3.696000099182129]
intensities: [47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0, 47.0]

Originally posted by mcarr on ROS Answers with karma: 145 on 2018-10-10
Post score: 0

A:

The problem was in the TF transform from odom -> base_link. I am using robot_localization to fuse IMU and wheel odometry data. When I instead used a static transform publish for the tf odom -> base_link, everything worked fine. I did see that when using robot_localization, there was small variations in the pitch and roll due to noise (or drift / inaccuracies) in the IMU.
"rosrun tf tf_echo odom base_link" gives
At time 1539332949.794
- Translation: [0.030, 0.002, 0.000]
- Rotation: in Quaternion [0.002, -0.000, 0.030, 1.000]
            in RPY (radian) [0.005, -0.000, 0.061]
            in RPY (degree) [0.268, -0.025, 3.494]

If you can imagine that the laser scan frame is not parallel to the 'ground' plane due to these small inaccuracies. Thus the Costmap2D was ignoring the laser scan values when the laser plane when below the ground plane.
Fix: In robot_localisation parameters.yaml file, there is a parameter called two_d_mode
# ekf_localization_node and ukf_localization_node both use a 3D omnidirectional motion model. If this parameter is
# set to true, no 3D information will be used in your state estimate. Use this if you are operating in a planar
# environment and want to ignore the effect of small variations in the ground plane that might otherwise be detected
# by, for example, an IMU. Defaults to false if unspecified.
two_d_mode: false

setting
two_d_mode: true

fixed the problem completely. The package then assumed 2D as so sets the pitch and roll to 0. There was never any problem with the lidar data or Costmap2D configuration but instead slight planer misalignment of the base_link frame (i.e. the transform odom -> base_link).

Originally posted by mcarr with karma: 145 on 2018-10-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Lionel_10 on 2020-11-17:
Hello. I met the same problem. The obstacle layer is only marking obstacles on right hand of the robot.
The original laser_scan data is correct, and the TF transform from odom to base_link is correct as well which shows like below:

Rotation:   in Quaternion [0.000, 0.000, 1.000, 0.002]
in RPY (radian) [0.000, -0.000, 3.138]
in RPY (degree) [0.000, -0.000, 179.812]

I have no idea about this problem.

