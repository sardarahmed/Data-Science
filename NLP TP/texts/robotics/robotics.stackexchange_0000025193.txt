Q:

How to approach a target pose via the XY surface normal?

I'm trying to make my panda approach an aruco marker target on the table. However, I also want as a constraint that it does so perpendicular to the target. Given that a pose has an orientation component I can specify this should be fairly simple. The part I'm struggling with is how to mathematically 'flip' the orientation of the target. Is it as simple as multiplying the goal orientation with the quaternion (1,0,0,0)? (which gets me the desired result on a level plane)

A:

Recall that one of the reasons we like quaternions is, like Matrices, we can multiply them to get one quaternion that represents both of their effects together.
So, yes, if we know the orientation of the ARuCo marker, and we know some orientation to modify that orientation by, we can multiply and normalize to get the appropriate orientation:
tf2::Quaternion rotation, approachOrientation;
rotation.setRPY(0, M_PI, 0) // assuming we want to flip around pitch by 180 degrees

approachOrientation = arucoOrientation * rotation;
approachOrientation.normalize();

