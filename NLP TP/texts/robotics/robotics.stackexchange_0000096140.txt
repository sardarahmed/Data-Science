Q:

Does AMCL still work in an edited map?

I have a global map of a big room but edited the .pgm file and added a wall so that the robot doesn't drive under a table.
My question is does AMCL use this map to correct the localisation of the robot and can it fuck up because it thinks there needs to be a wall under the table when there is none?
Thanks for reading.

Originally posted by kopop8 on ROS Answers with karma: 65 on 2020-06-10
Post score: 0

A:

Depends on your settings, the particles of AMCL are in general in a quite small radius (if the rest of the map is decent, good odometry, etc). You don't need a perfect map for AMCL, it will be worse but likely by not by much. You could probably make your static layer use a different occupancy grid from the one used by AMCL.
See http://wiki.ros.org/costmap_2d/hydro/staticmap

Originally posted by bob-ROS with karma: 525 on 2020-06-10
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by kopop8 on 2020-06-10:
Thanks for the quick answer!  So it's not a good idea to edit a map and draw aisles in a big empty room for example?
Comment by bob-ROS on 2020-06-10:
I will make it worse for sure, but you can circumvent this problem by just having the edited map being used for the path planning, while the original being just by AMCL for localization.
Comment by kopop8 on 2020-06-10:
Thank you so much!! I will do that! :)
Comment by bob-ROS on 2020-06-10:
To be more specific: the /map topic is generally used for the AMCL map as well as the occupancy grid for the global costmap's static layer. Create an additional map server so you have e.g. /map_edited that the layers subscribes to instead.

