Q:

drcsim: how do we reset BDI sim_interface error after fall and resume stand?

If the robot falls, the behavior_feedback sets an error code and prevents the robot from entering anything other than USER mode.
Do we need to do anything other than return the robot to standing posture to resume BDI's MANIPULATION/STAND controls?

Originally posted by dcconner on Gazebo Answers with karma: 298 on 2013-05-22
Post score: 1

Original comments
Comment by astaranowicz on 2013-05-22:
I'm having this problem also.  It seems that the code has a bug so that when the acceleration is to high it actually freezes all the joints.
Comment by dcconner on 2013-05-22:
The BDI interface locks the joints (FREEZE) if robot falls to prevent controller from going unstable.  See user guide.  Once the robot falls, the system continues to report falling status, and it's not clear how this is cleared, or how to "reset" the BDI interface to enter STAND mode again if you get off the ground
Comment by astaranowicz on 2013-05-23:
That makes sense, however, I would still consider this a bug because it doesn't clear the falling status.

A:

As mentioned in the DRCSim User Guide, Stand mode is the hub to all the behavioral modes, I've added a diagram to clarify this point.  So to recover from a fall, you must first go back to User mode, then to Stand mode.  Below is an example path to recovery:

Put the robot under PID control, (i.e. set k_effort[0:28] to 255 for all joints), then
Get the robot back on to its feet with your own controller.  Drive Atlas into PID controlled Stand pose (for example, see VRCPlugin::SetPIDStand() for approximate target joint positions taken from a snapshot of joint states while standing).
Once the robot stabilizes, you can then switch to BDI STAND mode mode and set all k_effort[0:28] to 0 simultaneously (for example, see SetBDIStand() for reference).

Originally posted by hsu with karma: 1873 on 2013-05-25
This answer was ACCEPTED on the original site
Post score: 0

