Q:

Could not find resource '[]' in 'hardware_interface::EffortJointInterface'

Hello,
The answers at questions: 1, 2 etc, does not seem to be solving this. I am having trouble setting up basic controllers in Gazebo. Can you please help me out with this please?
When I launch the launch file, I get an error saying Could not find resource 'gripper_joint' in 'hardware_interface::EffortJointInterface'.
I confirmed that my controller_manager and spawner are in same name space:
$ rosservice list | grep controller_manager
/braccio/controller_manager/list_controller_types
/braccio/controller_manager/list_controllers
...

$ rosservice list | grep spawner
/braccio/controller_spawner/get_loggers
/braccio/controller_spawner/set_logger_level

My launch file:
<launch>

<!-- Convert an xacro and put on parameter server -->
<param name="robot_description" command="$(find xacro)/xacro --inorder $(find braccio_arduino_ros_rviz)/urdf/braccio_arm.xacro" />

  <!-- these are the arguments you can pass this launch file, for example paused:=true -->
  <arg name="paused" default="false"/>
  <arg name="use_sim_time" default="true"/>
  <arg name="gui" default="true"/>
  <arg name="headless" default="false"/>
  <arg name="debug" default="false"/>

  <!-- We resume the logic in empty_world.launch -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
 
   <arg name="world_name" default="$(find braccio_gazebo)/worlds/pick_place_multi.world"/>  

    <arg name="debug" value="$(arg debug)" />
    <arg name="gui" value="$(arg gui)" />
    <arg name="paused" value="$(arg paused)"/>
    <arg name="use_sim_time" value="$(arg use_sim_time)"/>
    <arg name="headless" value="$(arg headless)"/>
  </include>

<!-- Spawn a robot into Gazebo -->
<node name="spawn_urdf" pkg="gazebo_ros" type="spawn_model" args="-param robot_description -urdf -x 1.3 -y -0.3 -z 0.8 -model braccio" />

  <!-- Load joint controller configurations from YAML file to parameter server -->
  <rosparam file="$(find braccio_gazebo)/config/braccio_gazebo_joint_position.yaml" command="load"/>

  <!-- load the controllers -->
  <node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false"
    output="screen" ns="/braccio" args="base_joint_pos_cntrl
                          shoulder_joint_pos_cntrl
                              elbow_joint_pos_cntrl
                              wrist_pitch_joint_pos_cntrl
                          wrist_roll_joint_pos_cntrl
                          sub_gripper_joint_pos_cntrl   
                              gripper_joint_pos_cntrl "/>

<node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>
</launch>

My YAML file:
braccio:
  # Publish all joint states -----------------------------------
  joint_state_controller:
    type: joint_state_controller/JointStateController
    publish_rate: 50

  # Position Controllers ---------------------------------------
  base_joint_pos_cntrl:
    type: effort_controllers/JointPositionController
    joint: base_joint
    pid: {p: 100.0, i: 10.0, d: 1.0}
  shoulder_joint_pos_cntrl:
    type: effort_controllers/JointPositionController
    joint: shoulder_joint
    pid: {p: 100.0, i: 10.0, d: 1.0}
  elbow_joint_pos_cntrl:
    type: effort_controllers/JointPositionController
    joint: elbow_joint
    pid: {p: 100.0, i: 10.0, d: 1.0}
  wrist_pitch_joint_pos_cntrl:
    type: effort_controllers/JointPositionController
    joint: wrist_pitch_joint
    pid: {p: 100.0, i: 10.0, d: 1.0}
  wrist_roll_joint_pos_cntrl:
    type: effort_controllers/JointPositionController
    joint: wrist_roll_joint
    pid: {p: 100.0, i: 10.0, d: 1.0}
  gripper_joint_pos_cntrl:
    type: effort_controllers/JointPositionController
    joint: gripper_joint
    pid: {p: 100.0, i: 10.0, d: 1.0}
  sub_gripper_joint_pos_cntrl:
    type: effort_controllers/JointPositionController
    joint: sub_gripper_joint
    pid: {p: 100.0, i: 10.0, d: 1.0}

XACRO file for my robot using the Braccio Arduino arm:
<?xml version="1.0" ?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro" 
    xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor"
        xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller"
        xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface"
    name="braccio">

  <xacro:property name="damping_value" value="203.35"/>
  <xacro:property name="friction_value" value="20.135"/>

<xacro:property name="kinect_box_length" value="0.3556" />
<xacro:property name="kinect_box_width" value="0.1778" />
<xacro:property name="kinect_box_height" value="0.0762" />
<xacro:property name="kinect_box_mass" value="1.274595" />

<xacro:macro name="inertial_matrix_cuboid" params="mass box_length box_width">
               <inertial>
                       <mass value="${mass}" />
                       <inertia ixx="${mass/12*(box_length*box_length)}" 
                                ixy = "0" ixz = "0"
                                iyy="${mass/12*(box_width*box_width)}" iyz = "0"
                                izz="${mass/12*(box_length*box_length + box_width*box_width)}" />
               </inertial>
</xacro:macro>

<xacro:macro name="transmission_block" params="joint_name idx">
      <transmission name="tran_${idx}">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="${joint_name}">
          <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor__${idx}">
          <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
      </transmission>
</xacro:macro>

<link name="world"/>

<joint name="world_joint" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
  </joint>

    <link name="base_link">
    <visual>
      <geometry>
    <cylinder length="0.01" radius=".053" />
      </geometry>
      <material name="black"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </visual>
    <inertial>
      <mass value="2"/>
    <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
  </link>

    <link name="camera_link"> 
    <xacro:inertial_matrix_cuboid mass="${kinect_box_mass}" box_length="${kinect_box_length}" box_width="${kinect_box_width}"/>
    </link>

  <joint name="camera_joint" type="fixed">
    <origin xyz="0 0 1.2" rpy="0 0 0"/> 
    <parent link="base_link"/>
    <child link="camera_link"/>
  </joint>
  
  <link name="braccio_base_link">
    <visual>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="orange"/>
      <origin rpy="0 0 3.1416" xyz="0 0.004 0" />
    </visual>
    <inertial>
      <mass value="2"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.015"/>
    </inertial>
    <collision>
      <origin rpy="0 0 3.1416" xyz="0 0.004 0"/>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="shoulder_link">
    <visual>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_shoulder.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="orange"/>
      <origin rpy="0 0 0" xyz="-0.0045 0.0055 -0.026"/>
    </visual>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.000348958333333" ixy="0" ixz="0" iyy="0.000348958333333" iyz="0" izz="3.125e-05"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0045 0.0055 -0.026"/>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_base.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="elbow_link">
    <visual>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_elbow.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="orange"/>
      <origin rpy="0 0 0" xyz="-0.0045 0.005 -0.025"/>
    </visual>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.000348958333333" ixy="0" ixz="0" iyy="0.000348958333333" iyz="0" izz="3.125e-05"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0045 0.005 -0.025"/>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_elbow.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="wrist_pitch_link">
    <visual>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_wrist_pitch.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="orange"/>
      <origin rpy="0 0 0" xyz="0.003 -0.0004 -0.024"/>
    </visual>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.000348958333333" ixy="0" ixz="0" iyy="0.000348958333333" iyz="0" izz="3.125e-05"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0.003 -0.0004 -0.024"/>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_wrist_pitch.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="wrist_roll_link">
    <visual>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_wrist_roll.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
      <origin rpy="0 0 0" xyz="0.006 0 0.0"/>
    </visual>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.000348958333333" ixy="0" ixz="0" iyy="0.000348958333333" iyz="0" izz="3.125e-05"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0.006 0 0.0"/>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_wrist_roll.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="left_gripper_link">
    <visual>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_left_gripper.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
      <origin rpy="0 1.5708 0" xyz="0 -0.012 0"/>
    </visual>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.000348958333333" ixy="0" ixz="0" iyy="0.000348958333333" iyz="0" izz="3.125e-05"/>
    </inertial>
    <collision>
      <origin rpy="0 1.5708 0" xyz="0 -0.012 0"/>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_left_gripper.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <link name="right_gripper_link">
    <visual>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_right_gripper.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
      <origin rpy="0 1.5708 0" xyz="0 -0.012 0.010"/>
    </visual>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.000348958333333" ixy="0" ixz="0" iyy="0.000348958333333" iyz="0" izz="3.125e-05"/>
    </inertial>
    <collision>
      <origin rpy="0 1.5708 0" xyz="0 -0.012 0.010"/>
      <geometry>
        <mesh filename="package://braccio_arduino_ros_rviz/stl/braccio_right_gripper.stl" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
  </link>
  <joint name="base_joint" type="revolute">
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="0.0" upper="3.1416" velocity="1.0"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="braccio_base_link"/>
    <dynamics damping="${damping_value}" friction="${friction_value}"/>
  </joint>
  <joint name="shoulder_joint" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="1000.0" lower="0.2618" upper="2.8798" velocity="1.0"/>
    <origin rpy="-1.5708 0 0" xyz="0 -.002 0.072"/>
    <parent link="braccio_base_link"/>
    <child link="shoulder_link"/>
    <dynamics damping="${damping_value}" friction="${friction_value}"/>
  </joint>
  <joint name="elbow_joint" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="1000.0" lower="0" upper="3.1416" velocity="1.0"/>
    <origin rpy="-1.5708 0 0" xyz="0 0 0.125"/>
    <parent link="shoulder_link"/>
    <child link="elbow_link"/>
    <dynamics damping="${damping_value}" friction="${friction_value}"/>
  </joint>
  <joint name="wrist_pitch_joint" type="revolute">
    <axis xyz="1 0 0"/>
    <limit effort="1000.0" lower="0" upper="3.1416" velocity="1.0"/>
    <origin rpy="-1.5708 0 0" xyz="0 0 0.125"/>
    <parent link="elbow_link"/>
    <child link="wrist_pitch_link"/>
    <dynamics damping="${damping_value}" friction="${friction_value}"/>
  </joint>
  <joint name="wrist_roll_joint" type="revolute">
    <axis xyz="0 0 -1"/>
    <limit effort="1000.0" lower="0.0" upper="3.1416" velocity="1.0"/>
    <origin rpy="0 0 1.5708" xyz="0 0.0 0.06"/>
    <parent link="wrist_pitch_link"/>
    <child link="wrist_roll_link"/>
    <dynamics damping="${damping_value}" friction="${friction_value}"/>
  </joint>
  <joint name="gripper_joint" type="revolute">
    <axis xyz="0 -1 0"/>
    <limit effort="1000.0" lower="0.1750" upper="1.2741" velocity="1.0"/>
    <origin rpy="0 -0.2967 0" xyz="0.010 0 0.03"/>
    <parent link="wrist_roll_link"/>
    <child link="right_gripper_link"/>
    <dynamics damping="${damping_value}" friction="${friction_value}"/>
  </joint>
  <joint name="sub_gripper_joint" type="revolute">
    <axis xyz="0 1 0"/>
    <mimic joint="gripper_joint"/>
    <limit effort="1000.0" lower="1.2741" upper="2.3732" velocity="1.0"/>
    <origin rpy="0 3.4383 0" xyz="-0.010 0 0.03"/>
    <parent link="wrist_roll_link"/>
    <child link="left_gripper_link"/>
    <dynamics damping="${damping_value}" friction="${friction_value}"/>
  </joint>
  <material name="orange">
    <color rgba="0.57 0.17 0.0 1"/>
  </material>
  <material name="white">
    <color rgba="0.8 0.8 0.8 1.0"/>
  </material>
  <material name="black">
    <color rgba="0 0 0 0.50"/>
  </material>

   <xacro:transmission_block joint_name="base_joint" idx="1"/>
   <xacro:transmission_block joint_name="shoulder_joint" idx="2"/>
   <xacro:transmission_block joint_name="elbow_joint" idx="3"/>
   <xacro:transmission_block joint_name="wrist_pitch_joint" idx="4"/>
   <xacro:transmission_block joint_name="wrist_roll_joint" idx="5"/>
   <xacro:transmission_block joint_name="gripper_joint" idx="6"/>
   <xacro:transmission_block joint_name="sub_gripper_joint" idx="7"/>

<gazebo>
  <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
    <robotNamespace>/braccio</robotNamespace>
  </plugin>
</gazebo>

</robot>

Originally posted by dpakshimpo on ROS Answers with karma: 161 on 2018-03-20
Post score: 2

A:

I managed to solve it. It turned out to be a stupid copy-paste mistake. In my XACRO file, I had the following interface,
<xacro:macro name="transmission_block" params="joint_name idx">
      <transmission name="tran_${idx}">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="${joint_name}">
          <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor__${idx}">
          <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
      </transmission>
</xacro:macro>

In reality it should be an EffortJointInterface, instead of a PositionJointInterface
<xacro:macro name="transmission_block" params="joint_name idx">
      <transmission name="tran_${idx}">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="${joint_name}">
          <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
        </joint>
        <actuator name="motor__${idx}">
          <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
      </transmission>
</xacro:macro>

Originally posted by dpakshimpo with karma: 161 on 2018-03-21
This answer was ACCEPTED on the original site
Post score: 6

