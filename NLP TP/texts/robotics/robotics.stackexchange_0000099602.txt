Q:

apriltag_ros package in ROS Melodic. Inaccurate April tag detections

I'm a beginner at ROS and I am trying to use April Tags to find the exact location of a robot (in simulation) by using the pose of the detected tags and then using transforms to get the pose of the robot with respect to the world frame but the tags do not seem to be detected accurately. There is a translational error between the exact location of the tag and the location where the tag is detected.

Details: 
I have put up an April Tag (of dimensions 0.3m x 0.3m, tag36h11 family) on a wall in my simulation. The model that I have used is from [gazebo_apriltag](https://github.com/koide3/gazebo_apriltag). The detector that I have used is from [apriltag_ros](https://github.com/AprilRobotics/apriltag_ros) (I have used the continuous_detector, to be more specific, to detect the tags in a video stream). 
My aim is to find the AMCL pose error of the robot by calculating the pose of the robot in the world frame using a known entity (April Tag- its position is known) by using transforms to get the pose of the robot and compare it with the pose given by amcl. 
I have published the tag's original location using static transform publisher. Then, I moved the robot to make the camera face towards the tag and when I view the tf of both (the detected tag and the actual position of the tag as published by the static transform publisher) on rviz, there is a huge error of about 0.3 - 0.35m when the robot is less than 2.4m away from the tag. The tag is being detected further behind the actual position in the line of view. I am sure that the amcl error is not that huge since I have verified it using another method. So, there must be something else where I am going wrong.
Thanks in advance.

Originally posted by Lavitra on ROS Answers with karma: 16 on 2021-07-11
Post score: 0

A:

I have understood my mistake. 
While the size of the tag model was scaled down to 0.3 x 0.3m, I did not know that I was supposed to not consider the white border of the tag while entering its size in the "tags.yaml" config file in the apriltag_ros package. So, I used 0.24m as the size because the border on either side is 1/10th of the size of the tag, for the tags I have been using.

Originally posted by Lavitra with karma: 16 on 2021-07-12
This answer was ACCEPTED on the original site
Post score: 0

