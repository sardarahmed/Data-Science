Q:

Error building nav2 from sources in ros2 rolling and under arm64

Hi all,
I am having problems compiling Nav2 sources in the main branch.
Machine: Mac m1 using arm64 architecture
OS: VM Ubuntu 22.04
Ros versión: ROS2 rolling
I am following the directions explained in:
https://navigation.ros.org/build_instructions/index.html#install
section:
“For Main Branch Development“
(I’ve installed rolling from binaries)
Following the given instructions:
mkdir -p ~/nav2_ws/src
cd ~/nav2_ws/src
git clone https://github.com/ros-planning/navigation2.git —branch main
cd ~/nav2_ws
rosdep install -y -r -q —from-paths src —ignore-src —rosdistro rolling
colcon build —symlink-install
source install/setup.bash

in the step:
rosdep install -y -r -q —from-paths src —ignore-src —rosdistro rolling

I am getting the following output:
ros2_ws rosdep install -y -r -q —from-paths src —ignore-src —rosdistro rolling
ERROR: the following packages/stacks could not have their rosdep keys resolved
to system dependencies:
nav2_rviz_plugins: Cannot locate rosdep definition for [qtbase5-dev]
nav2_system_tests: Cannot locate rosdep definition for [lcov]
nav2_util: Cannot locate rosdep definition for [libboost-program-options-dev]
nav2_constrained_smoother: Cannot locate rosdep definition for [libceres-dev]
nav2_smac_planner: Cannot locate rosdep definition for [nlohmann-json-dev]
nav2_bringup: Cannot locate rosdep definition for [slam_toolbox]
nav2_map_server: Cannot locate rosdep definition for [graphicsmagick]
Continuing to install resolvable dependencies…
executing command [sudo -H apt-get install -y -qq ros-rolling-gazebo-ros-pkgs]
E: Unable to locate package ros-rolling-gazebo-ros-pkgs
ERROR: the following rosdeps failed to install
  apt: command [sudo -H apt-get install -y -qq ros-rolling-gazebo-ros-pkgs] failed
  apt: Failed to detect successful installation of [ros-rolling-gazebo-ros-pkgs]

I see here to kind of different errors that I can’t understand:
1- for example in the first one:
ERROR: the following packages/stacks could not have their rosdep keys resolved
to system dependencies:
nav2_rviz_plugins: Cannot locate rosdep definition for [qtbase5-dev]

In package.xml of the package nav2_rviz_plugins I see:
<build_depend>qtbase5-dev</navigation2/nav2_rviz_plugins/package.xml>

But when executing:
sudo apt-cache policy qtbase5-dev
qtbase5-dev:
  Installed: 5.15.3+dfsg-2ubuntu0.2
  Candidate: 5.15.3+dfsg-2ubuntu0.2
  Version table:
 *** 5.15.3+dfsg-2ubuntu0.2 500
        500 http://es.ports.ubuntu.com/ubuntu-ports jammy-updates/universe arm64 Packages
        100 /var/lib/dpkg/status
     5.15.3+dfsg-2 500
        500 http://es.ports.ubuntu.com/ubuntu-ports jammy/universe arm64 Packages

It seems to be already installed. Do you know why rosdep is complaining?
2- The error:
E: Unable to locate package ros-rolling-gazebo-ros-pkgs
ERROR: the following rosdeps failed to install
  apt: command [sudo -H apt-get install -y -qq ros-rolling-gazebo-ros-pkgs] failed
  apt: Failed to detect successful installation of [ros-rolling-gazebo-ros-pkgs]

Seems to be different. When I execute:
sudo apt-cache policy ros-rolling-gazebo-ros-pkgs
N: Unable to locate package ros-rolling-gazebo-ros-pkgs

This package isn’t even in the repositories.
Here they face a similar problem for arm64:
https://github.com/osrf/gazebo/issues/3236
They couldn’t install a package also for arm64. They solved the problem but in their case they were using ros2 Humble, not rolling as me. I installed gazebo as they suggest but in my case this didn’t solve the problem.
Could it be that ros-humble-gazebo-ros-pkgs does exist in humble repositories but ros-rolling-gazebo-ros-pkgs doesn’t in rolling’s?
ROS environment variables:
env | grep ROS
ROS_DISTRO=rolling
ROS_LOCALHOST_ONLY=0
ROS_PYTHON_VERSION=3
ROS_VERSION=2

I will really appreciate if you can give me any suggestion for my two questions.
Thanks in advance.
Pablo

Originally posted by pgarcia-dev on ROS Answers with karma: 18 on 2022-09-28
Post score: 0

A:

I am a very hard-core Apple user, but my Mac computer with an Apple Silicon CPU with an  arm64 architecture was giving me too many headaches.
I finally decided to buy a new computer with an Intel CPU. Amd64 architecture isn’t giving me any problem and saving me a lot of time.

Originally posted by pgarcia-dev with karma: 18 on 2022-11-04
This answer was ACCEPTED on the original site
Post score: 0

