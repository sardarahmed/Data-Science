Q:

camera calibration and ROI

Hi there,
i've just a litte question regarding calibration of a camera and ROI.
If i have calibration values for a camera and change the roi?
Does this affect the calibration values in anyway and do i have to do the calibration again?
I thought that i don't have to recalibrate the camera if i just change the ROI since it can be calculated based on the calibration values of the full resolution image.
The reason why i'm asking is the camera_info_manager.
I've implemented it and it works quite good.
However if change the ROI it does not affect the camera_info message in terms of ROI.
I can either add the ROI to my camera_name and force the user to recalibrate the camera every time a different ROI is set or i modify my camera_info message from manager regarding ROI values.
what's the best solution?
cheers Mimax

Originally posted by Mimax on ROS Answers with karma: 174 on 2011-10-20
Post score: 2

A:

The REP-0104 specification supports using the full resolution calibration with a cropped image.
The CameraInfo returned by camera_info_manager contains default operational parameters, including binning and ROI values. That works unmodified if your camera is publishing the full-resolution image for which it was calibrated.
To publish a cropped image, add the appropriate ROI parameters to the CameraInfo message before publishing it. You can look at the camera1394 driver for an example of this logic.

Originally posted by joq with karma: 25443 on 2011-10-20
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by joq on 2012-01-21:
Fuerte final freeze is coming soon, Feb. 15th. To change the API for that release we need the new interface defined, so please file an enhancement ticket right away: https://code.ros.org/trac/ros-pkg/newticket?component=image_common&type=enhancement&image_common
Comment by Mimax on 2011-10-21:
Thanks for that hint. I'll definitely do this
Comment by joq on 2011-10-21:
Adding some method like setOperationalParameters() to camera_info_manager seems reasonable. If you have suggestions, please open an enhancement ticket. We could add it for Fuerte.
Comment by Mimax on 2011-10-20:
This way i could skip the comparison of roi values every time publishing an image just modify the origin camera_info_message of the camera_info_manager
Comment by Mimax on 2011-10-20:
Thanks Jack. That is about the way i wanted to implement it. However wouldn't it make sense to have an member method in the camera_info_manager for changing the operation parameters which can be called if  I change ROI or Binning by a service call.

