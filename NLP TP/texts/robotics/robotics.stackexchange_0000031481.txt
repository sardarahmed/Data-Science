Q:

How can additional nodelets be attached to the stereo_image_proc's nodelet manager in Diamondback?

I'd like to add in image processing attached to the points2 and disparity output of stereo_image_proc, but can't figure out how to either get the stereo_image_proc stack nodelets to attach to my nodelet manager or attach to theirs.
Attempting to load nodelets using stereo_image_proc fails.
And the configuration done inside of stereo_image_proc is complex and done programmatically as work around to a topic remapping problem, and so I was unable to rebuild stereo_image_proc's elements:

image_proc/rect
stereo_image/disparity
stereo_image_proc/point_cloud2

... into the same functionality using simply a launch file which had a nodelet manager I could attach to.

Originally posted by Asomerville on ROS Answers with karma: 2743 on 2011-05-05
Post score: 1

A:

It appears the stereo_image_proc's nodelet manager is created with the nodelet manager API turned off which prevents other nodelets from being attached to it.
My work around was to copy stereo_image_proc.cpp to my own package, and modifying the constructor call to enable the nodelet manager API:
nodelet::Loader manager(true); // was false

It's then possible to attach additional nodelets to this modified stereo_image_proc though be careful not to try to name the resulting node executable as stereo_image_proc as this will collide since stereo_image_proc will need to be a dependency of your package.

Originally posted by Asomerville with karma: 2743 on 2011-05-05
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Asomerville on 2011-05-05:
Yeah, I'd file a ticket, but I've heard that it won't be done programmatically in the next release so it won't matter any more. Not sure why anyone ever sets that to false; perceived cleanliness I suppose.
Comment by Patrick Bouffard on 2011-05-05:
Deja vu.. http://code.ros.org/lurker/message/20110404.053527.ef774040.en.html

