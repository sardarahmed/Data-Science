Q:

Get the name of a sub-parameter, not the whole structure

I have a YAML file with a structure like the following:
field_a:
   field_a1: {field_b1, field_b2, ..., field_bM}
   field_a2: {field_b1, field_b2, ..., field_bM}
   ...
   field_aN: {field_b1, field_b2, ..., field_bM}

where field_a and field_bj are known a priori for all j, but field_ai are frequently changed by the user (i.e. can't be hard coded).
If I try to retieve the parameters field_ai using the C++ method getParam(...) or the command line rosparam get /field_a, what I get is everything in the tree hierarchy where /field_a is the root.
Is there a way to retrieve only the names of these field_ai and not their values? I could create another list with those names, but it not scale very well...
Thank you for your help!

Originally posted by alextoind on ROS Answers with karma: 217 on 2015-06-28
Post score: 0

A:

Thanks to both! I did not think about XmlRpc and the hint of using the iterator works like a charm!
This is the code for the example above:
std::vector<std::string> field_names;
XmlRpc::XmlRpcValue list;

if (!node_handle_.getParam("/field_a", list)) {
  ROS_ERROR("Can't find '/field_a' in the YAML configuration file.");
  return;
}

for (auto it = list.begin(); it != list.end(); it++) {
  field_names.push_back(it->first);
}

For the sake of completeness it->second is the the nested list {field_b1, field_b2, ..., field_bM}.

Originally posted by alextoind with karma: 217 on 2015-07-02
This answer was ACCEPTED on the original site
Post score: 0

