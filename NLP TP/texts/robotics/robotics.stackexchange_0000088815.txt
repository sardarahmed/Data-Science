Q:

ROS2 Managed node: triggering an error from primary state

I have a managed node with a thread running when it is in `ACTIVE ' state.
During the execution of the thread an error can occur  and I have not understood how to trigger an error event to enter into the on_error callback, manage the error and going back to `UNCONFIGURED ' state if the error can be solved.
on_error callback is executed when a transition callback returns TRANSITION_CALLBACK_ERROR or an unhandled exception is generated... but when the node is in a Primary state?
Thank you
Walter

Originally posted by Myzhar on ROS Answers with karma: 541 on 2018-08-31
Post score: 3

A:

There is no error handling done when a transition is executed successfully. The underlying state machine only handles the transitions, but not the primary states.
So you might want to catch exceptions in your primary states yourself and then trigger a change of state manually.
https://github.com/ros2/rclcpp/blob/master/rclcpp_lifecycle/include/rclcpp_lifecycle/lifecycle_node.hpp#L408-L468

Originally posted by Karsten with karma: 643 on 2018-09-04
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Myzhar on 2018-09-04:
The design page speaks about the possibility of entering in 'error handling' from the primary state.
Do you think that it will be added?

