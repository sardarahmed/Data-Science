Q:

Subscribing to Multiple Nodes Publishing the Same Topic

Hi all,
I am having an issue that I'm not sure has been addressed. I am writing a node where I am attempting to subscribe to another two nodes that publish to the same topic (i.e. two lasers that are publishing to a topic with the same name). Going back and changing the topic names would be a little bit tricky, so I was wondering if there was a way to differentiate these two (i.e. write a subscriber that takes into account topic name and node-of-origin name when being instantiated.
Thanks
Edit:
I'm confused how the syntax works for remapping and was wondering if I could ask for more help:
Originally, I have as a launch file:
<launch>

    <node pkg="leg_detector" type="leg_detector" name="leg_detector_front" args="scan:=scan_front $(find leg_detector)/config/trained_leg_detector.yaml" output="screen"/>

    <node pkg="leg_detector" type="leg_detector" name="leg_detector_rear" args="scan:=scan_rear $(find leg_detector)/config/trained_leg_detector.yaml" output="screen"/>

</launch>

I tried this:
 <launch>

    <node pkg="leg_detector" type="leg_detector" name="leg_detector_front" args="scan:=scan_front $(find leg_detector)/config/trained_leg_detector.yaml" output="screen"/>

    <group>
      <remap from="leg_tracker_measurements" to="leg_tracker_measurements_rear">
      <node pkg="leg_detector" type="leg_detector" name="leg_detector_rear" args="scan:=scan_rear $(find leg_detector)/config/trained_leg_detector.yaml" output="screen"/>
    </group>
  </launch>

But it threw an invalid syntax error

Originally posted by jc2016 on ROS Answers with karma: 150 on 2014-07-21
Post score: 2

Original comments
Comment by McMurdo on 2014-07-23:
'Close' your remap tag.
or  

A:

I do not know of a way to distinguish by which node sent a message in the callback on the subscriber side.
I suggest you make your two publishing nodes publish to two different topics and your subscriber then subscribe to both indivially. Remapping topics is your friend here.
Edit:
In response to your syntax problem: Have you read the actual error message? It probably indicates that you forgot to close the <remap> tag. You can put it into a group, but I believe it is clearer to put it directly inside the node tag. Also inside a rules file I would not use the remapping syntax with command line arguments like you do for scan. This is just confusing. Try this:
<launch>
  <node pkg="leg_detector" type="leg_detector" name="leg_detector_front" args="$(find leg_detector)/config/trained_leg_detector.yaml" output="screen">
    <remap from="scan" to="scan_front" />
    <remap from="leg_tracker_measurements" to="leg_tracker_measurements_front" />
  </node>

  <node pkg="leg_detector" type="leg_detector" name="leg_detector_rear" args="$(find leg_detector)/config/trained_leg_detector.yaml" output="screen">
    <remap from="scan" to="scan_rear" />
    <remap from="leg_tracker_measurements" to="leg_tracker_measurements_rear" />
  </node>
</launch>

Or alternatively and maybe even better in this case with namespaces, like suggested in another answer below:
<launch>
  <node pkg="leg_detector" type="leg_detector" name="leg_detector_front" args="$(find leg_detector)/config/trained_leg_detector.yaml" output="screen" ns="front" />
  <node pkg="leg_detector" type="leg_detector" name="leg_detector_rear" args="$(find leg_detector)/config/trained_leg_detector.yaml" output="screen" ns="rear" />
</launch>

Originally posted by demmeln with karma: 4306 on 2014-07-21
This answer was ACCEPTED on the original site
Post score: 7

Original comments
Comment by jc2016 on 2014-07-21:
That looks like an awesome feature, thanks so much for the quick reply. So, the way I have it set up I instantiate two instances of the node in the launch file with different names. It seems like I should be able to use the remapping, but does that sound right. Thanks again.
Comment by jc2016 on 2014-07-21:
I don't have time to check it out yet, but this seems to work, and I'll make it the answer once I figure out if it does. Thanks
Comment by demmeln on 2014-07-21:
Sounds right. Use the  tag in your launch file for one (or if you like both) of the nodes. Feel free to update your question with more concrete info if you get stuck.
Comment by dornhege on 2014-07-22:
Although @McMurdo's answer is the precise reply to the question asked, it is important to note that this answer is the right way to do it!
Comment by jc2016 on 2014-07-23:
Alright that worked out well, thanks so much for all of your help!

