Q:

Problem with the robot model collapsing

I'm a beginner in the robotics/ROS/Gazebo world. I started to work in a robotics research lab in my university, and I have to model an Hexapod.
Apparently, the URDF Xacro is alright: the visuals, collisions, inertia tensors, COM, mass, joint tags, etc..
But when I spawn the model on GazeboSim, it doesn't get immovable. Instead, it get agitated. I thought is was caused by a bad inertia tensor, so I fixed the meshes from the original solid parts, calculated the mass properties and replaced the faulty inertial tags and meshes. But this didn't solve the problem.
When I was recording the screen to post this question, I have noticed that the most I increased the effort limit, the most it became agitated. Here's the video that shows this behavior. And you can see, in the rostopic terminal, that the effort value applied to the joint is the max value (positive or negative) defined in the robot URDF Xacro file, and I don't know why this is happening.
Here's the robot description.
What can be made to solve this problem? I'm getting crazy with this haha
Thanks :D

Originally posted by longforgotten on ROS Answers with karma: 55 on 2015-08-18
Post score: 4

A:

Real-time physics simulation is hard to make stable for every use-case a user throws at it. I also experienced quite a few cases of physically correct (or at least plausible) models having tremors or just exploding. A combination of these knobs makes things work for me most of the time:

Adjust controller gains. Note that per default, joint velocities in Gazebo often exhibit high jitter, so I'd recommend to use low D gains.
Adjust inertial parameters of the
model. Too high differences between
masses and inertia tensors of
different links can lead to
instabilities that make the physics
engine fail (in my experience current
standard Gazebo versions have to be
restarted in that case). Of course,
it's not really desirable to change the model to have inertial parameters the real thing does not have, but this can often cause things to work. What you can do is make a specialized model for Gazebo with (hopefully slightly) adjusted parameters, but keep using the correct model in other applications.
Adjust the physics engine parameters
(time step and iterations) so the
physics are more accurate, but
slower.

See also useful answers here: Controller makes robot unstable,Gazebo model jittering.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2015-08-19
This answer was ACCEPTED on the original site
Post score: 10

Original comments
Comment by longforgotten on 2015-08-19:
Thanks for your time! I'll do that and post the results here in the comments.
Comment by longforgotten on 2015-08-19:
I've noticed that the robot PID gains was not properly tuned, so I dropped down the PID values and the Hexapod has stabilized. My professor has commented about the Ziegler-Nichols method, so I'll use that to tune properly the PID controllers. Once again thanks, your answer helped me a lot!
Comment by PrasadNR on 2016-12-21:
@emersonfs , Can you explain how you 'disabled' PID? It can be done by software or parameters can be set. (One of the most popular methods is to set I and D to 0 and controlling gain and offset with P. That will enhance the quality of answer by a lot.)
Comment by longforgotten on 2016-12-21:
@PrasadNR I didn't disable PID, I set the PID values to a much much lower value than it was before.
Comment by OsorioAlpha on 2020-03-26:
Thank you guys, my collapsed to the origin, then I modified the inertial matrix and Done... Inertia was my actual problem.
Comment by matthewmarkey on 2020-05-12:
@OsorioAlpha can you please elaborate on what you meant when you said "I modified the inertial matrix" how did you change your values?
I actually built a small arm out of MDF and servos and weighed everything to the gram and I believe I have calculated my inertias correctly but my model is collapsed to gravity and jitters enough to slowly move itself across the map.

