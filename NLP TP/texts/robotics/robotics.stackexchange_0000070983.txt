Q:

Gazebo model problems

Hi all
I want to run my real robot in ros so I already wrote a simple hardware controller. I also created xacro model. First I wanted to simulate robot in gazebo and tried there follow joint trajectory action. I did this tutorial http://gazebosim.org/tutorials?tut=ros_control . I am using Faulhaber MCDC 3003 motors which are pretty low effort but have strong transmissions. When I want to simulate robot in gazebo he is doing what he want. Joints are just moving around  and the motors cannot properly move with them. Is there problem with PID setup or what can be the problem. I cannot properly tune PID gains in the last part of tutorial because the PID tuner did not show up after clicking on PID.
I also cannot setup inertia matrix. Is there a way how to avoid it ?.
Here is my robot in real. (Documentation is horrible I needed to measure it myself and try to create proper model)
https://www.youtube.com/watch?v=aZYC8IAiYCk
life my hardware controller is working correctly but I just cannot simulate. Can you help me with any better tutorial or how to setup motors like this. For example when I want them to hold robot at the begging in zero positions.
Thanks for any help.

Originally posted by Chickenman on ROS Answers with karma: 110 on 2015-12-19
Post score: 0

Original comments
Comment by Akif on 2015-12-20:
BTW, is your use of gadzebo word intentional? It is gazebo I assume.
Comment by Chickenman on 2015-12-31:
yeah sorry my fault I always call it gadzebo ... I have already corrected that

A:

After liitle bit of study I found a solution and simulation is running properly.
Update:
This is my simulation now https://www.youtube.com/watch?v=rwAktml4Pq4 . I manage to repair PID tuner in tutorial. I installed gazebo6 package and it stared working properly and then I could easily set pid parameters.  I set position controllers but they did not control velocity and that was huge problem. So I created trajectory controller server with gazebo-ros-control and joint stopped doing what they want. I created moveit package and use this tutorial http://docs.ros.org/indigo/api/pr2_moveit_tutorials/html/planning/src/doc/controller_configuration.html to configure moveit to connect to my joint trajectory controller. To control real simulation with moveit demo follow that tutorial and rewrite part in demo.launch <arg name="fake_execution" value="true"/> to <arg name="fake_execution" value="false"/>
I also needed to setup joint_state_publisher in gazebo and rewrite joint state publisher in demo.launch to use source informations from my simulation joint_state _publisher which is publishing on topic /kv01/joint_states
 <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher">
    <param name="/use_gui" value="false"/> 
    <rosparam param="/source_list">[/kv01/joint_states]</rosparam>
  </node>

Last problem was with inertia matrix parameters
I set intertia  matrix like this <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/> to use minimum inertia and ignore it

Originally posted by Chickenman with karma: 110 on 2016-01-30
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by SL Remy on 2016-02-11:
Hello! This answer doesn't really make it clear what was done to address the problem. Is it possible to provide greater detail?
Comment by Chickenman on 2016-02-13:
Sorry. You are right I should described my solution better to help another users. I already updated my status so I hope it will help. But if you need any help with your simulation on your specific project give me more info and I could try to help.
Comment by Chickenman on 2016-02-13:
Anyway in the future after this project I am planning to create whole documentation for this project how I manage to setup everything. I hope it could help more users with similar projects and problems to find solutions.

