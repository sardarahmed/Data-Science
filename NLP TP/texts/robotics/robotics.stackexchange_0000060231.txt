Q:

ROS Indigo Turtlebot Gazebo Simulation

On Ubuntu 14.04 Trusty I recently installed Ros Indigo using apt-get and the turtlebot packages from source following the instructions on turtlebot/indigo/instillation tutorial (but using rosdep install --from-paths src -i -y -r for the turtlebot modules). When I try to launch the turtlebot simulator using
roslaunch turtlebot_gazebo turtlebot_empty_world.launch

the turtlebot does not show in the gazebo window nor does the majority of the expected topics get posted (ie any of the /camera/* topics or /odom topic).
I'm using Gazebo 2.2.2, Ubuntu 14.04 and ROS Indigo
I've sourced my the indigo setup.bash as well as the ones for the rocon, kobuki, and turtlebot modules from the instilation tutorial above.
After starting the program the gazebo window will open and you can pan/zoom but none of the models will show on the screen, including any that I add after the program starts.
Below is the output of running roslaunch turtlebot_gazebo turtlebot_empty_world.launch
... logging to /home/charlie/.ros/log/6fa28384-f9a2-11e3-b032-54271e5d091b/roslaunch-charlie-FANG-2014-28176.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http:// charlie-FANG-2014:60719/

SUMMARY
========

PARAMETERS
 * /bumper2pointcloud/pointcloud_radius: 0.24
 * /cmd_vel_mux/yaml_cfg_file: /home/charlie/tur...
 * /depthimage_to_laserscan/output_frame_id: /camera_depth_frame
 * /depthimage_to_laserscan/range_min: 0.45
 * /depthimage_to_laserscan/scan_height: 10
 * /robot_description: <?xml version="1....
 * /robot_state_publisher/publish_frequency: 30.0
 * /rosdistro: <...>
 * /rosversion: <...>
 * /use_sim_time: True

NODES
  /
    bumper2pointcloud (nodelet/nodelet)
    cmd_vel_mux (nodelet/nodelet)
    depthimage_to_laserscan (nodelet/nodelet)
    gazebo (gazebo_ros/gzserver)
    gazebo_gui (gazebo_ros/gzclient)
    laserscan_nodelet_manager (nodelet/nodelet)
    mobile_base_nodelet_manager (nodelet/nodelet)
    robot_state_publisher (robot_state_publisher/robot_state_publisher)
    spawn_turtlebot_model (gazebo_ros/spawn_model)

auto-starting new master
process[master]: started with pid [28191]
ROS_MASTER_URI=http:// localhost:11311

setting /run_id to 6fa28384-f9a2-11e3-b032-54271e5d091b
process[rosout-1]: started with pid [28204]
started core service [/rosout]
process[gazebo-2]: started with pid [28228]
/opt/ros/indigo/lib/gazebo_ros/gzserver: 5: [: Linux: unexpected operator
process[gazebo_gui-3]: started with pid [28234]
/opt/ros/indigo/lib/gazebo_ros/gzclient: 5: [: Linux: unexpected operator
process[spawn_turtlebot_model-4]: started with pid [28242]
Gazebo multi-robot simulator, version 2.2.2
Copyright (C) 2012-2014 Open Source Robotics Foundation.
Released under the Apache 2 License.
http:// gazebosim.org

Gazebo multi-robot simulator, version 2.2.2
Copyright (C) 2012-2014 Open Source Robotics Foundation.
Released under the Apache 2 License.
http:// gazebosim.org

Msg Waiting for master
Msg Connected to gazebo master @ http:// 127.0.0.1:11345
Msg Publicized address: 192.168.2.3
[ INFO] [1403396186.795938010]: Finished loading Gazebo ROS API Plugin.
Msg Waiting for master
[ INFO] [1403396186.799826284]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...
Msg Connected to gazebo master @ http:// 127.0.0.1:11345
Msg Publicized address: 192.168.2.3
process[mobile_base_nodelet_manager-5]: started with pid [28281]
[ INFO] [1403396187.766250320, 0.030000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.
Warning [gazebo.cc:215] Waited 1seconds for namespaces.
process[cmd_vel_mux-6]: started with pid [28415]
process[bumper2pointcloud-7]: started with pid [28495]
process[robot_state_publisher-8]: started with pid [28542]
Segmentation fault (core dumped)
[gazebo-2] process has died [pid 28228, exit code 139, cmd /opt/ros/indigo/lib/gazebo_ros/gzserver /home/charlie/turtlebot/turtlebot/src/turtlebot_simulator/turtlebot_gazebo/worlds/empty.world __name:=gazebo __log:=/home/charlie/.ros/log/6fa28384-f9a2-11e3-b032-54271e5d091b/gazebo-2.log].
log file: /home/charlie/.ros/log/6fa28384-f9a2-11e3-b032-54271e5d091b/gazebo-2*.log
process[laserscan_nodelet_manager-9]: started with pid [28620]
process[depthimage_to_laserscan-10]: started with pid [28947]
[gazebo_gui-3] process has finished cleanly
log file: /home/charlie/.ros/log/6fa28384-f9a2-11e3-b032-54271e5d091b/gazebo_gui-3*.log

The above is slightly modified to add a space between http:// and the name of the link to allow me to post the output above.

Originally posted by Charlie Murphy on ROS Answers with karma: 76 on 2014-06-21
Post score: 1

Original comments
Comment by tfoote on 2014-06-22:
TurtleBot packages haven't been released or tested on indigo yet. You're getting a segfault which suggests a memory issue. If you can run it in gdb to get a backtrace we could try to help you remotely. Otherwise you'll probably need to wait for it to be tested and released. PS if you can also provide the steps to reproduce someone might have a moment to test your problem specificcally.
Comment by Charlie Murphy on 2014-06-23:
Thank you, I'm actually unsure how to run roslaunch turtlebot_gazebo turtlebot_empty_world.launch command in gdb.
Comment by koenlek on 2014-06-25:
same issue here. @Charlie, it might also help to report this as an issue on the github of for example turtlebot_simulator (which contains turtlebot_gazebo).

A:

I've figured out how to get this to work as a sort of semi-fix until the official debians are finalized and released. As fergs mentioned the problem is indeed with incompatabilities with ROS Indigo Gazebo and URDF. The temporary fix is to install Gazebo from source. This then lets gazebo use the urdf library that comes packaged with trusty.
Here are the steps I took from a fresh Ubuntu 14.04 install:
Install gazebo 2.2 from source. (I did the optional stage/player libraries as well)
Install ros-indigo-desktop-full using apt-get
Install ros turtlebot packages from source (only available option currently).
Use instructions found at:
http://gazebosim.org/wiki/2.2/install
http://wiki.ros.org/indigo/Installation/Ubuntu
http://wiki.ros.org/turtlebot/Tutorials/indigo/SourceInstallation

Originally posted by Charlie Murphy with karma: 76 on 2014-07-10
This answer was ACCEPTED on the original site
Post score: 0

