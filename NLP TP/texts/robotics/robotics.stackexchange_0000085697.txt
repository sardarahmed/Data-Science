Q:

"rosdep update" error in Kinetic

Hello all;
I am installing Ros Kinetic in a new machine with Ubuntu 16.04.
Everything goes fine, until I try to do a "rosdep update" command.
I obtain the following errors repetedly:
reading in sources list data from /etc/ros/rosdep/sources.list.d
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/releases/fuerte.yaml]:
    Failed to download target platform data for gbpdistro:
    <urlopen error no host given>
Query rosdistro index https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml
ERROR: error loading sources list:
    <urlopen error <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml)>

I have already read the related questions and answers related to this issue, but none of them fully applies to my problem.
EDIT (links to questions and answers):
https://answers.ros.org/question/162996/cannot-update-rosdep/
https://answers.ros.org/question/277395/rosdep-update-the-read-operation-timed-out/
https://github.com/ros-infrastructure/bloom/issues/386
https://github.com/ros/rosdistro/issues/9721
https://github.com/ros-infrastructure/rosdep/issues/576
http://blog.csdn.net/gddxz_zhouhao/article/details/72861266
The rosdep update output that I am obtaining is:
a4blue@a4blue-HP-EliteDesk-800-G3-TWR:~$ rosdep update
reading in sources list data from /etc/ros/rosdep/sources.list.d

-------------------

url: 'https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml'

----------------

ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml)

-------------------

url: 'https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml'

----------------

ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml)

------------------

url: 'https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml'

----------------

ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml)

-------------------

url: 'https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml'

----------------

ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml]:
    <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/releases/fuerte.yaml]:
    Failed to download target platform data for gbpdistro:
    <urlopen error no host given>
Query rosdistro index https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml
ERROR: error loading sources list:
    <urlopen error <urlopen error no host given> (https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml)>
a4blue@a4blue-HP-EliteDesk-800-G3-TWR:~$ 

Can anyone give a clue about this issue?
Thank you all very much in advance,
Best,
Alberto

Originally posted by altella on ROS Answers with karma: 149 on 2018-03-07
Post score: 0

Original comments
Comment by gvdhoorn on 2018-03-07:
Can you link us to the Q&As you've already looked at? Just to avoid forum members from suggesting the same solutions.
You can use the q#nnnnnn format to link to questions, don't need to copy-paste the complete url.
Comment by gvdhoorn on 2018-03-07:
Probably start with the regular things to check:

ping github.com works?
are you behind a (company) firewall or proxy server?
can you wget any of those URLs?
is your computers clock and date set correctly?

Comment by altella on 2018-03-07:
Everything is ok. ping works, I can do wget, clock and date correct. In the same company network, I have installed other previous versions of ROS without problems.
Comment by gvdhoorn on 2018-03-07:\

urlopen error no host given

this seems to suggest that there is no host part in the url passed to urlopen. If you can, it would probably be easiest to instrument the rosdep code to get it to print whatever URL it is about to pass to urllib and see whether something is wrong there.
Comment by gvdhoorn on 2018-03-07:\

I have installed other previous versions of ROS without problems.

that doesn't necessarily mean that something couldn't have changed that now prevents you from doing the same of course.
Comment by altella on 2018-03-07:
I know...I am going to try to install Kinetic in another machine just to check. How can I make rosdep to print the information you a referring to?
Comment by gvdhoorn on 2018-03-07:\

I am going to try to install Kinetic in another machine just to check

that might be a bit drastic. What about installing Docker on a machine (if it doesn't already have it) and then using the ros:kinetic image see if rosdep wants to play nice? You could even do that on your own machine.
Comment by gvdhoorn on 2018-03-07:\

How can I make rosdep to print the information you a referring to?

by editing the sources. I don't think there is a built-in facility for this unfortunately.
Comment by altella on 2018-03-08:
I have installed Kinetic in a Virtualbox clean image of  Ubuntu 16.04 LTS, and everything goes perfect. The machine with Virtualbox is in the same LAN, so installation under same conditions. Tha PC that fails has also installed freeling, stardog and xampp. Could affect?
Comment by gvdhoorn on 2018-03-08:
this is where the download is attempted. Searching for the error (no host given) turns up a lot of results where spurious \n characters at the end of URLs made urllib ..
Comment by gvdhoorn on 2018-03-08:
.. fail. It's a long shot, but can you check that the files in /etc/ros/rosdep/sources.list.d are ok? No windows line-endings fi?
You could add something like:
print ("\n\n-------------------\n\nurl: '{}'\n\n----------------\n\n".format(url))

right above the line I linked to see ..
Comment by gvdhoorn on 2018-03-08:
.. what URL rosdep is really trying to download.
Comment by altella on 2018-03-08:
there is only one file. Seems ok, line endings correct.
I have modified the file and the urls seem also ok. I paste the output in the following link:
[https://drive.google.com/open?id=1rQWJd1wkvph1jJAlKuUM_zdWgGYdcbla]
Comment by gvdhoorn on 2018-03-08:
Please edit your original question. Comments are not suited for this.
Comment by gvdhoorn on 2018-03-08:
One thing to check could be the following:

create a Python virtualenv, be sure to use the --no-site-packages option
source /path/to/your/virtualenv/bin/activate
install rosdep using pip: pip install rosdep
sudo rm -rf /etc/ros/rosdep
sudo rosdep init

..
Comment by gvdhoorn on 2018-03-08:
.. then finally a rosdep update. If that does succeed, it could be that some Python library has been updated on your system that is interfering (somehow) with rosdep.
Comment by gvdhoorn on 2018-03-08:
Also check your PYTHONPATH, and whether your setting it explicitly in your .bashrc (fi).
Note that we're just checking everything, as without being able to reproduce your issue, it's hard to diagnose.
Comment by altella on 2018-03-08:
PYTHONPATH in the machine I have been given is empty.
In the machine kinetic works is set to:
/opt/ros/kinetic/lib/python2.7/dist-packages
Could this be the problem?
Installation from my side has been identical concerning ROS. But the machine had previous SW installed..
Comment by gvdhoorn on 2018-03-08:
PYTHONPATH pointing to /opt/ros/.. probably means that the machine you're checking against does a source /opt/ros/kinetic/setup.bash in its .bashrc. That should not matter.
Comment by gvdhoorn on 2018-03-08:
Check whether you have Python pkgs installed through pip:
find /usr/local/lib/python2.7/dist-packages -maxdepth 2 -name __init__.py | xargs realpath | LANG= xargs dpkg -S 2>&1 | grep 'no path found' | sed "s/.*\/\([^\/]*\)\/__init__\.py.*/\1/"

these may be interfering.

A:

Hi all,
Problem solved. In the machine where I was trying to install Kinectic, at the end of the .bashrc file, there were the following lines:
export http_proxy=''
export https_proxy=''
export ftp_proxy=''
export socks_proxy=''

which were making rosdep fail. After commenting these lines, installation has gone ok as always.
Thanks a lot for the fast received help.

Originally posted by altella with karma: 149 on 2018-03-09
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2018-03-09:\

are you behind a (company) firewall or proxy server?

so it was a proxy after all :)
The no host specified error could then have come from urllib(2) complaining that *_proxy variables were set, but did not specify "a host".

