Q:

Save many ROIs with same time stamp inside a bag file

Hi,
I would like to save ROIs (cv::Rect) and masks (cv::Mat) inside a bag file along with images (cv::Mat).
I put the 4 rect values (x,y,width,height) inside a cv::Mat and store them and the masks and the images each with a separate topic and the same corresponding time stamp as the image inside the bag file.
Now it may occur that I have multiple ROIs and masks for one image, in which case I need to save several cv::Mat with the same time stamp into the bag file and I don't think that even works.
What would be an elegant approach to cleanly resolve this? I currently add one nsec for each additional mask and ROI to the timestamp of the image, but that clearly is a bad solution.

Originally posted by DaHoC on ROS Answers with karma: 1 on 2011-10-05
Post score: 0

A:

How about creating a new message type to hold the ROIs and masks, e.g.
sensor_msgs/RegionOfInterest[] rois
sensor_msgs/Image[]            masks

stored at the same timestamp of the image?

Originally posted by Tim Field with karma: 191 on 2011-10-05
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by DaHoC on 2011-10-10:
Hi, that was easier than I thought because RegionOfInterest is missing a header so I could use one header to store the timestamp and added RegionOfInterest[] regionsArray to my new message definition. I used http://www.ros.org/wiki/ROS/Tutorials/DefiningCustomMessages - Thanks!

