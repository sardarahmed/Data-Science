Q:

Running rosrun with gdb

I am running this in ros:
rosrun object_recognition_capture upload -i final.bag -n 'example' example --commit

object_recognition_capture is a package and I want to run it with all these options. How can I run it with debuger, if there is any possible way to do it? The problem is that this system is c++/python hybrid. Called upload program is a python code, but it calls c++ functions. So I can't use neither gdb nor pdb.

Originally posted by sykatch on ROS Answers with karma: 109 on 2015-12-14
Post score: 2

A:

If it is a Python script I guess gdb is not what you wan to be using. Instead, Python has pdb (https://docs.python.org/2/library/pdb.html).
You could try
rosrun --prefix 'python -m pdb' object_recognition_capture upload -i final.bag -n 'example' example --commit

but this is just a guess. I have never started Python scripts this way with rosrun.
Edit: I guess for C++ code called from python scripts you could try to run the python executable with DGB, like described here: https://wiki.python.org/moin/DebuggingWithGdb
So best install the debugging symbols for your python interpreter and then try something like this:
rosrun --prefix 'gdb -ex run --args python' object_recognition_capture upload -i final.bag -n 'example' example --commit

Again, I haven't tried this, so its just a guess.

Originally posted by demmeln with karma: 4306 on 2015-12-15
This answer was ACCEPTED on the original site
Post score: 6

Original comments
Comment by sykatch on 2015-12-16:
Thanks, I can run this upload file with pdb, but there is another problem now, I edit my question (c++/python hybrid code).
Comment by sykatch on 2015-12-16:
Yes, gdb runs the program now, but it runs it whole, till its end. There is no opportunity to step through the program. I'm trying to figure out what to do about it.
Comment by demmeln on 2015-12-16:
Yeah this is now not so much about ROS, but rather general Python / C++ debugging. You should be able to find lots of resources on the Web.
Comment by sykatch on 2015-12-16:
Yes, I'll try to find something, thanks a lot.

