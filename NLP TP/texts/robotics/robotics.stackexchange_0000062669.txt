Q:

Navigation, AMCL, amcl_pose

Hello,
I'm debugging the navigation stack set up on my robot. My question is about amcl_pose. This topic is published by amcl (or fake_localization), and in my robot amcl_pose is being published to by the localization module too, but no topic is subscribed to amcl_pose.
As I understand, local planner should use amcl_pose and I'm using DWAPlannerROS in the navigation stack, and DWAPlannerROS is only subscribed to odom.
So, the question is which component is using the result of the localization module.
UPDATE 1: Another suspicious thing with amcl (or fake_localization) is, although it is publishing to /particlecloud, but I can not visualize the particles in Rviz using /particlecloud topic. Nothing appears in Rviz.
Thanks

Originally posted by ROSCMBOT on ROS Answers with karma: 651 on 2014-09-18
Post score: 2

Original comments
Comment by Rick Armstrong on 2014-09-18:
Regarding the /particlecloud visualization in Rviz: I vaguely recall having trouble seeing this topic and I think it was because I had the wrong FixedFrame selected in Rviz. You can see the /particlecloud topic in Rviz if you have the right settings.
Comment by ROSCMBOT on 2014-09-19:
My FixedFrame is map. and everything works and looks fine in rviz, except particlecloud
Comment by Rick Armstrong on 2014-09-26:
Please forgive if this is a dumb question, but have you given the robot an initialpose? Another: does your particlecloud topic show up in the 'By Topic ' tab of the Add dialog in Rviz?

A:

From the wiki on DWAPlannerROS,

odom - Odometry information that gives the local planner the current speed of the robot

So the planner uses odom only for the instantaneous velocities. While it could extract the robot_pose from amcl_pose, it actually does this using the tf library (/tf topic) instead.
In more detail, the plugin doesn't actually obtain the pose itself, but actually gets the pose from move_base's costmap.

Also going by the wiki, amcl publishes /particlecloud as a PoseArray, which would be why you can't visualize it directly in rviz. You should be able to tap into the topic using rostopic echo though.

Originally posted by paulbovbel with karma: 4518 on 2014-09-18
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by ROSCMBOT on 2014-09-18:
Thanks Paul, So it is normal that no topic is subscribed to /amcl_pose?
Comment by paulbovbel on 2014-09-18:
Yes      .
Comment by ROSCMBOT on 2014-09-19:
regarding /particlecloud, according to this video, the topic should be visualizable in rviz
Comment by jayess on 2018-07-17:
As an update, PoseArrays can be visualized now.

