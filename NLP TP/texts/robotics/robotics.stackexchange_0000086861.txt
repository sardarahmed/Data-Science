Q:

Error in loading whycon file

I’m trying to run Whycon using ROS Kinetic with a USB camera on Ubuntu 16.04 LTS. I followed the whycon tutorial to calibrate the camera. After calibration, I ran in my home directory:
sdorman@ikon:~$ ROS_NAMESPACE=usb_cam rosrun image_proc image_proc
And in a new terminal:
sdorman@ikon:~/catkin_ws$ rosrun image_view image_view image:=usb_cam/image_rect_color
[ INFO] [1525377397.710295652]: Using transport "raw"
This worked with no issues. I then unpacked the calibration data from the tar.gz file using $tar -xvzf and then converted the ost.txt file to an ost.ini via
sdorman@ikon:~$ mv ost.txt ost.ini

And then ran:
sdorman@daikon:~$ rosrun camera_calibration_parsers convert ost.ini whycon_transforms.yml
[ INFO] [1525377222.129394510]: Saved whycon_transforms.yml

to convert to a yml file.
I sourced catkin_ws and then moved up to the whycon directory to run
sdorman@ikon:~/catkin_ws/src$ rosrun whycon whycon _targets:=1

Here I get the error “could not load file”.
sdorman@ikon:~/catkin_ws$ rosrun whycon whycon _targets:=1
[ INFO] [1525461972.198655861]: Loading file whycon_transforms.yml
[ WARN] [1525461972.198760338]: Could not load "whycon_transforms.yml"

This error also occurs in any other directory than my catkin_ws/src folder. If I move back to ~/catkin_ws/src I get the following error.
sdorman@ikon:~/catkin_ws/src$ rosrun whycon whycon _targets:=1
[ INFO] [1525461901.679379776]: Loading file whycon_transforms.yml
terminate called after throwing an instance of 'YAML::TypedBadConversion<double>'
  what():  yaml-cpp: error at line 0, column 0: bad conversion
Aborted (core dumped)

I’ve tried re-downloading Whycon and repeating the entire process but that did not work. I’m not sure where I went wrong, but any help would be appreciated.
Here's the whycon_ros file:
C:\fakepath\1st part of whycon.JPG
C:\fakepath\2nd part of whcon.JPG
C:\fakepath\3rd part of whycon.JPG
WHYCON_TRANSFORMS.YML file
image_width: 640
image_height: 480
camera_name: narrow_stereo
camera_matrix:
  rows: 3
  cols: 3
  data: [664.135327, 0, 343.103845, 0, 668.256661, 227.776189, 0, 0, 1]
distortion_model: plumb_bob
distortion_coefficients:
  rows: 1
  cols: 5
  data: [0.141424, -0.347581, 0.002344, 0.008555999999999999, 0]

rectification_matrix:
  rows: 3
  cols: 3
  data: [1, 0, 0, 0, 1, 0, 0, 0, 1]
projection_matrix:
  rows: 3
  cols: 4
  data: [672.257385, 0, 347.376007, 0, 0, 681.516541, 228.472198, 0, 0, 0, 1, 0]

Originally posted by sdorman on ROS Answers with karma: 60 on 2018-05-04
Post score: 0

Original comments
Comment by sdorman on 2018-05-04:
Sorry, I couldn't upload photos.
Comment by ahendrix on 2018-05-04:
I've bumped your karma so you should be able to upload images now.

A:

So I ended up using the rviz Image display and that worked fine. I can't overlay the tracking over my image but I don't really need to. I had to run ~/catkin_ws/src/whycon/launch $ rosrun rviz rviz -d whycon.rviz for targets to be tracked and selected PoseArray as a subscribed topic.
Going back to my original problem, I also figured out the whycon_transforms.yml file. I ran ~/catkin_ws/src/whycon/src/ros $ rosrun whycon set_axis
and the ~/catkin_ws/src/whycon $ rosrun whycon whycon _targets:=4 simultaneously. The set_axis node created the whycon_transforms.yml file. So please ignore the above WHYCON_TRANSFORMS.YML file that I preemptively created. The transforms file is created within the ~/catkin_ws/src/whycon/src/ros folder so I changed directories to run the ~/catkin_ws/src/whycon/src/ros $ rosrun whycon whycon _targets:=4 and my warning disappeared.

Originally posted by sdorman with karma: 60 on 2018-05-17
This answer was ACCEPTED on the original site
Post score: 1

