Q:

Use a known map to do navigation

Hi !
Is it possible to use a known map (saved as pgm and yaml) to do localization and navigation in rviz ?
I am actually using the turtlebot on Gazebo simulator. I created a map using gmapping and the keyboard teleop. And I saved this map using the map_server package.
I got two files (one pgm and one yaml). I tried to follow the tutorial about the pr2 (pr2_simulator/Tutorials/UsingCustomMapForSimulation) and adapt it to my case.
When I start rviz I can see my map but the robot is not able to move and the navigation is not working. Furthermore, I can see errors on the fixedFrame /map.
Which parameters should I change ?
Below is my launch script :
<launch>   

<!-- start gazebo with boxes -->   
  <param name="/use_sim_time" value="true" />   
  <node name="gazebo" pkg="gazebo" type="gazebo" args="-u $(find turtlebot_gazebo_tutorial)/test.world" respawn="true" output="screen"/>

  <node name="gazebo_gui" pkg="gazebo" type="gui" />

  <include file="$(find turtlebot_gazebo_tutorial)/launch/robot.launch"/>

  <!--- Load map -->   <node name="map_server" pkg="map_server" type="map_server" args="$(find turtlebot_gazebo_tutorial)/map.yaml" respawn="true" />

  <!--- Run AMCL -->   <include file="$(find turtlebot_navigation)/config/amcl_turtlebot.launch" />

  <!--- Run Move Base  -->   <include file="$(find turtlebot_navigation)/config/move_base_turtlebot.launch" />

</launch>

Thanks for help.
Update:
The global error is:
"Fixed frame /map doesn't exist."
And in the RobotModel I also have some errors:
"No transform from [base_footprint] to [/map]
No transform from [base_link] to [/map]
No transform from [camera_link] to [/map]
..."
for each frame.

Originally posted by CarolineQ on ROS Answers with karma: 395 on 2013-02-01
Post score: 1

Original comments
Comment by dornhege on 2013-02-01:
Please post all errors exactly as they appear using Copy & Paste, if possible.

A:

Thanks for help.
I fixed the problem.
Amcl was running but not configured correctly, as dornhege said.
The parameter for scan_topic wasn't set to the correct topic (it was narrow_scan instead of scan). I changed that and now it works.
Thanks.

Originally posted by CarolineQ with karma: 395 on 2013-02-04
This answer was ACCEPTED on the original site
Post score: 1

