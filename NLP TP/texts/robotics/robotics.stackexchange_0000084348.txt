Q:

how to convert sensor_msgs::PointCloud2 to cv::Mat

I subscribed the ros message which type is sensor_msgs::PointCloud2, and I want to convert it to cv::Mat.

Originally posted by YangLei1993 on ROS Answers with karma: 3 on 2017-12-20
Post score: 0

A:

Okay, your question makes sense now you've said

I want to obtain the grid map by
converting this ros_msg to mat

This is fairly straightforward but you'll need to define a couple of things first, the cell size of your gridmap needs to be set, using this and the extents of your point-cloud you can work out the size of the cv::Mat you need to create to store the map.
If you create this Mat with all pixels set to empy, then you just need to loop through each point in the cloud and which 'pixel' of the map it falls into then set that pixel to occupied.
It's worth noting that you'll need to record the location of the Mat's origin within the coordinate frame that contains the point-cloud otherwise the position of the whole map will be unknown.

Originally posted by PeteBlackerThe3rd with karma: 9529 on 2017-12-20
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by YangLei1993 on 2017-12-21:
Thank you very much, I ignored the problem of the coordinate frame.
Comment by PeteBlackerThe3rd on 2017-12-29:
Glad you got it sorted, if this helped you solve the problem can you accept this answer. Thanks.
Comment by YangLei1993 on 2018-01-03:
I'm sorry, I am a novice, I now know I need to mark this answer as correct, thank you again!
Comment by PeteBlackerThe3rd on 2018-01-03:
No problem, we all start somewhere!

