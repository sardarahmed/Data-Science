Q:

problem with nxt_lejos_lcp_proxy

Hi everybody!
I'm a researcher, I'm working with ROSJava and a NXT.
I'm trying to run LCPProxy.java but I have a problem.
After launching the node I get this output:
* Configurate ROS Node

*********************
* Running LCPProxy *
*********************

ROS Node Path: /home/camilla/my_workspace/nxt_lejos/nxt_lejos_lcp_proxy/
* Reading property file
Path: /home/camilla/my_workspace/nxt_lejos/nxt_lejos_lcp_proxy/nxt_lejos_ros/lcp_proxy.properties
BRICK-NAME: OKAY
CONNECTION: USB
YAML: NXT.yaml
Differential navigation features enabled
WHEEL_DIAMETER: 5.6
TRACK_WIDTH: 16.0
REVERSE: true
* Connecting with a NXT brick
Log.listener: Protocols = 1
Log.listener: Search Param = null
Log.listener: Searching for any NXT using USB
Found NXT: Unknown 001653079D95
ROS Node connected with a NXT brick
* Bind NXT brick with ROS
* Processing YAML file
YAML Path: /home/camilla/my_workspace/nxt_lejos/nxt_lejos_lcp_proxy/NXT.yaml
list size2
Type is ultrasonic
I found an ultrasonic  sensor description
ultrasonic_sensor
PORT_1
10.0
point1
Found NXT: Unknown 001653079D95
Failed to open connection to the NXT

It seems that the configurate and the connect steps succeed, but there is a problem in the bind() one.
In particular in during the first iteration of the for loop in processYAML().
Infact debbuging the code I saw that the last instruction called is:
us = new UltrasonicSensor(node, port);

But I can't figure out why and where there is a new attempt to connect to the brick which produces the last two lines of the output:
Found NXT: Unknown 001653079D95
Failed to open connection to the NXT

can you help me find a solution?or at least to understand where in the code and why there is the new attempt of connection?
I'm using a NXT with the traditional Lego firmware and a usb connection.
my YAML file is:
nxt_robot:
  - type: ultrasonic
    name: ultrasonic_sensor
    port: PORT_1
    min_range: 0.01
    max_range: 2.5
    desired_frequency: 10.0
  - type: differential_navigation_system
    name: pilot
    port: PORT_AC
    desired_frequency: 10.0
    track_width: 16.0
    wheel_diameter: 5.6
    reverse: true

(specifing another sensor or actuator as first element of the yaml file I get the same error, so the problem isn't specific of the ultrasonic sensor).
my lcp_proxy.properties file is:
NXT-BRICK: OKAY
CONNECTION-TYPE: USB
YAML-ROBOT-DESCRIPTOR: NXT.yaml
DIFFERENTIAL_NAVIGATION_FEATURES: true
WHEEL_DIAMETER: 5.6
TRACK_WIDTH: 16.0
REVERSE: true

Looking forward to hearing from you. :)

Originally posted by camilla on ROS Answers with karma: 255 on 2012-07-19
Post score: 0

A:

My guess is that you have not flashed your NXT with the lejos firmware. Install lejos and flash the usb. See if the error is still there. I have arrived at this conclusion based on the fact that it is detecting it, but not getting information from it.

Instructions for flashing firmware can be found here.

Originally posted by allenh1 with karma: 3055 on 2012-07-20
This answer was ACCEPTED on the original site
Post score: 0

