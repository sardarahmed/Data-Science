Q:

Integral tie-back in AtlasPlugin.cpp seems wrong - causes control glitches

The code at roughly line 1066 in AtlasPlugin.cpp appears to be wrong.  Specifically, it generally will invert the k_i_q_i term on a step change and saturate in the opposite of the commanded direction.
If a negative step is applied that results in a clamped force then the code can result in a k_i_q_i that is clamped at the positive limit.  This results in a joint excursion in the opposite of the desired direction.
This is not a desired behaviour.  I would recommend simply removing the problematic code.
// lock integral term to provide continuous control as system moves
// out of staturation
this->errorTerms[i].k_i_q_i = math::clamp(
        this->errorTerms[i].k_i_q_i + (forceClamped - forceUnclamped),

Originally posted by GoRobotGo on Gazebo Answers with karma: 21 on 2013-04-09
Post score: 0

A:

please continue discussion on ticket.

Originally posted by hsu with karma: 1873 on 2013-04-09
This answer was ACCEPTED on the original site
Post score: 0

