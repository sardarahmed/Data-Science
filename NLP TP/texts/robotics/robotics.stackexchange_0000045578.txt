Q:

hector_slam sporadic update error of /odom

Hi
We use a non-holonomic wheeled platform with two SICK s300 laser scanners, and have recently tried to apply hector_slam instead of gmapping because gmapping uses almost 100% cpu and hector_slam uses close to 0%. We run Fuerte and Ubuntu 12.04 LTS. The software is running on one computer on the platform.
However, we have one problem with hector_slam and that is sporadic updates of the odometry.
We have made a launch file with the following
<?xml version="1.0"?>
<launch>
  <node pkg="hector_mapping" type="hector_mapping" name="hector_mapping" output="screen">
        <!-- Frame names -->
        <param name="map_frame" value="/map" />
        <param name="base_frame" value="/base_link" />
        <param name="odom_frame" value"/odom" />
        <param name="scan_topic" value="/scan_unified/scan"/>
  </node>
        <!-- Tf use -->
        <param name="pub_map_odom_transform" value="true"/>
</launch>

When we run the mapping the map updates and builds fine in rviz when moving linearly, but when we start to rotate the robot the scans and map do not align anymore.
When looking at the odometry in rviz, it continuously goes between an error and OK. The error we receive is

For frame [odom]: No transform to fixed frame [/map]. TF error: [unable to lookup transform, cache is empty, when looking up transform from frame [/odom] to frame [/map]]

Anyone got an idea to why we receive this sporadic error of the odometry, it shifts between the error and OK every second, sometimes faster, sometimes slower?

Originally posted by tropic on ROS Answers with karma: 84 on 2012-11-07
Post score: 0

A:

This sounds like a problem with the robot setup and shouldn't be specific to hector_mapping. If you have different computers contributing to tf, this could be a problem with non-synchronized clocks between computers.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2012-11-08
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by tropic on 2012-11-08:
Hi Stefan. We recently moved the whole setup to run on just one computer, so this should not be the problem. What I find weird is that we have no problems with our gmapping setup, and as I understand we should be able to use hector_slam more or less 1:1, right?
Comment by jodafo on 2012-11-12:
Probably you already did this, but did you check e.g. via rosrun tf view_frames if theres nothing else besides hector_mapping publishing the map->odom transform?

