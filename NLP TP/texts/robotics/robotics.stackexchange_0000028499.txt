Q:

How to call gazebo_msg/GetLinkState service for a sensor mounted on a robot?

Hi all,
I have the following problem:
To make my own robot in gazebo (a diff-drive with a laser and a kinect) I wrote the following urdf:
https://github.com/schizzz8/lucrezio_simulation_environments/blob/master/urdf/lucrezio_with_logical.urdf.xacro
Now, I'd like to call gazebo_msgs/GetLinkState service to retrieve the pose of the sensor with respect to the gazebo world.
If I do that, that's the output I get:

In fact, in the gazebo window, the robot seems to be made of just few links:

How can I have gazebo to see also camera_link in order to retrieve its pose?
Thanks.

Originally posted by federico.nardi on Gazebo Answers with karma: 23 on 2018-06-05
Post score: 0

A:

I see you have a lot of fixed joints on your URDF. When converted to SDF, links connected by fixed joints are lumped together into links for performance, and as a consequence, the link names change.
One thing you could try would be to use the preserveFixedJoint on your URDF, so that the fixed joints are persisted, and link names and poses don't change, for example:
<joint name="camera_joint" type="fixed">
...
</joint> 
<gazebo reference='camera_joint'>"
    <preserveFixedJoint>true</preserveFixedJoint>"
</gazebo>"

Originally posted by chapulina with karma: 7504 on 2018-06-05
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by federico.nardi on 2018-06-06:
I tried your solution, but nothing changes. Btw, I pushed the fix to the repo so you can check if I'm doing that right. To test it, you can run: roslaunch lucrezio_simulation_environments robot.launch (now the urdf is lucrezio.urdf.xacro)
Comment by federico.nardi on 2018-06-06:
Of course, if I change the joint type to "continuous" then I can see it. My question is: is that  a possible solution? In the end, if I'm guaranteed that no one moves camera, I can be fine with this hack.
Comment by chapulina on 2018-06-06:
I think you may be using an older version of Gazebo which doesn't support the preserve tag... In any case, using a revolute joint with zero limits should work fine even if it is moved.

