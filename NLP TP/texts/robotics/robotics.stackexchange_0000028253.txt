Q:

how to read images from a camera in the Gazebo?

hi, everyone, I have the same problem with this http://answers.gazebosim.org/question/16214/how-to-get-image-without-storing-into-disk-from-gazebo/?answer=16977#post-id-16977, I want to read the images from a camera in the gazebo 6.5, and input the images to the c++ program of image processing. I try to follow the above tips to change the code of CameraDump::OnNewFrame(), but I it is not working. So, can anybody give me hands or show me how you did it? Thanks a lot!

Originally posted by langong on Gazebo Answers with karma: 13 on 2017-08-14
Post score: 0

Original comments
Comment by langong on 2017-08-14:
actually, my question is about the example https://bitbucket.org/osrf/gazebo/src/ada35b395c9d/examples/plugins/camera/?at=gazebo6 mentioned in the answer

A:

the image data is given by the unsigned char *_image variable. You also get width, height, and format (R8G8B8 for a standard camera) information in the callback, you should be able to feed those to your image processing program.

Originally posted by iche033 with karma: 1018 on 2017-08-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by langong on 2017-08-15:
hi,  I am going to use GetImageData (gazebo 6.5) to read the images, But now, I don't know how to use this function, I didn't find any example. Can you show me an example? or do you have any ideas for my problem. Thank you very much!
Comment by langong on 2017-08-15:
my problem is I don't know how to get the image data, I try to follow the above link, but it is not working. can you help me?
Comment by iche033 on 2017-08-15:
I would suggest to use the plugin and get the image data that way. You have a pointer to the image data in memory. Can you describe what you mean by not working? Does this example save frames in the tmp folder? https://bitbucket.org/osrf/gazebo/src/ada35b395c9d/examples/plugins/camera/?at=gazebo6
Comment by langong on 2017-08-16:
hi, Now, the camera_dump.cc and camera_move.cc is working, The image was saved in the folder and the camera was moving. But, I want to read image data in memory, not save in disk. Because I need image data to do image processing real time. Does the function GetImageData() read image data? I try to using GetImageData() to read image data, but it always returns NULL. Maybe I do not know how to use GetImageData(). Can help me? Thanks a lot!
Comment by langong on 2017-08-16:
another question: how can I change the update rate of saving the image in the camera_dump.cc. For instance, save an image per 0.5 seconds.
Comment by iche033 on 2017-08-16:
if you look at camera_dump, it calls this->parentSensor->GetCamera()->SaveFrame and pass in the _image data. So just modify the plugin to not call that function and it won't save to disk. To change update rate, edit the world file and change the update rate for the camera sensor.
Comment by langong on 2017-08-21:
it is working. Thank you very much.

