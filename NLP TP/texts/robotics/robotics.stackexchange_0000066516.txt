Q:

UWSim multi robots with sensors

Hi,
I am having issues setting up a scene with 2 robots, each equipped with an IMU. My scene XML looks like:
...
<vehicle>
    <name>AZOR</name>
    <file>data/scenes/g500ARM5.urdf</file>
    <position>
      <x> 5</x>
      <y> 7 </y>
      <z> -3 </z>
    </position>
    <orientation>
      <r>0</r>
      <p>0 </p>
      <y>0 </y>
    </orientation>
    <imu>
      <name>IMU_AZOR</name>
      <relativeTo>base_link</relativeTo>
      <position>
        <x>0</x>
        <y>0</y>
        <z>0</z>
      </position>  
      <orientation>
        <r>0</r>
        <p>0</p>
        <y>0</y>
      </orientation>
      <std>0.00000001</std>
    </imu>
  </vehicle>

  <vehicle>
    <name>TOM</name>
    <file>data/scenes/g500ARM5.urdf</file>
    <position>
      <x> 10</x>
      <y> 8 </y>
      <z> -3 </z>
    </position>
    <orientation>
      <r>0</r>
      <p>0 </p>
      <y>0 </y>
    </orientation>
    <imu>
      <name>IMU_TOM</name>
      <relativeTo>base_link</relativeTo>
      <position>
        <x>0</x>
        <y>0</y>
        <z>0</z>
      </position>  
      <orientation>
        <r>0</r>
        <p>0</p>
        <y>0</y>
      </orientation>
      <std>0.00000001</std>
    </imu>
  </vehicle>

  <rosInterfaces>
    <ROSOdomToPAT>
      <topic> /dataNavigator_AZOR </topic>
      <vehicleName> AZOR </vehicleName>
    </ROSOdomToPAT>
    <ROSOdomToPAT>
      <topic> /dataNavigator_TOM </topic>
      <vehicleName> TOM </vehicleName>
    </ROSOdomToPAT>
    <PATToROSOdom>
      <topic> /uwsim/odom_AZOR </topic>
      <vehicleName> AZOR </vehicleName>
    </PATToROSOdom>
    <PATToROSOdom>
      <topic> /uwsim/odom_TOM </topic>
      <vehicleName> TOM </vehicleName>
    </PATToROSOdom>
    <WorldToROSTF>
      <rootName> world </rootName>
      <enableObjects> 0 </enableObjects>
      <rate>10</rate>
    </WorldToROSTF>
    <ImuToROSImu>
      <name>IMU_AZOR</name>
      <topic>g500/IMU_AZOR</topic>
      <rate>20</rate>
    </ImuToROSImu>
    <ImuToROSImu>
      <name>IMU_TOM</name>
      <topic>g500/IMU_TOM</topic>
      <rate>20</rate>
    </ImuToROSImu>
  </rosInterfaces>

When I try to run this scene, UWSim gives me Segmentation Fault. However, If I remove the second IMU sensor, the simulation is working OK. How can I have two vehicles with 2 IMU sensors?
Thanks

Originally posted by raluse on ROS Answers with karma: 28 on 2015-03-22
Post score: 0

A:

The problem comes from the WorldToROSTF element:
<WorldToROSTF>
  <rootName> world </rootName>
  <enableObjects> 0 </enableObjects>
  <rate>10</rate>
</WorldToROSTF>

After this is removed, the simulation works fine.

Originally posted by raluse with karma: 28 on 2015-03-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Javier Perez on 2015-03-31:
True, there was a bug on TF publishing for some sensors. I've just updated git main branch, thanks for the catch and sorry for the late response!.
Comment by Ragnar Moberg on 2016-02-29:
Do you know if your changes have made it to version 1.4? Im sitting here with the exact same issue.
ROS: Jade
UWSim 1.4
Ubuntu 14.04.4
Comment by Javier Perez on 2016-03-01:
Actually, it was fixed, but at some point reintroduced, Should be fixed again for indigo source, I'll merge changes to jade source right now.

