Q:

Cancelling a ROS action within an executive_teer node

Hello,
I am trying out the executive_teer package and my test setup is a simulated TurtleBot running two main tasks: a navigation task that moves the TurtleBot through a series of waypoints in a map using MoveBase actions and a battery_check task that monitors a simulated battery level and sends the robot to a charging base (also using MoveBase) when the level falls too low.
The trouble I am having is interrupting the current MoveBaseAction from the battery_check task when the battery level falls below threshold and while the robot is still on the way to a waypoint.  Even though I send a move_base.cancel_goal() from the battery_check task, the robot always continues to the current waypoint before then heading to the charging station.  I've also tried killing or pausing the navigation task but I get the same result--the MoveBaseAction appears to be outside the teer environment's control.
I can post the code details if necessary but perhaps there is some general trick when using teer with standard ROS actions?
Thanks!
patrick

Originally posted by Pi Robot on ROS Answers with karma: 4046 on 2013-04-04
Post score: 0

A:

The answer given by Patrick works, but misses the point of teer.  A better solution would be to have self.move_base_done as a ConditionVariable, so that the co-routine is automatically un-paused when this variable becomes true. Please see this tutorial page for more informations about condition variables.

Originally posted by Stéphane Magnenat with karma: 83 on 2013-04-07
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Pi Robot on 2013-04-08:
Thanks for the clarification @Stéphane Magnenat.

