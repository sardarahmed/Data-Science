Q:

Failed approximate-ndt-mapping with odom topic

We sometimes succeeded and sometimes failed to do approximate-ndt-mapping provided with Autoware (v1.13), which depends on the shape of the course we wanted to map out and etc.
Instead of mapping only with the lidar topic (/points_raw), we tried to add the odom topic (/vehicle/odom) to it so we're expecting we could make it more often.
However, we didn't make it as shown in this video - https://youtu.be/491T8yIHqP4.
I'm wondering what I was wrong.
Any piece of advice will be appreciated.
Thank you :)

Originally posted by wsung1 on ROS Answers with karma: 11 on 2020-06-10
Post score: 0

A:

@wsung1 Please make sure you are setting use_odom to true in the ndt_matching.launch file and you have something publishing your odometry on the topic /vehicle/odom as a sensor_msgs/Odometry message. If you need to convert sensor_msgs/TwistStamped to an (incomplete) sensor_msgs/Odometry, there is a utility package called twist2odom for this purpose.

Originally posted by Josh Whitley with karma: 1766 on 2020-06-11
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Josh Whitley on 2020-06-13:
@wsung1 this was a typo. Should be nav_msgs/Odometry.
Comment by wsung1 on 2020-06-13:
Thanks for your reply, @Josh Whitley. As can be seen in the video, the odom topic /vehicle/odom has a rosmsg type of nav_msgs/Odometry. Should it be sensor_msgs/Odometry? I couldn't find a rosmsg by that name, though.
Comment by wsung1 on 2020-06-13:
@Josh Whitley, I'm wondering why small submap files (hundreds kB) are spawned when starting approximate-ndt-mapping with setting use_odom to true. Do you have any idea about that?
Comment by Josh Whitley on 2020-06-16:
This is a separate question and should be started in a new Question on ROS Answers. Were you able to get NDT to accept the /vehicle/odom topic?

