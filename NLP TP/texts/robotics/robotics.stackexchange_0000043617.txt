Q:

Reading the sequence number from a transform

Hi folks!
I'd like to be able to use the sequence number from a transform that I am getting from a motion capture vrpn. I use this piece of code to read the transform:
tf_listener.lookupTransform("/optitrak", "/quad",  ros::Time(0), quad);

and am attempting to read the sequence via:
 seq= quad.header.seq;

But, naturally, the transform does not include that header. How can I read get both the transform and it's associated sequence number?
Thanks,
Parker

Originally posted by 0pc0 on ROS Answers with karma: 78 on 2012-08-27
Post score: 0

A:

As far as I know, it is not possible to get the sequence number due to the design of how tf works. Since there can be multiple producers of tf info, data can arrive out of order and may not be synchronized. It is the consumer's responsibility to check for the required tf using the timestamp, hence the lookupTransform with associated time (ros::Time(0) for example to get the latest tf)
If it is absolutely necessary to have a sequence number, it is probably best to go back to the producer (in your case, whoever broadcasts /optitrak->/quad) and publish that transform with stamp. But I'm wondering about the necessity of this, since by your tf lookup, you know it is the latest tf, and can just be seq+1 by default.

Originally posted by weiin with karma: 2268 on 2012-08-27
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by dornhege on 2012-08-27:
AFAIK tf even interpolates between frame, so there might not be any single message behind a tf request.

