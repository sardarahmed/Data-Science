Q:

multiplexing between two topic

Hi i am using P3AT(USARSim simulator) and want to drive it from my ROS-Fuerte. what i want to do is,

Driving the robot using keyboard (using teleop_twist_keyboard)

Automated navigation of robot (using Navigation stack)

I want to drive the robot using keyboard but when i commit mistake(i.e. approaching to hit a wall) the automated behavior need to be activated.
by following this, i have my configuration file
example_cfg.yaml
subscribers:
  - name:        "Human_is_Driving"
    topic:       "teleop_cmd_vel"
    timeout:     0.5
    priority:    5
  - name:        "MACHINE_TAKES_OVER"
    topic:       "auto_cmd_vel"
    timeout:     0.5
    priority:    5
publisher:       "velocity_multiplexer/mux_cmd_vel"

standalone.launch
<launch>
  <node pkg="nodelet" type="nodelet" name="nodelet_manager" args="manager"/>
  <node pkg="nodelet" type="nodelet" name="velocity_multiplexer" args="load cmd_vel_mux/CmdVelMuxNodelet nodelet_manager">
    
    <param name="subscribers_cfg_file" value="$(find cmd_vel_mux)/param/example_cfg1.yaml"/>
    
    <remap from="cmd_vel_mux/mux_cmd_vel" to="mobile_base/commands/velocity"/>
    <remap from="cmd_vel_mux/web_cmd_vel" to="web_app_teleop"/>
    <remap from="cmd_vel_mux/key_cmd_vel" to="key_cmd_vel"/>
    <remap from="velocity_multiplexer/amcl_pose" to="amcl_pose" />
    <remap from="velocity_multiplexer/move_base_simple/goal" to="move_base_simple/goal" />
    
  </node>
</launch>

resulting rqt graphs of

teleoperation

automated navigation

i am not able to understand the complexity of the problem.
please help me to understand "how can i switch between cmd_vel used by teleop & cmd_vel used by move_base"

Originally posted by sumant on ROS Answers with karma: 77 on 2014-10-21
Post score: 0

A:

Take a look at the assisted_teleop package: http://wiki.ros.org/assisted_teleop
It isn't documented, but there are a few sample launch files like https://github.com/ros-planning/navigation_experimental/blob/hydro-devel/assisted_teleop/launch/assisted_teleop.launch

Originally posted by ahendrix with karma: 47576 on 2014-10-21
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by sumant on 2014-10-22:
@ahendrix thank you for reply
i have read about cmd_vel_mux, can we use it for the same purpose.
i am also using the same. but not able to write the launch file.
Comment by ahendrix on 2014-10-22:
cmd_vel_mux allows switching between topics, but is generally useful in the cases where manual control should preempt autonomous control; not the other way around.

