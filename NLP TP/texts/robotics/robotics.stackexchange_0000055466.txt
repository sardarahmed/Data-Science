Q:

octomap_server nodelet missing under Hydro

Hello,

After successfully running octomap_server as node, I would like to try running it as nodelet. If I roslaunch octomap_server octomap_mapping_nodelet.launch I get the following error:
[ERROR] [1384422211.742630096]: Failed to load nodelet [/octomap_server_nodelet] of type [octomap_server/OctomapServerNodelet]: According to the loaded plugin descriptions the class octomap_server/OctomapServerNodelet with base class type nodelet::Nodelet does not exist.

Looking at the contents of /opt/ros/hydro/share/octomap_server, I can see that there is no nodelet_plugins.xml file in there. I am using the latest octomap_server binary package that comes with Hydro. The dev version, however, does contain the nodelet definition file, see https://github.com/OctoMap/octomap_mapping/tree/hydro-devel/octomap_server/plugins

When cloning https://github.com/OctoMap/octomap_mapping.git into my workspace and compiling it with catkin_make, I get this "no matching function" error:
In file included from /home/ros/catkin_ws/src/octomap_mapping/octomap_server/src/OctomapServerMultilayer.cpp:30: /opt/ros/hydro/include/pcl_conversions/pcl_conversions.h: In function ‘void pcl_conversions::fromPCL(const PointIndices&, pcl_msgs::PointIndices&)’: /opt/ros/hydro/include/pcl_conversions/pcl_conversions.h:265:37: error: no matching function for call to ‘fromPCL(const header_type&, pcl_msgs::PointIndicesstd::allocator<void >::_header_type&)’

@AHornung:Any idea what is broken here?
Cheers

Originally posted by Huibuh on ROS Answers with karma: 399 on 2013-11-13
Post score: 0

A:

Regarding 1: Looks like the file nodelet_plugins.xml is not installed via CMake so it's missing from the binary install. This could be related to this issue on octomap_mapping. That should be easy to fix similar to this commit/patch: https://github.com/ros-drivers/velodyne/commit/784e5c6d590e605315fb90c2fc350cc20b4e0cae
Regarding 2: Cloning the devel version (hydro-devel branch) should definitely work and compile, I just verified. Could it be that you have an outdated version of pcl_conversions installed?

Originally posted by AHornung with karma: 5904 on 2013-11-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Huibuh on 2013-11-14:
Thanks Armin, I managed to resolve both issues. 1): Now using octomap_mapping compiled from source which included the nodelet definition. 2): My catkin_ws was currupted. After deleting the build and devel folders and recreating them the octomap_mapping package compiled without errors. Thanks, Heiko
Comment by AHornung on 2013-11-14:
I just pushed the fix for the installation to the hydro-devel branch, will be part of the next release.

