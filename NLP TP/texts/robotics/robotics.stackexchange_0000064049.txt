Q:

capture publish and subscribe image using ROS

Hello Everyone,
I am newbie in ROS i have written  C code for Capturing images using OpenCV and then using socket communication I am sending that images to remote location. Now I have to create same in ROS so that one node can capture images and other nodes can publish and subscribe multiple images. I dont know whether it is possible or not in ROS. Plz guide me something and share link that can easily work..

Originally posted by KDROS on ROS Answers with karma: 67 on 2014-11-17
Post score: 0

A:

ROS has the image_transport library which adds additional convenience methods for publishing and subscribing to images and their matching camera transformation matrices.
In addition, there is the cv_camera package which provides a ROS node that captures images through the OpenCV API and publishes them as ROS messages. This should take care of the capture and publish part of your pipeline. There are also many other camera drivers available for ROS which provide the same API for other types of cameras, and can expose vendor-specific APIs such as shutter, gain and synchronization control.
You'll want to explore the image_transport tutorials to subscribe to an existing image stream, convert it to an OpenCV format and process it.

Originally posted by ahendrix with karma: 47576 on 2014-11-17
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by KDROS on 2014-11-19:
I was using Usb_cam for capturing images. It is publishing image on topic "image_raw", with camera info, I dont have need of the camera info,I want to writesubscriber, Suggest changes required in link
Comment by ahendrix on 2014-11-19:
I'm sorry; I don't understand you question well enough to give a better answer.
Comment by KDROS on 2014-11-19:
Sorry, Goto the Link and see publisher topic in usb_cam_node.cpp , It will publish image and camera info in this topic, How to write subscriber node for that
Comment by ahendrix on 2014-11-19:
The image_transport subscriber tutorial should work. You may need to change the image topic, either in the tutorial or through remapping at runtime.
Comment by KDROS on 2014-11-20:
Since usb_cam is publishing two things image n camera info, so I think there is need to change callback function. What is remapping at runtime?
Comment by ahendrix on 2014-11-20:
You said that you don't care about the camera info. Why do you want to subscribe to it?
Comment by ahendrix on 2014-11-20:
Remapping allows you to change topic names without recompiling. See:  http://wiki.ros.org/Remapping%20Arguments for more info.
Comment by KDROS on 2014-11-24:
want to know very basic que. When will usb_cam publish image? after fixed time or, whenever i will save the image using right click in image_view?
Comment by ahendrix on 2014-11-24:
The ROS camera drivers publishe images continuously. image_view is just another subscriber to this topic; it doesn't control how frequently images are published. You should use able to verify this using the ROS introspection tools such as rostopic echo and rostopic hz
Comment by KDROS on 2014-11-25:
so is it possible to run image_view from other computer connected to master computer, (master where i am using usb_cam).
Comment by KDROS on 2014-11-25:
Scenario is like..master core will use usb_cam and capture images and it will publish, remote computer connected with master will subscribe the published image. I think whatever u told,if running  image_view from remote computer is possible,then there is no need of anything
Comment by KDROS on 2014-11-26:
Thanx ahendrix. I will post new que very soon. I have completed this job.

