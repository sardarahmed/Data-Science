Q:

Why such a bad map using a depth camera?

I recently bought D435 (Intel realsense) and used rtabmap package to perfrom SLAM.
I simply used this roslaunch:
http://wiki.ros.org/rtabmap_ros/Tutorials/HandHeldMapping
And the result is this:

The environment is this:

Any ideas?
DB:
https://drive.google.com/file/d/1cZOOhW2TI5_lVt2W8VfuYakOA-6MSUio/view?usp=sharing

Originally posted by EdwardNur on ROS Answers with karma: 115 on 2019-03-01
Post score: 0

Original comments
Comment by kitkatme on 2019-03-03:
Was this running on a real robot? Not in gazebo?
Comment by EdwardNur on 2019-03-03:
@kitkatme Yes, but worth to note that I just used my camera without any external odometry.
Comment by matlabbe on 2019-03-03:
Is the camera immobile or you moved the camera? What kind of trajectory? If the camera is not moving, the noise in the cloud is coming from the sensor.
Comment by EdwardNur on 2019-03-05:
@matlabbe I did move the camera forward
Comment by matlabbe on 2019-03-05:
Can you share the resulting database? (default ~/.ros/rtabmap.db)
Comment by EdwardNur on 2019-03-06:
@matlabbe I have added DB

A:

Thx for the db, there are some observations that we can make (referring to figure below):

The camera is very close to ground, so that the field of view is filled with more than 50% of repetitive symmetric pattern, very difficult to get good depth estimation as well for visual odometry. It is why the ground is poorly represented in the occupancy grid.

The resulting depth image from the sensor is quite noisy (see top view of the cloud on right image). I suggest to use Grid/3D=false and Grid/RayTracing=true to get more empty cells (see grid on left image):
  $ roslaunch rtabmap_ros rtabmap.launch rtabmap_args:="--delete_db_on_start --Grid/3D false --Grid/RayTracing true" depth_topic:=/camera/aligned_depth_to_color/image_raw rgb_topic:=/camera/color/image_raw camera_info_topic:=/camera/color/camera_info approx_sync:=false

There is quite motion blur when the robot moves (see top middle image, open image in another tab to zoom in), which would affect visual odometry accuracy.

Possible solutions:

Tilt the camera toward the ceiling (and/or increase height) so that there is less ground in the FOV of the camera. Make sure to update TF as well between base_link and camera_link.

Move slower to limit motion blur

Consider using wheel odometry if possible

Originally posted by matlabbe with karma: 6409 on 2019-03-06
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by EdwardNur on 2019-03-06:
@matlabbe That is what I thought, probably ground is too close. Thank you for your help.

