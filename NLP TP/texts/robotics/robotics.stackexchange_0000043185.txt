Q:

Rviz weird shading when using materials

I'm using rviz in electric on lucid and have some weird shading effects when using materials in a collada model.
The blender model looks like this:

... and rviz gives me the following:

Notice the bright shading from the top. It seems to be OK when using textures (the gold/black manipulator in the back is textured), but I'd like to avoid texturing the model.
I've already made sure that no RGB values are 1.0 or 0.0 exactly (In that case the model seems pink).
Does anyone know the reason or any more ways to fix that?
Update: Some more tips I have tried from the other threads:

Flipping normals - just flips the normals, the lighting seems not to be affected at all.
Setting the model to smooth/flat doesn't seem to have any effect.

For now, I surrendered and textured the whole model. That seems to work:

Originally posted by dornhege on ROS Answers with karma: 31395 on 2012-08-13
Post score: 2

Original comments
Comment by Stefan Kohlbrecher on 2012-08-13:
Are you on electric or fuerte? There was a bug with ambient color some time ago (that should be fixed by now, but who knows): http://answers.ros.org/question/27734/mesh-rendering-in-rviz/ .
Comment by dornhege on 2012-08-14:
I'm on electric. The bug is still present. If I have a value at 0.0, the mesh appears pink and grey.
Comment by david.hodo on 2012-09-11:
This is off topic, but is the Matilda model you are using in the screenshots available in any of the ROS packages or would you be willing to share it?
Comment by dornhege on 2012-09-12:
I only did the ROS conversion, but not the 3D model, so I cannot just publish that. The 3D model was done by TU Graz.

A:

Are the materials embedded in a way in the collada file?
The problem we ran into with the Nao is that RViz is not able to find the materials for OGRE .mesh files since it only looks at its own ogre_media/textures directory. Our workaround was to copy all textures and materials to
`rospack find rviz`/ogre_media/textures/

for electric, and
`rospack find rviz`/ogre_media/

for fuerte.
A submitted patch did not get any attention so far.

Originally posted by AHornung with karma: 5904 on 2012-08-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by dornhege on 2012-08-14:
Yes, they are embedded. It also seems to somewhat use them (the color scheme itself seems correct), just wrongly.

