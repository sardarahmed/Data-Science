Q:

Subscribe to a topic in rqt plugin

I want to subscribe to a very simple topic (/chatter) from within an rqt plugin but I cannot get it to work. After I boiled down the code it looks essentially like this:
void MyPlugin::initPlugin(qt_gui_cpp::PluginContext& context)
{
  mainWidget = new MainWindow();

  if (context.serialNumber() > 1)
  {
    mainWidget->setWindowTitle(mainWidget->windowTitle() + " (" + QString::number(context.serialNumber()) + ")");    
  }
  context.addWidget(mainWidget);

  // this is where want to subscribe
  sub = n.subscribe("chatter", 1000, &MyPlugin::chatterCallback, this);
}
  

// this is my callback function 
void MyPlugin::chatterCallback(const std_msgs::String::ConstPtr& msg)
{
  ROS_INFO("I heard: [%s]", msg->data.c_str());
}

Of course sub and n are declared in the header and the code compiles.
Only problem is: Nothing happens..

Originally posted by alu on ROS Answers with karma: 26 on 2013-09-20
Post score: 0

A:

Ok, I found the problem. It is important to get the NodeHandle from the plugin and not to create one yourself.

Originally posted by alu with karma: 26 on 2013-09-23
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by bapclenet on 2014-07-29:
How do you get the NodeHandle from the plugin?
sub_ = getNodeHandle().subscribe("/topic",10,callback); results on a:
Failed to load nodelet ...

