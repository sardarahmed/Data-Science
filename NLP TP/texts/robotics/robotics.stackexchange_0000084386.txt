Q:

Rosbridgelb: Received a message without op

I'm using ROSBridgelb to publish "OccupancyGrid Message" from Unity to ROS. However I'm always getting the "Received a message without op" error. I made sure that there is no problem with all brackets, quotation marks, commas and periods. Any help?
A screenshot of the error can be found here: https://drive.google.com/open?id=1NDKhzGVqHdwRJiR78YarVofdzoGBGIlD

Originally posted by AbbasSidaoui on ROS Answers with karma: 1 on 2017-12-22
Post score: 0

A:

Hi @AbbasSidaoui !
According to the ROS Bridge Protocol http://wiki.ros.org/rosbridge_suite, when sending message to ROS Bridge you have to specify the op  (Operation) field.
If you look at the link above, you will see the example message:
{ "op": "subscribe",
  "topic": "/cmd_vel",
  "type": "geometry_msgs/Twist"
}

In this message, the Operation is subscribe, which means that this ROS Bridge Client is telling ROS Bridge that he wants to subscribe to the /cmd_vel topic which publish messages of type geometry_msgs/Twist.
Looking at the error message on the picture, we can see that there is a "op": "publish", so this doesn't seen to be the problem.
What I would do in this case is try to print the "keys" of the message to see if there is a key named "op" like in the example below:
message = { "op": "subscribe",
  "topic": "/cmd_vel",
  "type": "geometry_msgs/Twist"
}

Object.keys(message)

Originally posted by Ruben Alves with karma: 1038 on 2017-12-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by AbbasSidaoui on 2017-12-25:
Hello Ruben,
Thanks for your help! Is there any other way to check?
When trying to use "Object.Keys()", this error appears: 'Object' does not contain a definition for 'keys' .
https://drive.google.com/open?id=1gWb6MtqMPPcOdOmLJZbz4TdPmRhCKn6w contains a screenshot of the function generating the msg

