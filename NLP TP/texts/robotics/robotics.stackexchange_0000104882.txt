Q:

End effector velocity control of a 6-DOF robotic manipulator using MPC

I've been trying to utilize Model Predictive Control (MPC) scheme that I have for end-effector position reference $x(t)$ tracking control to build end-effector velocity reference $\dot{x}(t)$ tracking. Hopefully, I can design a smooth velocity reference profile from the positions reference profile so that I CAN ACHIEVE BOTH POSITION AND VELOCITY REFERENCE TRACKING.
Let me first describe how I think the MPC should be formulated to achieve what I want:
Assuming that we have a common 6-DOF robot manipulator without any redundancy (e.g., 6-joints cobot), and there is a way to calculate inverse of its Jacobian matrix $J^{-1}(q_t)$. Then, from end-effector velocity reference profile $\dot{x}(t)$, we can calculate desired joint velocities $\dot{q_t} = J^{-1}(q_t)\dot{x_t}$.
A system of equation is as following:
$\dot{q}_{t+1} = \dot{q_t} + \Delta_t a_t$ = $A\dot{q_t} + B\Delta_t a_t$
From here, we can formulate the MPC problem as:
$min_{a_0,...a_{N-1}} {J = \sum_{t=1}^{N}||\dot{q_t} - \dot{q_g}||^2_{Q} + ||\dot{q_N} - \dot{q_g}||^2_{P}}_{} + ||a_t||^2_R$
$s.t. \dot{q}_{t+1} = A\dot{q_t} + B\Delta_t a_t$
$\dot{q}_{min} \leq \dot{q}_t \leq \dot{q}_{max}$, $\dot{q}_0$ given
Now, the question is: how am I supposed to put joint angle limits instead joint acceleration limits ($a_{lim}$) in the optimization problem above (OEM provides only the joint angle and velocity limits)?
I was thinking of using Quadratic Programming (QP), as the problem looks like a strictly convex optimization. But there is no place to put the angle limits as parameters in QP (may be these limits cannot be expressed as linear constraints). I appreciate it if anyone could provide me some advices and/or references.

A:

$\ddot q$ equals $a$? Then augment your states with the joint positions, change the equality constraints to a double-integrating dynamic system from $\ddot q$->$\dot q$->$q$  and add simple linear inequality constraints on q.
Wouldn't that solve your problem?

