Q:

Traveled Distance measurement

Hi !
I would like to measure the total distance the Turtlebot traveled while navigating. So I was wondering if there was a way to get this information from the odometry sensors ?

Originally posted by Lucile on ROS Answers with karma: 318 on 2013-07-04
Post score: 4

A:

You can subscribe to the publication of the pose topic and store each publication in a pose array, for example. Then you can process that array to sum the distances between each reading.
float path_length = 0.0;
std::vector<geometry_msgs::PoseStamped>::iterator it = plan.poses.begin();
geometry_msgs::PoseStamped last_pose;
last_pose = *it;
it++;
for (; it!=plan.poses.end(); ++it) {
   path_length += hypot(  (*it).pose.position.x - last_pose.pose.position.x, 
                         (*it).pose.position.y - last_pose.pose.position.y );
   last_pose = *it;
}
ROS_INFO("... path length: %6.3f", path_length);

source of this code
you can do the same with the odometry publications, but you may have an accumulated error there.

Originally posted by Procópio with karma: 4402 on 2013-07-05
This answer was ACCEPTED on the original site
Post score: 9

Original comments
Comment by Lucile on 2013-07-05:
Yes, I thought about this solution :) But I hoped there was a way to get the data from wheels' odometry and that I just didn't find it. I'll do it like this then. Thanks.
Comment by Procópio on 2013-07-05:
you can do that, but you will have errors due to slippage, sensors, and others... if you want to try you have to find out what program is publishing the turtlebot odom, because it must access your sensors readings to build the message, so you can get those readings too and try to integrate them.
Comment by Wentao on 2017-10-31:
Hi, I have one question about what you said. I make sense the code you post, but how can calculate it in Matlab environment. Is there any easier way. Thanks.

