Q:

topic_tools transform from launch file?

Is topic_tools transform incapable of being run from a launch file?  Maybe it has a non-standard parser for getting the python imports, and can't handle __ arguments properly?
<?xml version="1.0"?>
<launch>
  <node name="radius" pkg="rostopic" type="rostopic"
      args="pub /radius std_msgs/Float32 'data: 1.0' -r 1" />

  <node name="radius_to_diameter" pkg="topic_tools" type="transform"
      args="/radius /diameter std_msgs/Float32 'm.data * 2'" />
</launch>

Fails with:
process[radius-1]: started with pid [26144]
process[radius_to_diameter-2]: started with pid [26150]
usage: transform [-h] [-i MODULES [MODULES ...]]
                 input output_topic output_type expression
transform: error: unrecognized arguments: __name:=radius_to_diameter __log:=/home/lucasw/.ros/log/.../radius_to_diameter-2.log
[radius_to_diameter-2] process has died [pid 26150, exit code 2, cmd /opt/ros/indigo/lib/topic_tools/transform /radius /diameter std_msgs/Float32 m.data * 2 __name:=radius_to_diameter __log:=/home/lucasw/.ros/log/.../radius_to_diameter-2.log].

While
rosrun topic_tools transform /radius /diameter std_msgs/Float32 'm.data * 2'

works as expected.

Originally posted by lucasw on ROS Answers with karma: 8729 on 2015-07-21
Post score: 1

A:

It looks it's missing a call to rospy.myargv to strip all the extra stuff before trying to parse the args. File an issue against ros_comm (or better yet, a pull request).

Originally posted by Dan Lazewatsky with karma: 9115 on 2015-07-22
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by lucasw on 2015-07-22:
I'll do that.
Comment by lucasw on 2015-07-24:
https://github.com/ros/ros_comm/pull/645
Comment by Kansai on 2021-04-14:
so what is the correct way now?
Comment by lucasw on 2021-09-26:
@Kansai the launch file example in the question now works

