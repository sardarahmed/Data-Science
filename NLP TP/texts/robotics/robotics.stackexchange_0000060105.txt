Q:

ROS Answers SE migration: GPS in EKF

I'm using hector GPS in my robot.
I followed the instructions to introduce it in the EKF (robot_pose_ekf). However, the estimated pose is much worse taking the gps into account than that obtained ignoring it.
I think that the problem comes from de gps I am using because when I move the robot around it accumulates an error which never disappears. My GPS is Hector gps

Originally posted by arenillas on ROS Answers with karma: 223 on 2014-06-16
Post score: 0

A:

Integration of GPS with robot_pose_ekf proved to be difficult for me when I tried it as well. Someone may have a good answer for you, but if it proves too difficult, I recently released the robot_localization package, which contains both an EKF localization node and a UTM transform node. The former can be used in place of robot_pose_ekf, and the latter allows for integration of GPS data. The tutorials page contains a tutorial that details how to integrate a GPS sensor.

Originally posted by Tom Moore with karma: 13689 on 2014-06-16
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by arenillas on 2014-06-18:
I have taken a look to it and I thinks it is great. I received an error which I couldn't identify
Comment by arenillas on 2014-06-18:
[ERROR] [1403082870.757635304, 20.409000000]: Odometry pose transform error: Lookup would require extrapolation into the future.  Requested time 20.409000000 but the latest data is at time 20.402000000, when looking up transform from frame [base_footprint] to frame [base_link]
Comment by Tom Moore on 2014-06-18:
Does that error happen repeatedly, or does it happen just once or twice and then stop? Which node is reporting the error?
Comment by arenillas on 2014-06-27:
Sorry about the delay, but I was working in another project these days.
The ekf_localization_node generates the error continously.
Comment by Tom Moore on 2014-06-28:
Are all the messages originating on the same machine? At what rate is your base_link->base_footprint transform being broadcast?
Feel free to send me an e-mail (see my GitHub page). I may have to have a look at your bag file and then we can update this question when we figure out the issue.

