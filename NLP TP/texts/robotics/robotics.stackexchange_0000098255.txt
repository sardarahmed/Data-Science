Q:

How to Run ros2 launch file using service file

Hi,
I am trying to run launch file in ros2 using service file but I am unable to do it.
[Unit]
After=network-online.target
Description=desc

[Service]
Environment=source home/$USER/dev_ws/install/setup.bash
ExecStart=ros2 launch topics topic.launch.py
RemainAfterExit=no
Restart=on-failure
RestartSec=2s

[Install]
WantedBy=user.target

This is the error I am getting
Invalid environment assignment, ignoring: source
Feb 09 09:59:54 USER-pc systemd[1]: /etc/systemd/system/name.service:6: Invalid environment assignment, ignoring: home/USER/dev_ws/install/setup.bash
Feb 09 09:59:54 USER-pc systemd[1]: /etc/systemd/system/name.service:7: Executable "ros2" not found in path "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

Can anyone please helpme

Originally posted by Flash on ROS Answers with karma: 126 on 2021-02-09
Post score: 1

A:

I was able to resolve this issue by sourcing and running the launch file by using /bin/bash -c
ExecStart=/bin/bash -c 'source /opt/ros/foxy/setup.bash; source home/$USER/dev_ws/install/setup.bash; ros2 launch pkg_name launch_file_name.launch.py; sleep 60'

Originally posted by Flash with karma: 126 on 2021-03-25
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by robopo on 2021-11-23:
Hi there, why do you have sleep 60? How is this important? Some sort of protection?
Comment by Flash on 2021-11-23:
not that necessary, just gave it 60 sec before it starts again. If you have any other processes that need to close before you restart this might be a good option.

