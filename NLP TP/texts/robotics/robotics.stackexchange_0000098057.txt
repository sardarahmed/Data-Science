Q:

Robot_localization services /toLL and /fromLL respond with different result

I am using the robot_localization package and in the terminal, I run the services /fromLL and /toLL for the same position. But the results do not agree.
Specifically, running:
rosservice call /robot/fromLL "ll_point:
  latitude: 40.5665059791
  longitude: 22.9989873398
  altitude: 122.0"

returns:
map_point: 
  x: 140892.72962
  y: 5405179.36945
  z: 0.0

And when I run:
rosservice call /robot/toLL "map_point:
  x: 0.0
  y: 0.0
  z: 0.0"

I get
ll_point: 
  latitude: 40.5665059791
  longitude: 22.9989873398
  altitude: 122.375866815

which is the same position as the first one.
I believe that this is not normal, but why is this happening?

Originally posted by kosmastsk on ROS Answers with karma: 210 on 2021-01-14
Post score: 0

Original comments
Comment by Akhil Kurup on 2021-01-14:
Are your frame_id's the same? If the map point is in a different frame, you will have to do a tf_lookup and transform the point before using it.
Comment by kosmastsk on 2021-01-14:
I am running these services through the terminal, when running the node, so there is not a way to define in which frame each point is. For the first case, fromLL in what frame are we expecting the result to be for example?
Comment by Tom Moore on 2021-01-25:
I'm guessing that first LL position that you used in the service call was not random. Where did you get it?
Comment by kosmastsk on 2021-01-25:
Yes, it was the current Lat/Long of the robot. If I'm not wrong there was a UTM->map transform at that time, using the navsat_transform.
Comment by Tom Moore on 2021-01-29:
Can I ask what version you're using?
Comment by kosmastsk on 2021-01-29:
I am on ROS melodic and robot_localization has been installed using apt-get. Version 2.6.9 as mentioned in the package.xml file
Comment by Tom Moore on 2021-01-29:
Can you please head over to the GH repo and repost this as an issue, and please include your full config file, as well as maybe a bag?

A:

That's a bug. This line has the cartesian_x and cartesian_y parameters backwards (cartesian_y should come first). Please file a ticket and I'll fix it. Thank you!

Originally posted by Tom Moore with karma: 13689 on 2021-01-29
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by kosmastsk on 2021-01-29:
Alright, I will file an issue asap. Thanks a lot!

