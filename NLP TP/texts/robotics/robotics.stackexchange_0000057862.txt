Q:

Setting robot orientation

Hello all,
I have 2 robots erratic robots in gazebo and I want them to have approximately the same orientation. I am trying following piece of code but it doesn't seem to have any effect on my robot's rotation.
tf::TransformListener listener;
    tf::StampedTransform transform;
    try {

        listener.waitForTransform("/odom", "/base_link", ros::Time(0),
                ros::Duration(3.0));
        listener.lookupTransform("/odom", "/base_link", ros::Time(0),
                transform);
    } catch (tf::TransformException ex) {
        ROS_ERROR("%s", ex.what());
    }

    tf::Quaternion rotation;
    rotation.setValue(robot2.orientation.x, robot2.orientation.y, robot2.orientation.z);
    transform.setRotation(rotation);

Originally posted by SpiderRico on ROS Answers with karma: 35 on 2014-03-12
Post score: 0

Original comments
Comment by jbinney on 2014-03-12:
What do you mean "doesn't seem to be working"? Does it give a compilation error? Does the pose end up in the wrong place? How are you sending these transforms to gazebo?
Comment by SpiderRico on 2014-03-12:
Updated my question. Hope it's more clear now.
Comment by atp on 2014-03-12:
I think that you have to broadcast the transform again. Have a look at the "Writing a tf broadcaster" tutorial.
Comment by SpiderRico on 2014-03-12:
@atp How did I miss that! It helped me a lot. If you  add this as  an answer, I'll accept it mate. Thank you!

A:

As atp suggested following this tutorial solved my problem:

Originally posted by SpiderRico with karma: 35 on 2014-03-18
This answer was ACCEPTED on the original site
Post score: 0

