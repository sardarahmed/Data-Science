Q:

Redeclare loop_rate depending on boolean

Given this example, in which I want to decide via if which loop_rate to use when spinning
      if(my_bool)  ros::Rate loop_rate(100); //Hz
      else ros::Rate loop_rate(10);
                
   //thread safe regular mutex spin
    mtx_spin.lock();
    ros::spinOnce();
    mtx_spin.unlock();
    loop_rate.sleep();

The compiler complains about rate not declared, as it is out of scope. But I need the if to decide which rate to get.

Originally posted by user23fj239 on ROS Answers with karma: 748 on 2016-02-14
Post score: 0

A:

I had to move on out of the if and redeclare by  loop_rate(double frequency), but with ros::Rate in front:
    ros::Rate loop_rate(rate_eff[type-1]/2+1);
    if(use_def) ros::Rate loop_rate(100);

Originally posted by user23fj239 with karma: 748 on 2016-02-14
This answer was ACCEPTED on the original site
Post score: 0

