Q:

How to pass an argument to roslaunch file from shell script?

I have a shell script that takes some input from the user in the form of arguments and executes a launch file with some nodes. One of these nodes is a rosbag record. Currently, I have hardcoded the output directory for the recorded bag, but I'd like to parametrize this and let the user decide where to store the folder from the shell script.
I start the node like this at the moment:
<node pkg="rosbag" type="record" name="record" output="screen" args="-o /home/output/output_name -e /myTopic"/>
I cannot figure out how to to pass this args from a shell script. Any ideas? it should be possible...

Originally posted by lapadets on ROS Answers with karma: 5 on 2015-06-11
Post score: 0

A:

Use arg element in launch syntax. http://wiki.ros.org/roslaunch/XML/arg
An example can look like:
rosbag_record.launch:
<launch>
  <arg name="hoge" default="fuga" />
  <node pkg="rosbag" type="record" name="record" output="screen" args="-o $(arg hoge) -e /myTopic"/>
</launch>

top_level.launch:
<launch>
  <arg name="hoge" default="fuga" />
  <include file="rosbag_record.launch">
    <arg name="hoge" value="$(arg hoge)" />
  </include>
</launch>

And you can run
roslaunch top_level.launch hoge:=my_value

Originally posted by 130s with karma: 10937 on 2015-06-11
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by lapadets on 2015-06-11:
But do you need to have the <arg> in both launch files? So myScript.sh runstop_level.launch, which contains rosbag_record.launch. Or the  tag is in the top_level, while the  tag is in the other launcher? or?
Comment by 130s on 2015-06-11:
@lapadets sorry, my sample was completely wrong. Now it's corrected with the file structures you provided in addition.
Comment by lapadets on 2015-06-11:
Thanks! that's way more clear now!

