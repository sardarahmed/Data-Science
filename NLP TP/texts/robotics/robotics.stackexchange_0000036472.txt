Q:

How to add a torque sensor to a 4-wheeled robot?

Can someone point me in the right direction as to how to add torque sensors (or get torque feedback) to each wheel of a robot?

Originally posted by jimmycuff on ROS Answers with karma: 58 on 2011-12-13
Post score: 0

A:

Give this file a look. It is a good example of how to get a joint's commanded effort (aka torque).
Just note, instead of:
joint_state_blw_->position_; 

Use:
joint_state_blw_->commanded_effort_;

EDIT: The reason that I suggested using the pr2_controller_interface is that it's what provides a ROS API to Gazebo. By default, ROS has no access to Gazebo joint information. It's the pr2_controllers that allow us to obtain information and publish messages to Gazebo. By adding such a controller to your robot, you're able to monitor the joints in real time (with respect to Gazebo).
You could always try subscribing to /joint_states instead, but I don't know if that will provide the information that you require.

Originally posted by DimitriProsser with karma: 11163 on 2011-12-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jimmycuff on 2011-12-16:
I feel like there should be a more straightforward way... a simple function call to get joint commanded effort from within this file.
Comment by jimmycuff on 2011-12-16:
Is there any other way without inheriting from pr2_controller_interface?  I'm actually starting with the first link you sent: http://ua-ros-pkg.googlecode.com/svn/stacks/erratic_robot/trunk/erratic_gazebo_plugins/src/diffdrive_plugin.cpp
Comment by DimitriProsser on 2011-12-14:
Totally my bad. I pasted the wrong link. It should be better now. Sorry about that.
Comment by jimmycuff on 2011-12-14:
I'm not sure I follow.  I don't see anything about joint_state_blw_->position_ or commanded_effor_ in the file.  It looks like the drive controller for the erratic robot that takes in a Twist and converts it to velocity.  Could you expand on your post or point me to the specific function calls?

