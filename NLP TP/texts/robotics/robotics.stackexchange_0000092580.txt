Q:

Autoware Tools - Vector Map Builder: cannot see point cloud file due to RGB value

Hello all,
I am currently trying to build a vector map using Autoware's Vector Map Builder with a .pcd map created with Autoware's ndt_mapping process in ROS Kinetic Autoware version 1.10 (.pcd map attached). When I load the file in to the Vector Map Builder (found here: https://tools.tier4.jp/vector_map_builder/), the points are black and cannot be distinguished from the background well enough to create a vector map.
When I created the map file with ndt_mapping I used the generic settings and when I tried to edit the RGB value in CloudCompare, the program seems to split it up by RGB value (despite the fact that I changed the value from black to white) - see images at Google drive link below.
Bag file, .pcd map, 2x screenshots of vector map builder: https://drive.google.com/drive/folders/1cB9VFKsMft25-4zEtctzixZyZNPn5otO?usp=sharing
Black PCD
RGB split PCD
Do I need to do something special during the .pcd file creation step with ndt_mapping? Is there a way to convert the file from black RGB to something lighter in order to use it to create a vector map in Autoware?
Thank you!

Originally posted by bcopenha on ROS Answers with karma: 15 on 2019-07-16
Post score: 0

Original comments
Comment by jayess on 2019-07-18:
Can you please update your question with the images attached directly to the question?
Comment by bcopenha on 2019-07-18:
Sure! (first time didn't want to upload so I went for Google Drive)

A:

Current Vector Map Builder seems to have trouble rendering .pcd map in ASCII format, but ndt_mapping exports pcd map in ASCII format.
(FYI, you can check it by running $ head -n 11 autoware-190703-2.pcd and you should see DATA ascii in the output.)
In order to convert it to binary format, you can run following commands:
$ sudo apt install pcl-tools 
$ pcl_convert_pcd_ascii_binary autoware-190703-2.pcd bin-autoware-190703-2.pcd 1

Now you should have bin-autoware-190703-2.pcd which is in binary format, and Vector Map Builder should be able to render this pcd with lighter color.

Originally posted by mitsudome-r with karma: 231 on 2019-07-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by bcopenha on 2019-07-18:
This worked! Thank you for your help!
Just to put it out there for anyone else needing help on this subject: approximate_ndt_mapping outputs binary files and thus will work in Vector Map Builder out of the box. (This would be more useful if the fix from mitsudome-r wasn't so simple and easy to use!)

