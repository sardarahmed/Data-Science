Q:

Right value of magnetic_declination_radians

Hi, I am trying to configure a dual EKF plus navsat_transform setup for robot_localization and I am not sure of how to input the value of magnetic_declination_radians.
Magnetic declination for the place I live is  -9Â° 16' (W) and the webpage I am using says: "Declination is NEGATIVE (WEST)". So, the value of the magnetic_declination_radians parameter should be -0.152425 or should I use the negative value of 0.152425?
Thanks in advance!

Originally posted by gmsanchez on ROS Answers with karma: 13 on 2021-06-18
Post score: 0

A:

It's confusing, and I need to update the documentation, but everything is calculated in the ENU frame for navsat_transform_node. So a western declination (counter-clockwise) would be positive. In your case, you'd want 0.152425.

Originally posted by Tom Moore with karma: 13689 on 2022-02-25
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gmsanchez on 2022-10-28:
Thanks Tom for the answer.
If the declination is around 0.152425 radians, would you expect that the EKF yaw to have a 0.152425 offset relative to the IMU yaw?
I am still struggling with these concepts and I hope to get robot_localization working outdoors soon. What kind of error would you expect using an Ardusimple RTK GPS (cm accuracy) with an XSens MTi-630 IMU? I calibrated the IMU but I can't get repeatability on the results.
Comment by Tom Moore on 2023-01-05:
No, declination has nothing to do with the EKF. It's solely a concept that applies to navsat_transform_node. It's just used to correct your raw IMU data (which points to magnetic north, and not true north) in navsat_transform_node. The EKF's heading is utterly independent of anything in navsat_transform_node. In fact, your EKF might not even fuse IMU data. It might just fuse yaw velocity from your wheel encoders.

