Q:

How to play a /joint_state bag file

I recorded a joint_state bag file and I want to replay the same motion as the one recorded. Is it possible? and how would you do that?

Originally posted by mamoun on ROS Answers with karma: 1 on 2012-06-26
Post score: 0

Original comments
Comment by Lorenz on 2012-06-26:
What do you mean with replay? Do you just want to play back the bag (rosbag play) or do you want your robot to execute the same trajectory?
Comment by mamoun on 2012-06-26:
to execute the same trajectory

A:

I don't know of any way to re-play a trajectory that has been recorded out of the box. That problem is actually highly robot-specific anyway since at least on the PR2, the joint_state topic contains basically all encoder values of the robot. This includes the position of both arms, the head and the wheels.
However, it should be doable with a little bit of work. First, do a rosbag record /joint_states. Then, I would use the rosbag C++ or Python API to read the data and generate goals for the different robot controllers. For the arms, you can generate joint_trajectory action goals and send them to the corresonding arm controllers. See this tutorial. For the head, you probably have to define your own joint_trajectory_controller that just controls the pan and tilt joints. After building up the joint_trajectory_messages, just send the goals at the same time to the action servers. Subsequent calls do the different action client's send_goal methods should be fine there.

Originally posted by Lorenz with karma: 22731 on 2012-06-27
This answer was ACCEPTED on the original site
Post score: 3

