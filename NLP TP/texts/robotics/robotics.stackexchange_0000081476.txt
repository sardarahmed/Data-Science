Q:

plotting real time data

I want process the data from some ros nodes and make a real time plot, preferably using matplotlib. What is the easiest way to do this?
For example if I would like plot the average of two values in the ros network, or add a legend to the plot. I know about rqt_plot, but its usefulness is very limited since it can only plot already defined messages.. and you can't even change the axis limits afaik!
Any tips? The best thing would be if there was a way to continually update a matplotlib figure and have it displayed as the roscore is running.

Originally posted by linusnie on ROS Answers with karma: 98 on 2017-06-26
Post score: 2

Original comments
Comment by lucasw on 2017-06-26:
Take a look at https://github.com/facontidavide/PlotJuggler - I haven't tried it yet but I'd like to hear if it addresses some of your needs.
Comment by Mehdi. on 2017-06-30:
There is an infinity of answers on stackoverflow treating the continuous update of a matplotlib figure.

A:

I ended up doing the following. It works in real time as long as pyplot can keep up with the messages.
#!/usr/bin/env python 
import numpy as np
from matplotlib import pyplot as plt
import rospy
from qualisys.msg import Subject

def plot_x(msg):
    global counter
    if counter % 10 == 0:
        stamp = msg.header.stamp
        time = stamp.secs + stamp.nsecs * 1e-9
        plt.plot(msg.position.y, msg.position.x, '*')
        plt.axis("equal")
        plt.draw()
        plt.pause(0.00000000001)

    counter += 1

if __name__ == '__main__':
    counter = 0

    rospy.init_node("plotter")
    rospy.Subscriber("position_measurements", Subject, plot_x)
    plt.ion()
    plt.show()
    rospy.spin()

Originally posted by linusnie with karma: 98 on 2017-06-30
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by dei on 2021-03-05:
I, ve tried this program, but I have an error
    Traceback (most recent call last):
  File "./subscriber_sniffer.py", line 5, in <module>
    from qualisys.msg import Subject
ImportError: No module named qualisys.msg

Have you got any suggestion?
Comment by shrini96 on 2023-05-21:
Yes, because you do not have probably a ROS package named qualisys. You probably also do not need it because to try this code, you need a node that is publishing messages of the type Subject from this package qualisys. I replaced that line with nav_msgs/Odometry like this:
from nav_msgs.msg import Odometry
This is because the things I want to live plot as are published on the topic /odom of the above mentioned message type. Remeber to also change the position_measurements with your topic name in rospy.Subscriber(...)
Comment by shrini96 on 2023-05-21:
@linusnie the solution works beautifully. Thanks a lot.

