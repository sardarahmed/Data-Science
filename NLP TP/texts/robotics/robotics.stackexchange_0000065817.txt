Q:

Ros Matlab i/o and /tf

Hello everybody,
I try to use the topic /tf in order to obtain the pose of the end-effector of the PR2. Unfortunately I can't subscribe to the topic, I have this error:
>SubTf = rosmatlab.subscriber('/tf', 'tf/tfMessage',100,node);

Error using rosmatlab.node/addSubscriber (line 661)
Java exception occurred:
org.ros.exception.RosMessageRuntimeException: java.lang.ClassNotFoundException: tf.tfMessage
    at org.ros.internal.message.definition.MessageDefinitionReflectionProvider.get(MessageDefinitionReflectionProvider.java:58)
    at org.ros.internal.message.Md5Generator.generate(Md5Generator.java:44)
    at org.ros.internal.message.topic.TopicDescriptionFactory.newFromType(TopicDescriptionFactory.java:36)
    at org.ros.internal.node.DefaultNode.newSubscriber(DefaultNode.java:286)
    at org.ros.internal.node.DefaultNode.newSubscriber(DefaultNode.java:297)
Caused by: java.lang.ClassNotFoundException: tf.tfMessage
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.ros.internal.message.definition.MessageDefinitionReflectionProvider.get(MessageDefinitionReflectionProvider.java:54)
    ... 4 more

Error in rosmatlab.subscriber (line 38)
                sub = node.addSubscriber(topicName,topicMessageType,bufferLimit);

If you have any idea to resolve it, it would be great.

Originally posted by kpax77 on ROS Answers with karma: 36 on 2015-02-13
Post score: 0

Original comments
Comment by Andromeda on 2015-02-18:
did you solve this problem?

A:

I answer my own question. Finally the problem is that tfMessage is not part of the standard roscore distribution. So you have to add it in the ROSMatlab path.
The procedure is the following:

Download the tf.jar here:
https://github.com/rosjava/rosjava_mvn_repo/tree/master/org/ros/rosjava_messages/tf
Don't forget to download it in 'raw'.
Add the jar files to \toolbox\psp\rosmatlab\jars
Edit <\MATLAB>\toolbox\local\classpath.txt by adding the full path to the jar file above the line “# ROS-MATLAB-END”
Restart MATLAB.

And it should work.

Originally posted by kpax77 with karma: 36 on 2015-02-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by kpax77 on 2015-02-27:
And now if you know on an example how to use /tf in order to obtain the position of a joint, don't hesitate.

