Q:

ros publisher not publishing in debug

Hi
I'm running my node in debug (vscode) and getting weird results.
I have a loop which is publishing to a motor
while (std::abs(orientation.roll) > ROLL_FLAT_SURFACE)
{     
    ros::spinOnce();
    bla bla bla

    robotControlPublisher_.publish(motor_cmd_);
    ros::Duration(TIME_TO_SLEEP).sleep();
    
    
}

if I put a breakpoint before and after the loop and run in debug the publisher will publish.
if I stop each iteration the publisher won't publish.
how can I fix it?
Thanks

Originally posted by Nachum on ROS Answers with karma: 208 on 2021-12-22
Post score: 0

Original comments
Comment by Geoff on 2021-12-22:
What do you mean by "stop each iteration"?
Comment by Nachum on 2021-12-23:
put a breakpoint after ros::spinOnce(); press F5 to run to the next breakpoint

A:

The debugger is probably stopping the entire ROS infrastructure in your process before it's had a chance to actually publish your message. ros::spinOnce() only spins the processing loop once, and when that returns and the debugger stops your process, the message might not have made it through the entire publishing process yet.

Originally posted by Geoff with karma: 4203 on 2021-12-23
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Nachum on 2021-12-24:
This command (ros::Duration(TIME_TO_SLEEP).sleep should have helped
Comment by Nachum on 2021-12-24:
TIME_TO_SLEEP =0.1

