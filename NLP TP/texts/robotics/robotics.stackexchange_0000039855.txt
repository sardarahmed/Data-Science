Q:

android_tutorial_teleop null pointer exception on contact

Installing and building rosjava and rosjava.android successful. After installing android_tutorial_teleop to my tablet, I run it and connect to another machine running a roscore. It connects successfully, shows up in the topic list and rxgraph. It handles normal touch events just fine, moving the little triangle around, however when you touch the joystick it throws a null pointer exception. This problem has persisted for me using 3 different machines, over several versions of rosjava.android. Full error is posted below. Has anyone else encountered this issue, or know of any suggestions for debugging? I have tried playing with virtualJoystickView to try to track down what the issue is, but have been unsuccessful.
Full Step:
Follow instructions for installing and Building rosjava_core and android_core
adb install MainActivity-debug.apk
run on tablet, enter ip address for machine with roscore
touch joystick
E/AndroidRuntime( 9030): FATAL EXCEPTION: main
E/AndroidRuntime( 9030): java.lang.NullPointerException
E/AndroidRuntime( 9030):    at org.ros.android.view.VirtualJoystickView.publishVelocity(VirtualJoystickView.java:799)
E/AndroidRuntime( 9030):    at org.ros.android.view.VirtualJoystickView.onContactMove(VirtualJoystickView.java:698)
E/AndroidRuntime( 9030):    at org.ros.android.view.VirtualJoystickView.onTouchEvent(VirtualJoystickView.java:356)
E/AndroidRuntime( 9030):    at android.view.View.dispatchTouchEvent(View.java:5546)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
E/AndroidRuntime( 9030):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1684)
E/AndroidRuntime( 9030):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
E/AndroidRuntime( 9030):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
E/AndroidRuntime( 9030):    at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
E/AndroidRuntime( 9030):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
E/AndroidRuntime( 9030):    at android.view.View.dispatchPointerEvent(View.java:5726)
E/AndroidRuntime( 9030):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
E/AndroidRuntime( 9030):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
E/AndroidRuntime( 9030):    at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
E/AndroidRuntime( 9030):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
E/AndroidRuntime( 9030):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 9030):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 9030):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime( 9030):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 9030):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 9030):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime( 9030):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime( 9030):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  191):   Force finishing activity org.ros.android.android_tutorial_teleop/.MainActivity
W/dalvikvm( 9030): threadid=33: thread exiting with uncaught exception (group=0x40a431f8)
I/Process ( 9030): Sending signal. PID: 9030 SIG: 9
W/InputDispatcher(  191): channel '410df368 org.ros.android.android_tutorial_teleop/org.ros.android.android_tutorial_teleop.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher(  191): channel '410df368 org.ros.android.android_tutorial_teleop/org.ros.android.android_tutorial_teleop.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
I/WindowManager(  191): WIN DEATH: Window{4159a1b8 SurfaceView paused=false}
W/InputDispatcher(  191): Attempted to unregister already unregistered input channel '410df368 org.ros.android.android_tutorial_teleop/org.ros.android.android_tutorial_teleop.MainActivity (server)'
D/WindowManager(  191): adjustConfigurationLw, config:{0.85 0mcc0mnc (no locale) layoutdir=0 sw800dp w1280dp h752dp xlrg land ?uimode ?night finger -keyb/v/h -nav/v} mLidOpen:-1 mHasDockFeature:true mHasHallSensorFeature:true config.hardKeyboardHidden:2
I/WindowManager(  191): WIN DEATH: Window{410df368 org.ros.android.android_tutorial_teleop/org.ros.android.android_tutorial_teleop.MainActivity paused=true}
I/WindowManager(  191): WINDOW DIED Window{410df368 org.ros.android.android_tutorial_teleop/org.ros.android.android_tutorial_teleop.MainActivity paused=true}
W/ActivityManager(  191): Exception thrown during pause
W/ActivityManager(  191): android.os.DeadObjectException
W/ActivityManager(  191):   at android.os.BinderProxy.transact(Native Method)
W/ActivityManager(  191):   at android.app.ApplicationThreadProxy.schedulePauseActivity(ApplicationThreadNative.java:572)
W/ActivityManager(  191):   at com.android.server.am.ActivityStack.startPausingLocked(ActivityStack.java:859)
W/ActivityManager(  191):   at com.android.server.am.ActivityStack.finishActivityLocked(ActivityStack.java:3465)
W/ActivityManager(  191):   at com.android.server.am.ActivityManagerService.handleAppCrashLocked(ActivityManagerService.java:7162)
W/ActivityManager(  191):   at com.android.server.am.ActivityManagerService.makeAppCrashingLocked(ActivityManagerService.java:7052)
W/ActivityManager(  191):   at com.android.server.am.ActivityManagerService.crashApplication(ActivityManagerService.java:7714)
W/ActivityManager(  191):   at com.android.server.am.ActivityManagerService.handleApplicationCrash(ActivityManagerService.java:7273)
W/ActivityManager(  191):   at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:1054)
W/ActivityManager(  191):   at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1553)
W/ActivityManager(  191):   at android.os.Binder.execTransact(Binder.java:338)
W/ActivityManager(  191):   at dalvik.system.NativeStart.run(Native Method)
I/ActivityManager(  191): Process org.ros.android.android_tutorial_teleop (pid 9030) has died.
W/ActivityManager(  191): Scheduling restart of crashed service org.ros.android.android_tutorial_teleop/org.ros.android.NodeMainExecutorService in 5000ms

Originally posted by Jyo on ROS Answers with karma: 100 on 2012-04-24
Post score: 1

A:

I had same problem in the tutorial.
I guess...
A Message "currentVelocityCommand" for the virtual joystick isn't initialized and remains as Null.
I fix it. Add this line.
" currentVelocityCommand =publisher.newMessage();"

Originally posted by roro with karma: 16 on 2012-05-04
This answer was ACCEPTED on the original site
Post score: 0

