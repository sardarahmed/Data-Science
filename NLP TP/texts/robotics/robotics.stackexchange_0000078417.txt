Q:

distortion model depth camera

Hi everyone,
i'm using rtabmap with his ros wrapper  for slam operations. i've made a distortion model (a ".bin" file) following this guide https://github.com/introlab/rtabmap/wiki/Depth-Calibration but i don't know how to use the distortion model with the ros wrapper of rtabmap. the calibration tutorial show where to link the distortion model file in the standalone application only.
thanks in advance
Andrea Ruzzenenti

Originally posted by aerydna on ROS Answers with karma: 51 on 2017-01-18
Post score: 0

A:

EDIT: there is already a nodelet existing in rtabmap_ros source doing the work below, see this link.
Hi,
Unfortunatly, since this feature is quite new, there is no existing node yet that can distort the depth image using the distortion model.
You may create one by subscribing to depth image and loading the *.bin generated by the standalone.
#include "rtabmap/core/clams/discrete_depth_distortion_model.h"

clams::DiscreteDepthDistortionModel model;

void init(const std::string & modelPath) {
    model.load(modelPath);
    if(!model.isValid())
    {
        ROS_ERROR("Loaded distortion model \"%s\" is not valid!", modelPath.c_str());
    }
}

void callback(...) {
   cv::Mat depth = //... (cv_bridge subscription to depth msg)
   model.undistort(depth);
   // ... republish the depth undistorted
}

cheers

Originally posted by matlabbe with karma: 6409 on 2017-01-27
This answer was ACCEPTED on the original site
Post score: 0

