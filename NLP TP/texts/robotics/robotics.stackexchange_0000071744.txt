Q:

RViz Crashes with Out of Memory Exception

I am repeatedly publishing Markers and MarkerArrays to RViz and then, randomly, this error occurs.
Does anyone know what might be causing this?
I am running RViz from inside a docker container using the X11 server of my Ubuntu 12.04 host. The docker container is running ROS Jade and Ubuntu 14.04. RViz reports the OpenGL version as 4.5.
[ WARN] [1454370341.533289122]: OGRE EXCEPTION(7:InternalErrorException): Index Buffer: Out of memory in GLHardwareIndexBuffer::lock at /build/buildd/ogre-1.8-1.8.1+dfsg/RenderSystems/GL/src/OgreGLHardwareIndexBuffer.cpp (line 121)
Qt has caught an exception thrown from an event handler. Throwing
exceptions from an event handler is not supported in Qt. You must
reimplement QApplication::notify() and catch all exceptions there.

terminate called after throwing an instance of 'Ogre::InternalErrorException'
  what():  OGRE EXCEPTION(7:InternalErrorException): Index Buffer: Out of memory in GLHardwareIndexBuffer::lock at /build/buildd/ogre-1.8-1.8.1+dfsg/RenderSystems/GL/src/OgreGLHardwareIndexBuffer.cpp (line 121)
bash: line 1:  2140 Aborted                 (core dumped) rosrun rviz rviz --no-stereo -d /home/bidski/catkin_ws/src/structure_modeller/structure_modeller.rviz

Originally posted by Bidski on ROS Answers with karma: 96 on 2016-02-01
Post score: 0

Original comments
Comment by Javier V. GÃ³mez on 2016-02-02:
Are you properly publishing the markers? That is, deleting/rewriting them ?
Comment by Bidski on 2016-02-02:
Does publishing a marker with the same namespace and id not overwrite the previous one?
Comment by ahendrix on 2016-03-05:
How much memory do you have? Have you checked that your machine still has free RAM when rviz crashes?

A:

Does this error appear during the starting rviz, or well after its running?
Is this an issue that --env="QT_X11_NO_MITSHM=1" would solve?
See the end of this ros wiki tutorial:
wiki.ros.org/docker/Tutorials/GUI
The other thing, how are you enabling hardware acceleration for opengl in the container?
I've only been able to install the graphics driver in the image, and mount the GPU devices to the container to get dedicated hardware to work. I though I got away without this if my machine was using an integrated graphics instead.
More on those topics:
wiki.ros.org/docker/Tutorials/Hardware%20Acceleration
github.com/NVIDIA/nvidia-docker/issues/11

Originally posted by ruffsl with karma: 1094 on 2016-03-05
This answer was ACCEPTED on the original site
Post score: 0

