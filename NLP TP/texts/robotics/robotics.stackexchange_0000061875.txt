Q:

TF message visible in "rostopic echo /tf" but not in Rviz and tf_monitor

We are using our own implementation to publish a tfMessage type through rosjava.
In the simplest test I can see the message with the command rostopic echo /tf as:
transforms: 
  - 
    header: 
      seq: 567527
      stamp: 
        secs: 567
        nsecs: 526999929
      frame_id: map
    child_frame_id: robot
    transform: 
      translation: 
        x: 0.0
        y: 0.0
        z: 0.0
      rotation: 
        x: 0.0
        y: 0.0
        z: 0.0
        w: 1.0
While this looks fine, the command rosrun tf tf_monitor shows no frames, rosrun tf tf_echo map robot is unable to return the transform (empty list of current frames), and rviz does not find any frames.
The command rosrun tf view_frames generates this visualization.
The data is coming from a simulator where I publish the /tf message and the /clock. The tf message time stamp equals the current simulation time in /clock. The parameter use_sim_time is set to true.
Interestingly, recording and playing a rosbag with the topics /tf and /clock works, and the /tf transformation shows up correctly in tf_monitor and rviz.
My setup is ROS Indigo on Ubuntu 14.04.
Does anybody has an idea on how to debug this behaviour to figure out what's going wrong? Any suggestions welcome. Thank you!

Originally posted by Péter Fankhauser on ROS Answers with karma: 18 on 2014-08-15
Post score: 0

Original comments
Comment by bvbdort on 2014-08-15:
can you share you frame.pdf from rosrun tf view_frames
Comment by Péter Fankhauser on 2014-08-15:
I have added the view_frames visualization: http://cl.ly/image/08443o3G0G2J
Comment by bvbdort on 2014-08-16:
I see some problem with timestamp, you can see tf is 74.913 seconds old while you are publishing 1000hz.
Comment by jwhendy on 2017-07-05:
related/same: http://answers.ros.org/question/265441/tf_echo-is-correct-yet-no-result-from-lookuptranform/
Comment by jwhendy on 2017-07-05:
related/same: http://answers.ros.org/question/231914/tf_echo-can-find-transform-but-waitfortransform-cant/

A:

The message type for the /tf topic changed when the backend was switched to tf2 in Hydro.
Are you publishing a tf2_msgs/TFMessage or the older tf/tfMessage ?

Originally posted by ahendrix with karma: 47576 on 2014-08-15
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Péter Fankhauser on 2014-08-19:
This was it, thank you for the tip, Austin!
Comment by kuma3y1t@gmail.com on 2022-09-26:
How did you fix it?

