Q:

AMCL odometry and drift question

I'm using AMCL and it does a good job of estimating my position and accounting for drift, looking at the particles cloud.  The odometry is periodically updated from AMCL but then reverts back to the drifted solution.  Am I supposed to subscribe to amcl_pose and update my odometry node? or something else?

Originally posted by jseal on ROS Answers with karma: 258 on 2014-09-09
Post score: 0

Original comments
Comment by Sebastian Kasperski on 2014-09-10:
amcl_pose should contain the robots position in the map. So you have to subscribe to this or to tf and get the 'map' -> 'robot' transform. What do you mean with updating the odometry node?
Comment by jseal on 2014-09-10:
My odometry node publishes a transform from base_link to odom, which is still being updated from the drifted odometry.  It also publishes a static transform from odom to map.

A:

Ah okay, then this is the problem. You have to remove this static transform from map -> odom, because this will be provided by amcl. If two nodes publish the same transformation, you get this "jumping" behaviour between your amcl and the static transform.

Originally posted by Sebastian Kasperski with karma: 1658 on 2014-09-11
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by jseal on 2014-09-11:
Thanks Sebastian, that fixed it.

