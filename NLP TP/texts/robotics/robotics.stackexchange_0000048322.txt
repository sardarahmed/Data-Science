Q:

ROS PCL crashing

I am just trying to run pcd_viewer but things crash. Both in Groovy and Fuerte.
However, I just install libpcl, then run /usr/bin/pcd_viewer, things just work.
I would really want to just use version in ROS but it is crashing on these machines.
$ /opt/ros/fuerte/bin/pcd_viewer training/scissors_1_2_100.pcd
The viewer window provides interactive commands; for help, press 'h' or 'H' from within the window.
> Loading training/scissors_1_2_100.pcd [done, 303 ms : 2362 points]
Available dimensions: x y z rgb imX imY
Illegal instruction (core dumped)
$ /opt/ros/groovy/bin/pcd_viewer training/scissors_1_2_100.pcd
The viewer window provides interactive commands; for help, press 'h' or 'H' from within the window.
> Loading training/scissors_1_2_100.pcd [done, 320 ms : 2362 points]
Available dimensions: x y z rgb imX imY
Illegal instruction (core dumped)

(gdb) thread apply all bt

Thread 1 (Thread 0x7ffff7fa7840 (LWP 5259)):
#0  0x00007ffff74886a5 in pcl::visualization::PointCloudColorHandlerRandom<sensor_msgs::PointCloud2_<std::allocator<void> > >::getColor(vtkSmartPointer<vtkDataArray>&) const () from /opt/ros/fuerte/lib/libpcl_visualization.so.1.5
#1  0x00007ffff7495963 in pcl::visualization::PCLVisualizer::fromHandlersToScreen(boost::shared_ptr<pcl::visualization::PointCloudGeometryHandler<sensor_msgs::PointCloud2_<std::allocator<void> > > const> const&, boost::shared_ptr<pcl::visualization::PointCloudColorHandler<sensor_msgs::PointCloud2_<std::allocator<void> > > const> const&, std::string const&, int, 
Eigen::Matrix<float, 4, 1, 0, 4, 1> const&, Eigen::Quaternion<float, 0> const&) ()

 from /opt/ros/fuerte/lib/libpcl_visualization.so.1.5
#2  0x000000000041382b in main ()

Here is my CPU info.
model name      : Intel(R) Core(TM)2 CPU          6400  @ 2.13GHz
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx lm constant_tsc arch_perfmon pebs bts nopl aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm lahf_lm dtherm tpr_shadow

Originally posted by jys on ROS Answers with karma: 212 on 2013-02-14
Post score: 3

Original comments
Comment by karthik on 2013-02-21:
could you try with anyother pcd file which has just x, y, z?
Comment by jys on 2013-02-21:
tried whole lot of PCD files but didn't help at all. Problem is that it works fine when I use standalone PCL not ROS PCL.
Comment by sai on 2013-05-19:
I am not sure but if you want this to work with ROS , you have to change some settings in CMakeLists.txt like ROS is ON  for PCL or something, then compile, pls correct me if i m wrong
Comment by jys on 2013-05-20:
can you be more specific? what and how do I change the setting?

A:

PCL can be linked to ROS as an external library with visualizations running too.
I guess that you have problem with the VTK visualization library.
First try this,
Add these in CMakeLists of your ROS PACKAGE
include_directories(/usr/include/vtk-5.8)
target_link_libraries(pcl_viz ${PCL_LIBRARIES} libvtkCommon.so libvtkFiltering.so libvtkRendering.so)
Here pcl_viz is the executable..
Next you can through the small tips at this link
https://dl.dropboxusercontent.com/u/95042389/Must%20read%20for%20PCL%20and%20ROS%20integration

Originally posted by sai with karma: 1935 on 2013-05-20
This answer was ACCEPTED on the original site
Post score: 0

