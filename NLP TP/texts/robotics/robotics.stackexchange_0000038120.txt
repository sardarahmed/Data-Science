Q:

transform from /base_link to /map

Hi,
I was following the navigation tutorials. I have a map already, now I'm starting map_server and amcl as described in the tutorials but I'm getting following message:
Waiting on transform from /base_link to /map to become available before 
running costmap, tf error: Could not find a connection between '/map' and
'/base_link' because they are not part of the same tree.Tf has two or more 
unconnected trees.

The robot is being displayed in the corner of the map and setting pose estimation does not work (I get a message e.g. "Setting pose: 4.996 2.068 -2.645 [frame=/map]" but nothing happens).
tftree looks like this (I have a kinect mounted on a car-like robot):
tf tree http://img24.imageshack.us/img24/2531/82783897.png
so obviously map -> odom are not connected. Is that the reason pose-estimation does not work? How/where should I connect them? For testing I've tried static_transform_publisher (map to odom) but it did not change anything.
I'll be grateful for any help.

Originally posted by Cav on ROS Answers with karma: 345 on 2012-02-22
Post score: 1

A:

fixed it. my mistakes were:

scan_topic was not properly set in amcl
both laser_scan_matcher and my node were publishing tf odom->base_link

after fixing that I can set pose estimation in rviz.

Originally posted by Cav with karma: 345 on 2012-02-23
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by RB on 2014-01-20:
Hi, I have similar kind of problems.
1.How and where you have set scan_topic in amcl? I can't locate it properly; can you please mention it explicitly.
2. I have similar structure with you in the upper half of the image except one more tf called /base_footprint representing the robot platform between /odom and /base_link (representing sensor mounting point.). What should be global_frame and robot_base_frame in local_costmap_params.yaml and global_costmap_params.yaml(I want to use static map for global cost map)?
Thank in advance @Cav

