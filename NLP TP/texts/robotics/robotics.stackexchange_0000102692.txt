Q:

apt update fails in ROS2 Humble docker container

Hello! I have the following issue when try to build a docker image based on ROS2 Humble. When I am running apt update for further installation of other packages I get the following error:
W: http://packages.ros.org/ros2/ubuntu/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
E: Problem executing scripts APT::Update::Post-Invoke 'rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true'
E: Sub-process returned an error code

The same thing happens when I just pull the original image (osrf/ros:humble-desktop) and run apt update inside it

Originally posted by jenamax on ROS Answers with karma: 1 on 2022-11-11
Post score: 0

A:

Hello @jenamax,
I think You need to install the latest docker. In my case, installing version 20.10.14 helped. It did not work with 20.10.8
Follow the below link's issues that were raised in GitHub.
https://github.com/osrf/docker_images/issues/623
https://stackoverflow.com/questions/71941032/why-i-cannot-run-apt-update-inside-a-fresh-ubuntu22-04
https://github.com/osrf/docker_images/issues/621
I think that will solve your problem,

Originally posted by Ranjit Kathiriya with karma: 1622 on 2022-11-11
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jenamax on 2022-11-12:
Yes, after Docker update this problem was solved. Thank you!

