Q:

Adding object/changing position in Gazebo and Rviz

I am trying to add a box, with which a KUKA robot could interact (push it into the desired position). Besides being able to interact with it, I have to be able to change its position through a node. Could you point me into the right direction, what should be the right way of doing it? My ideas/attempts are:

If I create a box in same urdf file as KUKA, the arm avoids the object because of the collision avoidance. I believe that if I could somehow disable this, I could push the object with arm. Will I be able to change the position of the object using tf?
The second idea is to insert the object in Gazebo using the Gazebo GUI. It seems to work but I am getting an error, right after I have inserted the object:

[ERROR] [1581331637.324486823]: This
robot has a joint named "joint_a1"
which is not in the gazebo model.

[FATAL] [1581331637.325261818]: Could
not initialize robot simulation
interface

So far I have not find any impact of that error. I am able to change its position using /gazebo/set_model_state service. To visualize the object in Rviz, tf broadcaster is needed, right? I think that the actual position of the object I could get from  /gazebo/get_model_state service.

The third idea was to create two separate robot_models (2 separate urdf files with 2 urdf_spawn nodes). But with this idea I have had no success so far.

Could you point me to the right direction? How can it be solved?
PS: for better understanding I am trying to create this environment in ROS using KUKA:
https://gym.openai.com/envs/FetchPush-v1/

Originally posted by Zenzu on ROS Answers with karma: 28 on 2020-02-10
Post score: 0

A:

You can create a model plugin for your gazebo model, you need insert box model into the world file and specify the name of your model plugin so that you can manipulate the states/properties of this model through the plugin. Inside The plugin you can well use ros functinoalities like subscriber and publishers, this way you Can have access to topics that you will use to change the pose of model accordingly.
Have look at link below to see a gazebo plugin that I wrote for my project,
Itâ€™s simply moves an object randomly
Between defined boundaries,
https://github.com/jediofgever/random_pointcloud_data_gen/tree/master/plugins
note; I am not sure if this is the simplisest way to handle this but I would have done it this way, hope it helps

Originally posted by Fetullah Atas with karma: 819 on 2020-02-10
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Zenzu on 2020-02-10:
thank you very much. I am going to try it and later I will let you know.
Comment by Zenzu on 2020-02-11:
It seems to work, Thank you once more
Comment by david_valencia on 2021-08-04:
I know it's been a while since the last comment, but I'm trying to do the same.
Basically, instead of a box, I just wanna create a mark (a sphere for instance, or a circle in red) showing the target point and being able to interact with it; I mean know its position and change through a node. I am using python but I am a bit lost. Could you share the idea in more detail, please?
Comment by Fetullah Atas on 2021-08-04:
Please open a new question and state your problem in detail
Comment by Zenzu on 2021-08-04:
Here is a link to my github with the custom plugin that I used. However, it is in C++. Hope it helps. https://github.com/TomasMerva/ROS_KUKA_env/blob/master/kuka_push/plugin/goalgazebo.cpp

