Q:

How to run rviz2 with own settings in .rviz from launch file which refers to my my package via arguments = ["-d", "$(find my_package)/rviz/my.rviz"]

Hello! As in question. How to run rviz2 with my own settings saved in .rviz from the launch file which refers to my_package by name? I can add that when I refer to the .rviz file using its absolute path, it works.
The following launches rviz2 but without own settings:
     my_rviz2 = Node(package = "rviz2", 
                    executable = "rviz2",
                    arguments = ["-d", "$(find my_package)/rviz/my.rviz"]
                    )

    ld = LaunchDescription()

    ld.add_action(declare_use_sim_time_argument)
    ld.add_action(declare_params_file_cmd)
    ld.add_action(log_param_change)
    ld.add_action(my_rviz2)
    
    return ld

Originally posted by mac137 on ROS Answers with karma: 83 on 2021-09-12
Post score: 0

A:

I've done something like:
import os
from ament_index_python.packages import get_package_share_directory
import launch
from launch_ros.actions import Node

def generate_launch_description():
    my_package_dir = get_package_share_directory('my_package')
    return launch.LaunchDescription([
        Node(package='rviz2',
             executable='rviz2',
             arguments=['-d', os.path.join(my_package_dir, 'rviz', 'my.rviz')])
    ])

The key here is the get_package_share_directory function.

Originally posted by ChuiV with karma: 1046 on 2021-09-22
This answer was ACCEPTED on the original site
Post score: 1

