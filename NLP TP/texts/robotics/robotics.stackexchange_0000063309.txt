Q:

Trying to get the XV-11 Lidar to work

Hey there!
I already asked this over at the Trossen Robotics Forum but did not get a reply yet. Maybe someone here can give me a hint at what might be wrong with my XV-11 Lidar Setup.
I bought the laser scanner from Ebay and am trying to get it to work in ROS.
What I have done so far:

Connected the Lidar to ROS Indigo running Ubuntu in Virtualbox on a Windows Machine.

For the power to the motor I am using a 3V regulator that gets its power form USB (5V).

The sensor is powered by an Arduino with 3.3V for now.

Instead of the Sparkfun FTDI board I am using a standard RS-232 to USB Adapter that is getting its data from the Lidard's Tx. The adapter gets accepted by Ubuntu. Dmesg shows:
usb 1-2: FTDI USB Serial Device converter now attached to ttyUSB0

Running
rostopic echo /scan

I get this:

header:
seq: 34
stamp:
secs: 1413106818
nsecs: 470585788
frame_id: neato_laser
angle_min: 0.0
angle_max: 6.28318548203
angle_increment: 0.0174532923847
time_increment: 0.00059940997744
scan_time: 0.0
range_min: 0.0599999986589
range_max: 5.0
ranges: [0.25600001215934753, 8.192000389099121, 4.928999900817871, 13.229000091552734, 13.300999641418457, 13.274999618530273, 10.946999549865723, 0.37700000405311584, 14.380999565124512, 15.883000373840332, 15.381999969482422, 0.25600001215934753, 8.960000038146973, 6.848999977111816, 13.114999771118164, 13.0649995803833, 13.126999855041504, 13.109000205993652, 0.36899998784065247, 14.380999565124512, 15.883000373840332, 15.378000259399414, 0.5120000243186951, 1.2799999713897705, 6.880000114440918, 13.14900016784668, 10.869000434875488, 9.96500015258789, 10.836999893188477, 0.37599998712539673, 14.348999977111816, 15.873000144958496, 15.847999572753906, 16.128000259399414, 11.008000373840332, 6.90500020980835, 11.003000259399414, 10.888999938964844, 10.954999923706055, 4.479000091552734, 0.33799999952316284, 15.279000282287598, 14.972999572753906, 7.293000221252441, 0.23399999737739563, 8.019000053405762, 8.29699993133545, 15.732999801635742, 15.833000183105469, 7.519999980926514, 11.776000022888184, 8.960000038146973, 6.888999938964844, 11.795000076293945, 13.74899959564209, 13.708999633789062, 11.914999961853027, 0.4320000112056732, 11.229000091552734, 16.277000427246094, 16.277000427246094, 9.472000122070312, 8.704000473022461, 3.884999990463257, 16.381999969482422, 16.381999969482422, 16.381999969482422, 16.381999969482422, 8.295999526977539, 15.189000129699707, 16.277000427246094, 13.991999626159668, 9.472000122070312, 0.0, 3.628000020980835, 16.381999969482422, 16.381999969482422, 16.381999969482422, 16.381999969482422, 7.690999984741211, 15.189000129699707, 16.277000427246094, 15.187999725341797, 9.472000122070312, 7.935999870300293, 3.627000093460083, 16.381999969482422, 16.381999969482422, 16.381999969482422, 16.381999969482422, 8.399999618530273, 15.189000129699707, 16.277000427246094, 13.991999626159668, 9.472000122070312, 7.679999828338623, 3.625999927520752, 16.381999969482422, 16.381999969482422, 16.381999969482422, 16.381999969482422, 8.295999526977539, 15.189000129699707, 16.277000427246094, 13.991999626159668, 9.472000122070312, 7.423999786376953, 13.097000122070312, 16.381999969482422, 16.381999969482422, 16.381999969482422, 16.381999969482422, 8.406000137329102, 15.189000129699707, 16.277000427246094, 16.37700080871582, 15.871999740600586, 11.520000457763672, 14.026000022888184, 16.381999969482422, 16.381999969482422, 16.381999969482422, 16.381999969482422, 0.43700000643730164, 16.35700035095215, 16.37700080871582, 16.356000900268555, 15.871999740600586, 4.0960001945495605, 14.001999855041504, 16.381999969482422, 16.381999969482422, 16.381999969482422, 16.381999969482422, 0.43700000643730164, 16.047000885009766, 16.37700080871582, 16.327999114990234, 15.871999740600586, 8.192000389099121,
and so on...
So there seems to be data coming in.
But then here's my problem. In RVIZ the data looks like noise and it seems like the Laser is detecting itself. It shows a circular thing right in the middle although the unit is sitting on a shelf with rectangular walls around it.
Here is a screenshot of both my settings and the RVIZ point cloud.
rviz http://oi58.tinypic.com/2rolv6f.jpg
Any ideas what could be the problem? Might this be a problem due to the difference between RS232 and TTL?  Is my conversion going wrong? But the why would I get a valid header?
In the meantime I switched the power for the sensor itself (not the motor) to 5V after confirming that it can take it. Did not change anything though...
Thanks in advance!

Originally posted by tinytron on ROS Answers with karma: 45 on 2014-10-14
Post score: 0

A:

The header is generated on the computer side, not the lidar, so it's quite possible that your data is corrupt even though the header looks correct. TTL and RS-232 use different voltages and different polarities, so that's probably causing problems.
I would start by finding a proper USB to TTL serial converter. It doesn't have to be the specific Sparkfun model, but it should definitely be a 5V level and non-inverted (RS-232 is inverted).

Originally posted by ahendrix with karma: 47576 on 2014-10-15
This answer was ACCEPTED on the original site
Post score: 2

