Q:

ros-core install troubles on arch linux

Hello,
I am trying to install ROS Fuerte on Arch Linux, and am running into issues with the ros-core package.  The computer is a 64-bit system, if that matters.  I have been unable to find any error reports or guides that would help me resolve this issue; everything in the Arch Wiki and the ROS documentation that I have found seems to assume that ros-core installs, so I'm stuck.
Upon trying to build, I get the following error message from yaourt (AUR wrapper for pacman package manager);
==> Continue building ros-core ? [Y/n]
==> ----------------------------------
==> 
==> Building and installing package
==> Making package: ros-core 1.8.4-1 (Fri Jun 22 21:13:25 PDT 2012)
==> Checking runtime dependencies...
==> Checking buildtime dependencies...
==> Retrieving Sources...
==> Extracting Sources...
==> Removing existing pkg/ directory...
==> Starting build()...
--2012-06-22 21:13:25--  http://ros.org/rosinstalls/fuerte-ros-full.rosinstall
Resolving ros.org... 157.22.19.144
Connecting to ros.org|157.22.19.144|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1920 (1.9K) [text/plain]
Saving to: `/tmp/yaourt-tmp-scrye/aur-ros-core/src/ros-underlay/.rosinstall'

100%[===========================>] 1,920       --.-K/s   in 0.004s  

2012-06-22 21:13:25 (490 KB/s) - `/tmp/yaourt-tmp-scrye/aur-ros-core/src/ros-underlay/.rosinstall' saved [1920/1920]

/tmp/yaourt-tmp-scrye/aur-ros-core/./PKGBUILD: line 25: rosinstall: command not found
==> ERROR: A failure occurred in build().
    Aborting...
==> ERROR: Makepkg was unable to build ros-core.
==> Restart building ros-core ? [y/N]
==> ---------------------------------

I tried moving rosinstall to /usr/bin and it was recognized, but then the following occurs;
==> Building and installing package
==> Making package: ros-core 1.8.4-1 (Fri Jun 22 21:17:33 PDT 2012)
==> Checking runtime dependencies...
==> Checking buildtime dependencies...
==> Retrieving Sources...
==> Extracting Sources...
==> Removing existing pkg/ directory...
==> Starting build()...
--2012-06-22 21:17:33--  http://ros.org/rosinstalls/fuerte-ros-full.rosinstall
Resolving ros.org... 157.22.19.144
Connecting to ros.org|157.22.19.144|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1920 (1.9K) [text/plain]
Saving to: `/tmp/yaourt-tmp-scrye/aur-ros-core/src/ros-underlay/.rosinstall'

100%[===========================>] 1,920       --.-K/s   in 0s      

2012-06-22 21:17:33 (346 MB/s) - `/tmp/yaourt-tmp-scrye/aur-ros-core/src/ros-underlay/.rosinstall' saved [1920/1920]

/usr/bin/rosinstall: line 1: -: command not found
/usr/bin/rosinstall: line 2: local-name:: command not found
/usr/bin/rosinstall: line 3: uri:: command not found
/usr/bin/rosinstall: line 4: version:: command not found
/usr/bin/rosinstall: line 5: -: command not found
/usr/bin/rosinstall: line 6: local-name:: command not found
/usr/bin/rosinstall: line 7: uri:: command not found
/usr/bin/rosinstall: line 8: version:: command not found
/usr/bin/rosinstall: line 9: -: command not found
/usr/bin/rosinstall: line 10: local-name:: command not found
/usr/bin/rosinstall: line 11: uri:: command not found
/usr/bin/rosinstall: line 12: version:: command not found
/usr/bin/rosinstall: line 13: -: command not found
/usr/bin/rosinstall: line 14: local-name:: command not found
/usr/bin/rosinstall: line 15: uri:: command not found
/usr/bin/rosinstall: line 16: version:: command not found
/usr/bin/rosinstall: line 17: -: command not found
/usr/bin/rosinstall: line 18: local-name:: command not found
/usr/bin/rosinstall: line 19: uri:: command not found
/usr/bin/rosinstall: line 20: version:: command not found
/usr/bin/rosinstall: line 21: -: command not found
/usr/bin/rosinstall: line 22: local-name:: command not found
/usr/bin/rosinstall: line 23: uri:: command not found
/usr/bin/rosinstall: line 24: version:: command not found
/usr/bin/rosinstall: line 25: -: command not found
/usr/bin/rosinstall: line 26: local-name:: command not found
/usr/bin/rosinstall: line 27: uri:: command not found
/usr/bin/rosinstall: line 28: version:: command not found
/usr/bin/rosinstall: line 29: -: command not found
/usr/bin/rosinstall: line 30: local-name:: command not found
/usr/bin/rosinstall: line 31: uri:: command not found
/usr/bin/rosinstall: line 32: version:: command not found
/usr/bin/rosinstall: line 33: -: command not found
/usr/bin/rosinstall: line 34: local-name:: command not found
/usr/bin/rosinstall: line 35: uri:: command not found
/usr/bin/rosinstall: line 36: version:: command not found
/usr/bin/rosinstall: line 37: -: command not found
/usr/bin/rosinstall: line 38: local-name:: command not found
/usr/bin/rosinstall: line 39: uri:: command not found
/usr/bin/rosinstall: line 40: version:: command not found
/usr/bin/rosinstall: line 41: -: command not found
/usr/bin/rosinstall: line 42: local-name:: command not found
/usr/bin/rosinstall: line 43: uri:: command not found
/usr/bin/rosinstall: line 44: version:: command not found
/usr/bin/rosinstall: line 45: -: command not found
/usr/bin/rosinstall: line 46: local-name:: command not found
/usr/bin/rosinstall: line 47: uri:: command not found
/usr/bin/rosinstall: line 48: version:: command not found
/usr/bin/rosinstall: line 49: -: command not found
/usr/bin/rosinstall: line 50: local-name:: command not found
/usr/bin/rosinstall: line 51: uri:: command not found
/usr/bin/rosinstall: line 52: version:: command not found
/usr/bin/rosinstall: line 53: -: command not found
/usr/bin/rosinstall: line 54: local-name:: command not found
/usr/bin/rosinstall: line 55: uri:: command not found
/usr/bin/rosinstall: line 56: version:: command not found
==> ERROR: A failure occurred in build().
    Aborting...
==> ERROR: Makepkg was unable to build ros-core.
==> Restart building ros-core ? [y/N]
==> ---------------------------------

I guess each line of the script is being called out of context, resulting in incorrect commands?  I'm not sure what to do to make it work properly, though.
Has anyone else run into this issue, or figured out a workaround?  Any suggestions would be apppreciated.  I'm quite new to ROS, so I could use all the help I can get.  Thank you.

Originally posted by skyeyemachine on ROS Answers with karma: 1 on 2012-06-22
Post score: 0

A:

You shouldn't move rosinstall by hand to /usr/bin. That normally doesn't work since it depends on a few libraries that you probably are missing. There is an AUR package for rosinstall though which should work fine.
Installation of ros-core will probably still fail because arch uses python3 while ROS still expects python2. I've see suggestions to just change the link from /usr/bin/python from python3 to python2 but this is, I guess, a pretty bad idea since the whole system now expects it to be python3. Instead, patching #! lines should be a much better solution, i.e. you will have to hack the ros-core AUR file. A very simple script for fixing the python #! lines can be found here.
I'm planning to create my own AUR packages for ROS fuerte (not only the core packages but also a lot of additional stack) that work without rosinstall and out of the box but I just didn't have time yet. However, I created a bunch of AUR files for electric that still should work (including PCL). You can find them here.
Edit: Instead of installing rosinstall from an AUR package, you can also use pip.
sudo pacman -S python2-pip
sudo pip2 install rosinstall

Originally posted by Lorenz with karma: 22731 on 2012-06-22
This answer was ACCEPTED on the original site
Post score: 1

