Q:

Curvu local trajectories with teb_local_planner

Good afternoon,
I faced the problem and can't fix it related to teb_local_planner. The planner builds the global path very good, however, the local planner is very bad. It is very curved.

As you can see in the image above, the yellow line is a global path and the black one is a local path.
My prediction is that probably I have to say to the planner that my robot can perform in_plac_rotation, but I don't know is it possible with teb_local_planner. Also maybe I have to forbid backward movements.
Does anyone have an idea about that problem?
Thank you
Regards,
Additional photo,

New problem,

Originally posted by Yehor on ROS Answers with karma: 166 on 2020-04-15
Post score: 0

A:

The local planner output is correct as it is the time-optimal solution for your parameter setting.
Turning while moving forward is faster than rotating in place given your linear and angular velocity resp. acceleration limits.
However, you can tweak the behavior, as you said, by further penalizing backward motions
according to this question and answer.
You can also have a look at the path following mode in case this is your preferred objective.

Originally posted by croesmann with karma: 2531 on 2020-04-15
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Yehor on 2020-04-15:
@croesmann thank you for your fast answer and help. I have set the backward motion to 0.0 and now will try to navigate. So as far as I understand there is no option to turn on only in place rotation.
Comment by Yehor on 2020-04-15:
@croesmann I want to ask also, is it possible to set min velocity (linear and rotation). Because the robot rotates too fast.
Comment by Yehor on 2020-04-15:
I have also received this (((
[ WARN] [1586940296.313565236]: TebLocalPlannerROS: possible oscillation (of the robot or its local plan) detected. Activating recovery strategy (prefer current turning direction during optimization).
Comment by croesmann on 2020-04-15:
Please follow the complete steps in my link. You must set weight_kinematics_forward_drive to a very large value. You cannot set minimum limits.
Comment by croesmann on 2020-04-15:
Backward velocity should be at least set to penalty_epsilon to avoid numerical issues. I am not sure yet, if I detect this programmatically
Comment by Yehor on 2020-04-15:
@croesmann I did what you suggested. However, my robot always turns to much and even with a straight line direction it moves likes a snake.
I also have that warning:
TebLocalPlannerROS: possible oscillation (of the robot or its local plan) detected. Activating recovery strategy (prefer current turning direction during optimization).
Do you have any idea?
Thank you
Comment by Yehor on 2020-04-15:
@croesmann I added an additional photo, which represents how the robot started to move. Initially, the route was just a straight line, but the robot moves up and then start to move back down.
Comment by Yehor on 2020-04-17:
@croesmann Sorry maybe you know the answer for that question, the planner pan local plan through the table. Check please last image .
Comment by croesmann on 2020-04-17:
please create a new question at answers.ros.org if they do not directly relate to this one! However, it seems that your local costmap does not include these obstacles. Please check your navigation/move_base config according to the ROS navigation tutorials.

