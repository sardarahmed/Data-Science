Q:

Why does sourcing my workspace cause the error "catkin_make: command not found"?

I've been messing around with my catkin workspace in an attempt to get QtCreator working with ROS (Indigo Igloo, Ubuntu 14.04, QtCreator 5.9.1), and somewhere along the way I've messed up something important. So now, if I run:
$ source /opt/ros/indigo/setup.bash
$ cd repo/workspace/
$ catkin_make

Everything builds properly, but if I source my workspace between sourcing the ROS distro and running catkin_make then the command fails. I.e. if I run:
$ source /opt/ros/indigo/setup.bash
$ source /home/user/repo/workspace/devel/setup.bash
$ cd repo/workspace/
$ catkin_make

Then I get the following error
catkin_make: command not found

Does anyone know why this is the case? Obviously, there is something wrong with my setup but I don't understand enough about CMake to figure it out. I'm also not sure what diagnostic info I need to post here to help others, so if there is something specific about my setup that I should post here, let me know. Thanks in advance for any help or advice.

Updates
As per @psammut's comments, I tried copying all the source code into a new workspace. I can run catkin_make in the new workspace just fine, regardless of whether it is sourced or not. But the minute I source my original workspace, catkin_make throws an error in either workspace.
As per @ahendrix's answer. If I build my workspace with Qt (or try to since it fails when Qt tries) and the Qt CMAKE_PREFIX_PATH is set to "/home/user/Qt/5.9.1/gcc_64", my PATH variable looks like this before and after sourcing the workspace:
Before:
/opt/ros/indigo/bin:/home/user/.nvm/versions/...

After:
/home/user/Qt/5.9.1/gcc_64/bin:/home/user/.nvm/versions/...

Originally posted by M@t on ROS Answers with karma: 2327 on 2017-09-25
Post score: 1

Original comments
Comment by psammut on 2017-09-25:
Hate to be that guy, but if you installed ros from the binaries, have you tried just uninstalling and re-installing?
Comment by psammut on 2017-09-25:
Also, another suggestion, if you didn't touch the ros files and re-installing is not the cause of the problem, simply make a new workspace and just transfer over the source files to it. Then rebuild and try again.
Comment by M@t on 2017-09-25:
No worries, re-installing is definitely an option (done it before). But I'd like to leave it as a last resort, if only because I'll (hopefully) learn something if I can solve the underlying problem. I'll try your suggestion of a new workspace and report back.
Comment by DrewHamilton on 2020-12-19:
So... HOW IN THE WORLD DO WE PROPERLY SET UP QT 5 LIBS!?!?!
Comment by jayess on 2020-12-20:
@DrewHamilton You should create a new question and reference this one. That'll give your issue more visibility

A:

It seems like your workspace is setting the PATH environment variable incorrectly. Sourcing one workspace overrides and previous workspace or other setup.bash, so it doesn't matter if you've sourced the setup.bash for the system install of ROS or not.
I would look at the PATH after you've sourced the setup.bash for your workspace, to see if it's including a path to a previous version of ROS or a workspace that's been deleted.
You can re-create the setup.bash in your workspace by deleting the devel folder, sourcing your system install and rebuilding the workspace:
cd /home/user/repo/workspace
rm -rf build devel
source /opt/ros/include/setup.bash
catkin_make

Originally posted by ahendrix with karma: 47576 on 2017-09-25
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by M@t on 2017-09-26:
Thanks @ahendrix, I've updated my question. So essentially, Qt messes up the workspace env variable, sourcing it messes up the PATH variable, so when I invoke catkin_make it can't find the command because the ROS directory is not longer in PATH? Is that an appropriate summary?
Comment by M@t on 2017-09-26:
catkin clean also deletes devel file, so that fits with your solution.

