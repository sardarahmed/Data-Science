Q:

Clarification about relative orientation of UR5

I'm trying to understand the relative position and orientation. Take a look at the below picture. The end-effector frame (i.e. the top right frame) for the UR5 is shown. Its relative orientation is shown in RViz as x=0,y=0,z=0.707,w=0.707. My understanding for relative orientation is with respect to the previous frame (i.e. the top left frame in the picture), but it seems to me the orientation is carried out by 90 deg around y-axis of that frame but the result shows the orientation about z-axis by 90 deg. What is exactly the relative and absolute position and orientation in ros?

Originally posted by CroCo on ROS Answers with karma: 155 on 2022-10-14
Post score: 0

Original comments
Comment by nils_iseke on 2022-10-15:
I would assume that the colours of the axes are: X-Axis = Red Y-Axis = Green Z-Axis = Blue Therefore the rotation between the left upper and the right upper frame is a rotation around the z-axis by +90Â° (right hand rule).

A:

As far as I know, these are not standard terms - this particular rviz plugin made them up.
So, from looking at the values, I think that Position and Orientation are the pose of ee_link relative to the Fixed Frame, and Relative Position and Relative Orientation are the pose of ee_link relative to the ee_link parent, wrist_3_link.

Originally posted by Mike Scheutzow with karma: 4903 on 2022-10-15
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by CroCo on 2022-10-15:
Thank you for the answer. What do you mean by "made them up"? It seems to me this is the result of tf structure from reading urdf file. The problem I'm facing is that my controller provides slightly different values (i.e. 0.5 - 0.5i + 0.5j + 0.5k). The i-component appears negative whereas in RViz appears positive. For the position, they are same but the orientation at some configurations appears different.
Comment by Mike Scheutzow on 2022-10-16:
"made them up" was about the terminology, the labels given to those two poses.
I expect that rviz plugin is using the tf2_ros Buffer.lookup_transform() to get the values it displays, so they are almost certainly correct.
If your code gets a different result (after being normalized), you have a bug somewhere. Open a new question if you can clearly describe the problem.
Comment by Mike Scheutzow on 2022-10-16:
P.S. the python method tf.transformations.euler_from_quaternion([x,y,z,w]) is very useful for debugging these kind of problems. It returns the euler (roll, pitch, yaw) in radians.
Comment by CroCo on 2022-10-16:
In my controller, I'm using the standard DH parameters for UR5. It seems I need to modify this table so that both the controller and the RViz/Gazebo are identical. This is my only thought.
Comment by CroCo on 2022-10-16:
Please take a look at my question https://answers.ros.org/question/405892/x-y-axes-for-ur5-appear-reversed/

