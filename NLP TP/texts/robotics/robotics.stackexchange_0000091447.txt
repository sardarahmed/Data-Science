Q:

Hector SLAM map does not update based on robot motion

Hi, I am having trouble with Hector SLAM using a car with LIDAR and no odometry frame. I started with a recorded bag file that has Velodyne LIDAR data and used rosrun pointcloud_to_laserscan pointcloud_to_laserscan_node to convert from pointcloud2 format to scan format. Now I am trying to run Hector SLAM, without using odometry frame. I am following the information on this page http://wiki.ros.org/hector_slam/Tutorials/SettingUpForYourRobot, part 2, “Use without odom frame.”
I am able to generate a map, but the map just expands radially from the center. My car is definitely driving, but the map looks like the car is sitting in the same spot.
I suspect that there is something wrong with the transformations between the car and the earth. I tried using tf_echo to look at the transform between the robot and the earth, but the values there don’t seem to make sense and the transform seems to always be the same, because the car isn’t always driving at a constant speed.
Here is the launch file: https://drive.google.com/file/d/19ekahpEBisAF5I0TgFsz1nHTVONa7A0J/view?usp=sharing
Here is the bag file: https://drive.google.com/file/d/1RInfiRPoOjXgsyuL3lbHorSmNWwlg7df/view?usp=sharing
Here is a picture of the tf tree: https://drive.google.com/file/d/1nZmaHNeuY9J1W3CDKB22xJzhrb4XMP3Q/view?usp=sharing
Here is the corresponding camera image video:
https://drive.google.com/file/d/1e89P7bOvhymCf7b3ivObNdlGvgrEqv0Z/view?usp=sharing
Here is the current map in rviz: https://drive.google.com/file/d/1zbHZd3N4rkgxVAqFNkMjMgLKCbuVHdVk/view?usp=sharing
I am using ROS Kinetic with Ubuntu 16.04 dual-booted on a Dell Inspiron computer.
What am I doing wrong that makes the map appear to not move?

Originally posted by danielwu on ROS Answers with karma: 1 on 2019-04-21
Post score: 0

A:

@danielwu, can you try to add
<param name="use_sim_time" value="true" />

to your launch file.
Then,  play your rosbag file
 rosbag play --clock newVelo.bag

Originally posted by samialperen with karma: 70 on 2019-04-25
This answer was ACCEPTED on the original site
Post score: 0

