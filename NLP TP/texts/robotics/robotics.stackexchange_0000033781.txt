Q:

Remove GCC optimizations

Hi,
I'm trying to debug an issue with some code via GDB, but some values are apparently optimized away. How can I disable compiler optimization in CMakeLists.txt? I tried doing rosbuild_remove_compiler_flags(my_executable "-O2") and then rosbuild_add_compiler_flags(my_executable "-O0") but this doesn't appear to have done anything, according to the output of make VERBOSE=1 it's still using -O2. What am I doing wrong? (the correct answer is trying to debug a ROS node using GDB, clearly...)

Originally posted by Ibrahim on ROS Answers with karma: 307 on 2011-08-21
Post score: 1

A:

When you open the CMakeLists.txt file generated by roscreate-pkg, it should contain the following lines:
# Set the build type.  Options are:
#  Coverage       : w/ debug symbols, w/o optimization, w/ code-coverage
#  Debug          : w/ debug symbols, w/o optimization
#  Release        : w/o debug symbols, w/ optimization
#  RelWithDebInfo : w/ debug symbols, w/ optimization
#  MinSizeRel     : w/o debug symbols, w/ optimization, stripped binaries
#set(ROS_BUILD_TYPE RelWithDebInfo)

Just uncomment the line set(ROS_BUILD_TYPE RelWithDebInfo) and set it to
set(ROS_BUILD_TYPE Debug)

Originally posted by Lorenz with karma: 22731 on 2011-08-21
This answer was ACCEPTED on the original site
Post score: 7

