Q:

No OpenGL or Nvidia in the docker

I tried to install the latest Autoware.auto in Ubuntu 18.04. I have Nvidia drivers and docker installed, I can run nvidia-smi and glxgears in the host but not in the ADE. Rviz2 cannot start due to wrong OpenGL context. Can anyone tell me how to add the OpenGL and Nvidia support into the docker images? Thank you.

Originally posted by Mike_Auto on ROS Answers with karma: 1 on 2020-06-12
Post score: 0

A:

By default, we now disable GPU passthrough support in the standard .aderc file. This is because if you have an Nvidia GPU but don't have nvidia-container-toolkit installed, you will get errors as well. To use Nvidia GPU passthrough, you'll need to install nvidia-container-toolkit using the instructions here. After that, modify your .aderc file and remove the line export ADE_DISABLE_NVIDIA_DOCKER=true to re-enable Nvidia GPU passthrough.
Note: The .aderc-lgsvl file does not have this line because LGSVL requires an Nvidia GPU with GPU passthrough enabled.

Originally posted by Josh Whitley with karma: 1766 on 2020-06-12
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Josh Whitley on 2020-06-16:
There is also an ongoing discussion about this in this issue.
Comment by LennartL on 2020-08-18:
This helped me while following the lgsvl tutorial for Autoware.Auto: https://www.lgsvlsimulator.com/docs/autoware-auto-instructions/#run-simulator-alongside-autoware-auto
Thank you very much.

