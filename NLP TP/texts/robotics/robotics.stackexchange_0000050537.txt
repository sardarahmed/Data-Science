Q:

Can a SMACH state machine be paused and resumed?

Hello,
I've been working through the smach and teer tutorials.  Teer appears to make it easy to pause and resume a collection of tasks.  I was wondering if there is a way to do something similar in SMACH.
My use case is a robot that is running around the house doing things by executing a SMACH state machine.  However, it is also monitoring its battery levels using a SMACH MonitorState.  When the battery levels fall too low, the robot should navigate to its docking station, recharge, then resume the execution of the original state machine where it left off.
I can imagine using a global "pause/resume" flag in the main state machine across all its contained states but this doesn't feel very SMACH-like.  Does any one know how to implement this kind of pause/resume using SMACH?
Thanks!
patrick

Originally posted by Pi Robot on ROS Answers with karma: 4046 on 2013-04-21
Post score: 3

A:

So, it is possible to set the initial state (and userdata) of a SMACH state machine with smach.Container.set_initial_state(). So if your battery monitor preempted the state machine, and you stored the active states of the containers you cared about, you could "resume" from a given state of execution later on. You'd have to do the bookkeeping on your own, but you should be able to get the behavior that you want.
What SMACH really needs is an extension for event-based transitions, and then you could distribute the responsibility of pausing / resuming in each active container.

Originally posted by jbohren with karma: 5809 on 2013-04-21
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by Pi Robot on 2013-04-21:
Many thanks @jbohren.  This will definitely get me on the right track.

