Q:

Networking problem with Xtion

Hello,
I have Asus Xtion connected to one PC and rosmaster on other connected by local network, everything worked fine till couple of days ago, the frame rate of the Xtion on the rosmaster PC dropped from 30 fps to 1 fps for images and even lower for points. Does someone experience the same behaviour? Is is possible to debug it somehow.
Update:
Here is the output of rostopic hz on the master PC:
master $ rostopic hz /xtion2/rgb/image_color
subscribed to [/xtion2/rgb/image_color]
average rate: 1.225
        min: 0.816s max: 0.816s std dev: 0.00000s window: 2
average rate: 1.229
        min: 0.810s max: 0.816s std dev: 0.00301s window: 3
average rate: 1.229
        min: 0.810s max: 0.816s std dev: 0.00254s window: 4

here is the output of rostopic bw on master PC:
master $ rostopic bw /xtion2/rgb/image_color
subscribed to [/xtion2/rgb/image_color]
average: 1.88MB/s
        mean: 0.92MB min: 0.92MB max: 0.92MB window: 2
average: 1.39MB/s
        mean: 0.92MB min: 0.92MB max: 0.92MB window: 3
average: 1.24MB/s
        mean: 0.92MB min: 0.92MB max: 0.92MB window: 4

here is the same on the slave PC where the Xtion is connected:
slave $ rostopic hz /xtion2/rgb/image_color
subscribed to [/xtion2/rgb/image_color]
average rate: 29.844
        min: 0.031s max: 0.036s std dev: 0.00199s window: 24
average rate: 29.869
        min: 0.031s max: 0.036s std dev: 0.00196s window: 54
average rate: 29.873
        min: 0.031s max: 0.036s std dev: 0.00195s window: 84

here is the output of the rostopic bw on the slave machine:
slave $ rostopic bw /xtion2/rgb/image_color                                                                                                                                   
subscribed to [/xtion2/rgb/image_color]
average: 28.19MB/s
        mean: 0.92MB min: 0.92MB max: 0.92MB window: 24
average: 27.87MB/s
        mean: 0.92MB min: 0.92MB max: 0.92MB window: 54
average: 27.78MB/s
        mean: 0.92MB min: 0.92MB max: 0.92MB window: 84

Thanks

Originally posted by liborw on ROS Answers with karma: 801 on 2013-03-05
Post score: 0

Original comments
Comment by Ben_S on 2013-03-05:
What is the output of rostopic hz and rostopic bw on both machines for your topics? Did anything change in your local network? WLAN, new Switches, Routers? Whats the connection speed of your network adapters?
Comment by liborw on 2013-03-06:
I have updated the question. I can see there is probably problem with the network.

A:

Is this local network connected through WiFi? If so, this could very well be your bottleneck. Try using iperf to check your network speed to see if that is the possible cause.
From what I can see, your computer that is connected to the Xtion seems to process it fine at 30fps, so I'm guessing it is something in your network causing this problem.

Originally posted by Hansg91 with karma: 1909 on 2013-03-06
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by liborw on 2013-03-06:
I have already checked the speed with iperf, it was 9 Mbits/sec. After restarting the router everything works fine.
Comment by Hansg91 on 2013-03-06:
9Mbits/sec is indeed not enough, you should really look for 40/50Mbits/sec at least I think.

