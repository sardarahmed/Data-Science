Q:

ImportError: No module named roslib

I am having a problem running python files. Here are the 1st-3rd lines of the py file:
#!/usr/bin/env python
import roslib; roslib.load_manifest('irobot_mudd')
import rospy

Whenever I run $ sudo python ml.py (ml.py being the python file in question)- as well as any other py file importing roslib, I get the error message:
Traceback (most recent call last):
  File "ml.py", line 2, in <module>
    import roslib; roslib.load_manifest('irobot_mudd')
ImportError: No module named roslib

If I run
$ python ml.py 

I get the following back:
Traceback (most recent call last):
  File "ml.py", line 4, in <module>
    import cv_bridge
ImportError: No module named cv_bridge

My setup.sh file is as follows:
export ROS_ROOT=/opt/ros/electric/ros
export PATH=${ROS_ROOT}/bin:${PATH}
export PYTHONPATH=${ROS_ROOT}/core/roslib/src:${PYTHONPATH}
export ROS_PACKAGE_PATH=/opt/ros/electric/stacks 
if [ ! "$ROS_MASTER_URI" ] ; then export ROS_MASTER_URI=http://localhost:11311 ; fi

this is what my python path looks like:
echo $PYTHONPATH 
/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:/opt/ros/electric/ros/core/roslib/src:

Here is the result of ls /opt/ros/electric/ros/core/roslib/src:
package.cpp  ros  roslib

And the result of ls /opt/ros/electric/ros/core/roslib/src/roslib/*.py is:
/opt/ros/electric/ros/core/roslib/src/roslib/exceptions.py   /opt/ros/electric/ros/core/roslib/src/roslib/params.py
/opt/ros/electric/ros/core/roslib/src/roslib/genpy.py        /opt/ros/electric/ros/core/roslib/src/roslib/resources.py
/opt/ros/electric/ros/core/roslib/src/roslib/gentools.py     /opt/ros/electric/ros/core/roslib/src/roslib/rosenv.py
/opt/ros/electric/ros/core/roslib/src/roslib/__init__.py     /opt/ros/electric/ros/core/roslib/src/roslib/roslogging.py
/opt/ros/electric/ros/core/roslib/src/roslib/launcher.py     /opt/ros/electric/ros/core/roslib/src/roslib/rospack.py
/opt/ros/electric/ros/core/roslib/src/roslib/manifestlib.py  /opt/ros/electric/ros/core/roslib/src/roslib/rostime.py
/opt/ros/electric/ros/core/roslib/src/roslib/manifest.py     /opt/ros/electric/ros/core/roslib/src/roslib/scriptutil.py
/opt/ros/electric/ros/core/roslib/src/roslib/message.py      /opt/ros/electric/ros/core/roslib/src/roslib/srvs.py
/opt/ros/electric/ros/core/roslib/src/roslib/msgs.py         /opt/ros/electric/ros/core/roslib/src/roslib/stack_manifest.py
/opt/ros/electric/ros/core/roslib/src/roslib/names.py        /opt/ros/electric/ros/core/roslib/src/roslib/stacks.py
/opt/ros/electric/ros/core/roslib/src/roslib/network.py      /opt/ros/electric/ros/core/roslib/src/roslib/substitution_args.py
/opt/ros/electric/ros/core/roslib/src/roslib/os_detect.py    /opt/ros/electric/ros/core/roslib/src/roslib/xmlrpc.py
/opt/ros/electric/ros/core/roslib/src/roslib/packages.py

import sys; sys.path
['/home/machira/ros_workspace/irobot_mudd', '/usr/bin', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.7', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client', '/usr/lib/python2.7/dist-packages/ubuntuone-client', '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel', '/usr/lib/python2.7/dist-packages/ubuntuone-couch', '/usr/lib/python2.7/dist-packages/ubuntuone-installer', '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol', '/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']

Running  $ cd /opt/ros/electric/ros/core/roslib/src;python -c 'import roslib; print "success"' results in;
success
user@user-K53SV:/opt/ros/electric/ros/core/roslib/src$

Any ideas on what is wrong? Also why the PYTHONPATH looks as it does? Should it?
Thanks!
raymachira

Originally posted by raymachira on ROS Answers with karma: 1 on 2012-08-13
Post score: 2

Original comments
Comment by raymachira on 2012-08-13:
I have tried sourcing /opt/ros/electric/setup.sh While this command works, I still get the error
Comment by Lorenz on 2012-08-13:
Please provide the complete backtrace. Maybe it contains something important.
Comment by raymachira on 2012-08-13:
Backtrace of what exactly?
Comment by Lorenz on 2012-08-13:
The python backtrace that shows you the import error. Please always copy-paste the exact error you are getting. See http://www.ros.org/wiki/Support
Comment by raymachira on 2012-08-13:
Sure. Here it is: >>Traceback (most recent call last):

File "ros_workspace/irobot_mudd/ml.py", line 2, in 
import roslib; roslib.load_manifest('irobot_mudd')
ImportError: No module named roslib

Comment by raymachira on 2012-08-13:
Sure. Here it is:
Comment by Lorenz on 2012-08-13:
Could you please edit your original question and add it? That makes it way easier to read :)
Comment by Lorenz on 2012-08-13:
Also, please execute echo $PYTHONPATH after you got the error, in the same terminal. Just to be sure your program uses the right path... :)
Comment by raymachira on 2012-08-13:
Thanks Lorenz. I have added these changes. I hope they are helpful.
Comment by KruseT on 2012-08-13:
The pythonpath should just be: /opt/ros/electric/ros/core/roslib/src, but having many of those does not hurt. Can you also execute ls /opt/ros/electric/ros/core/roslib/src and post the results in your question, please?
Comment by raymachira on 2012-08-13:
Sure. I have done so KruseT
Comment by KruseT on 2012-08-13:
This does not make much sense. Also post ls /opt/ros/electric/ros/core/roslib/src/roslib/*.py
Comment by Lorenz on 2012-08-13:
Can you please not use cites but code blocks for code? Just copy-paste text, mark it and press Ctrl-k. That way, we don't lose any line breaks that might be important. Can you also post the output of the following entered in a python shell: import sys; sys.path
Comment by KruseT on 2012-08-13:
The path  /opt/ros/electric/ros/core/roslib/src is missing from your sys.path. It should be in there if it was in your PYTHONPATH, unless what you do changes the PYTHONPAT or sys.path before you call import roslib.
Comment by raymachira on 2012-08-13:
I called as you said I should, and the roslib directory exists. I still get the same error.
Comment by KruseT on 2012-08-13:
Can you tell us more about what you do to get the error? Do you call a shell script, or a python script? What are the first line of the python script? What is the result of : $ cd /opt/ros/electric/ros/core/roslib/src;python -c 'import roslib; print "success"'
Comment by raymachira on 2012-08-14:
I have added this information.
Comment by Lorenz on 2012-08-14:
You seem to run the python file using sudo. That probably causes the problem. Run it without sudo.
Comment by raymachira on 2012-08-14:
I have, I get a cv_bridge error now as above

A:

You need to call:
source /opt/ros/electric/setup.sh

either manually or in your .bashrc.
Check whether /opt/ros/electric/ros/core/roslib/src exists, and if not, run
sudo aptitude reinstall ros-electric-ros

EDIT:
As Lorenz said, you should not use sudo. You should never ever ever use sudo, unless a tutorial tells you to.
So your only problem is:
import cv_bridge
ImportError: No module named cv_bridge

To import cv_bridge, cv_bridge must be listed in irobot_mudd/manifest.xml as
<depend package="cv_bridge"/>

Only then does roslib.load_manifest('irobot_mudd') put cv_bridge into the python path.

Originally posted by KruseT with karma: 7848 on 2012-08-13
This answer was ACCEPTED on the original site
Post score: 9

