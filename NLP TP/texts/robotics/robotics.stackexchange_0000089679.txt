Q:

moveit Failed to call service get_planning_scene

Hi all,
I'm using Moveit to control a turtle arm on a turtlebot. I want to use the kinect on turtlebot for perception. I followed the perception tutorials to setup the yaml and launch files, but I can't get octomap in RViz. I can still plan a path though, just without any information from the environment.
When I'm starting the camera and then start the moveit, the part of output I believe that is related is as following:
[ INFO] [1542892231.060107356]: Loading robot model 'turtlebot'...
[ INFO] [1542892238.874967176]: Using planning interface 'OMPL'
[ INFO] [1542892239.110417144]: Param 'default_workspace_bounds' was not set. Using default value: 10
[ INFO] [1542892239.490668958]: Param 'start_state_max_bounds_error' was set to 0.1
[ INFO] [1542892239.720272956]: Param 'start_state_max_dt' was not set. Using default value: 0.5
[ INFO] [1542892240.192941838]: Param 'start_state_max_dt' was not set. Using default value: 0.5
[ INFO] [1542892240.446976426]: Param 'jiggle_fraction' was set to 0.05
[ WARN] [1542892240.475931732]: [image_transport] Topics '/camera/depth_registered/image_raw' and '/camera/depth_registered/camera_info' do not appear to be synchronized. In the last 10s:
    Image messages received:      18
    CameraInfo messages received: 263
    Synchronized pairs:           0
[ INFO] [1542892240.730520809]: Param 'max_sampling_attempts' was not set. Using default value: 100
[ INFO] [1542892240.730652536]: Using planning request adapter 'Add Time Parameterization'
[ INFO] [1542892240.730686255]: Using planning request adapter 'Fix Workspace Bounds'
[ INFO] [1542892240.730709452]: Using planning request adapter 'Fix Start State Bounds'
[ INFO] [1542892240.730730508]: Using planning request adapter 'Fix Start State In Collision'
[ INFO] [1542892240.730760984]: Using planning request adapter 'Fix Start State Path Constraints'
[ INFO] [1542892241.636168685]: Loading robot model 'turtlebot'...
[ INFO] [1542892246.831242386]: Added FollowJointTrajectory controller for arm_controller
[ INFO] [1542892246.831393129]: Returned 1 controllers in list
[ INFO] [1542892249.116548731]: Starting scene monitor
[ WARN] [1542892250.476377562]: [image_transport] Topics '/camera/depth_registered/image_raw' and '/camera/depth_registered/camera_info' do not appear to be synchronized. In the last 10s:
    Image messages received:      19
    CameraInfo messages received: 297
    Synchronized pairs:           0
[ INFO] [1542892250.689720358]: Listening to '/move_group/monitored_planning_scene'
[ INFO] [1542892251.107535720]: waitForService: Service [/get_planning_scene] has not been advertised, waiting...
[ INFO] [1542892252.256660823]: Trajectory execution is managing controllers
[ INFO] [1542892256.244297990]: Failed to call service get_planning_scene, have you launched move_group? at /tmp/binarydeb/ros-kinetic-moveit-ros-planning-0.9.15/planning_scene_monitor/src/planning_scene_monitor.cpp:498
Loading 'move_group/ApplyPlanningSceneService'...
Loading 'move_group/ClearOctomapService'...
Loading 'move_group/MoveGroupCartesianPathService'...
Loading 'move_group/MoveGroupExecuteTrajectoryAction'...
[ WARN] [1542892260.475968817]: [image_transport] Topics '/camera/depth_registered/image_raw' and '/camera/depth_registered/camera_info' do not appear to be synchronized. In the last 10s:
    Image messages received:      21
    CameraInfo messages received: 305
    Synchronized pairs:           0
[ INFO] [1542892261.431886845]: Constructing new MoveGroup connection for group 'arm' in namespace ''
Loading 'move_group/MoveGroupGetPlanningSceneService'...
Loading 'move_group/MoveGroupKinematicsService'...
Loading 'move_group/MoveGroupMoveAction'...
Loading 'move_group/MoveGroupPickPlaceAction'...

It complains about two things, the first one is the depth image and camera info are not synchronized. I don't know how to solve this because those are published by the kinect driver.
The second problem is it "Failed to call service get_planning_scene". Please help me on this. How can I get the perception working in moveit?
Thank you!!!

Originally posted by mzWang on ROS Answers with karma: 39 on 2018-11-22
Post score: 0

A:

Firstly the synchronisation warning is almost certainly being caused by a bandwidth problem. In my experience a Wi-Fi link isn't good enough to transmit all the live data from a depth sensor. This will mean that a significant amount of the images are being dropped, which causes the sync warning you're getting.
Secondly, the message Failed to call service get_planning_scene, have you launched move_group? Isn't even a warning it's just an info message. This is simply caused because move_group hasn't loaded yet, you can see the loading messages for move_group following this on the console, so this is nothing to worry about.
The first of these problems is the one causing your perception issue. My suggestion would be to move the processing nodes onto the turtlebot if the on-board computer is up-to it. This will get around the bandwidth bottleneck.
Hope this helps.

Originally posted by PeteBlackerThe3rd with karma: 9529 on 2018-11-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by mzWang on 2018-11-23:
Thank you!!! This explanation sounds super reasonable. I'll try your suggestion and let's see. Thanks again!
Comment by mzWang on 2018-11-26:
I tried to run everything on the robot, and I don't have that synchronization warning anymore. Thank you! However I'm facing another transform error now, I've posted a new question. Can you help me on this one? Thank you! link attached
Comment by mzWang on 2018-11-26:
https://answers.ros.org/question/309317/how-to-fix-very-low-frame-publish-rate-of-turtlebot/

