Q:

polling an event stream

Hi, I'm very new to ROS, and I'm having some issues understanding what the correct way to poll an event stream is. Currently I am reading events from an xbox controller, and I want to present a snapshot of the current controller state say 60 times per second. The code I've come up with is http://pastebin.com/N8GvK2eM, (and less important, http://pastebin.com/u0J179e2).
This seems to be the wrong way to go about things, as I can't seem to find a way to actually make it run as an ROS node. What is the correct way to design this? Am I thinking about it wrong, or is there a simple yet obvious flaw? Running ROS indigo on linux mint.

Originally posted by aaser on ROS Answers with karma: 3 on 2015-10-02
Post score: 0

A:

You should initalise ros node with:
rospy.init_node()

for explanation check here.
So you should write something like this:
if __name__ == '__main__':
   
    rospy.init_node('xbox_controller')

    try:
        loop = asyncio.get_event_loop()
        loop.add_reader(xboxc, partial(read_events, xboxc))
        loop.run_until_complete(summarize())
 
    except rospy.ROSInterruptException:

            pass

But if you use xbox controller with ROS probably you want to use joy package.

Originally posted by destogl with karma: 877 on 2015-10-03
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by aaser on 2015-10-03:
Thanks, appreciate it, and it seems like it's just what I was looking for too. I am aware of the joy package, but I wanted to use a controller as a learning tool since I get so much feedback from the system, rather than trying to divine why my arduino isnt blinking like it should. Thanks a lot!
Comment by destogl on 2015-10-06:
Please mark question as answered if you are happy with the answer

