Q:

GetWorldLinearVel animation problem

Hello everybody,
I am moving a box using the animation system (KeyFrame,...). I would like to output some datas like the model's position and speed. I have created a model plugin.
No problem for the position but I have some trouble for the speed.
The GetWorldLinearVel function seems to return a 0.0 value for x, y and z attributes.
Here is the code to get the speed datas :
custom_msgs::msg_command speed_msg;
speed_msg.header.stamp = ros::Time::now();
speed_msg.header.frame_id = m_model->GetName();

auto linear = m_model->GetWorldLinearVel();
speed_msg.yaw_rate.data = m_model->GetWorldAngularVel().z;

ROS_INFO("speed data");
ROS_INFO("x: %lf", linear.x);
ROS_INFO("y: %lf", linear.y);
ROS_INFO("z: %lf", linear.z);

Originally posted by Brosseau.F on Gazebo Answers with karma: 284 on 2016-09-07
Post score: 0

A:

The animation framework is a cheat that bypasses the physics engine to move an object. A velocity is not applied to the object, instead the object's position is directly changed by Gazebo. Therefore, the physics engine will report a velocity of zero.
You could calculate a velocity manually in your program/plugin.

Originally posted by nkoenig with karma: 7676 on 2016-09-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Brosseau.F on 2016-09-08:
Thanks to both of you

