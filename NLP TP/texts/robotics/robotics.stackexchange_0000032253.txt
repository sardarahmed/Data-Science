Q:

Trouble subscribing to turtlesim color sensor in a rostest

def callback(data):
    self.fail(data.data)
x = rospy.Subscriber("/turtlesim/turtle1/color_sensor",Color, callback)
rospy.spin()

        

Hi, The topic is subscribe and published but i can manage to display the content, if you have any idea thanks.I am using rostest and the master server is different than with roslaunch. (conflit or setup to do?). it's never leave the rospy.spin()
thanks for your answer, the topic is good. When it subscribe I get this so it should be okay. But the callback is never call. I think rostest is doing something i don't get. I run the same in listener.py(from tutorial) and it's work.
rostopic info /turtlesim/turtle1/color_sensor 

Type: turtlesim/Color

Publishers:   * /turtlesim/turtlesim_node (http://jsf-p-desktop:55631/)

Subscribers:   * /turtlesim_move_test (http://jsf-p-desktop:34016/)

okey , i checked the hztest.py and they use:
 sub = rospy.Subscriber(topic, rospy.AnyMsg, self.callback)

should I look for the use of self?
Regards

Originally posted by gainerems on ROS Answers with karma: 23 on 2011-06-14
Post score: 1

A:

You'll be unable to connect with nodes that were launched under rostest since rostest uses port 22422 instead of 11311. You will need to change the ROS_MASTER_URI to accommodate this, i.e.:
$> export ROS_MASTER_URI=http://your-hostname:22422

This is described in more detail here.

Originally posted by jbohren with karma: 5809 on 2011-06-16
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by gainerems on 2011-06-16:
Thx, actually I run the test and in another terminal (with changing the host) with the listener it works. The problem is in the test script, I can't get topic data from their. It's look like I can subscribe but i can't "listen" in test script.

