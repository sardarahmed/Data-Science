Q:

How to get the info from a goal with more than one type in a goalCB?

Hey, I encountered the following problem: My goal definition in my action file has two types and I only know how to get one of this values from the acceptNewGoal().
My goal definition is:
#goal definition
float32 linear
float32 angular
---
and my goalCB:

void goalCB()

{
goal_.linear = as_.acceptNewGoal()->linear;

steer_.linear = goal_.linear*15/2;  
steer_.angular = goal_.angular*45/2; 
steer_pub_.publish(steer_);

}
As you can see I can only manage to get one value, not both.
Anyone an idea how to do it? Or is it even possible?
Thanks in advance!

Originally posted by DIDI on ROS Answers with karma: 32 on 2013-03-12
Post score: 0

A:

You need to save the entire goal to a variable, rather than just the linear portion of the goal.
EDIT: acceptNewGoal() returns a boost ConstPtr, so you'll need to change the type of goal_.  For example if your declaration was car_joy::Velocity goal_;, you'd need to change it to car_joy::Velocity::ConstPtr goal_ and then use -> operators instead of . operators.
Try this:
void goalCB()
{
    //where goal_ is some kind of ConstPtr
    goal_ = as_.acceptNewGoal();
    steer_.linear = goal_->linear*15/2;  
    steer_.angular = goal_->angular*45/2; 
    steer_pub_.publish(steer_);
}

Originally posted by thebyohazard with karma: 3562 on 2013-03-12
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by DIDI on 2013-03-12:
I tried it before, it gives me an error. Like: no correspondence for »operator=«. And I tried with goal_ as car_joy::SteerCarGoal goal_; and car_joy::Velocity goal_; (Velocity is a custom msg with linear and angular float types.
Comment by TheMilkman92 on 2021-04-20:
Thanks for this answer! Been trying to figure this on and off for a week.

