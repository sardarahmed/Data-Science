Q:

Get Const::PTR from message

Hi all,
For a specific function that is not a callback, I require a const sensor_msgs::ImageConstPtr& image_pointer to work with that is derived from a regular sensor_msgs::Image source_image that I already have.
How would one get such a constant image pointer from a regular message?
Thanks!
Ruud

Originally posted by Ruud on ROS Answers with karma: 212 on 2014-11-04
Post score: 5

A:

If its no problem for your that the data is copied you can do something like:
sensor_msgs::ImageConstPtr your_const_pointer( new sensor_msgs::Image( source_image ) );

Note that, this calls the copy constructor of sensor_msgs::Image thereby copying the underlying data. (But I guess its Ok for you because you want ConstPtr)
If you need a shared pointer that can modify the data in your original object this is not possible in this way because you cannot (safely) create a shared_pointer for a object you do not have the ownership for  ( Unless you already have a shared_pointer (, which you don't,) and the object you intend to point to does not implement boost enable_shared_from_this (which message types do not) ) ....

Originally posted by Wolf with karma: 7555 on 2014-11-04
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by Ruud on 2014-11-04:
Thanks! That worked.

