Q:

Correct way to use arguments

I have a launch file that plays rosbag files among other things. Right now it is something like this
<launch>
   <node name="rosbag" type="play" pkg="rosbag" args="--pause $(find my_ros_package)/bags/this_bag01.bag" >
   </node>
....
</launch>

So, when launched it plays the rosbag file this_bag01.bag
I want to make it more flexible so that I can call it with any rosbag file. What is the most appropriate way to do this?

The way I am thinking is

Create a shell script file that I can call with an argument

In this shell I can put
export LAUNCH_FILE= (and here the argument)
roslaunch my_ros_package  thelauch_file.launch

Inside the launch file put $(env LAUNCH_FILE)
 <launch>
    <node name="rosbag" type="play" pkg="rosbag" args="--pause $(find my_ros_package)/bags/($ env LAUNCH_FILE)" ></node>
 </launch>

Originally posted by Kansai on ROS Answers with karma: 170 on 2021-04-07
Post score: 0

A:

Well, only for changing the file to play, this seems pretty overkill to me. And still limits you to have the file located at my_ros_package/bags/, which again isn't very generic...
A few points to consider:

wrapping the whole thing in a shell script, when all you do is export the environment variable and then call the launch file is not required. You could simply export the variable manually. I see no benefit in adding the additional step there.

You could also use a launch arg, instead of the environment variable substitution. Basically change the launch file to
 <launch>
      <arg name="file" default="this_bag01.bag"/>
      <node name="rosbag" type="play" pkg="rosbag" args="--pause $(find my_ros_package)/bags/($arg file)"/> 
 </launch>

and call it with roslaunch my_ros_package thelaunch_file.launch file:=otherfile.bag.

Check out the docs about the various posibilities.
Personally, I'd definitely go for option two (actually, I'll manually launch the rosbag executable, but then again, you might need the filename somewhere else). Option one seems to me to try to accomplish the same thing, at the expense of adding another file that you'd have to change every time (which is not good for any VCS)...

Originally posted by mgruhler with karma: 12390 on 2021-04-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by gvdhoorn on 2021-04-08:
Why even consider using anything but roslaunch args for this?
The advantage of the shell script approach is unclear to me and it seems like this is a textbook example of a situation where args are meant to be used.

