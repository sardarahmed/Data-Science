Q:

Polling overall diagnostics state

How do you find the overall diagnostics state from the diagnostics aggregator?
My diagnostics are running and viewable in RQT monitor, and now I'd like to make a simple rospy node that sets a status LED to red if there's an error, and green otherwise.
From the docs, I see there's a /diagnostics_toplevel_state topic, which I intuit should contain this info, but when I echo it, all I see is:
level: 2
name: toplevel_state
message: ''
hardware_id: ''
values: []

do all blank values mean everything is ok, or am I misinterpreting this? Is there a better way to poll the diagnostics aggregator?

Originally posted by Cerin on ROS Answers with karma: 940 on 2017-01-14
Post score: 1

A:

The /diagnostics_toplevel_state is the correct way to get a state summary from the diagnostic aggregator.
The level field indicates the state and is set from the OK, WARN, ERROR or STALE enum values defined in the DiagnosticStatus message.
In this case, level: 2 corresponds to ERROR.

Originally posted by ahendrix with karma: 47576 on 2017-01-14
This answer was ACCEPTED on the original site
Post score: 1

