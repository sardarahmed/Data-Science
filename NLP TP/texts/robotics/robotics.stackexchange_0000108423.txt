Q:

Multiple isolated gazebo on same PC(ROS2)

I need to run multiple instances of gazebo on same PC (ROS version foxy) and want to interact with them individually like spawning a robot in one of them.
I tried using different ROS_DOMAIN_ID in different terminal and run
ros2 launch gazebo_ros gazebo.launch.py

But when i launch the command in second terminal its gzserver is automatically killed.
My main aim is to run navigation stack by using one of the gazebo world and make the robot in other gazebo world to mimic the same by publishing the same /cmd_vel values to it. Both robots are identical but with different namespaced topics and nodes.
Thanks in advance :)

A:

I found an old answer on answers.gazebosim How to open several gazebos in a linux operating system? answered by a user named @chapulina.
I am pasting the answer below:

To run various Gazebo instances, you must make sure each of them is using a different port. You can set this with the GAZEBO_MASTER_URI environment variable.
It's also convenient to run Gazebo in verbose mode so you can read error messages.
For example, on one terminal, start gzserver on the default port (11345):
gzserver --verbose

You'll see the port printed in green:
[Msg] Connected to gazebo master @ http://127.0.0.1:11345

Then on a new terminal, open gzclient:
gzclient --verbose

You'll see the same port printed in green:
[Msg] Connected to gazebo master @ http://127.0.0.1:11345

If you try to start another gzserver on a new terminal, without changing the URI, you'll get an error:
[Err] [Master.cc:96] EXCEPTION: Unable to start server[bind: Address already in use]. There is probably another Gazebo process running.

The correct way is to open a new terminal and start another instance with a new URI:
export GAZEBO_MASTER_URI=http://localhost:11346; gzserver --verbose

This time the URI is different:
[Msg] Connected to gazebo master @ http://127.0.0.1:11346

And then on a new terminal, the respective gzclient:
export GAZEBO_MASTER_URI=http://localhost:11346; gzclient --verbose

And you should also see the same URI:
[Msg] Connected to gazebo master @ http://127.0.0.1:11346

Hope it helps someone else with same issue.

