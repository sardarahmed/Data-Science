Q:

Rviz2 does not get radar virtual CAN data - Lecture9 Autoware Course

Hi, I followed step-by-step the tutorial from Daniel (the written tutorial and video-class):
https://www.youtube.com/watch?v=PcVIO-xoNv8&t=3286s
All the nodes were launched with success, and the virtual CAN was set and created. However when I open the rviz2 there is not radar_base link in Fixed Frames (Also any option to scroll down and find this link, just map as Fixed Frame).
It seems that rviz2 is not receiving info of the virtual CAN or the node that publish the raw CAN data into object list. There is some communication issue that I do not know what is.
The difference from my screen to solution terminal screen is the following messages marked within **** boded which I receive after launch the radar node and rviz2 (which in lecture tutorial does not appear):
output of launch ros2 node: $ros2 launch radar_conti_ars408 radar.launch.py
> [INFO] [launch]: All log files can be found below /home/autoware-ros2/.ros/log/2021-02-19-16-44-51-968889-ade-8186
[INFO] [launch]: Default logging verbosity is set to INFO
1613749492.281343 [0]       ****ros2: using network interface wlp2s0 (udp/192.168.100.10) selected arbitrarily from: wlp2s0, docker0****
[INFO] [radar_conti_ars408_composition-1]: process started with pid [8197]
****[radar_conti_ars408_composition-1] 1613749492.319354 [0] radar_cont: using network interface wlp2s0 (udp/192.168.100.10) selected arbitrarily from: wlp2s0, docker0****

And after launch rviz2: $rviz2
****QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-autoware-ros2'
1613749566.381037 [0]      rviz2: using network interface wlp2s0 (udp/192.168.100.10) selected arbitrarily from: wlp2s0, docker0****
[INFO] [rviz2]: Stereo is NOT SUPPORTED
[INFO] [rviz2]: OpenGl version: 4.6 (GLSL 4.6)
[INFO] [rviz2]: Stereo is NOT SUPPORTED

This is the content of my .aderc file:
export ADE_DOCKER_RUN_ARGS="--cap-add=SYS_PTRACE -e RMW_IMPLEMENTATION=rmw_cyclonedds_cpp"

export ADE_GITLAB=gitlab.com
export ADE_REGISTRY=registry.gitlab.com
export ADE_IMAGES="
  registry.gitlab.com/autowarefoundation/autoware.auto/autowareauto/ade:master
  registry.gitlab.com/autowarefoundation/autoware.auto/autowareauto:master

I believe the error is regarding this message " rviz2: using network interface wlp2s0 (udp/192.168.100.10) selected arbitrarily from: wlp2s0, docker0"  or this advertise: "*QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-autoware-ros2'"
However I am not sure, and what file to change. How can fix this issue, and  remove this "error"?
I am following this https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/502 to try to fix this issue, however I do not know how to expose the nvidia to /dev/nvidia0 ( I do not know how to check this). My docker is > 19.03 and container--toolkit is installed:
Output of nvidia-smi command:
NVIDIA-SMI 460.32.03    Driver Version: 460.32.03    CUDA Version: 11.2 

ouptut of docker --version command:
Docker version 19.03.12, build 48a66213fe

How rviz2 should open:

How it is currently opening:

Using the command: ip link show
I got:the networks available:
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: enp3s0: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 1c:39:47:5e:f1:88 brd ff:ff:ff:ff:ff:ff
3: wlp2s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000
    link/ether c8:21:58:f9:53:4e brd ff:ff:ff:ff:ff:ff
4: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:da:7e:fe:b2 brd ff:ff:ff:ff:ff:ff
5: can0: <NOARP,UP,LOWER_UP> mtu 72 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/can 

enter code here

Then I imagine that I neet to set rviz2 to the network 5 -= can0 and not the arbitrarly used 3-wlp2s0. The question is how? I have seen some replies on ROS Answers:
https://answers.ros.org/question/363258/ros2-run-rviz-on-remote-machine/
and
https://answers.ros.org/question/301056/ros2-rviz-in-docker-container/
I have also this issue that I tried all the Google possibilities to fix, however with no success:
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-autoware-ros2'

What does this mean???
However I still do not know how exactly to do this and which files to change and where these files are located.
Is it on .aderc file, all these changes to be done?

Originally posted by Vini71 on ROS Answers with karma: 266 on 2021-02-19
Post score: 0

Original comments
Comment by gvdhoorn on 2021-02-19:
I'm sorry, but I've closed your question. You've been a member of this board for about 2 years now, and have multiple questions posted and answered.
You should be aware by now of the request not to post screenshots of terminals, nor of code, or text editors.
It's all text, so if there are relevant parts, copy-paste them into your question and format them correctly (using the Preformatted Text button (the one with 101010 on it)).
If you edit your question and fix the terminal screenshots, we can re-open.
Comment by Vini71 on 2021-02-19:
@gvdhoom I have re-edited the question according to your guidelines, could you please re-open it?
Can I put pictures of rviz2 (how it should be and how it actually is) ?
Thanks in advance.
Comment by gvdhoorn on 2021-02-19:\

Can I put pictures of rviz2 (how it should be and how it actually is) ?

of course. RViz is a GUI program.

A:

I have finally figure out the issue. Such for the Lecture 9 (Radar) as the Lecutre of LGSVL simulator (Lidar+camera)
The fact is that if you launch rviz2 with "$User" as the example they display an error will happen...(do not ask me why). Also another issue that always happen with me is that when I do:

$ source install/setup.bash

in any terminal that I wish to launch a ros2 node then I get the issue:
Segmentation Fault (Core dumped)
Someone knows why???
Actually I still need to fix this another issue. But the following steps worked for me if someone wishes to reproduce these live classes and had the same problem as me go ahead:
Change the “$USER” by your directory where ade is:
in my case:
cd adehome/AutowareAuto
and then enter with the normal command and later add at the end rviz2 __node=rviz2:
so the right cmd is:
rviz2 -d /home/autoware-ros2/adehome/AutowareAuto/install/autoware_auto_examples/share/autoware_auto_examples/rviz2/autoware.rviz __node=rviz2
It is also pretty important to set the topics to listen correctly MANUALLY, because does not appear to select!
And of course set the ros_bridge port of the CAN/LG/CAR for the same of the ROS2 using
~/adehome/ros2-lgsvl-bridge$ lgsvl_bridge 
**or ~/ros2-web-bridge$ node bin/rosbridge.js – unfortunately this does not work because it was done for previous version of lgsvl simulator 20.05 as written in the Autoware-lecture tutoral** :https://gitlab.com/ApexAI/autowareclass2020/-/blob/master/lectures/11_LGSVL_Simulator/lgsvl-simulation.md#node-js
Then use the steps below:
IT WORKS EASIER USING THE LGSVL-Bridge following this tutorial:
https://www.lgsvlsimulator.com/docs/autoware-auto-instructions/#lgsvl-bridge-running
Step by step below:
A) open 2 terminals:
Terminal 1:
$ cd adehome/AutowareAuto/
$ source .aderc
$ ade start
$ ade enter
$ colcon build  #(in AutowareAuto folder)
$ rviz2 -d /home/autoware-ros2/adehome/AutowareAuto/install/autoware_auto_examples/share/autoware_auto_examples/rviz2/autoware.rviz __node=rviz2

Terminal 2:
$ ade enter
$ cd adehome/ros2-lgsvl-bridge/
$ source install/setup.bash
$ lgsvl_bridge

Open the simulator executable locate in:
~/Desktop/Desktop/lgsvlsimulator-linux64-2020.06/lgsvlsimulator-linux64-2020.06$

Right bottom of mouse and click run
2 Clicks over OpenWebBrowser
-Choose the configured simulation to run

Originally posted by Vini71 with karma: 266 on 2021-02-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2021-02-23:\

The fact is that if you launch rviz2 with "$User" as the example they display an error will happen..

this sounds like perhaps a path used to load a file or similar is assumed to be relative to $USER and when it's not there, things crash.
Nice sleuthing.
I would strongly suggest you report this on the appropriate issue tracker for these lessons.
I don't know where that is, but the chances of the authors/maintainers of those lessons reading your post here on ROS Answers are rather slim, so to increase visibility -- and this getting fixed -- an issue on a tracker would be better.

