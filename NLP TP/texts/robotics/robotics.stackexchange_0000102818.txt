Q:

Doubts on rtabmap stereo_odometry parameters and feature visualization

Hi, I am trying to tune the many parameters of RtabMap, in particular the ones of the stereo_odometry node.
I have some doubts: in this paper  it's written that "for F2F (Odom/Strategy=1), optical flow is done directly on GFTT features without having to extract descriptors".
My question is: if I change the parameter Vis/CorType to 0, so the correspondences computation approach is Features Matching, which approach is used? features matching or optical flow?
Similarly If I change the parameter Vis/FeatureType to use different features than GFTT, is this parameter valid, or with F2F approach the only parameter used is the one described in the paper?
Also another question: there is a way to view at the detected features? My idea is to plot the corners  (for F2F) and wordsValues (for F2M) points in the OdomInfo message but I don't know if there is a better way.
I am using Ubuntu 20.04 with ROS noetic and rtabmap built from source

Originally posted by AlessioParmeggiani on ROS Answers with karma: 165 on 2022-12-14
Post score: 0

A:

Hi,
If you set Vis/CorType=0, feature matching will be done. In the paper, we compared Odom/Strategy=0 (F2M)+Vis/CorType=0 (Feature matching) with Odom/Strategy=1 (F2F)+Vis/CorType=1 (Optical Flow). When we set Vis/FeatureType to 6, it is GFTT keypoint + BRIEF descriptor. For Vis/CorType=1, the descriptors are just not extracted on GFTT features, optical flow is done instead. All approaches in Vis/FeatureType have a detector+descriptor, the later is not used in case of optical flow.
Look at the F2M or F2F sections in the OdomInfo message, you will see the features are published.
If you use rtabmapviz with subscribe_odom_info, you will see the features over the images in Odometry view.

Originally posted by matlabbe with karma: 6409 on 2022-12-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by AlessioParmeggiani on 2022-12-15:
Thank you for the explanation!   :)
I tried to use rtabmapviz but I didn't find some explanation about what the yellow and green dots represent on the image, moreover if I use it the odometry gets lost, maybe it's because by using it the computer slows down, the stereo_odometry node can't compute the odometry fast enough and so it loses some frames.
Comment by matlabbe on 2022-12-15:
"gets lost" -> mostly depend of your kind of camera. If you have narrow FOV with motion blur (rolling shutter), it will easily get lost. See also Lost Odometry section here https://github.com/introlab/rtabmap/wiki/Kinect-mapping#lostodometry

