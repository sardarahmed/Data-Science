Q:

Installing ros-melodic-desktop uninstalls python3-catkin-pkg

See relevant GitHub tracking ticket with more info and steps here.
I am attempting to build a ROS2 package that uses ROS1 bridge (rosbag2_bag_v2) in a GitHub Actions CI pipeline. I am able to install the dependencies for ROS1 which include python3-catkin-pkg. However, when I run apt-get install ros-melodic-desktop, it automatically removes python3-catkin-pkg:
The following packages will be REMOVED:
python3-catkin-pkg python3-rosdep python3-rosdep-modules python3-rosdistro
python3-rospkg

Is there a reason this occurs and is it possible to install a ROS1 distro without removing python3-catkin-pkg

Originally posted by piraka9011 on ROS Answers with karma: 32 on 2020-03-04
Post score: 0

A:

Is there a reason this occurs

ROS1 / catkin_make uses python-catkin-pkg to parse package.xml.
In ROS2 / colcon python3-catkin-pkg is used.
These 2 packages conflict as they install the same scripts.
The libraries can be installed side by side since some modules packages have been created:
python3-catkin-pkg-modules and python-catkin-pkg: https://github.com/ros-infrastructure/catkin_pkg/pull/157

is it possible to install a ROS1 distro without removing python3-catkin-pkg

Not that I know of, as these packages conflict.
On the bright side I'd expect most of these packages to be reinstalled in their python2 variant along with ROS1.
You'll just end up with the python2 version of the executables instead of the python3 one.
If I were you I would just run that install and then reinstall the uninstalled modules like python3-rosdep-modules
A better long term resolution would be for packages that use the python modules but not the scripts to declare their dependencies on python(3)-pkg-name-modules instead of python(3)-pkg-name.

Originally posted by marguedas with karma: 3606 on 2020-03-04
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by piraka9011 on 2020-03-06:
Thank you for the explanation

