Q:

rosbridge cannot connect to secure websocket, timed out error

I am using rosbridge and roslibjs to connect to ros. I wrote an HTML page that publishes a simple std_msgs::String message. I need to serve this page through HTTPS, therefore I have to connect to rosbridge through the wss protocol. Using simple http and ws it all works, but then I switch to the secure protocol i get the following error in the javascript console:

WebSocket connection to
'wss://localhost:9090/' failed: Error
in connection establishment:
net::ERR_TIMED_OUT

I serve the web page using apache default-ssl site and start rosbridge as follows:

roslaunch rosbridge_server
rosbridge_websocket.launch ssl:=true
certfile:=/etc/ssl/certs/ssl-cert-snakeoil.pem
keyfile:=/etc/ssl/private/ssl-cert-snakeoil.key
authenticate:=false

To connect to rosbridge I use:
  $(document).ready(function(){   var ros = new ROSLIB.Ros({
     url : 'wss://localhost:9090'    });

   ros.on('connection', function() {
     console.log('Connected to websocket server.');    });
   ros.on('error', function(error) {
     console.log('Error connecting to websocket server: ', error);    });
   ros.on('close', function() {
     console.log('Connection to websocket server closed.');    });  
  });

I am running ROS Groovy on Ubuntu 12.04 on a x86 machine. I am using rosbridge version
0.5.6-1precise-20140906-1447-+0000

Originally posted by giulatona on ROS Answers with karma: 1 on 2015-04-13
Post score: 0

A:

I found the solution. The problem was caused by missing read permission on the key file /etc/ssl/private/ssl-cert-snakeoil.key. After copying that file in my home folder and setting the right permissions the connection to the websocket went through properly.

Originally posted by giulatona with karma: 1 on 2015-05-18
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by cooper on 2020-04-10:
can you tell us the steps? I got the same problem, but copying /etc/ssl/private/ssl-cert-snakeoil.key file to my home directory and changing permissions didn't work for me.

