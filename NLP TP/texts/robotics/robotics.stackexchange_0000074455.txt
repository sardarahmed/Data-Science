Q:

image_view stereo_view don't show image or disparity (ROS Kinetic)

I'm running ROS Kinetic Kame on Ubuntu 16.04. I have 2 320x240 gray-scale cameras with camera_info generated by running camera_calibration.
I have the following topics
/camera/front/left/image_raw
/camera/front/right/image_raw
/camera/front/left/camera_info
/camera/front/right/camera_info

I then generate the disparty map using
ROS_NAMESPACE=/camera/front rosrun stereo_image_proc stereo_image_proc

This generates a bunch of topics
/camera/front/disparity
/camera/front/left/image_color
/camera/front/left/image_color/compressed
/camera/front/left/image_color/compressed/parameter_descriptions
/camera/front/left/image_color/compressed/parameter_updates
/camera/front/left/image_color/compressedDepth
/camera/front/left/image_color/compressedDepth/parameter_descriptions
/camera/front/left/image_color/compressedDepth/parameter_updates
/camera/front/left/image_color/theora
/camera/front/left/image_color/theora/parameter_descriptions
/camera/front/left/image_color/theora/parameter_updates
/camera/front/left/image_mono
/camera/front/left/image_mono/compressed
/camera/front/left/image_mono/compressed/parameter_descriptions
/camera/front/left/image_mono/compressed/parameter_updates
/camera/front/left/image_mono/compressedDepth
/camera/front/left/image_mono/compressedDepth/parameter_descriptions
/camera/front/left/image_mono/compressedDepth/parameter_updates
/camera/front/left/image_mono/theora
/camera/front/left/image_mono/theora/parameter_descriptions
/camera/front/left/image_mono/theora/parameter_updates
/camera/front/left/image_rect
/camera/front/left/image_rect/compressed
/camera/front/left/image_rect/compressed/parameter_descriptions
/camera/front/left/image_rect/compressed/parameter_updates
/camera/front/left/image_rect/compressedDepth
/camera/front/left/image_rect/compressedDepth/parameter_descriptions
/camera/front/left/image_rect/compressedDepth/parameter_updates
/camera/front/left/image_rect/theora
/camera/front/left/image_rect/theora/parameter_descriptions
/camera/front/left/image_rect/theora/parameter_updates
/camera/front/left/image_rect_color
/camera/front/left/image_rect_color/compressed
/camera/front/left/image_rect_color/compressed/parameter_descriptions
/camera/front/left/image_rect_color/compressed/parameter_updates
/camera/front/left/image_rect_color/compressedDepth
/camera/front/left/image_rect_color/compressedDepth/parameter_descriptions
/camera/front/left/image_rect_color/compressedDepth/parameter_updates
/camera/front/left/image_rect_color/theora
/camera/front/left/image_rect_color/theora/parameter_descriptions
/camera/front/left/image_rect_color/theora/parameter_updates
/camera/front/points2
/camera/front/right/image_color
/camera/front/right/image_color/compressed
/camera/front/right/image_color/compressed/parameter_descriptions
/camera/front/right/image_color/compressed/parameter_updates
/camera/front/right/image_color/compressedDepth
/camera/front/right/image_color/compressedDepth/parameter_descriptions
/camera/front/right/image_color/compressedDepth/parameter_updates
/camera/front/right/image_color/theora
/camera/front/right/image_color/theora/parameter_descriptions
/camera/front/right/image_color/theora/parameter_updates
/camera/front/right/image_mono
/camera/front/right/image_mono/compressed
/camera/front/right/image_mono/compressed/parameter_descriptions
/camera/front/right/image_mono/compressed/parameter_updates
/camera/front/right/image_mono/compressedDepth
/camera/front/right/image_mono/compressedDepth/parameter_descriptions
/camera/front/right/image_mono/compressedDepth/parameter_updates
/camera/front/right/image_mono/theora
/camera/front/right/image_mono/theora/parameter_descriptions
/camera/front/right/image_mono/theora/parameter_updates
/camera/front/right/image_rect
/camera/front/right/image_rect/compressed
/camera/front/right/image_rect/compressed/parameter_descriptions
/camera/front/right/image_rect/compressed/parameter_updates
/camera/front/right/image_rect/compressedDepth
/camera/front/right/image_rect/compressedDepth/parameter_descriptions
/camera/front/right/image_rect/compressedDepth/parameter_updates
/camera/front/right/image_rect/theora
/camera/front/right/image_rect/theora/parameter_descriptions
/camera/front/right/image_rect/theora/parameter_updates
/camera/front/right/image_rect_color
/camera/front/right/image_rect_color/compressed
/camera/front/right/image_rect_color/compressed/parameter_descriptions
/camera/front/right/image_rect_color/compressed/parameter_updates
/camera/front/right/image_rect_color/compressedDepth
/camera/front/right/image_rect_color/compressedDepth/parameter_descriptions
/camera/front/right/image_rect_color/compressedDepth/parameter_updates
/camera/front/right/image_rect_color/theora
/camera/front/right/image_rect_color/theora/parameter_descriptions
/camera/front/right/image_rect_color/theora/parameter_updates
/camera/front/stereo_image_proc/parameter_descriptions
/camera/front/stereo_image_proc/parameter_updates
/camera/front/stereo_image_proc_debayer_left/parameter_descriptions
/camera/front/stereo_image_proc_debayer_left/parameter_updates
/camera/front/stereo_image_proc_debayer_right/parameter_descriptions
/camera/front/stereo_image_proc_debayer_right/parameter_updates
/camera/front/stereo_image_proc_rectify_color_left/parameter_descriptions
/camera/front/stereo_image_proc_rectify_color_left/parameter_updates
/camera/front/stereo_image_proc_rectify_color_right/parameter_descriptions
/camera/front/stereo_image_proc_rectify_color_right/parameter_updates
/camera/front/stereo_image_proc_rectify_mono_left/parameter_descriptions
/camera/front/stereo_image_proc_rectify_mono_left/parameter_updates
/camera/front/stereo_image_proc_rectify_mono_right/parameter_descriptions
/camera/front/stereo_image_proc_rectify_mono_right/parameter_updates

I can view the generated rect images for both left and right topics using image_view, but I can't seem to view the disparity topic. When I try and run stereo_view, things just freeze.
rosrun image_view stereo_view stereo:=/camera/front image:=image_rect

I'm definitely getting something in the /guidance/front/disparity since rostopic echo splits out a huge array of numbers. Is there another method to view the disparity image?

Originally posted by uwleahcim on ROS Answers with karma: 101 on 2016-06-09
Post score: 0

A:

Well, I tried running my code on a machine with ROS Inidigo and Ubuntu 14.04, and I had no issue displaying the displarity image with image_view stereo_view.  Thus, I'm thinking this might be an issue with either ROS Kinetic Kame.

Originally posted by uwleahcim with karma: 101 on 2016-06-09
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by glagla on 2016-07-21:
Dis you manage to resolve this?
Comment by uwleahcim on 2016-07-21:
I haven't tried displaying the disparity topic with image_view stereo_view. I did convert the disparity topics into depth map using camera_info from the right camera (it has the baseline in the projection matrix). From there I was able to display the depth map via rqt_image_view.
Comment by apetersen on 2016-08-02:
Could you please post the steps to convert the disparity topic into a depth map by using camera_info from the right camera.  Not sure I follow what you did there and I would like to repeat
Comment by uwleahcim on 2016-08-02:
the disparity image generate by stereo_image_proc is a floating point image following the ROS guidelines. Thus it is very simple and straight forward to convert it into a depth map.  This math is simply just
depth = baseline * focallength / disparity

(don't have space to post full code).
Comment by glagla on 2016-08-03:
Could you send me the code you tried by mail? @ svendxs@gmail.com please?

