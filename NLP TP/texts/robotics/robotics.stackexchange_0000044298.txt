Q:

I am unable to serialize and deserialize ros msgs.. Please Help

Hello Community,
I am using the ros::serialization library to serialize a ros msg type into a buffer. However when I pass the same buffer to a deserialize function it gives me the following error.
terminate called after throwing an instance of 'ros::serialization::StreamOverrunException'
what():  Buffer Overrun
Could someone please help me in figuring this out? I literally copied both ros::serialization and ros::deserialization from the ROS wiki under roscpp.
Any help is appreciated.
Thanks
Ammar
EDIT: Here is the code -
void Trader::serialize_task(const multiagent_coordination_msgs::TaskToken& my_task){
    namespace ser = ros::serialization;
    multiagent_coordination_msgs::Agent my_agent;
    uint32_t serial_size = ros::serialization::serializationLength(my_task);

    boost::shared_array<uint8_t> buffer(new uint8_t[serial_size]);

    ser::OStream stream(buffer.get(), serial_size);
    ser::serialize(stream, my_task);
           
    deserialize_task(buffer);
}

void Trader::deserialize_task(const boost::shared_array<uint8_t>& my_buffer){
    namespace ser = ros::serialization;

    multiagent_coordination_msgs::TaskToken my_task;
        
    uint32_t serial_size = ros::serialization::serializationLength(my_task);
    boost::shared_array<uint8_t> buffer(new uint8_t[serial_size]);
          
    ser::IStream stream(buffer.get(), serial_size);
    ser::deserialize(stream, my_task);
}

Originally posted by Ammar on ROS Answers with karma: 289 on 2012-09-20
Post score: 0

Original comments
Comment by Lorenz on 2012-09-20:
It would help to see your code.

A:

I actually ended using 'pickle' in Python to do the same thing. It took away those 2 functions for literally 2 lines in code. I am sure the serialize_data in roscpp has more sophisticated purposes. However all I was trying to do was create a byte stream and send it out over a network. Then deserialize it into the data structure on the other end. For anyone else attempting similar tasks: I would highly suggesting looking at pickle.dumps and pickle.loads in Python.

Originally posted by Ammar with karma: 289 on 2012-09-21
This answer was ACCEPTED on the original site
Post score: 1

