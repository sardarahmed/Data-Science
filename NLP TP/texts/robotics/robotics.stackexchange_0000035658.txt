Q:

about compiling opencv programs outside ROS

How could I compile opencv programs outside ROS?
I installed the opencv-2.3.1 package through ROS, but there seems to be link errors when compiling opencv programs outside ROS.
I created a Makefile file with the following content
DisplayImage:DisplayImage.cpp
    @g++ -L/usr/lib/ `pkg-config opencv-2.3.1 --cflags --libs` -o DisplayImage DisplayImage.cpp

But the compiling result is
XXX@ubuntu:~/Documents/programs/OpenCV$ make
/usr/bin/ld: cannot find -l/usr/lib/libopencv_contrib.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_legacy.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_objdetect.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_calib3d.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_features2d.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_video.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_highgui.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_ml.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_imgproc.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_flann.so.2.3.1
/usr/bin/ld: cannot find -l/usr/lib/libopencv_core.so.2.3.1
collect2: ld returned 1 exit status
make: *** [DisplayImage] Error 1
pkg-config --libs --cflags opencv-2.3.1

shows
-I/usr/include/opencv-2.3.1/opencv -I/usr/include/opencv-2.3.1  -l/usr/lib/libopencv_contrib.so.2.3.1 -l/usr/lib/libopencv_legacy.so.2.3.1 -l/usr/lib/libopencv_objdetect.so.2.3.1 -l/usr/lib/libopencv_calib3d.so.2.3.1 -l/usr/lib/libopencv_features2d.so.2.3.1 -l/usr/lib/libopencv_video.so.2.3.1 -l/usr/lib/libopencv_highgui.so.2.3.1 -l/usr/lib/libopencv_ml.so.2.3.1 -l/usr/lib/libopencv_imgproc.so.2.3.1 -l/usr/lib/libopencv_flann.so.2.3.1 -l/usr/lib/libopencv_core.so.2.3.1
How could I fix the problem? Thank you.

Originally posted by MichaelHsu170 on ROS Answers with karma: 67 on 2011-11-11
Post score: 2

A:

As far as I know, gcc requires linker option as -L/usr/lib -lopencv_core or /usr/lib/libpoencv_core.so.2.3.1 and ~-l/usr/lib/libopencv_core.so.2.3.1` is not supported.
At this moment, we need following script to modify output of pkg-config to gcc compliant.
$ pkg-config --libs opencv-2.3.1 | sed 's#-l\Slib([^./]).so.2.3.1#-l\1#g'
-lopencv_contrib -lopencv_legacy -lopencv_objdetect -l3d -lopencv_features2d -lopencv_video -lopencv_highgui -lopencv_ml -lopencv_imgproc -lopencv_flann -lopencv_core
$ pkg-config --libs opencv-2.3.1 | sed 's#-l##g'
/usr/lib/libopencv_contrib.so.2.3.1 /usr/lib/libopencv_legacy.so.2.3.1 /usr/lib/libopencv_objdetect.so.2.3.1 /usr/lib/libopencv_calib3d.so.2.3.1 /usr/lib/libopencv_features2d.so.2.3.1 /usr/lib/libopencv_video.so.2.3.1 /usr/lib/libopencv_highgui.so.2.3.1 /usr/lib/libopencv_ml.so.2.3.1 /usr/lib/libopencv_imgproc.so.2.3.1 /usr/lib/libopencv_flann.so.2.3.1 /usr/lib/libopencv_core.so.2.3.1

Originally posted by Kei Okada with karma: 1186 on 2011-11-14
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by MichaelHsu170 on 2011-11-14:
Thank you very much!

