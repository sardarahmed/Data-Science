Q:

How to programmatically attach link to a model during simulation?

Indigo on Ubuntu 14.04 with Gazebo 7.3 and Python 2.7
I have non-colliding URDF models to be used as markers in Gazebo.  The markers will be attached to objects to be grasped, and their positions relative to those objects will change as planning executes.  I have not found a tutorial or example of programmatically attaching a URDF model to either a world object or robot link as a link that moves with the target object.  Can this be done with rospy?
I'd like to implement this in Gazebo rather than RViz because the equipment I have been provided with struggles with Gazebo on its own.

Originally posted by jwatson_utah_edu on Gazebo Answers with karma: 5 on 2016-08-07
Post score: 0

Original comments
Comment by Peter Mitrano on 2016-08-08:
for starters, you're probably going to be happier just upgrading your computer. If you can't run gazebo and rviz then whatever project you're working on is going to be miserable to work on.
Comment by jwatson_utah_edu on 2016-08-08:
Upgrading lab equipment isn't under my authority, but I have suggested it.  Until then I'm making lemonade.

A:

There aren't any good tutorials on it. It's one of the areas I think we need a lot of work, since lots of people seem to be asking for it. You're really using the wrong tool for the job, gazebo is not meant for markers. Here's what I can think of:
You can write a visual plugin
An example that generates mazes (they don't change over time though, they just get inserted once)
https://github.com/PeterMitrano/gzmaze/blob/master/world_plugin/MazeFactory.cc
An example that publishes gazebo::msgs::Visual
https://github.com/WPISmartmouse/2016_Solvers/blob/master/sim/SimMouse.cpp
Other relavent questions
http://answers.gazebosim.org/question/5228/how-to-programmatically-create-sdf-modelsfiles/
http://answers.gazebosim.org/question/8932/change-link-properties-programmatically/
But again, you're using the wrong tool for the job. Rviz is what you want.

Originally posted by Peter Mitrano with karma: 768 on 2016-08-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by jwatson_utah_edu on 2016-08-08:
Thanks, I will take a look at these. ~ The traditional Gazebo / Rviz split seems a little strange to me.  Gazebo has ample graphical capability, so my first instinct was to use the tool I was already using to give a very basic representation (less than 5 markers) of what is going on under the hood.  Rviz is great for displaying point clouds and complex plans, but that's much more than I need at the moment.
Comment by Peter Mitrano on 2016-08-08:
You say rviz is more than you need. The ironic part is, so is gazebo. The truth is rviz was developed to display simple markers and points--gazebo was not. Of course it's all ogre under the hood so it's certainly possible to do, we just haven't focused on it. There isn't a lot of dedicated API for simple graphics, and no example code because no one does it. The gazebo visual markers I linked to is the only example of simple "markers" in gazebo that I know of.
Comment by Peter Mitrano on 2016-08-08:
It's just one of the areas where gazebo couuld improve
Comment by jwatson_utah_edu on 2016-08-17:
I'm flagging this as the answer, though I'm having some trouble implementing it.
http://answers.gazebosim.org/question/14185/gazebophysicsget_world-crashes-node/
Comment by Peter Mitrano on 2016-08-21:
I feel you... it's a common use case that gets almost no tutorials or documentation. Next time I use it I'll add something. Feel free to make a PR when you figure it out
Comment by jwatson_utah_edu on 2016-08-23:
@PeterMitrano: I'd like to put one of those together once I figure that out.  I have one very specific question about getting references to objects the the Gazebo world.  See link:
http://answers.gazebosim.org/question/14185/gazebophysicsget_world-crashes-node/
I'm not sure what you mean by PR.
Comment by Peter Mitrano on 2016-08-25:
PR = pull request
it's a fairly commonly used acronym in open source

