Q:

How do i reset the odometry topic on ardrone_autonomy

Hi,
Im trying to read the /ardrone/odometry topic, but it is showing me very large values of x and y position Just When it starts. Im am wondering if there is a way to reset the odometry topic so it shows me 0 for the positions on the beginning. Also, the time that it shows is very large, so it has been counting long ago.
Thanks

Originally posted by erivera1802 on ROS Answers with karma: 59 on 2015-06-28
Post score: 1

Original comments
Comment by Willson Amalraj on 2015-06-29:
I faced the same problem. But I had an workaround. if you subtract the values of x, y and t obtained from the first call back and the subsequent values, you get the values for that session of operation. But I am eager to know if there is an actual way to reset the topic.
Comment by erivera1802 on 2015-07-01:
Well, thats a solution, thanks!
Just to know, how do you differentiate the first callback from the rest?

A:

This is what I did.
class xyz{ 
  Private:
    int count;
    double init_x, init_y, init_t;
 public: 
    xyz( ros::NodeHandle &nh){
       count = 0;
       define the callback here
    }
   void callback(...){
       if (count == 0){
          store the values of x, y and t in init_x, init_y and init_t
          count ++;
       }else{
          subtract initial values with the current values
      }
 }}

Update: If you update AR Drone firmware, you can eliminate this problem. There are a few ways to update the firmware. The easiest is thorough the official AR.FreeFlight App by Parrot. The newer versions of this app has an option to update the firmware. Just make sure your phone battery and AR Drone battery is full and click update. First the file will get transferred and after a few drone-turn on-off episodes the green lights will turn on indicating a successful firmware update. Then odometry works properly.

Originally posted by Willson Amalraj with karma: 206 on 2015-07-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Mani on 2015-12-12:
@erivera1802 Does this solution work?

