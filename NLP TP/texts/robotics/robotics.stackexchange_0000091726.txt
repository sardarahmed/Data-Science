Q:

Why does rospy::wait_for_message get stucked even though messages are being published?

I am using this method in my python script
rospy.wait_for_message("/my_topic", Bool, timeout=None)

The /my_topic messages are being published, I can see them when running rostopic echo /my_topic. But the script stays at the rospy.wait_for_message line as if it couldn't detect any messages. What could be the cause?

EDIT
$ rostopic echo -n1 /my_topic 
data: True
---

Originally posted by kump on ROS Answers with karma: 308 on 2019-05-21
Post score: 3

Original comments
Comment by curi_ROS on 2019-05-21:
wait_for_message is explicitly meant to get just one message on the topic. Does it detect at least one message?
If you need to continuously receive the data on /my_topic, you need a Subscriber.
Comment by kump on 2019-05-21:
@curi_ROS no, it doesn't detect any message. Not even one.
Comment by gvdhoorn on 2019-05-21:
What is the output of rostopic echo -n1 /my_topic?
Comment by kump on 2019-05-21:
@gvdhoorn It outputs the message.
Comment by gvdhoorn on 2019-05-21:
I actually wanted to make sure that /my_topic is of type Bool. Because if it isn't, things won't work. I also wanted to make sure that /my_topic actually exists, and is not namespaced. Without you showing us that, we cannot help you.
Comment by kump on 2019-05-21:
@gvdhoorn ok, I didn't understand what you wanted me to do. The question is now edited with the output of this command.
Comment by gvdhoorn on 2019-05-21:
Then I guess we'll need to see some of your code. Specifically how you initialise everything up to and including where you use wait_for_message(..).
It doesn't necessarily need to be your exact code, as long as it reproduces the problem you are experiencing.

A:

I've experienced the exact same problem and I noticed I was using the wait_for_message() method before initializing the node using rospy.init_node().
So, the solution would be calling the init_node() method before any publishing/subscribing (which is done implicitly by the wait_for_message() method). Hope this helps!

Originally posted by pale with karma: 66 on 2019-06-13
This answer was ACCEPTED on the original site
Post score: 5

