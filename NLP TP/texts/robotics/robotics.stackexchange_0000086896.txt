Q:

Create a subscriber to an Image topic

Hi,
Im trying to wrtie a node that subscribes to a image topic, however, after almost copying the ros tutorial, I keep getting an error.
The relevant parts of my code are:
ros::NodeHandle nh;
image_transport::ImageTransport it(nh);
image_transport::Subscriber sub;
sub=it.subscribe("/sensors/camera/top/image_raw",1, Imtest::callbackSubscriber);

And my callback is:
void Imtest::callbackSubscriber(const sensor_msgs::ImageConstPtr& msg)

The error I get is:
/home/kal3-5/workspaces/my_first_ws/src/imtest_ros_tool/src/imtest/imtest.cpp:41:83: error: invalid use of non-static member function
     sub=it.subscribe("/sensors/camera/top/image_raw",1, Imtest::callbackSubscriber);

My version of ROS is Kinetic, Ubuntu 16.04

Originally posted by erivera1802 on ROS Answers with karma: 59 on 2018-05-09
Post score: 0

A:

The problem here is at the subscriber attribution, you must pass a function pointer to it using the '&' before the method name.
If you replace the subscriber attribution line for the following, it may solves your problem:
sub=it.subscribe("/sensors/camera/top/image_raw",1, &Imtest::callbackSubscriber, this);

Waiting for reply.

Originally posted by matheusns with karma: 111 on 2018-05-09
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by PeteBlackerThe3rd on 2018-05-09:
In c++ a function name without parentheses () decomposes to a function pointer, there is no need for the & operator. The problem the OP is having is caused because they are trying to use a method of a class without a pointer to the instance of that class.
Comment by erivera1802 on 2018-05-10:
It was really funny, because a tried this solution at first, and it didnt work, but when I write the new node to show you guys the error, it worked!
Thanks a lot!

