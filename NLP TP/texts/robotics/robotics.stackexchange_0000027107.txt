Q:

Accessing visual with GetVisualAt()

Hi everyone! :)
So, my problem is that i want to access visuals in the Ogre scene with the GetVisualAt(CameraPtr _camera, const math::Vector2i &_mousePos) in a system plugin. About the coordinates, gazebo uses the mouse coordinates on the actual monitor(1366 x 768 region, for example), or the coordinates with respective to the Viewport(1074 x 650 region)? My simulator crashes, when the method returns null, so when there is no visual at the coordinates, no errors are thrown, just the core dumps. I tried to call the method in PreRender with try-catch, but it crashes anyway. Can you guys give me some tips, how to solve the problem?

Originally posted by Simon Zsolt on Gazebo Answers with karma: 41 on 2014-08-14
Post score: 1

Original comments
Comment by scpeters on 2014-09-02:
Can you post a back-trace of the core dump?
Comment by Simon Zsolt on 2014-09-04:
I solved it :D the problem was, that by default, the user camera is the active one in the simulator. I did not know, that i can pass for the function the gui::get_active_camer() UserCamPtr, i created a new camera for the scene, and with that the program crashed. After i used the gui::get_active camera as parameter, everything was fine :D
Comment by Simon Zsolt on 2014-09-04:
I solved it :D the problem was, that by default, the user camera is the active one in the simulator. I did not know, that i can pass for the function the gui::get_active_camer() UserCamPtr, i created a new camera for the scene, and with that the program crashed. After i used the gui::get_active camera as parameter, everything was fine :D
Comment by Whyamihere on 2018-10-23:
@Simon Zsolt,  how did you konw "by default, the user camera is the active one in the simulator" and what is the exact name of the function gui::getactivecamer() ? I'm facing the same problem. I really appreciate it!

A:

Answer in comments.

Originally posted by nkoenig with karma: 7676 on 2014-09-09
This answer was ACCEPTED on the original site
Post score: 0

