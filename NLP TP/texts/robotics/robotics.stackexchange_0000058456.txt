Q:

[Solved] Velodyne stack 'min_range' doesn't change

Hello,
I am a user trying to use the velodyne stack with ROS. I'm studying human interaction, so I would like the minimum distance with the Velodyne HDL-32e to be as small as possible. I understand that it has limits (as stated in the manual), however, when I attempt to change the value of the min_range parameter, nothing happens. Rviz does not update, even when I reinitialize it or anything else. The value definitely changes (as can be seen in my screenshot), but the data still reflects the minimum range as being 2.0 metres. Can someone help me out with this? Is it a possible bug?
[See joq's answer for solution]

Originally posted by Gariben on ROS Answers with karma: 5 on 2014-04-03
Post score: 0

Original comments
Comment by demmeln on 2014-04-04:
How do you change the parameter exactly? I don't see the mentioned screen shot.
Comment by Gariben on 2014-04-06:
I don't have the 'karma' to include links, sigh. I'll try to get a work around.
normal:
http://i.imgur.com/J6hgmZU.png
altered:
http://i.imgur.com/8NO7GFi.png
Comment by Gariben on 2014-04-06:
Note that it also does not change as you make the min_range larger either.
http://i.imgur.com/DBcWloU.png

A:

It's probably not a bug.
Setting min_range works for me. Note that the minimum supported in hardware is 0.9 meters.
Update: From your screenshot, it appears that you changed the parameter after the driver was running using a command like:
$ rosparam set /cloud_nodelet/min_range 10.0

The currently-released driver does not re-read parameters once it is running. So, you need to set the desired value while launching the driver. In two separate terminals try this:
$ roslaunch velodyne_driver nodelet_manager.launch model:=32E
$ roslaunch velodyne_pointcloud cloud_nodelet.launch min_range:=0.9

The reason it requires two roslaunch commands is because the 32e_points.launch script does not provide the min_range and max_range arguments. They could easily be added. If that was the root cause of your confusion, please make a comment, and I will add them in some future version, probably for ROS Indigo.
The latest not-yet-released sources support dynamic reconfigure. If you know how to create a catkin workspace, check out the code, and build it, you are welcome to try that version. It should work on Hydro and probably Groovy. Indigo is not supported yet, but should be soon.

Originally posted by joq with karma: 25443 on 2014-04-04
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Gariben on 2014-04-06:
I included screenshots in a reply above. I also reintialized RViz whenever I took them (though I don't think it matters). Any ideas why it would still behave the way it does? I'll give the launch dealie a try though.
Comment by Gariben on 2014-04-07:
That update did it. Thanks for your help, joq. Your stack is awesome and your super helpful. Just for reference I'll include pics for reference later.
http://i.imgur.com/RCmRDsN.png?1
http://i.imgur.com/O0hljAx.png?1
Thanks again. I'll try to [solved] this guy.
Comment by demmeln on 2014-04-08:
If this answer solved your problem, it would be great if you marked it as 'accepted' for others to immediately see that this was the working resolution. Thanks.
Comment by Gariben on 2014-04-08:
Sorry, new to the forum. I did it.
Comment by demmeln on 2014-04-09:
Thank you @Gariben :-)

