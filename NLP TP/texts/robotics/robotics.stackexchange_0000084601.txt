Q:

Problem with Serial library

Hi,
I have a problem when i use serial.h library, this is my test code:
#include "ros/ros.h"
#include "serial/serial.h"
#include <string>

int main(int argc, char **argv)
{
ros::init(argc, argv, "Serial");

std::string port = "/dev/ttyUSB1";
unsigned long baud = 9600;
serial::Serial myserial(port, baud, serial::Timeout(250));
if(!myserial.isOpen())
myserial.open();
size_t size = 4;
std::string read;
while (ros::ok())
{
read = myserial.read(size);
for(int x=0; x<size; x++)

{
ROS_INFO("Valores leidos: %s ", read.c_str());
ROS_INFO(" ");
}
ROS_INFO("\n");
ros::spinOnce();
}
return 0;
};

and when i compile, this is the error:
CMakeFiles/Prueba_serial.dir/src/prueba_serial.cpp.o: In the function 'main':
prueba_serial.cpp:(.text.startup+0x145): reference toserial::Serial::Serial(std::__cxx11::basic_string<char, std::char_traits, std::allocator >const&, unsigned int, serial::Timeout, serial::bytesize_t, serial::parity_t, serial::stopbits_t,serial::flowcontrol_t)' sin definirprueba_serial.cpp:(.text.startup+0x155): reference to serial::Serial::isOpen() const' not define
prueba_serial.cpp:(.text.startup+0x1c1): reference toserial::Serial::read[abi:cxx11](unsigned long)'not defineprueba_serial.cpp:(.text.startup+0x606): reference to serial::Serial::~Serial()' not define
prueba_serial.cpp:(.text.startup+0x64c): reference toserial::Serial::open()' not defineprueba_serial.cpp:(.text.startup+0x660): reference to serial::Serial::~Serial()' not define

collect2: error: ld returned 1 exit status

thanks and sorry for my English
pd: sorry for the duplicate question.

Originally posted by Skained on ROS Answers with karma: 13 on 2018-01-09
Post score: 1

A:

This tells us that most likely you forgot to add the serial package to your find_package(catkin COMPONENT ..) line in your CMakeLists.txt.
See also the Catkin documentation on adding catkin library dependencies.
Without seeing your CMakeLists.txt this is a guess though.

Originally posted by gvdhoorn with karma: 86574 on 2018-01-09
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by William on 2018-01-09:
beat me to it :)
Comment by gvdhoorn on 2018-01-09:
Had to deal with the duplicate, so thought might as well answer it :)
Comment by Skained on 2018-01-09:
ok.. yes, this is the problem, my fail
thank you very much

