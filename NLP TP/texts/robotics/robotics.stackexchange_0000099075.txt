Q:

Autoware.Auto best way to create a PCD map

Separating this from the question here: https://answers.ros.org/question/378634/autowareauto-ros2bag-compatibility-with-point-cloud-map-builder/
What is the best way to create a PCD map? In the other link I mentioned using the https://tools.tier4.jp/feature/point_cloud_map_builder/ to create a PCD map. But are there any other better ways? We will be getting a .bag file of PointCloud2 messages for an environment we wanted to test in. Is there any additional sensory information we should collect (for building the map or in general for using with Autoware.Auto)? Looking for something as in depth as the Lanelet2 tutorial here but for building pointcloud maps in Autoware.Auto

Originally posted by sisaha9 on ROS Answers with karma: 90 on 2021-05-19
Post score: 1

A:

During development of the Autonomous Valet Parking ODD, we added the package ndt_mapping_nodes. Unfortunately, since it was just a proof-of-concept at the time, it isn't (yet) well-documented. The launch file example in that package assumes you are running at least a single lidar which is publishing to /lidar_front/points_raw. Once that is true and you start the ndt_mapping_nodes launch file, the mapper node will start gathering the point data. Once you stop the launch file, the PCD file will be created in the folder from which you ran the launch file. The amount of downsampling done to the point cloud can be controlled from the map parameters in the parameters file (the default one is in param/ndt_mapper.param.yaml but you should create your own and pass it to the launch file). The origin of the PCD will be the location at which you started mapping so be sure to take some good lat/lon/altitude/heading measurements before you do which can be used in the YAML file that gets fed to the map publisher.

Originally posted by Josh Whitley with karma: 1766 on 2021-05-30
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by robot_fan on 2021-05-31:
Sorry for tagging along this question - I had similar needs and was trying the ndt_mapping_node default launch file. I got a tf2 error saying that the "map" frame did not exist (sorry the exact error was on another computer), when I started playing the ROS2 bag with the Lidar points. Any tips on how to solve this? Thank you!

