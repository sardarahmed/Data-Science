Q:

overshoot pose from robot_localization

Hi everyone!
I'd like to seek your support in running robot_localization. here is my current configuration.
ODOM Source: iRobotcreate2 using autonomy_create driver
publishing odom->base_link at 50Hz,  frame_id = odom  child_frame_id = base_link
IMU Source: LPMS USBAL2 using lpms_imu from larics
publishing /imu_data topic at 50Hz,
frame_id = base_link
  <node name="robot_localization" pkg="robot_localization" type="ekf_localization_node" clear_params="true" output="screen" >

robot_localization launch
  <param name="frequency" value="50"/>

  <param name="sensor_timeout" value="0.1"/>

  <param name="odom0" value="/odom"/>
  <param name="imu0" value="/imu_data"/>

  <param name="odom_frame" value="odom"/>
  <param name="base_link_frame" value="base_link"/>
  <param name="world_frame" value="odom"/>
  <param name="two_d_mod" value="true"/>
  <param name="publish_tf" value="false"/>

  <rosparam param="odom0_config">[false, false, false,
                                  false, false, false,
                                  true, true, false,
                                  false, false, false,
                                  false, false, false]</rosparam>

  <rosparam param="imu0_config">[false, false, false,
                                 false, false, true,
                                 false, false, false,
                                 false, false, false,
                                 false, false, false]</rosparam>

  <param name="odom0_queue_size" value="10"/>
  <param name="imu0_queue_size" value="10"/>

  <param name="imu0_remove_gravitational_acceleration" value="false"/>
  <param name="odom0_differential" value="false"/>
  <param name="imu0_differential" value="false"/>

  <rosparam param="process_noise_covariance">[0.03, 0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                              0,    0.03, 0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                              0,    0,    0.4, 0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                              0,    0,    0,   0.03, 0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                              0,    0,    0,   0,    0.03, 0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                              0,    0,    0,   0,    0,    0.06, 0,     0,     0,    0,     0,     0,     0,    0,    0,
                                              0,    0,    0,   0,    0,    0,    0.025, 0,     0,    0,     0,     0,     0,    0,    0,
                                              0,    0,    0,   0,    0,    0,    0,     0.025, 0,    0,     0,     0,     0,    0,    0,
                                              0,    0,    0,   0,    0,    0,    0,     0,     0.05, 0,     0,     0,     0,    0,    0,
                                              0,    0,    0,   0,    0,    0,    0,     0,     0,    0.002, 0,     0,     0,    0,    0,
                                              0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0.002, 0,     0,    0,    0,
                                              0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0.004, 0,    0,    0,
                                              0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0.01, 0,    0,
                                              0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0.01, 0,
                                              0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0.01]</rosparam>

  <rosparam param="initial_estimate_covariance">[1e-9, 0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                 0,    1e-9, 0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                 0,    0,    1e-9, 0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                 0,    0,    0,    1e-9, 0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                 0,    0,    0,    0,    1e-9, 0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                 0,    0,    0,    0,    0,    1e-9, 0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                 0,    0,    0,    0,    0,    0,    1e-9, 0,    0,    0,     0,     0,     0,    0,    0,
                                                 0,    0,    0,    0,    0,    0,    0,    1e-9, 0,    0,     0,     0,     0,    0,    0,
                                                 0,    0,    0,    0,    0,    0,    0,    0,    1e-9, 0,     0,     0,     0,    0,    0,
                                                 0,    0,    0,    0,    0,    0,    0,    0,    0,    1e-9,  0,     0,     0,    0,    0,
                                                 0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     1e-9,  0,     0,    0,    0,
                                                 0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     1e-9,  0,    0,    0,
                                                 0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     1e-9, 0,    0,
                                                 0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    1e-9, 0,
                                                 0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    1e-9]</rosparam>

</node>

Problem:
when i move the robot slightly forward around 10cm, my robot localization output is like this
My current expectation robot_localization filter output will not move tremendously 5meters
header: 
  seq: 1113
  stamp: 
    secs: 1507602484
    nsecs: 702803612
  frame_id: odom
child_frame_id: base_link
pose: 
  pose: 
    position: 
      x: 5.2929843497
      y: -0.375213039163
      z: 0.0
    orientation: 
      x: 0.0
      y: 0.0
      z: 0.0167304031319
      w: 0.999860037011
  covariance: [0.6681722616323746, 2.906207020757163e-05, 0.0, 0.0, 0.0, -3.1489494825382577e-10, 2.9062070207844828e-05, 0.6685898434755646, 0.0, 0.0, 0.0, -4.7353167974823654e-08, 0.0, 0.0, 3078.1527164512236, -0.8299654789702702, -34.08684051036556, 0.0, 0.0, 0.0, -0.8299654789702722, 8.014619379485639, -3.2526065174565133e-18, 0.0, 0.0, 0.0, -34.08684051036563, -9.242823520438925e-18, 8.014619379485637, 0.0, -3.1489494825382107e-10, -4.7353167974823614e-08, 0.0, 0.0, 0.0, 0.0006098784807259002]
twist: 
  twist: 
    linear: 
      x: -0.00573980186551
      y: 2.42841858036e-06
      z: 0.0
    angular: 
      x: 0.0
      y: 0.0
      z: 0.0191862965923
  covariance: [0.00050634837712305, 1.2946270499593127e-13, 0.0, 0.0, 0.0, 0.0, 1.2946270976708657e-13, 0.0005063483541373269, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 37.90151702124765, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.04453793530328407, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.04453793530328407, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.015551912176054818]

/odom topic output
header: 
  seq: 1130
  stamp: 
    secs: 1507602485
    nsecs:    836908
  frame_id: odom
child_frame_id: base_link
pose: 
  pose: 
    position: 
      x: 0.0835771486163
      y: 0.000380135315936
      z: 0.0
    orientation: 
      x: 0.0
      y: 0.0
      z: 0.00189176298531
      w: 0.999998210615
  covariance: [0.04401147738099098, 0.00010810681851580739, 0.0, 0.0, 0.0, 0.0012149321846663952, 0.00010810676758410409, 0.0074375285767018795, 0.0, 0.0, 0.0, 0.13262373208999634, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0012149312533438206, 0.13262373208999634, 0.0, 0.0, 0.0, 3.1878230571746826]
twist: 
  twist: 
    linear: 
      x: 0.0
      y: 0.0
      z: 0.0
    angular: 
      x: 0.0
      y: 0.0
      z: 0.0
  covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0. 0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

I have uploaded my bagfile with all recorded topics. This robot_localization configuration is basically i patterned using the sample test2.bag from robot_localization package.
i am hoping someone can help me figure out what is wrong in any of my configuration. You're support is very much appreciated.
Thanks in advance!

Originally posted by fj138696 on ROS Answers with karma: 30 on 2017-10-09
Post score: 0

A:

The pose is moving rapidly because your X velocity data is extremely large. This is from your odom data, presumably from autonomy_create.
header: 
  seq: 934
  stamp: 
    secs: 1507602481
    nsecs:  80840055
  frame_id: "odom"
child_frame_id: "base_link"
pose: 
  pose: 
    position: 
      x: 0.0602380000055
      y: 0.00023190813954
      z: 0.0
    orientation: 
      x: 0.0
      y: 0.0
      z: 0.000945881799379
      w: 0.999999552654
  covariance: [0.03145275264978409, 7.371223910013214e-05, 0.0, 0.0, 0.0, -0.003105021081864834, 7.371225365204737e-05, 0.002794417552649975, 0.0, 0.0, 0.0, 0.06957972049713135, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, -0.0031050220131874084, 0.06957972049713135, 0.0, 0.0, 0.0, 2.2781670093536377]
twist: 
  twist: 
    linear: 
      x: 4.96720266342
      y: 0.0
      z: 0.0
    angular: 
      x: 0.0
      y: 0.0
      z: 0.0
  covariance: [0.00044456301839090884, 8.409973020206962e-07, 0.0, 0.0, 0.0, -2.7008354663848877e-08, 8.409971883338585e-07, 7.954953140654197e-09, 0.0, 0.0, 0.0, 1.4315063708636444e-05, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.7976931348623157e+308, 0.0, -2.7124769985675812e-08, 1.4315063708636444e-05, 0.0, 0.0, 0.0, 0.03220024332404137]

Look at twist/twist/linear/x. See how it's approximately 5? The units are meters per second for velocities, so the EKF thinks your robot is going at 5 m/s. I'd check the source code for the autonomy_create package, if that's what's generating this message.

Originally posted by Tom Moore with karma: 13689 on 2018-01-10
This answer was ACCEPTED on the original site
Post score: 0

