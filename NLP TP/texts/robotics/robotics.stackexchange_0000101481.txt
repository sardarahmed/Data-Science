Q:

run navigation2 failed in sometime

ros:foxy
I use navigation2 in my robot but it sometime doesn't work ,it usally tell me :
ros2 launch scout_bringup navigation2.launch.py 
[INFO] [launch]: All log files can be found below /home/agilex/.ros/log/2022-04-06-15-15-07-718514-agilex-17848
[INFO] [launch]: Default logging verbosity is set to INFO
/home/agilex/agilex_ws/install/depthimage_to_laserscan/share/depthimage_to_laserscan/launch/depthimage_to_laserscan-launch.py:27: UserWarning: The parameter 'node_executable' is deprecated, use 'executable' instead
  Node(
/home/agilex/agilex_ws/install/depthimage_to_laserscan/share/depthimage_to_laserscan/launch/depthimage_to_laserscan-launch.py:27: UserWarning: The parameter 'node_name' is deprecated, use 'name' instead
  Node(
[INFO] [scout_base_node-1]: process started with pid [17850]
[INFO] [realsense2_camera_node-2]: process started with pid [17852]
[scout_base_node-1] Loading parameters: 
[scout_base_node-1] - port name: can0
[scout_base_node-1] - odom frame name: odom
[scout_base_node-1] - base frame name: base_link
[scout_base_node-1] - odom topic name: odom
[scout_base_node-1] - is scout mini: true
[scout_base_node-1] - is omni wheel: false
[scout_base_node-1] - simulated robot: false
[scout_base_node-1] - control rate: 10
[scout_base_node-1] ----------------------------
[scout_base_node-1] Robot initialized, start running ...
[scout_base_node-1] Start listening to port: can0
[scout_base_node-1] Using CAN bus to talk with the robot
[INFO] [static_transform_publisher-3]: process started with pid [17854]
[INFO] [depthimage_to_laserscan_node-4]: process started with pid [17856]
[INFO] [map_server-5]: process started with pid [17858]
[INFO] [amcl-6]: process started with pid [17860]
[INFO] [lifecycle_manager-7]: process started with pid [17862]
[INFO] [controller_server-8]: process started with pid [17886]
[INFO] [planner_server-9]: process started with pid [17902]
[INFO] [recoveries_server-10]: process started with pid [17910]
[INFO] [bt_navigator-11]: process started with pid [17931]
[INFO] [waypoint_follower-12]: process started with pid [17941]
[INFO] [lifecycle_manager-13]: process started with pid [17945]
[INFO] [rviz2-14]: process started with pid [17955]
[static_transform_publisher-3] [INFO] [1649229308.033043804] [static_tf_pub_laser]: Spinning until killed publishing transform from 'base_link' to 'camera_link'
[map_server-5] [INFO] [1649229308.034623239] [map_server]: 
[map_server-5]  map_server lifecycle node launched. 
[map_server-5]  Waiting on external lifecycle transitions to activate
[map_server-5]  See https://design.ros2.org/articles/node_lifecycle.html for more information.
[map_server-5] [INFO] [1649229308.034710354] [map_server]: Creating
[amcl-6] [INFO] [1649229308.045685618] [amcl]: 
[amcl-6]    amcl lifecycle node launched. 
[amcl-6]    Waiting on external lifecycle transitions to activate
[amcl-6]    See https://design.ros2.org/articles/node_lifecycle.html for more information.
[amcl-6] [INFO] [1649229308.045886951] [amcl]: Creating
[lifecycle_manager-7] [INFO] [1649229308.036934002] [lifecycle_manager_localization]: Creating
[lifecycle_manager-7] [INFO] [1649229308.051025892] [lifecycle_manager_localization]: Creating and initializing lifecycle service clients
[lifecycle_manager-7] [INFO] [1649229308.058204702] [lifecycle_manager_localization]: Starting managed nodes bringup...
[lifecycle_manager-7] [INFO] [1649229308.058244964] [lifecycle_manager_localization]: Configuring map_server
[controller_server-8] [INFO] [1649229308.086572254] [controller_server]: 
[controller_server-8]   controller_server lifecycle node launched. 
[controller_server-8]   Waiting on external lifecycle transitions to activate
[controller_server-8]   See https://design.ros2.org/articles/node_lifecycle.html for more information.
[controller_server-8] [INFO] [1649229308.106626239] [controller_server]: Creating controller server
[recoveries_server-10] [INFO] [1649229308.141957397] [recoveries_server]: 
[recoveries_server-10]  recoveries_server lifecycle node launched. 
[recoveries_server-10]  Waiting on external lifecycle transitions to activate
[recoveries_server-10]  See https://design.ros2.org/articles/node_lifecycle.html for more information.
[lifecycle_manager-13] [INFO] [1649229308.146226783] [lifecycle_manager_navigation]: Creating
[planner_server-9] [INFO] [1649229308.151205145] [planner_server]: 
[planner_server-9]  planner_server lifecycle node launched. 
[planner_server-9]  Waiting on external lifecycle transitions to activate
[planner_server-9]  See https://design.ros2.org/articles/node_lifecycle.html for more information.
[lifecycle_manager-13] [INFO] [1649229308.155799539] [lifecycle_manager_navigation]: Creating and initializing lifecycle service clients
[planner_server-9] [INFO] [1649229308.157471466] [planner_server]: Creating
[lifecycle_manager-13] [INFO] [1649229308.164626614] [lifecycle_manager_navigation]: Starting managed nodes bringup...
[lifecycle_manager-13] [INFO] [1649229308.164688856] [lifecycle_manager_navigation]: Configuring controller_server
[map_server-5] [INFO] [1649229308.166997914] [map_server]: Configuring
[map_server-5] [INFO] [map_io]: Loading yaml file: /home/agilex/agilex_ws/install/scout_bringup/share/scout_bringup/maps/map02.yaml
[map_server-5] [DEBUG] [map_io]: resolution: 0.05
[map_server-5] [DEBUG] [map_io]: origin[0]: -15.3
[map_server-5] [DEBUG] [map_io]: origin[1]: -12.3
[map_server-5] [DEBUG] [map_io]: origin[2]: 0
[map_server-5] [DEBUG] [map_io]: free_thresh: 0.25
[map_server-5] [DEBUG] [map_io]: occupied_thresh: 0.65
[map_server-5] [DEBUG] [map_io]: mode: trinary
[map_server-5] [DEBUG] [map_io]: negate: 0
[map_server-5] [INFO] [map_io]: Loading image_file: /home/agilex/agilex_ws/install/scout_bringup/share/scout_bringup/maps/map02.pgm
[controller_server-8] [INFO] [1649229308.176347573] [local_costmap.local_costmap]: 
[controller_server-8]   local_costmap lifecycle node launched. 
[controller_server-8]   Waiting on external lifecycle transitions to activate
[controller_server-8]   See https://design.ros2.org/articles/node_lifecycle.html for more information.
[bt_navigator-11] [INFO] [1649229308.176565149] [bt_navigator]: 
[bt_navigator-11]   bt_navigator lifecycle node launched. 
[bt_navigator-11]   Waiting on external lifecycle transitions to activate
[bt_navigator-11]   See https://design.ros2.org/articles/node_lifecycle.html for more information.
[bt_navigator-11] [INFO] [1649229308.176671871] [bt_navigator]: Creating
[controller_server-8] [INFO] [1649229308.179110739] [local_costmap.local_costmap]: Creating Costmap
[map_server-5] [DEBUG] [map_io]: Read map /home/agilex/agilex_ws/install/scout_bringup/share/scout_bringup/maps/map02.pgm: 503 X 427 map @ 0.05 m/cell
[waypoint_follower-12] [INFO] [1649229308.225936752] [waypoint_follower]: 
[waypoint_follower-12]  waypoint_follower lifecycle node launched. 
[waypoint_follower-12]  Waiting on external lifecycle transitions to activate
[waypoint_follower-12]  See https://design.ros2.org/articles/node_lifecycle.html for more information.
[waypoint_follower-12] [INFO] [1649229308.233694715] [waypoint_follower]: Creating
[lifecycle_manager-7] [INFO] [1649229308.242237582] [lifecycle_manager_localization]: Configuring amcl
[amcl-6] [INFO] [1649229308.242647145] [amcl]: Configuring
[amcl-6] [INFO] [1649229308.242749233] [amcl]: initTransforms
[amcl-6] [INFO] [1649229308.258590913] [amcl]: initPubSub
[amcl-6] [INFO] [1649229308.265250157] [amcl]: Subscribed to map topic.
[planner_server-9] [INFO] [1649229308.266629813] [global_costmap.global_costmap]: 
[planner_server-9]  global_costmap lifecycle node launched. 
[planner_server-9]  Waiting on external lifecycle transitions to activate
[planner_server-9]  See https://design.ros2.org/articles/node_lifecycle.html for more information.
[planner_server-9] [INFO] [1649229308.267596978] [global_costmap.global_costmap]: Creating Costmap
[lifecycle_manager-7] [INFO] [1649229308.269759284] [lifecycle_manager_localization]: Activating map_server
[map_server-5] [INFO] [1649229308.269912752] [map_server]: Activating
[lifecycle_manager-7] [INFO] [1649229308.270558032] [lifecycle_manager_localization]: Activating amcl
[amcl-6] [INFO] [1649229308.270559902] [amcl]: Received a 503 X 427 map @ 0.050 m/pix
[realsense2_camera_node-2] [INFO] [1649229308.282547939] [camera.camera]: RealSense ROS v4.0.4
[realsense2_camera_node-2] [INFO] [1649229308.282683507] [camera.camera]: Built with LibRealSense v2.50.0
[realsense2_camera_node-2] [INFO] [1649229308.282698851] [camera.camera]: Running with LibRealSense v2.50.0
[amcl-6] [INFO] [1649229308.287735474] [amcl]: Activating
[amcl-6] [WARN] [1649229308.287789413] [amcl]: Publishing the particle cloud as geometry_msgs/PoseArray msg is deprecated, will be published as nav2_msgs/ParticleCloud in the future
[amcl-6] [INFO] [1649229308.287814292] [amcl]: initialPoseReceived
[amcl-6] [INFO] [1649229308.287948495] [amcl]: Setting pose (1649229308.287948): 0.000 0.000 0.000
[lifecycle_manager-7] [INFO] [1649229308.290168770] [lifecycle_manager_localization]: Managed nodes are active
[realsense2_camera_node-2] [INFO] [1649229308.299391090] [camera.camera]: Device with serial number 051122073539 was found.
[realsense2_camera_node-2] 
[realsense2_camera_node-2] [INFO] [1649229308.299441410] [camera.camera]: Device with physical ID /sys/devices/pci0000:00/0000:00:14.0/usb4/4-1/4-1:1.0/video4linux/video0 was found.
[realsense2_camera_node-2] [INFO] [1649229308.299452687] [camera.camera]: Device with name Intel RealSense D435 was found.
[realsense2_camera_node-2] [INFO] [1649229308.299769619] [camera.camera]: Device with port number 4-1 was found.
[realsense2_camera_node-2] [INFO] [1649229308.299782774] [camera.camera]: Device USB type: 3.2
[realsense2_camera_node-2] [INFO] [1649229308.301760979] [camera.camera]: getParameters...
[realsense2_camera_node-2] [INFO] [1649229308.302646502] [camera.camera]: JSON file is not provided
[realsense2_camera_node-2] [INFO] [1649229308.302672809] [camera.camera]: Device Name: Intel RealSense D435
[realsense2_camera_node-2] [INFO] [1649229308.302681617] [camera.camera]: Device Serial No: 051122073539
[realsense2_camera_node-2] [INFO] [1649229308.302691746] [camera.camera]: Device physical port: /sys/devices/pci0000:00/0000:00:14.0/usb4/4-1/4-1:1.0/video4linux/video0
[realsense2_camera_node-2] [INFO] [1649229308.302698604] [camera.camera]: Device FW version: 05.13.00.50
[realsense2_camera_node-2] [INFO] [1649229308.302704338] [camera.camera]: Device Product ID: 0x0B07
[realsense2_camera_node-2] [INFO] [1649229308.302709743] [camera.camera]: Sync Mode: Off
[realsense2_camera_node-2] [INFO] [1649229308.324125640] [camera.camera]: Set ROS param depth_module.profile to default: 848x480x30
[realsense2_camera_node-2] [WARN] [1649229308.334169237] [camera.camera]: Could not set param: rgb_camera.power_line_frequency with 3 Range: [0, 2]: parameter 'rgb_camera.power_line_frequency' could not be set: Parameter {} doesn't comply with integer range.
[realsense2_camera_node-2]  06/04 15:15:08,334 WARNING [140379217299200] (backend-v4l2.cpp:1387) Pixel format 36315752-1a66-a242-9065-d01814a likely requires patch for fourcc code RW16!
[realsense2_camera_node-2] [INFO] [1649229308.341535739] [camera.camera]: Set ROS param rgb_camera.profile to default: 640x480x30
[realsense2_camera_node-2] [WARN] [1649229308.358337482] [camera.camera]: Could not set param: pointcloud.stream_index_filter with -1 Range: [-1, -2147483648]: parameter 'pointcloud.stream_index_filter' could not be set: Parameter {} doesn't comply with integer range.
[realsense2_camera_node-2] [INFO] [1649229308.362098015] [camera.camera]: Start Sensor: Stereo Module
[realsense2_camera_node-2] [INFO] [1649229308.427144807] [camera.camera]: Open profile: stream_type: Depth(0), Format: Z16, Width: 848, Height: 480, FPS: 30
[realsense2_camera_node-2] [INFO] [1649229308.427512849] [camera.camera]: Start Sensor: RGB Camera
[realsense2_camera_node-2] [INFO] [1649229308.444858600] [camera.camera]: Open profile: stream_type: Color(0), Format: RGB8, Width: 640, Height: 480, FPS: 30
[realsense2_camera_node-2] [INFO] [1649229308.446315931] [camera.camera]: RealSense Node Is Up!
[amcl-6] [INFO] [1649229308.485042551] [amcl]: createLaserObject
[realsense2_camera_node-2] [WARN] [1649229308.495275048] [camera.camera]: 
[rviz2-14] [INFO] [1649229309.866769972] [rviz2]: Stereo is NOT SUPPORTED
[rviz2-14] [INFO] [1649229309.866975047] [rviz2]: OpenGl version: 4.6 (GLSL 4.6)
[rviz2-14] [INFO] [1649229309.894577603] [rviz2]: Stereo is NOT SUPPORTED
[rviz2-14] [WARN] [1649229310.042466227] [rcl.logging_rosout]: Publisher already registered for provided node name. If this is due to multiple nodes with the same name then all logs for that logger name will go out over the existing publisher. As soon as any node with that name is destructed it will unregister the publisher, preventing any further logs for that name from being published on the rosout topic.
[rviz2-14] [WARN] [1649229310.054720625] [rcl.logging_rosout]: Publisher already registered for provided node name. If this is due to multiple nodes with the same name then all logs for that logger name will go out over the existing publisher. As soon as any node with that name is destructed it will unregister the publisher, preventing any further logs for that name from being published on the rosout topic.
[rviz2-14] [WARN] [1649229310.068416629] [rcl.logging_rosout]: Publisher already registered for provided node name. If this is due to multiple nodes with the same name then all logs for that logger name will go out over the existing publisher. As soon as any node with that name is destructed it will unregister the publisher, preventing any further logs for that name from being published on the rosout topic.
[rviz2-14] [INFO] [1649229310.107021801] [rviz2]: Waiting for the lifecycle_manager_navigation/is_active service...
[rviz2-14] [INFO] [1649229310.107478406] [rviz2]: Sending lifecycle_manager_navigation/is_active request
[rviz2-14] [INFO] [1649229310.108213775] [rviz2]: Trying to create a map of size 503 x 427 using 1 swatches
[rviz2-14] [ERROR] [1649229310.125009251] [rviz2]: Vertex Program:rviz/glsl120/indexed_8bit_image.vert Fragment Program:rviz/glsl120/indexed_8bit_image.frag GLSL link result : 
[rviz2-14] active samplers with a different type refer to the same texture image unit
[rviz2-14] [INFO] [1649229311.107835250] [rviz2]: Waiting for the lifecycle_manager_navigation/is_active service...
[rviz2-14] [INFO] [1649229311.108191863] [rviz2]: Sending lifecycle_manager_navigation/is_active request
[rviz2-14] [INFO] [1649229312.109950009] [rviz2]: Waiting for the lifecycle_manager_navigation/is_active service...
[rviz2-14] [INFO] [1649229312.110162296] [rviz2]: Sending lifecycle_manager_navigation/is_active request
[rviz2-14] [INFO] [1649229313.110339925] [rviz2]: Waiting for the lifecycle_manager_navigation/is_active service...
[rviz2-14] [INFO] [1649229313.110532456] [rviz2]: Sending lifecycle_manager_navigation/is_active request
[rviz2-14] [INFO] [1649229314.110764369] [rviz2]: Waiting for the lifecycle_manager_navigation/is_active service...
[rviz2-14] [INFO] [1649229314.111084034] [rviz2]: Sending lifecycle_manager_navigation/is_active request
[rviz2-14] [INFO] [1649229315.111298792] [rviz2]: Waiting for the lifecycle_manager_navigation/is_active service...
[rviz2-14] [INFO] [1649229315.111496469] [rviz2]: Sending lifecycle_manager_navigation/is_active request
[rviz2-14] [INFO] [1649229316.111691332] [rviz2]: Waiting for the lifecycle_manager_navigation/is_active service...
[rviz2-14] [INFO] [1649229316.111895455] [rviz2]: Sending lifecycle_manager_navigation/is_active request

I open the lidar in anther termintal
ros2 launch scout_bringup open_ydlidar.launch.py 
[INFO] [launch]: All log files can be found below /home/agilex/.ros/log/2022-04-06-15-09-26-328438-agilex-17301
[INFO] [launch]: Default logging verbosity is set to INFO
RTNETLINK answers: Device or resource busy
[INFO] [ydlidar_node-1]: process started with pid [17306]
[INFO] [rf2o_laser_odometry_node-2]: process started with pid [17308]
[INFO] [static_transform_publisher-3]: process started with pid [17310]
[INFO] [lifecycle_manager-4]: process started with pid [17312]
[lifecycle_manager-4] [ERROR] [1649228966.417331708] [lifecycle_manager_navigation]: Invalid type 'string' for parameter 'use_sim_time', should be 'bool'
[lifecycle_manager-4] [INFO] [1649228966.418211143] [lifecycle_manager_navigation]: Creating
[lifecycle_manager-4] terminate called after throwing an instance of 'rclcpp::exceptions::InvalidParameterTypeException'
[lifecycle_manager-4]   what():  parameter 'autostart' has invalid type: expected [bool] got [string]
[rf2o_laser_odometry_node-2] [WARN] [1649228966.418405006] [rcl.logging_rosout]: Publisher already registered for provided node name. If this is due to multiple nodes with the same name then all logs for that logger name will go out over the existing publisher. As soon as any node with that name is destructed it will unregister the publisher, preventing any further logs for that name from being published on the rosout topic.
[ydlidar_node-1] [YDLIDAR INFO] Current ROS Driver Version: 1.4.5
[rf2o_laser_odometry_node-2] [INFO] [1649228966.421387151] [rf2o_laser_odometry]: Initializing RF2O node...
[static_transform_publisher-3] [INFO] [1649228966.422028256] [static_tf_pub_laser]: Spinning until killed publishing transform from 'base_link' to 'laser_frame'
[ERROR] [lifecycle_manager-4]: process has died [pid 17312, exit code -6, cmd '/home/agilex/agilex_ws/install/nav2_lifecycle_manager/lib/nav2_lifecycle_manager/lifecycle_manager --ros-args -r __node:=lifecycle_manager_navigation --params-file /tmp/launch_params_ziwekkbt --params-file /tmp/launch_params_zzor87d7 --params-file /tmp/launch_params_8g95uq_z'].
[ydlidar_node-1] [YDLIDAR]:SDK Version: 1.4.5
[ydlidar_node-1] [YDLIDAR]:Lidar running correctly ! The health status: good
[ydlidar_node-1] [YDLIDAR] Connection established in [/dev/ttyUSB0][230400]:
[ydlidar_node-1] Firmware version: 2.33
[ydlidar_node-1] Hardware version: 2
[ydlidar_node-1] Model: G4
[ydlidar_node-1] Serial: 2020010800000410
[ydlidar_node-1] [YDLIDAR INFO] Current Scan Frequency: 10.000000Hz
[ydlidar_node-1] [YDLIDAR INFO] Current Sampling Rate : 9K
[ydlidar_node-1] [YDLIDAR INFO] Now YDLIDAR is scanning ......
[rf2o_laser_odometry_node-2] [INFO] [1649228969.873563399] [rf2o_laser_odometry]: [rf2o] Got first Laser Scan .... Configuring node

in rviz2 only have the map that I have creat,. please help me and tell where is my problem .

Originally posted by tang___xi on ROS Answers with karma: 1 on 2022-04-06
Post score: 0

A:

[lifecycle_manager-4]   what():  parameter 'autostart' has invalid type: expected [bool] got [string]

The parameter system is type sensitive, you need to give it a boolean, not a string object for this parameter. It threw an exception due to the failure to provide the parameter with the explicitly declared type.

Originally posted by stevemacenski with karma: 8272 on 2022-04-09
This answer was ACCEPTED on the original site
Post score: 0

