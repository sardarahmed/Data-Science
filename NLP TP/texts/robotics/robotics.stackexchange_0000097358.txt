Q:

how can I make a custom msg struct to publish?

i have a script that publishes a lot of system information like battery voltage/current, sysstem status, and isready all in all i have 13 different parameters im publishing. what i want is to tie all that data into a single sturct and only publish once.
for example something live geometry msgs odom msg, you know how it has like msg.pose.pose.x i want something similar like msg.data1.data

Originally posted by MisticFury on ROS Answers with karma: 5 on 2020-10-19
Post score: 0

A:

What you want is to create multiple custom msgs (for how to create custom msgs, see @JackB answer).
Then, you need to nest the messages the way you want. Something along the line of the following msg definitions:
BatteryStatus.msg:
float32 current
float32 voltage

SystemStatus.msg:
int32 error_code
string error_msg

FullSystemInformation.msg
BatteryStatus battery
SystemStatus system

And then you can access the fields like, e.g. msg.battery.current or msg.system.error_code.

Originally posted by mgruhler with karma: 12390 on 2020-10-19
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2020-10-19:
Or use sensor_msgs/BatteryState.

