Q:

It appears that rospack compile is broke by tinyxml.h

Rospack.cpp does not compile because the tinyxml.h file contains incorrect syntax for it to build.  Tinyxml does build itself on the machine but when the .h file is include in /usr/local/include then rospack compile fails. The tinyxml code is the latest from SourceForge sources for it.
Failure:
==> make cmake_check_build_system in '/opt/ros/groovy/ros_catkin_ws/build_isolated/rospack'
==> make -j1 in '/opt/ros/groovy/ros_catkin_ws/build_isolated/rospack'
[ 16%] Building CXX object CMakeFiles/rospack.dir/src/rospack.cpp.o
In file included from /usr/include/python2.7/Python.h:8:0,
                 from /opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:59:
/usr/include/python2.7/pyconfig.h:1161:0: warning: "_POSIX_C_SOURCE" redefined [enabled by default]
/usr/include/features.h:163:0: note: this is the location of the previous definition
/usr/include/python2.7/pyconfig.h:1183:0: warning: "_XOPEN_SOURCE" redefined [enabled by default]
/usr/include/features.h:165:0: note: this is the location of the previous definition
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp: In member function ‘bool rospack::Rosstackage::exports_dry_package(rospack::Stackage*, const string&, const string&, std::vector<std::basic_string<char> >&)’:
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:993:57: error: no matching function for call to ‘TiXmlElement::FirstChildElement(const string&)’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:993:57: note: candidates are:
/usr/local/include/tinyxml.h:664:22: note: const TiXmlElement* TiXmlNode::FirstChildElement() const
/usr/local/include/tinyxml.h:664:22: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:665:16: note: TiXmlElement* TiXmlNode::FirstChildElement()
/usr/local/include/tinyxml.h:665:16: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:670:22: note: const TiXmlElement* TiXmlNode::FirstChildElement(const char*) const
/usr/local/include/tinyxml.h:670:22: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/usr/local/include/tinyxml.h:671:16: note: TiXmlElement* TiXmlNode::FirstChildElement(const char*)
/usr/local/include/tinyxml.h:671:16: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:995:45: error: no matching function for call to ‘TiXmlElement::NextSiblingElement(const string&)’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:995:45: note: candidates are:
/usr/local/include/tinyxml.h:644:22: note: const TiXmlElement* TiXmlNode::NextSiblingElement() const
/usr/local/include/tinyxml.h:644:22: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:645:16: note: TiXmlElement* TiXmlNode::NextSiblingElement()
/usr/local/include/tinyxml.h:645:16: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:653:22: note: const TiXmlElement* TiXmlNode::NextSiblingElement(const char*) const
/usr/local/include/tinyxml.h:653:22: note:   no known conversion for argument 1 

from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/usr/local/include/tinyxml.h:654:16: note: TiXmlElement* TiXmlNode::NextSiblingElement(const char*)
/usr/local/include/tinyxml.h:654:16: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp: In member function ‘bool rospack::Rosstackage::plugins(const string&, const string&, const string&, std::vector<std::basic_string<char> >&)’:
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1097:59: error: no matching function for call to ‘TiXmlElement::FirstChildElement(const string&)’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1097:59: note: candidates are:
/usr/local/include/tinyxml.h:664:22: note: const TiXmlElement* TiXmlNode::FirstChildElement() const
/usr/local/include/tinyxml.h:664:22: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:665:16: note: TiXmlElement* TiXmlNode::FirstChildElement()
/usr/local/include/tinyxml.h:665:16: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:670:22: note: const TiXmlElement* TiXmlNode::FirstChildElement(const char*) const
/usr/local/include/tinyxml.h:670:22: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/usr/local/include/tinyxml.h:671:16: note: TiXmlElement* TiXmlNode::FirstChildElement(const char*)
/usr/local/include/tinyxml.h:671:16: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1099:47: error: no matching function for call to ‘TiXmlElement::NextSiblingElement(const string&)’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1099:47: note: candidates are:
/usr/local/include/tinyxml.h:644:22: note: const TiXmlElement* TiXmlNode::NextSiblingElement() const
/usr/local/include/tinyxml.h:644:22: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:645:16: note: TiXmlElement* TiXmlNode::NextSiblingElement()
/usr/local/include/tinyxml.h:645:16: note:   candidate expects 0 arguments, 1 provided
/usr/local/include/tinyxml.h:653:22: note: const TiXmlElement* TiXmlNode::NextSiblingElement(const char*) const
/usr/local/include/tinyxml.h:653:22: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/usr/local/include/tinyxml.h:654:16: note: TiXmlElement* TiXmlNode::NextSiblingElement(const char*)
/usr/local/include/tinyxml.h:654:16: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp: In member function ‘void rospack::Rosstackage::loadManifest(rospack::Stackage*)’:
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1497:60: error: no matching function for call to ‘TiXmlDocument::LoadFile(std::string&)’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1497:60: note: candidates are:

/usr/local/include/tinyxml.h:1415:7: note: bool TiXmlDocument::LoadFile(TiXmlEncoding)
/usr/local/include/tinyxml.h:1415:7: note:   no known conversion for argument 1 from ‘std::string {aka std::basic_string<char>}’ to ‘TiXmlEncoding’
/usr/local/include/tinyxml.h:1419:7: note: bool TiXmlDocument::LoadFile(const char*, TiXmlEncoding)
/usr/local/include/tinyxml.h:1419:7: note:   no known conversion for argument 1 from ‘std::string {aka std::basic_string<char>}’ to ‘const char*’
/usr/local/include/tinyxml.h:1427:7: note: bool TiXmlDocument::LoadFile(FILE*, TiXmlEncoding)
/usr/local/include/tinyxml.h:1427:7: note:   no known conversion for argument 1 from ‘std::string {aka std::basic_string<char>}’ to ‘FILE* {aka _IO_FILE*}’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp: In member function ‘void rospack::Rosstackage::computeDepsInternal(rospack::Stackage*, bool, const string&)’:
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1544:63: error: no matching function for call to ‘TiXmlElement::IterateChildren(const string&, TiXmlNode*&)’
/opt/ros/groovy/ros_catkin_ws/src/rospack/src/rospack.cpp:1544:63: note: candidates are:
/usr/local/include/tinyxml.h:562:19: note: const TiXmlNode* TiXmlNode::IterateChildren(const TiXmlNode*) const
/usr/local/include/tinyxml.h:562:19: note:   candidate expects 1 argument, 2 provided
/usr/local/include/tinyxml.h:563:13: note: TiXmlNode* TiXmlNode::IterateChildren(const TiXmlNode*)
/usr/local/include/tinyxml.h:563:13: note:   candidate expects 1 argument, 2 provided
/usr/local/include/tinyxml.h:568:19: note: const TiXmlNode* TiXmlNode::IterateChildren(const char*, const TiXmlNode*) const
/usr/local/include/tinyxml.h:568:19: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
/usr/local/include/tinyxml.h:569:13: note: TiXmlNode* TiXmlNode::IterateChildren(const char*, const TiXmlNode*)
/usr/local/include/tinyxml.h:569:13: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
make[2]: *** [CMakeFiles/rospack.dir/src/rospack.cpp.o] Error 1
make[1]: *** [CMakeFiles/rospack.dir/all] Error 2
make: *** [all] Error 2

<== Failed to process package 'rospack': 
  Command '/opt/ros/groovy/ros_catkin_ws/install_isolated/env_cached.sh make -j1' returned non-zero exit status 2
Command failed, exiting.
root@raspberrypi:/opt/ros/groovy/ros_catkin_ws# 

Originally posted by bobt on ROS Answers with karma: 65 on 2013-01-06
Post score: 0

Original comments
Comment by 130s on 2013-01-06:
Which OS, distro, architecture?
Comment by bobt on 2013-01-06:
raspbain, wheezy, armv6l This is a debian release of wheezy on the Raspberry PI with Hardware Floating Point. Using  the standard gcc complier system for armhf.  We have fuerte working on this platform.
Comment by bobt on 2013-01-07:
I  finally found from your informations the libtinyxml-dev packages that needed to be added to the machine to make it all build. Thank you for the info.

A:

There is tinyxml with std::string and without. It has to be configured during the build procedure. In the standard tinyxml.h there is also an #ifdef for this difference. So try compiling with the define -DTIXML_USE_STL. The standard tinyxml packages for ubuntu does not have this difference it is configured for usage of std::string and has a small change in the tinyxml.h so that you do not need this flag.
cf.
http://www.grinninglizard.com/tinyxmldocs/index.html

Originally posted by 2_socke with karma: 76 on 2013-01-07
This answer was ACCEPTED on the original site
Post score: 2

