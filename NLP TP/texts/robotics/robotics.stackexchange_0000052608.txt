Q:

Very stumped on Rviz and QT Problem

Hi all,
I'm very stumped regarding our migrating of a plugin from electric up to groovy.  But, the problem seems to not be within our code, but within the ROS code.  Either that, or we're no longer including something correctly.
There are two errors:
First, in our init.cpp, we attempt to include rviz/plugin/type_registry.h , and there's:
Fatal Error: rviz/plugin/type_registry.h: No such file or directory
does this file no longer exist?  Has it been replaced by something?
Second, in /opt/ros/groovy/include/rviz/properties/property.h there's:
fatal error: QObject: No such file or directory.
But I believe QT is installed.  Are we missing a dependency?

Originally posted by aespielberg on ROS Answers with karma: 113 on 2013-07-08
Post score: 0

A:

RViz has been ported to Qt in ROS Fuerte, so you will need to port your plugins as well. There are two issues here:

The plugin API has been somewhat redesigned, which explains the missing include. See http://ros.org/doc/groovy/api/rviz_plugin_tutorials/html/index.html for some tutorials.

For the second problem, check that you have the dev packages for Qt installed. Do a rosdep update && rosdep install rviz, which should install libqt4-dev and libqt4-opengl-dev. On how to include Qt4 into your CMakeLists.txt, see https://github.com/ros-visualization/visualization_tutorials/blob/groovy-devel/librviz_tutorial/CMakeLists.txt.

Originally posted by dgossow with karma: 1444 on 2013-07-08
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by aespielberg on 2013-07-09:
Hi dgossow,
Thanks, I will look up the rviz plugin tuotrials to refactor our code.  I'm still confused about the rviz problem though.  I already have the newest version, but I'm still getting the QObject import problem.  Do you have any idea what else could cause that problem?
Comment by dgossow on 2013-07-09:
Could you provide a link to your package.xml / CMakeLists.txt?
Apart from that, it seems like RViz doesn't export it's dependencies correctly. As a workaround, you can put a find_package(Qt4 REQUIRED) etc. into your own CMakeLists.txt. I will see how to fix this in RViz.
Comment by dgossow on 2013-07-09:
See https://github.com/ros-visualization/visualization_tutorials/blob/groovy-devel/rviz_plugin_tutorials/CMakeLists.txt on how to include Qt4 into your CMakeLists.txt.
Comment by dgossow on 2013-07-09:
EDIT: In any case, you will need to explicitly find_package Qt, since you need to run the moc generator on your plugin classes.

