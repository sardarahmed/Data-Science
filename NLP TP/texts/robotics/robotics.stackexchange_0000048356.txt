Q:

Set parameter list using XmlRpc

Hi,
I need to set some ros parameters where one of them is a list of strings. I'm using C++ but cannot find an example of how to do it.
I currently have a list std::vector<std::string> which I want to set in the ros parameter server.
From here http://www.ros.org/wiki/roscpp/Overview/Parameter%20Server I understand I need to use XmlRpc::XmlRpcValue to set the array.
So far I have tried:

//agent_names is a populated std::vector of std::string

XmlRpc::XmlRpcValue vocabulary(agent_names);

n.setParam("vocabulary", vocabulary);

But it doesn't compile.
How do I construct an XmlRpcValue object from a std::vector?
Also, do I need to link to the XmlRpc library in my CMakeLists.txt and then import headers in my code? In that case, what do I put in my CMakeLists.txt?
Any help is greatly appreciated =)

Originally posted by I.T on ROS Answers with karma: 67 on 2013-02-15
Post score: 1

A:

I finally ended up setting the parameter by using a launch file for my node.
Example:
Launch file:
<launch>
    <rosparam param="x_vector">[1.0, 2.0,
3.0]</rosparam>
    <node name="my_node" pkg="my_package" type="my_node" />
</launch>

Then in your node, get the vector like this:
std::vector<double> x_vec;
std::vector<double> x_vec_default = {1.0, 0.5, 0.5, 1.0};

n.param<std::vector<double> >("x_vector", x_vec, x_vec_default);

And x_vec will hold the values given in the launch file, or the contents in x_vec_default if the x_vector is not available as a parameter (for example if launching the node without the launch file).

Originally posted by I.T with karma: 67 on 2013-02-20
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by ROSfc on 2016-09-02:
How do you set a vector parameter in launch file ?
Comment by I.T on 2016-09-12:
@ROSfc See my updated answer. Sorry for late reply!

