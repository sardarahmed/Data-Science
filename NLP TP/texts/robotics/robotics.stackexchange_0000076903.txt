Q:

Build failing because of dependency issue

I currently have a build failing on the buildfarm.
The reason seems to be a version check on a dependency :
# BEGIN SUBSECTION: build binarydeb
04:36:43 Package 'ros-indigo-pyros' version: 0.2.0-0trusty-20161024-043014-0700
04:36:45 Invoking 'apt-src build ros-indigo-pyros' in '/tmp/binarydeb/ros-indigo-pyros-0.2.0'
04:36:48 I: Building in /tmp/binarydeb/ros-indigo-pyros-0.2.0 ..
04:36:49 dpkg-buildpackage: source package ros-indigo-pyros
04:36:49 dpkg-buildpackage: source version 0.2.0-0trusty-20161024-043014-0700
04:36:49 dpkg-buildpackage: source distribution trusty
04:36:49 dpkg-buildpackage: source changed by AlexV <asmodehn@gmail.com>
04:36:49  dpkg-source --before-build ros-indigo-pyros-0.2.0
04:36:49 dpkg-buildpackage: host architecture amd64
04:36:49 dpkg-checkbuilddeps: Unmet build dependencies: ros-indigo-pyzmp (= 0.0.14)
04:36:49 dpkg-buildpackage: warning: build dependencies/conflicts unsatisfied; aborting
04:36:49 dpkg-buildpackage: warning: (Use -d flag to override.)
04:36:49 E: Building failed
04:36:49 Traceback (most recent call last):
04:36:49   File "/tmp/ros_buildfarm/ros_buildfarm/binarydeb_job.py", line 133, in build_binarydeb
04:36:49     subprocess.check_call(cmd, cwd=source_dir)
04:36:49   File "/usr/lib/python3.4/subprocess.py", line 561, in check_call
04:36:49     raise CalledProcessError(retcode, cmd)
04:36:49 subprocess.CalledProcessError: Command '['apt-src', 'build', 'ros-indigo-pyros']' returned non-zero exit status 1

But it doesn't make much sense to me since that pyzmp package v0.0.14 is available : http://repositories.ros.org/status_page/ros_indigo_default.html?q=pyzmp
Any hint ?

Originally posted by asmodehn on ROS Answers with karma: 131 on 2016-10-24
Post score: 1

A:

I would suggest to try a more relaxed version dependency: https://github.com/asmodehn/pyros/blob/d408458d1f3bbf5f4df6b483c0e04f4c3f85b8aa/package.xml#L26
Using version_eq is very uncommon therefore I would recommend to try replacing version_eq="0.0.14" with version_gte="0.0.14". If that works then using version_gte="0.0.14" and version_lte="0.0.14" might achieve the same thing.
Background: to each Debian package we append a timestamp when it was produced. Maybe that interferes with the equal check.

Originally posted by Dirk Thomas with karma: 16276 on 2016-10-24
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by asmodehn on 2016-10-25:
To test that timestamp thing, I just made another bloom release of the exact same version : https://github.com/ros/rosdistro/pull/13061
Comment by asmodehn on 2016-10-26:
So it seems making a new bloom-release didn't help. http://build.ros.org/view/Ibin_uT64/job/Ibin_uT64__pyros__ubuntu_trusty_amd64__binary/57/consoleFull
It is documented in http://www.ros.org/reps/rep-0140.html and should work. Let me know where I should open an issue. I can work around it later.

