Q:

device_id is not set on kinect.launch for turtlebot

Turtlebot dashboard is showing no errors, the first four squares are green as they should be, and it is in full mode.  I started it up using roslaunch turtlebot_bringup minimal.launch and then in a separate terminal window I issued the command roslaunch turtlebot_bringup kinect.launch, only to receive a barrage of what seem to be errors:
    roslaunch turtlebot_bringup kinect.launch 
... logging to /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/roslaunch-ubuntu-9087.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://172.20.110.90:59699/

SUMMARY
========

PARAMETERS
 * /kinect_laser/max_height

 * /openni_camera/depth_rgb_rotation
 * /rosdistro
 * /openni_camera/image_mode
 * /openni_camera/image_time_offset
 * /openni_camera/projector_depth_baseline
 * /kinect_laser_narrow/output_frame_id
 * /openni_camera/depth_mode
 * /kinect_laser_narrow/max_height
 * /openni_camera/depth_frame_id
 * /openni_camera/depth_time_offset
 * /kinect_laser/output_frame_id
 * /rosversion
 * /openni_camera/depth_registration
 * /openni_camera/debayering
 * /openni_camera/depth_rgb_translation
 * /kinect_laser/min_height
 * /pointcloud_throttle/max_rate
 * /openni_camera/shift_offset
 * /kinect_laser_narrow/min_height
 * /openni_camera/rgb_frame_id

NODES
  /
    kinect_breaker_enabler (turtlebot_node/kinect_breaker_enabler.py)

    openni_manager (nodelet/nodelet)
    openni_camera (nodelet/nodelet)
    pointcloud_throttle (nodelet/nodelet)
    kinect_laser (nodelet/nodelet)
    kinect_laser_narrow (nodelet/nodelet)

ROS_MASTER_URI=http://172.20.110.90:11311

core service [/rosout] found

process[kinect_breaker_enabler-1]: started with pid [9107]

process[openni_manager-2]: started with pid [9108]

process[openni_camera-3]: started with pid [9109]

process[pointcloud_throttle-4]: started with pid [9110]

process[kinect_laser-5]: started with pid [9111]

process[kinect_laser_narrow-6]: started with pid [9112]

[rospack] opendir error [No such file or directory] while crawling /home/turtlebot/ros_workspace

[kinect_breaker_enabler-1] process has finished cleanly.

log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/kinect_breaker_enabler-1*.log

[ INFO] [1322866769.985481656]: [/openni_camera] Number devices connected: 1

[ INFO] [1322866769.987326721]: [/openni_camera] 1. device on bus 001:13 is a Xbox NUI Camera (2ae) from Microsoft (45e) with serial id 'B00365619884052B'

[ WARN] [1322866769.993239659]: [/openni_camera] device_id is not set! Using first device.

[openni_manager-2] process has died [pid 9108, exit code -4].
log files: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/openni_manager-2*.log

respawning...

[openni_manager-2] restarting process
process[openni_manager-2]: started with pid [9354]

[kinect_laser-5] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/kinect_laser-5*.log
respawning...

[kinect_laser-5] restarting process
process[kinect_laser-5]: started with pid [9423]
[pointcloud_throttle-4] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/pointcloud_throttle-4*.log

respawning...

[pointcloud_throttle-4] restarting process
process[pointcloud_throttle-4]: started with pid [9575]

[openni_camera-3] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/openni_camera-3*.log

respawning...

[kinect_laser_narrow-6] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/kinect_laser_narrow-6*.log

respawning...

[openni_camera-3] restarting process
process[openni_camera-3]: started with pid [9596]

[kinect_laser_narrow-6] restarting process
process[kinect_laser_narrow-6]: started with pid [9597]

[ INFO] [1322866793.702252097]: [/openni_camera] Number devices connected: 1

[ INFO] [1322866793.703281897]: [/openni_camera] 1. device on bus 001:13 is a Xbox NUI Camera (2ae) from Microsoft (45e) with serial id 'B00365619884052B'

[ WARN] [1322866793.705789075]: [/openni_camera] device_id is not set! Using first device.

[openni_manager-2] process has died [pid 9354, exit code -4].
log files: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/openni_manager-2*.log

respawning...

[openni_manager-2] restarting process
process[openni_manager-2]: started with pid [9648]

[kinect_laser-5] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/kinect_laser-5*.log

respawning...

[kinect_laser-5] restarting process
process[kinect_laser-5]: started with pid [9704]

[pointcloud_throttle-4] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/pointcloud_throttle-4*.log

respawning...

[pointcloud_throttle-4] restarting process
process[pointcloud_throttle-4]: started with pid [9719]

[openni_camera-3] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/openni_camera-3*.log

respawning...

[kinect_laser_narrow-6] process has finished cleanly.
log file: /home/turtlebot/.ros/log/62dbe61c-1d28-11e1-bb3f-0012f0704d87/kinect_laser_narrow-6*.log

respawning...

[openni_camera-3] restarting process
process[openni_camera-3]: started with pid [9873]

[kinect_laser_narrow-6] restarting process
process[kinect_laser_narrow-6]: started with pid [9874]

^C[kinect_laser_narrow-6] killing on exit

[kinect_laser-5] killing on exit

[openni_camera-3] killing on exit

[pointcloud_throttle-4] killing on exit

[openni_manager-2] killing on exit

shutting down processing monitor...

... shutting down processing monitor complete

done

I ran rosrun rviz rviz and "Fixed Frame" is red, ".Global Status" says "Error", and "Laser Scan, "Map", and "Pose Array" are all in yellow with "Status: Warning".  I'm not sure what is going wrong here.  Any help would be greatly appreciated.
Thanks so much,
Matthew
EDIT:
I realized the nodes /kinect_laser_narrow, /openni_manager, /openni_camera, /pointcloud_throttle, and /kinect_laser were running even after I stopped minimal.launch, so I tried to kill them using rosnode kill, but when I listed the nodes again, they were still there.  So I did roswtf and this is what happened:
    turtlebot@ubuntu:/opt/ros/electric/stacks$ rosnode kill /kinect_laser /kinect_laser_narrow /openni_camera /openni_manager /pointcloud_throttle 
killing:
 * /kinect_laser
 * /kinect_laser_narrow
 * /openni_camera
 * /openni_manager
 * /pointcloud_throttle
killed
turtlebot@ubuntu:/opt/ros/electric/stacks$ rosnode list
/kinect_laser
/kinect_laser_narrow
/openni_camera
/openni_manager
/pointcloud_throttle
/rosout
/rviz_1323472517075987151
/turtlebot_dashboard_17832_1323464372482
/turtlebot_dashboard_cpp_1323464423821573321
turtlebot@ubuntu:/opt/ros/electric/stacks$ roswtf
Loaded plugin tf.tfwtf
No package or stack in context
================================================================================
Static checks summary:

Found 1 error(s).

ERROR Not all paths in ROS_PACKAGE_PATH [/home/turtlebot/ros_workspace:/opt/ros/electric/stacks] point to an existing directory: 
 * /home/turtlebot/ros_workspace

================================================================================
Beginning tests of your ROS graph. These may take awhile...
analyzing graph...
... done analyzing graph
running graph rules...
ERROR: connection refused to [http://172.20.11.199:41306/]
ERROR: connection refused to [http://172.20.11.199:47925/]
ERROR: connection refused to [http://172.20.11.199:56781/]
ERROR: connection refused to [http://172.20.11.199:48070/]
ERROR: connection refused to [http://172.20.11.199:55096/]
... done running graph rules

Online checks summary:

Found 2 warning(s).
Warnings are things that may be just fine, but are sometimes at fault

WARNING The following node subscriptions are unconnected:
 * /rviz_1323472517075987151:
   * /tf
 * /turtlebot_dashboard_17832_1323464372482:
   * /diagnostics_agg

WARNING The following nodes are unexpectedly connected:
 * unknown (http://172.20.11.199:43213/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * unknown (http://172.20.11.199:56364/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * unknown (http://128.192.76.247:41881/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * /kinect_laser->/rosout (/rosout)
 * unknown (http://128.192.76.247:51207/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * /pointcloud_throttle->/rosout (/rosout)
 * unknown (http://172.20.11.199:49421/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * unknown (http://128.192.76.247:45394/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * /kinect_laser_narrow->/rosout (/rosout)
 * unknown (http://172.20.11.199:60959/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * /rviz_1323472517075987151->/rosout (/rosout)
 * unknown (http://172.20.11.199:52322/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)
 * /turtlebot_dashboard_cpp_1323464423821573321->/rosout (/rosout)
 * /turtlebot_dashboard_17832_1323464372482->/rosout (/rosout)
 * /openni_camera->/rosout (/rosout)
 * unknown (http://128.192.76.247:50375/)->/turtlebot_dashboard_17832_1323464372482 (/diagnostics_agg)

Found 2 error(s).

ERROR Could not contact the following nodes:
 * /kinect_laser_narrow
 * /openni_manager
 * /openni_camera
 * /pointcloud_throttle
 * /kinect_laser

ERROR Errors connecting to the following services:
 * service [/pointcloud_throttle/set_logger_level] appears to be malfunctioning: Unable to communicate with service [/pointcloud_throttle/set_logger_level], address [rosrpc://172.20.11.199:32820]
 * service [/kinect_laser/set_logger_level] appears to be malfunctioning: Unable to communicate with service [/kinect_laser/set_logger_level], address [rosrpc://172.20.11.199:43087]
 * service [/kinect_laser_narrow/set_logger_level] appears to be malfunctioning: Unable to communicate with service [/kinect_laser_narrow/set_logger_level], address [rosrpc://172.20.11.199:37636]
 * service [/openni_camera/get_loggers] appears to be malfunctioning: Unable to communicate with service [/openni_camera/get_loggers], address [rosrpc://172.20.11.199:50583]
 * service [/openni_manager/unload_nodelet] appears to be malfunctioning: Unable to communicate with service [/openni_manager/unload_nodelet], address [rosrpc://172.20.11.199:56483]
 * service [/pointcloud_throttle/get_loggers] appears to be malfunctioning: Unable to communicate with service [/pointcloud_throttle/get_loggers], address [rosrpc://172.20.11.199:32820]
 * service [/kinect_laser_narrow/get_loggers] appears to be malfunctioning: Unable to communicate with service [/kinect_laser_narrow/get_loggers], address [rosrpc://172.20.11.199:37636]
 * service [/openni_camera/set_logger_level] appears to be malfunctioning: Unable to communicate with service [/openni_camera/set_logger_level], address [rosrpc://172.20.11.199:50583]
 * service [/openni_manager/list] appears to be malfunctioning: Unable to communicate with service [/openni_manager/list], address [rosrpc://172.20.11.199:56483]
 * service [/kinect_laser/get_loggers] appears to be malfunctioning: Unable to communicate with service [/kinect_laser/get_loggers], address [rosrpc://172.20.11.199:43087]

When setting up communication between my desktop and laptop (which is the master, connected to the turtlebot), I did not set up a VPN.  I've never had other communication issues before with teleoperation, but do you think this could be a problem?
Thanks for all the help.

Originally posted by saltzm on ROS Answers with karma: 1 on 2011-12-02
Post score: 0

Original comments
Comment by saltzm on 2011-12-11:
Thanks for the help.  The nodes were indeed running in the background but I'm having some more trouble resolving that issue.  Please see the edit above for more information.  Thanks again
Comment by mmwise on 2011-12-08:
when you see nodes starting and dying immediately it usually means that there is another instance of the node already running. do a ps aux |grep ros and look for the process running in the background.
Comment by saltzm on 2011-12-04:
i had turtlebot_bringup minimal.launch running as well because the start/stop services don't seem to do anything and that's the only way i've been able to get the turtlebot up and running.  but i had it running while i ran the keyboard teleoperation  and it worked fine.
Comment by fergs on 2011-12-02:
Don't get hung up on the "device_id" message, as this is normal (we haven't set the device_id, so it just uses the first kinect attached, and as the turtlebot only has one kinect this works fine). Your problem is that openni_manager is dying -- are there any other roslaunch files running?

A:

When you see nodes starting and dying immediately it usually means that there is another instance of the node already running. do a ps aux |grep ros and look for the process running in the background.
Sometimes the openni_nodes don't go down cleanly just do a kill -9 on those processes.
Also given the above output it looks like you might not have your ROS_IP set in your environments. To check you can always open a terminal and type
env|grep ROS

this shows the values for all the ROS environment variables. If you ROS_IP is not set or set properly on one or more of the computers this should help you find the problem. Also you could review the networking tutorial here: http://ros.org/wiki/Robots/TurtleBot/Network%20Setup

Originally posted by mmwise with karma: 8372 on 2011-12-12
This answer was ACCEPTED on the original site
Post score: 0

