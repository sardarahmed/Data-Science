Q:

How to use Catkin to generate code for your own client library?

I'm currently developing a ROS Client Library for the Rust programming language. The development has been done sporadically in my free time for the last several months. The source code being here:
https://github.com/adnanademovic/rosrust
I pretty much followed the Wiki page for implementing client libraries and the "At a minimum, a client library MUST:" part is feature complete (though not error paths are done yet - I've focused on making the code very concurrent, and in some places I just tell a thread to crash without telling what happened).
Anyways, to be usable, I need to make a .msg file compiler. I'm aware of the existence of gendeps for md5 and message definition. The thing that confuses me is what depending on "roslang" does and how to integrate with rosbuild or catkin to generate .msg files for all dependencies too. So could anyone please shed some light on what the right thing to do here is?
Just to stress this - I already have the rosmsg compiler that takes a *.msg and spits out a .rs file. What I want to know is what the general ROS pipeline is - how to tell ROS, when I say catkin_make, to take a hierarchy of .msg files and put them through my compiler?

Originally posted by Adnan on ROS Answers with karma: 23 on 2016-09-27
Post score: 2

Original comments
Comment by gvdhoorn on 2016-09-27:
Quick comment: rosbuild was the old build infrastructure. This has been replaced by Catkin.

A:

(note: this answer is for Catkin. For rosbuild, I don't know)
Afaik, there are three parts to this (I'll use gencpp as an example):

a CMake 'extras' file that provides two macros that know how to take in a list of msg or srv defs and pass them on to your generator (gencpp/cmake/gencpp-extras.cmake.em)
exporting from your manifest the language that you'll be generating code for (gencpp/package.xml)
a few bits in your CMakeLists.txt that add a required file (gencpp/CMakeLists.txt)

And make sure to depend on the correct package(s) as well (genmsg among others).

Originally posted by gvdhoorn with karma: 86574 on 2016-09-27
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by gvdhoorn on 2016-09-27:
This is from memory and as a 'user'. @Dirk Thomas will probably correct me if I forgot something.
Comment by Adnan on 2016-09-27:
This has put me nicely on the track for what to do. Thanks!
Comment by gvdhoorn on 2016-09-28:
No problem.
May I suggest that you change the question's title if you're not actually interested in rosbuild? That would better describe the actual question.

