Q:

Robot Localization: How to set velocity using a service?

Hi!
I am using the robot localization pkg and my application requires to run multiple rosbags in a loop. The agent in all the bags does not necessarily start from 0 velocity. Is it possible to reset the velocity along with the pose every time there is a new bag encountered? Is it possible to have a rosservice to set the full state?

Originally posted by gandhigauri on ROS Answers with karma: 3 on 2019-03-08
Post score: 0

A:

Any time you set the pose, the non-pose variables should also get reset. This is the code for the setPoseCallback:

Create a measurement that is the size of the entire state
Zero it out
Update only the pose portion to non-zero values
Reset the filter state

Originally posted by Tom Moore with karma: 13689 on 2019-03-19
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by gandhigauri on 2019-03-19:
Thanks Tom! Is there any way to set the non-pose portions to non-zero values?
Comment by Tom Moore on 2019-03-20:
Not right now, but it would be a straightforward change to add a set_state service that takes a nav_msgs/Odometry message instead, if you are so inclined.
Comment by gandhigauri on 2019-03-20:
Thanks Tom! I added the new service and that gives me the desired output.

