Q:

Robotino Mapping, Navigation, Obtacle avoidance

Hello, I am a student and new to Robotino and ROS. I am using Robotino with ROS Indigo.
My goal is to move the robot from point A to B and avoid obstacle.
I have already done obstacle detection using distance sensors and kinect. I can move the robot manually using teleop.
I write a simple node to move the robot in a straight line and u-turn and return to the source point
geometry_msgs::Twist cmd_vel_msg_;
if(count>100 && count<140)
{
    ROS_INFO("U turn ..........%s", msg.data.c_str());
    vel_x = 0.0;
    vel_y = 0.0;
    vel_omega = 0.6;
    
}
else
{
     vel_x = .17;
       vel_y = 0.0;
       vel_omega = 0.0;
    ROS_INFO("straight------------- %s", msg.data.c_str());

}

cmd_vel_msg_.linear.x   = scale_linear_ * vel_x;
cmd_vel_msg_.linear.y   = scale_linear_ * vel_y;
cmd_vel_msg_.angular.z  = scale_angular_ * vel_omega;

    pub.publish(cmd_vel_msg_);
    ---------------------------------------------------------//and the publisher is
    pub = n.advertise<geometry_msgs::Twist>("/cmd_vel", 1, true);

Well I did the above node just for test purpose, and successfully tested that I can detect obstacle while moving.
But my target is to move the robot in a defined map. If there is any obstacle detected than avoid the obstacle collision.
I need to create a map for that but unfortunately the link is removed : http://wiki.ros.org/robotino_navigation/Tutorials/Mapping%20with%20Robotino
I am not getting any help and clue for creating map with robotino. i do not have any laser scanner. I am having kinect. Can anyone please please please suggest me what approach should I take to reach my goal?

Originally posted by rasoo on ROS Answers with karma: 43 on 2016-07-22
Post score: 0

A:

Since you are using Kinect, you might look at the Turtlebot tutorials (http://learn.turtlebot.com/) to see if there is any info that could be applicable to your robot (launch files, package for reading Kinect – or how to publish distance info into ROS from Kinect, etc.).

Originally posted by Mark Rose with karma: 1563 on 2016-07-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by rasoo on 2016-08-09:
Thank you so very much for your response. I have visited the link you provided. Now I have some specific questions. For robotino I use teh steps fromthe links
http://wiki.ros.org/ja/robotino_navigation/Tutorials/Mapping%20with%20Robotino
I was trying to run those command from my laptop.
[continue]
Comment by rasoo on 2016-08-09:
Can you please tell me whic command should i run in laptopn and which command to run in the Robotino?
normally i use to connect robotino using roboitno_node
roslaunch robotino_node robotino_node.launch hostname:=172.26.1.1
Thank you for your time.
Comment by Mark Rose on 2016-08-09:
As long as the communication is good, it doesn't make that much difference what you run on the robot and what you run on your laptop. On my robot (not a Robotino), I try to run everything on the robot except rviz and whatever I'm using for teleop. (I often use the teleop panel in rviz).
Comment by Mark Rose on 2016-08-09:
You can also run a single launch file on your laptop that spawns nodes on both your laptop and the robot, using the <machine> tag to define the hosts and the machine= attribute on the <node> tag. (Caveat: you must use RSA tokens with SSH, not SHA-1 tokens.)
Comment by rasoo on 2016-08-09:
Thanks a lot. Actually I was running everything in my laptop. And the map_saver command was not executing. It was waiting for the map.My questions
Do you use kinect to creat a map?
If I load a sample map then i can do the navigation using rviz. But how the obstacle detection will work? I was trying
Comment by rasoo on 2016-08-09:
to write my own node for obstacle detection using kinect and distance sensors. Because distance sensor can only detect within range of 40 cm and base of the robotino. And kinect will detect object from 40-75 cm range. But I am now confused, is writing those code will be reinventing the wheel!!!???!!
Comment by Mark Rose on 2016-08-09:
There is obstacle avoidance built-in to the local planner provided by move_base, so yes, if you write your own obstacle avoidance you may be reinventing the wheel. (But if you write a better planner, if you can, and use the plugin architecture, then others can use your code.)
Comment by Mark Rose on 2016-08-09:
To use the built-in obstacle detection, you need to publish a PointCloud, PointCloud2, or LaserScan using the Kinect and/or other distance sensors. The turtlebot packages include nodes to publish a LaserScan from Kinect data.
Comment by rasoo on 2016-08-16:
Thanks once again. But I am using RObotino and I do not have Laser Scan hardware. But I can get data from /odom odeometry, /distance_sensor PointCloud and /camera/depth/points PointCloud2 type msgs.
I need to create a map first. I am trying to use slam gmapping. For that I need LaserScan data......
Comment by rasoo on 2016-08-16:
I have tried to convert the PointCloud data to Laser scan using PoinCloud_to_laserScan and it publishes data over the topic /scan. But Rostopic echo /scan shows nothing. I created the bag for /scan anf tf. But I am still unable to create map. Show the message waiting for map.
Comment by rasoo on 2016-10-06:
Thanks fro your suggestion. Somehow I managed to load map to my navigation module. In the simulation RVIZ, it works good.But when I connnect the robotino, the localization is not working. The robot position in the map is blinking in different places. DO you have any idea why it happens?

