Q:

how to publish camera_info manually

I have a rosbag file which publishes the stereo images (left_image and right_image) but there is no camera_info attached to it.I want use the stereo_image_process packagelink text to get the point clouds.This node needs the image as well as camera_info to process the disparity and point cloud.
I have calibrated file in.yaml file format but i don't know how to publish the information in it in a camera info topic for left and right images (camera)
Also,what is the best way to do the above issue with less computation?
Many thanks in advance

Originally posted by Annaiyan on ROS Answers with karma: 51 on 2016-06-14
Post score: 4

Original comments
Comment by SpacemanSPIFF on 2016-06-27:
Hi,
There was a similar post in the ROS forums, check this link and this link . It might be of some help.

A:

Nice gist from @rossbar https://gist.github.com/rossbar/ebb282c3b73c41c1404123de6cea4771
# Load data from file
with open(yaml_fname, "r") as file_handle:
    calib_data = yaml.load(file_handle)
# Parse
camera_info_msg = CameraInfo()
camera_info_msg.width = calib_data["image_width"]
camera_info_msg.height = calib_data["image_height"]
camera_info_msg.K = calib_data["camera_matrix"]["data"]
camera_info_msg.D = calib_data["distortion_coefficients"]["data"]
camera_info_msg.R = calib_data["rectification_matrix"]["data"]
camera_info_msg.P = calib_data["projection_matrix"]["data"]
camera_info_msg.distortion_model = calib_data["distortion_model"]
return camera_info_msg

Originally posted by ckirksey with karma: 203 on 2017-08-29
This answer was ACCEPTED on the original site
Post score: 2

