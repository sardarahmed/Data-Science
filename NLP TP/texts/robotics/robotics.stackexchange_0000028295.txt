Q:

Simulated robot model randomly appears in gzweb-gui

Not sure if addressing this question here is the correct place.
I have a custom urdf model which is controlled with some ROS nodes. My plan was to use the gzweb-gui from a docker container to visualize my simulation.
So first (to test it) I installed gzweb on my local machine - Ubuntu 16, Gazebo 7 - and had to do lot of troubleshooting to get it working. Copied the meshes to /http/client/assets, changed package:// to model:// in my urdf and all that stuff and it works well. Just in 1 of 10 cases my robot model did not appear in the gzweb-gui (also in the model tree), but when i moved the robot in translate mode (in the gazebo-gui) the robot suddenly appeared in the web-gui.
To build my docker container - ubuntu 16, ROS Kinetic, Gazebo 7, gzweb - i used the prepared docker files from osrf: https://github.com/osrf/docker_images
I made the setup like on my local machine, but the robot only appears in probably 1 of 10 cases - each case is a new container of the docker image that i builded. I tried some things like restarting gazebo and gzweb, moving the robot with velocity commands, setting position of the robot via the rosservice etc. but nothing helped.
There was also one case when the model showed up in the gzweb-gui and after closing and restarting gzweb it wasnt there anymore.
Did anyone had similar problems? Is there any fix of this?? Thanks for any responses!!!
PS: I need to use gzweb, cause i want to run several docker container with simulations on a server.

Originally posted by wentz on Gazebo Answers with karma: 350 on 2017-10-02
Post score: 0

A:

When you say the model didn't appear, was it only on the 3D view, or is its name also not listed on the left panel? If it's on the panel but not on 3D, this means there is a problem finding the meshes.
Are you sure the model was spawned correctly on gzserver? You can check this by running gz model -m <model name> --info.
Also, make sure you are dealing with the correct simulation. In between tries, your GzWeb could be connecting to an old container which you thought was killed, for example.
Also make sure the server is still alive, when you say "the model was there but after restarting GzWeb it disappeared", it sounds like gzserver is not responding anymore, or your new GzWeb is talking on the wrong port.
Hope this helps a bit.

Originally posted by chapulina with karma: 7504 on 2017-10-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by wentz on 2017-10-04:
Hey thanks for reply. Unfortunately i can exclude the most things. By saying "didn't appear" i meant that the model is neither in 3D view nor in model tree (ground plan is always listed in the model tree).
I also checked the gazebo/default/world/stats topic to check if gzserver was still running (is there better way?). I'm running gzweb together with gazebo inside the container, and there is for sure only one container running.
Comment by wentz on 2017-10-04:
I also opened an issue here: https://bitbucket.org/osrf/gzweb/issues/117/robot-model-randomly-appears-in-gzweb
Comment by chapulina on 2017-10-05:
Are you able to open a gzclient on the same machine? Does the model show up there?
Comment by wentz on 2017-10-16:
So the last "new info" i experienced is that i'm able to see the robot in a local gzclient (with gzserver running in docker). When i move the robot in translate mode in the local gzclient the robot appears in the gzweb model tree but not in the gzweb gui. Seems the the browser has problems to get the collision/visual-model from a gzweb client that is running in docker.
Comment by chapulina on 2017-10-16:
On the container where you run GzWeb, do you have the model files under http/client/assets? They should be put there when you run deploy.

