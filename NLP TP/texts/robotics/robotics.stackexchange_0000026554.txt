Q:

installing gazebo_ros_pkgs for groovy

Hi,
today i tried to reinstall gazebo and gazebo_ros_pkgs following the current instructions. Gazebo compiles and runs without any problems. but when i tried to compile gazebo_ros_pkgs I ran into a couple of problems.
1st missing shared objects in the precompiled ubuntu package
when I called catkin_make to compile the gazebo_ros_pkgs there where at least one missing .so file:
/usr/bin/ld: cannot find -lgazebo_sdf_interface
so i tried compiling from src witch leaded to other problems
2nd rosdep installs gazebo-prerelease
the command rosdep install --from-paths src --ignore-src --rosdistro groovy -y installs
gazebo-prerelease and sdformat debian packages.
this should probably not happen...
but can be easily undone, with apt-get remove...
3rd
when I try to run catkin_make I get an error about redefinition of classes.
In file included from /usr/local/include/gazebo-1.9/gazebo/sdf/interface/SDF.hh:25:0, from /usr/local/include/gazebo-1.9/gazebo/sdf/sdf.hh:21, from /usr/local/include/gazebo-1.9/gazebo/physics/State.hh:26, from /usr/local/include/gazebo-1.9/gazebo/physics/ModelState.hh:30, from /usr/local/include/gazebo-1.9/gazebo/physics/Model.hh:31, from /usr/local/include/gazebo-1.9/gazebo/physics/Actor.hh:24, from /usr/local/include/gazebo-1.9/gazebo/physics/physics.hh:2, from $HOME/catkin_ws/src/gazebo_ros_pkgs/gazebo_plugins/include/gazebo_plugins/gazebo_ros_block_laser.h:37, from $HOME/catkin_ws/src/gazebo_ros_pkgs/gazebo_plugins/src/gazebo_ros_block_laser.cpp:26: /usr/local/include/gazebo-1.9/gazebo/sdf/interface/Param.hh:50:9: error: redefinition of ‘class sdf::Param’ /usr/include/sdf-1.4/sdf/Param.hh:52:9: error: previous definition of ‘class sdf::Param’ 
currently I don't know how to fix this problems. I would be happy if some one could point me in the right direction...
Thx
Benjamin

Originally posted by evilBiber on Gazebo Answers with karma: 881 on 2013-07-16
Post score: 2

Original comments
Comment by EduardoMaciel on 2013-07-17:
In your ~/catkin_ws/build/CMakeCache.txt, add the following code (search INTERNAL cache entries): https://gist.github.com/anonymous/6022853 - try again catkins_make.

A:

Hi again,
after switching to the branch gazebo_1.9 the old error disappeared and now i get an error about a missing SDF.hh header and a lot of other things
/home/user/catkin_ws/src/gazebo_ros_pkgs/gazebo_plugins/src/gazebo_ros_bumper.cpp:31:22: fatal error: sdf/SDF.hh: No such file or directory compilation terminated. /home/user/catkin_ws/src/gazebo_ros_pkgs/gazebo_plugins/src/gazebo_ros_camera_utils.cpp:34:22: fatal error: sdf/SDF.hh: No such file or directory compilation terminated. /home/user/catkin_ws/src/gazebo_ros_pkgs/gazebo_plugins/src/gazebo_ros_block_laser.cpp:31:22: fatal error: sdf/SDF.hh: No such file or directory compilation terminated.
I'm currently confused how this can compile on other installations...
a lot of plugins seem to include <sdf/SDF.hh> (for example gazebo_ros_block_laser.cpp)
but neither gazebo nor sdformat seems to have a file in this path
gazebo has <sdf/interface/SDF.hh> and sdformat has no SDF.hh.
when using the SDF.hh from gazebo catkin was trying to use the sdf includes from gazebo...
after further investigations I recognized that gazebo is not using any of the src in the gazebo/sdf  directory anymore, so removed the gazebo sdf directory in my include path and replaced all occurrences of sdf/SDF.hh with sdf/sdf.hh
this seems to have solved the Problem. I'm not sure how this is supposed to work
I will now do some tests with my current solution and mark the Question as solved if no unexspected behaviour occurs....

Originally posted by evilBiber with karma: 881 on 2013-07-18
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by EduardoMaciel on 2013-07-18:
In your ~/catkinws/build/CMakeCache.txt, add the following code (search INTERNAL cache entries): https://gist.github.com/anonymous/6022853 - try again catkinsmake.
Comment by hsu on 2013-07-25:
this might be an error from intermediate releases, can you try
sudo apt-get update
sudo apt-get install gazebo
to install latest gazebo 1.9.0 and try catkin_make again from scratch?  This should have been fixed.
Comment by evilBiber on 2013-07-26:
@hsu Hi,
the SDF.hh error is definitively fixed in the repo...
I am not sure about the copied directory of the current gazebo-src realease...
but I guess the files aren't copied anymore. I don't know if this Problem occurres when using the precompiled gazebo-prerealese version...
maybe I try to install everything from source again next week but I'm not sure if I find the time for that.

