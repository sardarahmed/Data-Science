Q:

Error running the autoware runtime manager

I try to run the autoware rosbag demo (https://github.com/autowarefoundation/autoware/wiki/ROSBAG-Demo) but the autoware runtime manager reports following error after launching it using ./run
top: bad delay interval '0.1'
Exception in thread Thread-8:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 801, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 754, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/carla/autoware/ros/install/runtime_manager/lib/runtime_manager/runtime_manager_dialog.py", line 1408, in top_cmd_th
    s = subprocess.check_output(['sh', '-c', 'env COLUMNS=512 top -b -n 2 -d 0.1']).strip()
  File "/usr/lib/python2.7/subprocess.py", line 223, in check_output
    raise CalledProcessError(retcode, cmd, output=output)
CalledProcessError: Command '['sh', '-c', 'env COLUMNS=512 top -b -n 2 -d 0.1']' returned non-zero exit status 1

I have installed autoware v1.12.0 from source (https://gitlab.com/autowarefoundation/autoware.ai/autoware/wikis/Source-Build) on ubuntu 18.04.  with ROS melodic.
The output of locale is:
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC=de_DE.UTF-8
LC_TIME=de_DE.UTF-8
LC_COLLATE="en_US.UTF-8"
LC_MONETARY=de_DE.UTF-8
LC_MESSAGES="en_US.UTF-8"
LC_PAPER=de_DE.UTF-8
LC_NAME=de_DE.UTF-8
LC_ADDRESS=de_DE.UTF-8
LC_TELEPHONE=de_DE.UTF-8
LC_MEASUREMENT=de_DE.UTF-8
LC_IDENTIFICATION=de_DE.UTF-8
LC_ALL=

Can somebody help me with this issue?

Originally posted by udeto on ROS Answers with karma: 35 on 2019-07-07
Post score: 0

Original comments
Comment by gvdhoorn on 2019-07-07:
This could be a locale issue (commas vs dots). Does top -b -n 2 -d 0,1 in a terminal work?
Comment by udeto on 2019-07-07:
Yes, thank you very much!
I just had to replace "0.1" with "0,1" in runtime_manager_dialog.py and it worked.
Comment by gvdhoorn on 2019-07-07:
That is not a solution. It was a step in diagnosing what is wrong.
What is the output of locale?

A:

The output of locale is:

...

LC_NUMERIC=de_DE.UTF-8
...

you have configured a German "regional format" with an English system language.
That in itself is not a problem, but it would appear Autoware -- at least the version you are attempting to use -- assumes a US regional setting (ie: a locale that uses dots to separate decimals instead of commas).
It has hardcoded the use of a dot (.) in the top command line used in the runtime manager.
I would suggest to report this on the Autoware issue trackers, as either Autoware should require the user to use a dot-based regional setting, or Autoware should become locale-agnostic/aware.

Originally posted by gvdhoorn with karma: 86574 on 2019-07-08
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2019-07-08:
If you do report this to the Autoware maintainers/authors, please post a link here to your issue so we can keep things connected.
Comment by udeto on 2019-07-08:
Alright, thank you, for your help!

