Q:

Cannot reproduce nvidia-docker2 installation from the tutorial

Hello, I've been trying to get OpenGL work with nvidia-docker2 to run gazebo in Docker.
I've started to repeat the steps outlined in "1.2 nvidia-docker2" section of this http://wiki.ros.org/docker/Tutorials/Hardware%20Acceleration#nvidia-docker2 tutorial.
First, I've found some mistakes in it:

One should do RUN DEBIAN_FRONTEND=noninteractive apt-get install -y tzdata, the current installation command does not work -- the installation process hangs when selecting location area
Package lsb_release should be lsb-release
One needs to also install gnupg before running apt-key

After fixing these I got my Docker image built. But the last step, which should display RViz, tells me
root@2e605489cabd:/# rosrun rviz rviz
QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-root'
No protocol specified
qt.qpa.screen: QXcbConnection: Could not connect to display :0
Could not connect to any X display.

The host system is Ubuntu 16.04.

Originally posted by Ilya Kuzovkin on ROS Answers with karma: 56 on 2018-06-28
Post score: 3

A:

Found the answer. On my system I was running docker from under root (sudo docker instead of just docker inside run_my_image.sh).
To allow root user the access to running X server one must run (on the host machine) the following command
$ xhost +si:localuser:root
Now I am able to run RViz and Gazebo.

Originally posted by Ilya Kuzovkin with karma: 56 on 2018-06-28
This answer was ACCEPTED on the original site
Post score: 1

