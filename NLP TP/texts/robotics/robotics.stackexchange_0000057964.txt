Q:

Save map before exiting launch file

Hi,
I have a launch file which runs 2 nodes (i.e slam_gmapping and rosbag play).
I set the rosbag node so that required="true" . So, the launch file and all other nodes running will be killed
once the rosbag is finished.
My problem is, I want to save the map after the rosbag play is finished but before the launch file is killed.
If I run the map_server in the launch file, it will save the initial map instead of the required final one.
Is there any way to get the final map?
Thanks for any input. Appreciate it.

Originally posted by clonzz on ROS Answers with karma: 60 on 2014-03-16
Post score: 2

A:

I have successfully implement it using some trick. I compiled a c program with the following fraction of codes
system(roslaunch slam_gmapping.launch &);   //In this launch file, put slam_gmapping node so that required='true'
system("rosbag play bagfile.bag");
system("rosrun map_server map_saver");
system("rosnode kill slam_gmapping");
Firstly, the program launch slam_gmapping.launch. This launch file was set such that required='true' for slam_gmapping node. Then, play the rosbag. After the rosbag play finished, the map is saved (at this time, the slam_gmapping.launch is still running and the map will definitely be available). Then, the slam_gmapping node is killed and thus killing the launch file safely (since the required='true' is set to the node).

Originally posted by clonzz with karma: 60 on 2014-03-18
This answer was ACCEPTED on the original site
Post score: 0

