Q:

RGBDslam:negative mahalanobis distance

Hi all,
I try to use rgbdslam for my dataset consisting out of depth and rgb images saved as png.
To make my live easy I tried to write a bag file from these images and then use this bagfile for the rgbdslam. But when I start the reconstruction I get a error about a negative mahalanobis distance and absolut nothing gets reconstructed.
What could be the cause for that? How can even a negative mahalanobis distance emerge?
here is a sample output:
[ERROR] [1359413304.934807938]: Non-Positive Mahalanobis Distance for vectors 2.68921e+22
1.42928e+22
6.56501e+22
1
and
1.08665e-31
7.1891e-32
2.5584e-31
1 with covariances
6.56972e+17           0           0
          0 7.03062e+17           0
          0           0 3.23245e+43
and
2.56023e-36           0           0
          0 2.73984e-36           0
          0           0 4.90904e-64
[ERROR] [1359413304.935060057]: Non-Positive Mahalanobis Distance for vectors -4.749e-39
-3.48146e-39
-1.29024e-38
1
and
7.44725e-30
6.38305e-30
1.98261e-29
1 with covariances
-1.29116e-43            0            0
           0 -1.38174e-43            0
           0            0  1.24853e-78
and
1.98404e-34           0           0
          0 2.12323e-34           0
          0           0 2.94807e-60
[ERROR] [1359413304.935230189]: Non-Positive Mahalanobis Distance for vectors -2.44741e+27
1.18307e+27
4.70933e+27
1
and
-6.61237e-31
3.8003e-31
1.30072e-30
1 with covariances
4.71271e+22           0           0
          0 5.04332e+22           0
          0           0 1.66333e+53
and
1.30165e-35           0           0
          0 1.39297e-35           0
          0           0 1.26891e-62

EDIT 1:
I think the problem lies in the saving and re-conversion to a sensor_msgs of the depth map. My self-written bag file is displayed totally different as the original bag file.
I uploaded some Images to explain the problem a little bit better to imgur.com here
There are three screenshots. In every screenshot is the RGBDslam gui plus the window from image_view dispalying the same depth map.
When I playback the original reference bag file everything works and the image_view and the RGBDslam display of the depth map are identical.
When I playback my own bag file these two are significantly different.

Originally posted by dinamex on ROS Answers with karma: 447 on 2013-01-25
Post score: 0

A:

This could happen for NaN depth values (the error message should be "non-positive", not "negative").
These are ignored in the ransac inlier determination, so it should be no problem.
From the output you added, it's obvious that the depth values are completely wrong. Unfortunately I do not know how to correct them.

Originally posted by Felix Endres with karma: 6468 on 2013-01-27
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by dinamex on 2013-01-28:
please sse the edit. When I start the reconstruction nothing gets reconstructed. The vectors seems to me way to small or big...
Comment by dinamex on 2013-01-31:
did you see my upoaded pictures?
Comment by Felix Endres on 2013-02-04:
Yes, but I don't know how to correct them. I know nothing of that factor 5000. Rgbdslam assumes float values in meter, and I guess that is what it gets in the first picture.

