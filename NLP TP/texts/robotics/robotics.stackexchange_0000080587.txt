Q:

4 frame positioned relative to each other

Hi!
Recently, I have started to play in ROS and now I am trying to display 4 frames in RVIZ without success.
The problem is that, the frames should be positioned relative to each other and me, with my ignorant brain cant realize the mistake.
static tf2_ros::TransformBroadcaster br;
for (int i = 1; i <= myRobot->getJointNumber(); i++) {
    stringstream name, prevName;
    name << "{" << i << "}";
    prevName << "{" << (i-1) << "}";
    geometry_msgs::TransformStamped transformStamped;
    transformStamped.header.stamp = ros::Time::now();
    
    transformStamped.header.frame_id = prevName.str();
    transformStamped.child_frame_id = name.str();

    transformStamped.transform.translation.x = 0.0;
    transformStamped.transform.translation.y = 0.0;
    transformStamped.transform.translation.z = 0.0;
    tf2::Quaternion q;
    q.setRPY(0, 0, 0);
    transformStamped.transform.rotation.x = q.x();
    transformStamped.transform.rotation.y = q.y();
    transformStamped.transform.rotation.z = q.z();
    transformStamped.transform.rotation.w = q.w();
    
    frames.push_back(transformStamped);
    br.sendTransform(transformStamped);
}

Only one or two frames shows up, which are directly linked to the fixed frame.
And here is two image to see how it is shown:

https://drive.google.com/file/d/0By6anwacYsC3b0ZYR0QwZXd1d0E/view?usp=sharing
rosrun tf view_frames :
https://drive.google.com/file/d/0By6anwacYsC3RjBEc3NlQUZkYlE/view

Originally posted by Ervin on ROS Answers with karma: 26 on 2017-05-03
Post score: 1

Original comments
Comment by Felix Endres on 2017-05-03:
What does the pdf output look like if you run rosrun tf view_frames
Comment by Ervin on 2017-05-03:
this is the output:
https://drive.google.com/file/d/0By6anwacYsC3RjBEc3NlQUZkYlE/view?usp=sharing
Comment by Felix Endres on 2017-05-03:
That looks correct. As does your code. Maybe your 30khz update rate is overburdening rviz.
Comment by gvdhoorn on 2017-05-03:
There is no +1 funny, otherwise I would've used it here :)
Comment by Ervin on 2017-05-03:
Thanks Felix, I found the problem, it is working now!

A:

Finally, I found the problem...  I wrote an other broadcaster function too, which is updating the frames from the frames-vector. This updater function didn't have the header.stamp... so the problem come from here.

Originally posted by Ervin with karma: 26 on 2017-05-03
This answer was ACCEPTED on the original site
Post score: 0

