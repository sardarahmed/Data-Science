Q:

Launch file - how to write it?

Hello All,
I am relatively new user of ROS, and this is the first time I should write a launch file. I would be happy if you could navigate me to the best way to do it.
What I do is: I subscribe to recorded topics (bag files) using image_transport package, I republish their content to different topics (from compressed to raw), and eventually I subscribe to those topics with my subscriber (the only node I have created).
The shell command lines I use in order to run my program without a launch file are:
roscore

rosbag play -l left_camrea.bag

rosbag play -l rigth_camrea.bag

rosrun image_transport republish compressed in:=/bb2/left/image_rect raw 
  out:=lefttopic

rosrun image_transport republish compressed in:=/bb2/right/image_rect raw     
  out:=righttopic

rosrun myPackage myExecutibleFile

I also need to configure parameters for my program via this launch file.
What from the above can/should be included in the launch file? What should not?
What is the conceptual structure of my file should be like?
Thank you for your attention,
Felix,

Originally posted by Felix Tr on ROS Answers with karma: 378 on 2011-12-05
Post score: 8

A:

Here is a good starting place for writing launch files. In general, all of your nodes/parameters can and should be run via launch files. This allows for the most control over your programs. Though, at times, it might not be advisable to restart all processes when you're trying to debug a single node. In that instance, you can use the command line to launch that process separately, just so you can kill/restart it at your leisure.
Here is an example of how to launch a bagfile via roslaunch. The one thing that you should also note is that if your program relies on the timestamp of incoming messages, you should set the use_sim_time parameter in your launch file so that your nodes will use the bagfile's timestamp instead of the PC's. You can do that by putting the following in your launch file:
<param name="use_sim_time" value="true" />

And just to help you out, here is example of how to use the republish node via launchfile (it's not explicitly obvious from reading the tutorials I've provided.
<node name="republish" type="republish" pkg="image_transport" output="screen" args="compressed in:=/axis_camera raw out:=/axis_camera/image_raw" />

As for using multiple bagfiles at the same time, you might run into some problems, since rosbag has limitations on recording the time exactly. As such, you might find that your bag times don't sync up. If this is the case, you can try using the rosbag API and the associated Cookbook to try and solve your problem.

Originally posted by DimitriProsser with karma: 11163 on 2011-12-05
This answer was ACCEPTED on the original site
Post score: 20

Original comments
Comment by Felix Tr on 2011-12-05:
Thanks a lot, your answer helped me, and now I have the needed launch file :)

