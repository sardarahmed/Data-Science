Q:

rflex/b21 cmd_vel not working as expected

Hi, I have a problem with a B21r. Here is what I did:

Start roscore
Start b21 drivers (rosrun rflex b21)
Publish this message to /b21/cmd_vel:

rostopic pub -1 /b21/cmd_vel geometry_msgs/Twist '[0, 0, 0]' '[0, 0, 0.3]'

What I expect and get in simulations is that the robot turns a step and stops.
What I get with is that it takes a while until the robot starts to move, then turns, stops, turns another step, stops, and so on (with different step sizes). I watched /b21/cmd_vel, the command is only sent once. Sometimes the b21 driver prints a message like
"B21 Home 26.523571".
Is this this correct behavior and am I missing something? It would be nice if someone could explain this behavior to me. We tried navigating with ROSE, and it worked correctly, so it seems not to be a hardware issue.

Originally posted by Tim Heinrich on ROS Answers with karma: 21 on 2011-08-15
Post score: 2

A:

When I wrote the RFLEX driver, I tested it with the joystick teleop and navigation stacks. I had not really considered the effects of sending just one message.
When the driver recieves the Twist message, it stores the velocities and sends them to the hardware continuously. The effect I would expect from running that command is for the robot to turn in a circle indefinitely. I don't know why it stops.
The B21 Home message is leftover debug information (sorry about that) for when it hits its 'home' orientation.
I wrote the driver awhile ago. If this is not the standard behavior for working with cmd_vel commands, I can fix it. Or better yet, you can submit a patch :)

Originally posted by David Lu with karma: 10932 on 2011-08-23
This answer was ACCEPTED on the original site
Post score: 0

