Q:

error creating workspace/mavros error

Hello everyone,
I have been using the install guide  from erle robotics and when i try to exectute the following commands (last 3 at the bottom of the guide,after installing gazebo) it works fine until the last one: catkin_make
cd ~/simulation/ros_catkin_ws    
source devel/setup.bash
catkin_make

It shows an error message
  CMake Error at mavros/libmavconn/cmake/Modules/MavrosMavlink.cmake:4 (find_package):
  By not providing "Findmavlink.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "mavlink", but
  CMake did not find one.

  Could not find a package configuration file provided by "mavlink" with any
  of the following names:

    mavlinkConfig.cmake
    mavlink-config.cmake

  Add the installation prefix of "mavlink" to CMAKE_PREFIX_PATH or set
  "mavlink_DIR" to a directory containing one of the above files.  If
  "mavlink" provides a separate development package or SDK, be sure it has
  been installed.
Call Stack (most recent call first):
  mavros/libmavconn/CMakeLists.txt:16 (include)

-- Configuring incomplete, errors occurred!
See also "/home/cyberpunk/simulation/ros_catkin_ws/build/CMakeFiles/CMakeOutput.log".
See also "/home/cyberpunk/simulation/ros_catkin_ws/build/CMakeFiles/CMakeError.log".
make: *** [cmake_check_build_system] Error 1
Invoking "make cmake_check_build_system" failed

#1 EDIT 25/5
I followed the mavros install instructions install instructions (as proposed at one answer) and at step #5 catkin build it prints out this error message
Errors     << test_mavros:cmake /home/cyberpunk/catkin_ws/logs/test_mavros/build.cmake.000.log
CMake Warning at /opt/ros/indigo/share/catkin/cmake/catkinConfig.cmake:76 (find_package):
  Could not find a package configuration file provided by "control_toolbox"
  with any of the following names:

    control_toolboxConfig.cmake
    control_toolbox-config.cmake

  Add the installation prefix of "control_toolbox" to CMAKE_PREFIX_PATH or
  set "control_toolbox_DIR" to a directory containing one of the above files.
  If "control_toolbox" provides a separate development package or SDK, be
  sure it has been installed.
Call Stack (most recent call first):
  CMakeLists.txt:7 (find_package)

CMake Error at /opt/ros/indigo/share/catkin/cmake/catkinConfig.cmake:83 (find_package):
  Could not find a package configuration file provided by "control_toolbox"
  with any of the following names:

    control_toolboxConfig.cmake
    control_toolbox-config.cmake

  Add the installation prefix of "control_toolbox" to CMAKE_PREFIX_PATH or
  set "control_toolbox_DIR" to a directory containing one of the above files.
  If "control_toolbox" provides a separate development package or SDK, be
  sure it has been installed.
Call Stack (most recent call first):
  CMakeLists.txt:7 (find_package)

cd /home/cyberpunk/catkin_ws/build/test_mavros; catkin build --get-env test_mavros | catkin env -si  /usr/bin/cmake /home/cyberpunk/catkin_ws/src/mavros/test_mavros --no-warn-unused-cli -DCATKIN_DEVEL_PREFIX=/home/cyberpunk/catkin_ws/devel/.private/test_mavros -DCMAKE_INSTALL_PREFIX=/home/cyberpunk/catkin_ws/install; cd -
...............................................................................
Failed     << test_mavros:cmake                    [ Exited with code 1 ]      
Failed    <<< test_mavros                          [ 1.0 seconds ]             
[build] Summary: 6 of 7 packages succeeded.                                    
[build]   Ignored:   None.                                                     
[build]   Warnings:  1 packages succeeded with warnings.                       
[build]   Abandoned: None.                                                     
[build]   Failed:    1 packages failed.                                        
[build] Runtime: 3 minutes and 4.3 seconds total.                              
[build] Note: Workspace packages have changed, please re-source setup files to use them.

Originally posted by Evans on ROS Answers with karma: 1 on 2016-05-22
Post score: 0

Original comments
Comment by gvdhoorn on 2016-05-22:
There is probably more error output that comes with that. Could you add that to your question (please edit it)?
Comment by ROSkinect on 2016-05-24:
What I suggest is to delete the folder ros_catkin_ws and create it , build it again. And if you have the same error report it again here with the steps you follow

A:

It looks like your error is because catkin_make can't find mavlink when trying to build the mavros ROS package. From your question, it's not clear exactly which instructions you are trying to follow, but if you are following instructions it's possible they are outdated. Check out the Installation Instructions on the mavros GitHub page. They include steps for getting mavlink. Note that the current version of the instructions use catkin tools for building the workspace. That is not necessary. You could use vanilla catkin instead, but you'll likely have to use catkin_make_isolated instead of catkin_make because mavlink is not a ROS package.
EDIT
After the latest edit from OP the error has changed to a missing dependency on the control_toolbox package when building the test_mavros package. Either install this package from apt-get (it's available on Indigo) or add it to the workspace and build it from source. Note that the originally linked instructions include the following line
rosdep install --from-paths src --ignore-src --rosdistro indigo -y

which should automatically install ros-indigo-control-toolbox using apt-get. It appears this package is properly listed in the test_mavros package.xml and CMakeLists.txt.

Originally posted by jarvisschultz with karma: 9031 on 2016-05-24
This answer was ACCEPTED on the original site
Post score: 1

