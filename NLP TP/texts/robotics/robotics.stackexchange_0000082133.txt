Q:

Travis Build Fails on installing moveit_ros_planning_interface

My Travis build fails with:
The following packages have unmet dependencies:
 ros-indigo-moveit-commander : Depends: ros-indigo-moveit-ros-planning-interface but it is not going to be installed

Does anyone know if this is related to changes in Moveit lately? I think my travis.yml is okay because it's pretty much the same as the one for rail_manipulation_msgs. Here's the travis.yml:
 {
  "sudo": "required",
  "dist": "trusty",
  "language": "generic",
  "env": "CI_ROS_DISTRO=\"indigo\"",
  "install": [
    "sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu trusty main\" > /etc/apt/sources.list.d/ros-latest.list'",
    "wget http://packages.ros.org/ros.key -O - | sudo apt-key add -",
    "sudo apt-get update -qq",
    "sudo apt-get install -qq -y python-rosdep python-catkin-tools",
    "sudo rosdep init",
    "rosdep update",
    "rosdep install --from-paths ./ -i -y --rosdistro $CI_ROS_DISTRO"
  ],
  "script": [
    "source /opt/ros/$CI_ROS_DISTRO/setup.bash",
    "mkdir -p $CATKIN_WS_SRC",
    "ln -s $TRAVIS_BUILD_DIR $CATKIN_WS_SRC",
    "cd $CATKIN_WS",
    "catkin init",
    "pip install catkin-pkg",
    "catkin config --install",
    "catkin build --limit-status-rate 0.1 --no-notify -DCMAKE_BUILD_TYPE=Release"
  ],
  "global_env": "CATKIN_WS=~/catkin_ws CATKIN_WS_SRC=${CATKIN_WS}/src",
  "group": "stable",
  "os": "linux"
}

I tried restarting the build a few times but it always fails on the same thing. I can install moveit_commander and moveit_ros_planning_interface from the command line without issues.
Full build error here: https://travis-ci.org/fetchrobotics/fetch_pbd/builds/260312942
Thanks!
-Sarah

Originally posted by velveteenrobot on ROS Answers with karma: 136 on 2017-08-02
Post score: 1

A:

I ended up fixing this by using https://github.com/ros-industrial/industrial_ci. To be honest I don't know why this works, it now takes way longer because it uses Docker. But it does work and a lot of projects seem to use it.
   sudo: required
   dist: trusty
   language: generic
   notifications:
     email:
       on_success: change
       on_failure: always
   env:
     global:
       - ROS_REPO=ros
       - NOT_TEST_INSTALL=true
     matrix:
       - ROS_DISTRO=indigo UPSTREAM_WORKSPACE=file
       - ROS_DISTRO=indigo UPSTREAM_WORKSPACE=debian
   matrix:
     allow_failures:
       - env: ROS_DISTRO=indigo UPSTREAM_WORKSPACE=debian
   install:
     - git clone https://github.com/ros-industrial/industrial_ci.git .ci_config
   script:
     - .ci_config/travis.sh

Originally posted by velveteenrobot with karma: 136 on 2017-08-15
This answer was ACCEPTED on the original site
Post score: 1

