Q:

no disparity output of stereo_image_proc

I'm running ROS Electric on Ubuntu 11.10 x86 with Linux kernel 3.0.0-16-generic-pae and
I'm experiencing almost the same problem as in thread:No-disparity-on-output-of-stereo_image_proc. I'm using a pair of PointGrey Chameleon cameras, and I get both left and right rectified mono and color topic at 15Hz, verified with rostopic hz and image_view on the following topics:
/stereo/left/image_rect
/stereo/right/image_rect
/stereo/left/image_mono
/stereo/right/image_mono
/stereo/left/image_raw
/stereo/right/image_raw
/stereo/left/image_color
/stereo/right/image_color

I'm running stereo_image_proc with _approximate_sync:=True parameter but the problem is I'm getting no messages on /stereo/disparity topic. Can anyone help me solve this issue? I know there were a few facing almost the same problem, but I can't manage to find a correct solution to this problem, other than using __approximate_sync=true.
I'm using a launch file to run stereo_image_proc in the same namespace as the camera drivers, that look something like this:
<launch> 
<group ns="stereo" >
<!-- left camera -->
<node pkg="camera1394" type="camera1394_node" name="left" >
 <param name="guid" value="00b09d01009a2931" />
  <param name="video_mode" value="1280x960_mono8" />
  <param name="iso_speed" value="400" />
  <param name="frame_id" value="camera_left" />
  <param name="frame_rate" value="15" />
  <param name="bayer_pattern" value="gbrg" />
  <param name="bayer_method" value="" />
  <param name="camera_info_url" value="file:///home/robo/.ros/camera_info/00b09d01009a2931.yaml" />
  <remap from="camera" to="left" />
 </node>
 <!-- right camera -->
 <node pkg="camera1394" type="camera1394_node" name="right">
<param name="guid" value="00b09d01009a290e" />
  <param name="video_mode" value="1280x960_mono8" />
  <param name="iso_speed" value="400" />
  <param name="frame_id" value="camera_right" />
  <param name="frame_rate" value="15" />
  <param name="bayer_pattern" value="gbrg" />
  <param name="bayer_method" value="" />
  <param name="camera_info_url" value="file:///home/robo/.ros/camera_info/00b09d01009a290e.yaml" />
   <remap from="camera" to="right" />
   </node>
<node pkg="stereo_image_proc" type="stereo_image_proc" respawn="false" name="stereo_image_proc" args="_approximate_sync:=True">
</node>

The same thing happens if I don't run stereo_image_proc in the launch file, but instead I use the command:
ROS_NAMESPACE=stereo rosrun stereo_image_proc stereo_image_proc __name:=proc __approximate_sync:=True
In both cases I'm getting rectified color images from both cameras (inspected with image_view)
Thanks!

Originally posted by Robo on ROS Answers with karma: 1 on 2012-03-08
Post score: 0

Original comments
Comment by Bence Magyar on 2012-03-09:
please also post the exact command you use to run stereo_image_proc
Comment by Robo on 2012-03-12:
It seems that I cannot comment on your answer: I've tried that and a couple of other things. To me, the situation looks like this: stere_image_proc is conected (tested with rxgraph as well) to the right topics and is publising rectified images. The issue is with disparity and pointcloud topics
Comment by Benjamin Blumer on 2015-09-22:
Robo -- which part of Bences solution worked for you? I'm having a similar problem. I can see the rectified output images, but not a disparity image.

A:

ROS_NAMESPACE=stereo rosrun stereo_image_proc stereo_image_proc /stereo/left/image_raw:=/stereo/left/image /stereo/right/image_raw:=/stereo/right/image
Sorry but based on these I don't have the direct solution.
I used to run the command above because I only have that 2 image topics in my datasets.
Also there are some packages that sometimes won't get the topic namespace right if you put it like this: "ROS_NAMESPACE=stereo" but using this works: "ROS_NAMESPACE=/stereo" -- although as it can be seen it's working for me in this case
To check if the data flow is right I used to use rxgraph with all_topics checked.
That's all the hints I could give you, good luck :)

Originally posted by Bence Magyar with karma: 358 on 2012-03-12
This answer was ACCEPTED on the original site
Post score: 1

