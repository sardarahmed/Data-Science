Q:

RGBDSLAM not doing 3D reconsturction (on fuerte)

I successfully installed rgbdslam on ROS fuerte. When I launch the kinect+rgbdslam.launch I get the UI. I click on process and the features are detected and the correspondences seem to be working. All looks well but no 3D reconstruction is being shown.
It says at the bottom of the UI: "waiting for motion information" and in the terminal it shows the following:
[ INFO] [1355903732.079881431]: Depth image time: 1355903731 - 878567146
[ INFO] [1355903732.080918784]: RGB   image time: 1355903731 - 913552042
[ WARN] [1355903732.084094819]: Depth and RGB image off more than 1/30sec: 34984896 (nsec)
[ INFO] [1355903732.587797417]: Pause toggled to: false
[ INFO] [1355903732.815951500]: Construction of Node with SURF Features
[ INFO] [1355903737.829001763]: Feature Count of Node:  443
[ WARN] [1355903738.674672363]: Frame id /odom does not exist! Frames (6): Frame /camera_rgb_frame exists with parent /camera_link.
Frame /camera_link exists with parent NO_PARENT.
Frame /camera_depth_optical_frame exists with parent /camera_depth_frame.
Frame /camera_depth_frame exists with parent /camera_link.
Frame /camera_rgb_optical_frame exists with parent /camera_rgb_frame.
 - No odometry available
[ INFO] [1355903738.675202249]: Odometry: Translation 0 0 0
[ INFO] [1355903738.675471277]: Odometry: Rotation 0 0 0 1
[ INFO] [1355903738.693846797]: Ground Truth Transform for First Node: Translation 0 0 0
[ INFO] [1355903738.695485904]: Ground Truth Transform for First Node: Rotation 0 0 0 1
[ INFO] [1355903738.773433385]: Built flannIndex (address 0xaa6050e8) for Node 0
[ INFO] [1355903738.904000759]: Construction of Node with SURF Features
[ INFO] [1355903743.774805419]: Feature Count of Node:  456
[ WARN] [1355903744.660199853]: Frame id /odom does not exist! Frames (6): Frame /camera_rgb_frame exists with parent /camera_link.
Frame /camera_link exists with parent NO_PARENT.
Frame /camera_depth_optical_frame exists with parent /camera_depth_frame.
Frame /camera_depth_frame exists with parent /camera_link.
Frame /camera_rgb_optical_frame exists with parent /camera_rgb_frame.
 - No odometry available
[ INFO] [1355903744.662045199]: Odometry: Translation 0 0 0
[ INFO] [1355903744.662473325]: Odometry: Rotation 0 0 0 1
[ INFO] [1355903744.668235792]: Odometry Delta: Translation 0 0 0
[ INFO] [1355903744.668508592]: Odometry Delta: Rotation 0 0 0 1
[ WARN] [1355903744.668768122]: No Valid Odometry, using identity
[ INFO] [1355903744.668973525]: Comparing new node (1) with previous node 0
[ INFO] [1355903744.731947735]: Feature Matches between Nodes   1 ( 200 features) and   0 ( 200 features) in segment 1/1 (features 0 to 200 of first node):  161. Percentage: 80.500000%, Avg NN Ratio: 0.297273
[ INFO] [1355903744.732694688]: count_matrix(  2,   1) =   161;
[ INFO] [1355903744.733212840]: dista_matrix(  2,   1) =  0.191996;
[ INFO] [1355903744.773284974]: 31 good iterations (from 1000), inlier pct 95, inlier cnt: 154, error: 67.58 cm
[ INFO] [1355903744.774400688]: RANSAC found a valid transformation with 154 inliers matches with average ratio 0.171038
[ INFO] [1355903744.775239970]: Returning Valid Edge
[ INFO] [1355903744.776239537]: Rotation: 0.00, Distance:  0.000m
[ WARN] [1355903744.777023925]: Transformation not relevant. Did not add as Node
[ INFO] [1355903744.777894357]: World->Base: Translation 1.249e-18 0 1.249e-18
[ INFO] [1355903744.778470129]: World->Base: Rotation 0 0 0 1
[ INFO] [1355903744.869838314]: Construction of Node with SURF Features
[ INFO] [1355903750.519140991]: Feature Count of Node:  433
[ WARN] [1355903751.387779597]: Frame id /odom does not exist! Frames (7): Frame /camera_rgb_frame exists with parent /camera_link.
Frame /camera_link exists with parent NO_PARENT.
Frame /camera_depth_optical_frame exists with parent /camera_depth_frame.
Frame /camera_depth_frame exists with parent /camera_link.
Frame /camera_rgb_optical_frame exists with parent /camera_rgb_frame.
Frame /map exists with parent /camera_link.
 - No odometry available
[ INFO] [1355903751.388249629]: Odometry: Translation 0 0 0
[ INFO] [1355903751.388523127]: Odometry: Rotation 0 0 0 1
[ INFO] [1355903751.390569125]: Odometry Delta: Translation 0 0 0
[ INFO] [1355903751.390779347]: Odometry Delta: Rotation 0 0 0 1
[ WARN] [1355903751.393873245]: No Valid Odometry, using identity
[ INFO] [1355903751.394985537]: Comparing new node (1) with previous node 0
[ INFO] [1355903751.442999884]: Depth image time: 1355903751 - 246981734
[ INFO] [1355903751.443300900]: RGB   image time: 1355903751 - 282716236
[ WARN] [1355903751.443496106]: Depth and RGB image off more than 1/30sec: 35734502 (nsec)
[ INFO] [1355903751.466150594]: Feature Matches between Nodes   1 ( 200 features) and   0 ( 200 features) in segment 1/1 (features 0 to 200 of first node):  113. Percentage: 56.500000%, Avg NN Ratio: 0.553020
[ INFO] [1355903751.467639540]: count_matrix(  2,   1) =   113;
[ INFO] [1355903751.468423858]: dista_matrix(  2,   1) =  0.354141;
[ INFO] [1355903751.510701233]: 31 good iterations (from 1000), inlier pct 84, inlier cnt: 95, error: 92.51 cm
[ INFO] [1355903751.512020047]: RANSAC found a valid transformation with 95 inliers matches with average ratio 0.310455
[ INFO] [1355903751.519503538]: Returning Valid Edge
[ INFO] [1355903751.521524815]: Rotation: 4.15, Distance:  0.016m
[ INFO] [1355903751.524233053]: Added Edge between 0 and 1. Inliers: 95
[ INFO] [1355903751.526651097]: Node ID's to compare with candidate for node 1. Sequential: 
[ INFO] [1355903751.528562581]: Running node comparisons in parallel in 9 (of 10) available threads
[ INFO] [1355903751.584287123]: Construction of Node with SURF Features
[ INFO] [1355903751.601200452]: Built flannIndex (address 0xaa6229b8) for Node 1
[ INFO] [1355903751.602089041]: Added Node, new graphsize: 2 nodes
[ INFO] [1355903751.602950044]: World->Base: Translation 1.249e-18 0 1.249e-18
[ INFO] [1355903751.603713059]: World->Base: Rotation 0 0 0 1
[ WARN] [1355903751.610665551]: Loop Closures: 0, Sequential Edges: 1
[ WARN] [1355903751.610871443]: Starting Optimization
iteration= 0     chi2= 0.000000  time= 0.00190012    cumTime= 0.00190012     lambda= -1.000000   edges= 1    schur= 0
[ WARN] [1355903751.616374236]: G2O Statistics: 2 nodes, 1 edges. 1.33169302494684e-33 ; chi2 , Iterations: 1
iteration= 0     chi2= 0.000000  time= 0.000772057   cumTime= 0.000772057    lambda= -1.000000   edges= 1    schur= 0
[ WARN] [1355903751.618361222]: G2O Statistics: 2 nodes, 1 edges. 1.33169302494684e-33 ; chi2 , Iterations: 1
[ INFO] [1355903751.618850391]: G2O Converged after 1 iterations
[ INFO] [1355903751.619303661]: Finished G2O optimization after 1 iterations
[ WARN] [1355903751.628222042]: Optimizer Runtime; 0.0174911 s
[ INFO] [1355903760.178369446]: Feature Count of Node:  594
[ WARN] [1355903760.965550555]: Frame id /odom does not exist! Frames (7): Frame /camera_rgb_frame exists with parent /camera_link.
Frame /camera_link exists with parent NO_PARENT.
Frame /camera_depth_optical_frame exists with parent /camera_depth_frame.
Frame /camera_depth_frame exists with parent /camera_link.
Frame /camera_rgb_optical_frame exists with parent /camera_rgb_frame.
Frame /map exists with parent /camera_link.
 - No odometry available
[ INFO] [1355903760.966135406]: Odometry: Translation 0 0 0
[ INFO] [1355903760.966545094]: Odometry: Rotation 0 0 0 1
[ INFO] [1355903760.974699833]: Odometry Delta: Translation 0 0 0
[ INFO] [1355903760.975028855]: Odometry Delta: Rotation 0 0 0 1
[ WARN] [1355903760.975192424]: No Valid Odometry, using identity
[ INFO] [1355903760.975324982]: Comparing new node (2) with previous node 1
[ INFO] [1355903761.029012886]: Feature Matches between Nodes   2 ( 200 features) and   1 ( 200 features) in segment 1/1 (features 0 to 200 of first node):  115. Percentage: 57.500000%, Avg NN Ratio: 0.546457
[ INFO] [1355903761.029504289]: count_matrix(  3,   2) =   115;
[ INFO] [1355903761.030314168]: dista_matrix(  3,   2) =  0.352436;
[ INFO] [1355903761.070116226]: 42 good iterations (from 1000), inlier pct 79, inlier cnt: 91, error: 127.04 cm
[ INFO] [1355903761.071976377]: RANSAC found a valid transformation with 91 inliers matches with average ratio 0.296702
[ INFO] [1355903761.074385552]: Returning Valid Edge
[ INFO] [1355903761.075693959]: Rotation: 5.16, Distance:  0.112m
[ INFO] [1355903761.077794157]: Added Edge between 1 and 2. Inliers: 91
[ INFO] [1355903761.079602419]: Node ID's to compare with candidate for node 2. Sequential: 0, 
[ INFO] [1355903761.081391404]: Running node comparisons in parallel in 9 (of 10) available threads
[ INFO] [1355903761.196750553]: Feature Matches between Nodes   2 ( 200 features) and   0 ( 200 features) in segment 1/1 (features 0 to 200 of first node):  101. Percentage: 50.500000%, Avg NN Ratio: 0.625470
[ INFO] [1355903761.198434009]: count_matrix(  3,   1) =   101;
[ INFO] [1355903761.199859610]: dista_matrix(  3,   1) =  0.429446;
[ INFO] [1355903761.213269414]: Construction of Node with SURF Features
[ INFO] [1355903761.268955616]: 70 good iterations (from 1000), inlier pct 70, inlier cnt: 71, error: 140.65 cm
[ INFO] [1355903761.269640760]: RANSAC found a valid transformation with 71 inliers matches with average ratio 0.368228
[ INFO] [1355903761.273928457]: Returning Valid Edge
[ INFO] [1355903761.278408075]: Information Matrix for Edge (0<->2
484   0   0   0   0   0
  0 484   0   0   0   0
  0   0 484   0   0   0
  0   0   0 484   0   0
  0   0   0   0 484   0
  0   0   0   0   0 484

Does anyone have any idea why the 3D reconstruction is not working? Im using an Asus xtion.

Originally posted by tgaaly on ROS Answers with karma: 36 on 2012-12-18
Post score: 0

A:

This is caused by the voxelfilter setting. I've removed it from the default launchfile now, so either update your repository, remove it manually from the launch file or use the launchfiles suggested by kk49

Originally posted by Felix Endres with karma: 6468 on 2013-01-15
This answer was ACCEPTED on the original site
Post score: 1

