Q:

Help with Navigation - Error "transform from /base_link to /map"

Hello There!
I am having a hard time to get the Navigation Stack running on a robot (Traxbot), to which it was added an Hokuyo laser sensor.
I was able to follow the navigation tutorial smoothly, broadcasting the base_laserâ†’base_link transform, publishing a sensor_msgs/LaserScan using hokuyo_node, publishing the nav_msgs/Odometry message over ROS and a transforming from a "/odom" coordinate frame to "/base_link", as well as receiving velocity commands and passing them on to the robot. I have also created a very simple map of a square arena.
All of these issues have been tested and seem to be working just fine.
Then, I have created the launch file to bring up the robot's configurations as well as the navigation stack (with AMCL), following the tutorial instructions.
So, when I roslaunch my "traxbot_config.launch", everything works fine:
NODES
 /
  robot_node (traxbot_robot/robot_node)
  hokuyo_node (hokuyo_node/hokuyo_node)
  traxbot_static_tf_laser (mrl_tf_setup/traxbot_static_tf_laser)

  ROS_MASTER_URI=http://localhost:11311

  core service [/rosout] found
  process[robot_node-1]: started with pid [8014]
  process[hokuyo_node-2]: started with pid [8015]
  process[traxbot_static_tf_laser-3]: started with pid [8016]
  [ WARN] [1338989473.365252155]: The use_rep_117 parameter has not been set or is set to false.  Please see: http://ros.org/wiki/rep_117/migration
  [ INFO] [1338989473.518591684]: Robot -- Successfully connected to the Robot!

Then, I roslaunch the navstack ("move_base_square_map.launch"), and I get the following output:
NODES
 /
   map_server (map_server/map_server)
   amcl (amcl/amcl)
   move_base (move_base/move_base)

   ROS_MASTER_URI=http://localhost:11311

   core service [/rosout] found
   process[map_server-1]: started with pid [2187]
   process[amcl-2]: started with pid [2188]
   process[move_base-3]: started with pid [2189]
   [ INFO] [1339006055.653083864]: Subscribed to Topics: laser_scan_sensor
   [ INFO] [1339006055.681022434]: Requesting the map...
   [ INFO] [1339006055.683225249]: Still waiting on map...
   [ INFO] [1339006056.684127276]: Still waiting on map...
   [ WARN] [1339006057.693208432]: You have set map parameters, but also requested to use the static map. Your parameters will be overwritten by those given by the map server
   [ INFO] [1339006057.694168703]: Received a 200 X 200 map at 0.005000 m/pix
   [ WARN] [1339006062.734650906]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: 
   [ WARN] [1339006067.778188511]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: 
   [ WARN] [1339006072.821525895]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: 
   [ WARN] [1339006077.858041067]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: 
   [ WARN] [1339006082.896098542]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: 
   [ WARN] [1339006087.945294010]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: 
   [ WARN] [1339006093.020568219]: Waiting on transform from /base_link to /map to become available before running costmap, tf error: 
   [ WARN] [1339006098.075362691]: Waiting on transform from /base_link to /map to become available before running costmap, tf error:

Note that after "error:" there is no information as it usually exists when this warning msg shows up (e.g., here).
So I have analyzed all the param files to check if I got the frame IDs right. Apparently, everything is fine. I thought the problem would be the AMCL because it is responsible for this transformation, but I did not find anything odd in my launch file.
My rxgraph looks like this (sorry, haven't got karma>20, so cannot post images).
My param files and AMCL  launch.
rostopic list
roswtf
view_frames (no map frame...)
I am using ROS Electric.
Please, can someone help me out? If anything else is needed, I will gladly post it later.
Thanks in advance :)

Originally posted by DavidPortugal on ROS Answers with karma: 349 on 2012-06-06
Post score: 3

A:

So...after a while, I ended up solving the problem of bringing up the Nav Stack today. The problem was in the "costmap_common_params.yaml" file.
Basically I was setting the robot footprint in cms, instead of using meters. So I was defining a robot that would have a larger size than the map itself :D
Apparently, that was enough for not running the costmap and blow the whole thing up.
Thank you everyone for your feedback!

Originally posted by DavidPortugal with karma: 349 on 2012-06-11
This answer was ACCEPTED on the original site
Post score: 4

