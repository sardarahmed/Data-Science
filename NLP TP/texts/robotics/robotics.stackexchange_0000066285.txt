Q:

Unexpected heading and trailing symbols in logfile's string

Hi all!
I'm using Indigo on Ubuntu 14.04 and facing strange issue with redirecting node logging to the file. When specific node's output in roslaunch XML-file is set to "log" some unexpended symbols are added to the head and to the tail of each log string. Log string looks like as follows
.[0m.[0m
where  - is the string which is intended to be put in file and "." stands for the symbol with code "1B" in hex.
When output is set to "screen" no extra symbols is shown.
I'm wondering why are these symbols appended to the string in log file and is there any chance to get rid of the?

Originally posted by Ilya S. on ROS Answers with karma: 3 on 2015-03-10
Post score: 0

A:

I'm wondering why are these symbols appended to the string in log file [..]

They are ANSI escape codes, used by ROS logging to add colours and font weights (such as boldface) to logging lines.

When output is set to "screen" no extra symbols is shown.

That is because the terminal driver knows how to interprete these sequences and uses them to set font properties for the logging lines.

is there any chance to get rid of the(m)?

If you just want to view a file with embedded escape sequences, you can use less -r /path/to/your/file.log. less will interprete the escape codes then and show you the text as it was printed to the console.
To actually remove them from the file seems to be not so straightforward (see here).
Some options however:

how can I strip escape sequences from a text file?: uses sed
Remove color codes (special characters) with sed: also sed
Remove ANSI codes when storing script output: doesn't really remove them, but tries to avoid them being added in the first place by forcing the terminal to report it doesn't support colours.

Originally posted by gvdhoorn with karma: 86574 on 2015-03-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Ilya S. on 2015-03-10:
Thank you very much for your prompt and such a detailed answer!
Comment by gvdhoorn on 2015-03-10:
No problem.
Also: please don't use answers to post comments, use the add comment button for that.
Comment by Ilya S. on 2015-03-10:
Ok. Got it!

