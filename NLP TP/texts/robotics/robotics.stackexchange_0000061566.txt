Q:

Is it possible to reuse ROS messages?

After calling publish, can I reuse the same message object to send a similar message with some small changes? Basically I'm asking if the message is already serialized by the time the publish function returns. If it's not serialized right away, then there is a chance that I could overwrite some values from the previous message, and so it would not be possible to reuse it.

Originally posted by Neil Traft on ROS Answers with karma: 205 on 2014-08-06
Post score: 2

A:

In most cases, it's fine to re-use message objects.
if you're publishing shared pointers to messages, and subscribing within the came C++ node (or another nodelet in the same process), the pointers are passed directly, and the message should not be modified after it is published.

Originally posted by ahendrix with karma: 47576 on 2014-08-06
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by Neil Traft on 2014-08-06:
Okay, I think I understand the concern when publishing within the same node (because the message is never serialized), but if the message is serialized then it is done synchronously and is finished by the time publish returns?
Comment by Neil Traft on 2014-08-06:
Okay, I see it now. I just didn't know how to dig into the source code before, but I can see now that in topic_manager.cpp it is serialized right away.

