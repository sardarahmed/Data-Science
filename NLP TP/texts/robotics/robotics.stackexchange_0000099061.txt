Q:

Set the initialpose (ROS2)

Hello I am still relatively new to ROS2 and am currently working on getting my digital Turtlebot3 to drive around in a Gazebo environment. I'm using ROS2 foxy on Ubuntu 20.04 and for navigation I use navigation2.
I then execute the following commands:

ros2 launch gazebo_ros gzserver.launch.py world:=/home/.../env.world
ros2 run gazebo_ros spawn_entity.py -file /home/.../environment.sdf -entity environment
ros2 launch turtlebot3_gazebo robot_state_publisher.launch.py
ros2 launch nav2_bringup bringup_launch.py use_sim_time:=True autostart:=True map:=/home/map.yaml

Now the following error occurs at the last command.
[amcl-2] [WARN] [1620937828.832260000] [amcl]: ACML cannot publish a pose or update the transform. Please set the initial pose...

How do I set the initial pose? I know that you can do it via Rviz, but in this case I want to solve it without RViz (with a command or programmatically via rclpy).

Originally posted by RamiAW on ROS Answers with karma: 13 on 2021-05-18
Post score: 1

A:

Two options that I know of if you do not want to use RVIZ to set the initial pose:

the amcl_node supports a set_initial_pose argument, as well as initial_pose.x, .y, .z, and .yaw. You can modify your launch files accordingly so this is set to your known or best guess initial position.

(probably the easier method) is to publish a message to the /intialpose topic. That should look something like this from the commandline:
ros2 topic pub -1 /initialpose geometry_msgs/PoseWithCovarianceStamped '{ header: {stamp: {sec: 0, nanosec: 0}, frame_id: "map"}, pose: { pose: {position: {x: 0.1, y: 0.0, z: 0.0}, orientation: {w: 0.1}}, } }'

Originally posted by shonigmann with karma: 1567 on 2021-05-18
This answer was ACCEPTED on the original site
Post score: 3

