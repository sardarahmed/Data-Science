Q:

gz log does not work, causes segmentation fault

I launched an empty world with a waffle_pi, using the urdf from turtlebot3_description
Then in another terminal I run gz log -d 1 -e, I got
<?xml version='1.0'?>
<gazebo_log>
<header>
<log_version></log_version>
<gazebo_version></gazebo_version>
<rand_seed>0</rand_seed>
<log_start>0 0</log_start>
<log_end>0 0</log_end>
</header>

Segmentation fault

If I run gz log -d 1 without the -e, the terminal that is running the world shows
Error [parser_urdf.cc:3474] Unable to call parseURDF on robot model
Error [parser.cc:341] parse as old deprecated model file failed.

This happens on both gazebo 7.16.1 with ROS Kinetic and 9.13.2 with ROS Melodic

Originally posted by waffle_pi on Gazebo Answers with karma: 13 on 2020-10-29
Post score: 0

A:

You are not supposed to use -d with -e. -d is for starting/stopping recording, and -e is for printing the contents of a file. A possible workflow could be:

gz log -d 1 to start recording
gz log -d 0 to stop recording
gz log -e -f <path-to>/state.log to view the contents of the log

You can ignore the parseUrdf error.

Originally posted by nlamprian with karma: 833 on 2020-10-29
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by waffle_pi on 2020-10-29:
Thanks! A follow up question: I see that gz log -d 1 actually makes gazebo publish a message to ~/log/control, do you think I can write a ROS node, listen to a topic and do the same when received a message? Basically I want to programmatically start/stop recording
Comment by nlamprian on 2020-10-30:
Probably. If you don't want to look into the details, you can also do a system call to gz log ....
Comment by waffle_pi on 2020-10-30:
turns out it only works when you publish the message to gazebo/default/log/control but not ~/log/control

