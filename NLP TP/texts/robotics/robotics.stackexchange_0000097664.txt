Q:

How to use Autoware's lidar_camera extrinsics

I am following the readme autoware.readthedocs.io and have performed the intrinsic calibration and also the extrinsic calibration successfully and left with a file similar to YYYYmmdd_HHMM_autoware_lidar_camera_calibration.yaml.
The docs in the end mention "This file can be used with Autoware's  Calibration Publisher to publish and register the transformation between the LiDAR and camera. The file contains both the intrinsic and extrinsic parameters."
However, I am not sure how to use this file. The calibration_publisher uses only the intrinsics file. Where and how is the extrinsics file used? Do I just replace the intrinsics file path with the extrinsics file path? I intend to register the lidar2camera_tf.

Originally posted by Akhil Kurup on ROS Answers with karma: 459 on 2020-11-23
Post score: 0

A:

The extrinsic parameters should be with the intrinsic parameter in a single file if you follow the instructions here. The structure of the file should be like this one, but with your specific calibration data.
The calibration publisher node will read the extrinsic parameters and register a transform between the camera and lidar coordinates with it.

Originally posted by pedroexe with karma: 50 on 2021-02-25
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Akhil Kurup on 2021-02-26:
Thanks! I will try this out and give you an update.
Comment by Thiago de Borba on 2021-05-28:
Hi @Akhil Kurup,
Could you calibrate it correctly?
Comment by Akhil Kurup on 2021-05-28:
Not yet! My project and priorities have changed and I am unable to spend time with it
Comment by Akhil Kurup on 2021-05-31:
Thanks for the clarification @pedroexe! It works now. My issue was with topic names. After fixing those, I can see a "calibrated" link between the lidar and camera on the tf tree
Comment by Akhil Kurup on 2021-05-31:
@Thiago de Borba I got it to work now. As I mentioned, the tools were performing normally. My issue was with topic names and namespaces
Comment by Thiago de Borba on 2021-06-01:
But for me the calibration extrinsics is complelty wrong. Is it working fine for you?
Comment by Akhil Kurup on 2021-06-01:
Ahh yes! With help from @djchopp here are a couple lessons learnt:

The transform generated is from lidar_frame -> camera_frame. So make the appropriate change in the launch file.
When you select points in RViz, it publishes to the /clickedpoint topic in your global fixed frame in rviz. What I did was to change it to the lidar_frame before selecting points. That way, the generated extrinsics were relative to the lidar.
After all is said and done, be sure to change the camera_frame to the newly published calibrated_frame in the camera launch file.

