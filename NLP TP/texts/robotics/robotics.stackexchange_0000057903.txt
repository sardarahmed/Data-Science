Q:

rviz crashes when used with pr2 navigation

I'm trying to launch the navigation stack for the pr2. Here's what I run:

rosrun map_server map_server basement_map.yaml
roslaunch pr2_navigation_global rviz_move_base.launch
(on the robot) roslaunch pr2_2dnav pr2_2dnav.launch

After I launch the 2dnav on the robot, the robot model appears in rviz. After about 10 seconds the red markers for obstacles appear and rviz crashes immediately. Usually it doesn't give an error message but sometimes there's also this message:
*** glibc detected *** /opt/ros/groovy/lib/rviz/rviz: free(): corrupted unsorted chunks: 0x000000000280e750 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7fd273539b96]
/opt/ros/groovy

(there's a lot more text, here's the full error message: pastebin.com/ArwKkirr)
Sometimes the message  looks similar, but starts with "corrupted double linked list" or "malloc error".
The same thing happens if I launch pr2_interactive_manipulation with navigation enabled (without navigation everything is fine).
I'm using Ubuntu 12.04, Nvidia driver 331 (I also tried it with 304 and with a generic driver, same thing happens).
Update: seems that the problem is caused by GridCells visualization. If I start with a fresh rviz ("rosrun rviz rviz") and add navigation-related topics one by one, rviz crashes after GridCells are added with a non-empty topic (for example, "/move_base_node/local_costmap/obstacles")
Update 2: Another way for rviz to crash turned out to be adding DepthCloud with a non-empty DepthMap topic (for example, "/head_mount_kinect/depth_registered/image").

Originally posted by sonyaa on ROS Answers with karma: 23 on 2014-03-13
Post score: 1

Original comments
Comment by demmeln on 2014-04-04:
Just a longshot: are you possibly mixing different ROS versions? Or different versions of boost? Otherwise, could be a bug in the GridCells display and it might be worth filing a bug report.
Comment by sonyaa on 2014-04-04:
Thanks for the suggestion! The versions of ROS and boost are the same on the robot and the machine I'm running rviz from. I've also just discovered one more way to make rviz crash (see update).

A:

This is probably an rviz bug that they fixed.  I suggest download and build new version of rviz or try to run old one with optirun if You can( that can fix few bugs but not all). U can read more about this :
my question
issue on official repo

Originally posted by BP with karma: 176 on 2014-04-04
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by sonyaa on 2014-04-04:
Thank you! I installed a new version of rviz (1.9.35) and that worked.
Comment by BP on 2014-04-04:
I'm glad I could help :)

