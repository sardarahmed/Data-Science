Q:

I am Beginner in ROS.My USB camera is running on ROS.please i need a help, how to save an sensor_msgs/Image to a create file?

I am Beginner in ROS.My USB camera is running on ROS.please i need a help, how to save an sensor_msgs/Image to a create file?

Originally posted by toupass on ROS Answers with karma: 3 on 2014-11-19
Post score: 0

A:

If you need a "screenshot", you have two possibilities:

Use system-screenshot ability and take a screenshot of the image_view output.
Write a little Node / Nodelet which listen to a keyboard shortcut and then write the current image to file, for e.g. with cv_bridge functionality.

    void save_image(const sensor_msgs::ImageConstPtr img, const std::string prefix)
    {
        // May want to view raw bayer data
        // NB: This is hacky, but should be OK since we have only one image CB.
        if (img->encoding.find("bayer") != std::string::npos)
          boost::const_pointer_cast(img)->encoding = "mono8";

        cv::Mat image;
        try
        {
          image = cv_bridge::toCvShare(img, "bgr8")->image;
        } catch(cv_bridge::Exception)
        {
          ROS_ERROR("Unable to convert %s image to bgr8", img->encoding.c_str());
        }
        std::string directory = std::string(getenv("HOME")) + "/catkin_ws/video_dumper_jpeg/";
        std::string filename = (filename_format_ % prefix % count_ ).str();
        cv::imwrite(directory + filename, image);
    }

Originally posted by Torsten with karma: 111 on 2014-11-20
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by toupass on 2014-11-21:
thank you very much it works successfuly
Comment by Torsten on 2014-11-21:
You are welcome. Then please upvote and mark the answer as correct. Thank you!

