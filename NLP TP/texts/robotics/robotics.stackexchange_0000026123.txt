Q:

Problems converting a deprecated SDF source

Hello,
I'm new to ROS and Gazebo. I'm trying to get this demo running. However, I'm having problems running the launch file. It appears that the models used in the demo (an environment and a quadrotor) are in URDF format and the auto convert to SDF functionality is failing. Could anybody help me? From rummaging around the site, I have figured out that maybe a new version of gazebo would help this problem. However, I have not found instructions on how to link the stand-alone to ROS in an easy to understand way.
Thanks
Here is what happens when I run the command:
roslaunch hector_quadrotor_demo outdoor_flight_gazebo.launch

with the launch file that looks like this:
<?xml version="1.0"?>

<launch>
   
  <!-- Start Gazebo with wg world running in (max) realtime -->
  <include file="$(find hector_gazebo_worlds)/launch/rolling_landscape_120m.launch"/>
   
  <!-- Spawn simulated quadrotor uav -->
  <include file="$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch" >
    <arg name="model" value="$(find hector_quadrotor_urdf)/urdf/quadrotor_hokuyo_utm30lx.urdf.xacro"/> 
  </include>
  
  <!-- Start rviz visualization with preset config -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find hector_quadrotor_demo)/rviz_cfg/outdoor_flight.vcg"/>
   
</launch

I end up with this:
... logging to /home/jacob/.ros/log/67ea6088-98a7-11e2-900e-20cf30275ecc/roslaunch-Jacob-Desktop-Ubuntu-20329.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://Jacob-Desktop-Ubuntu:47942/

SUMMARY
========

PARAMETERS
 * /gazebo/quadrotor_aerodynamics/C_mxy
 * /gazebo/quadrotor_aerodynamics/C_mz
 * /gazebo/quadrotor_aerodynamics/C_wxy
 * /gazebo/quadrotor_aerodynamics/C_wz
 * /gazebo/quadrotor_propulsion/CT0s
 * /gazebo/quadrotor_propulsion/CT1s
 * /gazebo/quadrotor_propulsion/CT2s
 * /gazebo/quadrotor_propulsion/J_M
 * /gazebo/quadrotor_propulsion/Psi
 * /gazebo/quadrotor_propulsion/R_A
 * /gazebo/quadrotor_propulsion/alpha_m
 * /gazebo/quadrotor_propulsion/beta_m
 * /gazebo/quadrotor_propulsion/k_m
 * /gazebo/quadrotor_propulsion/k_t
 * /gazebo/quadrotor_propulsion/l_m
 * /ground_truth_to_tf/frame_id
 * /ground_truth_to_tf/odometry_topic
 * /ground_truth_to_tf/tf_prefix
 * /robot_description
 * /robot_state_publisher/publish_frequency
 * /robot_state_publisher/tf_prefix
 * /rosdistro
 * /rosversion
 * /use_sim_time

NODES
  /
    gazebo (gazebo/gazebo)
    gazebo_gui (gazebo/gui)
    ground_truth_to_tf (message_to_tf/message_to_tf)
    robot_state_publisher (robot_state_publisher/state_publisher)
    rviz (rviz/rviz)
    spawn_robot (gazebo/spawn_model)

auto-starting new master
process[master]: started with pid [20353]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 67ea6088-98a7-11e2-900e-20cf30275ecc
process[rosout-1]: started with pid [20366]
started core service [/rosout]
process[gazebo-2]: started with pid [20380]
process[gazebo_gui-3]: started with pid [20390]
Gazebo multi-robot simulator, version 1.3.0
Copyright (C) 2012 Nate Koenig, John Hsu, and contributors.
Released under the Apache 2 License.
http://gazebosim.org

process[spawn_robot-4]: started with pid [20402]
Gazebo multi-robot simulator, version 1.3.0
Copyright (C) 2012 Nate Koenig, John Hsu, and contributors.
Released under the Apache 2 License.
http://gazebosim.org

process[robot_state_publisher-5]: started with pid [20406]
/opt/ros/groovy/lib/robot_state_publisher/state_publisher
[ WARN] [1364585556.376703689]: The 'state_publisher' executable is deprecated. Please use 'robot_state_publisher' instead
[ WARN] [1364585556.380129599]: The root link base_link has an inertia specified in the URDF, but KDL does not support a root link with an inertia.  As a workaround, you can add an extra dummy link to your URDF.
process[ground_truth_to_tf-6]: started with pid [20434]
process[rviz-7]: started with pid [20467]
Warning [parser.cc:361] Converting a deprecated SDF source[/opt/ros/groovy/stacks/hector_gazebo/hector_gazebo_worlds/worlds/rolling_landscape_120m.world].
Set SDF value
  Version[1.0] to Version[1.3]
  Please use the gzsdf tool to update your SDF files.
    $ gzsdf convert [sdf_file]
Error [Converter.cc:73] Unable to load file[]
Warning [parser.cc:499] XML Attribute[rgba] in element[ambient] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[rgba] in element[background] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[enabled] in element[shadows] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[xyz] in element[gravity] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[type] in element[solver] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[dt] in element[solver] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[iters] in element[solver] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[sor] in element[solver] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[cfm] in element[constraints] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[erp] in element[constraints] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[contact_max_correcting_vel] in element[constraints] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[contact_surface_layer] in element[constraints] not defined in SDF, ignoring.
Warning [parser.cc:499] XML Attribute[cast_shadows] in element[light] not defined in SDF, ignoring.
Error [parser.cc:695] XML Element[origin], child of element[light] not defined in SDF. Ignoring.[light]
Error [parser.cc:686] Error reading element <light>
Error [parser.cc:686] Error reading element <world>
Error [parser.cc:369] Unable to read element <sdf>
Error:   Could not find the 'robot' element in the xml file
         at line 59 in /tmp/buildd/ros-groovy-urdfdom-0.2.7-0quantal-20130125-0402/urdf_parser/src/model.cpp
Error [parser_urdf.cc:1873] Unable to call parseURDF on robot model
Warning [parser.cc:377] SDF has no <sdf> element in file[urdf file]
Error [parser.cc:291] parse as old urdf model file failed.
Error [Server.cc:243] Unable to read sdf file[/opt/ros/groovy/stacks/hector_gazebo/hector_gazebo_worlds/worlds/rolling_landscape_120m.world]
Msg Waiting for master.Segmentation fault (core dumped)
[gazebo-2] process has died [pid 20380, exit code 139, cmd /opt/ros/groovy/stacks/simulator_gazebo/gazebo/scripts/gazebo /opt/ros/groovy/stacks/hector_gazebo/hector_gazebo_worlds/worlds/rolling_landscape_120m.world __name:=gazebo __log:=/home/jacob/.ros/log/67ea6088-98a7-11e2-900e-20cf30275ecc/gazebo-2.log].
log file: /home/jacob/.ros/log/67ea6088-98a7-11e2-900e-20cf30275ecc/gazebo-2*.log
loading model xml from ros parameter
[INFO] [WallTime: 1364585557.213144] [0.000000] waiting for service /gazebo/spawn_urdf_model
............

Originally posted by Tweeter on Gazebo Answers with karma: 11 on 2013-03-29
Post score: 1

Original comments
Comment by Ben B on 2013-03-29:
Also worth noting: The instructions for integrating ROS with Gazebo are intimidating and elaborate.  As far as I can tell, there really is no better way to do it.  But if you copy and paste the code from the tutorial you'll get a basic working interface.  From there you can play around and try to change things.

A:

In the meantime we updated the hector_quadrotor and required stacks to use the new SDF 1.3 format needed by Gazebo 1.5 coming with groovy. Just make sure to clone the correct git branch groovy-devel of the repositories hector_quadrotor, hector_gazebo and hector_models. groovy-devel should be the current default branch if you do not specify a branch explicitly.
Unfortunately the ROS wiki does not display the name of the branch for each stack and distro automatically in the stack header as reported here. As the SDF format parsers of the fuerte and groovy versions of Gazebo are not compatible to each other, it is necessary to provide different branches of the stacks for different distros.

Originally posted by Johannes Meyer with karma: 196 on 2013-06-07
This answer was ACCEPTED on the original site
Post score: 1

