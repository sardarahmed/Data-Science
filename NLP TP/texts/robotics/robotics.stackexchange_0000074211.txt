Q:

Repair ROS indigo installation on Ubuntu 14.04 by copying files from another PC?

I once installed ROS following this website. However I messed up the installation, deleted /opt/ros but now I cannot reinstall ROS. We have another computer here with the same Ubuntu 14.04. Is it possible that I just copy the ROS installation from that computer?
Which are the folder I would have to copy?
I copied /opt/ros but it's still complaining about
Traceback (most recent call last):  
File "/opt/ros/indigo/bin/roscore", line 36, in <module>
    from rosmaster.master_api import NUM_WORKERS ImportError: No module
named rosmaster.master_api

Does someone have experience with that?
When I just type sudo apt-get install ros-indigo-desktop-full I get:
sudo apt-get install ros-indigo-desktop-full [sudo]
Reading package lists...
Done Building dependency tree
Reading state information... Done
Some packages could not be installed. This may mean that you have requested an impossible situation or if you are
using the unstable distribution that some required packages have not yet been created or been moved out of Incoming. The following information may help to resolve the situation:

The following packages have unmet dependencies:
 ros-indigo-desktop-full : Depends: ros-indigo-desktop but it is not going to be installed
                           Depends: ros-indigo-perception but it is not going to be installed
                           Depends: ros-indigo-simulators but it is not going to be installed
                           E: Unable to correct problems, you have held broken packages.

dpkg-l ros-indigo-* gives:

$ dpkg -l ros-indigo-*
Desired=Unknown/Install/Remove/Purge/Hold  |
Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required  (Status,Err: uppercase=bad)
||/ Name  Version        Architecture   Description
+++-===================-==============-==============-============================================ un
ros-indigo-catkin                 (no description available) rc  ros-indigo-octomap
1.6.9-0trusty- amd64          The OctoMap library implements a 3D  occupanc rc  ros-indigo-orocos-k
1.3.0-0trusty- amd64          This package contains a recent version of  th rc  ros-indigo-stage
4.1.1-8trusty- amd64          Mobile robot simulator http://rtv.github.com

Originally posted by mcRos on ROS Answers with karma: 1 on 2016-05-31
Post score: 0

Original comments
Comment by gvdhoorn on 2016-05-31:
It would probably be better to actually reinstall things. Can you tell us a bit more about why you "cannot reinstall ROS"? What errors do you get, what have you tried?
Comment by mcRos on 2016-06-01:
I updated my question with the error message I'm getting

A:

You should be able to query dpkg for the list of installed ROS packages with dpkg -l ros-indigo-*
Further, you should be able to filter that to just the installed package names with:
dpkg -l ros-indigo-* | grep '^ii' | awk '{ print $2;}'

You can then reinstall those packages with apt-get install --reinstall:
dpkg -l ros-indigo-* | grep '^ii' | awk '{ print $2;}' | sudo xargs apt-get install --reinstall

Originally posted by ahendrix with karma: 47576 on 2016-05-31
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by mcRos on 2016-06-01:
I'm quite afraid of following your proposal. I have a quite sensitve system with Nvidia drivers and Cuda installed. I already crashed my system several times and it often starts with some linux command that says "apt-get install anyPckgCalledRos". Mostly graphics related libs are killers, eg libmesa
Comment by mcRos on 2016-06-01:
By the way: I added the output of dpkg-l ros-indigo-*  to my question above
Comment by ahendrix on 2016-06-01:
It looks like there is a lot more wrong with your system then just having /opt/ros deleted, and from the output of dpkg it looks like something you did uninstalled the apt packages for ROS.
Comment by ahendrix on 2016-06-01:
The second command I listed ( dpkg -l ros-indigo-* | grep '^ii' | awk '{ print $2;}' ) will print the list of packages that apt thinks are still installed.

