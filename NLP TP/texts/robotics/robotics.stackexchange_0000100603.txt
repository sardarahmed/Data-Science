Q:

[Autoware.Auto] AVP demo not working, behaviour planner fails due to: Trying to change gear

I'm trying to run the AVP demo as it's explained in the interactions. I'm using latest version of autoware.auto from master branch. When I want to give a goal position, the vehicle won't start and  it reports:

[lane_planner_node_exe-15] [INFO]
[1637334041.685169634]
[planning.lane_planner_node]: received
new goal
[lane_planner_node_exe-15] [INFO]
[1637334041.736600642]
[planning.lane_planner_node]: Start
planning
[lane_planner_node_exe-15] [INFO]
[1637334041.737841918]
[planning.lane_planner_node]: Finished
planning
[lane_planner_node_exe-15] [INFO]
[1637334041.738032562]
[planning.lane_planner_node]: Sent
planned trajectory  with 100 points
[behavior_planner_node_exe-18] [INFO]
[1637334041.738091547]
[planning.behavior_planner_node]:
Received trajectory from planner
[behavior_planner_node_exe-18] [INFO]
[1637334044.778485012]
[planning.behavior_planner_node]:
Trying to change gear
[behavior_planner_node_exe-18] [INFO]
[1637334047.811807860]
[planning.behavior_planner_node]:
Trying to change gear

I was able to successfully run the AVP demo last weeks, my first guess was a recent change could be causing this error. I have also found this issue which made me think maybe this is an old problem. I couldn't figure out a way to fix this, any help would be appreciated.

Originally posted by hakan on ROS Answers with karma: 15 on 2021-11-19
Post score: 1

A:

Hello, we've realized this problem too,
I've tested and this previous commit works well: https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/commit/c3cd8c79283813e31ef5e27a9ca946fbbf30bfa2
Could you test with that commit too?

Originally posted by xmfcx with karma: 96 on 2021-11-22
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by xmfcx on 2021-11-22:
Also it is being investigated at the following issue: https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1407
Comment by hakan on 2021-11-22:
Hi there, thanks for your answer! I just tried that commit, but I'm still experiencing the problem.
Comment by xmfcx on 2021-11-24:
Weird, it worked for the specified commit on my machine. Anyway, with https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/-/issues/1407 is closed, it should work on the current master now. Don't forget to remove contents of the src/external folder  and perform vcs import < autoware.auto.foxy.repos and remove build and install folders before building.
Comment by hakan on 2021-11-25:
I guess it didn't work because I was using the pre-installed Autoware.Auto and sourcing from opt/AutowareAuto/setup.bash, it worked after building. Thanks!
Comment by xmfcx on 2021-11-25:
@hakan could you please mark the answer as correct if it solved your question? Thanks!

