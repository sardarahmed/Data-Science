Q:

How do I know when rosbag finished? (by code - without looking at the terminal)

Hello,
I'm writing a node to convert from a rosbag to a .mat file using matlab's api for this. I am subscribing to the topics contained in the rosbag and via a callback function I can read the respective topic only when there is new data. The issue might be that I need to know when the rosbag ended so I can close the .mat file. Is there any way to know when the rosbag finished? I was not able to find any topic for example that might tell me the status of the rosbag.
Thanks for the help.

Originally posted by Ariel on ROS Answers with karma: 65 on 2016-04-27
Post score: 0

A:

I'd say it is easier to use the rosbag API for the conversion instead of playing a rosbag, subcribing to the topic and writing it to a .mat file...
This would acutally solve your question because you are reading the rosbag directly and don't have to start it on the command line.
There is also a cookbook with several examploes.

Originally posted by mgruhler with karma: 12390 on 2016-04-27
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Ariel on 2016-04-27:
That's exactly what I needed. Thanks a lot for the answer.
Comment by Martin GÃ¼nther on 2016-04-27:
@Ariel, please accept the answer instead of closing the question. Thanks!
Comment by Ariel on 2016-04-27:
Now its done
Comment by Ariel on 2016-04-27:
One more thing....the cookbok shows how I can access data from that topic. For example, I have this: nav_msgs::Odometry::ConstPtr odometry = m.instantiate<nav_msgs::Odometry>(); and I can access odometry->pose.pose.position.x. Continued...
Comment by Ariel on 2016-04-27:
How can I push_back the entire topic to an How can I push_back the entire topic to std::vector<nav_msgs::Odometry> ? I could populate nav_msgs::Odometry odometryTmp with the each value from the topic and the push_back(odometryTmp), but looks kind of ugly. Is there a better way?

