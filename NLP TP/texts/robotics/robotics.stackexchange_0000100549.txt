Q:

Defining message types directly in Python

I'm writing a Python script to synthesize a rosbag from data files generated outside of ROS.
It would be easiest to be able to define the ROS message types within my Python code, rather than have to write standalone .msg definition files and re-generate them over and over again as I iterate on the script.
What would this entail? I'm fine with importing from genmsg or genpy.

Originally posted by rgov on ROS Answers with karma: 130 on 2021-11-14
Post score: 1

A:

from genpy.dynamic import generate_dynamic
msgs = generate_dynamic('pkg/Msg', 'string data\n')

Here msgs is a dictionary whose keys are message type names and values are classes that can be used for serialization.
It is possible to pass secondary definitions for dependencies of pkg/Msg at the same time. They need to be delimited by a line of 80 = characters, then a line that is written MSG: pkg/Dep, then the fields.

Originally posted by rgov with karma: 130 on 2021-11-14
This answer was ACCEPTED on the original site
Post score: 1

