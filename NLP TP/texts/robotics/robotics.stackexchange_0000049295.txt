Q:

How to get at the rgb values within a pcl::PointXYZRGB cloud

Hello all,
I am trying write a simple code to segment a red coloured tile on a desk, in rviz I can visualize the point cloud seen by the kinect and I have observed that it's rgb colour ranges from ~2.1810^-38 to ~2.2410^-38. I want to filter this out and find it's position.
So I have a loop on the coloured_cloud to fill the coloured_tile if it finds any points with this specific colour. With my desk rgb value at ~1.8*10^-38, an if-statement should segment the specific colour out and put it into coloured_tile.
double maxVal_RT = pow(2.18,-38.0);
double minVal_RT = pow(2.24,-38.0);

for (size_t l = 0; l < coloured_cloud->points.size(); l++) 
            {   
            if(coloured_cloud->points[l].rgb > minVal_RT && coloured_cloud->points[l].rgb < maxVal_RT)
                    coloured_tile->points.push_back(coloured_cloud->points[l]); 
            }

But this doesn't work and when I use ROS_INFO to see what these values it has for minVal_RT and maxVal_RT it says 0.00000 and coloured_cloud->points[l].rgb prints out nans.
It appears that maybe these values are too small to work with the way I am, is there another way to accomplish this? I just want to simply segment out this point cloud of a known, and static, colour.
Kind Regards,
Martin

Originally posted by MartinW on ROS Answers with karma: 464 on 2013-03-12
Post score: 2

A:

Which version of the PCL are you using? if i remember it correctly, for PCL >= 1.4, you can directly access the point's r,g,b value by
pcl::PointXYZRGB point;
point.r = red;
point.g = green;
point.b = blue;

where red, green and blue are all uchar ranging from 0 to 255.

Originally posted by yangyangcv with karma: 741 on 2013-03-13
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by MartinW on 2013-03-14:
I'm running 1.7, but when I use rviz's 'select' to look at points in my region of interest it gives me their .rgb values, is there a way to get them to display the r g b values separately?  (I'm referring to the value in the bottom right corner of this image: http://i.imgur.com/zHklFOB.png)
Comment by yangyangcv on 2013-03-14:
sorry, i don't know how to show that in rviz
Comment by MartinW on 2013-03-15:
It's ok, I went ahead and just used the .r,.g.,b. values like you suggested. And I believe all you need to do is click the 'Select' tab in the top-left corner of rviz and select a point cloud to bring up that information, in case you wanted to see how the .rgb or xyz values! Thanks again yangyangcv

