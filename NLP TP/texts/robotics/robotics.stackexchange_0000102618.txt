Q:

Point With Covariance

I have a sensor that measures a 3D translation between two frames, and it has some measurement uncertainty. I'd like to represent this with a ROS message, which I expected to exist in the form of PointWithCovarianceStamped.
Its minimal effort to define such a custom message myself. I could also use PoseWithCovarianceStamped, however my sensor doesn't provide any orientation data.
I'm asking whether the smart people who use ROS have an existing standard approach for handling this that I'm not aware of. Having a point measurement with uncertainty and without orientation data seems like a common enough situation that it would be in the standard set of ROS packages.

Originally posted by somebody un on ROS Answers with karma: 5 on 2022-10-25
Post score: 0

Original comments
Comment by gvdhoorn on 2022-10-26:\

I'm asking whether the smart people who use ROS have an existing standard approach for handling this that I'm not aware of.

probably not your intention, but "the smart people who use ROS" almost reads like it has a sarcastic tone to it.
Comment by somebody un on 2022-10-26:
Correct, not my intention. I'm asking because as I learn ROS, I very frequently encounter a builtin solution to a problem I thought I had to solve myself (example: the abundance of features in launch files & node lifecycles)
Comment by somebody un on 2022-10-26:
Its impressive and I want to become aware of as many of these features & best practices as I can :)

A:

You would use PoseWithCovarianceStamped.
This is a similar discussion as with Point2D (which doesn't exist) vs Pose2D (which is depecated) vs Pose.
You could choose to either leave the orientation 0, or set a standard "up" quaternion (or "down") or whatever makes sense in your case. Just make sure to make it a valid quaternion (so don't leave w==0).

Originally posted by gvdhoorn with karma: 86574 on 2022-10-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by somebody un on 2022-10-26:
In this case, I don't like the idea that the PoseWithCovarianceStamped then carries a mathematically valid quaternion message that could be interpreted as being a true sensor reading.
Should one use a sentinel value in the covariance matrix to indicate the data is meaningless, the way the Imu message does?
Something like setting the covariance matrix to:
[
1e-6    0.0,    0.0,    0.0,    0.0,    0.0,

0.0,    1e-6,   0.0,    0.0,    0.0,    0.0,    

0.0,    0.0,    1e-6,   0.0,    0.0,    0.0,    

o.0,    0.0,    0.0,    -1.0,   0.0,    0.0,    

0.0,    0.0,    0.0,    0.0,    0.0,    0.0,    

0.0,    0.0,    0.0,    0.0,    0.0,    0.0,   

]
Comment by Mike Scheutzow on 2022-10-26:
There is already a convention to set the first element of covariance to -1 if covariance is unknown. However, in general this does NOT get interpreted as orientation itself being "unknown". As @gvdhoorn suggests, just set the orientation to identity if you don't need that field today.

