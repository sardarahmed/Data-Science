Q:

Mavros publishes messages as bursts

Hi,
I have a pixhawk connected to an onboard computer over serial port (baud rate 57600). I get /mavros/local_position/odom at ~8 Hz. However, when I plot timestamps of the messages, I get a graph like this : 
What I can see from here is that the odom messages come as bursts.
I'm looking for :

What causes this?
How can I get a smoother odom output?
What additional information would be needed to isolate the problem?

Thank you!

Originally posted by janindu on ROS Answers with karma: 849 on 2017-02-23
Post score: 0

Original comments
Comment by gvdhoorn on 2017-02-24:
I have no experience whatsoever with mavros, but you could see whether is uses a buffer of some kind somewhere. Perhaps also check whether it's using TCP (instead of UDP) and Nagle is not turned off.

A:

This is a bandwith issue. I had set stream rate to 30 Hz all messages. When I changed it to stream only position data, I got a smoother curve.
rosservice call /mavros/set_stream_rate 6 30 0

Originally posted by janindu with karma: 849 on 2017-02-24
This answer was ACCEPTED on the original site
Post score: 0

