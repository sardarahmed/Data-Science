Q:

SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools

I am trying to create a package called helloworld that print out a message
cd ~/ro2_ws/src
ros2 pkg create --build-type ament_python helloworld

Inside helloworld/helloworld/nodefile.py
def main():
    print('Hello world')

Inside helloworld/setup.py
from setuptools import setup
package_name = 'helloworld'

setup(
    name=package_name,
    version='0.0.0',
    packages=[package_name],
    data_files=[
        ('share/ament_index/resource_index/packages',
                ['resource/' + package_name]),
        ('share/' + package_name, ['package.xml']),
    ],
    install_requires=['setuptools'],
    zip_safe=True,
    maintainer='TODO',
    maintainer_email='TODO',
    description='TODO: Package description',
    license='TODO: License declaration',
    tests_require=['pytest'],
    entry_points={
        'console_scripts': [
            'nodefile = helloworld.nodefile:main'
        ],
    },
)

I try to compile it
colcon build --packages-select helloworld

I get
--- stderr: helloworld                   
/usr/lib/python3.10/site-packages/setuptools/command/install.py:34: SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and pip and other standards-based tools.
  warnings.warn(
---
Finished <<< helloworld [0.76s]

Summary: 1 package finished [0.93s]
  1 package had stderr output: helloworld

So what is going on

Originally posted by Hairy ass on ROS Answers with karma: 101 on 2022-02-19
Post score: 10

A:

Solved it.
Problem is because of a package utilized by ros2 python packages -> setuptools
Solution

python version 3.8
setup tools version 58.2.0 ( last version to work with ros2 python packages without any warnings)

1 - find out your setup tools version

In terminal start python

if it is above 58.2.0 then down grade it

pip install setuptools==58.2.0
( all above versions do not work )

now colcon build it .
2 - Make sure you have underscores in setup.cfg file and not the '-' .

Originally posted by noshluk2 with karma: 306 on 2022-05-04
This answer was ACCEPTED on the original site
Post score: 27

Original comments
Comment by andrestoga on 2023-01-02:
Can I do the same if I'm using ROS2 Humble which uses Python 3.10.6? I just need to downgrade the setuptools version to 58.2.0?
Comment by ma ar on 2023-01-29:
Setuptools version 58.2.0 is the last version that works with ROS 2 python packages without any warnings because it is the last version that supports the old installation method, "python setup.py install." This method has been deprecated and replaced by newer, standards-based tools, such as pip and ament.
Comment by Markus Bader on 2023-02-16:
It worked for me on Ubuntu 22.04 with ROS2 Humble.
Comment by Zac Zhuo Zhang on 2023-05-09:
thanks for the solutions
Comment by Mehdi_gh on 2023-05-10:
I downgraded setuptools to 58.2.0 but I still get the same error when I run colcon build
What do I need to do to fix it?
Comment by noshluk2 on 2023-05-10:
Show the error @mehdi
Comment by Nils Heidemann on 2023-05-30:
Worked for me on Ubuntu 22.04 with ROS2 Humble and Python Version 3.10.6
Just downgrade the setuptools.

