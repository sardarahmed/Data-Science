Q:

mavros global_position topic not publishing

Hi,
I am having problem getting the message published in global_position.
I am using Ubuntu 14.04 Ros Indigo and recently just updated the firmware. I use a pixhawk and 3DR Iris in Hexacopter .
The code I type is
roslaunch mavros px4.launch '

The code displayed is
NODES
/
mavros (mavros/mavros_node)
auto-starting new master
process[master]: started with pid [3595]
ROS_MASTER_URI=http://localhost:11311
setting /run_id to ed737cc2-9f24-11e5-83d8-605718672f0f
process[rosout-1]: started with pid [3608]
started core service [/rosout]
process[mavros-2]: started with pid [3626]
[1449741666.104377421]: FCU URL: /dev/ttyUSB0:57600
[1449741666.104555512]: serial0: device: /dev/ttyUSB0 @ 57600 bps
[1449741666.105267158]: GCS bridge disabled
[1449741666.154539806]: Plugin 3dr_radio loaded and initialized
[1449741666.157176084]: Plugin actuator_control loaded and initialized
[1449741666.217227733]: Plugin cam_imu_sync loaded and initialized
[1449741666.222946947]: Plugin command loaded and initialized
[1449741666.222998441]: Plugin distance_sensor blacklisted
[1449741666.231158700]: Plugin ftp loaded and initialized
[1449741666.239332817]: Plugin global_position loaded and initialized
[1449741666.239387002]: Plugin image_pub blacklisted
[1449741666.247220114]: Plugin imu_pub loaded and initialized
[1449741666.252494646]: Plugin local_position loaded and initialized
[1449741666.253141818]: Plugin manual_control loaded and initialized
[1449741666.257820893]: Plugin mocap_pose_estimate loaded and initialized
[1449741666.260583402]: Plugin param loaded and initialized
[1449741666.265841892]: Plugin px4flow loaded and initialized
[1449741666.269734947]: Plugin rc_io loaded and initialized
[1449741666.269771846]: Plugin safety_area blacklisted
[1449741666.273443314]: Plugin setpoint_accel loaded and initialized
[1449741666.287483356]: Plugin setpoint_attitude loaded and initialized
[1449741666.294109082]: Plugin setpoint_position loaded and initialized
[1449741666.296996159]: Plugin setpoint_velocity loaded and initialized
[1449741666.303087932]: Plugin sys_status loaded and initialized
[1449741666.306440053]: Plugin sys_time loaded and initialized
[1449741666.308519130]: Plugin vfr_hud loaded and initialized
[1449741666.308563956]: Plugin vibration blacklisted
[1449741666.316395234]: Plugin vision_pose_estimate loaded and initialized
[1449741666.319969704]: Plugin vision_speed_estimate loaded and initialized
[1449741666.324673530]: Plugin waypoint loaded and initialized
[1449741666.324723511]: Autostarting mavlink via USB on PX4
[1449741666.324750426]: Built-in SIMD instructions: SSE, SSE2
[1449741666.324762062]: Built-in MAVLink dialect: ardupilotmega
[1449741666.324772216]: MAVROS started. MY ID [1, 240], TARGET ID [1, 1]
[1449741666.351006806]: IMU: High resolution IMU detected!
[ WARN] [1449741666.639253535]: GP: No GPS fix
[1449741666.856344156]: CON: Got HEARTBEAT, connected.
[ WARN] [1449741666.884248232]: TM: Clock skew detected (-1449739987.504302740 s). Hard syncing clocks.
[1449741667.079375489]: IMU: High resolution IMU detected!
[ WARN] [1449741668.860667646]: VER: broadcast request timeout, retries left 4
[ WARN] [1449741669.860660935]: VER: broadcast request timeout, retries left 3
[ WARN] [1449741670.858431782]: VER: unicast request timeout, retries left 2
[1449741671.533192816]: VER: 1.1: Capabilities 0x00000000000004eb
[1449741671.533260446]: VER: 1.1: Flight software:     00000000 (424f4a9066e2b15b)
[1449741671.533303952]: VER: 1.1: Middleware software: 00000000 (424f4a9066e2b15b)
[1449741671.533338025]: VER: 1.1: OS software:         00000000 (0000000000000000)
[1449741671.533371047]: VER: 1.1: Board hardware:      00000000
[1449741671.533403720]: VER: 1.1: VID/PID: 26ac:0011
[1449741671.533436068]: VER: 1.1: UID: 3432470a38383538
[ WARN] [1449741676.886523092]: TM: Clock skew detected (-0.026125061 s). Hard syncing clocks.
[1449741682.105836631]: WP: mission received
[1449741682.647143358]: FCU: WPM: mission is empty
[ERROR] [1449741682.797194698]: FCU: REJ. WP CMD: partner id mismatch
[ WARN] [1449741686.925906789]: TM: Clock skew detected (0.121658476 s). Hard syncing clocks.

After that I type in
rostopic list
The info displayed are
/diagnostics
/mavlink/from
/mavlink/to
/mavros/actuator_control
/mavros/battery
/mavros/cam_imu_sync/cam_imu_stamp
/mavros/global_position/compass_hdg
/mavros/global_position/global
/mavros/global_position/local
/mavros/global_position/raw/fix
/mavros/global_position/raw/gps_vel
/mavros/global_position/rel_alt
/mavros/imu/atm_pressure
/mavros/imu/data
/mavros/imu/data_raw
/mavros/imu/mag
/mavros/imu/temperature
/mavros/local_position/local
/mavros/manual_control/control
/mavros/mission/waypoints
/mavros/mocap/pose
/mavros/px4flow/ground_distance
/mavros/px4flow/raw/optical_flow_rad
/mavros/px4flow/temperature
/mavros/radio_status
/mavros/rc/in
/mavros/rc/out
/mavros/rc/override
/mavros/setpoint_accel/accel
/mavros/setpoint_attitude/att_throttle
/mavros/setpoint_attitude/attitude
/mavros/setpoint_attitude/cmd_vel
/mavros/setpoint_position/local
/mavros/setpoint_velocity/cmd_vel
/mavros/state
/mavros/time_reference
/mavros/vfr_hud
/mavros/vision_pose/pose
/mavros/vision_speed/speed_vector
/mavros/wind_estimation
/rosout
/rosout_agg
/tf
/tf_static

But when I type in
rostopic echo /mavros/global_position/local
there is nothing displaying out same go to other topic in global_position except for  global_position/raw/fix and global_position/raw/gps_vel
which the code is shown below

header:
seq: 594
stamp:
secs: 1449742645
nsecs: 599718628
frame_id: fcu
status:
status: -1
service: 1
latitude: 0.0
longitude: 0.0
altitude: -17.0
position_covariance: [-1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
position_covariance_type: 0

May I know why is there still missing messages publishing in global_position where the  Plugin global_position loaded and initialized has been successful?

Originally posted by newtoros on ROS Answers with karma: 3 on 2015-12-10
Post score: 0

A:

You do not have GPS Fix.
Tip: see diagnostics first before asking questions!

Originally posted by vooon with karma: 404 on 2015-12-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by newtoros on 2015-12-28:
Even with GPS fix, I am only able to get message published to global_position/raw/gps_vel and global_position/raw/fix but other global_position topics  such as global_position/compass_hdg,global_position/rel_alt,global_position/global and global_position/local have no messages published out.
Comment by newtoros on 2015-12-28:
The following is the roslaunch full output
http://pastebin.com/yqRBepPk
Comment by vooon on 2015-12-28:\

Pixhawk USB only for ground maintenance and tests. Read about SYS_COMPANION parameter and TELEM2.
Anyway problem on FCU side. Check streams configuration (extras.txt & rc)
FCU: WPM is usual on PX4 with empty mission list.
rostopic echo -n1 /diagnostics

Comment by newtoros on 2016-01-05:
Sorry you are right, I need to have a GPS fix in order to get all messages published out in global message but the weird thing is through direct usb connection with the use of (roslaunch mavros px4.launch) I cannot get all the messages published in global_position even with GPS fix.
Comment by newtoros on 2016-01-05:
But through indirect connection with the use of 3DR antenna(roslaunch mavros px4.launch fcu_url:='/dev/ttyUSB0:57600'), I am able to get all the messages published in global_position, thanks a lot.
Comment by soloros on 2017-02-16:
@newtoros I have been working with the 3dr solo as well and I have the same problem. When connected directly with a usb, some of the data is not published. Can you give some more detail on how you did it through the "indirect connection with 3dr antenna"? Thanks!

