Q:

Recieve last Message on topic after subscription

Hey guys,
i am developing a Plugin for rviz, and I want to have the last message that was sent on a topic when i subscribe to this topic.
The idea is, that I am in rosbag replay and i want to evaluate the values of my sensors when the replay is stopped.
The way to achieve this is - in my eyes - to request the last message that has been sent on the topic.
Is there any way to do that?
BTW, i am using c++
Happy Coding,
Johannes

Originally posted by JW on ROS Answers with karma: 11 on 2014-09-26
Post score: 1

A:

Receive all messages and take last message based on sequence number or timestamp from message header.

Originally posted by bvbdort with karma: 3034 on 2014-09-26
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by JW on 2014-09-26:
I have around 50 Topics, all of them are activly sent - so this will not work.
So ROS does not have a standard way to do this?
Comment by bvbdort on 2014-09-26:
you can use timestamp. but still can you write more on what exactly you are trying to do
Comment by JW on 2014-09-26:
I start a replay with Rosbag (~50 recorded Topics), I start rviz, I recognize an error so i stop rosbag, then I want to evaluate the Data in rviz - without unpausing rosbag!
Comment by tfoote on 2014-09-26:
Have you tried running rviz from the beginning? All the data should be there when you pause playback.
Comment by JW on 2014-09-26:
then the question is: How can i access this data?
Comment by tfoote on 2014-09-26:
What do you mean, all the data should be buffered and displayed in rviz already. Use the standard plugins to view the data. When time pauses, due to the bag stopping playback it will all be right there.
Comment by JW on 2014-09-27:
I cannot use the standard plugins for all of my data, so i have written my own. And when I subscribe to a topic, then I want to have the last message on any topic - topics that i was not subscribed to, when this message came.
Comment by bvbdort on 2014-09-27:
you can try http://wiki.ros.org/rosbag/Code%20API to access data in rosbag
Comment by JW on 2014-09-27:
so the short answer to my problem is: ROS/rviz does not Cache Messages in Topics, so if i did not recieve a message in the first place, I will never recieve it?
Comment by tfoote on 2014-09-29:
Yes, the plugins do their own communications.

