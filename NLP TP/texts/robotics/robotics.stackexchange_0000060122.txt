Q:

Can ROS be installed on controller of RJ3?

Our robot is FANUC LR mate 200i, the controller is RJ3.  I want to know if the ROS is applicable in this controller.
Thank you.

Edit: details from comments:
Controller: R-J3
System version: V5.2043 (V5.20-3)

Originally posted by shanekop on ROS Answers with karma: 1 on 2014-06-16
Post score: 0

Original comments
Comment by gvdhoorn on 2014-06-17:
Also: which 200i specifically? The fanuc_experimental package has support pkgs for the 200iC (base and /5H) and 200iD (base only).

A:

As per the fanuc_driver wiki page, the current version of the driver has only been tested on R-30iA and R-30iB controllers. Whether the driver works will depend on the version of the Karel runtime that you have on your controller. It would be nice if you could tell us:

which specific R-J3 controller you have: R-J3, R-J3iB/C
the version of Karel
whether you have the User Socket Messaging (R648) option installed

Edit: based on your updated question, I don't think it is possible to use the ROS-Industrial driver on your controller (edit: with the current system software). After some investigation, V5.20-3 (which corresponds to V5.2043) doesn't seem to have the required networking support in Karel (MSG_CONNECT, MSG_DISCO).
I can see two options:

upgrade the core software to at least V5.30-1: as far as I can tell, that is the first version that has the MSG_CONNECT and MSG_DISCO Karel routines. With some minor other tweaks, all other parts of the driver compile under this version.
rewrite the driver to use the serial ports present on the controller: the R-J3 should have a number of serial ports which could be uses for this. However, as far as I can tell, they only support up to 9600 baud, which would equate to about 1KB/s.

While the simple_message protocol is not overly verbose, state reporting (joint states, etc) at 40Hz results in about 4KB/s, so using the serial ports would require lowering the update rate significantly. Depending on intended use, sending trajectory messages uses very little bandwidth, and should easily be possible over serial.
The industrial_robot_client nodes would also have to be extended to support serial communication.
All in all, updating the controller would be the best option (least amount of work). Using serial is possible, but would require some serious effort.
Also: even though everything compiles, I cannot guarantee that the driver will work immediately: I have no means to simulate a controller that old, so tests on real hardware would be required.

Originally posted by gvdhoorn with karma: 86574 on 2014-06-17
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by shanekop on 2014-06-17:
The specific controller is just R-J3.  The robot is only FANUC LR mate 200i.  No 200iC and 200iB.
Comment by gvdhoorn on 2014-06-17:
And the version of the system software? Re: lr mate 200i: we currently don't have a support pkg for the 200i, but creating one isn't that difficult. The driver probably needs some porting though.
Comment by shanekop on 2014-06-17:
The base system version is V5.2043.  Yeah, I think there are not available pkgs for our robot.  Is there anything that we can change or install to make our controller work for ROS? What do you mean saying the driver needs some porting?  I'm not quite familiar with robot controller things. Thank you.
Comment by gvdhoorn on 2014-06-18:
'porting' means that it'll have to be adapted to that specific controller. 5.20 is rather old, so I'm not sure the driver will work. Especially the TCP/IP communication might pose a problem, as it's unclear to me whether 5.xx had option R648. Could you contact me off-list please?
Comment by gvdhoorn on 2014-06-19:
@shanekop: if you're still interested in this: I've got a version of the driver which should work on R-J3 running 5.30-1 ('should' as TCP comms don't work on a simulated 5.30 ctrlr), and a support pkg for the LR Mate 200i. You would still have to upgrade your controller though.

