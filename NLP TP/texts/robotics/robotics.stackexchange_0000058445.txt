Q:

Something wrong with TF tutorial

Hi guys, I am learning to use TF on ROS hydro and Ubuntu 12.10, following the tutorial on http://wiki.ros.org/tf/Tutorials/Writing%20a%20tf%20broadcaster%20%28C%2B%2B%29 and http://wiki.ros.org/tf/Tutorials/Writing%20a%20tf%20listener%20%28C%2B%2B%29. It can be compiled well by using catkin_make, but when launch, some errors occur, and the second turtle does not follow the first. I find some solutions on http://answers.ros.org/question/45884/turtle-tf-tutorial-fails-to-work/?answer=47845#post-id-47845. However it is for fuerte, and it says that the tutorial has already been fixed for hydro. Could you please give me some suggestions? Many thanks.
Result of catkin_make
rical@rical-CF-19RHRAX1M:~/tf_ws$ catkin_make
Base path: /home/rical/tf_ws
Source space: /home/rical/tf_ws/src
Build space: /home/rical/tf_ws/build
Devel space: /home/rical/tf_ws/devel
Install space: /home/rical/tf_ws/install
####
#### Running command: "make cmake_check_build_system" in "/home/rical/tf_ws/build"
####
####
#### Running command: "make -j4 -l4" in "/home/rical/tf_ws/build"
####
Scanning dependencies of target turtle_tf_broadcaster
[ 50%] Built target turtle_tf_listener
[100%] Building CXX object learning_tf/CMakeFiles/turtle_tf_broadcaster.dir/src/turtle_tf_broadcaster.cpp.o
Linking CXX executable /home/rical/tf_ws/devel/lib/learning_tf/turtle_tf_broadcaster
[100%] Built target turtle_tf_broadcaster

Result of roslaunch
rical@rical-CF-19RHRAX1M:~/tf_ws$ roslaunch learning_tf start_demo.launch
... logging to /home/rical/.ros/log/6972d1aa-bb3e-11e3-9b8c-58946b7e05e0/roslaunch-rical-CF-19RHRAX1M-3943.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://rical-CF-19RHRAX1M:40439/

SUMMARY
========

PARAMETERS
 * /rosdistro
 * /rosversion
 * /scale_angular
 * /scale_linear

NODES
  /
    listener (learning_tf/turtle_tf_listener)
    sim (turtlesim/turtlesim_node)
    teleop (turtlesim/turtle_teleop_key)
    turtle1_tf_broadcaster (learning_tf/turtle_tf_broadcaster)
    turtle2_tf_broadcaster (learning_tf/turtle_tf_broadcaster)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
process[sim-1]: started with pid [3961]
process[teleop-2]: started with pid [3964]
Reading from keyboard
---------------------------
Use arrow keys to move the turtle.
process[turtle1_tf_broadcaster-3]: started with pid [3991]
process[turtle2_tf_broadcaster-4]: started with pid [4018]
process[listener-5]: started with pid [4029]
[ERROR] [1396537658.018576492]: "turtle2" passed to lookupTransform argument target_frame does not exist. 
[ERROR] [1396537658.118410208]: "turtle2" passed to lookupTransform argument target_frame does not exist. 
[ERROR] [1396537658.218442276]: "turtle2" passed to lookupTransform argument target_frame does not exist. 
[ERROR] [1396537658.318519743]: "turtle2" passed to lookupTransform argument target_frame does not exist. 
[ERROR] [1396537658.418561966]: "turtle2" passed to lookupTransform argument target_frame does not exist.

Originally posted by pinocchio on ROS Answers with karma: 101 on 2014-04-03
Post score: 0

Original comments
Comment by pinocchio on 2014-04-03:
I can control the first turtle with keyboard, but the second one does not follow the first.
Comment by demmeln on 2014-04-03:
What is happening to the second one? Is it not moving at all, or not moving correclty?
Comment by demmeln on 2014-04-03:
Maybe the tutorial is not fixed after all. Please review the suggested solutions in the old question about fuerte that you linked to, and check if they might still apply here.
Comment by pinocchio on 2014-04-03:
Hi, @demmeln, The second turtle just goes straightly from one side of window to the other, and then back. I am afraid the old question is just for fuerte, because I follow its suggestion but nothing changes.
Comment by Jack Fu on 2014-04-16:
Actually, I faced the same problem that the turtle kept going straightly and figured it out just now.
Change "q.setRPY(msg->theta, 0, 0)" to "q.setRPY(0, 0, msg->theta)", and re-catkin_make.
This a little different from Fuerte, which is in the transform.setRotation Function.
Comment by demmeln on 2014-04-17:
Could you please update the tutorial accirdingly?

A:

It has been updated.

Originally posted by PaulBouchier with karma: 300 on 2014-08-13
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Marcel Usai on 2016-01-13:
Still did not work for indigo. anotherTim's fix worked though. (adding waitForTransform; see below)
Comment by trueliar on 2022-06-03:
I am using noetic and still can't get past this error. Can you please tell me if waitForTransform needs to be added for noetic as well? And how exactly do we add it? Thanks!

