Q:

Convience methods to convert rospy.Time to datetime.datetime

I couldn't find any convenience methods to convert rospy.Time to datetime.datetime.  Timezones and other issues make this less trivial than it appears, especially for novice users.
Am I missing something obvious, or is this a textbook case of "nope, not done yet, please submit a patch?"
Thanks!

Originally posted by ivaughn on ROS Answers with karma: 76 on 2018-03-26
Post score: 1

Original comments
Comment by gvdhoorn on 2018-03-27:
I would say this is indeed something that just hasn't been done yet. Shouldn't be too difficult though: rospy.Time is a Unix stamp, so conversions should be against UTC, correct?

A:

datetime.datetime to rospy.Time:
import datetime

import rospy

dt0 = datetime.datetime.strptime('2018-03-26-14:38:02.012345', '%Y-%m-%d-%H:%M:%S.%f').replace(tzinfo=datetime.timezone.utc)

rt0 = rospy.Time.from_sec(dt0.timestamp())

rospy.Time to datetime.datetime and back:
dt1 = datetime.datetime.utcfromtimestamp(rt0.to_sec())

rt1 = rospy.Time.from_sec(dt1.replace(tzinfo=datetime.timezone.utc).timestamp())

Originally posted by rgov with karma: 130 on 2020-11-11
This answer was ACCEPTED on the original site
Post score: 4

