Q:

rospy absolute duration bug

Hello,
I use ROS hydro and I think I found an error in the code of the rospy.Duration class
When I do :

print abs(rospy.Duration.from_sec(0.5))

it prints -500000000 instead of 500000000. That's because the code only takes into account the number of seconds.
cf : https://github.com/ros/genpy/blob/indigo-devel/src/genpy/rostime.py
def __abs__(self):
    """
    Absolute value of this duration
    :returns: positive :class:`Duration`
    """
    if self.secs > 0:
        return self
    return self.__neg__()

It should be :
def __abs__(self):
    """
    Absolute value of this duration
    :returns: positive :class:`Duration`
    """
    if self.secs < 0 or (self.secs == 0 and self.nsecs<0):
        return self.__neg__()
    return self

Originally posted by jbv on ROS Answers with karma: 11 on 2015-06-26
Post score: 0

Original comments
Comment by gvdhoorn on 2015-06-26:
I think you'd better report this to the genpy issue tracker.

A:

OK. I did it here: https://github.com/ros/genpy/issues/35

Originally posted by jbv with karma: 11 on 2015-06-26
This answer was ACCEPTED on the original site
Post score: 1

