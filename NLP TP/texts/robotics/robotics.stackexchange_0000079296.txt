Q:

How to deactivate image_transport plugins?

Hi
I would like to deactivate image_transport plugins from a launch file. My robot has many cameras and I am not using the compressed images. It would save CPU time if I can do that. I would prefer a solution involving a launch file since other members of my team may use those compressed images. If you have no solution with a launch file, I am open to any suggestion.
Thanks in advance
Stanley

Originally posted by Stanley666 on ROS Answers with karma: 11 on 2017-03-02
Post score: 1

Original comments
Comment by lucasw on 2017-03-17:
I'm going to take a look at adding this feature to image_transport.  Though I believe in your case the compression is not actually performed unless there is a subscriber on that topic, so there shouldn't be much cpu load (but it still would be nice to disable undesired plugins).

A:

https://github.com/ros-perception/image_common hydro-devel branch now has
a disabling plugins feature merged in:
rosparam set /camera/image/disable_pub_plugins "['image_transport/compressedDepth', 'image_transport/theora']"
rosrun image_transport_tutorial my_publisher

And also the launch file equivalent:
<node name="my_publisher" pkg="image_transport_tutorial" type="my_publisher" />
<group ns="camera/image" >
  <rosparam param="disable_pub_plugins">
    - 'image_transport/compressedDepth'
    - 'image_transport/theora'
  </rosparam>
</group>

Originally posted by lucasw with karma: 8729 on 2017-03-17
This answer was ACCEPTED on the original site
Post score: 7

Original comments
Comment by bpinaya on 2019-12-04:
Hi there, this might be a silly question, but is this working on ros-kinetic?
Comment by lucasw on 2019-12-04:
I just tested it in kinetic on ubuntu 16.04
and it does work.  Most likely there is a mismatch between your actual image topic and the namespace you are setting disable_pub_plugins in.
Comment by darshb34 on 2020-07-10:
you can also just uninstall the unnecessary image_transport pluggins like:
sudo apt-get remove ros-melodic-theora-image-transport
sudo apt-get remove ros-melodic-compressed-image-transport
sudo apt-get remove ros-melodic-compressed-image-transport

Comment by Petros ADLATUS on 2022-05-18:
@lucasw where i must put the first few lines of your solution, sorry I dont get it. I found only the header files and changed the commits there, but cant find the image_transport.cpp and the publisher.cpp. Would be glad if you can help me with that
Comment by lucasw on 2022-05-19:
You need to set the disable_pub_plugins list parameter in the namespace of your camera, in my example above the namespace is camera/image.  Probably you want to set in your launch file, you shouldn't have to change any header or cpp files.
At some point I'll add a dynamic reconfigure solution so they can be toggled on and off live.
Comment by Petros ADLATUS on 2022-05-20:
thank you for your answer, so i miss probably the namespace just use rosparam. sound good with the option to switch it manually :)

