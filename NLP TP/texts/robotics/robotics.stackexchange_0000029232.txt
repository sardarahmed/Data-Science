Q:

Gazebo-11 ROS2 Galactic: gzserver process has died, exit code -6 after clamp.hpp Assertion !(hi < lo) failed

Issue: At a random time 1-5 minutes into Gazebo execution (of create3_sim),
the gzserver process dies reporting the following:

[gzserver-5] gzserver: /opt/ros/galactic/include/rcppmath/clamp.hpp:41: constexpr const T& rcppmath::clamp(const T&, const T&, const T&) [with T = double]: Assertion `!(hi < lo)' failed.

[ERROR] [gzserver-5]: process has died [pid 4771, exit code -6, cmd 'gzserver -s libgazebo_ros_init.so -s libgazebo_ros_factory.so '].

Typical Invocation:

$ source install/local_setup.bash  or install/setup.bash  
>[also tried with] $ source /usr/share/gazebo/setup.sh
$ ros2 launch irobot_create_gazebo create3.launch.py

Configuration:

Gazebo version 11.8.1
ROS2 Galactic
Ubuntu 20.04.1

Linux c3desktop 5.11.0-38-generic #42~20.04.1-Ubuntu SMP Tue Sep 28 20:41:07 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux

VMware Fusion Player Version 12.1.1

8GB Memory
3 processor cores

macOS v 11.0.1 (Big Sur)
Mac Mini (2018)

3.2 GHz 6-Core Intel Core i7

Ideas to try?
This is the console log (had to name it with .c extension to be allowed to upload it):
C:\fakepath\out.log.c

Originally posted by tovli on Gazebo Answers with karma: 16 on 2021-10-26
Post score: 0

Original comments
Comment by kakcalu13 on 2021-10-28:
I know this answer isn't what you are looking for but check ignition Fortress out on Galactic since Gazebo11 is more for ROS1 (Sure, ros2 is compatible with g11 but it's also approaching to EOL too and very little documentation) Ignition is for ros2.
I even made documentation for ros2 foxy/Citadel (Fortress tested and seems OK, just few more to tweak to make it work)
Let me know if you interested!
Again, sorry if this doesn't answer your post!
Comment by Jose Luis Rivero on 2021-10-28:
The code is stopping in the an assertion of a helper file, we would need a longer backtrace to know where the problems are coming from. @kakcalu13, thanks for recommending Ignition (and even created docs for it!), let me add some details: Gazebo and Ignition-Gazebo are independent projects from ROS, both can work perfectly with ROS1 and ROS2. Gazebo11 EOL is in 2025, still a bit of time to enjoy it. :)
Comment by kakcalu13 on 2021-10-28:
Ah! @jose-luis-rivero, Thank you for add those detail! I will keep them in my mind for future! Glad you clarify with this!
Comment by tovli on 2021-10-28:
@jose-luis-rivero
Thank you for taking me serious with this.  I attached the console log (as out.log.c).
@kakcalu13 I asked the iRobot Create3 team if they were going to support Ignition: "not at this time".  They have developed their "alpha" Create3 simulation in Gazebo and opened it up for folks to start banging on.
Comment by tovli on 2021-10-28:
Adding a link back to a similar, perhaps related post: https://answers.gazebosim.org/question/27491/gazebo-server-dies-randomly/

A:

Interesting, after updating Gazebo to 11.9.0 (and the Create3 sim) I am no longer seeing gzserver crashing.
Discovered a tip:  If Gazebo 'save world as' dialog box does not display,

press cntl-alt(option)-dn_arrow, then cntl-alt(option)-up_arrow
to display the dialog, and to redisplay the dialog after clicking any button/folder or typing chars.

Originally posted by tovli with karma: 16 on 2021-10-30
This answer was ACCEPTED on the original site
Post score: 0

