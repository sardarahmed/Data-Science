Q:

How to solve the error "cannot marshal None unless allow_none is enabled ‚Äù

In my launch file server_gateway.launch, it launch another file whose contents is as follows.
     <launch> 
        <!-- ******************************* Arguments ******************************* --> 
        <arg name="concert_name" default="multinav_concert_scopus"/>
        <arg name="concert_hub_uri" default="http://localhost:6380"/>
        <arg name="gateway_watch_loop_period" default="2"/>
        <arg name="disable_uuids" default="false"/> 
        
        <!-- ********************************* Hub *********************************** --> 
         <include file="$(find rocon_hub)/launch/hub.launch">  
         <arg name="hub_name" value="$(arg concert_name)" />
         <arg name="hub_port" value="6380" />  </include>  
        
        <!-- ******************************* Zeroconf ******************************** -->
        <node ns="zeroconf" pkg="zeroconf_avahi" type="zeroconf" name="zeroconf"/> 
        
        <!-- ******************************** Gateway ******************************** -->  
        <node pkg="rocon_gateway" type="gateway.py" name="gateway">    
          <rosparam command="load" file="$(find rocon_gateway)/param/default.yaml"/>  
          <rosparam command="load" file="$(find rocon_gateway)/param/default_blacklist.yaml"/>   
          <rosparam command="load" file="$(find scopus_gateway)/param/server_advertisements.yaml" />   
          <rosparam command="load" file="$(find scopus_gateway)/param/server_flips.yaml" /> 
          <param name="hub_uri" value="$(arg concert_hub_uri)"/>    
          <param name="name" value="$(arg concert_name)"/>  
          <param name="firewall" value="false"/>
          <param name="watch_loop_period" value="$(arg gateway_watch_loop_period)"/> 
          <param name="hub_whitelist" value=""/>  
          <param name="disable_uuids" value="$(arg disable_uuids)"/>  
        </node> 
</launch> 

But when running roslaunch server_gateway.launch, it comes out error:
load_parameters: unable to set parameters (last param was [/concert/gateway/hub_uri=http://localhost:6380]): cannot marshal None unless allow_none is enabled

Traceback (most recent call last):  File "/opt/ros/hydro/lib/python2.7/dist-packages/roslaunch/__init__.py", line 279, in main    p.start()  

File "/opt/ros/hydro/lib/python2.7/dist-packages/roslaunch/parent.py", line 268, in start    self.runner.launch()

File "/opt/ros/hydro/lib/python2.7/dist-packages/roslaunch/launch.py", line 644, in launch    self._setup()  

File "/opt/ros/hydro/lib/python2.7/dist-packages/roslaunch/launch.py", line 631, in _setup    self._load_parameters() 

File "/opt/ros/hydro/lib/python2.7/dist-packages/roslaunch/launch.py", line 328, in _load_parameters    r  = param_server_multi() 

File "/usr/lib/python2.7/xmlrpclib.py", line 997, in __call__    return MultiCallIterator(self.__server.system.multicall(marshalled_list))  

File "/usr/lib/python2.7/xmlrpclib.py", line 1224, in __call__    return self.__send(self.__name, args)  

File "/usr/lib/python2.7/xmlrpclib.py", line 1572, in __request    allow_none=self.__allow_none)  

File "/usr/lib/python2.7/xmlrpclib.py", line 1085, in dumps    data = m.dumps(params)  

File "/usr/lib/python2.7/xmlrpclib.py", line 632, in dumps    dump(v, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump    f(self, value, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 714, in dump_array    dump(v, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump    f(self, value, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 735, in dump_struct    dump(v, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump    f(self, value, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 714, in dump_array    dump(v, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump    f(self, value, write)  

File "/usr/lib/python2.7/xmlrpclib.py", line 658, in dump_nil    raise TypeError, "cannot marshal None unless 
allow_none is enabled"TypeError: cannot marshal None unless allow_none is enabled 

Does anyone give me some advices, thank you!

Originally posted by scopus on ROS Answers with karma: 279 on 2014-05-16
Post score: 4

A:

In general, this occurs because you tried to set a parameter to None, which isn't allowed.
In your particular case, It looks like you're trying to set the hub_whitelist parameter to an empty string, which is probably getting transformed into a None somewhere in roslaunch.
In general, you should be able to troubleshoot this by commenting out lines in your launch file until you find the one that is causing the error.

Originally posted by ahendrix with karma: 47576 on 2014-05-16
This answer was ACCEPTED on the original site
Post score: 6

Original comments
Comment by scopus on 2014-05-18:
Thank you very much! This problem has been solved by your advice

