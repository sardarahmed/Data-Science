Q:

No disparity image with rotating detergent

Hi,
I am following the ChoosingGoodStereoParameters tutorial and receiving some errors.
At the end, all three image viewers (left, right, disparity) have blank images. How do I get the bag file to play correctly and which commands should I use to get the viewers to work properly?
Using the tutorial, the steps I did after downloading the rotating_detergent.bag file were:
rosbag reindex rotating_detergent.bag
rosbag info rotating_detergent.bag

The output of 'rosbag info' looked the same as that shown in the tutorial.
Next, I did
ROS_NAMESPACE=narrow_stereo_textured rosrun stereo_image_proc stereo_image_proc
rosrun dynamic_reconfigure reconfigure_gui

and the parameters were identical. After that I did
rosrun image_view stereo_view stereo:=narrow_stereo_textured image:=image_rect
rosbag play rotating_detergent.bag -r 0.1

and the three image viewers open with blank images. In the terminal where 'rosbag play' is running there are several error messages with contents
[ERROR] [1305607385.588706440]: Client [/narrow_stereo_textured/stereo_image_proc] wants topic /narrow_stereo_textured/left/camera_info to have datatype/md5sum [sensor_msgs/CameraInfo/c9a58c1b0b154e0e6da7578cb991d214], but our version has [sensor_msgs/CameraInfo/1b5cf7f984c229b6141ceb3a955aa18f]. Dropping connection.
[ERROR] [1305607385.589029589]: Client [/narrow_stereo_textured/stereo_image_proc] wants topic /narrow_stereo_textured/right/camera_info to have datatype/md5sum [sensor_msgs/CameraInfo/c9a58c1b0b154e0e6da7578cb991d214], but our version has [sensor_msgs/CameraInfo"/1b5cf7f984c229b6141ceb3a955aa18f]. Dropping connection.

Can anyone else run that tutorial and see images displayed correctly? Any hints on why this might not work or how to fix the checksums?
Thanks,
Maxi

Originally posted by mw on ROS Answers with karma: 41 on 2011-05-16
Post score: 4

A:

This implies that the executable that produced the message and the executable that consumed the message were compiled with different versions of ROS (or different versions of the CameraInfo message at least)
In this case the executable that stuffed the images into the bag file was probably compile with cturtle and you are probably using the diamondback version of the image viewer.
The bag file will probably have to be recreated for the newer versions of ROS.
Edit: As tfoote pointed out, you can migrate old bag files using migration scripts shown here: http://www.ros.org/wiki/rosbag/migration
Are you in fact running diamondback btw?

Originally posted by Asomerville with karma: 2743 on 2011-05-18
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by tfoote on 2011-05-18:
If it was generated by an older version of ROS you will need to run rosbag migration scripts http://www.ros.org/wiki/rosbag/migration
Comment by Asomerville on 2011-05-18:
Reindex would not be expected to change the nature of the stored message data. The original data was likely produced by a cturtle executable.
Comment by Thomas D on 2011-05-18:
I am familiar with the original question to some extent. The system is Ubuntu 10.10, running ROS Diamondback, installed with apt ros-diamondback-desktop-full except camera_drivers which was installed from source. The command 'rosbag reindex rotating_detergent.bag' was run. Any luck running it?

