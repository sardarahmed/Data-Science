Q:

How could I use "ROS" commands in a bash file?

Hey ! First, i'm sorry for my english , i don't use translator and i'm not really good at.
Let me explain my problem :
I want to use "PuTTY" via Windows' terminal (to connect to linux) with the arguments "-m" and a file .txt
This file will be read by PuTTY and execute line by line the commands.
But there's a problem , every linux' commands works, but "catkin_make" or "rosrun" it wrote :
bash: line 2: catkin_make: command not found
per exemple
However , i can use it manually via PuTTY
How can I use ROS commands in a bash file ?
Thanks.

Originally posted by Fjara on ROS Answers with karma: 3 on 2018-05-23
Post score: 0

A:

This is an environment setup issue (ie: the environment is not correctly setup). Passing absolute paths to commands will work around some problems, but not all (ie: rospkg not being able to find ROS packages and others).

Originally posted by gvdhoorn with karma: 86574 on 2018-05-24
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Fjara on 2018-05-25:
@gvdhoorn  so what do you recommand me ?
It's my mate who had installed all the things , and I need to wait him to make some test (he's absent atm)
I don't know which commands we need ( catkin_make , rosrun , but don't know the others )
I'll be back with more informations
Thanks for your answer
Comment by gvdhoorn on 2018-05-25:
You have a few options, but I don't know how Putty treats each of the lines in your -m file.txt: if they are all executed in individual SSH sessions, then you'll need to source the correct setup.bash each time before you run a new command.
If it's all a single session, source once.
Comment by Fjara on 2018-05-25:
Well , isn't enough if we sourced it in the .bashrc ?
I will try to get some infos about the -m so ! :)
Comment by gvdhoorn on 2018-05-25:\

Well , isn't enough if we sourced it in the .bashrc ?

It can be, but regular SSH logins do not source $HOME/.bashrc. That is not a ROS problem btw, just how SSH/bash work.
If you solve/work-around that, your initial approach might work.
Comment by Fjara on 2018-05-25:
Thanks for your answers !
I'll make some tests and i'll come back
Comment by Fjara on 2018-05-25:
hey , so with the source : /opt/ros/kinetic/bin/catkin_make
    Traceback (most recent call last):
  File "/opt/ros/kinetic/bin/catkin_make", line 12, in <module>
    from catkin.init_workspace import init_workspace
ImportError: No module named catkin.init_workspace

Comment by Fjara on 2018-05-25:
I used :
#!/bin/bash
cd catkin_ws
/opt/ros/kinetic/bin/catkin_make 2>> erreurs.log

Comment by gvdhoorn on 2018-05-25:
I'm not sure I understand what you're trying to do exactly.
In a nutshell, I believe you need to:

source /opt/ros/kinetic/setup.bash
run your commands

you cannot source catkin_make.
Comment by Fjara on 2018-05-25:
Like that catkin_make works
but as you said earlier , rosrun :
[rospack] Error: stack/package hello_world_demo not found

Comment by gvdhoorn on 2018-05-25:
Well if you have pkgs in a workspace then of course you should source /path/to/your/catkin_ws/devel/setup.bash instead.
Comment by Fjara on 2018-05-25:
i did :
#!/bin/bash
        cd Ben_catkin_ws
        source /opt/ros/hydro/setup.bash 2> erreurs.log
        source /devel/setup.bash
        rosrun hello_world_demo youBot_HelloWorldDemo 2>> erreurs.log

Didn't work, even if i delete the source hydro
Comment by Fjara on 2018-05-25:
(ah and yes , i use kinetic for test , and hydro on the robot)
Comment by gvdhoorn on 2018-05-25:
This doesn't match:
cd Ben_catkin_ws
...
source /devel/setup.bash

Either your devel space is in the root (/) of the drive, or it's in Ben_catkin_ws. It cannot be both.
Also: I'd advise you to use absolute paths with source.
Comment by Fjara on 2018-05-28:
Should i use ben_catkin_ws devel ?
Comment by gvdhoorn on 2018-05-28:
If that is the workspace containing your packages, then that would make sense, yes.
Please take note of the capitalisation though. You now write ben_catkin_ws, but in your other comments it's Ben_catkin_ws. Case matters.
Comment by Fjara on 2018-05-28:
I'll try when i got the robot back :)
Comment by Fjara on 2018-05-31:
Well , awesome it worked !
Thanks a lot @gvdhoorn , i understand my mistake here.
 /devel/setup.bash

is
/home/path/to/devel/setup.bash

