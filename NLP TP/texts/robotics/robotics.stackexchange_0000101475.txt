Q:

AMCL aborts global costmap

I have problems with Rviz2 when pose estimating a robot.
I get the following error:
[amcl-15] [INFO] [1649166945.999995726] [robot1.amcl]: initialPoseReceived
[amcl-15] [WARN] [1649166946.000590096] [robot1.amcl]: Failed to transform initial pose in time (Lookup would require extrapolation into the future.  Requested time 1649166945.998883 but the latest data is at time 20.984000, when looking up transform from frame [odom] to frame [base_footprint])
[amcl-15] [INFO] [1649166946.000688191] [robot1.amcl]: Setting pose (20.981000): 0.918 0.422 0.007

The global costmap shows up correctly for 1 second (Image 1) before throwing the above error and removes it.
Then I am left with only a local costmap (Image 2). The robot can still navigate, but it is not nearly as good without the global costmap.
Image 1

Image 2

Any ideas?

Originally posted by WarTurtle on ROS Answers with karma: 170 on 2022-04-05
Post score: 1

Original comments
Comment by ijnek on 2022-04-06:
It's a bit hard to reproduce the error without exact steps, but this seems like some of your nodes are running with use_sim_time set to true, while some are set to false.
If you're running a simulation in gazebo, you should set use_sim_time to true for all related nodes.
Comment by WarTurtle on 2022-04-06:
I was playing around with PushRosNamespace, and I might have given the use_sim_time a namespace... It was fixed by doing a more manual namespace convention.
Comment by ijnek on 2022-04-06:
Great, would you be able to post your comment as an answer so we can close this question off?

A:

As per ijnek, the error probably occured due to a missmatch of use_sim_time.
While playing around with PushRosNamespace, I might have inadvertently pushed a namespace onto that parameter, so it ended up with something like namespace/use_sim_time which resulted in the error.
Doing a more hardcoded/manual namespacing convention, the error was reverted.

Originally posted by WarTurtle with karma: 170 on 2022-04-06
This answer was ACCEPTED on the original site
Post score: 0

