Q:

publishing int variable

Hello,
I want to publish a variable, called targetIdx (type int), but I always get an error message
That's an extract of my publisher:
std_msgs::Int32 targetIdx;
targetIdx.data = targetIdx;
Sensor_Target_Nr_pub.publish(targetIdx);
ROS_INFO("Sensor Target Nr: %d", targetIdx.data);

That's the error message:
cannot convert ‘std_msgs::Int32’ to ‘std_msgs::Int32_<std::allocator<void> >::_data_type {aka int}’ in assignment
         targetIdx.data = targetIdx;

How can I solve the problem?
Thanks
I have declared the variable targetIdx as type int in the beginning of my program.

Originally posted by fafa on ROS Answers with karma: 1 on 2017-02-13
Post score: 0

A:

std_msgs::Int32 targetIdx;

So targetIdx is declared to be of type std_msgs::Int32 here ..
targetIdx.data = targetIdx;

.. and here you assign the just instantiated msg to its own data member.
That is not going to work.
Could it be that you are shadowing your int targetIdx with the newly created std_msgs::Int32 targetIdx?

Originally posted by gvdhoorn with karma: 86574 on 2017-02-13
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by fafa on 2017-02-13:
Sorry I'm new to programming and ROS...could you please give me an example how to publish an int variable
Comment by gvdhoorn on 2017-02-13:
This is a C++ issue really, not a ROS issue.
You are creating a two variables with the same name. The compiler will only 'remember' the one that you created last. In this case that is the std_msgs::Int32 one, not the int.
Comment by fafa on 2017-02-13:
Ok. The targetIdx variable is delivered by a sensor. So how can I easily publish this delivered variable?
Comment by gvdhoorn on 2017-02-15:
Just give your std_msgs::Int32 instance a different name. Then everyhing should start working (provided you have the rest correctly implemented).

