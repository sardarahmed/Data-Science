Q:

ros::Time::now() always return wall time in c++

Hey guys,
I have a very frustrating problem using Ros Hydro on ubuntu 12.04.
I have a Gazebo Simulation posting telemetry data and I use this in a node to create a tf-tree for the simulation.
Now I tried to combine my tf-tree with some static transform publishers and noticed that my transform from the c++ node which subscribes to the telemetry is using wall time.
The statics transform publishers are using simulation time.
I searched the web, set use_sim_time to true and tried some other things but ros::Time::now() in my c++ code always returns wall time, while the static transform publisher use simulation time!
This makes it impossible to use the transform together.
use_sime_time is set before launching any nodes, but my node launches before the /clock topic is available, looking into this next.

Originally posted by proprentnerl on ROS Answers with karma: 26 on 2014-07-22
Post score: 1

A:

Problem solved.
use_sim_time was needed but lead to another problem. The main node was waiting for a service from a python node... when using use_sim_time the main node wouldn't detect the service as long as the /clock service was nit published...
Our main node starts the simulation with the /clock service, so doing this first before waiting for the python node service fixed the problem...
It seems that python nodes become unresponsive when use_sim_time is activated but no /clock topic is published even when they don't need ans ros::Time functions.

Originally posted by proprentnerl with karma: 26 on 2014-07-23
This answer was ACCEPTED on the original site
Post score: 0

