Q:

What is a cluster in RTAB-Map?

I saw parameters related to cluster inside RTAB-Maps configuration ClusterRadius and MinClusterSize but their is absolutely no documentation that describes what these values are and how they should be configured. Their definitions are vague and useless as well. I kind of found out they are related to the grid cell size but not sure what this relation is.
So my question is what do these parameters do exactly and how they should be configured?

Originally posted by sopesa on ROS Answers with karma: 13 on 2022-12-12
Post score: 1

A:

These parameters are used for the occupancy grid.
rtabmap --params | grep Cluster
Param: Grid/ClusterRadius = "0.1"   [[Grid/NormalsSegmentation=true] Cluster maximum radius.]
Param: Grid/MinClusterSize = "10"   [[Grid/NormalsSegmentation=true] Minimum cluster size to project the points.]

They are used when Grid/NormalsSegmentation=true:
rtabmap --params | grep Grid/NormalsSegmentation
Param: Grid/NormalsSegmentation = "true" [Segment ground from obstacles using point normals, otherwise a fast passthrough is used.]

Then to know more about this approach, look at the code here: https://github.com/introlab/rtabmap/blob/a4761ad397ce195c254f65be10f7e8e2810facd0/corelib/include/rtabmap/core/impl/util3d_mapping.hpp#L54
So specifically for your question, the cluster parameters are used to cluster the point clouds into multiple surfaces. This can also filter some noise.
Some examples of results:

http://wiki.ros.org/rtabmap_ros#rtabmap_ros.2Fobstacles_detection

http://wiki.ros.org/rtabmap_ros/Tutorials/StereoOutdoorNavigation#Global_costmap

http://official-rtab-map-forum.206.s1.nabble.com/Proj-map-min-obstacles-height-tp2866p2918.html

https://github.com/introlab/rtabmap_ros/issues/304#issuecomment-484716536

"RTAB-Map as an open-source lidar and visual simultaneous localization and mapping library for large-scale and long-term online operation" https://introlab.3it.usherbrooke.ca/mediawiki-introlab/images/7/7a/Labbe18JFR_preprint.pdf (fig. 14 d, i)

Originally posted by matlabbe with karma: 6409 on 2022-12-13
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by sopesa on 2022-12-13:
Ah okay, I think I get it now.
Thank you!

