Q:

Where do I save an Image for calling it with cv::imread

Hi!
I'm using opencv for reading an image that later I'm going to use as a reference in my ROS node, the problem is that my code isn't reading it.
I saved it in the src folder inside the package folder, that is, in the same folder as the .cpp
Here is the code that does it:
    cv_ptr=cv_bridge::toCvCopy(msg, sensor_msgs::image_encodings::BGR8);
    cv::Mat img2;
    //Thresholding
    cv::cvtColor(cv_ptr->image,img2,CV_BGR2GRAY);
    Mat img1 = imread("bucher.jpg", CV_LOAD_IMAGE_GRAYSCALE );
    if( img1.empty() ) {
      printf("Error occured, image not read correctly");
            }

The terminal is always showing me that error, then it isnt reading correctly the image.
I don't know if maybe I have to modify something in the CMakeLists.txt to be able to use the image.
I apreciate your help, thanks

Originally posted by erivera1802 on ROS Answers with karma: 59 on 2015-06-26
Post score: 0

A:

Pass the location of the image as a param in a launch file like:
<param name="image" value="$(find your_pkg)/src/bucher.jpg">

Or use find package in the source as in http://wiki.ros.org/Packages#C.2B-.2B-
std::string image = ros::package::getPath("your_pkg") + "/src/bucher.jpg";

Originally posted by lucasw with karma: 8729 on 2015-06-26
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by erivera1802 on 2015-06-26:
for the second solution, where goes that line?.
And where you write "your_pkg" i write the name of the package or the entire path?
Then image would be a ROS type image, so i would need to convert it with cv-bridge?
Thanks a lot!Â·
Comment by cyborg-x1 on 2015-06-26:
I would prefer the first one ... hard coded paths ... well ... are just ugly for reusing your node, well except you know that nobody ever will change it for any reason, like an icon for an application for example ...
Comment by erivera1802 on 2015-06-26:
The problem is that i havent used any launch file yet. But if I do so, in my code i just call image und is an image type message?
Thanks
Comment by erivera1802 on 2015-06-26:
Oooook I wasnt understanding at all. Yep, lucasw solution worked perfectly!
Thanks

