Q:

How to run rgbdslam on gazebo environment?

My launch file:
  <launch>
  
    <!-- start up empty world -->
    <include file="$(find gazebo_worlds)/launch/simple_world.launch"/>
  
    <!-- start up robot -->
    <include file="$(find pr2_gazebo)/pr2.launch"/>
  
    <!-- Tug Arms For Navigation -->
    <node name="tuckarm" pkg="pr2_tuckarm" type="tuck_arms.py" args="-l t -r t" />
  
    <!-- for visualization -->
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find pr2_build_map_gazebo_demo)/rviz/build_map.vcg"/>
  
    <!-- dynamic map generation -->
    <node name="gmapping_node" pkg="gmapping" type="slam_gmapping" respawn="false" >
      <remap to="base_scan" from="scan"/>
      <param name="odom_frame" value="odom_combined" />
    </node>
    <!-- for PR2 teleop -->
    <include file="$(find pr2_teleop)/teleop_keyboard.launch"/>
  </launch> 

I try to run:
  sam@/home/sam/code/ros/slam$ roslaunch rgbdslam kinect+rgbdslam.launch 
  ... logging to /home/sam/.ros/log/a4924062-fceb-11e1-b239-00120ebbd636/roslaunch-sam-System-Product-Name-10191.log
  Checking log directory for disk usage. This may take awhile.
  Press Ctrl-C to interrupt
  Done checking log file disk usage. Usage is <1GB.
  
  started roslaunch server http://sam-System-Product-Name:54997/
  
  SUMMARY
  ========
  
  PARAMETERS
   * /rosdistro
   * /openni_node1/use_indices
   * /rgbdslam/config/topic_image_mono
   * /openni_node1/depth_registration
   * /openni_node1/image_time_offset
   * /openni_node1/depth_frame_id
   * /openni_node1/depth_mode
   * /openni_node1/debayering
   * /rosversion
   * /openni_node1/projector_depth_baseline
   * /openni_node1/rgb_frame_id
   * /openni_node1/depth_rgb_translation
   * /openni_node1/depth_time_offset
   * /openni_node1/image_mode
   * /openni_node1/shift_offset
   * /openni_node1/device_id
   * /rgbdslam/config/topic_image_depth
   * /openni_node1/depth_rgb_rotation
  
  NODES
    /
      openni_node1 (openni_camera/openni_node)
      kinect_base_link (tf/static_transform_publisher)
      kinect_base_link1 (tf/static_transform_publisher)
      kinect_base_link2 (tf/static_transform_publisher)
      kinect_base_link3 (tf/static_transform_publisher)
      rgbdslam (rgbdslam/rgbdslam)
  
  ROS_MASTER_URI=http://localhost:11311
  
  core service [/rosout] found
  process[openni_node1-1]: started with pid [10209]
  process[kinect_base_link-2]: started with pid [10210]
  process[kinect_base_link1-3]: started with pid [10218]
  process[kinect_base_link2-4]: started with pid [10225]
  process[kinect_base_link3-5]: started with pid [10226]
  process[rgbdslam-6]: started with pid [10249]
  bool g2o::HyperGraphActionLibrary::registerAction(g2o::HyperGraphElementAction*): creating collection for "writeGnuplot"
  bool g2o::HyperGraphActionLibrary::registerAction(g2o::HyperGraphElementAction*): creating collection for "draw"
  SOLVER FACTORY WARNING: Overwriting Solver _creator pcg
  SOLVER FACTORY WARNING: Overwriting Solver _creator pcg3_2
  SOLVER FACTORY WARNING: Overwriting Solver _creator pcg6_3
  SOLVER FACTORY WARNING: Overwriting Solver _creator pcg7_3
  Initializing Node...
  [ INFO] [1347463889.446227314]: Connected to roscore
  [ WARN] [1347463889.495273123]: Cannot use concurrent node construction with SiftGPU matcher! 'concurrent_node_construction' was set to false. Everything should work fine, but the CPU-threading won't happen (because you are using the GPU instead).
  [ WARN] [1347463889.495310761]: Cannot use concurrent edge construction with SiftGPU matcher! 'concurrent_edge_construction' was set to false. Everything should work fine, but the CPU-threading won't happen (because you are using the GPU instead).
  [ INFO] [1347463889.612529297]: Listening to /camera/rgb/image_color and /camera/depth/image
  [ INFO] [1347463889.612577246]: SIFTGPU is to be used
  [ INFO] [1347463889.612615001]: SIFTGPU is to be used as extractor, creating SURF descriptor extractor as fallback.
  [ INFO] [1347463889.844371991]: [/openni_node1] No devices connected.... waiting for devices to be connected
  [ INFO] [1347463890.846078666, 733.741000000]: [/openni_node1] No devices connected.... waiting for devices to be connected
  [ INFO] [1347463891.847666108, 734.545000000]: [/openni_node1] No devices connected.... waiting for devices to be connected
  [ INFO] [1347463892.849301017, 735.345000000]: [/openni_node1] No devices connected.... waiting for devices to be connected                                                                                          

How to solve it?
Thank you~

Originally posted by sam on ROS Answers with karma: 2570 on 2012-09-12
Post score: 0

Original comments
Comment by Felix Endres on 2012-09-24:
How is that working out for you?
Comment by sam on 2012-09-25:
What's 'working out' means?
Comment by Felix Endres on 2012-10-02:
Mapping a simulator? I only ever mapped reality, so I wonder whether it worked or went crazy because many features might match each other perfectly.

A:

If you want to run this in Gazebo then you have to make rgbdslam subscribe to the simulated Kinect and not the real device. That is, you have to comment out the following line in rgbdslam kinect+rgbdslam.launch:
<include file="$(find openni_camera)/launch/openni_node.launch"/>.

And you have to make sure that you start the simulated Kinect and that the mapping of the topics is correct.
D.

Originally posted by dejanpan with karma: 1420 on 2012-09-12
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by sam on 2012-09-12:
When I run gazebo+PR2+rgbdslam,they appears so many topics. How to find the one which should be mapping? Is there any topic list I should mapping? Thank you~
Comment by dejanpan on 2012-09-13:
Kinect topics shall either be in /kinect_head or /camera namespaces, e.g. kinect_head/depth_registered/points.
Comment by Felix Endres on 2012-09-24:
rostopic list is helpful for that. You could, e.g., grep the output for image_color
Comment by sam on 2012-09-25:
My question is mapping topics. I don't know which topic should map to which topic. Where can I get the list. I know I can use rostopic, but it gives me too many topics that confuse me. Thank you~

