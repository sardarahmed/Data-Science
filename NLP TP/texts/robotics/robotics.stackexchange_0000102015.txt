Q:

Real robot UR3e is not moving with moveit

I am connected to a UR3e over the network, working on ROS2 Foxy, on Ubuntu 20.04, via docker.

I set up the right host IP on the robot and robotâ€™s IP in the launch file
I installed the external control urcap
I tried with both enable/disable remote control, and with both local/remote control on teach pendant
I tried calibrating the robot (with ur_calibration)

Then I run
ros2 launch ur_bringup ur_control.launch.py ur_type:=ur3e robot_ip:=192.168.0.4 launch_rviz:=false reverse_ip:=192.168.0.2 limited:=true

on one terminal and
ros2 launch ur_bringup ur_moveit.launch.py ur_type:=ur3e robot_ip:=192.168.0.4 launch_rviz:=true reverse_ip:=192.168.0.2

on another terminal.
After that, I run the program on the teach pendant of the robot with the external control (with the correct IP).
Rviz starts with the robot at the right position.
I plan and execute a random trajectory.
I get this outputs in terminal 1:
Received new action goal
Accepted new action goal
Goal reached, success!

and these on terminal 2:
Completed trajectory execution with status SUCCEEDED
Solution was found and executed.
Plan and Execute request complete!

However the real robot does not move.
There is no error in the terminals.
Also I was wondering whether warehouse_ros_mongo is really necessary and what does it exactly do?
Any clue what could be the problem here?
PS: It could be a docker issue?
Thank you in advance

Originally posted by AlexandrosNic on ROS Answers with karma: 233 on 2022-06-23
Post score: 0

Original comments
Comment by fexner on 2022-06-27:
I assume, this is a double (or triple) post of https://forum.universal-robots.com/t/real-robot-is-not-moving-with-moveit/22183/4 and https://github.com/UniversalRobots/Universal_Robots_ROS2_Driver/issues/413#issuecomment-1164469662
Comment by AlexandrosNic on 2022-06-28:
It is indeed. Just wanted to reach different members of answers.ros, the UR forum, and github repo, without necessarily be a burden to you fexner. But thank you anw for your replies :)
Comment by gvdhoorn on 2022-06-29:\

Just wanted to reach different members of answers.ros, the UR forum, and github repo

this is actually called cross-posting, and isn't a very nice thing to do to/in online communities, even if your intentions were good.
Comment by AlexandrosNic on 2022-06-29:
good to know! thanks anyway!

A:

The solution was posted here by @fexner.
It seems that the reverse_ip is not yet working for ROS2 drivers, which prompts the UR to use the directly recognized port of the host machine, which in my case is the docker port. However, the host machine port (not the docker) port is needed for the UR to work.
Thus, replacing the Universal_Robots_ROS2_Driver/ur_robot_driver/resources/ros_control.urscript, from {{SERVER_IP_REPLACE}} to my host IP, fixed the problem.
PS: Remember to run it in this order:

Launch the ur_control launch file
Start the program in the real UR
Launch the ur_moveit launch file

Originally posted by AlexandrosNic with karma: 233 on 2022-06-28
This answer was ACCEPTED on the original site
Post score: 1

