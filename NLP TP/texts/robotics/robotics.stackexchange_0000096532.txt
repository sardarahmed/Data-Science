Q:

Can't bloom for rolling

I wanted to bloom my package for rolling as I successfully did before for crystal, dashing, eloquent, and foxy. However, when trying to bloom for rolling by using
$ bloom-release --rosdistro rolling --track rolling system_modes -e
I get an error, telling me that it failed to push to the release repository:

To https://github.com/microROS/system_modes-release.git
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'https://github.com/microROS/system_modes-release.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
Cannot push to remote release repository.
Hint: If you just typed in your username/password and you have two-factor authentication,see:
  http://wiki.ros.org/bloom/Tutorials/GithubManualAuthorization

After experiencing this for the first time, I did a release for dashing - which worked as expected - and then for rolling again with the same error. I fetched and pulled and double-checked but still failing:

$ git fetch --all
Fetching origin
$ git pull
Already up to date.
$ bloom-release --rosdistro rolling --track rolling system_modes
ROS Distro index file associate with commit '7616d4ac6de71576cd47abcb4575a5ff7cf66fd0'
New ROS Distro index url: 'https://raw.githubusercontent.com/ros/rosdistro/7616d4ac6de71576cd47abcb4575a5ff7cf66fd0/index-v4.yaml'
==> Fetching 'system_modes' repository from 'https://github.com/ros2-gbp/system_modes-release.git'
Cloning into '/tmp/tmpLEth2i'...
remote: Enumerating objects: 1059, done.
remote: Counting objects: 100% (1059/1059), done.
remote: Compressing objects: 100% (588/588), done.
remote: Total 1059 (delta 428), reused 1045 (delta 415), pack-reused 0
Receiving objects: 100% (1059/1059), 344.57 KiB | 1.01 MiB/s, done.
Resolving deltas: 100% (428/428), done.
==> Setting release repository remote url to 'https://github.com/microROS/system_modes-release.git'
==> git remote set-url origin https://github.com/microROS/system_modes-release.git
==> Testing for push permission on release repository
==> git remote -v
origin  https://github.com/microROS/system_modes-release.git (fetch)
origin  https://github.com/microROS/system_modes-release.git (push)
==> git push --dry-run
To https://github.com/microROS/system_modes-release.git
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'https://github.com/microROS/system_modes-release.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
Cannot push to remote release repository.
Hint: If you just typed in your username/password and you have two-factor authentication,see:
  http://wiki.ros.org/bloom/Tutorials/GithubManualAuthorization

The upstream repository is micro-ROS/system_modes, the release repository is microROS/system_modes-release (one with and one without the dash in micro-ROS, this is for historic reasons). I have write access to both.
I was about to file an issue in the bloom repo, but want to rule out before that I am missing something.
Thanks for any hint!
Arne

Originally posted by Arne Nordmann on ROS Answers with karma: 28 on 2020-07-14
Post score: 0

A:

This is fallout from the mechanism we used to create release repositories for the Rolling distribution. Contacting affected package maintainers is still a pending task of mine but I'll start here and make sure I contact other affected packages after. The technical explanation for this error is that the release repository configured for rolling is https://github.com/ros2-gbp/system_modes-release.git is missing changes from https://github.com/microROS/system_modes-release.git
In order to be automatically released from Foxy to Rolling, and in order automatically release from Rolling to future distributions, the Rolling Release automation needs to be able to push to release repositories. For this reason, and as specified in REP 2002 release repositories were created in ros2-gbp if they existed elsewhere.
I'll set up the team for https://github.com/ros2-gbp/system_modes-release and add the maintainers of system_modes with the necessary privileges to fully administer the release repository and, if you're interested, help transitioning any content to the new release repository location from the existing one.

Originally posted by nuclearsandwich with karma: 906 on 2020-07-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Arne Nordmann on 2020-07-15:
That makes sense, thanks.
I will get in contact with you regarding the transition.
Comment by Arne Nordmann on 2020-07-22:
Can you help me with the transition? I set up an issue for that: https://github.com/ros2-gbp/system_modes-release/issues/1 Thanks!

