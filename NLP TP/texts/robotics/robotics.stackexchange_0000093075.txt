Q:

Documentation on OpenPlanner (Autoware)

Hi all,
I was wondering if there is any documentation on using openplanner on autoware. I found the publication about open planner which explains the package itself in details but there is no instruction on how to use it, what nodes to launch and etc.
Update: This question is about detecting and using obstacle information in deciding on lane trajectories the vehicle should take.
With Obstacle:

No Obstacle:

Thanks.
Cheers .

Originally posted by cassini.huygens on ROS Answers with karma: 80 on 2019-08-22
Post score: 2

A:

Hello,
you can check the videos from
https://youtu.be/BS5nLtBsXPE
Regards,

Originally posted by Hatem with karma: 443 on 2019-09-10
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by cassini.huygens on 2019-09-20:
Thanks, the video is indeed helpful. But I was looking for more of a written instruction and explanations. specially regarding with obstacle detection and re planning. i.e. I cannot see which nodes have to run to detect an object, locate it and using openplanner the robot changes it's direction or lane to choose the safer path. Thanks!
Comment by Hatem on 2019-09-22:
check the OpenPlanner paper https://www.fujipress.jp/jrm/rb/robot002900040668/
also check other videos at OpenPlanner YouTube channel.
Comment by cassini.huygens on 2019-10-20:
Hi Hatem, I tried to replicate the result in the video on youtube with the most recent version of Autoware on ROS Kinetic, but I was not able to. I am not sure what is wrong as I don't know how to backpropegate the error. i.e. is the obstacle detected properly? is the planner receiving the detected obstacle? etc. Cheers, Thanks.
Comment by Hatem on 2019-10-21:
Can you give me details, or just make video of your steps to use OpenPlanner.
Comment by cassini.huygens on 2019-10-21:
I am localising the vehicle using proper nodes then: ray_ground_filter vel_pose_connect lidar_euclidean_cluster_detect lidar_kf_contour_track costmap_generator op_global_planner astar_avoid velocity_set pure_pursuit + op local planning nodes. I can see that the object in the world is being tracked via lidar tracker and is published under /tracked_objects. ThankS!
Comment by Hatem on 2019-10-27:
one thing I can think of is the /tracked_object frame.
in lidar_euclidean_cluster_detect can you set the output frame to "map" instead of "velodyne"
Comment by cassini.huygens on 2019-11-06:
Thanks Hatem, your solution worked for locating objects correctly in the environments. But I found why it did not work, the problem is within op_motion_predictor. For some reason outputs of this node, indicate no obstacles around the vehicle, although I observed and made sure that input to this node - /tracked_objects - is non-empty. I am not sure how to solve this tho...
Comment by Hatem on 2019-11-07:
Are you sure you have vector map loaded by op_local_planner ?
check this function in op_motion_predictor_core.cpp , callbackGetTrackedObjects
Comment by cassini.huygens on 2019-11-17:
@Hatem,. Yes I do have vectormap read and available in rostopics (however my vectormap includes whiteline, point node line lane and dtlane (no way_area etc)) . Also, I checked what you suggested. The object is detected and is located properly by the motion predictor. Trajectory evaluator, shows the occupied (dangerous) trajectories (red), but the selected trajectory (pink) seems like it was chosen regardless of the obstacle position. (I am attaching the rviz screenshots to this Question.)
Comment by Hatem on 2019-11-17:
in the case of (stopping , following, and waiting) behaviors. central trajectory is selected. the colors still represent the cost. but only used in the case of avoidance behavior is selected.
Comment by jayess on 2019-11-18:
Please don't post link-only answers. It's important for answers (and questions) to be self-contained because linked content often disappears. When this happens, then the answer will no longer be helpful. So, can you please update your answer with the gist of the information of your video?
Comment by wsung1 on 2020-02-29:
@Hatem,
you advised @cassini.huygens that op_motion_predictor node needs vector maps. Will the kml-typed vector map (only including a centerline feature) be also fine? I'm expecting I could stop at and/or avoid obstacles without the csv-typed (full sets of Aisan's) vector map. Will it be possible?
Comment by Hatem on 2020-03-02:
Yes , kml should work , only center lines are needed.

