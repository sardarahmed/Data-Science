Q:

pi_face_tracker installation problem

Hi, I am running Ubuntu 10.04 and ROS Diamondback.
Following the instructions of Patrick Goebel's pi_face_tracker available here, I get stuck compiling the pi_vision stack. From what I understand, the dependency arbotix_python of pi_arbotix was not found. Below is the full error.
rosmake --rosdep-install pi_vision

[ rosmake ] Packages requested are: ['pi_vision']                               
[ rosmake ] Logging to directory/home/gsaponaro/.ros/rosmake/rosmake_output-20110613-194331
[ rosmake ] Expanded args ['pi_vision'] to:
['pi_kinect', 'pi_opencv', 'pi_arbotix', 'pi_ax12_controller', 'pi_description', 'pi_speech', 'pi_turtlebot', 'pi_slam', 'pi_arm_kinematics', 'pi_actions', 'ros2opencv', 'pi_face_tracker']
[ rosmake ] Generating Install Script using rosdep then executing. This may take a minute, you will be prompted for permissions. . .
Failed to find stack for package [arbotix_python]
Failed to load rosdep.yaml for package [arbotix_python]:Cannot locate installation of package arbotix_python: [rospack] couldn't find package [arbotix_python]. ROS_ROOT[/opt/ros/diamondback/ros] ROS_PACKAGE_PATH[/home/gsaponaro/kinect/ros:/opt/ros/diamondback/stacks]
Failed to find stack for package [ax12_controller_core]
Failed to load rosdep.yaml for package [ax12_controller_core]:Cannot locate installation of package ax12_controller_core: [rospack] couldn't find package [ax12_controller_core]. ROS_ROOT[/opt/ros/diamondback/ros] ROS_PACKAGE_PATH[/home/gsaponaro/kinect/ros:/opt/ros/diamondback/stacks]
Failed to find stack for package [joint_state_publisher]
Failed to load rosdep.yaml for package [joint_state_publisher]:Cannot locate installation of package joint_state_publisher: [rospack] couldn't find package [joint_state_publisher]. ROS_ROOT[/opt/ros/diamondback/ros] ROS_PACKAGE_PATH[/home/gsaponaro/kinect/ros:/opt/ros/diamondback/stacks]
Failed to find stack for package [pocketsphinx]
Failed to load rosdep.yaml for package [pocketsphinx]:Cannot locate installation of package pocketsphinx: [rospack] couldn't find package [pocketsphinx]. ROS_ROOT[/opt/ros/diamondback/ros] ROS_PACKAGE_PATH[/home/gsaponaro/kinect/ros:/opt/ros/diamondback/stacks]
Failed to find stack for package [sound_play]
Failed to load rosdep.yaml for package [sound_play]:Cannot locate installation of package sound_play: [rospack] couldn't find package [sound_play]. ROS_ROOT[/opt/ros/diamondback/ros] ROS_PACKAGE_PATH[/home/gsaponaro/kinect/ros:/opt/ros/diamondback/stacks]
Failed to find stack for package [kinematics_msgs]
Failed to load rosdep.yaml for package [kinematics_msgs]:Cannot locate installation of package kinematics_msgs: [rospack] couldn't find package [kinematics_msgs]. ROS_ROOT[/opt/ros/diamondback/ros] ROS_PACKAGE_PATH[/home/gsaponaro/kinect/ros:/opt/ros/diamondback/stacks]
Failed to find stack for package [arm_kinematics]
Failed to load rosdep.yaml for package [arm_kinematics]:Cannot locate installation of package arm_kinematics: [rospack] couldn't find package [arm_kinematics]. ROS_ROOT[/opt/ros/diamondback/ros] ROS_PACKAGE_PATH[/home/gsaponaro/kinect/ros:/opt/ros/diamondback/stacks]
rosdep executing this script:
{{{
set -o errexit
#No Packages to install
}}}
[ rosmake ] rosdep successfully installed all system dependencies               
[rosmake-0] Starting >>> rosbuild [ make ]                                      
[rosmake-0] Finished <<< rosbuild ROS_NOBUILD in package rosbuild
 No Makefile in package rosbuild
[rosmake-1] Starting >>> cpp_common [ make ]                                    
[rosmake-1] Finished <<< cpp_common ROS_NOBUILD in package cpp_common           
[rosmake-2] Starting >>> roslib [ make ]                                        
[rosmake-2] Finished <<< roslib ROS_NOBUILD in package roslib                   
[rosmake-3] Starting >>> xmlrpcpp [ make ]                                      
[rosmake-1] Starting >>> roslang [ make ]                                       
[rosmake-0] Starting >>> roscpp_traits [ make ]                                 
[rosmake-2] Starting >>> rostime [ make ]                                       
[rosmake-1] Finished <<< roslang ROS_NOBUILD in package roslang
 No Makefile in package roslang
[rosmake-3] Finished <<< xmlrpcpp ROS_NOBUILD in package xmlrpcpp               
[rosmake-2] Finished <<< rostime ROS_NOBUILD in package rostime                 
[rosmake-0] Finished <<< roscpp_traits ROS_NOBUILD in package roscpp_traits     
[rosmake-1] Starting >>> std_msgs [ make ]                                      
[rosmake-3] Starting >>> roscpp_serialization [ make ]                          
[rosmake-2] Starting >>> rosconsole [ make ]                                    
[rosmake-3] Finished <<< roscpp_serialization ROS_NOBUILD in package roscpp_serialization
[rosmake-1] Finished <<< std_msgs ROS_NOBUILD in package std_msgs               
[rosmake-2] Finished <<< rosconsole ROS_NOBUILD in package rosconsole           
[rosmake-0] Starting >>> rosgraph_msgs [ make ]                                 
[rosmake-0] Finished <<< rosgraph_msgs ROS_NOBUILD in package rosgraph_msgs     
[rosmake-3] Starting >>> tinyxml [ make ]                                       
[rosmake-3] Finished <<< tinyxml ROS_NOBUILD in package tinyxml                 
[rosmake-1] Starting >>> bond [ make ]                                          
[rosmake-1] Finished <<< bond ROS_NOBUILD in package bond                       
[rosmake-2] Starting >>> smclib [ make ]                                        
[rosmake-2] Finished <<< smclib ROS_NOBUILD in package smclib                   
[rosmake-2] Starting >>> pluginlib [ make ]                                     
[rosmake-0] Starting >>> roscpp [ make ]                                        
[rosmake-1] Starting >>> rospy [ make ]                                         
[rosmake-0] Finished <<< roscpp ROS_NOBUILD in package roscpp                   
[rosmake-2] Finished <<< pluginlib ROS_NOBUILD in package pluginlib             
[rosmake-1] Finished <<< rospy ROS_NOBUILD in package rospy                     
[rosmake-3] Starting >>> rosclean [ make ]                                      
[rosmake-0] Starting >>> bondcpp [ make ]                                       
[rosmake-3] Finished <<< rosclean ROS_NOBUILD in package rosclean               
[rosmake-0] Finished <<< bondcpp ROS_NOBUILD in package bondcpp                 
[rosmake-1] Starting >>> rosgraph [ make ]                                      
[rosmake-1] Finished <<< rosgraph ROS_NOBUILD in package rosgraph               
[rosmake-2] Starting >>> nodelet [ make ]                                       
[rosmake-2] Finished <<< nodelet ROS_NOBUILD in package nodelet                 
[rosmake-3] Starting >>> rosmaster [ make ]                                     
[rosmake-3] Finished <<< rosmaster ROS_NOBUILD in package rosmaster             
[rosmake-0] Starting >>> rosout [ make ]                                        
[rosmake-0] Finished <<< rosout ROS_NOBUILD in package rosout                   
[rosmake-1] Starting >>> rosunit [ make ]                                       
[rosmake-1] Finished <<< rosunit ROS_NOBUILD in package rosunit                 
[rosmake-2] Starting >>> openni [ make ]                                        
[rosmake-2] Finished <<< openni ROS_NOBUILD in package openni                   
[rosmake-0] Starting >>> eigen [ make ]                                         
[rosmake-0] Finished <<< eigen ROS_NOBUILD in package eigen                     
[rosmake-1] Starting >>> angles [ make ]                                        
[rosmake-1] Finished <<< angles ROS_NOBUILD in package angles                   
[rosmake-3] Starting >>> roslaunch [ make ]                                     
[rosmake-3] Finished <<< roslaunch ROS_NOBUILD in package roslaunch
 No Makefile in package roslaunch
[rosmake-0] Starting >>> rosnode [ make ]                                       
[rosmake-0] Finished <<< rosnode ROS_NOBUILD in package rosnode                 
[rosmake-2] Starting >>> cminpack [ make ]                                      
[rosmake-1] Starting >>> rostest [ make ]                                       
[rosmake-1] Finished <<< rostest ROS_NOBUILD in package rostest                 
[rosmake-2] Finished <<< cminpack ROS_NOBUILD in package cminpack               
[rosmake-3] Starting >>> flann [ make ]                                         
[rosmake-3] Finished <<< flann ROS_NOBUILD in package flann                     
[rosmake-0] Starting >>> nite [ make ]                                          
[rosmake-1] Starting >>> topic_tools [ make ]                                   
[rosmake-2] Starting >>> message_filters [ make ]                               
[rosmake-3] Starting >>> bullet [ make ]                                        
[rosmake-1] Finished <<< topic_tools ROS_NOBUILD in package topic_tools         
[rosmake-0] Finished <<< nite ROS_NOBUILD in package nite                       
[rosmake-3] Finished <<< bullet ROS_NOBUILD in package bullet                   
[rosmake-2] Finished <<< message_filters ROS_NOBUILD in package message_filters 
[rosmake-1] Starting >>> rosbag [ make ]                                        
[rosmake-1] Finished <<< rosbag ROS_NOBUILD in package rosbag                   
[rosmake-3] Starting >>> kdl [ make ]                                           
[rosmake-2] Starting >>> rosbagmigration [ make ]                               
[rosmake-0] Starting >>> rosmsg [ make ]                                        
[rosmake-1] Starting >>> nodelet_topic_tools [ make ]                           
[rosmake-3] Finished <<< kdl ROS_NOBUILD in package kdl                         
[rosmake-1] Finished <<< nodelet_topic_tools ROS_NOBUILD in package nodelet_topic_tools
[rosmake-2] Finished <<< rosbagmigration ROS_NOBUILD in package rosbagmigration
 No Makefile in package rosbagmigration
[rosmake-0] Finished <<< rosmsg ROS_NOBUILD in package rosmsg
 No Makefile in package rosmsg
[rosmake-1] Starting >>> opencv2 [ make ]                                       
[rosmake-1] Finished <<< opencv2 ROS_NOBUILD in package opencv2                 
[rosmake-0] Starting >>> rostopic [ make ]                                      
[rosmake-3] Starting >>> yaml_cpp [ make ]                                      
[rosmake-0] Finished <<< rostopic ROS_NOBUILD in package rostopic               
[rosmake-3] Finished <<< yaml_cpp ROS_NOBUILD in package yaml_cpp               
[rosmake-1] Starting >>> geometry_msgs [ make ]                                 
[rosmake-2] Starting >>> rosservice [ make ]                                    
[rosmake-1] Finished <<< geometry_msgs ROS_NOBUILD in package geometry_msgs     
[rosmake-2] Finished <<< rosservice ROS_NOBUILD in package rosservice           
[rosmake-3] Starting >>> diagnostic_msgs [ make ]                               
[rosmake-3] Finished <<< diagnostic_msgs ROS_NOBUILD in package diagnostic_msgs 
[rosmake-0] Starting >>> pi_arbotix [ make ]                                    
[rosmake-1] Starting >>> sensor_msgs [ make ]                                   
[rosmake-2] Starting >>> dynamic_reconfigure [ make ]                           
[rosmake-3] Starting >>> roswtf [ make ]                                        
[rosmake-2] Finished <<< dynamic_reconfigure ROS_NOBUILD in package dynamic_reconfigure
[rosmake-1] Finished <<< sensor_msgs ROS_NOBUILD in package sensor_msgs         
[rosmake-2] Starting >>> diagnostic_updater [ make ]                            
[rosmake-1] Starting >>> image_transport [ make ]                               
[rosmake-3] Finished <<< roswtf ROS_NOBUILD in package roswtf                   
[rosmake-3] Starting >>> stereo_msgs [ make ]                                   
[rosmake-1] Finished <<< image_transport ROS_NOBUILD in package image_transport 
[rosmake-1] Starting >>> tf [ make ]                                            
[rosmake-2] Finished <<< diagnostic_updater ROS_NOBUILD in package diagnostic_updater
[rosmake-3] Finished <<< stereo_msgs ROS_NOBUILD in package stereo_msgs         
[rosmake-2] Starting >>> pcl [ make ]                                           
[rosmake-1] Finished <<< tf ROS_NOBUILD in package tf                           
[rosmake-1] Starting >>> openni_tracker [ make ]                                
[rosmake-3] Starting >>> cv_bridge [ make ]                                     
[rosmake-2] Finished <<< pcl ROS_NOBUILD in package pcl                         
[rosmake-2] Starting >>> pcl_ros [ make ]                                       
[rosmake-3] Finished <<< cv_bridge ROS_NOBUILD in package cv_bridge             
[rosmake-1] Finished <<< openni_tracker ROS_NOBUILD in package openni_tracker   
[rosmake-3] Starting >>> camera_calibration_parsers [ make ]                    
[rosmake-1] Starting >>> self_test [ make ]                                     
[rosmake-2] Finished <<< pcl_ros ROS_NOBUILD in package pcl_ros                 
[rosmake-2] Starting >>> openni_camera [ make ]                                 
[rosmake-1] Finished <<< self_test ROS_NOBUILD in package self_test             
[rosmake-1] Starting >>> driver_base [ make ]                                   
[rosmake-3] Finished <<< camera_calibration_parsers ROS_NOBUILD in package camera_calibration_parsers
[rosmake-3] Starting >>> camera_info_manager [ make ]                           
[rosmake-2] Finished <<< openni_camera ROS_NOBUILD in package openni_camera     
[rosmake-2] Starting >>> pi_kinect [ make ]                                     
[rosmake-3] Finished <<< camera_info_manager ROS_NOBUILD in package camera_info_manager
[rosmake-1] Finished <<< driver_base ROS_NOBUILD in package driver_base         
[rosmake-1] Starting >>> uvc_cam [ make ]                                       
[rosmake-3] Starting >>> pi_ax12_controller [ make ]                            
[ rosmake ] All 32 linesi_arbotix: 0.6 sec ] [ pi... [ 4 Active 64/81 Complete ]
{-------------------------------------------------------------------------------
  mkdir -p bin
  cd build && cmake -Wdev -DCMAKE_TOOLCHAIN_FILE=`rospack find rosbuild`/rostoolchain.cmake  ..
  -- The C compiler identification is GNU
  -- The CXX compiler identification is GNU
  -- Check for working C compiler: /usr/bin/gcc
  -- Check for working C compiler: /usr/bin/gcc -- works
  -- Detecting C compiler ABI info
  -- Detecting C compiler ABI info - done
  -- Check for working CXX compiler: /usr/bin/c++
  -- Check for working CXX compiler: /usr/bin/c++ -- works
  -- Detecting CXX compiler ABI info
  -- Detecting CXX compiler ABI info - done
  [rosbuild] Building package pi_arbotix
  Failed to invoke /opt/ros/diamondback/ros/bin/rospack deps-manifests pi_arbotix
  [rospack] couldn't find dependency [arbotix_python] of [pi_arbotix]
  [rospack] missing dependency
  
  
  CMake Error at /opt/ros/diamondback/ros/core/rosbuild/public.cmake:113 (message):
    
  
    Failed to invoke rospack to get compile flags for package 'pi_arbotix'.
    Look above for errors from rospack itself.  Aborting.  Please fix the
    broken dependency!
  
  Call Stack (most recent call first):
    /opt/ros/diamondback/ros/core/rosbuild/public.cmake:183 (rosbuild_invoke_rospack)
    CMakeLists.txt:12 (rosbuild_init)
  
  
  -- Configuring incomplete, errors occurred!
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package pi_arbotix written to:
[ rosmake ]    /home/gsaponaro/.ros/rosmake/rosmake_output-20110613-194331/pi_arbotix/build_output.log
[rosmake-0] Finished <<< pi_arbotix [FAIL] [ 0.68 seconds ]                     
[ rosmake ] Halting due to failure in package pi_arbotix. 
[ rosmake ] Waiting for other threads to complete.
[ rosmake ] All 32 linesi_kinect: 0.7 sec ] [ uvc... [ 3 Active 64/81 Complete ]
{-------------------------------------------------------------------------------
  mkdir -p bin
  cd build && cmake -Wdev -DCMAKE_TOOLCHAIN_FILE=`rospack find rosbuild`/rostoolchain.cmake  ..
  -- The C compiler identification is GNU
  -- The CXX compiler identification is GNU
  -- Check for working C compiler: /usr/bin/gcc
  -- Check for working C compiler: /usr/bin/gcc -- works
  -- Detecting C compiler ABI info
  -- Detecting C compiler ABI info - done
  -- Check for working CXX compiler: /usr/bin/c++
  -- Check for working CXX compiler: /usr/bin/c++ -- works
  -- Detecting CXX compiler ABI info
  -- Detecting CXX compiler ABI info - done
  [rosbuild] Building package pi_ax12_controller
  Failed to invoke /opt/ros/diamondback/ros/bin/rospack deps-manifests pi_ax12_controller
  [rospack] couldn't find dependency [ax12_controller_core] of [pi_ax12_controller]
  [rospack] missing dependency
  
  
  CMake Error at /opt/ros/diamondback/ros/core/rosbuild/public.cmake:113 (message):
    
  
    Failed to invoke rospack to get compile flags for package
    'pi_ax12_controller'.  Look above for errors from rospack itself.
    Aborting.  Please fix the broken dependency!
  
  Call Stack (most recent call first):
    /opt/ros/diamondback/ros/core/rosbuild/public.cmake:183 (rosbuild_invoke_rospack)
    CMakeLists.txt:12 (rosbuild_init)
  
  
  -- Configuring incomplete, errors occurred!
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package pi_ax12_controller written to:
[ rosmake ]    /home/gsaponaro/.ros/rosmake/rosmake_output-20110613-194331/pi_ax12_controller/build_output.log
[rosmake-3] Finished <<< pi_ax12_controller [FAIL] [ 0.79 seconds ]             
[ rosmake ] Halting due to failure in package pi_ax12_controller. 
[ rosmake ] Waiting for other threads to complete.
[rosmake-1] Finished <<< uvc_cam [PASS] [ 1.11 seconds ]                        
[rosmake-2] Finished <<< pi_kinect [PASS] [ 7.37 seconds ]                      
[ rosmake ] Results:                                                            
[ rosmake ] Built 68 packages with 2 failures.                                  
[ rosmake ] Summary output to directory                                         
[ rosmake ] /home/gsaponaro/.ros/rosmake/rosmake_output-20110613-194331         

Thank you very much for your help.

Originally posted by Giovanni Saponaro on ROS Answers with karma: 68 on 2011-06-13
Post score: 0

A:

Many thanks to Fergs for bringing this to my attention.  I somehow completely messed up the pi-robot-ros-pkg repository this morning just before leaving the computer for several hours.  I have restored the pi_face_tracker package.  In fact, I restored it to version 0.2 which I was just about to release anyway.  There are a copy of bug fixes and pair of new features as listed in the ChangeLog.text file and reproduced below.  In the meantime, I will work on restoring the rest of the repository...
Release Notes for Version 0.2

Fixed bug in add_features() function that prevented adding of new features(!)

Fixed bug that caused occasional ROI to be defined outside boundaries of image frame.

Added new parameter "feature_type" which can be set to 0 for Good Features To Track (default) or 1 for SURF features.

Added new parameter "use_depth_for_tracking" which causes points to be pruned if their depth value is too far from the currently tracked cloud.

Changed mask shape from ellipse to rectangle for manually-selected regions; i.e. ellipse-shaped mask only used when parameter auto_face_tracking is set to True.

Changed default image display window size for ros2opencv from 320x240 to 640x480.

Release Notes for Version 0.1

Initial release.

Originally posted by Pi Robot with karma: 4046 on 2011-06-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Giovanni Saponaro on 2011-06-13:
Thank you, re-installing the pi_vision stack from scratch worked.

