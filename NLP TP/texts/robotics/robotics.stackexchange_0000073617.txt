Q:

Multi packages workspace under WinROS

Hello guys,
I have a Hydro winros workspace containing three packages that are dependent.
The first one is a messages and services definition package called ros_msgs.
The second package contains several C++ abstract classes and depends on ros_msgs. It's called ros_radar.
The last one contains implementation classes and thus depend on ros_radar and transitively on ros_msgs.

My problem is that when I call winros_make, it fails after building DLLs with the following message:
NMAKE: fatal error U1073: Unable to find 'D:\Projects\Ros_project\overlay\devel\lib\ros_radar.lib
In fact, my devel folder only contains DLL for ros_radar.
Is there a special configuration parameter I forgot to use ?
As a note, the first two packages are already used under Ubuntu without any problems.

Originally posted by Fred Praca on ROS Answers with karma: 16 on 2016-04-27
Post score: 0

A:

So, after struggling for days on this topic, I think I found the solution.
This problem is related to lib generation inside CMake for Windows DLL which is something weird for a Linux developer :)
In the second package CMakeLists.txt, I just added  the following
set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS TRUE)
This way, CMake generated both lib and defs files for my classes.
I was expecting a special catkin directive but I had to look on CMake side.
I hope this will help someone else.

Originally posted by Fred Praca with karma: 16 on 2016-04-28
This answer was ACCEPTED on the original site
Post score: 0

