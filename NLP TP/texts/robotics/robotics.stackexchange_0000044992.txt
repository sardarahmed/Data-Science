Q:

Turtlebot with roomba 780. Error message: [Distance, angle displacement too big, invalid readings from robot. Distance: 1.84, Angle: -21.02]

I am trying to run a roomba 780 but get an error message.
[Distance, angle displacement too big, invalid readings from robot. Distance: 1.84, Angle: -21.02]. Please check that the Create is powered on and that the connector is plugged into the Create.
The launch file I am using is:
<launch>
  <node name="turtlebot_node" type="turtlebot_node.py" pkg="turtlebot_node">
    <rosparam>
      port: /dev/ttyUSB0
      publish_tf: True
      robot_type: roomba
      has_gyro: False
    </rosparam>
  </node>
</launch>

After running the roomba launch file i get the following error message below. Also when I run this launch file I can see that I actually am communicating with my roomba as the roomba turns of, and will not start again until i lift it of the floor. It is as it goes into some kind of protection mode?! I use a irobot usb to din cable.
turtlebot@turtlebot:~$ roslaunch rob.launch
... logging to /home/turtlebot/.ros/log/bc774c0e-15f0-11e2-99a6-00215c5e4e7b/roslaunch-turtlebot-4549.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://turtlebot:53600/

SUMMARY
========

PARAMETERS
 * /rosdistro
 * /rosversion
 * /turtlebot_node/has_gyro
 * /turtlebot_node/port
 * /turtlebot_node/publish_tf
 * /turtlebot_node/robot_type

NODES
  /
    turtlebot_node (turtlebot_node/turtlebot_node.py)

auto-starting new master
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[master]: started with pid [4566]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to bc774c0e-15f0-11e2-99a6-00215c5e4e7b
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[rosout-1]: started with pid [4580]
started core service [/rosout]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[turtlebot_node-2]: started with pid [4592]
/opt/ros/fuerte/stacks/turtlebot/turtlebot_node/nodes/turtlebot_node.py:54: UserWarning: roslib.rosenv is deprecated, please use rospkg or rosgraph.rosenv
  import roslib.rosenv
[ERROR] [WallTime: 1350213455.602533] Failed to contact device with error: [Distance, angle displacement too big, invalid readings from robot. Distance: 1.84, Angle: -21.02]. Please check that the Create is powered on and that the connector is plugged into the Create.
[ERROR] [WallTime: 1350213462.009986] Failed to contact device with error: [Distance, angle displacement too big, invalid readings from robot. Distance: 1.84, Angle: -21.02]. Please check that the Create is powered on and that the connector is plugged into the Create.
^C[turtlebot_node-2] killing on exit
[rosout-1] killing on exit
[master] killing on exit
shutting down processing monitor...
... shutting down processing monitor complete
done

I know that the 780 should use  a baud rate of 115200 which is the same as for the 500 models.
Anyone seen this error with the angle message before?
Thanks

Originally posted by krst on ROS Answers with karma: 11 on 2012-10-16
Post score: 0

Original comments
Comment by krst on 2012-10-17:
Well i am not sure if i understand that answer. Or is that a spam answer?
Comment by krst on 2012-10-17:
Well i am not sure if i understand that answer. Or is that a spam answer?
Comment by Lorenz on 2012-10-17:
Probably it was spam. Deleting it...
Comment by krst on 2012-10-17:
Yes I will try to do that. I have from some other forums that the communication should be similar, but then still similar is not exactly as being the same! The information is not really open as I have seen it but maybe Irobot will want to shear it. I will post it then here. I also have made a kinect mod so you can use it from one usb cable withouth a power adapter (found from another forum) so hope i can contribute something back also : -)

A:

The problem is probably that the communication protocol of the roomba 780 is slightly different from the 500 series. You will have to debug the problems manually. I would first try to get the protocol specifications of the 500 series and the 780 from iRobot and compare them. Then you might need to patch the turtlebot node to add support for your robot. Patches are of course welcome.

Originally posted by Lorenz with karma: 22731 on 2012-10-17
This answer was ACCEPTED on the original site
Post score: 0

