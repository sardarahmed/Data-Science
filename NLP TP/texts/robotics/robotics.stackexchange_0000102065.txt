Q:

Creation of debian installer from source for custom package

Greetings,
I am trying to create the debian package installer for release process of our custom packages. I am able to create the .deb packages and install them. rospack find <pkg_name> is able to find it in /opt/ros/noetic/share/<pkg_name>. I can see all the custom message files and source headers are present as well. However, the launch files, param files, and even the compiled binary is not found. Neither I am able to use roslaunch or rosrun to run the package.
To create the deb installer I have followed the steps as mentioned below

bloom-generate rosdebian --ros-distro noetic #ran in the folder containig package.xml
fakeroot debian/rules binary #created the .deb installer one level up

Ros-distro: Noetic
OS: Ubuntu 20.04
Please let me know what step was missed.

Originally posted by shouvik1984 on ROS Answers with karma: 28 on 2022-07-04
Post score: 0

A:

I was able to fix it by adding the following lines in the CMakeList.txt
install(TARGETS ${PROJECT_NAME}_node
  RUNTIME DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION}
)

## Mark libraries for installation
## See http://docs.ros.org/melodic/api/catkin/html/howto/format1/building_libraries.html
install(TARGETS ${PROJECT_NAME}
  ARCHIVE DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
  LIBRARY DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
  RUNTIME DESTINATION ${CATKIN_GLOBAL_BIN_DESTINATION}
)

## Mark cpp header files for installation
install(DIRECTORY include/${PROJECT_NAME}/
  DESTINATION ${CATKIN_PACKAGE_INCLUDE_DESTINATION}
  FILES_MATCHING PATTERN "*.h"
  PATTERN ".svn" EXCLUDE
)

## Mark other files for installation (e.g. launch and bag files, etc.)
install(DIRECTORY launch/ 
  # myfile1
  # myfile2
  DESTINATION ${CATKIN_PACKAGE_SHARE_DESTINATION}/launch
)

## Mark other files for installation (e.g. launch and bag files, etc.)
install(DIRECTORY param/ 
  # myfile1
  # myfile2
  DESTINATION ${CATKIN_PACKAGE_SHARE_DESTINATION}/param
)

Originally posted by shouvik1984 with karma: 28 on 2022-07-06
This answer was ACCEPTED on the original site
Post score: 0

