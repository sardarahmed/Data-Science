Q:

how to create a patch

Hi
I'm working with gazebo simulator and I developed some new stuff (sensors) that i would like to share, what is the normal procedure to do that?
To share my package, have I to send my entire gazebo package (with my modifications)? or, should I do something like:
diff -rupN original/ new/ > original.patch
And send only the patch-file?
I ask this because i want to try it in other PC before share it with the whole community.

Originally posted by jrcapriles on ROS Answers with karma: 370 on 2011-09-05
Post score: 3

A:

While @Lorenz makes a good point about creating new packages, there are sometimes good reasons to produce patches for an existing package.
The best solution is to check out a development version of the desired package, then use the diff tool for the relevant version control system (i.e. svn diff, hg diff, or git diff). That produces a patch that is easy for the maintainers to apply.
Using the gazebo_plugins package for an example, we first locate the development repository. You can look it up on the package wiki page, or use roslocate:
$ roslocate info gazebo_plugins
- svn:
    local-name: gazebo_plugins
    uri: https://code.ros.org/svn/ros-pkg/stacks/simulator_gazebo/trunk/gazebo_plugins

Note that this is a package (roslocate type gazebo_plugins prints package). I recommend checking out the containing stack and not just one package. The stack is the ROS unit of installation, and packages may depend on other packages within the stack.
In this example the containing stack is simulator_gazebo:
$ roslocate info simulator_gazebo > ~/gazebo.rosinstall
$ rosinstall ~/ros ~/gazebo.rosinstall /opt/ros/electric/.rosinstall
$ source ~/ros/setup.bash
$ roscd gazebo_plugins

Test that the downloaded version works unmodified. Then, make your changes and test them.
To produce a patch:
$ roscd gazebo_plugins
$ svn diff > ~/my_gazebo_plugins.diff

If your patch fixes a bug or implements a generally useful extension to the package, open a defect or enhancement ticket for the containing stack, adding your patch as an attachment.

Originally posted by joq with karma: 25443 on 2011-09-05
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by Lorenz on 2011-09-05:
Normally, you create patches to contribute bug-fixes or extensions back to the original authors of a package. In that case, the easiest way to get a patch is to use the corresponding functionality of your VCS. For instance, if you want a patch for your changes in package foo, do: roscd foo; svn diff
Comment by jrcapriles on 2011-09-05:
Hi joq, Thanks for your answer! It would be nice a detailed example, i used the diff tool but i'm not expert on it! The example would be really useful Thanks for your time!

