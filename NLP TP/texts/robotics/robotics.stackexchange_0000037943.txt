Q:

Transform PoseWithCovariance

Is there any funcionality in the tf library which allows transforming PoseWithCovariance msgs to a different frame? It should consider not just the pose transformation but also the covariance eigen vectors rotation.

Originally posted by Pablo Iñigo Blasco on ROS Answers with karma: 2982 on 2012-02-15
Post score: 7

Original comments
Comment by Pablo Iñigo Blasco on 2012-02-17:
I talk a bit more about this problem in this post of my blog: http://geus.wordpress.com/2012/02/17/cambiando-el-marco-de-referencia-de-una-distribucion-gaussiana/ . I'm sorry it is in spanish but It may be useful for some people.
Comment by TomTUM on 2012-03-15:
You might want to read into "S. Su and C. Lee, “Manipulation and propagation of uncertainty and
verification of applicability of actions in assembly tasks,” Systems,
Man and Cybernetics, IEEE Transactions on, vol. 22, no. 6, pp. 1376–
1389, 1992."

A:

Hi Pablo,
The new package pose_cov_ops in the mrpt_common stack does exactly what you're looking for.
It includes pose (direct and inverse) composition with a rigorous treatment of uncertainty, even when it's given as a 6x6 covariance matrix in yaw-pitch-roll, which is much harder to implement than e.g. as a 7x7 with unit quaternion representation.
The package is actually a wrapper of functionality in the lib mrpt-base, which has dozens of unit tests regarding uncertainty transformations so it should be quite reliable. Much more of mrpt-base functionality is expected to be wrapped in the future.
Check the package wiki for references to a technical report explaining all the internal equations.
Cheers.

Originally posted by Jose Luis Blanco with karma: 288 on 2012-03-25
This answer was ACCEPTED on the original site
Post score: 8

Original comments
Comment by Pablo Iñigo Blasco on 2012-03-26:
This is a really really interesting package. AFAIK ROS lacked of this functionality. Neither TF, KDL, Bullet nor BFL provide this functionality. Specially interesting is the case of changing a pose to an uncertain frame.
Comment by Pablo Iñigo Blasco on 2012-03-26:
In fact I would like to see TF system based of this uncertainty handling. I think this would be a much more powerful system allowing even a transformation graph instead of a transformation tree thanks to the possibility of a bayesian fussion of two estimation of the same frame.
Comment by Jose Luis Blanco on 2012-03-29:
Pablo: Building a transformation tree is "easy", given you correctly handle covariance transformations. But graphs, which may have loops, are much harder! They become in fact an entire new problem on its own: graph-slam ;-)
Comment by Pino on 2013-07-19:
I can't seem to find a git link to download either pose_cov_ops or mrpt_common. Are there any instalation instructions I'm not aware of?
Comment by Jose Luis Blanco on 2013-07-19:
Instructions can be found here: https://code.google.com/p/mrpt-ros-pkg/

