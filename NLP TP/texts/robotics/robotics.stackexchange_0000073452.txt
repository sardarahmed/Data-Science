Q:

costmap not cleared after executing all recovery behaviors

Hi everyone,
i have a problem with clearing my costmap.
First the robot is seeing an obstacle (for example a door, which will be closed infront of him) and then the robot is driving out of distance of the obstacle, but if the robot wants to reenter the room with the closed door opened again it can't plan a new way. Even after executing all recovery behaviors.
Here is a screenshot of my problem:
image description http://abload.de/img/error-clearing-obstacfmjx1.png
thank you in advance for your help.

Originally posted by tobi93 on ROS Answers with karma: 21 on 2016-04-21
Post score: 2

A:

I guess you are using the default move_base configuration, that only calls conservative clear costmap that cleans costmaps only further than 3 meter from your robot. You can also include the aggressive version, that clears costmaps from 0 meters (so full costmaps). Add something like this to your move_base.yaml:
recovery_behaviors:
  - name: 'conservative_reset'
    type: 'clear_costmap_recovery/ClearCostmapRecovery'
  - name: 'aggressive_reset'
    type: 'clear_costmap_recovery/ClearCostmapRecovery'

conservative_reset:
  reset_distance: 3.0

aggressive_reset:
  reset_distance: 0.0

But I don't think this will work neither, because the lower door is farther than 3 meters from the robot and still not cleared!
What will surely work is to call clear_costmaps move_base's service, that will reset both local and global costmaps.

Originally posted by jorge with karma: 2284 on 2016-04-21
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by tobi93 on 2016-04-22:
hey,
i tried the aggressive_reset, but it's like you said. It doesn't cleared the obstacle.
After calling the clear_costmap service every obstacle is now cleared from the costmap. The problem is, that the robot plans now a new trajectories through walls, because the walls will be cleared, too.
Comment by jorge on 2016-04-22:
yes... I also noticed that! I think is a  regression on costmap code. A simple workaround is to set first_map_only as true on costmap configuration.

