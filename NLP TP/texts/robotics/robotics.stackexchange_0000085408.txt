Q:

transformation the laser scan data with robot pose?

hello guys, I want to simulate the bag data that I got from ROS in MATLAB. I separated the pose and range data from the bag file. and I wrote a script to plot the laser data and build a map (I assumed that my poses are correct). when I run my code, It works well, till the robot turns!. at that point, the scan data turns in the opposite direction! till the robot gets straight again. and again when the robot turns again I experience the same problem till the robot gets straight. I don't know whats wrong!!...the transformation I used works well except when the robot turn!!

Originally posted by fereydoon on ROS Answers with karma: 11 on 2018-02-19
Post score: 0

A:

Sounds like you did some mix-up when computing rotation (hard to say exactly how without seeing code). Also sounds like this could fixed easily (and hackily ;) ) be fixed by multiplying the angle with -1 before you forward it to your transform computation. I'd certainly recommend to try and understand where the flipped rotation comes from in your code, though.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2018-02-20
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by fereydoon on 2018-02-20:
I figured my problem is related to synchronization and I match the wrong pose to the scan data. after some research I found that I should use the \tf data but I dont know how to use them. do you have any idea how to get the robot pose at the time of sensor reading?
Comment by Stefan Kohlbrecher on 2018-02-20:
The tf tutorials (http://wiki.ros.org/tf/Tutorials/tf%20and%20Time%20%28C%2B%2B%29) should be helpful. You basically do a query to tf using sensor_data.header.stamp as the timestamp.
Comment by fereydoon on 2018-02-21:
Stefan Kohlbrecher
thank you for replying to me
I will test this and comment back later.
Comment by xikui1231 on 2018-05-28:
Hi. Have you solved this problem? I am also troubled with it. Do you have idea about how to get the robot pose at the time of sensor reading ?

