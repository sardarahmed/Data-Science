Q:

Set the initial pose with rviz

Hi everyone! I got a problem when I run the navigation stack with rviz. When setting the initial pose with rivz I got a warning :
[ WARN] [1302846487.971832409]: Failed to transform initial pose in time (You requested a transform that is 0.054 miliseconds in the past, 
but the most recent transform in the tf buffer is 21.216 miliseconds old.
 When trying to transform between /map and /base_link.)

[ INFO] [1302846487.971997932]: Setting pose (1302846487.971978): 1.194 6.348 -1.571
Here  is the results of the run tf tf_monitor command:

RESULTS: for all Frames

Frames:
Frame: /base_link published by /we_base_odom Average Delay: 0.00026288 Max Delay: 0.000908351
Frame: /laser_link published by /base_laser_tf Average Delay: -0.024749 Max Delay: 0
Frame: /odom published by /amcl Average Delay: -0.175799 Max Delay: 0

All Broadcasters:
Node: /amcl 13.3557 Hz, Average Delay: -0.175799 Max Delay: 0
Node: /base_laser_tf 39.866 Hz, Average Delay: -0.024749 Max Delay: 0
Node: /we_base_odom 49.9598 Hz, Average Delay: 0.00026288 Max Delay: 0.000908351

I run the rostopic echo /initialpose command, and I got the following outputs when I set the initial pose:

header: 
  seq: 2
  stamp: 
    secs: 0
    nsecs: 0
  frame_id: /map
pose: 
  pose: 
    position: 
      x: 1.19398033619
      y: 6.34785318375
      z: 0.0
    orientation: 
      x: 0.0
      y: 0.0
      z: -0.707106781187
      w: 0.707106781187
  covariance: [0.25, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.25, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.06853891945200942, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
  
my tf tree is like: this /map->/odom->/base_link->/laser_link.
Here is the frame.pdf:
image description http://home.ustc.edu.cn/%7Eustccm/frame.png
How can I fix this problem?
Thank you !

Originally posted by Charles on ROS Answers with karma: 21 on 2011-04-14
Post score: 1

Original comments
Comment by mmwise on 2011-06-09:
I'm guessing you're running rviz on a separate machine from your robot and their clocks are out of sync with each other. To solve this you need to run ntpdate on your robot and desktop machine so that they are synced

A:

Below are some quick instructions fro clock synchronization. chrony has been found to be the best ntp client over lossy wireless.

manually sync NTP
sudo ntpdate ntp.ubuntu.com

Install Chrony
sudo apt-get install chrony

Originally posted by mmwise with karma: 8372 on 2011-06-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by mmwise on 2011-06-16:
did syncing work for you?

