Q:

How can a Vector3 axis be used to produce a Quaternion?

Hi everyone!
I'm extracting a cylinder using PCL and the Kinect as shown in this tutorial:
http://pointclouds.org/documentation/tutorials/cylinder_segmentation.php#cylinder-segmentation
One of the characteristics of the cylinder that the algorithm provides me with is its axis. In order to show it in rviz as a Marker however I need to convert this Vector3<x, y, z> into a Quaternion<x, y, z, w>.
I am aware that both things cannot hold the same information, I am trying to calculate the look at quaternion given to me by the vector that represents the axis of the cylinder that provides me a direction and not a rotation. How do I do that?
Thanks!

Originally posted by Gon√ßalo Cabrita on ROS Answers with karma: 591 on 2012-04-02
Post score: 3

A:

A quaternion represents a relative difference in orientation rather than an orientation itself. Rviz displays that difference by applying the quaternion to the canonical axes.
To "convert" an axis to a quaternion you need to create a convention for what the default axis should be and producing a quaternion that represents the rotation from one to the other.  Eigen::Quaternion<d or f>::setFromTwoVectors will do this do this for you. This leaves out one piece of the orientation which is the rotation about the source/destination vector, but you don't care about this since a cylinder is axially symmetric.
TL;DR: use Eigen::Quaternion<d or f>::setFromTwoVectors

Originally posted by Asomerville with karma: 2743 on 2012-04-02
This answer was ACCEPTED on the original site
Post score: 7

