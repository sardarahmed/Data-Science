Q:

Problems with my robot and rtabmap

Hello everyone, after a month of trying to solve some issues , I haven`t got any lucky.  That is why I am turning to this forum to see if someone can help me with it . Here is my problem in context:
I have designed a robot in which I use a jetson nano, Arduino mMega 2560, IMU- MPU6050, Intel Realsense D435, T256, ydlidar X4 and ROS Melodic.
Problem 1
When I try to integrate the ros rtabmap package the figure shows how rviz represents the point cloud.

I have tried to apply a transformation to the cameras to rotate the point cloud and display it correctly:
Position and orientation of the D435 camera within the URDF:
xyz = -0.047515, -0.0065262, 0.64317
rpy = -1.5708, 0, -1.5708
Position and orientation of the T265 camera within the URDF:
xyz = -0.035015, -0.0065262, 0.58873
rpy = 1.5708, 0, 1.5708

node pkg="tf"
type="static_transform_publisher"
name="camera_link_to_t265_link"
args="-0.047515, -0.0065262, 0.64317
-1.5708, 0, -1.5708 /t265_link /odom/sample 100"
node pkg="tf"
type="static_transform_publisher"
name="camera_link_to_d435_link"
args="-0.047515, -0.0065262, 0.64317
-1.5708, 0, -1.5708 /d435_link /color/image_raw 100"

Problem 2
When I try to do 2D navigation, ros returns these errors and warnings and I don't know how to fix it:
[ERROR] [1616447739.443209583]: The goal pose passed to this planner must be in the map frame.  It is instead in the base_link frame.

[ WARN] [1616447739.443272106]: Failed to transform the goal pose from base_link into the map frame: Lookup would require extrapolation into the future.  Requested time 1616447739.441912138 but the latest data is at time 1616447739.359707971, when looking up transform from frame [base_link] to frame [map]

[ERROR] [1616447739.443394782]: The goal pose passed to this planner must be in the map frame.  It is instead in the base_link frame.

[ERROR] [1616447739.443574767]: The goal pose passed to this planner must be in the map frame.  It is instead in the base_link frame.

Rqt Graph
Nodes Only

Nodes Topics

All Nodels

Thank you for your help.
jarain78

Originally posted by jarain78 on ROS Answers with karma: 9 on 2021-03-22
Post score: 0

Original comments
Comment by njit on 2021-12-30:
Hi @jarin78, What types of motors and motor controller you used in your project?

A:

For your first problem, you seem to have resolved it by adjusting the tf static_transform_publisher.
For the problem 2, the goal you are sending should be sent in map frame, you are sending it in base_link frame. Are you sending goals with RVIZ? make sure your global frame (in global options) is set to map.

Originally posted by matlabbe with karma: 6409 on 2021-05-02
This answer was ACCEPTED on the original site
Post score: 1

