Q:

how publish joint velocity command?

ROS MELODIC, GAZEBO 9
Hi, i'm working to set up a quadcopter simulation within gazebo. I have created the model and added 4 transmission element ( one for each motor ) and to control them i use the ros_control plugins. Thus, i have created a file.yaml in which i specify my controllers:
joint_motor_controller:
    type: velocity_controllers/JointGroupVelocityController
    joints: 
        - joint_front_right_prop
        - joint_front_left_prop
        - joint_back_left_prop
        - joint_back_right_prop
    gains:
        joint_front_right_prop: {p: 10000, i: 1, d: 1000}
        joint_front_left_prop: {p: 10000, i: 1, d: 1000}
        joint_back_left_prop: {p: 10000, i: 1, d: 1000}
        joint_back_right_prop: {p: 10000, i: 1, d: 1000}

the problem arise when i try to publish from a ros node the velocity. the publisher objects is :
ros::Publisher pub = n.advertise<std_msgs::Float64MultiArray("/drone/joint_motor_controller/command",4);

but when i run the node i get the node i get the following error in gazebo:
ERROR: dimension of command ( #) does not match number of joint (4).

any help??? thanks in advance.

Originally posted by FedeBO on ROS Answers with karma: 3 on 2021-03-19
Post score: 0

A:

The type of data you are publishing is a Float64 array but you are only sending a single value "4". Try publishing an array (values in square brackets). So maybe [4] instead of 4 if you are trying to send a single value

Originally posted by Akhil Kurup with karma: 459 on 2021-03-19
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by FedeBO on 2021-03-22:
Thanks for your answer, i have already fix it on my own. I was publishing a float64array without specifing the dimension. I simply use the resize() method :)))

