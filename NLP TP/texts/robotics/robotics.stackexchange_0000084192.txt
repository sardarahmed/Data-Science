Q:

Tf (only) not passing through distributed system

Hi all,
I have a Raspberry Pi running ROS and controlling a robot (my own code). It can run by itself using keyboard teleop or RC signals.
But, it can also run as part of a distributed system - a PC is running the master roscore, and the robot transmits everything to it through wifi. The PC does all the navigation stuff (amcl, move_base) and sends back the cmd_vel to the robot.
When I run the system, the master PC receives all the topics from the Pi but not the Tfs. When I use rqt_tf_tree or view_frames on the PC, I get a "no Tf data received" message, but when doing so on the Pi (which runs the broadcasting node) then I do see the odom -> base_footprint Tf that it sends.
Needless to say that it breaks the map->odom->base_foorprint->rest_of_robot tree that the system needs in order to function properly. Does anyone have any idea why something like this would happen?
Both computers are fully resolvable, having correct name and IP in the /etc/hosts file.
Many thanks, Steve

Originally posted by StevenCoral on ROS Answers with karma: 167 on 2017-12-02
Post score: 0

Original comments
Comment by Femer on 2017-12-03:
Hi, are you using a time synchronisation service between the two computers? I suggest you have a loook at  chrony
Comment by StevenCoral on 2017-12-04:
havent thought of that (i remember having timing troubles in the past). usually you get an rosError about that... ill check today.

A:

Sorry for jumping this again but I must update that I've found the answer.
Apparently my /etc/hosts was NOT configured correctly, and the hostname of the remote pc (Raspberry) was incorrect, but the master hostname was correct.
In case anyone wonders, such a state makes all the topics appear on list, but only the slave (with correct master hostname in /hosts file) could get data from the master, while the master (with wrong slave hostname on /hosts file) did not get anything back (it was my mistake also to think that only the tfs did not pass through).
I do not know what sparked the change, for I did not edit this file for a long time.
I thank everyone on this forum for helping out again and again, even if sometimes things fall through.
Keep doing an awesome job.
Steve

Originally posted by StevenCoral with karma: 167 on 2017-12-08
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by gvdhoorn on 2017-12-08:\

Sorry for jumping this again

no need to apologise. Getting back and reporting on what you found is very much appreciated.

