Q:

tf problem. scan samples always plotted wrt origin

Hello,
I'm trying to run gmapping over a pionner AT using rosaria and a hokuyo laser. Everything seems to work fine and I'm able to move the robot. However, when the robot acquires the laser measurements they are always plotted in rviz with respect to the origin of coordinates instead of the base_link. I apply some dynamic basic transformations  and check that the odometry is represented correctly.
The frame tree is the following: /laser -> base_laser -> base_link -> odom -> map as the basic tf tutorial explains
Do you have any idea about why the laser measurements are fixed with respect to the origin of coordinates while the base_link is moving? Are the transformations chained between them?

Originally posted by Ferherranz on ROS Answers with karma: 41 on 2013-01-29
Post score: 0

Original comments
Comment by Ben_S on 2013-01-29:
Please give us some more informations. Are the transformations base_link -> base_laser and base_laser -> laser static? And if not, who is responsible for publishing them? Where do your coordinatesystems appear in rviz if you turn them on? Maybe a screenshot of rviz and your tf-tree?

A:

I'm not sure what you mean by "plotted with respect to origin".
Are they absolute to the origin? Do they appear at the place in the map, where they actually belong (i.e. do they match the map)? In that case this is the correct and expected behaviour. If you want to see it differently, i.e. focused around the robot, set the Fixed Frame to /base_link.
Are all laser scans displayed at the origin while the robot moves (correctly)? In that case something is set up wrong, probably with tf. When setting the fixed frame to /laser the scans should stay centered (like in a pure laser viewer). With fixed frame to /odom, /map they should move. You can check how the tf information looks with the tf plugin.

Originally posted by dornhege with karma: 31395 on 2013-01-29
This answer was ACCEPTED on the original site
Post score: 0

