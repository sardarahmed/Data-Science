Q:

python service cannot return int32[]

Hi all,
I'm trying to create a package (in Python) which contains a service that returns int32[] named 'ids'. Unfortunately it throws two exceptions in two scenarios:

The Python's list contains 1 item. The exception:
"NameError: global name '_x' is not
defined:
The Python's list contains
more than 1 item. The exception: "Invalid number of
arguments, args should be ['ids']
args are(1, 2)"

Please help!
FindItems.srv:
string type
string xml_data
---
int32[] ids

service:
import rospy
from pengo_srvs.srv import *

def on_find_items(req):
      return [1, 2, 3]

if __name__ == '__main__':
    node_name = "knowledge_representation"
    rospy.init_node(node_name, anonymous=True)
    service = rospy.Service("kr/find_items", FindItems, on_find_items)

    rospy.spin()

client:
import rospy, os, time
from pengo_srvs.srv import *

if __name__ == '__main__':
    node_name = "knowledge_representation_test"
    rospy.init_node(node_name, anonymous=True)

    service_name = "kr/find_items"
    rospy.wait_for_service(service_name)
    findItemsProxy  = rospy.ServiceProxy(service_name,  FindItems)

    nodeIDs = findItemsProxy.call("Node", "cvc")

Regards,
Slava

Originally posted by Slava on ROS Answers with karma: 3 on 2016-02-24
Post score: 0

Original comments
Comment by yasagitov on 2016-02-24:
Please provide source code.
Comment by Slava on 2016-02-25:
Done. Thanks!

A:

In service script you should replace return [1,2,3] with return FindItemsResponse([1, 2, 3])
You should return appropriate types.

Originally posted by yasagitov with karma: 223 on 2016-02-25
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Slava on 2016-02-25:
@asagitov, thank you very much for help. I did not mention that in the documentation. Moreover I've tried to return several simple types and it worked w/o the wrapper!

