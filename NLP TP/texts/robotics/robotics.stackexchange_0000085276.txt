Q:

rviz: symbol lookup error

Fresh Ros Kinetic install on Ubuntu 16.04 (installed today). Try to launch RVIZ and get this error:
rviz: symbol lookup error: /opt/ros/kinetic/lib/librviz.so: undefined symbol:
_ZNK9QTreeView16viewportSizeHintEv

Things i've tried (that have not worked):

Rebooting
sudo apt dist-upgrade
googling this problem
Deleting, and remaking my catkin workspace.

Possibly relevant info:
This is a pretty standard installation of Ubuntu + ROS and the system install is pretty fresh as well. Only non-standard stuff I've done so far is I've installed nVidia video drivers to make a 1080 TI video card work and I've updated the kernel to version 4.15.2 to resolve a system clock drift issue with i9 processors.

Originally posted by rb on ROS Answers with karma: 130 on 2018-02-12
Post score: 2

Original comments
Comment by William on 2018-02-12:
It's missing a Qt symbol, is Qt installed and if so, what version?
Comment by William on 2018-02-12:
Also, did you install rviz from apt or did you build it from source? If not from source, what's in your catkin workspace that might affect rviz? Are you using any custom rviz plugins? Can you start rviz if you use the default configuration?
Comment by William on 2018-02-12:
I just tried it on my 16.04 machine (sudo apt update; sudo apt dist-upgrade) and rviz runs fine. You can run the default configuration with rviz -d /opt/ros/kinetic/share/rviz/default.rviz (assuming you installed from debs).
Comment by rb on 2018-02-13:
QT 4.8.7 and qt 5.5.1 are installed. Running with default configuration makes no difference, identical error (Since this is first time opening RViz it should be default config anyway)
Comment by William on 2018-02-13:
Perhaps it is picking up Qt4 instead of Qt5? I'm not sure why/how that would happen, but it could cause the symbol issues you're seeing.

A:

Problem solved. Turned out that rviz was grabbing the wrong QT dependencies from an unrelated program installed on the computer. Thanks William for tips of looking into QT.
Before:
$ ldd /opt/ros/kinetic/lib/librviz.so | grep Qt
    libQt5Widgets.so.5 => /opt/EVT/eCapture/QT/lib/libQt5Widgets.so.5 (0x00007fd0ad22c000)
    libQt5Gui.so.5 => /opt/EVT/eCapture/QT/lib/libQt5Gui.so.5 (0x00007fd0ab053000)
    libQt5Core.so.5 => /opt/EVT/eCapture/QT/lib/libQt5Core.so.5 (0x00007fd0aa9c9000)

Fix:
export LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu/:$LD_LIBRARY_PATH

After:
$ ldd /opt/ros/kinetic/lib/librviz.so | grep Qt
libQt5Widgets.so.5 => /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5 (0x00007ff360453000)
libQt5Gui.so.5 => /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5 (0x00007ff35e38a000)
libQt5Core.so.5 => /usr/lib/x86_64-linux-gnu/libQt5Core.so.5 (0x00007ff35deb4000)

Originally posted by rb with karma: 130 on 2018-02-13
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by utk50 on 2020-08-18:
Hi, I have ubuntu 18.04 and ros melodic running and I am facing the same issue.
When I execute:
ldd /opt/ros/melodic/lib/librviz.so | grep Qt

I am already getting
libQt5Widgets.so.5 => /usr/lib/x86_64-linux-gnu/libQt5Widgets.so.5 (0x00007f997c7a3000)
libQt5Gui.so.5 => /usr/lib/x86_64-linux-gnu/libQt5Gui.so.5 (0x00007f997a45a000) 
libQt5Core.so.5 => /usr/lib/x86_64-linux-gnu/libQt5Core.so.5 (0x00007f9979d0f000)

But I am still getting the symbol lookup error. Any suggestions?
Comment by ranjeet on 2021-01-31:
Did you find any solution yet?

