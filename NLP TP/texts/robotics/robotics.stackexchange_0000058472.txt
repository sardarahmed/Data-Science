Q:

Tutorial: Parse a urdf file

The question is: In which directory  am I supposed to be during the various steps ?
This question has confused me again and probably made me do some mistakes along the way.
I'm trying to follow the tutorial Parse a urdf file.
Below is a desription on how i guess where to be in the steps of the tutorial.
From the beginning of the tutorial:
$ cd ~/catkin_ws/src
$ catkin_create_pkg testbot_description urdf
$ cd testbot_description
$ mkdir urdf

(well, this is straight forward. Here we are placed in
~/catkin_ws/src/testbot_description        creating the subdirectory
~/catkin_ws/src/testbot_description/urdf  )

Next step:
cp /path/to/.../testbot_description/urdf/my_robot.urdf .

is a bit confusing since the file "my_robot.urdf"
created in the previous tutorial Create your own urdf file
was createde in a entirly different directory than indicated in the suggested command
since the directory:
 ~/catkin_ws/src/testbot_description/urdf

did not exist at all at the time.

Next step:
In the next step you are in directory
 ~/catkin_ws/src/testbot_description/urdf

Now you create a subdirectory "src"
> ~/catkin_ws/src/testbot_description/urdf/src
                                           ^^^
                                           ^^^

but you create parser.cpp when still being in:
> ~/catkin_ws/src/testbot_description/urdf
                                      ^^^^
                                      ^^^^
                                      ^^^^

but saving  parser.cpp into directory
~/catkin_ws/src/testbot_description/urdf/src

(here I think i made a mistake by saving    parser.cpp    into:
~/catkin_ws/src/testbot_description/urdf       I.E.   not into:
~/catkin_ws/src/testbot_description/urdf/src )

Next step
I'm quoting:

...First add the following lines to
your CMakeList.txt file: ...

This leads to the question:
which  "CMakeList.txt" ?
Just by following the general tutorial (and rosserial) I have:
~/ros/src/agitr/CMakeLists.txt
~/ros/src/CMakeLists.txt
~/catkin_ws/build/catkin_generated/metapackages/rosserial/CMakeLists.txt
~/catkin_ws/src/beginner_tutorials/CMakeLists.txt
~/catkin_ws/src/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial_embeddedlinux/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial_client/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial_msgs/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial_arduino/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial_xbee/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial_python/CMakeLists.txt
~/catkin_ws/src/rosserial/rosserial_server/CMakeLists.txt
~/catkin_ws/src/testbot_description/urdf/src/CMakeLists.txt
~/catkin_ws/src/testbot_description/CMakeLists.txt
~/ROStest/build/catkin_generated/metapackages/rosserial/CMakeLists.txt
~/ROStest/src/CMakeLists.txt
~/ROStest/src/rosserial/rosserial/CMakeLists.txt
~/ROStest/src/rosserial/rosserial_embeddedlinux/CMakeLists.txt
~/ROStest/src/rosserial/rosserial_client/CMakeLists.txt
~/ROStest/src/rosserial/rosserial_msgs/CMakeLists.txt
~/ROStest/src/rosserial/rosserial_arduino/CMakeLists.txt
~/ROStest/src/rosserial/rosserial_xbee/CMakeLists.txt
~/ROStest/src/rosserial/rosserial_python/CMakeLists.txt
~/ROStest/src/rosserial/rosserial_server/CMakeLists.txt

I guess it's either of these two:
~/catkin_ws/src/testbot_description/urdf/src/CMakeLists.txt
~/catkin_ws/src/testbot_description/CMakeLists.txt

Most probably
~/catkin_ws/src/testbot_description/CMakeLists.txt

since the other CMakeLists.txt has the following text
at the top:
   "#toplevel CMakeLists.txt for a catkin workspace"

Next step
I asume where still in directory:
~/catkin_ws/src/testbot_description/urdf

so running catkin_make yields as follows:
~/catkin_ws/src/testbot_description/urdf$ 
~/catkin_ws/src/testbot_description/urdf$ 
~/catkin_ws/src/testbot_description/urdf$ catkin_make

Base path:     ~/catkin_ws/src/testbot_description/urdf
Source space:  ~/catkin_ws/src/testbot_description/urdf/src
Build space:   ~/catkin_ws/src/testbot_description/urdf/build
Devel space:   ~/catkin_ws/src/testbot_description/urdf/devel
Install space: ~/catkin_ws/src/testbot_description/urdf/install
####
#### Running command: "make cmake_check_build_system" in "~/catkin_ws/src/testbot_description/urdf/build"
####
####
#### Running command: "make -j2 -l2" in "~/catkin_ws/src/testbot_description/urdf/build"
####
~/catkin_ws/src/testbot_description/urdf$ 
~/catkin_ws/src/testbot_description/urdf$ 

I guess that parser.cpp will be compiled into "parser"  but where ?
In my case it did not happen.  (find ~/ -name parser*  -print     only finds parser.cpp)

Next step:
So I guess the next stepp is no use to try at all,
at this point, well, until I get some clarification.
As always, I'm trying to:

Use the force,  read the source.

However it takes the learning process to slow motion ;)

Originally posted by ROSnewbie11 on ROS Answers with karma: 61 on 2014-04-04
Post score: 2

A:

The tutorials beyond the beginner tutorials might assume some basic knowledge about package layout, catkin usage, rosrun, etc. Therefore they might not be suited to blindly follow commands as common steps might be left out, although ideally they are. You would need this knowledge anyways to apply the solution to your package. Going through the fixes one by one should hopefully clear those things up.

The idea is to copy the URDF created before "whereever" to the new urdf directory you created, i.e. to ~/catkin_ws/src/testbot_description/urdf.
Sources are usually put in the src directory of a package, so you should end up with parser.cpp in  ~/catkin_ws/src/testbot_description/src and nothing else created anywhere.
The only CMakeLists.txt that makes sense is the one in your package. After all that's what you're working on. That would be ~/catkin_ws/src/testbot_description/CMakeLists.txt. The other one ~/catkin_ws/src/testbot_description/urdf/src/CMakeLists.txt should not be there at all. You might have generated that accidentally by calling catkin_make here.
catkin_make has to be called from the workspace root, i.e. from ~/catkin_ws/src/.
The binary being built will be called parser like the cmake target name, not parser.cpp. As there was nothing build, it's also not there yet. The canonical way to run this would be by calling rosrun <PKG> <NAME>. I don't know why the tutorial uses a fixed path like ./devel/....

Originally posted by dornhege with karma: 31395 on 2014-04-04
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by ROSnewbie11 on 2014-04-06:
Thanks a lot !
This was the information I wanted.
I'm trying to understand what I'm doing, not just blindly following the tutorial, just to be able to avoid getting stuck as you suggest.
This tutorial is marked as as a beginners level tutorial.

Got that.

So I guessed.

I think I have a general understanding of this from previous tutorials but as a newcommer you tend to follow the lead (at first), it might be some new trick or quirk thaugt.

I have that in the back of my head and I guess I have to read some more on the subject. But previous comment applies here to.

You can understand my confusion.

Textual communication is difficult.
Again, thank you for taking your time to answer.
Comment by ROSnewbie11 on 2014-04-07:
The command "catkin_make"   don't like to be run from "~/catkin_ws/src/"
but from ~/catkin_ws/.
In the file
"~/catkin_ws/src/testbot_description/CMakeLists.txt"
when the row:
"add_executable(parser src/parser.cpp)"
is changed to:
"add_executable(parser urdf/src/parser.cpp)"
catkin_make succeds and generate a file named
"./devel/lib/testbot_description/parser"
(run from ~/catkin_ws)
and the command
" ./devel/lib/testbot_description/parser ./src/testbot_description/urdf/my_robot.urdf
[ INFO] [1396869719.552512138]: Successfully parsed urdf file"
is happy.

