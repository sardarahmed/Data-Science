Q:

re-publishing data from multiple topics

I've written a node which takes data from node A via a topic, which uses custom messages, does some manipulation with it, then publishes it to another topic. However the node also listens to a topic from node B, which is not always active. I'm not sure how I go about getting the node to use data from node B when it is active, but using node A otherwise?
I've tried a few different ways and come across different issues. Firstly I was thinking of somehow being able to switch to listen to the higher priority topic B, when the node is initiated.
I also tried to play with some if statements in the callback, but realised the callback can only deal with 1 set of custom messages at once.
Note: this is using python

Originally posted by luke91 on ROS Answers with karma: 3 on 2013-04-13
Post score: 0

A:

A crude solution:

Keep track of when you last received a message from node B.

When a message arrives from node A, ignore it if the last node B message was more recent than some timeout threshold. Otherwise, handle it normally.

Originally posted by joq with karma: 25443 on 2013-04-15
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Ben_S on 2013-04-16:
+1 from me. Using some kind of timeout is the only solution i can think of for this problem. You may also read this answer regarding a somewhat similar question: http://answers.ros.org/question/59347/publishers-priority/#59357
Comment by joq on 2013-04-16:
Since your messages are custom, you could send a "good-bye" message from node B, after which the subscriber would switch back to handling node A messages immediately.
Comment by luke91 on 2013-04-17:
Cheers, guys. Yeah I was just thinking that joq, but I was thinking the opposite way around, i.e. node B has a "hello" message, or an "on" message that is sent with each data set. I'm not quite sure how to implement this though.
Comment by luke91 on 2013-04-17:
Edit: managed to work it out, think I've gone about it the long way but it works!

