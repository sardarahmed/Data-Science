Q:

question about the nodehandle for subscribing and publishing

Hello everyone,
I have created my own package (with catkin) in which I am subscribing and publishing to several topics. So far, for each topic (wheather for subcribing or publishing) I have created a seperate nodehandle and I was wondering if that is actually necessary or if something like this (basically just having one single nodehandle) is possible:
ros::NodeHandle nh_my_pkg("~");     
ros::Publisher publisher = nh_my_pkg.advertise<geometry_msgs::Twist>("/topic name", 1);
ros::Subscriber subscriber = nh_my_pkg.subscribe<geometry_msgs::Twist>("/topic name", 1, &my_class::callback_fct, this);

Thanks and have a nice day
Marcus

Originally posted by Marcus on ROS Answers with karma: 164 on 2014-11-09
Post score: 0

A:

Yes, reusing your NodeHandle instance is perfectly fine in general.
In your specific example though, you are creating a NodeHandle referencing the private namespace ("~") of the node, then start creating publishers and subscribers through it that publish and subscribe to topics that appear to be in the global namespace. I'm not sure, but that either won't work, or the node will try to find /topic_name in its private namespace, and fail.

Originally posted by gvdhoorn with karma: 86574 on 2014-11-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Marcus on 2014-11-10:
Thanks for the answer. Just to clarify tho, you would suggest to use:
ros::NodeHandle nh_my_pkg;

instead of:
ros::NodeHandle nh_my_pkg("~");   

correct?
Comment by gvdhoorn on 2014-11-10:
No: NodeHandles for parameters usually access a node's private namespace ("~"). Topics are normally in the global / relative namespace, so you'd need a second NodeHandle instance for that. The second one can then be re-used by your publishers / subscribers.

