Q:

Print a msg from a Turtlebot3 subscriber

Hey,
I am just trying to print a msg that is subscribed from the cmd_vel_rc100 message. Here is some of the code:
def moving(self):
        self.pub_cmd_vel = rospy.Publisher('cmd_vel', Twist, queue_size=5)
        while self.finish:
            vel_cmd = Twist()
            vel_cmd_received = Twist()
            vel_cmd.linear.x = 0
            self.pub_cmd_vel.publish(vel_cmd)
            vel_cmd_received = rospy.Subscriber('cmd_vel_rc100', Twist, queue_size=5)
            print vel_cmd_received
            self.finish = False

When I run the node, I see the following in the terminal for the cmd_vel_rc100:
<rospy.topics.Subscriber object at 0x7fd7a0436d50>

Normally, the node must be of type Twist(). My question is now, why donÂ´t I see the normal Twist message?
Thanks for your help!

Originally posted by Tima1995 on ROS Answers with karma: 17 on 2019-08-20
Post score: 0

A:

You need to use a different method to receive just a single message without a callback as you're trying to in your code. The rospy.wait_for_message() will do what you expect, blocking execution until a message is received and returning that message.
A rospy.Subscriber object is used when you want to register a callback function to receive messages whenever the arrive on a topic. You normally create it once when your node is created and destroy it when it closes. This is described in the tutorial here.
Hope this helps.

Originally posted by PeteBlackerThe3rd with karma: 9529 on 2019-08-20
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Tima1995 on 2019-08-21:
Worked well, thanks :)

