Q:

How to launch node if param equals true?

How would I start a node if a parameter equalled a given value? I'm thinking something like this pseudo code:
<launch>
    if my_param == true: // PSEUDO CODE - How to properly implement this logic?
         <node name="my_node" pkg="my_package" type="my_node" output="screen"/>
</launch>

Also, how would I do this using rosrun from the command line?

Originally posted by Py on ROS Answers with karma: 501 on 2021-04-13
Post score: 1

A:

I solved my problem using a bash script to keep checking until my_param changes to true to rosrun and kill the node when needed. This is as follows:
#!/bin/bash
rosparam set my_param false
while :
do
  node_name="/my_node"
  node_search=$(rosnode list | grep $node_name)
  if [ $(rosparam get my_param) == false ]
  then
    if [ "$node_search" == $node_name ]
    then
      rosnode kill $node_name
      fi
  else
    if ! [ "$node_search" == $node_name ]
    then
      rosrun my_package my_node
    fi
  fi
done

Originally posted by Py with karma: 501 on 2021-05-07
This answer was ACCEPTED on the original site
Post score: 0

