Q:

how to retrieve contact data from engine (NOT MESSAGE)!

how to retrieve contact data directly from physic engine (not in a message).
I tried to use the map structure but this function also use messages.
sensors::SensorPtr sensor = sensors::SensorManager::Instance()->GetSensor(this->model->GetLink("0")->GetSensorName(0));

sensors::ContactSensorPtr contactSensor = boost::dynamic_pointer_cast<sensors::ContactSensor>(sensor);

std::map<string, physics::Contact> contacts = contactSensor->GetContacts(this->contactSensor->GetCollisionName(0));

for (std::map<string, physics::Contact>::iterator iter = contacts.begin();iter != contacts.end(); ++iter)
{
       <<"count       " << iter->second.count <<endl
       <<"time        " << iter->second.time <<endl;
}           

The probleme with messages, it may miss some data. I want that each time I run the simulation I get the same data sequence, but this is not the case. For instance look at this curves; data in the first run are different from the second even if its the same simulation 

Originally posted by djou07 on Gazebo Answers with karma: 78 on 2016-09-22
Post score: 1

A:

The solution is to use ContactManager classe
physics::ContactManager *contactManager =
 this->model->GetWorld()->GetPhysicsEngine()->GetContactManager();

for(int i=0; i<contactManager->GetContactCount(); i++)
{
    physics::Contact *contact = contactManager->GetContact(i);
    cout << "contact between "<<contact->collision1->GetLink()->GetName()<<" and "
    << contact-> collision2-> GetLink()->GetName() <<endl;          
}

Originally posted by djou07 with karma: 78 on 2016-09-24
This answer was ACCEPTED on the original site
Post score: 1

