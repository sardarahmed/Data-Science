Q:

sending messages containing not predefined types

Hello everyone.
I took a look at how custom messages can be designed in ROS and I realized that they can just include fields of predefined types (for instance, integers and strings).
Instead, I have two active nodes needing to communicate with each other. One of them, produces a list of objects belonging to a class that I have defined. This list should be sent to the other node but I guess it's not possible using standard ROS messages.
Could you suggest a way to bypass the problem, maybe using possible definitions of ROS messages?
Thanks for help.

Originally posted by ubisum on ROS Answers with karma: 23 on 2012-12-13
Post score: 0

A:

Custom messages can contain other (custom and predefined) messages. That's a required and widely used feature in ROS.
Example:
Message MyCustomMessage in package foo:
string name
geometry_msgs/PoseStamped pose

Message ObjectList:
 foo/MyCustomMessage[] objects

Originally posted by Lorenz with karma: 22731 on 2012-12-13
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by ubisum on 2012-12-13:
hi, thanks for answer. just to be sure: you are telling me that I can have a field of superclass Object[] in my custom message?
It would be amazing. Why this possibility is not shown here: http://www.ros.org/wiki/msg ?
Comment by joq on 2012-12-13:
Not really a "superclass", more a "containment" relation. One message can contain fields defined by other messages. I agree that the wiki should explain it explicitly. Maybe open a defect ticket for the wiki.
Comment by dornhege on 2012-12-13:
Maybe Object was not the best choice for the example. You could replace object here by MyCustomMsgType.
Comment by ubisum on 2012-12-13:
ok, I knew about encapsulation of message. Anyway, I guess that the most encapsulated message in the hierarchy has to contain simple types listed in wiki guide. so, for trying to understand better, if I have an object List, where Node is a class defined by me, how should a message appear...
Comment by ubisum on 2012-12-13:
... to contain that list?
thanks for your support.
Comment by dornhege on 2012-12-13:
mypkg/Node[] nodes
Comment by ubisum on 2012-12-14:
ok.i created a message in a file:
int id
scan_node[] sc_nodes
odom_node[] od_nodes
i saved it as measurement.msg in my pachage's directory msg I uncommented rosbuild_genmsg() in CMakeLists file and I got this error:...
Comment by ubisum on 2012-12-14:
... IOError: [Errno 2] No such file or directory: '/home/ubisum/fuerte_workspace/beginner/msg/int.msg'
what happened?
Comment by dornhege on 2012-12-14:
There is not int message type. Please read the message docs: http://www.ros.org/wiki/msg
Comment by ubisum on 2012-12-14:
ok, thanks. I corrected the first line. now a new error:
IOError: [Errno 2] No such file or directory: '/home/ubisum/fuerte_workspace/beginner/msg/scan_node.msg'
how to make system find the classes/header defined in my src directory? I tried to specify a path, but it didn't work
Comment by ubisum on 2012-12-14:
... I got /home/ubisum/fuerte_workspace/beginner/scr/scan_node[] is not a legal message type
Comment by dornhege on 2012-12-14:
You need to define a scan_node message.
Comment by ubisum on 2012-12-14:
is it possible to define a list of messages as a field of a message?
Comment by dornhege on 2012-12-14:
Yes, just look at @Lorenz' answer.

