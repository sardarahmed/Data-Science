Q:

Using robot_localization with correct frames

Right now I'm using viso2_ros to get a set of odometry information. Viso2 publishes in the odom frame such that my rover moves in the z direction. My IMU+GPS system publishes in the odom frame such that my rover moves in the x direction. How can I reconcile these two differences?

Originally posted by OwnageManFromLOL on ROS Answers with karma: 149 on 2018-03-24
Post score: 0

A:

That sounds like what I would expect based on this explanation in the viso2_ros wiki:

NOTE: The coordinate frame of the
camera is expected to be the optical
frame, which means x is pointing
right, y downwards and z from the
camera into the scene.

The wiki also explains:

To be able to calculate robot motion
based on camera motion, the
transformation from the camera frame
to the robot frame has to be known.

So you need to change the frame which your camera is outputting images on to be something other than odom (like /camera_link), and then you need to define the /camera_link to /base_link transform.

Originally posted by stevejp with karma: 929 on 2018-03-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by OwnageManFromLOL on 2018-03-26:
Hi stevejp, thanks for your comment. I figured out what my issue was. I had accidentally set use_sim_time to false in my launch files. As a result, viso2 did not read the tf tree that I was publishing.
Comment by jayess on 2018-06-16:
@OwnageManFromLOL can you please write that up as an answer?

