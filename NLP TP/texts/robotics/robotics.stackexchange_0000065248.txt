Q:

How to link C library in Cmake file?

I was using one ftdi library to communicate with robot, to run that piece of code i used to compile like
gcc -o demo demo.c -L. -lftd2xx -Wl,-rpath,/usr/local/lib
Now i am using this C library in ROS, then how to link that library with ROS, What should I change in CmakeLists.txt
and how to write that.

Originally posted by KDROS on ROS Answers with karma: 67 on 2015-01-19
Post score: 0

A:

Add the path to the library to target_link_libraries

Originally posted by BennyRe with karma: 2949 on 2015-01-19
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by KDROS on 2015-01-19:
Ok. Means like this target_link_libraries(odom ${catkin_LIBRARIES} /usr/local/lib),
Should I change include directory also?
Same problem is it possible to do in launch file?
What is env value? Is it same as target_link_libraries?
Comment by BennyRe on 2015-01-19:
/usr/local/lib should be automatically added by cmake. You only have to add your special libraries, in your case ltd2xx I guess.
A launch file has nothing to do with linking. The env value is documented here.
Comment by KDROS on 2015-01-19:
my library is ftd2xx and (-l) is option for library name. According to you it will search and path of that library automatically. is it?
Comment by DevonW on 2015-01-19:
target_link_libraries(odom ${catkin_LIBRARIES} ftd2xx) should work.
Comment by BennyRe on 2015-01-20:
Yes it searches automatically.
Comment by KDROS on 2015-01-20:
I tried that one but it is showing error.
  imu.cpp:(.text+0x5c3): undefined reference to 'FT_GetLibraryVersion'
imu.cpp:(.text+0x671): undefined reference to 'FT_Open'
imu.cpp:(.text+0x6d4): undefined reference to 'FT_SetBaudRate' 
How to write -rpath in CMakeLists.txt
Comment by BennyRe on 2015-01-20:
You don't need -rpath
Where did you put libftd2xx.so?
Did you write target_link_libraries(odom <path to libftd2xx.so> ${catkin_LIBRARIES})
Comment by KDROS on 2015-01-20:
@BennyRe I tried
target_link_libraries(odom /usr/local/lib/libftd2xx.a ${catkin_LIBRARIES})
target_link_libraries(odom ${catkin_LIBRARIES} ftd2xx)

and another combination too, still it is showing error
Comment by William on 2015-01-20:
@KDROS You should make sure to only do one of those at a time. Otherwise I would say their suggestions should be working.
Comment by KDROS on 2015-01-20:
@william I used one at a time, I am trying to say,none of them worked. What is the actual format?
Why it is showing error.

