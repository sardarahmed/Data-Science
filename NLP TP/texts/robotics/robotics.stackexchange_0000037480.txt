Q:

Service in ROSJAVA. How to start a ServiceServer

I have the problem of generating a service with ros java. I ended up with modifying the pubsub example. I read the javadoc and I ended at the node.newServiceServer part. I started to write my first service with empty request and empty response.
  ServiceServer<org.ros.message.std_msgs.Empty, org.ros.message.std_msgs.Empty> server = node.newServiceServer("callme",)

According to the javadoc, the params are

Type Parameters:
RequestType - type for the request
ResponseType - type for the response
Parameters:
serviceName - the name of the service
serviceType - the type of the service (e.g. "test_ros/AddTwoInts")
responseBuilder - called for every request to build a response

Now I am lost. What is the serviceType and what the responseBuilder??????
Can anyone complete my simple line if I want to have a simple service printing "hello world" if the service /callme is called? Thank you.

Originally posted by Markus Eich on ROS Answers with karma: 202 on 2012-02-01
Post score: 2

A:

The class names are all full qualified here, but you could of course import them so that it wouldn't be necessary (making the code more compact).
ServiceServer<org.ros.message.std_msgs.Empty, org.ros.message.std_msgs.Empty> server = node.newServiceServer(
    "callme", "std_srvs/Empty",
    new ServiceResponseBuilder<org.ros.service.std_srvs.Empty.Request, org.ros.service.std_srvs.Empty.Response>() {
      @Override
      public org.ros.service.std_srvs.Empty.Response build(org.ros.service.std_srvs.Empty.Request request) throws ServiceException {
        org.ros.service.std_srvs.Empty.Response response = new org.ros.service.std_srvs.Empty.Response();
        // ...
        return response;
      }
    };
});

Originally posted by damonkohler with karma: 3838 on 2012-02-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Markus Eich on 2012-02-13:
I imported org.ros.service.*. But the problem is that I cannot resolve org.ros.service.std_srvs.Empty.Response or org.ros.service.std_srvs.Empty.Response. How can I generate and import this messages? The only part I can find is org.ros.service.roscpp... but no ros.service.std_srvs. Any ideas?
Comment by damonkohler on 2012-02-20:
Did you add a dependency on std_srvs to your manifest.xml? After adding the dependency, you'll also need to run rosmake.
Comment by Markus Eich on 2012-02-21:
Yes, That solved the problem. Thanx,

