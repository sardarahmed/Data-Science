Q:

Best way to integrate ndarray into ros2

Hello, I have a numpy ndarray, and when I try and publish it, I get this error:
AssertionError: The 'data' field must be a set or sequence and each value of type 'float'
Searching around, I see references to numpy in ros1, and also in the ros2 ros2idl_generator_py, however the only way I can seem to publish the array is to convert to a python list, which is expensive. Given that a numpy array is a sequence, is there any way to avoid this conversion?
Thank you for your time!

Originally posted by alluring-mushroom on ROS Answers with karma: 35 on 2022-04-03
Post score: 1

A:

There have been some recent PRs on this topic that might give you some ideas:

https://github.com/ros2/common_interfaces/pull/175
https://github.com/ros2/geometry2/pull/507

Originally posted by aprotyas with karma: 456 on 2022-04-13
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by alluring-mushroom on 2022-05-05:
Hey , thank you for your reply, and sorry for my late one! There is a bit to unpack with these, and we we are still bound to Foxy. I am unsure how much is back ported, but I will see what options I have here. Again, thank you :D
Comment by waspinator on 2022-09-10:
did you end up finding a solution to publishing ndarrays without converting to a list?
Comment by alluring-mushroom on 2022-09-11:
@waspinator,
Sorry, my work pulled me away from this particular path, so I have yet to actually dive into this properly.
Goodluck with your future pursuits!

