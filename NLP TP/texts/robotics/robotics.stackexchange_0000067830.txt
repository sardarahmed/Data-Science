Q:

How to replace a robot in stage_ros

Hello,
Does anyone know how can I replace a robot (like teleport it), let's say to coordinates 0,0,0 while using stage simulator [Ros] ?
I tried publishing in various topics as /Odom or /base_ground_pose but neither worked.
Any solution possible in either terminal or by coding in ros.
Thanks !

Originally posted by Dayire on ROS Answers with karma: 23 on 2015-05-30
Post score: 0

A:

Hi,
it is currently not implemented in the stage_ros node. But it can be implemented rather easily using the stage API. (If you do, please make a pull request, I was planning to do something similar ;) ).
I already made a pull request for something similar, namely resetting the robots to their initial position when stage started:
https://github.com/ros-simulation/stage_ros/pull/19/files
You would need to implement a "MoveRobot" service or something similar, i.e. create a new service in which has the robot name/number and the target position and then move to corresponding robot.
This is the code snippet I used to replace the robots (the initial poses are saved at startup, see here):
StageNode::cb_reset_srv(std_srvs::Empty::Request& request, std_srvs::Empty::Response& response){       ROS_INFO("Resetting stage!"); 
for (size_t r = 0; r < this->positionmodels.size(); r++) {
    this->positionmodels[r]->SetPose(this->initial_poses[r]);
    this->positionmodels[r]->SetStall(false); }
return true; }

Originally posted by daenny with karma: 376 on 2015-06-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Dayire on 2015-06-01:
Thanks so much for this ! Is there since I miss time anyway of doing the same without using a service ? Like coding it directly in my program ? Thanks !
Comment by daenny on 2015-06-02:
As I said above, you need to change the stage_ros node itself, since it does not have this functionality implemented. Your code needs to be able to interact with the stage_ros node preferably by service calls (i.e. as i implemented the reset), which you then can use in your own program.
Comment by Dayire on 2015-06-02:
Alright, I'll try to do that. Thanks so much :)
Comment by piliboss on 2017-01-07:
Hello, i have used this service you created,but after i reset my robot position, the robot can't be navigated true, do you know why?

