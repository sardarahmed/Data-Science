Q:

Installing household_object_database on my local server

Hi,
I have been following the tutorial but when i run the launch file as given in the tutorial with my parameters, it gives the following error.
load_parameters: unable to set parameters (last param was [/database_pass=willow]): cannot marshal None unless allow_none is enabled
Traceback (most recent call last):
  File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/__init__.py", line 252, in main
    p.start()
  File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/parent.py", line 265, in start
    self.runner.launch()
  File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/launch.py", line 644, in launch
    self._setup()
  File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/launch.py", line 631, in _setup
    self._load_parameters()
  File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/launch.py", line 322, in _load_parameters
    r  = param_server_multi()
  File "/usr/lib/python2.7/xmlrpclib.py", line 997, in __call__
    return MultiCallIterator(self.__server.system.multicall(marshalled_list))
  File "/usr/lib/python2.7/xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1569, in __request
    allow_none=self.__allow_none)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1085, in dumps
    data = m.dumps(params)
  File "/usr/lib/python2.7/xmlrpclib.py", line 632, in dumps
    dump(v, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump
    f(self, value, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 714, in dump_array
    dump(v, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump
    f(self, value, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 735, in dump_struct
    dump(v, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump
    f(self, value, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 714, in dump_array
    dump(v, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 654, in __dump
    f(self, value, write)
  File "/usr/lib/python2.7/xmlrpclib.py", line 658, in dump_nil
    raise TypeError, "cannot marshal None unless allow_none is enabled"
TypeError: cannot marshal None unless allow_none is enabled

I don't have knowledge in python so can someone let me know what is the mistake done here.
Thanks,
Karthik

Below is the launch file i am using; its a copy of the same in the tutorial page except the package name where it finds the .yaml file
<launch>
  <!-- load database connection parameters -->
  <rosparam command="load" file="$(find object_detection_test)/config/my_server.yaml"/>

  <!-- start the database wrapper node -->
  <node pkg="household_objects_database" name="objects_database_node" type="objects_database_node" respawn="true" output="screen"/>

</launch>

My my_server.yaml file is as below, similar to the one in the tutorial
household_objects_database:
database_host: 10.2.36.233
database_port: 5432
database_user: willow
database_pass: ####
database_name: household_objects

household_objects is the database that i created in pgadmin3 and have following the instructions in link

Originally posted by karthik on ROS Answers with karma: 2831 on 2012-01-17
Post score: 0

Original comments
Comment by joq on 2012-01-18:
The 10.2.36.233 might parse as a floating point number with too many decimal points. Try "10.2.36.233", so it looks like a string.
Comment by karthik on 2012-01-17:
I have posted the .yaml file in my question. I don have any weird characters in any of the parameters
Comment by ahendrix on 2012-01-17:
Or possibly a typo in your yaml file. Can you post the yaml file you're using? (you may want to obscure passwords and such). Are there any weird characters in your password or other parameters?
Comment by karthik on 2012-01-17:
Hey thanks for the quick reply. I edited my question with the launch file.
Comment by ahendrix on 2012-01-17:
It looks like roslaunch is generating an error while trying to set parameters; possibly a typo in your launch file. Can you post the launch file you're using?

A:

Your yaml file is missing an indent for the database_* parameters that would indicate that they are children of household_objects_database; thus, the household_objects_database parameter itself is empty, and this is causing roslaunch to crash.
Adding an indent, as shown in the yaml file in the tutorial, should fix this.

Originally posted by ahendrix with karma: 47576 on 2012-01-18
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by karthik on 2012-01-18:
Wow wonderful catch!!! thanks alot :)

