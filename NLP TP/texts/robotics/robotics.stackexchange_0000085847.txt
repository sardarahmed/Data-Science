Q:

Failed to load planning library in MOVEIT motion planning

We are doing project on igus robot arm. We have developed URDF package from SW2URDF extension. After that we are trying to integrate it in moveit setup assistant and generated package for moveit_config.
But, we are facing some error as below while launching demo.launch file,
[ INFO] [1520952510.319394087]: waitForService: Service [/get_planning_scene] has not been advertised, waiting...
[ INFO] [1520952515.319986595]: Failed to call service get_planning_scene, have you launched move_group? at /tmp/binarydeb/ros-kinetic-moveit-ros-planning-0.9.11/planning_scene_monitor/src/planning_scene_monitor.cpp:486
[ INFO] [1520952534.691775951]: No active joints or end effectors found for group ''. Make sure you have defined an end effector in your SRDF file and that kinematics.yaml is loaded in this node's namespace.
[ INFO] [1520952534.711537925]: Constructing new MoveGroup connection for group 'igus_planning' in namespace ''
[ERROR] [1520952564.725922669]: Unable to connect to move_group action server 'move_group' within allotted time (30s)
[ INFO] [1520952564.728670183]: Constructing new MoveGroup connection for group 'igus_planning' in namespace ''
[ WARN] [1520952564.779985993]: Interactive marker 'EE:goal_l4' contains unnormalized quaternions. This warning will only be output once but may be true for others; enable DEBUG messages for ros.rviz.quaternions to see more details.

It is not showing planning library in moveit*rviz window under motion planning.
Packages for URDF and moveit_config package are in github link below.
https://github.com/npd26/igus
Anyone have idea about what should we do to get planning library?
ROS version : kinetic
Thankyou

Originally posted by nd on ROS Answers with karma: 80 on 2018-03-13
Post score: 0

A:

This has been experience when the URDF is highly detailed and takes a while to load such that certain node times out after a period of time. Does your URDF contain detailed meshes?

Originally posted by Levi-Armstrong with karma: 106 on 2018-03-13
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by nd on 2018-03-13:
we have 5 links so in total 5 meshes. you can see in github URDF package.
Comment by gvdhoorn on 2018-03-13:
@nnnnn: if you've exported from SolidWorks the STLs are most likely way too detailed. Try subsampling your meshes and see if that works.
For a quick test you could even comment all visual elements and see if things start working. If they do, it's the meshes.
Comment by nd on 2018-03-13:
ok, we will try and update here.
Comment by nd on 2018-03-14:
@gvdhoorn We tried by commenting all visual elements in urdf and generated moveit package but same error is showing while launching demo.launch file.
Comment by gvdhoorn on 2018-03-14:
Then it might be that something else is wrong/not working.
Subsampling meshes coming from SolidWorks is most likely a good idea anyway though. And creating separate collision meshes (with much lower face and vertex count) is also a good idea.
Comment by Levi-Armstrong on 2018-03-14:
If you run roslaunch igus_description display.launch does everything load in rviz?
Comment by Levi-Armstrong on 2018-03-14:
So I just clone your repository and tested things. Your models are to detailed (~25MB each) and the reason commenting out the visual did not work is because you are using the same model for visual and collision. I replace the meshes with boxes and everything works.
Comment by Levi-Armstrong on 2018-03-14:
I recommend decimating the models using Blender or Meshlab. If you required this level of detail you will need to break up the launch sequence yourself so you can wait for certain nodes to fully load before launching other nodes.
Comment by gvdhoorn on 2018-03-14:\

Your models are to detailed (~25MB each)

I cannot upvote this enough. 25MB per mesh is overkill. I just opened one and saw all nuts and bolts in there. That will definitely significantly impact performance.
Comment by nd on 2018-03-14:
Ok, now we realized that because of detailed meshes it takes around 5 minutes to completely load the planning library after taking two-three attempts to connect with move_group server. So after that everything is working properly.
Comment by nd on 2018-03-14:
But, according to your suggestions we will replace collision meshes with boxes and give you update.
Comment by gvdhoorn on 2018-03-14:
You don't need to use boxes. You can create convex hulls.
Comment by nd on 2018-03-15:
@gvdhoorn @Levi-Armstrong Thank you for your help. We have decimated our meshes using blender and it works very smooth. We can see now planning library without any error.
Comment by gvdhoorn on 2018-03-15:
If your issue is now resolved, then please tick the checkmark next to Levi's answer to mark this question as answered.

