Q:

how to separate channels of a topic of the type sensor_msgs/Image

Hi guys,
I'm new to ROS and struggling with understanding it so I would really appreciate your help. I have a node which publishes /ladybug_image with type sensor_msgs/Image but I need to extract the green channel of this topic. I looked at the ros documentation about sensor_msgs/Image. To me it sounds the uint8[] data contains the image data but I don't get how can I refer to each channel explicitly. Could you please help me how can I do that?

Originally posted by z.bagheri63 on ROS Answers with karma: 13 on 2015-02-09
Post score: 1

A:

hello,
the uint8[] data is the raw image data. inorder to have individual channel you need to know the image data is structured or unstructured. it means the it is RGB[pix1] RGB[pix2]....... or R[pix1] R[pix2].........G[pix1] G[pix2].........B[pix1] B[pix2].......... once u know which type it is using a incremental loop  (for loop) you can extract whatever you want. i can give you one eg i used for reconstruction of image in the subscriber node.
for(int i=(w-1);i>=0;i--)
{
    for(int j=(h-1);j>=0;j--)
    { 
        *(image(i,j)) = *(&img->data[count]);
        count++;
        *(image(i,j)+1) = *(&img->data[count]);
        count++;
        *(image(i,j)+2) = *(&img->data[count]);
        count++;
    }
}

here img is sensor_msgs::Image.
please tell me if its not clear.

Originally posted by Robot with karma: 180 on 2015-02-09
This answer was ACCEPTED on the original site
Post score: 1

