Q:

rosjava subscriber unreliable

I have a python node that publishes a latched topic, and a rosjava subscriber running on an android device. If I start the publisher first, the subscriber receives the latched message just fine. If I start the subscriber first, it doesn't receive any messages when I start the publisher.
This could be a problem in one of at least three places:

My code
IP selection in ros.android.util.MasterChooser, although I think I've corrected this. See: https://kforge.ros.org/appmanandroid/trac/ticket/26 for more details.
The publisherUpdate XMR-RPC callback mechanism

I suspect #3, but I'm having a hard time tracing through the rosjava codebase to find the problem.
My subscriber code:
protected void onNodeCreate(Node node) {
   super.onNodeCreate();
   client_sub = node.newSubscriber("pr2_wifi/client_status", 
         "pr2_network_management/WifiStatus", new MessageListener<WifiStatus>() {
            public void onNewMessage(WifiStatus arg0) {
               Log.i("PR2WifiActivity", "Got client state. SSID: " + arg0.ssid);
               Handler.sendMessage(mHandler.obtainMessage(CLIENT_MSG, arg0));
            }
         }
   );
}

Originally posted by ahendrix on ROS Answers with karma: 47576 on 2012-01-12
Post score: 0

Original comments
Comment by ahendrix on 2012-01-13:
I cleaned and rebuilt everything (rm -rf ~/.ros/rosjava ~/.m2) and can no longer reproduce this. I guess it's fixed?
Comment by ahendrix on 2012-01-13:
I've updated rosjava_core, rosjava_android, and appmanandroid to head (as of about 10am PST), and I'm still seeing the same problem.

A:

This doesn't appear to be a problem at head. It's possible there is a bug in the currently released version of rosjava. I've added a regression test which you can see here:
http://code.google.com/p/rosjava/source/browse/rosjava/src/test/java/org/ros/node/topic/TopicIntegrationTest.java#109

Originally posted by damonkohler with karma: 3838 on 2012-01-12
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by damonkohler on 2012-01-14:
I suppose it's possible, but it shouldn't matter. All those tests are integration style and use the network interface.
Comment by ahendrix on 2012-01-13:
Nice! It's always good to see more regression tests. Sadly, in my case the master and the publisher are running on a separate machine (the PR2) from the subscriber. Could this make a difference?

