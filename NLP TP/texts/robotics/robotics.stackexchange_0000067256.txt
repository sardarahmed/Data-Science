Q:

How do you use externally defined materials in a URDF.Xacro file?

How do you apply a material definition located in an external udrf.xacro file?
I have a materials.urdf.xacro file like:
<?xml version="1.0"?>
<robot>
  <material name="black">
    <color rgba="0.0 0.0 0.0 1.0"/>
  </material>
 
  <material name="blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
 
  <material name="green">
    <color rgba="0.0 0.8 0.0 1.0"/>
  </material>
 
  <material name="gray">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
 
  <material name="darkgray">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
 
  <material name="red">
    <color rgba="0.8 0.0 0.0 1.0"/>
  </material>
 
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
 
  <material name="yellow">
    <color rgba="0.8 0.8 0.0 1.0"/>
  </material>
</robot>

and I'm trying to include and use these materials like:
<?xml version="1.0"?>
<robot name="myrobot"
    xmlns:xacro="http://www.ros.org/wiki/xacro">
    <xacro:include filename="$(find myrobot_description)/urdf/materials.urdf.xacro" />
    <link name="torso">
        <visual>
            <geometry>
                <box size="1 1 1" />
            </geometry>
            <material name="red"/>
        </visual>
        <xacro:default_inertial mass="1"/>
    </link>
</robot>

However, when I run:
roslaunch urdf_tutorial xacrodisplay.launch model:='$(find myrobot_description)/urdf/myrobot.urdf.xacro'

Rviz renders the box as white and not red. Why is that?

Originally posted by Cerin on ROS Answers with karma: 940 on 2015-04-26
Post score: 2

A:

From the tutorial you see:
If a TF frame does not exist for a given URDF link, then it will be placed at the origin in white.

In your case, changing link name from "torso" to "base_link" should do the work.
UPDATE: @Dlu is right. Although torso might not be available in the fixed frame pulldown menu, you can manually type in torso.

Originally posted by 130s with karma: 10937 on 2015-04-26
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Cerin on 2015-04-26:
Unfortunately, that tutorial never explains what a "TF frame" is, so that note doesn't help.
Comment by Cerin on 2015-04-26:
Although I don't understand why, this fixes it. I wish there was a more intuitive solution though.
Comment by 130s on 2015-04-27:
Might be a good call: URDF tutorial requires you to have finished TF tutorials. I opened a ticket.

