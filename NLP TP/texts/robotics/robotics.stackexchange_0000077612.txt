Q:

Temporarily changing of joint limits in RobotState

I am calculating the IK for my robot setup using:
 robot_state::RobotState kinematicStateArm =  *m_arm.getCurrentState();
 foundIkForArm = kinematicStateArm.setFromIK(jointModelGroupArm, targetPose, 10, 0.05);
 kinematicStateArm.copyJointGroupPositions(jointModelGroupArm, jointValuesArm);

Now on certain occasions, I do have to restrict the joint limits in one of the joints further than required for the default case.
Is there any method that allows one to change the joint limits used within the RobotState IK framework?
I have seen that the
 moveit::core::JointModel   setVariableBounds()

Reference
allows one to modify the joint limits. However I do see no way of accessing this method from the RobotState API. Does anyone know of a method or way on how to approach my issue?

Originally posted by Florian_W on ROS Answers with karma: 15 on 2016-12-02
Post score: 0

A:

I found that by using the
 moveit_msgs::GetPositionIK

service, it is possible to specify individual moveit_msgs::JointConstraint . First tests yield promising results.

Originally posted by Florian_W with karma: 15 on 2016-12-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2016-12-02:
Yes, that service contains the same JointConstraint entry as the MotionPlanRequest that @rbbg mentioned. If you're only after single solutions, then this should work. For actual planning, the approach @rbbg describes could be used (but the constraints are the same).
Comment by Florian_W on 2016-12-03:
@gvdhoorn I only require the end-effector to be "in front" of the robot. Without limiting the joints the Ik solution derived by TRAC-IK is some weirdly looking "behind the shoulder" grasp. The planning procedure may actually utilize the full joint space. Are you aware of a more elegant solution ?

