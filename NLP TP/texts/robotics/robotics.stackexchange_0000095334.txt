Q:

Autoware ROSBAG Demo no points_map

Hello,
my problem is that I do not get the expected output if I follow the instructions for the rosbag demo (link), namely no /points_map is published by my_map.launch and also no tf between velodyne and base_link is present, thus also failing the detection.
Here the setup I am using:

Ubuntu 18.04 + ROS Meldoic [Host], AMD Ryzen 7 3800X, Nvidia RTX 2070 super
Docker (Version: 19.03.08) : autoware/autoware:latest-melodic-cuda

I uploaded a video of my steps: link.
Here are the commands I entered:
Host:
 mkdir -p ~/shared_dir   
 wget https://autoware-ai.s3.us-east-2.amazonaws.com/sample_moriyama_data.tar.gz  
 wget https://autoware-ai.s3.us-east-2.amazonaws.com/sample_moriyama_150324.tar.gz  
 tar zxfv sample_moriyama_150324.tar.gz     # also tried extracting in docker container
 tar zxfv sample_moriyama_data.tar.gz       # also tried extracting in docker container
 cd <path-to-autoware-docker-git>/generic && ./run.sh

Docker:
 mkdir -p ~/.autoware && cd ~/.autoware
 ln -s ~/shared_dir/data                             # also tried it with cp, made no difference
 ln -s ~/shared_dir/sample_moriyama_150324.bag       # also tried it with cp, made no difference
 roslaunch runttime_manager runtime_manager.launch   

After running  roslaunch I followed instructions of here / the video found here
Thank you for your help.

Originally posted by GeorgNo on ROS Answers with karma: 183 on 2020-04-07
Post score: 0

A:

See: https://github.com/Autoware-AI/documentation/pull/6

Originally posted by bfroemel with karma: 36 on 2020-08-17
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by GeorgNo on 2020-08-21:
Hey, I just pulled the docker image from hub and still have the same problem. Also changed the my_map.launch to match your commit.
Did you build autoware from source?
Thank you for your help
Comment by bfroemel on 2020-08-22:
Strange - replacing the my_map.launch file should be all it needs to get the rosbag demo working on the currently latest docker image (1.14.0). Could you verify your Autosar version:
git --git-dir=/home/autoware/Autoware/src/autoware/common/.git describe --tags

and that all files related to the demo are at the proper location (e.g., bin_Laser- pcd files in ~/.autoware/data/map/pointcloud_map)?
In the gnome-terminal window which pops up after launching the Autoware runtime manager you should see log messages regarding loading pcd files:
['roslaunch', '/home/autoware/Autoware/src/autoware/documentation/autoware_quickstart_examples/launch/rosbag_demo/my_map.launch']
pid=6999
sched policy=OTHER prio=0
load /home/autoware//.autoware/data/map/pointcloud_map/bin_Laser-00167_-00864.pcd
load /home/autoware//.autoware/data/map/pointcloud_map/bin_Laser-00153_-00852.pcd
load /home/autoware//.autoware/data/map/pointcloud_map/bin_Laser-00159_-00859.pcd

Comment by GeorgNo on 2020-08-23:
The default launchfile of 1.14.0 didn't work for me (checked the version with your command).
Needed to change it to your pr rebuild with
AUTOWARE_COMPILE_WITH_CUDA=1 colcon build --symlink-install --packages-select autoware_quickstart_examples --cmake-args -DCMAKE_BUILD_TYPE=Release and then fire everything up.
Now on the first start rviz won't show me the pcl, I always need to restart it.
Thanks for the help

