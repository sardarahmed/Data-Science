Q:

bloom-release fais: Aborting pull request: HTTP Error 401: Unauthorized

I've been seeing this for a few years IIRC and finally feeling like resolving.
bloom-release seems to be working fine except that it fails to open a PR on rosdistro github repo.
$ bloom-release --rosdistro melodic --track melodic scan_tools --edit
:
==> Checking on GitHub for a fork to make the pull request from...
Could not find a fork of ros/rosdistro on the 130s GitHub account.
Would you like to create one now?
Continue [Y/n]? 
Aborting pull request: HTTP Error 401: Unauthorized (https://api.github.com/repos/ros/rosdistro/forks)
The release of your packages was successful, but the pull request failed.
Please manually open a pull request by editing the file here: 'https://raw.githubusercontent.com/ros/rosdistro/master/melodic/distribution.yaml'
<== No pull request opened.

No idea what's wrong, nor what to look (other than looking into bloom's code, which I don't mind doing)
$ apt-cache policy python3-bloom
python3-bloom:
  Installed: 0.10.1-100
  Candidate: 0.10.1-100
  Version table:
 *** 0.10.1-100 500
        500 http://packages.ros.org/ros/ubuntu focal/main amd64 Packages
        500 http://packages.ros.org/ros/ubuntu focal/main i386 Packages

Part of my git config:
$ more ~/.gitconfig 
[core]
        editor = emacs -nw
[credential]
        helper = cache --timeout=14400
# Enforce SSH
##[url "ssh://git@github.com/"]
##  insteadOf = https://github.com/
# Always use ssh for github, even if the remote URL uses https or git
[url "git@github.com:"]
        insteadOf = git://github.com/
[url "git@github.com:"]
        insteadOf = https://github.com/
[fetch]
        prune = true
[url "git@gitlab.com:"]
        insteadOf = https://gitlab.com/

Another example (ros-drivers/rgbd_launch#48)

Originally posted by 130s on ROS Answers with karma: 10937 on 2021-02-15
Post score: 0

Original comments
Comment by gvdhoorn on 2021-02-15:
Is this ros-infrastructure/bloom#611 (or any of the others like it: ros-infrastructure/bloom#605 or ros-infrastructure/bloom#590)?
Comment by clalancette on 2021-02-23:
Do you have 2-factor authentication enabled on your account?
Comment by 130s on 2021-02-24:
Yes > MFA,

A:

For MFA, you have to setup bloom with an oauth token: http://wiki.ros.org/bloom/Tutorials/GithubManualAuthorization .  In short, besides the URL rewrites, you also need to add a file ~/.config/bloom that contains something like:
{"github_user": <your-user>, "oauth_token": <your-token>}

Originally posted by clalancette with karma: 256 on 2021-02-24
This answer was ACCEPTED on the original site
Post score: 3

