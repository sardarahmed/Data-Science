Q:

Reading a string from a node

def callback(data):
  w = data.String()

  brush_msg = UInt16()
  motor_msg = UInt16()
  if w=="frontwall":
   motor_msg.data=int(70)
   pub_motor0.publish(motor_msg)
  if w == "backwall":
   motor_msg.data = int(71)
   pub_motor0.publish(motor_msg)
  if w == "nowall":
   motor_msg.data = int(72)
   pub_motor0.publish(motor_msg)
if __name__ == '__main__':
rospy.init_node('auto_control', anonymous=True)
rospy.Subscriber("/waller", String, callback)
rospy.spin()

When I run this script this message appears on console:
w = data.String()
AttributeError: 'String' object has no attribute 'String'
https://answers.ros.org/question/278149/updating-the-values-of-a-while-loop-coming-from-another-node/
PeteBlacker solved the issue I had with regards the constant publishing and my missunderstanding of the issue. I'm trying to update the same script to publish the message in function of some string data published by an arduino by rosserial in the node "waller".
edit: Oh shit and I tried data.waller and waller.String and such... Same msg.

Originally posted by koboy on ROS Answers with karma: 5 on 2018-01-08
Post score: 0

A:

Hello again koboy, hopefully this one will be simple. If you look at the definition of the ros String message type here. It contains a single value with the type string and the identifier data.
So if I've got this right the value you want to assign to w is data.data not data.String() since it as the error shows it doesn't have a member named string.

Originally posted by PeteBlackerThe3rd with karma: 9529 on 2018-01-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by koboy on 2018-01-08:
And... You are right again. I checked that page and completely missed the point before. I checked the documentation on the joy.msg that I was using for the joystick control and I think I got the point now. You are being really helpful, thanks a lot :)

