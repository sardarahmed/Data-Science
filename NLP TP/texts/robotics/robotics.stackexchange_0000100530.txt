Q:

Change /clock rate in ROS 2 Gazebo

I'm trying to change the rate at which /clock is being published in ROS 2 gazebo, because 10 Hz is far too slow for my application. I found an article here that suggests I can set the parameter publish_rate to a number (in Hz as I understand it). The following, however, does not work for setting that parameter from my launch file.
Is this parameter just not exposed for some reason? Anybody have a suggestion for setting this?
gazebo = IncludeLaunchDescription(                                                                                                      
    PythonLaunchDescriptionSource([                                                                                                     
        os.path.join(                                                                                                                   
            get_package_share_directory('gazebo_ros'), 'launch'), '/gazebo.launch.py'                                                   
    ]),                                                                                                                                 
    launch_arguments={                                                                                                                  
        'gui': 'true',                                                                                                                  
        'publish_rate': '1000.0',                                                                                                       
    }.items(),                                                                                                                          
)  

Thanks,
--Hunter

Originally posted by allenh1 on ROS Answers with karma: 3055 on 2021-11-11
Post score: 0

A:

You can try as this link shows: https://github.com/robotlabor-education/robotwiki/wiki/[Simulation][Gazebo]-Gazebo-simulation-in-ROS-2
Create a file somewhere, for example /config/params.yaml, with the following parameters :
gazebo: 
    ros__parameters: 
        publish_rate: 100.0 

Then modify your launch file some like:
config_file_name = 'params.yaml' 

pkg_dir = get_package_share_directory('<your package name>') 

config = os.path.join(pkg_dir, 'config', config_file_name) 

gazebo = ExecuteProcess( 

cmd=['gazebo', '--verbose', world, '-s', 'libgazebo_ros_init.so',  

'-s', 'libgazebo_ros_factory.so', '--pause', '--ros-args', '--params-file', config], 

output='screen', 

) 

Don't forget to edit CMakeLists.txt.

Originally posted by muronglindong with karma: 46 on 2021-11-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by allenh1 on 2021-11-14:
Thanks, I actually patched this upstream.
https://github.com/ros-simulation/gazebo_ros_pkgs/pull/1332

