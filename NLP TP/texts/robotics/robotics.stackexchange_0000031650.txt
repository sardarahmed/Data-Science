Q:

ar_kinect not finding published point cloud data

Hello,
I'm trying to use ar_kinect (http://www.ros.org/wiki/ar_kinect) to report pose information of a fiducial, visual marker.
I'm taking the following steps to run ar_kinect:

Open terminal and run:  roscore
Open terminal and run the following to start Kinect:  roslaunch openni_camera openni_node.launch
Open terminal and run the following so Kinect will begin reporting information on /camera/rgb/camera_info (which is needed by ar_kinect):  rostopic hz /camera/rgb/image_mono
Open terminal and run:  roslaunch ar_kinect ar_kinect.launch

After doing so, everything seems to start up correctly until it tries to subscribe to image and point cloud topics, as follows:

...
[ INFO] [1305687387.974173489]: Subscribing to info topic
[ INFO] [1305687388.202442469]: Camera Parameter
SIZE = 640, 480
Distortion factor = 0.000000 0.000000 -0.000000 1.000000
525.00000 0.00000 319.50000 0.00000
0.00000 525.00000 239.50000 0.00000
0.00000 0.00000 1.00000 0.00000
[ INFO] [1305687388.202849855]: Opening Data File /home/lebowski/suijuris/ros_packages/diamondback/albany_vision/ar_kinect/data/objects_kinect
[ INFO] [1305687388.203131387]: About to load 1 Models
[ INFO] [1305687388.203323032]: Read in No.1
[ INFO] [1305687388.205963954]: Subscribing to image and cloud topics
header:
seq: 0
stamp: 0.000000000
frame_id:
points[]: 0
width: 0
height: 0
sensor_origin_: 0 0 0
sensor_orientation_: 0 0 0 1
is_dense: 1
-1.205960 -0.903880 2.478000
[ar_kinect-1] process has died [pid 21130, exit code -11].
log files: /home/lebowski/.ros/log/c3fd81c4-80f9-11e0-835e-001de075d661/ar_kinect-1*.log
all processes on machine have died, roslaunch will exit
shutting down processing monitor...
... shutting down processing monitor complete
done

Interestingly, it looks like it's picking up an empty point cloud based on the dump info shown above.  But if I open a terminal and run the following, I see plenty of Kinect data being published on both topics:
rostopic echo /camera/rgb/points
rostopic echo /camera/rgb/image_color
Any thoughts?
Thank you very much!
Billy McCafferty
http://www.sharprobotica.com/

Originally posted by Billy on ROS Answers with karma: 5 on 2011-05-17
Post score: 0

A:

OK, I've finally had time to sit down and work on this, and this issue should be fixed. In addition to testing on a real Kinect, I spent a bit of time doing some major speed up work. The newly committed version (r263) now does the following:

ignores empty clouds
subscribes only to the cloud -- uses pcl functions to create the image, which will fix issues with synchronization
no longer computes normals (which was slow), we now use PCL functions to estimate the transformation based on the corner points (which also appears to be more accurate than just computing the normal of the center).

Please let me know if you encounter any issues.

Originally posted by fergs with karma: 13902 on 2011-05-17
This answer was ACCEPTED on the original site
Post score: 1

