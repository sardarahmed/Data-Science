Q:

Unable to run gazebo 1.0.0 RC2

Hi there,
I have just installed Ubuntu and ROS and gazebo-1.0.0-RC2 but when I run the gzserver command this is what I get:
Gazebo multi-robot simulator, version 1.0.0-RC2
Copyright (C) 2011 Nate Koenig, John Hsu, Andrew Howard, and contributors.
Released under the Apache 2 License.
http://gazebosim.org

Warning: no world filename specified, using default world
Msg Waiting for master
Msg Connected to gazebo master @ http://localhost:11345
Segmentation fault

Is there any log or anything else where I can try and figure out what's causing the Segmentation fault?
Previous to this I was having problems, gzserver repeated this message several times:
Xlib: extension “GLX” missing on display “:0.0″. Insufficient GL support

I solved it by installing OpenGL... and that's when the Segfault appeared. So now I don't know if this introduced the current error or it has nothing to do.
Thanks for your time!
Miguel.

Update:
My Ubuntu installation died and I had to reinstall everything... Now I'm not getting any Xlib errors or segfaults, but instead this is what's happening:
Gazebo multi-robot simulator, version 1.0.0-RC2
Copyright (C) 2011 Nate Koenig, John Hsu, Andrew Howard, and contributors.
Released under the Apache 2 License.
http://gazebosim.org

Warning: no world filename specified, using default world
Msg Waiting for master
Msg Connected to gazebo master @ http://localhost:11345
Exception [RenderEngine.cc:473] unable to find rendering system

Error [Rendering.cc:37] Failed to load the Rendering engine subsystem
unable to find rendering system
Exception [RenderEngine.cc:473] unable to find rendering system

Exception [RenderEngine.cc:473] unable to find rendering system

Exception [Sensors.cc:38] Unable to load the rendering engine

terminate called after throwing an instance of 'gazebo::common::Exception'
Aborted

I'm going to investigate, but I wanted to post it here first.
Thanks again! Miguel.

Update 2:
I tried everything that I could think of, and I'm still getting those errors about the rendering system... Any ideas? :(
Thanks,
Miguel.

Originally posted by Capelare on ROS Answers with karma: 202 on 2012-02-08
Post score: 0

Original comments
Comment by Capelare on 2012-02-12:
(Weird... I accidentally double posted the comment and now I can't delete one without having the other deleted as well, so I'm editing this comment instead of deleting it. I think the problem is that the 6th comment is neither showed nor listed as "more comments").
Comment by Capelare on 2012-02-12:
BTW, I didn't understand very well what you said about the ros wrapped gazebo Hsu, because I don't have Fuerte installed (it's not listed as a requirement at gazebosim.org...). Right now I don't even have Electric or any other ros version!
Comment by Capelare on 2012-02-12:
I've updated the question after I've been forced to reinstall Ubuntu. Now I have a clean install of 11.10 with just the additional nVidia drivers and all the dependencies listed on the Requeriments page. And gazebo-1.0.0-RC2, of course.
Comment by hsu on 2012-02-09:
Can you make a backtrace?  There could be a problem in Fuerte that causes segfault with the ros wrapped gazebo.  Specifically when the plugin to get package paths is invoked (e.g. see https://code.ros.org/svn/ros-pkg/stacks/simulator_gazebo/trunk/gazebo/scripts/gazebo with the -p options).
Comment by Capelare on 2012-02-09:
For example, right now I am on a i5-650 @ 3.2GHz with 8GB of RAM and an ATI RV730 PRO (Radeon HD 4650)...
Comment by Capelare on 2012-02-09:
It's not that easy... Because I have Ubuntu 11.04 installed on a USB flash drive that I boot in different computers. And it doesn't work in any of the machines.
Comment by tfoote on 2012-02-08:
Can you please add a description of your computer hardware?
Comment by hsu on 2012-02-22:
can you post how you are starting gazebo?
Comment by Capelare on 2012-02-22:
Of course, I start gazebo by running 'gzserver', as indicated here: http://gazebosim.org/wiki/quick_start
Comment by hsu on 2012-02-22:
also, did you install using deb, tarball or mercurial?
Comment by Capelare on 2012-02-22:
I used the .deb file. Should I try otherwise? :\
Comment by hsu on 2012-02-22:
can you also post the output of 'glxinfo'?
Comment by Capelare on 2012-02-23:
Here you go: http://pastebin.com/bi8LUaiq
Comment by hsu on 2012-02-23:
safe to say glx is not an issue.  Please double check to make sure your OGRE_RESOURCE_PATH points to where the ogre libraries are installed?
Comment by Capelare on 2012-02-23:
Hi, I'm not right now at the computer I use for all of these testings (e.g. glxinfo says "X Error of failed request..." in this machine), but I thought it wouldn't matter for something as simple as checking if a system variable points to the right location... correct me if I'm wrong. That said...
Comment by Capelare on 2012-02-23:
OGRE_RESOURCE_PATH doesn't point to where ogre libraries are, because it doesn't point anywhere... I can't test if these will solve the problem until tomorrow afternoon (~14h from now) because of the lack of GLX in these machine, but I'll update this as soon as I can. Thanks for your time! :)
Comment by hsu on 2012-02-23:
I updated step 2 in http://gazebosim.org/wiki/quick_start, so it now says "source /usr/share/gazebo-[gazebo version]/setup.sh", which is more correct.
Comment by Capelare on 2012-02-23:
Anyway I thought that Gazebo didn't use OGRE_RESOURCE_PATH since C-Turtle... At least I think I read something about that somewhere :?
Comment by hsu on 2012-02-23:
true if you install the ros wrapper version (install: http://www.ros.org/wiki/electric/Installation/Ubuntu + "sudo apt-get install ros-fuerte-simulator-gazebo" + http://ros.org/wiki/simulator_gazebo/Tutorials).  The instructions on gazebosim.org are for standalone system install, needs more setup.
Comment by Capelare on 2012-02-23:
Oh fuck, I didn't know that. Besides, don't you think it'd be a good idea to add these additional setup you are talking about to the gazebosim.org "quick start" and/or "install" guides? :-\
Comment by Capelare on 2012-02-23:
Oh wait! I didn't think that setup.sh would export OGRE_RESOURCE_PATH... AFTER running setup.sh I'd get this: http://pastebin.com/9pa5BL4S So I think I should modify setup.sh to point to /usr/lib/OGRE, am I wrong?
Comment by Capelare on 2012-02-24:
Yeah, after I changed the OGRE_RESOURCE_PATH to /usr/lib/OGRE everything seems to work fine. BTW, /usr/lib/OGRE was the default install dir for apt-get install libogre-dev... so maybe you should change (or just add) that path to the setup.sh in order to avoid this from happening to others :?
Comment by Capelare on 2012-02-24:
Oh, if you want to write the whole thing as an answer I'll gladly mark it as correct! Thanks! :)

A:

The instructions on gazebosim.org are for standalone system install of gazebo. (see my comment below about the ros-ified gazebo stack).  Your problem above might be fixed by the updated step 2 in quick_start
source /usr/share/gazebo-[gazebo version]/setup.sh

should configure environment variables necessary for things to work correctly.  In this case, your system is missing the correct OGRE_RESOURCE_PATH.
On another note, it looks like you are trying to install gazebo simulator directly on your system (outside of ros context) for using it with ROS.  Let me try to clarify a little bit about the difference between the ros simulator_gazebo stack and the gazebosim project.
The ros simulator_gazebo stack wraps a hand-picked stable version of gazebo from the gazebo simulator project, and provides additional ros plugins/tools for using gazebo inside the ros environment.  By installing ros-fuerte-simulator-gazebo, you don't have to worry about installing gazebo via instructions on gazebosim.org, but rather, just follow along the ros wiki tutorials.  However, if you are interested in helping out with testing/developing the underlying simulator software, then proceed with the system install as described on the gazebo simulator project installation instruction page and try out the quick start steps.  Note the two installs can exist side by side with some careful finessing of installation locations and system paths.
Hope this is not too confusing.

Originally posted by hsu with karma: 5780 on 2012-02-24
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Capelare on 2012-03-02:
@hsu if anyone installs ros-fuerte-simulator-gazebo should they also install ros-fuerte-desktop*? and/or ros-electric-desktop? Also, the link you posted to the simulator_gazebo tutorials are way different than the ones at gazebosim... isn't ros-fuerte-simulator-gazebo the same as gazebosim?
Comment by Capelare on 2012-03-02:
Ok, I figured it out myself, but please tell me if I'm right/wrong. In order to use the simulator as it's explained at the gazebosim wiki, one should source /setup.sh and then /stacks/simulator_gazebo/gazebo/setup.bash. After that gzserver and gzclient work fine. (?)
Comment by hsu on 2012-03-02:
sorry, I realized my earlier answer might be too confusing, so I removed the seconds part.  I'll try to put this information on gazebo wiki instead.  The basics are explained in the update gazebo package manifest (https://code.ros.org/svn/ros-pkg/stacks/simulator_gazebo/trunk/gazebo/manifest.xml)
Comment by Capelare on 2012-03-02:
Thanks! Anyway I decided to go with the ros-wrapped gazebo version because I think it'd be easier to upgrade :) So what I'm doing now is setting up the environment for ros-fuerte and for simulator_gazebo, and then I launch "rosrun gazebo gzserver" instead of gzserver directly ;-)
Comment by Capelare on 2012-03-02:
It's not confusing at all, don't worry. It's just I don't know what I really want to do, so I'm trying things out. What I want to accomplish is a Lego NXT simulator, and I thought it'd be a good idea to write plugins for gazebo (and use the NXT stack probably). So you tell me, do I want to use ROS?
Comment by Capelare on 2012-03-02:
I think I do want (and need?) to use it, and I'd like to use Fuerte and/or the newest gazebo, but I'm having problems with the whole 'lack of tutorials/documentation for these two' thing. Or maybe I'm just too clumsy to find them!

