Q:

Parameter substitution within rosparam list inside launch file

I am trying to change the parameter map_frame within the rosparam list as shown below, but the substitution does not work.
I am actually passing the "tf_pre" argument from another launch file.
This line <rosparam param="map_frame" subst_value="True">$(arg tf_pre)/map </rosparam> # prefix the tf name for the map is used to pass the value of tf_pre to the value of map_frame inside the <rosparam> list.
This does not seem to have any effect because when I run rosparam get /h1/slam_gmapping/map_frame I get the wrong value.
Anyone has an idea what could be wrong?
This runs in ROS Noetic and I am trying to slam a multi robot Gazebo simulation.
 <launch>
    
      <arg name="tf_pre" default="robot1" />
    
      <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping">
    
        <rosparam param="map_frame" subst_value="True">$(arg tf_pre)/map </rosparam> # prefix the tf name for the map
    
        <rosparam>
          odom_frame: odom
          base_frame: base_link
          map_frame: map
          ...
    
        </rosparam>
    
      </node>
    </launch>

A:

You haven't provided a fully reproducible example to show what is actually going wrong. But based on your description it looks like you're setting that parameter twice and the one that you're trying to parameterize is lower in precedence.
The last instance of the parameter is the one used. http://wiki.ros.org/roslaunch/XML#Evaluation_order

