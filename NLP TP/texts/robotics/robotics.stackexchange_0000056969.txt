Q:

Inappropriate ioctl for device

Hi,
I have an issue running the gazebo server. It always crashes with a segfault.
Here is the debug log:
http://pastebin.com/c51fvTz9
This is how I launch gazebo:
 <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="debug" value="true"/>
 </include>

I've looked around, more users seem to have this problem but there does not appear to be a definitive solution.
I run Ubuntu 12.04 with nvidia drivers (GT650M) installed by bumblebee. OpenGL appears to work (glxgears) and rviz works fine.
Any ideas?
Edit: this was using gazebo 1.9.3 and ROS Hydro

Originally posted by Alpha on ROS Answers with karma: 18 on 2014-01-31
Post score: 0

Original comments
Comment by bchr on 2014-01-31:
Which version of gazebo are you using? Have you tried with the latest version compiled from source?
Comment by Alpha on 2014-01-31:
Thanks for the advice, I'll try the latest version of Gazebo (currently the default that comes with hydro) and post the result here.

A:

Well I figured out what caused it. The urdf file was using a hokuyo laser, which in turns uses the GPU to do calculations. Disabling the GPU usage fixed the segfault.
Disable it by changing
<sensor type="gpu_ray" name="laser_scanner_sensor">

and
<plugin name="gazebo_ros_head_hokuyo_controller" filename="libgazebo_ros_gpu_laser.so">

To
<sensor type="ray" name="laser_scanner_sensor">

and
<plugin name="gazebo_ros_head_hokuyo_controller" filename="libgazebo_ros_laser.so">

Originally posted by Alpha with karma: 18 on 2014-01-31
This answer was ACCEPTED on the original site
Post score: 0

