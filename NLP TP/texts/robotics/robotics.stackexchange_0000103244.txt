Q:

How to define multiple hardware interfaces for ros2 control in the xacro

I'm not sure how to define multiple hardware interfaces and assign the right joints.
Does this work?
<ros2_control name="RealRobot" type="system">
   <hardware>
       <plugin>steering_hardware/SteeringHardware</plugin>
   </hardware>
   <joint name="steering_joint">
       <command_interface name="position"/>
       <state_interface name="velocity"/>
       <state_interface name="position"/>
   </joint>
   <hardware>
       <plugin>wing_hardware/WingHardware</plugin>
   </hardware>
   <joint name="wing_joint">
       <command_interface name="velocity"/>
       <state_interface name="velocity"/>
       <state_interface name="position"/>
   </joint>
</ros2_control>

I'm getting an error when launching the controller manager but I don't know if it's related to this, so I want to make sure this piece is correct at least.
Thanks

Originally posted by guidout on ROS Answers with karma: 25 on 2023-05-05
Post score: 0

A:

I believe the way you have multiple hardware interfaces is just to have multiple ros2_control tags like so:
<ros2_control name="SteeringHarware" type="system">
   <hardware>
       <plugin>steering_hardware/SteeringHardware</plugin>
   </hardware>
   <joint name="steering_joint">
       <command_interface name="position"/>
       <state_interface name="velocity"/>
       <state_interface name="position"/>
   </joint>
</ros2_control>

<ros2_control name="WingHarware" type="system">
   <hardware>
       <plugin>wing_hardware/WingHardware</plugin>
   </hardware>
   <joint name="wing_joint">
       <command_interface name="velocity"/>
       <state_interface name="velocity"/>
       <state_interface name="position"/>
   </joint>
</ros2_control>

This works for me, but if anybody sees an issue with this, please comment.

Originally posted by guidout with karma: 25 on 2023-05-05
This answer was ACCEPTED on the original site
Post score: 0

