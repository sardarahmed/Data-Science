Q:

Method for filtering out gps topic in a bag file

Hi everyone,
I have recorded a bag file which contains gps topic for using with robot_localization pkg. I want to modify my gps topic to mimic a scenario where gps signal is not available, e.g transition from indoor to outdoor and vice versa. Using topic tools I was able to drop/filter out my gps messages. The result is in the following picture:

topic_tools drops X out of Y messages regularly as it is supposed to (blue dots). My question is: is there any method that can drop messages for a specific time length? For clarification, I would like something like this:

where the yellow lines are my gps messages and the gaps between them are dropped gps messages.
I appreciate your help!

Originally posted by tuandl on ROS Answers with karma: 358 on 2018-03-13
Post score: 1

A:

This cmd line would extract all messages on topic /odometry/gps between t1 and t2 and between t3 and t4 (you can keep extending it for other intervals). Is that what you want?
rosbag filter bag_in.bag bag_out.bag "topic == '/odometry/gps' and ((m.header.stamp.secs > t1 and m.header.stamp.secs < t2) or (m.header.stamp.secs > t3 and m.header.stamp.secs < t4))"

Originally posted by stevejp with karma: 929 on 2018-03-13
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by tuandl on 2018-03-14:
Yes, this is exactly what I need. Thank you for your help!
Comment by bmgatten on 2019-09-24:
This would filter out everything except the /odometry/gps from those times.  I think tuandl is asking how to  drop those messages instead of filtering everything else from the bagfile.

