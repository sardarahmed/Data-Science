Q:

Set delay between starting nodes within launch file

I would like to put my nodes inside a launch file. The first node need to be up and running before the second node. Is it possible to set some timeout before the second starts. Like usleep(time) in roscpp
<launch>
<node name="talker" pkg="roscpp_tutorials" type="talker" />
//delay of e.g. 1second
<node name="listener" pkg="roscpp_tutorials" type="listener" />
</launch>

Is this technically possible?

Originally posted by user23fj239 on ROS Answers with karma: 748 on 2016-05-01
Post score: 12

Original comments
Comment by NEngelhard on 2016-05-01:
Ros has no such feature. Why do you need this function? What do you really want to achieve? Having hardcoded dependencies like this is a bad sign. What happens to your second node if the first one has to be restarted?
Comment by user23fj239 on 2016-05-01:
Thank you, but I do not face dependencies, this was about is it theoretically possible. E.g. holding a presentation and not wanting to go to the pc. I say some stuff about the window popping up of the first node, then after 30s I can gently move over the the second. But this is ok.
Comment by Rufus on 2020-01-09:
A potential proper solution is for one node to wait until another node is ready before properly starting up, similar to how rosservice call --wait works.  You can probably also use a service to indicate whether a node has started up.  In fact, it'd probably be nice if nodes by default took a "wait" arg that allows setting dependencies between nodes

A:

I found a one-line solution that does not require any additional packages (it was a bit tricky):
You can make use of launch-prefix feature like so:
<arg name="node_start_delay" default="1.0" />  
<node name="listener" pkg="roscpp_tutorials" type="listener" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' " /> 

the problem with using just launch-prefix="sleep 1.0; " was that the node launching command was passed as arguments to 'sleep'

Originally posted by kushlik with karma: 396 on 2019-02-21
This answer was ACCEPTED on the original site
Post score: 38

Original comments
Comment by Rosbq on 2019-05-29:
Thank you! That worked for me!
Comment by akim on 2020-06-27:
This saved my day!
I was doing delays with timed_roslaunch before, but creating a launch file for every node was a bit painful.
Thank you!
Comment by jorge on 2021-01-26:
cool idea! thanks
Comment by sean on 2021-09-09:
Great answer! Whatâ€™s the meaning for $0 $@?
Comment by kushlik on 2021-09-10:
$0 is the name of the node that roslaunch will call and $@ are the arguments to that node / process. The they was to separate the process executable (node) and its arguments, otherwise the sleep function would not work. $0 and $@ are both bash syntax, you can check documentation for additional info.
Comment by zkytony on 2022-03-08:
Is there a way to delay launching the part in ""?
Comment by ThreeForElvenKings on 2023-05-02:
Hi @zkytony did you figure this out?

