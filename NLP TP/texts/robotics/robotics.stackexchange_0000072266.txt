Q:

How can I connect optitrack and ros together?

Hi,
I'm using Ubuntu12.04 installed ROS indigo, I made a catkin workspace and git clone mocap_optitrack into it. I have another computer with windows system, which installed Motive. I want to get data in ros from Optitrack system. Do I need NatNet any more?
Now I don't know how to configure. Could anyone tell me how to configure in Motive and in mocap_optitrack in detail?
Must I use ros_vrpn_client?
I'll appreciate if you could help.
PS: I followed the instructions in http://wiki.ros.org/mocap_optitrack, downloaded package at https://github.com/h2r/mocap_optitrack.
I can run /mocap_node successfully, and can get rqt_graph, which indicate /mocap_node can send messages to pose_stamper_1. But when I run rostopic echo /rigid_body_1/pose, I can get nothing. So I don't konw if Motive really connect with ros successfully. I don't know what to do next.

Originally posted by Shusen on ROS Answers with karma: 27 on 2016-02-23
Post score: 0

Original comments
Comment by ros_geller on 2016-02-24:
I am using ros_vrpn_client for my optitrack with motive setup, and it works perfectly fine. Just make sure they are on the same network with firewall disabled and motive trackers activated. Of course you have to setup your launch file to match your Motive PC IP, port and tracker name.
Comment by Shusen on 2016-02-24:
Hi, I just followed your advice, config my launch file: Motive PC IP, port, and tracker name,but in the terminal windows, it just said connection established, but no more, no messages at all. Is that a real connection? How can I get see the specific data?
Comment by ros_geller on 2016-02-25:
Check to see if your node, ros_vrpn_client, is running with the command "rosnode list".
Then check to see if the topic it publishes the data to is active with the command "rostopic list", if you find your topic, named after your trackable id, then use "rostopic echo your_topic_name" to see the data.
Comment by ros_geller on 2016-02-25:
To use the data you have to make a node yourself and subscribe to the topic that ros_vrpn_client publishes to. See ROS Tutorial for help.
Comment by Shusen on 2016-02-25:
Thank you for your reply, I restarted my Optitrack system and reconfig it, then I can get data using mocap_optitrack. Thanks!
Comment by ros_geller on 2016-02-25:
Cheers, glad it worked out. I'll post the comments as an answer, and then you can check it as solved.
Comment by abhi15491 on 2017-06-13:
hi, ros_geller can you tell me how to configure the launch file to match my motive PC IP,port and tracker name.
Comment by UbuntuROs on 2017-07-05:
@ros_geller I ran rosnode list and vrpn_client_node did exist but when I ran rostopic list it only showed me /rosout and /rosout_agg Why is that?

A:

Follow the directions to configure Motive on your Windows system via the GUI on the Wiki page: http://wiki.ros.org/mocap_optitrack

Originally posted by jackie with karma: 296 on 2016-02-23
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Shusen on 2016-02-24:
Thanks for your reply! I just followed the directions you told me, but when I run
rosrun mocap_optitrack mocap_node
It comes to this and crashed, I don't know why.
826 bytes received from 192.168.1.100:1511
Segmentation fault (core dumped)
Comment by Shusen on 2016-02-24:
How can I get see the specific data from optitrack?
Comment by jackie on 2016-02-24:
Did you create a rigid body to publish and edited the mocap.yaml?
Can you get a gdb backtrace of that segfault and post it as an issue on the Github repo for the package (https://github.com/ros-drivers/mocap_optitrack), to help the maintainers?
Comment by Shusen on 2016-02-24:
Yes, I creared a rigid body, edited the mocap.yaml file: named rigid_body_1.  Because I can't see any data, I don't know if it is a real connection.
Comment by ros_geller on 2016-02-25:
Try doing the same as i mentioned in my comment above, might work here too.
Comment by Shusen on 2016-02-25:
Thank you for your reply, I restarted my Optitrack system and reconfig it, then I can get data. Thanks!
Comment by UbuntuROs on 2017-07-05:
@Shusen Could you please guide me through how to create connection between Motive and ROS? I have ROS indigo with Ubuntu 14.4
Comment by UbuntuROs on 2017-07-05:
@jackie  Could you please guide me through how to create connection between Motive and ROS? I have ROS indigo with Ubuntu 14.4
Comment by UbuntuROs on 2017-07-05:
@ros_geller  Could you please guide me through how to create connection between Motive and ROS? I have ROS indigo with Ubuntu 14.4

