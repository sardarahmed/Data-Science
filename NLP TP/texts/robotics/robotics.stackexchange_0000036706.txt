Q:

Deprecated issue regarding btQuaternion in electric

I have a line of code that has deprecated issue in electric and I would like to know what is its better substitute.
=> btQuaternion q(pcl::deg2rad(data_set[t][8]), pcl::deg2rad(data_set[t][7]), pcl::deg2rad(data_set[t][6]));
[Warning:‘btQuaternion::btQuaternion(const btScalar&, const btScalar&, const btScalar&)’ is deprecated (declared at /opt/ros/electric/stacks/bullet/include/LinearMath/btQuaternion.h:47)]
P/S: Waiting for @joq's answer for he has done it already. This post is a refactor one.

Originally posted by alfa_80 on ROS Answers with karma: 1053 on 2011-12-24
Post score: 1

A:

The bullet manifest says:

"To eliminate ambiguity about which API is active the btQuaternion constructor from Euler angles is deprecated. Please explicitly construct it and populate it seperately from euler angles, otherwise it is ambiguous as to what convention is being used."

At this point, I would avoid using the bullet types directly, as they will change again in Fuerte. Here's a solution using only the tf typedef:
// translate roll, pitch and yaw into a Quaternion
tf::Quaternion q;
q.setRPY(pcl::deg2rad(data_set[t][6]), 
         pcl::deg2rad(data_set[t][7]), 
         pcl::deg2rad(data_set[t][8]));

Note the reordering from (yaw, pitch, roll) to (roll, pitch, yaw).

Originally posted by joq with karma: 25443 on 2011-12-25
This answer was ACCEPTED on the original site
Post score: 3

