Q:

Windows 10 gzclient crashes on startup

I've built gazebo from source on Windows 10 as per these instructions.
The gzserver application now starts ok but when attempting to run gzclient I get the gazebo splash screen and then it immediately crashes.
The ogre.log in C:\Users\username.gazebo ends with:

22:26:01: Added resource location '\gz-ws\gazebo/media/rtshaderlib/' of type 'FileSystem' to resource group 'General'
22:26:01: Creating resource group ShaderGeneratorResourceGroup
22:26:01: Added resource location 'C:/Users/username/AppData/Local/Temp/gazebo-nobody-rtshaderlibcache/' of type 'FileSystem' to resource group 'ShaderGeneratorResourceGroup'
22:26:02: Can't assign material NULL to SubEntity of SkyXMeshEnt because this Material does not exist. Have you forgotten to define it in a .material script?

The preceding log messages in the ogre.log file have a lot of detail about successfully loading the NVidia OpenGL driver.
The specific error message is already mentioned in this forum here. The solution in that case seems to have been to update or change the Ogre version. I tried changing the PluginFolder in plugins.cfg to point to Ogre 1.90 binaries but that caused gzserver to crash on start up.
I have used the specific versions and downloads listed from the Gazebo instructions link so I'm wondering if anyone else has encountered a problem running gzclient on Windows?

Originally posted by azaclauson on Gazebo Answers with karma: 35 on 2016-05-12
Post score: 0

A:

Well after two weeks of evenings spent twisting and turning I was able to get gazebo to build on Windows 10 with Visual Studio 2013. When I say working it's so far as neither gzserver or gzclient crash on start up and the Gazebo GUI does eventually appear and the menus, buttons etc. work. The gzclient gui did eventually crash when I cancelled a model edit that I inadvertently started.
For anyone else that's going to attempt to build on Windows I'd love to be able to supply a recipe but I've tried and changed so many different things that it would take me another week to get it all straight. A few of the points I would highlight are:

Following the instructions on the wiki http://gazebosim.org/tutorials?tut=install_on_windows&cat=install are almost certainly doomed to fail. The cmake configuration for the nmake makefiles has a few broken paths and missing bits that require moving libraries and include files around until the get correctly located (unfortunately I didn't get far trying to fix issues in the cmake configuration),

Even after I was finally able to get the nmake makefiles to build I had a lot of issues with missing dll's and then after sorting that out (mainly using depends.exe) ogre not being able to find its dll's (sorted out after finding the log file in c:\users\username.gazebo),

After sorting out the dll's and ogre the gzserver process would run ok but the gzclient would still crash and that's the point I originally asked this question. I tried to track the crash down using windbg but the .pdb files from the nmake debug build were missing so I was not able to determine the cause,

I then changed tack and got cmake to create Visual Studio 2013 project files instead of nmake make files. That again took a lot of massaging with include and library directories but I did eventually get it to build. This time I was able to debug both the gzserver and gzclient processes and fix issues with missing environment variable and ogre dependencies not loading.

So that's the point I'm at now. My main reason to try gazebo on Windows was because the performance on my ubuntu virtual machine was very slow. However the windows performance seems about the same so I'm going to switch back to ubuntu as I'm not confident my Windows build is going to be very reliable.

Originally posted by azaclauson with karma: 35 on 2016-05-17
This answer was ACCEPTED on the original site
Post score: 1

