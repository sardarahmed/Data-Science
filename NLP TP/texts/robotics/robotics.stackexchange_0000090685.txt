Q:

error when connecting DX100 controller

Hello,
I am trying to connect with DX100 controller via Ethernet. I have completed all step according to tutorial.
But when I am launching roslaunch motoman_driver robot_interface_streaming_dx100.launch robot_ip:=10.20.30.10 according to this,
http://wiki.ros.org/motoman_driver/Tutorials/Usage#Robot_Controller
I am getting this error,
 /robot_ip_address: 10.20.30.10
 * /rosdistro: kinetic
 * /rosversion: 1.12.14

NODES
  /
    joint_state (motoman_driver/robot_state)
    joint_trajectory_action (industrial_robot_client/joint_trajectory_action)
    motion_streaming_interface (motoman_driver/motion_streaming_interface)

auto-starting new master
process[master]: started with pid [16267]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 7ff70826-3a94-11e9-a310-e094677543f1
process[rosout-1]: started with pid [16280]
started core service [/rosout]
process[joint_state-2]: started with pid [16288]
process[motion_streaming_interface-3]: started with pid [16298]
process[joint_trajectory_action-4]: started with pid [16305]
[ERROR] [1551274510.017293580]: Failed to find topic_list parameter
[ERROR] [1551274510.019096560]: Cannot find user-specified joint names. Tried ROS parameter 'controller_joint_names' and the URDF in 'robot_description'.
[ERROR] [1551274510.019235316]: Failed to connect to server, rc: -1. Error: 'Connection refused' (errno: 111)
[ERROR] [1551274510.025299639]: Failed to connect to server, rc: -1. Error: 'Connection refused' (errno: 111)
[ERROR] [1551274510.025411427]: Failed to receive message length
[ERROR] [1551274510.025449442]: Failed to receive incoming message
[ERROR] [1551274510.029772460]: Failed to find topic_list parameter
[ERROR] [1551274510.032185826]: Cannot find user-specified joint names. Tried ROS parameter 'controller_joint_names' and the URDF in 'robot_description'.
[ERROR] [1551274510.032383954]: Failed to connect to server, rc: -1. Error: 'Connection refused' (errno: 111)
[ERROR] [1551274510.036218270]: Cannot find user-specified joint names. Tried ROS parameter 'controller_joint_names' and the URDF in 'robot_description'.
[ERROR] [1551274510.037383101]: Failed to initialize joint_names.
[ERROR] [1551274510.057214554]: Failed to connect to server, rc: -1. Error: 'Connection refused' (errno: 111)
[ERROR] [1551274510.307608223]: Timeout connecting to robot controller.  Send new motion command to retry.
[ERROR] [1551274515.026198348]: Failed to connect to server, rc: -1. Error: 'Connection refused' (errno: 111)
[ERROR] [1551274515.026460781]: Failed to receive message length
[ERROR] [1551274515.026616096]: Failed to receive incoming message
[ERROR] [1551274520.027295751]: Failed to connect to server, rc: -1. Error: 'Connection refused' (errno: 111)

It is written in tutorial,
Make sure the ROS trajectory node has been enabled by invoking the robot_enable service.
I can enable it by rosservice call.
But how can I enable it before launching above (roslaunch motoman_driver robot_interface_streaming_dx100.launch robot_ip:=10.20.30.10) command.
When I am starting controller in teach pendent I get Alarm like,
MotoROS: Controller cfg invalid
  [102] 

But when I reset this alarm, it goes. is this a problem?
Thanks.

Originally posted by nd on ROS Answers with karma: 80 on 2019-02-27
Post score: 0

A:

When I am starting controller in teach pendent I get Alarm like,

MotoROS: Controller cfg invalid

  [102] 

But when I reset this alarm, it goes. is this a problem?

yes, this is a problem. From the Troubleshooting section on error 8003:

Your robot controller requires internal configuration changes to support the MotoROS driver.

For DX100: Please contact your local Yaskawa Motoman office to order the MotoROS runtime. In North/South America, the part number for this configuration is 180014-1. In Europe, the part number for this configuration is 171403.

Did you order the runtime license as was clarified in #q316165?
If so, I believe Yaskawa should also have updated your controller configuration with the necessary parameters to be able to run MotoROS on your DX100. If that hasn't happened -- or wasn't done correctly -- I believe you can run into errors such as the one you show.
As is stated under the Requirements - MotoPlus Runtime License section (emphasis mine):

The MotoROS application and source is available for public download. However, ordering this part number will ensure your controller is updated with correct system software, the MotoROS driver is installed, and all internal parameters are properly configured.

Can you confirm you've had your controller configuration updated for MotoROS?

Originally posted by gvdhoorn with karma: 86574 on 2019-02-27
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2019-02-27:
@millete: FYI.
Comment by nd on 2019-02-27:
I will contact them and update it here.
Comment by gvdhoorn on 2019-02-27:
So just to be clear: you haven't yet received/purchased the runtime license, or the parameter update wasn't done (correctly)?
Comment by nd on 2019-02-27:
haven't purchased license.
Comment by gvdhoorn on 2019-02-27:
That would definitely be a problem then -- as I also wrote in #q316165.
Comment by nd on 2019-02-27:
is there any problem with robot_enable service call after I launch roslaunch motoman_driver robot_interface_streaming_dx100.launch robot_ip:=10.20.30.10 ?
Comment by gvdhoorn on 2019-02-28:
I don't see any output in the log messages that you posted that is unexpected, given that MotoROS is just not running on your controller.
Diagnosing any of those errors right now is not very productive, as they're most likely caused by the 8000 error.
Comment by nd on 2019-04-24:
@gvdhoorn after updating controller with ALL.PRM file, which was from yaskawa. there is still alarm coming when starting controller, MotoROS config invalid [105]. what can be the problem now?
Comment by gvdhoorn on 2019-04-24:
If the error is:

ALARM 8003

  MotoROS: Controller cfg invalid
 [105]

then it would appear your controller still hasn't been properly setup for MotoROS.
105 is one of the possible values that the "parameter validation" code in MotoROS returns. According to this, there is a chance that the MotoPlus runtime hasn't been enabled.
Comment by nd on 2019-04-24:
yes error is [105].
Comment by nd on 2019-04-24:
but they have updated controller configuration. may be I have to contact them again.
Comment by gvdhoorn on 2019-04-24:
Did they enable MotoPlus runtime for you? DId you have to pay?
Comment by nd on 2019-04-24:
I think that's i have to ask what is missing.
Comment by millete on 2019-04-24:
@nd You are indeed missing a one or more of the protected parameter settings. I have sent a message to the Yaskawa support team in Germany to notify them of this issue. Please contact the support team to have them fix your ALL.PRM file. TCS@yaskawa.eu.com
Comment by nd on 2019-04-24:
@millete thank you for the help. I have sent mail to yaskawa support.
Comment by nd on 2019-04-26:
@millete @gvdhoorn thanks. after getting new modified file this error is gone.

