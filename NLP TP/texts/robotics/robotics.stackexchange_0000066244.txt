Q:

Trouble compiling rviz on Raspberry Pi 2

Hello,
I've been following the directions for installing ROS Indigo on Raspberry Pi and am failing at step 2.3 (building the catkitn workspace). The process fails at step 178 of 185, building rviz. It gets to 2% of that process and then hangs the Pi, which continues to consume 1/4A at 5V but sits there for hours and hours with no progress. The machine also becomes unresponsive to pings, so I think it's totally hosed at that point. Has anyone seen anything like this? Swapping hardware doesn't seem to make a difference. Thanks in advance.
Here's the last screen of data before everything goes down:
<== Finished processing package [177 of 185]: 'robot_state_publisher'

==> Processing catkin package: 'rviz'
==> Building with env: '/opt/ros/indigo/env.sh'
Makefile exists, skipping explicit cmake invocation...
==> make cmake_check_build_system in '/home/sshamlian/ros_catkin_ws/build_isolated/rviz'
==> make -j4 -l4 in '/home/sshamlian/ros_catkin_ws/build_isolated/rviz'
[  0%] [  1%] Building CXX object src/rviz/CMakeFiles/rviz.dir/visualization_frame.cpp.o
Building CXX object src/rviz/CMakeFiles/rviz.dir/visualization_manager.cpp.o
[  2%] [  2%] Building CXX object src/rviz/CMakeFiles/rviz.dir/view_manager.cpp.o
Building CXX object src/rviz/CMakeFiles/rviz.dir/visualizer_app.cpp.o

Originally posted by Shamlian on ROS Answers with karma: 56 on 2015-03-06
Post score: 2

Original comments
Comment by corb on 2015-03-08:
This may not solve your problem, but  try the build with make -j2 instead of -j4.  This will run two sets of jobs concurrently rather than four.  The RPi2 doesnt have enough memory for 4 jobs and will thrash quite a bit and then die on large builds but will bld MUCH faster with two.
Comment by Shamlian on 2015-03-09:
This helps, but doesn't completely build. Now, I get to 94% on rviz's build, which is probably worth opening another question for. For the original question, though, this seems to be the answer: make must be invoked with -j2, so the wiki should be modified accordingly.
Comment by Shamlian on 2015-03-10:
Ok; I got rviz to make using the patch suggested in the following question: http://answers.ros.org/question/52098/unable-to-compile-rviz-on-ubuntu-armhf/ . I'll update the wiki accordingly if I get catkin_make_isolated --install to complete.
Comment by Shamlian on 2015-03-10:
This worked and the wiki has been updated. I made an answer below that has both of these steps, but I don't have enough "karma" to mark it as correct.

A:

First, a patch needs to be applied to rviz as described here. Then, as @corb suggested, running make -j2 from .../ros_catkin_ws/build_isolated/rviz will allow the build to succeed; once this is complete, catkin_make_isolated will proceed as normal. I have updated the wiki accordingly, though someone will probably want to check my formatting. Thanks to everyone for all the help! (You can probably run catkin_make_isolated with --make-args -j2 after patching, but I didn't test that.)

Originally posted by Shamlian with karma: 56 on 2015-03-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by yuwang on 2015-05-04:
when i failed, i running sudo make -j2 from .../ros_catkin_ws/build_isolated/rviz, but i got this "-- Configuring incomplete, errors occurred!
Makefile:1030: recipe for target 'cmake_check_build_system' failed
make: *** [cmake_check_build_system] Error 1
",please help me.i am a new.
Comment by yuwang on 2015-05-05:
I fix it by building rviz alone(remove all the packages from .../ros_catkin_ws/src excpet rviz), then run catkin_make_isolated with --make -j2 -l2.

