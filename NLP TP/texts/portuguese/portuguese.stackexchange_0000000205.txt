Q:

When to use "o senhor"?

For all I know, você is used almost exclusively as second person pronoun (in Brazil). Sometimes people in shops address me with senhor. I'm not a shop owner, so what would be some typical situations for a layperson like myself to use "senhor/senhora" to address other people?

A:

English
Take note that this concerns Portugal and may be inaccurate in Brazil.
Actually, it is a bit more complicated than that. It works like layers of intimacy towards the person you are addressing:
Treatment by name is used when there is an intimacy between people who get along:

John, give me the phone.

tu Treatment among friends of the same social level and among whom there is not much age difference:

Do you think she's pretty?

você Usually a poorly accepted treatment, commonly used by a superior person towards a person of lower category:

You want to be fired?

O senhor/A senhora It is a form of treatment for people who don't know each other or from which there is no intimacy. It is also a form of general treatment, accepted in all of the above:

You're blushing!

Português
Ter em atenção que se trata de Portugal, podendo ser diferente no Brasil.
Na verdade, é um pouco mais complicado do que isso. Funciona como camadas de intimidade para com a pessoa que estás a abordar:
nome próprio Quando existe uma intimidade ou entre pessoas que se dão bem:

João, dá-me o telefone.

tu Entre amigos do mesmo nível social e entre os quais não há muita diferença de idade:

Tu achas que ela é bonita?

você Geralmente um tratamento mal aceite, vulgarmente utilizado por uma pessoa de categoria superior para pessoa de categoria inferior:

Você quer ser despedido?

O senhor/A senhora É uma forma de tratamento entre pessoas que não se conhecem ou entre as quais não há intimidade. É também uma forma de tratamento geral, aceite em todos os níveis supra citados:

A Senhora está vermelha!

A:

As @zuul already mentioned in his answer, the usage depends on the social context. In a matter of fact, it works just like in other latin languages such as French and Spanish:

você/tu is less formal and equivalent to tu in Spanish and tu/toi in French.
o senhor/a senhora (notice the changes due to gender) is equivalent to vos/vosotros in Spanish and vous in French.

Hence, you use você or tu when speaking to a person in an informal manner, particularly when you already know each other. And you use o senhor or a senhora when speaking to a person in a context in which you don't know each other or you want to show respect. The informal approach is almost always used to address children.
Some additional information:

vós also exists in Portuguese but it is far less used (except in theatres or period movies).
você is a contraction that evolved from vossa mercê (something like "your mercy"), to vosmicê/vossemecê and lately to você.
Curiously, we do not have a verb to say that we want to change the addressing from formal to informal, like the verbs tutear in Spanish (¿Nosotros podemos tutear?) and tutoyer in French (On peut se tutoyer?). But if you feel like asking that to someone, just say Posso te chamar de você? (something like "Can I call you by você?")

P.S.: In Brazil, você does not have by itself the superiority
  issue mentioned by Zuul. A person may show superiority with
  intonation when using the word, but that may also happen with the use
  of o senhor (case in which, in my opinion, the superiority shown
  is much stronger due to the implied irony).

A:

It's not black and white, but here are a few cases where "o senhor" is commonly used:

When addressing customers in general
When addressing authorities in a formal situation (meeting, interview etc.)
When addressing elderly people you don't know, or don't know very well
Sometimes, when addressing parents or grandparents (but that depends on the family)

