Q:

How to use dialogue punctuation in Portuguese?

What is the right punctuation for this dialogue (direct speech) in Portuguese?

EN: "I am John," he said. "Who are you?"
PT: "Eu sou John", disse el. "Quem é Você?"

I know I'm supposed to delete the double quotes and use (em or en) dashes instead, but I'm not sure how many of them I need or where to place them.

A:

You use long dashes to initiate the dialogue and to separate the dialogue from other elements. You do not use a dash at the end of a paragraph, the paragraph break concludes the speaking:

— Eu sou John – disse ele – Quem é você?
  — Chamo-me Maria.

If you have a good eye you'll notice that the lengths of the dashes are slightly different. In high quality typography where, additionally, typographers may want to use thinner spaces around the larger ones, three different dashes are used: - (hyphen) for enclitics, – (en-dash, or meia risca) for mid dialogue breaks and — (em-dash, or travessão) for initiating the dialogue. Most people will just use the em-dash all the time and not distinguish with the en-dash which is perfectly fine: the en-dash is only technically semantically distinguished for ranges.  Poor typography will replace them with two hyphens.

A:

Dropping the quotes and using em dashes (travessão) instead is a very common choice, and its usage is explained in guifa's answer. But it should be clear that that's actually a stylistic option and that both in pt-PT and pt-BR, direct speech can be indicated using quotes.
Direct speech can be found indicated, among others, by:

quotes, very common in journalistic texts, e.g., from BBC Brasil:
"Temos lutado por muitos anos para superar a dor de ter perdido Kevin e Patrícia. E agora vamos começar a reviver tudo outra vez", disse em entrevista para a BBC.
em dash, the most frequent choice, e.g., Frederico Paciência, from Mário de Andrade:
Papai ficou pálido, coitado. Arrancou:
— Seu padre me desculpe. 
colon, which can be used in combination with other indicators, as in the example from Mário de Andrade above.
italics, used more often for lengthy speeches or to signal a change in form (e.g., from prose to music or poetry).

More information: O uso do travessão e das aspas
em discurso direto (ciberduvidas), Aspas ou travessão? (RNP), Recursos do Escritor: Pontuação nos diálogo.

