Q:

difference between "que fazes?" and "o que fazes" - why "o" at the beginning?

When talking, instead of using the question word "que", one may use "o que" - I would like to understand this use of the article

A:

Que fazes? and o que fazes? mean the same. The interrogative que can be a determiner (when followed by a noun) or a pronoun (when it’s not, as in que fazes?). As a pronoun you can use que or o que ― there’s no difference; as a determiner you can use que only.
Interrogative determiner ― que only
When que is followed by a noun:

Que livros recomendas? [What books do you recommend? Never *o que livros...]
Que desculpa deu ele desta vez? [What excuse did he give this time? Never *o que desculpa...]
Que tipo de pessoa é ele? [What kind of person is he? Never *o que tipo...]
Que horas são? [What time is it? Never *o que horas são?]

These questions are often reinforced with é que: que desculpa é que ele deu desta vez?
Interrogative pronoun — que or o que
When que is not followed by a noun:

Que vais fazer? [What are you going to do?]
O que vais fazer? [The same]
Que te disse ele? [What did he tell you?]
O que que te disse ele? [The same]
Que tens tu que ver com isso? [What have you got do with it?]
O que tens tu que ver com isso? [The same]

As in the previous section, these questions can be reinforced with é que: que é que vais fazer? or o que é que vais fazer?
Now, when it comes to most indirect questions, if you don’t use this é que, the o is all but compulsory:

Já sei o que vais dizer. [I know what you’re going to say.]
Já sei o que é que vais dizer. [The same]
Já sei que é que vais dizer. [The same]

I’m not saying that já sei que vais dizer is, with the intended meaning above, incorrect, but it at the very least would be highly confusing, because it can also be interpreted as I know that you’re going to say/tell [something], whereas if you use o que (or add é que) it is definitely I know what you’re… In fact linguist Manuel Said Ali says that o que was invented to clear ambiguity in indirect questions like sei que vais dizer in old Portuguese. (You have this question and answer on the origin of o que, but it is in Portuguese; I’ll translate it if you wish.)
Just que can still be used in a couple of indirect questions. The ones that come to mind are não sei que te diga (I don’t know what to say (to you)) and não sei que faça (I don’t know what to do). These are sort of formulaic; and you can also use o que instead.
In former times some authors have objected to the interrogative o que (o que was a popular innovation that writers took centuries to adopt; see this question). This view still surfaces in some “educational” websites (like this one), but the issue has long been settled. For instance Celso Cunha and Lindley Cintra (Nova Gramática do Português Contemporâneo, Lisboa, 2014, p. 442) simply note that objections to o que in questions are groundless, and this view has been held by influential linguists since the 1800s.

A:

English
In spoken and written Portuguese, the word “que” has four different functions: an interrogative pronoun, a relative pronoun, a conjunction or an adverb; some grammarians say that it can also be a preposition, as in “ter que” instead of “ter de”, but that is controversial. As an adverb, I did not find a source, but I can say that it sounds strange to add an article when “que” is used as an adverb. Que supresa! (What a surprise!) sounds normal, but O que surpresa! (What a surprise) sounds strange and saying it might sound like Oh, que surpresa! (Ah, what a surprise!).
Relative Pronoun
As a relative pronoun, the Houssaiss dictionary give an example, as mãos tremiam freneticamente, o que denunciava a sua culpa (The hands shook frenetically, which gave him/her away), which indirectly says that the relative pronoun “que” allows the use of a definite article.
It is not allowed in every situation. When it is allowed, it can usually be translated as “which”.
Interrogative Pronoun
[2] Both ways are correct, but “que” is considered purer, and some grammarians believe it is more correct, but both ways are very used and accepted by dictionaries; Priberam, for example.
As a personal note, I would like to say that I see more “que” in Portugal than in Brazil. I am Brazilian and for me, “o que” is the usual and formal form, and “que” looks more informal and like the speaker is removing the “o“
Conjunction
In all examples I found with “que” in dictionaries (Priberam and Houssaiss) as a conjunction, the conjunction “que” couldn't be turned into “o que” without changing the sentence's meaning or making the sentence sound wrong. Therefore, I believe that it is not good practice to add the definite article “o” before “que” when “que” is a conjunction.
Português
A palavra “que” tem quatro classificações: pronome interrogativo, pronome relativo, conjunção e advérbio; alguns gramáticos põem “que” como preposição por causa de “ter que” em vez de “ter de”, mas é controvérso. Como advérbio não encontrei nenhuma fonte, mas eu posso dizer que me soa estranho adicionar um artigo a “que” quando advérbio; O que surepresa soa estranho, por exemplo.
Pronome Relativo
Como pronome relativo, o dicionário Houssaiss tem um exemplo, as mãos tremiam freneticamente, o que denunciava a sua culpa, o que indiretamente diz que o pronome relativo “que” pode receber artigo definido, mas nem sempre.
Pronome Interrogativo
[2] Ambas as formas estão corretas, mas “que” é considerado mais puro e alguns gramáticos consideram-no mais correto, mas ambas são muito usadas e aceitas por dicionários; Priberam, por exemplo..
Como nota pessoa, Eu gostaria de dizer que eu vejo mais “que” em Portugal que no Brasil. Eu sou brasileiro e para mim, “o que” é a formal comum e formal, e “que” tem uma impressão mais informal e soa como o falante está removendo o “o”.
Conjunção
Em todos os exemplos que encontrei com “que” como conjunção em dicionários (Priberam e Houssaiss), a conjunção “que” não pode ser trocada por “o que” sem que ou mude o sentido ou pareça errado. Então, creio que não é boa prática escrever o artigo “o” atrás da conjunção “que”.

