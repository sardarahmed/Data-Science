Q:

When does the Spanish "ll" transform to "lh", when does it transform to "ch", and when does it transform to just "l" in Portuguese?

Let us classify the words to compare between Spanish and Portuguese into three numbered categories.

The default category: Latin origin words.
Loanwords from Spanish adopted into Portuguese and vice versa.
Loanwords from other languages.

Spanish words with "ll" (originally pronounced /ʎ/, the pronunciation was changed to /y/ through Yeísmo, and also uses other pronunciations like /dʒ/, /ʃ/, /ʒ/; words under Category 3 above may pronounce "ll" as /ll/ or /l/ or whatever is the original language pronunciation) will also fall under one of these categories.
On the other hand "ll" usually does not occur in native Portuguese words, so Portuguese words with "ll" will usually fall under Category 3 above or maybe under Category 2 above if it is borrowed from Spanish.
The Spanish verb "llamar" falls under Category 1 above as it originates from Latin "clamare". Its Portuguese equivalent is "chamar".
On the other hand "llama" the animal falls under Category 2 above and is called "lhama" in Portuguese (the pronunciation of Portuguese "lh" is between /ʎ/ and /y/).
My question here is, when does the Spanish "ll" transform to "lh", when does it transform to "ch", and when does it transform to just "l" in Portuguese?

A:

Your question is based on a number of assumptions which seem to me to be questionable.
Just because two languages have a word in common or two similar words meaning the same it does not mean that one of them has borrowed the word from the other. In the case of languages with a common ancestor the default assumption must be that the words descended in parallel from a common source. As I am sure you know both Spanish and Portuguese have such a common ancestor, Latin.
Following on from that assumption your quest for a transformation from ll to lh or ch is misguided. What you should be looking for is the steps in the descent of each of them which changed the Latin, whatever that was, into the modern Spanish or Portuguese. Bear in mind as well that these rules are just summaries described by linguistic researchers of the steps they have observed. They are not rules which determined what speakers chose to do. In the same way the planets move in the way they do, they did not decide to follow Kepler's laws but rather Kepler observed their behaviour and described it.
As an aside the question ignores the information which might be obtained by looking at the descent of other Romance languages spoken in the Iberian peninsula notably in Galicia.

