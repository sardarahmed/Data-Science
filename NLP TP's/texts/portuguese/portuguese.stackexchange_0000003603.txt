Q:

Hei de ver João amanhã - Should there be a hyphen?

I've come across this sentence in wikipedia "Hei-de ver João amanhã". I wouldn't have hyphenated "Hei de" and I immediately thought it was a mistake or a typo. When I searched for more examples, however, I found a poem by Camões where "hei-de" is used.  In both cases, "de" works as a preposition, I think.  Is such usage archaic?  Are there more examples where verb and preposition are linked with a hyphen?

A:

This was an old way of writing it when there was a simple monosyllabic present-tense inflection of haver followed by de, as in hei-de tomar, hás-de tomar, há-de tomar. 
However, under the Acordo Ortográfico da Língua Portuguesa de 1990, this is no longer followed:

BASE XVII: DO HÍFEN NA ÊNCLISE, NA TMESE E COM O VERBO HAVER

Emprega-se o hífen na ênclise e na tmese: amá-lo, dá-se, deixa-o, partir-lhe; amá-lo-ei, enviar-lhe-emos. 
Não se emprega o hífen nas ligações da preposição de às formas monossilábicas do presente do indicativo do verbo haver: hei de, hás de, hão de, etc.

A wider explanation of this older practice and of the recent change away from it can be found at Ciberdúvidas under Sobre supressão do hífen na forma verbal há-de, depois do novo Acordo, of which I cite a small portion here:

Antes da reforma ortográfica, o hífen colocava-se apenas nas formas monossilábicas do presente do indicativo do verbo haver empregado como auxiliar da conjugação perifrástica: hei-de vs. havemos de + infinitivo. Segundo Rebelo Gonçalves (1947: 238/239), no Tratado da Ortografia Portuguesa, a colocação do hífen deve-se a diferentes motivos, dos quais se salientam três: a preposição de não tem acento tónico, ou seja, é átona e, por esta razão, subordina-se à palavra antecedente; «os agregados obtidos com a preposição de e as formas verbais referidas constituem união vocabular [...] estreita», sendo disto prova as formas populares "hades" e "hadem"; as formas hei-de e hás-de podem ocorrer com o infinitivo subentendido — «Deixe-me; hei-de dizer-lhas, hei-de» (Garrett, A Sobrinha do Marquês, acto II, c. XIV).

A:

The hyphen was prescribed by the 1945 reform (adopted only in Portugal, including its colonies at the time):

Emprego do hífen nas ligações da preposição de com as formas monossilábicas do presente do indicativo do verbo haver (hei-de, hás-de, há-de, heis-de, hão-de).  

(see Part 2, XXXI), but the 1990 Orthographic Agreement dropped it. As such, it remains current usage only in the old colonies that have not implemented the agreement and among those persons and publications that refuse to apply the agreement (e.g. Público).
The reason for this being the particular behavior of these monosyllabic forms. Namely (Grande Enciclopédia Portuguesa e Brasileira, vol. XII, entry for haver):

♦ Nas formas monossilábicas de haver, a prep. de, quando as acompanha, tornou-se palavra enclítica, e na grafia une-se com hífen ao verbo. ♦ Na linguagem familiar, conserva-se junto do verbo a prep. de, em caso de afirmativa ou negativa com simples repetição do verbo equivalente a sim ou não, quando o mesmo é monossilábico: Não há-de ir. — Isso é que há-de!. E da mesma forma: hei-de, hás-de, heis-de (não, porém, havemos de; neste caso só se usa havemos). Antónia : Tal não há-de fazer. — Simplício : hei-de e hei-de. — Antónia : Não há-de e não há-de», Castilho, O Doente de Cisma, O, 5, p. 21. ♦ De tal modo anda a prep. de ligada à forma monossilábica de haver, que julga o povo existir aí um suposto verbo hader, e conjuga-o, dizendo, na 2.ª pessoa do sing. e na 3.ª do pl.: hades fazer, hadem fazer (em vez de hás-de fazer e hão-de fazer). ♦ Outrora, porém, não existia êsse rigor e encontram-se constantemente pronomes, e até outras palavras, a separar haver da prep. de, o que também se verifica uma ou outra vez entre os modernos, talvez por arcaísmo: «Hemo-nos, senhores, de ir», Luís de Camões, El-rei Seleuco, in Juromenha, Obras, IV, p. 200; «Já que conto a V. M. histórias assim, não hei cá de deixar esta», D. Fransisco Manuel, Carta de Guia de Casados, p. 1110; «A fome há-se de medir com o estômago», António Vieira, Rosa Mística, I, Índice, p. 32; Hás-me de jurar uma cousa que te não custará nada», Herculano, Lendas e Narrativas, II, p. 21; «Casarás com o homem; mas já agora hão-se de festejar os teus dezassete anos em casa», Camilo, Carlota Ângela, cap. 2, p. 19.

This Ciberdúvidas answer presents the (similar) explanation of Rebelo Gonçalves in  Tratado da Ortografia Portuguesa:

[A] colocação do hífen deve-se a diferentes motivos, dos quais se salientam três: a preposição de não tem acento tónico, ou seja, é átona e, por esta razão, subordina-se à palavra antecedente; «os agregados obtidos com a preposição de e as formas verbais referidas constituem união vocabular [...] estreita», sendo disto prova as formas populares "hades" e "hadem"; as formas hei-de e hás-de podem ocorrer com o infinitivo subentendido — «Deixe-me; hei-de dizer-lhas, hei-de» (Garrett, A Sobrinha do Marquês, acto II, c. XIV).

The 1990 reform has, however, ended this usage of the hyphen in base XVII, 2:

Não se emprega o hífen nas ligações da preposição de às formas monossilábicas do presente do indicativo do verbo haver: hei de, hás de, hão de, etc.

The official explanation for the change being that de is actually subordinated to the accent of the verb in the infinitive (so basically the opposite justification):

Quanto ao emprego do hífen na ênclise e na tmese [mesóclise] mantêm-se as regras de 1945, excepto no caso das formas hei de, hás de, há de, etc., em que passa a suprimir-se o hífen. Nestas formas verbais o uso do hífen não tem justificação, já que a preposição de funciona ali como mero elemento de ligação ao infinitivo com que se forma a perífrase verbal (cf. hei de ler, etc.), na qual de é mais proclítica do que apoclítica.

