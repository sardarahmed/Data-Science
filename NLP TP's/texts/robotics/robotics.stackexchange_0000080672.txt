Q:

gmapping doesn't publish the tf from map->odom

I recently try to run SLAM gmapping on Husky robot. I build the map successfully but don't get the tf from map to odom.
Even the frame "map" doesn't exist.
I have some the questions.

whether the time synchronization has an impact on that?

I have used the command "ntpdate -p robot_ip" to check it. I get the following result.
server 192.168.5.112, stratum 0, offset 0.000000, delay 0.00000
8 May 10:23:58 ntpdate[4259]: no server suitable for synchronization found

whether rate of publishing tf  has an impact on that?

I tried to change the value of parameter "transform_publish_period" of gmapping so that it is consistent with the rate of others publishing.
All trials don‘t resolve my problem. What’s wrong? Thanks for any advise.

Originally posted by Shanan on ROS Answers with karma: 26 on 2017-05-07
Post score: 0

Original comments
Comment by Humpelstilzchen on 2017-05-09:
Please attach tf tree and node graph
Comment by Akif on 2017-05-09:
Also check your laser scanner. There may be a problem with readings.

A:

Thanks all.  Because gmaping published the tf message that was sent to robot through wifi, but tf messages do not deal with low bandwidth networks well. I install gmapping package into robot, and my computer only is responsible to visualize the built map. All work fine.
Reference website: http://wiki.ros.org/tf/Design
I revised the provided launch files in gmapping package according to my need. It is easy to ignore "use_sim_time" parameter which usually is set as true in launch file.  In here, Its value should be set as false.
Reference website: http://wiki.ros.org/Clock

Originally posted by Shanan with karma: 26 on 2017-05-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Amrita Suresh on 2020-12-14:
I have a similar problem. I can see in my tf tree that the transform /map -> /odom is being broadcasted by /slam_gmapping. But when I try to listen to this transform using  tf2_ros::BufferInterface::lookupTransform("/map", "/odom", ros::Time(0)),
I get the warning
"zoe/map" passed to lookupTransform argument target_frame does not exist.
Can you help?

