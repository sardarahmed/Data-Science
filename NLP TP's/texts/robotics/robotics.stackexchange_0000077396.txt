Q:

How to verify odom --> base_link is accurate or not？

I'm using AMCL and when I specify a goal to navigation, the pose of my robot drift.While AMCL need odom --> base_link tf and laserscan data,so how can I verify odom --> base_link is accurate or not？

Originally posted by Damo on ROS Answers with karma: 7 on 2016-11-17
Post score: 0

A:

Extracted from section 1.2 in the navigation tuning guide:

Often, I'll have a lot of trouble
getting a robot to localize correctly.
It will constantly get lost and I'll
spend a lot of time mucking with the
parameters for AMCL only to find that
the real culprit is the robot's
odometry. As such, I always run two
sanity checks to make sure that I
believe the odometry of a robot.
The first test checks how reasonable
the odometry is for rotation. I open
up rviz, set the frame to "odom,"
display the laser scan the robot
provides, set the decay time on that
topic high (something like 20
seconds), and perform an in-place
rotation. Then, I look at how closely
the scans match each other on
subsequent rotations. Ideally, the
scans will fall right on top of each
other, but some rotational drift is
expected, so I just make sure that the
scans aren't off by more than a degree
or two.
The next test is a sanity check on
odometry for translation. I'll set up
rviz the same way with the robot a few
meters away from a wall. Then, I'll
drive the robot straight at the wall
and look at the thickness of the wall
as reported by the aggregated laser
scans in rviz. Ideally, the wall
should look like a single scan but I
just make sure that it doesn't have a
thickness of more than a few
centimeters. If you drive a meter
towards a wall and get scans spread
out over half a meter though,
something is likely wrong with the
odometry.

Originally posted by Procópio with karma: 4402 on 2016-11-18
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by sarthak on 2017-04-28:
Should I transform laser to Odom or base_link? When I try to run rviz, scans do not coincide with each other . I am using transform as odom-> base_link -> laser
Comment by Procópio on 2017-05-02:
If scans do not coincide with each other, you likely have a bad odometry. It is not an issue with the transforms, probably. Your tf chain is just fine.

