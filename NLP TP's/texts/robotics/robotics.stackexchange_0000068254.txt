Q:

laser_scan_matcher error!

hello friends...
I am using gmapping and it is working fine with fake odometry. But now I wanted to use laser_scan_matcher to get better odometry data. I am not use a bag file and rosparam use_sim_time is "false". But laser_scan_matcher throws some error.
I couldnt solve this. (I am using static tf for laser to base_link)
error link :
http://i.imgur.com/oA6q09I.png
And this is my laser_scan_matcher.launch file:
 <launch>
<param name="/use_sim_time" value="false"/>  
<node pkg="laser_scan_matcher" type="laser_scan_matcher_node"   
name="laser_scan_matcher_node" output="screen">    
<param name="max_iterations" value="10"/>    
<param name="use_imu" type="bool" value="false" />    
<param name="use_odom" type="bool" value="false" />    
<param name="fixed_frame" type="string" value="world" />    
<param name="base_frame" type="string" value="base_link" />
</node>
</launch>**

my error:
****process[laser_scan_matcher_node-1]: started with pid [36778]
[ INFO] [1435132670.287163697]: Starting LaserScanMatcher

[ WARN] [1435132671.572234872]: Could not get initial transform from base to laser frame, Lookup would require extrapolation into the past.  Requested time 1435132670.566868328 but the earliest data is at time 1435132670.570998429, when looking up transform from frame [laser] to frame [base_link]

[ WARN] [1435132671.572301017]: Skipping scan
Strange FOV: -6.283185 rad = -360.000010 deg 
[ WARN] [1435132671.572614765]: Error in scan matching****

Originally posted by osmancns on ROS Answers with karma: 153 on 2015-06-24
Post score: 1

A:

this error was solved like that: Error is relates to Rplidar node.cpp.
http://geduino.blogspot.com.tr/2015/04/gmapping-and-rplidar.html
Modify the original code:
 
scan_msg.angle_min = M_PI - angle_min;
scan_msg.angle_max = M_PI - angle_max;
 
to:
 
scan_msg.angle_min = -1*(M_PI - angle_min);
scan_msg.angle_max = M_PI - angle_min; 

https://gist.github.com/Po-Jen

Originally posted by osmancns with karma: 153 on 2015-07-03
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by rosRabbit on 2015-08-26:
Thanks! That works for me!
Comment by jrobe on 2016-05-10:
Thank you very much!
Comment by Clack on 2016-07-09:
Thanks a lot!
Comment by danthb on 2018-11-22:
Could you help me with the modification I should do, if I'm using a ydlidar?

