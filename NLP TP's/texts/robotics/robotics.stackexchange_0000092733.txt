Q:

how to conect with roscore in docker?

As titles, how can I running a roscore in docker with ROS_MASTER_URI=XX.X.X.X. And make the nodes outside docker can connect with the docker roscore using specified ROS_MASTER_URI?

Originally posted by yueweiliang on ROS Answers with karma: 21 on 2019-07-26
Post score: 2

A:

I think that you misunderstood the role of the environment variable ROS_MASTER_URI.
If you have the ROS MASTER and a ROS NODE, the variable will be used by the ROS NODE to know where to look for the MASTER. It's not setting the master URI to a specific value.
In your example, you should just run roscore in the Docker, without setting any environment variable.
roscore will print to screen the URI where the master can be reached.
In the terminal where you want to run your nodes, you will have to run export ROS_MASTER_URI=XX.X.X.X with the URI that has been previously printed.
Moreover, if using Docker, you should make sure that the Docker container has not been run in isolated mode.

Originally posted by alsora with karma: 1322 on 2019-07-26
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Morris on 2020-10-13:
I have not been able to get this to work.  I am using a Docker within WSL 2.  I run the docker with the command:
docker run -it --network=host ros:noetic-ros-base

Then typing: hostname -I, I get two IP addresses:
192.168.65.3 172.17.0.1

Then I do export ROS_MASTER_URI=http://192.168.65.3:11311, and run roscore in the docker, and am unable to see it from outside the docker.  Similarly if I use the other IP address.
I have not been able to find any way to make roscore visible outside the docker

