Q:

rosmake mypackage

Hi dear all, I got some problems when I want to compile my package(mytele). I want to create a new package named mytele, and it is copy from turtlebot_teleop turtlebot_key.cpp. I am sure that the copy is complete. Here is my steps:
roscreate-pkg mytele geometry_msgs rospy roscpp
and I type this path so that ROS can find my package
export ROS_PACKAGE_PATH=/home/turtlebot/mytele:$ROS_PACKAGE_PATH
and then I copy this package code to my new package
cp turtlebot_key.cpp /home/turtlebot/mytele/src/turtlebot_key.cpp
and complie it
rosmake mytele mytele
the first time compile is completed, and new folder "bin" and "build" has been created. It seems every things is OK here.
> [ rosmake ] rosmake starting...    
[ rosmake ] Packages requested are: ['mytele', 'mytele']   
[ rosmake ] Logging to directory /home/turtlebot/.ros/rosmake/rosmake_output-20130325-140610 
[ rosmake ] Expanded args ['mytele', 'mytele'] to:
['mytele', 'mytele']                       
[rosmake-0] Starting >>> geometry_msgs [ make ]                
[rosmake-0] Finished <<< geometry_msgs  No Makefile in package geometry_msgs   
[rosmake-0] Starting >>> roslang [ make ]                 
[rosmake-0] Finished <<< roslang  No Makefile in package roslang   
[rosmake-0] Starting >>> rospy [ make ]                
[rosmake-2] Starting >>> roscpp [ make ]                  
[rosmake-2] Finished <<< roscpp  No Makefile in package roscpp       
[rosmake-0] Finished <<< rospy  No Makefile in package rospy           
[rosmake-2] Starting >>> mytele [ make ]               
[rosmake-2] Finished <<< mytele [PASS] [ 7.28 seconds ]     
[ rosmake ] Results:                             
[ rosmake ] Built 5 packages with 0 failures.                 
[ rosmake ] Summary output to directory               
[ rosmake ] /home/turtlebot/.ros/rosmake/rosmake_output-20130325-140610  

                   

and add the following line at the end of CMakeLists.txt file
rosbuild_add_executable(mytele.keyboard src/turtlebot_key.cpp)
and compile again
rosmake mytele mytele
but, this time, I got this failure message.
> [ rosmake ] rosmake starting...         
[ rosmake ] Packages requested are: ['mytele']  
[ rosmake ] Logging to directory /home/turtlebot/.ros/rosmake/rosmake_output-20130325-145504  
[ rosmake ] Expanded args ['mytele'] to:
['mytele']                           
[rosmake-0] Starting >>> geometry_msgs [ make ]        
[rosmake-1] Starting >>> roslang [ make ]              
[rosmake-0] Finished <<< geometry_msgs  No Makefile in package geometry_msgs   
[rosmake-1] Finished <<< roslang  No Makefile in package roslang        
[rosmake-1] Starting >>> rospy [ make ]           
[rosmake-2] Starting >>> roscpp [ make ]            
[rosmake-1] Finished <<< rospy  No Makefile in package rospy      
[rosmake-2] Finished <<< roscpp  No Makefile in package roscpp    
[rosmake-2] Starting >>> mytele [ make ]        
[ rosmake ] All 39 linesytele: 2.3 sec ]                                         [ 1 Active 4/5 Complete ]
{------------------------------------------------------------------------------- [ 1 Active 4/5 Complete ]
  mkdir -p bin
  cd build && cmake -Wdev -DCMAKE_TOOLCHAIN_FILE=`rospack find rosbuild`/rostoolchain.cmake  ..
  [rosbuild] Building package mytele
  [rosbuild] Including /opt/ros/fuerte/share/rospy/rosbuild/rospy.cmake
  [rosbuild] Including /opt/ros/fuerte/share/roscpp/rosbuild/roscpp.cmake
  [rosbuild] Including /opt/ros/fuerte/share/roslisp/rosbuild/roslisp.cmake
  -- Configuring done
  -- Generating done
  CMake Warning:
    Manually-specified variables were not used by the project:
  
      CMAKE_TOOLCHAIN_FILE
  
  
  -- Build files have been written to: /home/turtlebot/mytele/build
  cd build && make -l4
  make[1]: Entering directory `/home/turtlebot/mytele/build'
  make[2]: Entering directory `/home/turtlebot/mytele/build'
  make[3]: Entering directory `/home/turtlebot/mytele/build'
  make[3]: Leaving directory `/home/turtlebot/mytele/build'
  [  0%] Built target rospack_genmsg_libexe
  make[3]: Entering directory `/home/turtlebot/mytele/build'
  make[3]: Leaving directory `/home/turtlebot/mytele/build'
  [  0%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/turtlebot/mytele/build'
  make[3]: Leaving directory `/home/turtlebot/mytele/build'
  make[3]: Entering directory `/home/turtlebot/mytele/build'
  Linking CXX executable ../bin/mytele_keyboard
  /usr/bin/ld: CMakeFiles/mytele_keyboard.dir/src/turtlebot_key.o: undefined reference to symbol 'vtable for boost::detail::thread_data_base'
  /usr/bin/ld: note: 'vtable for boost::detail::thread_data_base' is defined in DSO /usr/lib/libboost_thread.so.1.46.1 so try adding it to the linker command line
  /usr/lib/libboost_thread.so.1.46.1: could not read symbols: Invalid operation
  collect2: ld returned 1 exit status
  make[3]: *** [../bin/mytele_keyboard] Error 1
  make[3]: Leaving directory `/home/turtlebot/mytele/build'
  make[2]: *** [CMakeFiles/mytele_keyboard.dir/all] Error 2
  make[2]: Leaving directory `/home/turtlebot/mytele/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/turtlebot/mytele/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package mytele written to:
[ rosmake ]    /home/turtlebot/.ros/rosmake/rosmake_output-20130325-145504/mytele/build_output.log
[rosmake-2] Finished <<< mytele [FAIL] [ 2.35 seconds ] 
[ rosmake ] Halting due to failure in package mytele. 
[ rosmake ] Waiting for other threads to complete. 
[ rosmake ] Results:     
[ rosmake ] Built 5 packages with 1 failures.     
[ rosmake ] Summary output to directory    
[ rosmake ] /home/turtlebot/.ros/rosmake/rosmake_output-20130325-145504  

I don't know how to fix it. help me if you know where is the problems, thank you

Originally posted by Holton on ROS Answers with karma: 3 on 2013-03-24
Post score: 0

A:

In the original turtlebot_teleop manifest a lot more package dependencies are listed than you added in your roscreate-pkg command. Is this intentionally? If you copy the packages sources it's unlikely that all those deps are superfluous.

Originally posted by felix k with karma: 1650 on 2013-03-25
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Holton on 2013-03-31:
Thank you!!! I added turtlebot_bringup to the dependencies so I can compile now!! Thank you very much again!!

