Q:

How to locate robot position on map using map -> base_link transform?

I'm running turtlebot in playground world and navigation
roslaunch turtlebot_gazebo turtlebot_playground.launch
roslaunch turtlebot_gazebo gmapping_demo.launch

In my program code I successfully subscribe to /map topic and process its data as 2D array[height][width] of wall coordinates, but I'm unable to interpret results of
listener_.lookupTransform( "map", "base_link", ros::Time( 0 ), transform );

How to compare results of map array and map->base_link transform?

Originally posted by INait on ROS Answers with karma: 220 on 2014-04-26
Post score: 0

Original comments
Comment by RB on 2014-05-05:
Why we should compare the results? since it is giving relative robot position.....

A:

Found the answer myself.
I need to use map_metadata to get map configuration with the real world.
Cell where the robot situated is ( robot_position - map_origin ) / map_resolution, for x and y coordinates accordingly.

Originally posted by INait with karma: 220 on 2014-04-26
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Tom Moore on 2014-04-28:
Don't forget to mark this as the accepted answer.
Comment by INait on 2014-04-29:
I don't have enough karma to do that.
Comment by tfoote on 2014-04-30:
I took care of it for you. And you should have enough karma now.
Comment by RB on 2014-05-05:
You are calculating robot position, but in your answer, you used again robot position??Can you please explain a little bit..I have posted a similar kind of question...http://answers.ros.org/question/161326/rosrun-tf-tf_echo-map-base_link-vs-coding-implementation/ .Please have a look....
Comment by INait on 2014-05-06:
Sorry for late response, I see in your question that you found solution, is there something left uncleared?
Comment by RB on 2014-05-06:
@INait, now everything is ok..

