Q:

Advice needed on a suitable method to transmit ROS msgs, with unknown msg types. In cpp

Hey guys,
So I have been contracted to write a ROS driver to facilitate the transmission (and reception) of currently undefined ROS msgs underwater with an acoustic modem.
My plan is to create a node that listens to all ROS msg traffic, then to discriminate the msgs to be transmitted across the acoustic link (with aid of topic names in a conf file), then serialise those selected msgs (one at a time), and then transmit. On the receiving side the date will need to be de serialised and re-published into a msg.
Due to not knowing the msgs before compilation, and the requirement of a configuration file to discriminate, this obviously means that I need a way to serialize and de-serialize without knowing the msg type (unless I have this information in the config file aswell). I have also been asked that it is programmed in CPP.
I realise that similar questions have been asked before , mostly stating that it is impossible (?) in cpp due to introspection... but these were asked several years ago.
So I wonder if there is any new advice, possibly from changes in ROS.
Many thanks,
Chris

Originally posted by kurisu on ROS Answers with karma: 21 on 2013-11-01
Post score: 1

Original comments
Comment by rpxz on 2016-05-31:
Hi,
I've a similar problem but since m new to ros coding i'm unable to deal with the issue . can u lead through the basics ?it would b a great help.
thnx
rythima

A:

The obvious non-answer is to use python.  It's almost trivial to do what you ask in python.  Assuming that python won't work, you might want to look at the rosbag code.  It is written in C++ and uses a shapeShifter message type to generically read and write messages in binary format.  Here is a link to the shape shifter documentation ( http://docs.ros.org/hydro/api/topic_tools/html/classtopic__tools_1_1ShapeShifter.html ).

Originally posted by sedwards with karma: 1601 on 2013-11-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by kurisu on 2013-11-03:
Thanks, I'll have a look into the rosbag code, but I'm starting to think that the non-answer might be an easier and better option, I might suggest that the serialization / deserialization stuff is coded into it's own ROS node and the rest is done in C++. Do you by chance know of any python examples?

