Q:

Set node parameter in launch file

Hi
I was trying to run a node through launch file and set its node parameter. The correspond launch file code:
<node pkg="hector_quadrotor_demo" type="uav1_pathplan" name="uav1_pathplan" args="-d $(find hector_quadrotor_demo)/src/uav1_pathplan.cpp">
<param name="ref.x" type="double" value="7.0" />
<param name="ref.y" type="double" value="-8.0"/>
<param name="ref.z" type="double" value="4.0" />

When I start the launch file, the node just didn't receive parameter values.
In my node files,
ros::init(argc, argv, "uav1_pathplan");
ros::NodeHandle n;
destination[1]=ref.x;
destination[2]=ref.y;
destination[3]=ref.z;

I just want the node can read "ref" to "destination[]". Then I can do further calculation.
I'm not sure what's wrong.
Any advice appreciated.
Glen

Originally posted by Glen on ROS Answers with karma: 40 on 2014-07-24
Post score: 1

Original comments
Comment by sterlingm on 2014-07-24:
Do "rosparam list" - can you see the parameters? The NodeHandle might just be looking in the wrong namespace.
Comment by Glen on 2014-07-24:
yes, I can read the parameter values through "rosparam list". Then, should I modify anything in my .cpp file?
Comment by sterlingm on 2014-07-24:
Whenever you load them in with your NodeHandle you need to include their namespace. If in "rosparam list" it says "uav1_pathplan/ref.x" you need to do loadParam("uav1_pathplan/ref.x").
Comment by demmeln on 2014-07-24:
No you should use a private node handle instead.
Comment by Glen on 2014-07-24:
Do you mean use: loadParam("uav1_pathplan/ref.x") in .cpp file? But function loadParam() is not declared yet.

A:

How do you retrieve the ref object in your code. I don't see you accessing the parameters at all. The launch file is fine; in you code do something like:
ros::NodeHandle nh("~");
double ref_x;
nh.getParam("ref.x", ref_x);
destination[1] = ref_x;

Edit: Best read up on retrieving parameters in the wiki.

Originally posted by demmeln with karma: 4306 on 2014-07-24
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Glen on 2014-07-24:
I retrieve the object as you said. When roslaunch the launch file, error shows "process has died[pid 21550, exit code...]". It is close to run successfully and I'm still trying to figure it out. Thanks!
Comment by Glen on 2014-07-24:
It finally works. I just redefine all the variables "destination and ref_" and it worked! Thanks

