Q:

Transform PointCloud message

I am receiving a sensor_msgs::msg::PointCloud (base_link frame) in my callback. I want to transform this PointCloud to the camera frame, so that I can do a projection of that point cloud view.
I am having problems to convert a sensor_msgs::msg::PointCloud into a pcl::PointCloud<pcl::PointXYZ> cloud; with ROS 2 Foxy. How can I do it?
My CPP code:
void my_callback(const sensor_msgs::msg::PointCloud::SharedPtr msg)
{
    // cloud_in should be the PointCloud message
    pcl::PointCloud<pcl::PointXYZ> cloud_in;
    pcl::PointCloud<pcl::PointXYZ> cloud_out;

    geometry_msgs::msg::TransformStamped transform;

    try
    {
        transform = tfBuffer_->lookupTransform("camera_frame", msg->header.frame_id, tf2::TimePointZero);
        pcl_ros::transformPointCloud(cloud_in, cloud_out, transform);
    }
    catch (tf2::TransformException &ex)
    {
        RCLCPP_ERROR(this->get_logger(), "Transform error: %s", ex.what());
        return;
    }
}

A:

Welcome to Robotics Stack Exchange!
I have noticed several concerns with your code snippet, which I would like to address below:

Change the signature of your callback to receive sensor_msgs::msg::PointCloud2 instead of sensor_msgs::msg::PointCloud. Below is an example:
void my_callback(const sensor_msgs::msg::PointCloud2::SharedPtr msg)

Use pcl::PCLPointCloud2 instead of pcl::PointCloud<pcl::PointXYZ>.
Use pcl_conversions::toPCL to convert sensor_msgs::msg::PointCloud2 to pcl::PCLPointCloud2 as shown below:
pcl::PCLPointCloud2::Ptr cloud (new pcl::PCLPointCloud2());
// Convert ROS2 Pointcloud2 to PCL Pointcloud2
//   Don't foerget to add followings:
//     #include <pcl_conversions/pcl_conversions.h>
//     find_package(pcl_conversions REQUIRED)
pcl_conversions::toPCL(*msg,*cloud);

Finally, you should be able to use pcl_ros::transformPointCloud to transform your point cloud from base_link to camera_link.

