Q:

Steps to use IR sensor

Hi,
I built an infrared sensor ring, but I can't handle how to use it to navigate TurtleBot 2. I can show distances send by sensors in RViz (using LaserScan messages) but I don't know how to use these data to update costmap. I use the default TurtleBot launch files, because I also use Kinect, bumpers etc. and I want to add IR sensors for this configuration. Please tell me what steps should I take having hardware and data in correct format ready.
Best reagards

Originally posted by dawid.wolski on ROS Answers with karma: 3 on 2015-01-05
Post score: 0

A:

I saw also this question from you; looks good but you have the infrared scan in the same z_voxel as the kinect (min/max_obstacle_height are the same for both). You should have z_voxels = 3, and use one for bumpers, one for infrared and one for the kinect, ensuring tat min/max_obstacle_height values lay within the z-voxel limits.
In my case I use a ring of sonars instead of infrared, but the integration with navi stack is the same. However, I publish the sonar readings as sensor/msgs/Range and use range_sensor_layer to add them to the costmap. You don't need to do this, really; if you are using typical Sharp IR sensors, that have very narrow fov and are not very noisy, merge them in a laser scan is fine.

Originally posted by jorge with karma: 2284 on 2015-01-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by dawid.wolski on 2015-01-12:
Hi jorge, it looks like my only problem was z_voxels variable set to 2 instead of 3 :)
To prevent noises I use capacitors and it is enough, if you will use IR sensors check this
Thank you
Comment by jorge on 2015-01-12:
I guess you can have problems with one kind of sensor interfering the others if you have more than one in the same z-voxel; to my understanding you should add each source to its own layer in the voxel grid, so one sensor doesn't clear the obstacles marked by others. But fine if it works as it is!
Comment by jorge on 2015-01-12:
I also experimented with a IR sensors ring: http://kobuki.yujinrobot.com/home-en/documentation/howtos/ir-sensors-ring, and yes, absolutly need capacitors on the sensors!
Comment by miguel on 2015-06-22:
Hi Jorge, I am currently publishing my 3 sonar sensor readings over ROS using the range messages as you are, is there a need to use the navigation stack? I would think there is a need but i am not sure how to publish the range msgs to the navigation stack as it does not support them?
Comment by miguel on 2015-06-22:
Does the costmap require the navigation stack in other words.
Comment by jorge on 2015-06-23:
mmm...  not sure what you mean... you can use your sonars readings to avoid obstacles with move_base or with any other obstacle avoidance software of your choice. But to mark obstacles in the move_base's costmaps you need the  range_sensor_layer package
Comment by miguel on 2015-06-23:
Ok thank you.

