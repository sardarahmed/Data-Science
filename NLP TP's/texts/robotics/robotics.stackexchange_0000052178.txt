Q:

install rqt plugin with rosbuild

Hello,
I am currently trying to write a plugin for rqt. But we are using fuerte in our project, which means that we can not use catkin. I followed the tutorial (sorry that I could not provide the link, but this program gave an error that I have not enough karma to post links) until the point were I need to install the plugin because it is not explained how to do this in rosbuild. Has anyone done that before and could tell me how to do this?
Cheers
Daniel Reuter

Originally posted by Daniel Robin Reuter on ROS Answers with karma: 71 on 2013-06-21
Post score: 3

A:

After some search in the rqt_rviz package I finally was able to let rqt_gui detect my C++ plugin. I will try to describe what I needed to do (those things are only useful for c++ plugins) and what sometimes really confused me (correct me if I got something wrong, I will use the package name rqt_something and the classes name will be MyGUIClass):

The package name (rqt_something) must also be the namespace (rqt_something::MyGUIClass)
In the plugin.xml the very first line must be changed to <library path="lib/librqt_something">
The second line does also differ from the example (because we are using c++)

<class name="rqt_seneka/MyGUIClass" type="rqt_something::MyGUIClass" base_class_type="rqt_gui_cpp::Plugin">

You must add the following lines in the CMakeLists.txt before the rosbuild_add_library and after invoking the moc:

rosbuild_include(pluginlib hide_plugin_symbols)
pluginlib_hide_plugin_symbols(rqt_something MyGUIClass)
This should work with the example code from the
C++ specific tutorial.
If you want to use a .ui file (in this case myguiclass_widget.ui) you should put in in the resource folder and add the following lines to your CMakeLists.txt:
qt_wrap_ui(ui_MyGUIClass ui_MyGUIClass_HDRS ui_MyGUIClass_SRCS resource/myguiclass_widget.ui)

include_directories(${CMAKE_BINARY_DIR})

#Here comes the moc-part

#Add ${ui_MyGUIClass_HDRS} to the sources of the library as done in this example
rosbuild_add_library(${PROJECT_NAME} ${rqt_something_SRCS} ${rqt_something_MOCS} ${ui_MyGUIClass_HDRS})

I hope I did not forget anything. Maybe somebody could link to this question in the tutorials.

Originally posted by Daniel Robin Reuter with karma: 71 on 2013-06-23
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by 130s on 2013-06-24:
@Daniel Robin Reuter I'm glad that you figured it out! I added a link here to this QA thread. Also, please consider "upvote" other answers if they helped you ;)
Comment by goshawk on 2014-07-15:
What if we are using python plugins?
Comment by Daniel Robin Reuter on 2014-07-15:
@goshawk if you are using python you should not have any problems. If you experience any problems don't hesitate on asking me :)
Comment by goshawk on 2014-08-01:
@Daniel Robin Reuter I made my rqt plugin using python & QT designer to build my .ui. The only problem is that I can't see the first instance of the plugin even though it shows it as running under the running tab. But when I launch another one I can see the plugin and I can close the first instance.
Comment by Daniel Robin Reuter on 2014-08-04:
@goshawk Could you please open a new question and provide the console output?

