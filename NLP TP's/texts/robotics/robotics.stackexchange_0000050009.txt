Q:

convert fuerte package to groovy

Hi!
I found a line-following package (https://github.com/robotictang/eddiebot_line_follower) that was originally made for fuerte, and I would like to use it groovy. The rosmake compilation generates errors probably due to the incompatibilities between groovy and fuerte. What can I do, is there any description or tutorial that helps to convert between the different ROS versions?

Originally posted by ZoltanS on ROS Answers with karma: 248 on 2013-04-03
Post score: 2

Original comments
Comment by freadx on 2013-04-03:
I guess ROS Packages are not forward compatible.
Comment by jarvisschultz on 2013-04-03:
I don't think that is quite a fair assertion.  Most ROS packages work on multiple versions with no changes.  I'm unsure exactly what error @ZoltanS is encountering, but looking into the new catkin build tools would be a good place to start.  The eddiebot package doesn't even have a package.xml

A:

In this case, the issue is that eddiebot_line_follower uses CvBridge.h, which was marked as deprecated in fuerte and removed in groovy.
To get the package to work in groovy, you'll need to update eddiebot_line_follower to work with the current cv_bridge API.  The following changes get the code to compile on my machine (under groovy):
 40 //#include <cv_bridge/CvBridge.h>

103 cv::Mat imgMat = cv_bridge::toCvCopy(msg, "rgb8")->image;
104 IplImage* img = new IplImage(imgMat);

238 cv_bridge::CvImage tmpImg(std_msgs::Header(), "rgb8", cv::Mat(img));
239 sensor_msgs::ImagePtr out = tmpImg.toImageMsg();

NOTE: this trivial mod introduces a small memory leak (IplImage header).  You should add the appropriate de-allocation call later to release the memory, if you intend to use this for anything other than testing purposes

Originally posted by Jeremy Zoss with karma: 4976 on 2013-04-03
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ZoltanS on 2013-04-05:
Hi Jeremy, thanks it worked! Finally, it can be compiled.

