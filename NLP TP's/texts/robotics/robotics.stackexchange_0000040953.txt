Q:

nested substitution args in launch files

Hi,
I'm writing a launch file and I want to pass a package name as an argument. The launch file should then look for the appropriate package. I wrote the following:
<arg name="robot" default="mh5_mesh" />
<include file="$(find $(arg robot) ... />

But when I run this, roslaunch complains:
Dollar signs '$' cannot be inside of substitution args
Is there any way around this? How else can I pass a variable to $(find)? Is there some other method I should be using?
Thanks!

Originally posted by somudrog on ROS Answers with karma: 55 on 2012-05-30
Post score: 3

Original comments
Comment by Proc√≥pio on 2019-07-11:
I updated the correct answer as there has been new solutions developed since this question has been asked.

A:

A solution to this problem has been added to roslaunch version 1.12.1, released on April 18, 2016. (ATM the debian repos are at version 1.12.0, so you'll either have to wait or download the github sources)
roslaunch 1.12.1 adds support for evaluation of arbitrary python expressions using the syntax $(eval <expression>). With this change, the following is possible:
<arg name="robot" default="mh5_mesh" />
<include file="$(eval find(arg('robot')) + '...')"/>

args are available as python variables, so the following is equivalent:
<arg name="robot" default="mh5_mesh" />
<include file="$(eval find(robot) + '...')"/>

Originally posted by juztamau5 with karma: 86 on 2016-06-03
This answer was ACCEPTED on the original site
Post score: 6

