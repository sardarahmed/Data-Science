Q:

rtabmapviz process dies early

Precursor:
$ roscore
$ roslaunch realsense_camera r200_nodelet_rgbd.launch

What's going on here? Why is rtabmapviz dying so quickly?
$ roslaunch rtabmap_ros rgbd_mapping.launch 
... logging to /home/jackson/.ros/log/b33ea4b2-9570-11e6-b676-a0999b17aec5/roslaunch-jackson-MacBookPro-6794.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://192.168.1.100:42536/

SUMMARY
========

PARAMETERS
 * /rosdistro: kinetic
 * /rosversion: 1.12.5
 * /rtabmap/rgbd_odometry/approx_sync: True
 * /rtabmap/rgbd_odometry/config_path: 
 * /rtabmap/rgbd_odometry/frame_id: camera_link
 * /rtabmap/rgbd_odometry/queue_size: 10
 * /rtabmap/rgbd_odometry/wait_for_transform_duration: 0.2
 * /rtabmap/rtabmap/Mem/IncrementalMemory: true
 * /rtabmap/rtabmap/Mem/InitWMWithAllNodes: false
 * /rtabmap/rtabmap/approx_sync: True
 * /rtabmap/rtabmap/config_path: 
 * /rtabmap/rtabmap/database_path: ~/.ros/rtabmap.db
 * /rtabmap/rtabmap/frame_id: camera_link
 * /rtabmap/rtabmap/odom_frame_id: 
 * /rtabmap/rtabmap/queue_size: 10
 * /rtabmap/rtabmap/subscribe_depth: True
 * /rtabmap/rtabmap/subscribe_scan: False
 * /rtabmap/rtabmap/subscribe_scan_cloud: False
 * /rtabmap/rtabmap/subscribe_stereo: False
 * /rtabmap/rtabmap/wait_for_transform_duration: 0.2
 * /rtabmap/rtabmapviz/approx_sync: True
 * /rtabmap/rtabmapviz/frame_id: camera_link
 * /rtabmap/rtabmapviz/odom_frame_id: 
 * /rtabmap/rtabmapviz/queue_size: 10
 * /rtabmap/rtabmapviz/subscribe_depth: True
 * /rtabmap/rtabmapviz/subscribe_odom_info: True
 * /rtabmap/rtabmapviz/subscribe_scan: False
 * /rtabmap/rtabmapviz/subscribe_scan_cloud: False
 * /rtabmap/rtabmapviz/subscribe_stereo: False
 * /rtabmap/rtabmapviz/wait_for_transform_duration: 0.2

NODES
  /rtabmap/
    rgbd_odometry (rtabmap_ros/rgbd_odometry)
    rtabmap (rtabmap_ros/rtabmap)
    rtabmapviz (rtabmap_ros/rtabmapviz)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
process[rtabmap/rgbd_odometry-1]: started with pid [6812]
process[rtabmap/rtabmap-2]: started with pid [6813]
process[rtabmap/rtabmapviz-3]: started with pid [6814]
[ INFO] [1476822262.278703499]: Starting node...
[ INFO] [1476822262.300688429]: Initializing nodelet with 8 worker threads.
[ INFO] [1476822262.306455845]: Initializing nodelet with 8 worker threads.
[ INFO] [1476822262.477047306]: Starting node...
[ INFO] [1476822262.485657885]: /rtabmap/rtabmap(maps): grid_cell_size             = 0.050000
[ INFO] [1476822262.485687607]: /rtabmap/rtabmap(maps): grid_incremental           = false
[ INFO] [1476822262.485700524]: /rtabmap/rtabmap(maps): grid_size                  = 0.000000
[ INFO] [1476822262.485714750]: /rtabmap/rtabmap(maps): grid_eroded                = false
[ INFO] [1476822262.485728745]: /rtabmap/rtabmap(maps): grid_footprint_radius      = 0.000000
[ INFO] [1476822262.485744427]: /rtabmap/rtabmap(maps): map_filter_radius          = 0.000000
[ INFO] [1476822262.485761776]: /rtabmap/rtabmap(maps): map_filter_angle           = 30.000000
[ INFO] [1476822262.485777355]: /rtabmap/rtabmap(maps): map_cleanup                = true
[ INFO] [1476822262.485793033]: /rtabmap/rtabmap(maps): map_negative_poses_ignored = false
[ INFO] [1476822262.485808450]: /rtabmap/rtabmap(maps): cloud_output_voxelized     = true
[ INFO] [1476822262.485823584]: /rtabmap/rtabmap(maps): cloud_subtract_filtering   = false
[ INFO] [1476822262.485838920]: /rtabmap/rtabmap(maps): cloud_subtract_filtering_min_neighbors = 2
[ INFO] [1476822262.534937495]: rtabmap: frame_id      = camera_link
[ INFO] [1476822262.534964457]: rtabmap: map_frame_id  = map
[ INFO] [1476822262.534977520]: rtabmap: tf_delay      = 0.050000
[ INFO] [1476822262.534991264]: rtabmap: tf_tolerance  = 0.100000
[ INFO] [1476822262.535003776]: rtabmap: odom_sensor_sync   = false
[ INFO] [1476822262.575590504]: rtabmapviz: Using configuration from "/home/jackson/catkin_ws/src/rtabmap_ros/launch/config/rgbd_gui.ini"
[ INFO] [1476822262.843327416]: Setting RTAB-Map parameter "Mem/IncrementalMemory"="true"
[ INFO] [1476822262.844464265]: Setting RTAB-Map parameter "Mem/InitWMWithAllNodes"="false"
[ INFO] [1476822263.002834453]: 
/rtabmap/rgbd_odometry subscribed to (approx sync):
   /camera/rgb/image_rect_color,
   /camera/depth_registered/image_raw,
   /camera/rgb/camera_info
[rtabmap/rtabmapviz-3] process has died [pid 6814, exit code -11, cmd /home/jackson/catkin_ws/devel/lib/rtabmap_ros/rtabmapviz -d /home/jackson/catkin_ws/src/rtabmap_ros/launch/config/rgbd_gui.ini rgb/image:=/camera/rgb/image_rect_color depth/image:=/camera/depth_registered/image_raw rgb/camera_info:=/camera/rgb/camera_info left/image_rect:=/stereo_camera/left/image_rect_color right/image_rect:=/stereo_camera/right/image_rect left/camera_info:=/stereo_camera/left/camera_info right/camera_info:=/stereo_camera/right/camera_info scan:=/scan scan_cloud:=/scan_cloud __name:=rtabmapviz __log:=/home/jackson/.ros/log/b33ea4b2-9570-11e6-b676-a0999b17aec5/rtabmap-rtabmapviz-3.log].
log file: /home/jackson/.ros/log/b33ea4b2-9570-11e6-b676-a0999b17aec5/rtabmap-rtabmapviz-3*.log
[ INFO] [1476822263.329735188]: RTAB-Map detection rate = 1.000000 Hz
[ INFO] [1476822263.329791193]: rtabmap: Using database from "/home/jackson/.ros/rtabmap.db".
[ INFO] [1476822263.336897872]: rtabmap: Database version = "0.11.11".
[ INFO] [1476822263.361868190]: /rtabmap/rtabmap: queue_size    = 10
[ INFO] [1476822263.361902163]: /rtabmap/rtabmap: rgbd_cameras = 1
[ INFO] [1476822263.361918987]: /rtabmap/rtabmap: approx_sync   = true
[ INFO] [1476822263.361975018]: Setup depth callback
[ INFO] [1476822263.427239210]: 
/rtabmap/rtabmap subscribed to (approx sync):
   /rtabmap/odom,
   /camera/rgb/image_rect_color,
   /camera/depth_registered/image_raw,
   /camera/rgb/camera_info
[ INFO] [1476822263.427351508]: rtabmap 0.11.11 started...
[ WARN] [1476822268.003065722]: /rtabmap/rgbd_odometry: Did not receive data since 5 seconds! Make sure the input topics are published ("$ rostopic hz my_topic") and the timestamps in their header are set. 
/rtabmap/rgbd_odometry subscribed to (approx sync):
   /camera/rgb/image_rect_color,
   /camera/depth_registered/image_raw,
   /camera/rgb/camera_info
[ WARN] [1476822268.427432338]: /rtabmap/rtabmap: Did not receive data since 5 seconds! Make sure the input topics are published ("$ rostopic hz my_topic") and the timestamps in their header are set. If topics are coming from different computers, make sure the clocks of the computers are synchronized ("ntpdate"). If topics are not published at the same rate, you could increase "queue_size" parameter (current=10).
/rtabmap/rtabmap subscribed to (approx sync):
   /rtabmap/odom,
   /camera/rgb/image_rect_color,
   /camera/depth_registered/image_raw,
   /camera/rgb/camera_info
[ WARN] [1476822273.003257687]: /rtabmap/rgbd_odometry: Did not receive data since 5 seconds! Make sure the input topics are published ("$ rostopic hz my_topic") and the timestamps in their header are set. 
/rtabmap/rgbd_odometry subscribed to (approx sync):
   /camera/rgb/image_rect_color,
   /camera/depth_registered/image_raw,
   /camera/rgb/camera_info
[ WARN] [1476822273.427572552]: /rtabmap/rtabmap: Did not receive data since 5 seconds! Make sure the input topics are published ("$ rostopic hz my_topic") and the timestamps in their header are set. If topics are coming from different computers, make sure the clocks of the computers are synchronized ("ntpdate"). If topics are not published at the same rate, you could increase "queue_size" parameter (current=10).
/rtabmap/rtabmap subscribed to (approx sync):
   /rtabmap/odom,
   /camera/rgb/image_rect_color,
   /camera/depth_registered/image_raw,
   /camera/rgb/camera_info

Originally posted by jacksonkr_ on ROS Answers with karma: 396 on 2016-10-18
Post score: 0

Original comments
Comment by matlabbe on 2016-10-23:
This could be a graphic problem (as OpenGL/VTK/Qt5 is used). For the other nodes, they tell that they are not receiving any data.
Comment by matlabbe on 2016-10-23:
Workaround, try RVIZ instead. If standalone $ rtabmap can be started without problems, this could be a linked libraries problem (on runtime it is not the same libraries used than on build, see $ ldd rtabmapviz).

A:

This error has gone away at this point. Here's my thoughts on what was causing it and why it's now gone.
A) VirtualBox (vm) gpu issues:
I'm not sure I was getting this error in the VM or on dual boot, regardless vm makes sense because rviz would crash as well. The get rviz working I had to disable gpu usage and stick with straight cpu. This is most likely what was happening.
B) librealsense api conflicts:
ros-[distro]-librealsense and librealsense compiled from source don't see to like each other. That is, because they are causing mixed dependencies and when an API isn't matched, things break. That being said, I've had the nodelet crash because of an api mismatch before but I was at least alerted of the issue, so I doubt it was involved here at all.

Originally posted by jacksonkr_ with karma: 396 on 2016-10-24
This answer was ACCEPTED on the original site
Post score: 0

