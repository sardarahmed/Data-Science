Q:

set_pose Breaks robot_localization

Running the ekf_se_odom node with test1.bag I run into a problem when I publish /set_pose from RVIZ.
Upon publication to the set pose topic the odometry (viewable in RVIZ) stops moving. It remains fixed at the point where I initialized the new pose, and when I echo /odometry/filtered I see new messages are being published, but the pose is not changing, while the covariance continues to explode. This is  a problem I ran into across two separate robot_localization setups I have, which usually work under all other conditions.
I imagine this maybe has something to do with RVIZ itself, but if someone has run into this before, or has some ideas to throw around, please let me know! And also if you need more information I can post that ASAP. This is something I have experienced in both melodic and kinetic.
Thanks,
Jack

Originally posted by JackB on ROS Answers with karma: 977 on 2020-10-05
Post score: 0

A:

How are you playing back your bag file? What command are you using? My first guess is that you aren't using --clock (or maybe it's that you are). Then you send a set_pose command, and the filter resets itself, but the filter will not allow any measurements that are older than your set_pose time stamp, so all the bagged messages are ignored.
In any case, the time stamp in your set_pose publication needs to be based on the same clock as the bag.

Originally posted by Tom Moore with karma: 13689 on 2020-10-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by JackB on 2020-10-08:
That was it, thanks!
Comment by florian on 2022-02-22:
Hey.
I'm dealing with the same issue. What exactly solved the problem? Did you set use_sim_time to be True, or did you set explicitly the time stamp when executing set_pose?

