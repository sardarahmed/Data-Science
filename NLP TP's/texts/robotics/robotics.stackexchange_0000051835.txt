Q:

openni depth image problem

Can someone tell me why my depth image looks like that?
I decompress my images of a bag like that:
<node name="DEPTH_decompressed" type="republish" pkg="image_transport" output="screen" args="compressed in:=/openni/depth_registered/image_raw raw out:=/openni/depth_registered/image_raw" required="true" />

When I look at the thumbnails in rosbag, the image looks fine but when I use rviz or RGBD_SLAM, the image looks like 2 depth images side by side...
My system: Ubuntu 12.04 64Bit - ROS Fuerte

Originally posted by madmax on ROS Answers with karma: 496 on 2013-06-10
Post score: 1

A:

Not sure if that is the problem, but it looks like your out topic is the same as the in topic. Try changing the name of the out topic and set rgbdslam to listen to that topic.
UPDATE:
I can reproduce the problem using the bagfile linked below and the following commands (in various terminals):
roscore
rosparam set use_sim_time true
rosbag play -l --clock tunnel_openni.bag
rosrun image_transport republish compressed in:=/openni/depth_registered/image_raw raw out:=/openni/depth_registered/image_raw
rosrun image_view image_view image:=/openni/depth_registered/image_raw raw

I also see the correct thumbnails in rxbag. The camera_info message seems correct. So I guess this is either a bug in your bagfile recording setup or the camera driver. I do not know how to solve this or what could be the cause. Sorry. My system is ros fuerte on Ubuntu 11.10.

Originally posted by Felix Endres with karma: 6468 on 2013-06-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by madmax on 2013-06-10:
No, that doesn't make a difference.
Comment by Felix Endres on 2013-06-11:
Do rviz and image_view display the depth image correctly?
Comment by madmax on 2013-06-11:
No, only when I directly look with the rqt plugin 'rosbag' on the thumbnails of the depth image topic they look correct.
Comment by Felix Endres on 2013-06-13:
That is weird. Could you make a short bag file available for me for debugging?
Comment by madmax on 2013-06-16:
Here is a little bag file. You just have to decompress the images. https://dl.dropboxusercontent.com/u/15268092/tunnel_openni.bag
Comment by madmax on 2013-06-20:
Thank you for looking at the bag file! Seems like the data is unusable...

