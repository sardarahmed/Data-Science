Q:

initialize pr2 posture in gazebo

Does anybody know of a way to initialize the PR2 posture in gazebo to something specific?
Currently the robot is initialized with the two hands pointing to the front and I move the arms and the head of the robot, but this is quite slow in simulation, and this will be repeated many times automatically.
Any suggestions about how to save the robot position? If I save the gazebo world, do you think I will be able to re-summon the PR2?

Originally posted by Dimitar Simeonov on ROS Answers with karma: 535 on 2011-08-24
Post score: 0

A:

There is a ros service call: /gazebo/set_model_configuration that sets joint angles for a robot.  However, for PR2, you might have to call /pr2_controller_manager/switch_controller before and after to disable and re-enable affected mechanism controllers trying to hold positions; otherwise the joints configured will try to return to the previous state immediately after the call.
Please reference gazebo for documentation on the service call.  There is a rough example I've put together for testing here as well.
As a python example, I've added a flag in the spawn_model script, so you can start your robot with certain joints at predefined positions, for example:
rosrun gazebo spawn_model -urdf -param robot_description -model pr2 -J head_tilt_joint 0.2 -J head_pan_joint 0.5

Lastly, with regards to saving/resuming simulation state, we don't have anything implemented so far.  Most likely by G-turtle.

Originally posted by hsu with karma: 5780 on 2011-08-24
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by J_Schaefer on 2016-08-24:
This flag doesn't work in Indigo. Any suggestions how to set the initial pose?
Regards, J_Schaefer
Comment by johnyang on 2016-09-19:
It doesn't work for me as well. I've read somewhere it is still to be fixed, but I wonder if any solution available now?

