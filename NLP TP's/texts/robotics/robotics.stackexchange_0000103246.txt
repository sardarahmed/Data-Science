Q:

When should you set use_sim_time to true

Hello all,
I am currently a little bit confused by when should I set the 'use_sim_time' parameter in my node to be true?
Because from looking at the example in some projects, such as Nav2, all their node launch with 'use_sim_time' to be true.
But then, when I looked at other projects, such as nmea, and imu_filter, they did not have use_sim_time to be true initially.
Thus, I am wondering if my understanding below is correct?
I should only turn on 'use_sim_time' to be true for any code that is not related to any physical hardware, such as GPS, IMU, ..
And for those nodes involving interacting with the physical component of the robot, should I set 'use_sim_time' to false?
I guess my question is, for what kind of node should I set 'use_sim_time' to be false or true?
Thanks in advance!

Originally posted by sdu568 on ROS Answers with karma: 45 on 2023-05-06
Post score: 0

A:

use_sim_time should typically only be set to true if you are using a simulator/simulation environment, and your ROS nodes interface (ie: get their data, and send their data) with that simulator/simulation environment.
There are some situations in which more 'advanced' usage of it could be used to run partial systems on simulated time, but I would suggest to not do that if you're just starting out.

Thus, I am wondering if my understanding below is correct? I should only turn on 'use_sim_time' to be true for any code that is not related to any physical hardware, such as GPS, IMU, .. And for those nodes involving interacting with the physical component of the robot, should I set 'use_sim_time' to false?

Driver nodes (what you describe as "nodes involving interacting with the physical component of the robot" can typically not be used with simulated hardware (ie: a robot in Gazebo), so they are typically not started in such situations.
I've always considered Gazebo sensor and actuator plugins the equivalent of ROS drivers for real hw.
So, no, I don't believe what you write is correct.
I would suggest the following rule of thumb:

using a simulation? Set use_sim_time to true for all nodes you start
otherwise: set use_sim_time to false (or: don't set the parameter at all, as false is the default)

Originally posted by gvdhoorn with karma: 86574 on 2023-05-08
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by scoeerg on 2023-07-26:
That's all fair, and intuitively correct. But what exactly changes when the flag is toggled? I've had some real Hardware (Sensors) running just fine with use_sim_time True and vice versa some gazebo simulation + Nav2 Nodes running fine with False.

