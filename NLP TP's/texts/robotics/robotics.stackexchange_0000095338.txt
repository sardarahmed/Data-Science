Q:

Fusing odom, imu, magnetometer with robot localization

Hi, I'm looking for information about fusing odometry with imu and magnetometer. Just in 2D.
My sensors are connected to an embbeded systems and I'm publishing raw data to ROS using rosserial.
Right now I'm publishing odometry, IMU (raw Gyro and accel data) and raw (after calibration) magnetometer data. I'm not providing orientation data, just raw data.
What is better, fusing all raw data in robot_localization? make some complimentary filter between gyro and magnetometer and publish orientation in IMU msg? has someone a config file for robot_localization with this sensors?
I'm not sure what magneticfield data could be added to RL config file. I think I need to, at least, calculate heading with magnetometer an publish it...
thank

Originally posted by elgarbe on ROS Answers with karma: 106 on 2020-04-07
Post score: 0

A:

If it were me, I'd feed the IMU and magnetometer data to imu_filter_madwick. Then I'd fuse the output of that node with the wheel odometry data in an r_l EKF instance. That's a pretty straightforward setup, and the EKF config example would be a good place to start.

Originally posted by Tom Moore with karma: 13689 on 2020-05-05
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by elgarbe on 2020-05-05:
Thank you very much Tom for you time. I will do that.
Comment by p_user2001 on 2021-08-31:
Hi Tom, Could you kindly let me know what an r_l EKF instance is? Thank you
Comment by Tom Moore on 2021-09-06:
r_l = robot_localization
EKF instance = Extended Kalman Filter node instance. As in, an instance of the ekf_localization_node.

