Q:

sensor_msgs::CvBridge::cvToImgMsg in Groovy?

Hello everyone,
Following the tutorial in Ros Wiki for creating a simple image publisher (from a set of .png files) http://ros.org/wiki/image_transport/Tutorials/PublishingImages I found a compilation error in groovy (in fuerte everything works fine):
cv::WImageBuffer3_b image(cvLoadImage(filePath.c_str(), CV_LOAD_IMAGE_COLOR));
sensor_msgs::ImagePtr msg = sensor_msgs::CvBridge::cvToImgMsg(image.Ipl(), "bgr8");

This is the error I found:
 error: ‘sensor_msgs::CvBridge’ has not been declared

I suppose that the API has changed, but I cannot find an alternative way. Can somebody help me?
Thank you in advance

Originally posted by Javier J. Salmerón García on ROS Answers with karma: 114 on 2013-04-09
Post score: 2

A:

I managed to sort it out the following way, using this answer as a reference http://answers.ros.org/question/9765/how-to-convert-cvmat-to-sensor_msgsimageptr/?answer=14282#post-id-14282 :
cv::WImageBuffer3_b image(
                    cvLoadImage(filePath.c_str(), CV_LOAD_IMAGE_COLOR));
            cv::Mat imageMat(image.Ipl());

            cv_bridge::CvImage out_msg;
            out_msg.encoding = sensor_msgs::image_encodings::BGR8; 
            out_msg.image    = imageMat;
            out_msg.header.seq = i;
            out_msg.header.frame_id = i;
            out_msg.header.stamp = ros::Time::now();

            ci->header.seq = i;
            ci->header.frame_id = i;
            ci->header.stamp = out_msg.header.stamp;

            pub.publish(out_msg.toImageMsg(), ci);

Originally posted by Javier J. Salmerón García with karma: 114 on 2013-04-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by balakumar-s on 2013-09-07:
What does i refer to? I am trying to convert Mat to sensor_msgs::image need help with header values.

