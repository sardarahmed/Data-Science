Q:

Building Rviz/Ogre on OSX Mountain Lion

I'm trying to compile Rviz on OSX (10.8) and am having trouble getting the Ogre dependency to compile.  It fails with the following error:
BUILD FAILED: Plugin_CgProgramManager.dylib not created.   Is nvidia-cg-toolkit installed correctly?
I found a previous discussion of this issue for Lion here: http://answers.ros.org/question/12825/more-problems-building-ogre-on-osx-lion/
but trying the suggestions there does not fix the issue.
The Nvidia Cg toolkit (version 3.0) was installed from the package linked to from the ROS OSX installation instructions.  The file mentioned in the previous question "/usr/local/share/ros/nvidia-cg-version.installed" does not exist, but running "rosdep install ogre" states that all dependencies are correctly installed.  Cmake also seems to correctly find the Cg Framework installation directory (/Library/Frameworks/Cg.framework)
Any suggestions?
Thanks.
EDIT: The full build output can be found at:
https://gist.github.com/3625440
EDIT 2:  It actually looks like the error might be caused by an issue with pbxcp being moved in XCode 4.3.  There is a patch dealing with the issue here:
https://code.ros.org/trac/ros-pkg/browser/stacks/visualization_common/trunk/ogre/ditto_pbxcp_osx.patch?rev=39177
but the patch fails to install on my system when trying to patch "Samples/Browser/CMakeLists.txt"

Originally posted by david.hodo on ROS Answers with karma: 395 on 2012-09-04
Post score: 1

Original comments
Comment by WilliamWoodall on 2012-09-04:
Is that the full error? I have noticed that it will print this message is the build fails for some other reason.  Maybe post the full build log in a gist?

A:

I have a clean patch for visualization_common-1.8.2:
https://gist.github.com/3627336
To apply it:

Get a clean copy of visualization_common
cd /path/to/visualization_common
patch -p0 < /path/to/the/patch/visualization_common-1.8.2-osx_pbxcp_ditto.patch

Hope this helps.  I will make a ticket to get it upstream as soon as I get back to California.
EDIT: Also: http://www.ros.org/wiki/fuerte/Installation/OSX/Homebrew/Source#Ogre_Fails
EDIT: Ticket: https://code.ros.org/trac/ros-pkg/ticket/5549

Originally posted by WilliamWoodall with karma: 1626 on 2012-09-04
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by david.hodo on 2012-09-04:
That fixed it.  Thanks a lot!  Following the instructions on the OSX install wiki, I got vis_common 1.8.4 instead of 1.8.2 and had to remove the ditto_pbxcp_osx.patch that was already there prior to installing your patch.
Comment by WilliamWoodall on 2012-09-04:
Yeah, they never added the patch to the Makefile, and apparently never tested it...  So yeah.  Accept the answer. (I need karma).
Comment by david.hodo on 2012-09-04:
It won't let me accept it. Not sure why. EDIT: NVM, got it.
Comment by LucaGhera on 2012-10-11:
@WilliamWoodall Is this patch still working? I did all the install procedure (rosintsall ...)  today and rosmake ogre fails. When I try to use your patch it fails: patching file ogre/Makefile
The next patch would create the file ogre/ditto_pbxcp_osx.patch, which already exists!  Assume -R? [n] y
Comment by LucaGhera on 2012-10-11:
patching file ogre/ditto_pbxcp_osx.patch
Hunk #1 FAILED at 1.
File ogre/ditto_pbxcp_osx.patch is not empty after patch, as expected
1 out of 1 hunk FAILED -- saving rejects to file ogre/ditto_pbxcp_osx.patch.rej
Comment by LucaGhera on 2012-10-11:
@WilliamWoodall probabily the error is a bit different: https://gist.github.com/511aa86779c53f26365f. Should I open a new question?
Comment by WilliamWoodall on 2012-10-11:
You might have to remove that orge/ditto_....patch file before applying my patch, @david.hodo mentioned that above.

