Q:

dynamic obstacle problems with short range sensor

Hi all,
I got some problem in using move_base with short LaserScan sensor.
Here is my condition:

With short distance range sensor  (xv11 sensor, max range is 6M)
With a static map and the map contains lots of open space
Now I put an obstacle in front of the robot. Yes, I saw the obstacle shown in costmap.
Then, I removed the above obstacle from gazebo.
I found the obstacle is still there in costmap. I think it's because the range sensor can not reach the edge of the map,
so it got unknown readings for this area which I put an obstacle in previous step.

Any suggestion will be appreciated. Thanks!
Kevin Kuei

Originally posted by kevin.kuei.0321@gmail.com on ROS Answers with karma: 159 on 2015-10-28
Post score: 1

Original comments
Comment by miguel on 2015-10-28:
what is your raytrace_range parameter set to in the costmap?
Comment by kevin.kuei.0321@gmail.com on 2015-10-28:
raytrace_range=2.5 and obstacle_range=2.0, I put the obstacle at 1.5m in front and I saw the obstacle in costmap. Then, I removed the obstacle from gazebo. But the result is, the obstacle is still in costmap.

A:

Again, I will answer my own question.
I wrote a custom range filter, and this can be applied in obstacle observation sources in costmap_common_params.yaml
The logic is simple, if the laser range is large enough or Inf or Nan, then rewrite it to be another value which is slightly larger than your "obstacle_range" value.
https://github.com/wennycooper/learning_nav/blob/master/src/mybot_laser_obstacle_clearing_filter.cpp

Originally posted by kevin.kuei.0321@gmail.com with karma: 159 on 2015-11-01
This answer was ACCEPTED on the original site
Post score: 1

