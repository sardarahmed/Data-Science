Q:

Tf error after upgrading hydro

Hello,
after upgrading hydro I'm having the following problem:
the tf-node shows misbehavoiur even with the default launch-files i.e. I'm running the gazebo-launch files for turtlebot-navigation
roslaunch turtlebot_gazebo amcl_demo.launch map_file:=/path/to_my_map.yaml

Brings up the following Warning
[ WARN] [1390486537.516455089, 723.580000000]: Waiting on transform from base_footprint to map to become available before running costmap, tf error:

A rostopic list shows
/amcl/parameter_descriptions
/amcl/parameter_updates
/amcl_pose
/camera/depth/camera_info
/camera/depth/image_raw
/camera/depth/points
/camera/parameter_descriptions
/camera/parameter_updates
/camera/rgb/camera_info
/camera/rgb/image_raw
/camera/rgb/image_raw/compressed
/camera/rgb/image_raw/compressed/parameter_descriptions
/camera/rgb/image_raw/compressed/parameter_updates
/camera/rgb/image_raw/compressedDepth
/camera/rgb/image_raw/compressedDepth/parameter_descriptions
/camera/rgb/image_raw/compressedDepth/parameter_updates
/camera/rgb/image_raw/theora
/camera/rgb/image_raw/theora/parameter_descriptions
/camera/rgb/image_raw/theora/parameter_updates
/clock
/cmd_vel_mux/active
/cmd_vel_mux/input/navi
/cmd_vel_mux/input/safety_controller
/cmd_vel_mux/input/teleop
/cmd_vel_mux/parameter_descriptions
/cmd_vel_mux/parameter_updates
/gazebo/link_states
/gazebo/model_states
/gazebo/parameter_descriptions
/gazebo/parameter_updates
/gazebo/set_link_state
/gazebo/set_model_state
/initialpose
/joint_states
/kobuki_safety_controller/disable
/kobuki_safety_controller/enable
/kobuki_safety_controller/reset
/map
/map_metadata
/mobile_base/commands/motor_power
/mobile_base/commands/reset_odometry
/mobile_base/commands/velocity
/mobile_base/events/bumper
/mobile_base/events/cliff
/mobile_base/events/wheel_drop
/mobile_base/sensors/bumper_pointcloud
/mobile_base/sensors/core
/mobile_base/sensors/imu_data
/mobile_base_nodelet_manager/bond
/move_base/current_goal
/move_base/goal
/move_base_simple/goal
/navigation_velocity_smoother/parameter_descriptions
/navigation_velocity_smoother/parameter_updates
/navigation_velocity_smoother/raw_cmd_vel
/odom
/particlecloud
/rosout
/rosout_agg
/scan
/tf
/tf_static

In rvis the map is shown. Maybe stupid question the map is published under the topic "/map" ... and tf seems to look after "map". Did somebody experience the same problems during the last days after the upgrade?
Edit: Shouldn't be there a base_footprint topic?

Originally posted by carsten on ROS Answers with karma: 16 on 2014-01-23
Post score: 0

Original comments
Comment by dornhege on 2014-01-23:
This seems to be that amcl is not running. What outputs do you get. tf doesn't show up as individual topics.

A:

Hello dornhege,
after your reply I started my computer again and it worked. But after shutting down the move-base node and starting it again (doing so a few times) the problem occured again. But it is not easy reproducible. My first impression is that there could something wrong in the gazebo plugin which produces this output
Dbg Plugin model name: mobile_base
[ INFO] [1390494712.717836162, 0.010000000]: Will publish tf. [mobile_base]
[ INFO] [1390494712.722853967, 0.010000000]: GazeboRosKobuki plugin ready to go!   [mobile_base]

I have to restart the gazebo simulation and in most cases navigation launches successfully.
I will try to track this problem in future. But up to this point it is annoying because it worked without any problems before the upgrade.

Originally posted by carsten with karma: 16 on 2014-01-23
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by dornhege on 2014-01-24:
Try rosrun tf view_frames to see what is published by tf. If it's something due to gazebo it might be odometry missing.

