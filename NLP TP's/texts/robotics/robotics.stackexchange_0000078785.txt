Q:

rtabmap localization issue

Hi,
I am facing one issue during localization in rtabmap. When there is an dynamic obstacle in front of the robot an even during the navigation time map data gets some times disappears on rviz and the robot gets delocalized. Why this happens so? What is the solution for this so that there is continuous update of map from rtabmap? Please suggest as soon as possible. Thanks.
EDIT:

map_with_rviz.png

C:\fakepath\map_with_rviz.png
image description http://answers.ros.orghttps://ftp.osuosl.org/pub/ros/download.ros.org/downloads/se_migration/ros/14864792696605739.png

map_with_obstacle.png

C:\fakepath\map_with_obstacle.png
image description http://answers.ros.orghttps://ftp.osuosl.org/pub/ros/download.ros.org/downloads/se_migration/ros/14864793381481581.png

disappear_map_with_obstacle.png

C:\fakepath\map_with_delocalize.png
image description http://answers.ros.orghttps://ftp.osuosl.org/pub/ros/download.ros.org/downloads/se_migration/ros/14864794041882759.png

disappear_map_with_obstacle_1.png

C:\fakepath\map_with_delocalize_1.png
image description http://answers.ros.orghttps://ftp.osuosl.org/pub/ros/download.ros.org/downloads/se_migration/ros/14864794378132744.png

Originally posted by Atul Divekar on ROS Answers with karma: 26 on 2017-02-06
Post score: 0

Original comments
Comment by gvdhoorn on 2017-02-07:
Please don't link to images on cloud services, attach them to this post.
Please do this as soon as possible. Thanks.
Comment by Atul Divekar on 2017-02-07:
Thanks for suggestion I attached the screenshots.
Comment by matlabbe on 2017-02-07:
What happens between 2 and 3? Robot moved?
Comment by Atul Divekar on 2017-02-08:
Hello In 2nd image as you can see the the robot initial position as /base_link (frame ) when we give goal to the robot behind the Obstacle , the robot while avoiding the obstacle it loses its Global_map as in the 3rd image the /global_map has disappear , why this happens so please can you suggest me
Comment by Atul Divekar on 2017-02-08:
Also the local_map changes its behavior when the global_map gets disappear as seen in Image 3rd
Comment by matlabbe on 2017-02-08:
the local costmap should not change if the global map changes. Make sure your local costmap is in /odom frame, not /map frame. What is your fixed frame in RVIZ?
Comment by Atul Divekar on 2017-02-08:
Okay,and My fixed frame on rviz is /map frame
Comment by matlabbe on 2017-02-09:
What is the output on the terminal where rtabmap is launched?

A:

During localization, the map should not disappear even if the camera is obstructed. Do you refer to move_base local costmap or the grid_map published by rtabmap? In localization mode, rtabmap doesn't update the map. It may add current  seen obstacles but they should disappear if the obstacle is not anymore in the field of view of the sensor. If you have screenshots, it may help to see the problem.
cheers

Originally posted by matlabbe with karma: 6409 on 2017-02-06
This answer was ACCEPTED on the original site
Post score: 0

