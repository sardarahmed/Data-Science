Q:

Road elevation issue of using opendrive map in the ASSURE mapping tool

Hi all,
I am trying to use the ASSURE mapping tool to load a opendrive format map to convert it into a lanelet2 format map. After loading the opendrive map, the elevation of roads are not changing continuously but "stepwise" as below:

The screenshots of two specific points information are as below (it can be found they share a same z value):

From the opendrive map introduction, the elevation is calculated based on the following equation:

After checking the original file of the opendrive map, it seems the coefficients of the road are correctly given. So I expect the road elevation should change continuously.
The opendrive map format is openDRIVE 1.5, and I used the latest master branch of the ASSURE mapping tool. Please advise if you have any comments or suggestions. Thanks!

Originally posted by yougeyxt on ROS Answers with karma: 9 on 2021-06-21
Post score: 0

Original comments
Comment by yougeyxt on 2021-06-21:
Hi @Hatem, could you please take a look on this? Thanks.
Comment by Hatem on 2021-06-25:
Can you send me the OpenDRIVE map file. I need to reproduce the issue.
Comment by yougeyxt on 2021-06-25:
I have sent it. Thanks.

A:

Hello,
You problem has nothing to do with elevation.
Actually the problem in the Geometry section in the OpenDRIVE. The generating application using the parameter "pRange" which is not recommended to be used by default in the standard.
Currently assuremaptool doesn't support pRange="arcLength". I will add the support in next update.
For now you can regenerate the map using the default pRange option.
Regards,
Update: assuremappingtool will included a fix to this issue from 28th June 2021.

Originally posted by Hatem with karma: 443 on 2021-06-27
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by yougeyxt on 2021-06-27:
Hi Hatem,
Thanks a lot for helping look into it! I got it. So the pRange option assuremaptool currently support is "normalized"? However, it is a little bit hard to regenerate the map since it is provided by other groups. Do you have any suggestions or ideas for other tools that can support parsing the OpenDRIVE map with "arcLength" option and convert it to Lanelet2 map just as assuremaptool do?
Thanks!
Comment by Hatem on 2021-06-28:
check the tool again, I uploaded a fix
Comment by yougeyxt on 2021-07-01:
It works flawlessly, thanks for the fix :)!

