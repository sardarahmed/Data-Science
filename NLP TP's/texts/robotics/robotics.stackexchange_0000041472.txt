Q:

Is it the Hector Slam tf setting problem?

  Currently I have a Hokoyo Laser Range Finder, PC104 3353f(for onboard), a 

Microstrain 3DM-GX3-25
IMU and PC (ground PC) I am trying to achieve something similar to this video:               [http://www.gkmm.tu-darmstadt.de/rescue/?q=node/141]
However, I do not know how am I supposed to integrate the IMU with hector_slam.
  Now I am already able to get a map when there is only horizontal and slow 

movement.
But this "SearchDir angle change too large" error appears frequently when there is a fast movement or change in angle a bit...
  I launch the following launch file together to get the map : hokuyo test.launch

(default launch file) , microstarain_3dmgx2.launch (default launch file), geotiff_mapper.launch (default launch file) and hector_ugv.launch (but this i edit it a bit)
  This is the edited launch file from hector_ugv.launch(original given launch file<?xml version="1.0"?><launch><!--node pkg="rviz" type="rviz" name="rviz" args="-d $(find hector_slam_launch)/rviz_cfg/mapping_demo.vcg" /--><node pkg="hector_mapping" type="hector_mapping" name="hector_mapping" output="screen"><param name="scan_topic" value="/scan" /><param name="base_frame" value="base_stabilized" /><param name="map_frame"  value="map" /><param name="odom_frame" value="nav" /><param name="output_timing" value="false"/>

<param name="use_tf_scan_transformation" value="true" />
<param name="use_tf_pose_start_estimate" value="false"/>
<param name="pub_map_odom_transform" value="false" />

<param name="map_pub_period" value="1.0" />
<param name="map_resolution" value="0.05"/>
<param name="map_size" value="1024"/>

  when i type the "roswtf"command, i found the following error:

ERROR Communication with [/hokuyo] raised an error:
ERROR Communication with [/map_nav_broadcaster] raised an error:
ERROR Communication with [/nav_base_broadcaster] raised an error:
ERROR Communication with [/rosout] raised an error:
ERROR Communication with [/nav_foot_broadcaster] raised an error:
ERROR Communication with [/hector_mapping] raised an error:
ERROR Communication with [/nav_baselink_broadcaster] raised an error:
ERROR The following nodes should be connected but aren't:

/hector_mapping->/hector_mapping (/tf)
/hokuyo->/hector_mapping (/scan)
/nav_foot_broadcaster->/hector_mapping (/tf)
/nav_baselink_broadcaster->/hector_mapping (/tf)
/map_nav_broadcaster->/hector_mapping (/tf)
/nav_base_broadcaster->/hector_mapping (/tf)

Thank you in advanced for your help

Originally posted by jas on ROS Answers with karma: 33 on 2012-06-18
Post score: 1

A:

hi,
You may try this launch file. We use this one on a UAV (so no odometry) to created maps using hector_slam.
You have set-up a lot of static TFs which are looking not realy useful, e.g. your tree claims that /map is static linked to /nav which is static linked to /base_stabilized. But /base_stabilized moves around while the robot is moving, so it can not be static located in respect to the map/world.
<!-- Map update parameters -->
<param name="update_factor_free" value="0.4"/>
<param name="update_factor_occupied" value="0.7" />    
<param name="map_update_distance_thresh" value="0.2"/>
<param name="map_update_angle_thresh" value="0.06" />

<param name="pub_map_odom_transform" value="true"/>

<!--
  <param name="pub_drawings" value="true"/>
  <param name="pub_debug_output" value="true"/>
-->
</node>

<param name="hector_mapping/pub_map_odom_transform" value="true"/>

Originally posted by tlinder with karma: 663 on 2012-06-21
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jas on 2012-06-21:
Hi i have tried out this launch file but i got this error all the way when i roslaunch it, do you have any idea to correct it ..... [ERROR] [1340378473.595432783]: Trajectory Server: Transform from /map to /base_link failed: Frame id /map does not exist! Frames (1):     (Thanks you for your help)
Comment by tlinder on 2012-06-21:
Can you give me a few more infos: Which OS? Which ROS version? Which is the scan topic name? Just in case that you use ROS fuerte please ensure that you use the correct version of hector. The fuerte version is hosted here https://tu-darmstadt-ros-pkg.googlecode.com/svn/branches/fuerte
Comment by jas on 2012-06-23:
For the onboard PCM 3353f, i installed the lubuntu and ros-electric (bare bone no GUI tools) and for ground station pc,i installed ubuntu and ros-electric (full desktop version) scan topic name is (/scan) in the rviz laser topic name, for globe, both i used (/map).  (thanks in advance for helping)
Comment by jas on 2012-06-24:\
Comment by jas on 2012-06-24:\

