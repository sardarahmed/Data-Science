Q:

Jenkins build error on documentation

Hello,
I have a meta package called ros_arduino_bridge which I have indexed for documentation for ROS Electric, Fuerte, Groovy and Hydro.  Every once in awhile I receive an error report from Jenkins that looks like the report on this page and I reproduce below:
Stacktrace

Failed to generate messages by calling cmake for ['catkin_workspace for repository'].
Look in the console for cmake failures, search for "CMake Error"

Also, are you sure that the rosinstall files are pulling from the right branch for hydro? Check the repos below,
you can update information the ros_arduino_bridge.rosinstall and ros_arduino_bridge-depends.rosinstall files by submitting a pull request at
https://github.com/ros/rosdistro/hydro

Documentation rosinstall:
- git:
    local-name: ros_arduino_bridge
    uri: https://github.com/hbrobotics/ros_arduino_bridge.git
    version: hydro-devel

Depends rosinstall:
[]

In my fork of rosdistro I have the following entry in the distribution.yaml file for hydro:
ros_arduino_bridge:
  doc:
    type: git
    url: https://github.com/hbrobotics/ros_arduino_bridge.git
    version: hydro-devel

So I'm not sure what the problem is.  Can anybody help?
Thanks!
patrick

Originally posted by Pi Robot on ROS Answers with karma: 4046 on 2014-02-28
Post score: 0

A:

The fast answer first: because your package.xml file lacks the necessary build dependencies.
If you go to the console output of the job (http://jenkins.ros.org/job/doc-hydro-ros_arduino_bridge/lastBuild/console) and search for the "CMake Error" you will find the following error message:
CMake Error at /opt/ros/hydro/share/catkin_basic/cmake/catkin_basicConfig.cmake:67 (add_message_files):
  Unknown CMake command "add_message_files".

This is because genmsg (which you find_package() in order to generate messages) is not declared as a build dependency in your package.xml. The buildfarm will therefore not install it for your doc job (which does some weird optimization of yuor CMakeLists file to avoid a lot of compilation). Anyway your release build would fail for the same reason - probably with a better error message.
You need to at least add the following to your package.xml:
<build_depend>genmsg</build_depend>

But there is more stuff missing in your package.xml and CMakeLists.txt. You should follow the tutorials / documentation on how to write a package which contains messages and correctly export these information for other packages to use your messages: http://docs.ros.org/api/catkin/html/howto/building_msgs.html E.g. the usage of genmsg is discouraged - use message_generation instead.

Originally posted by Dirk Thomas with karma: 16276 on 2014-02-28
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Pi Robot on 2014-02-28:
Thank you Dirk.  Someone else actually did the initial catkinization of the ros_arduino_bridge package, but that is no excuse. :-)  I should be able to clean it up based on your suggestions.
Comment by Pi Robot on 2014-03-02:
After incorporating your suggested changes, the documentation builds without error now on Jenkins.  Thanks again.

