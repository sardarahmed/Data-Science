Q:

"SearchDir angle change too large" kills hector_mapping

Hi,
I've noticed that when sharp pose changes occur on my laser frame, the following error sometimes appears & kills hector_mapping:
SearchDir angle change too large

I was wondering: what exactly causes this, and if it is indeed linked to an unfeasible change of pose or laser scan data, what are the precise constraints on hector_mapping?
Thank you very much!
Ernest

Originally posted by Ernest on ROS Answers with karma: 341 on 2013-05-03
Post score: 0

A:

Specifying precise constraints is hard, as there are a multitude of factors that influence performance and can lead to things going well or not so well. The error message generally indicates that the scan alignment optimization step produces a unusually large angle change, making it very likely that it ends up with a wrong pose estimate. This normally shouldn't happen, but depends on the environment, sensors and motion of the platform. As seen here, the system works largely without problems even in challenging environments for us. For this reason, not a lot of work was put into catching scan matching failures. There certainly is some room for improvement in that regard, though and you could look into improving things for your robot.
What kind of sensors do you use and when do you see issues?

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2013-05-04
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Ernest on 2013-05-07:
Hi Stefan, yes I'm a big fan of that video! We are using a Hokuyo UTM-30LX. The problem happens when the LiDAR is subject to sharp pose changes, like when our platform runs into an obstacle... we're hoping we'll be able to avoid that situation (from HM's map & a Kinect) but in case it does:
Comment by Ernest on 2013-05-07:
do you have any tips to save the "state" of hector mapping & restart it?
Comment by Stefan Kohlbrecher on 2013-05-07:
The full internal state consists of the (multi-level) map and the current pose estimate of the robot. You could occassionally copy that and revert back to an earlier state if you detect a problem. Probably makes sense to either mail me directly or start new question about that.
Comment by Ernest on 2013-05-08:
OK - I have started a new question about that here: http://answers.ros.org/question/62407/how-to-save-the-state-of-hector_mapping-in-case-it-fails/
Thank you very much for your time,
Ernest

