Q:

How to compile C++ library inside ROS package?

I have a package structured as follows:
-include
-src
-my_submodule
  -include
  -src
  CMakeLists.txt
CMakeLists.txt
package.xml

The my_submodule folder is basically a C++ library that I want to compile along with my ROS package and use as a dependency. I could install my_submodule and use find_package(my_submodule), but I want to compile my_submodule along with the package.
What do I need to modify to compile my_submodule along with my package? The idea is that my_submodule is not dependent on ROS or my package, but I want to include without installing separately.

Originally posted by Ralff on ROS Answers with karma: 280 on 2020-04-22
Post score: 0

A:

This doesn't seem like a ROS question but a CMake question. For example: regardless of ROS, are you aware of how to link up multiple cmakelists together?
A good hint is looking at the add_subdirectory() macro in CMake.
Examples:
https://github.com/ros-planning/navigation2/blob/master/nav2_system_tests/CMakeLists.txt#L51
https://github.com/SteveMacenski/slam_toolbox/blob/eloquent-devel/CMakeLists.txt#L33

Originally posted by stevemacenski with karma: 8272 on 2020-04-22
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Ralff on 2020-04-22:
Yes. I use add_subdirectory(), but the subdirectory is not compiling. The command doesn't seem like it is doing anything.
Comment by stevemacenski on 2020-04-22:
Without far more information, there's no help anyone can give. Please edit your original question with more detail.
Comment by Ralff on 2020-04-23:
add_subdirectory() did work. I changed the build directory, and I was checking wrong directory to see if worked properly... Thank you for your answer!
Comment by stevemacenski on 2020-04-23:
No worries! Can you mark the question as correct so its off the unanswered questions queue?

