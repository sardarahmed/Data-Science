Q:

Why is the image from PointGray camera displaying in grayscale?

I'm pulling an image stream from a PointGrey camera using the FlyCapture SDK. When I display the camera feed in PointGrey's FlyCap2, the image displays in color, but when I look at the feed in RVIZ (or export the bag to jpg) it shows grayscale images. How should I address this?
Script for getting image and publishing to ROS topic

Originally posted by ckirksey on ROS Answers with karma: 203 on 2017-08-21
Post score: 0

Original comments
Comment by Thomas D on 2017-08-21:
Please edit your question to show the exact command you are running to view the image (or which topic you are using in rviz) and which topics are available. My suspicion is that you are not looking at the color image topic, but without more information it is difficult to provide an answer.
Comment by ckirksey on 2017-08-22:
I'm getting the image_raw camera topic that's published by the referenced script. The raw image is coming over from the FlyCapture SDK in the bayer_gbrg8 encoding format
Comment by Thomas D on 2017-08-25:
Do you see any topics such as image_color or image_rect_color? You probably need to run a node like image_proc to convert your raw images and calibration info (sensor_msgs/CameraInfo) to color/rectified images.
Comment by Thomas D on 2017-08-25:
FYI, eventually you will need a separate calibration message (sensor_msgs/CameraInfo) per camera. Right now you have an array of images (one for each detected camera) but only a single calibration message being published.
Comment by ckirksey on 2017-08-29:
image_proc did the trick! Thanks. I used this gist to publish CameraInfo for each camera from the yaml config file: https://gist.github.com/rossbar/ebb282c3b73c41c1404123de6cea4771

A:

Do you see any topics such as image_color or image_rect_color? You probably need to run a node like image_proc to convert your raw images and calibration info (sensor_msgs/CameraInfo) to color/rectified images.

Originally posted by Thomas D with karma: 4347 on 2017-08-29
This answer was ACCEPTED on the original site
Post score: 1

