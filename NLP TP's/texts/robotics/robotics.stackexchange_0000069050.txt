Q:

Subscribe to geometry_msgs/Pose2D message for arduino application

Hello everyone,
How to subscribe to geometry_msgs/Pose2D type message for an arduino application? Any example?
Thanks in advance.
Any help?

Originally posted by rosdino on ROS Answers with karma: 13 on 2015-08-03
Post score: 0

A:

Here is a simple example that subscribes to a geometry_msgs/Pose2D topic, toggles a LED every time it receives a message and stores the data in separate variables.
#include <ros.h>
#include <geometry_msgs/Pose2D.h>

ros::NodeHandle  nh;

void poseCb( const geometry_msgs::Pose2D& pose_msg){
  digitalWrite(13, HIGH-digitalRead(13));   // blink the led
  float x = pose_msg.x;
  float y = pose_msg.y;
  float th = pose_msg.theta;
}

ros::Subscriber<geometry_msgs::Pose2D> sub("pose", &poseCb );

void setup()
{ 
  pinMode(13, OUTPUT);
  nh.initNode();
  nh.subscribe(sub);
}

void loop()
{  
  nh.spinOnce();
  delay(1);
}
 

Originally posted by Gary Servin with karma: 962 on 2015-08-04
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by rosdino on 2015-08-06:
Hello Gary,
Thank you for your answer.
Just one question, how do I print the x y theta values on the serial monitor? serial.print doesn't work.
Comment by Gary Servin on 2015-08-06:
You can't use serial.print directly since the serial port is already being used to communicate with the rosserial_python node.
You need to use the ROS' logger. There's an example under File->Examples->ros_lib->Logging in your Arduino IDE
Comment by rosdino on 2015-08-06:
Thanks :-)

