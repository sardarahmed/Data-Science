Q:

RCLCPP Action Server Stack Overrun Crash - ROS2 Foxy

Running Foxy in C++ on Windows 10.
I have an app that creates a simulated UR5 robotic arm and can move this arm around based on user input. The movement planning and execution is all handled by a moveit_cpp instance. The app can be set up to continuously run a series of arm movements, cycling through a series of positions.
When the app is set up to move continuously, it will work as expected at first, but after 15 minutes of continuous running the following crash occurs at the end of ServerBase::execute_check_expired_goals() of rclcpp_action/server.cpp:
Unhandled exception at 0x00007FFDF9E12449 (rclcpp_action.dll) in test_main.exe: Stack cookie instrumentation code detected a stack-based buffer overrun
The only action present is a joint_trajectory_controller/follow_joint_trajectory action, with one server (joint_trajectory_controller) and one client (moveit_simple_controller_manager). It is this action that controls the actual movement of the robot.
The crash also happens right around 15 minutes regardless of the frequency of movements. I'm not sure if this is a joint_trajectory_controller issue or a problem with rclcpp_action, but any help would be greatly appreciated.

Originally posted by bchurch8 on ROS Answers with karma: 16 on 2022-10-25
Post score: 0

Original comments
Comment by nils_iseke on 2022-10-26:
Could you provide a minimal working example, so that one could reproduce your error? That would help to try to solve your issue.

A:

The release of Foxy I was using had an out of date version of rcl_action (the release was using 1.1.11, current is 1.1.14). Upgrading the rcl/rcl_action package fixed the crash.
The problem was better described in this issue: Expiring multiple action results causes crash 路 Issue #926 路 ros2/rcl (github.com)
And the solution was merged in this PR: fix expired goals capacity of action server by spiralray 路 Pull Request #931 路 ros2/rcl (github.com)

Originally posted by bchurch8 with karma: 16 on 2022-10-26
This answer was ACCEPTED on the original site
Post score: 0

