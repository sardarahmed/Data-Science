Q:

Error building rosjava.jar

I'm trying to install rosjava from the official instructions: http://code.google.com/p/rosjava/wiki/Welcome
but I'm stuck at the step where I have to build rosjava.jar. When I type ant dist, I get this:
BUILD FAILED
/opt/ros/javagooglecode/rosjava/build.xml:5: The following error occurred while executing this line:
/opt/ros/javagooglecode/rosjava/build-common.xml:16: The following error occurred while executing this line:
/opt/ros/javagooglecode/rosjava/dependencies.xml:20: The following error occurred while executing this line:
/opt/ros/javagooglecode/rosjava/android/build.xml:6: The following error occurred while executing this line:
/opt/ros/javagooglecode/rosjava/android/library/build.xml:37: Cannot find ${sdk.dir}/tools/ant/pre_setup.xml imported from /opt/ros/javagooglecode/rosjava/android/library/build.xml

I followed the solution presented here: http://stackoverflow.com/questions/6159909/ant-cannot-firn-pre-setup-xml-for-an-android-project, but it did not change anything.
Note than when I type android, it is not a recognized command, so I have to type the full path the to Android installation folder on my desktop. I don't know if this could be a problem.

Originally posted by Benoit Larochelle on ROS Answers with karma: 867 on 2011-05-31
Post score: 0

A:

You need to download and configure your Android ADK first.
You need to specify the value of the sdk.dir property for the Java build. One way of doing it is via a -D flag for ant:
ant -Dsdk.dir=<path to sdk> dist

e.g.
ant -Dsdk.dir=/opt/android-sdk-mac_x86 dist

Also if you see an error like this:
/Users/nah/ros-diamondback/rosjava/android/library/build.xml:77: Unable to resolve target 'android-9'

You'll need to set the target property as appropriate. E.g. I had the 2.3.3 SDK installed, so I needed to compile with:
ant -Dsdk.dir=/opt/android-sdk-mac_x86 -Dtarget=android-10 dist

Originally posted by hawesie with karma: 282 on 2011-06-03
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by kwc on 2011-06-05:
you don't need to manually pass in these properties if you use the 'android' command to create the local properties file.  Please see the 'android update' command.

