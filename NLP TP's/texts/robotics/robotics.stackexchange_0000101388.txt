Q:

Why might ros1_bridge stop forwarding lidar PointCloud2 messages?

I have a large ROS network comprised of both ROS1 and ROS2 nodes. The nodes are bridged by the ros1_bridge dynamic_bridge.
Two of the ROS2 nodes publish VLP-32C lidar data as sensor_msgs/PointCloud2 onto two different lidar topics at ~10Hz. When the system starts up the ros1_bridge will correctly identify these topics and start forwarding these messages. However, after a few seconds at least one of the lidar streams will stop bridging and that lidar's data will no longer be available on the ROS1 network. It appears the ros1_bridge is still connected on both ends, but no lidar data is coming out. The ROS2 lidar data is still publishing and other messages are still being bridged.
I'm a bit at a loss for what might cause this. Does anyone have any suggestions on how to investigate.
I'm using Ubuntu 20.04 with ROS2 Foxy, ROS1 Noetic, and Cyclone DDS.

Originally posted by msmcconnell on ROS Answers with karma: 268 on 2022-03-22
Post score: 0

A:

Seems this was caused by some known limitations in the way Cyclone DDS uses the kernal network.
I followed the suggestions here to resolve it
https://docs.ros.org/en/rolling/How-To-Guides/DDS-tuning.html#cyclone-dds-tuning
Specifically the command
sudo sysctl -w net.core.rmem_max=2147483647

Originally posted by msmcconnell with karma: 268 on 2022-03-23
This answer was ACCEPTED on the original site
Post score: 0

