Q:

Build failed in Jenkins with KeyError

Hi,
my package 'innok_heros_gazebo' fails to build in Jenkins with KeyError.
Here some snippets of the traceback:
See <http://jenkins.ros.org/job/devel-indigo-innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/2/changes>

/* ... snip ... */

Get build dependencies of repo list
Get the dependencies of source folder /tmp/test_repositories/src_repository
In folder /tmp/test_repositories/src_repository, found packages: innok_heros_gazebo
Install build dependencies of repo list: catkin, gazebo_plugins, gazebo_ros, gazebo_ros_control, innok_heros_description, robot_state_publisher, xacro, rviz
Could not find innok_heros_description in keys. Have keys DB [key, abb, 

*/...snip... a long list of keys where innok_heros_description is not mentioned/* 

Traceback (most recent call last):
    File "<http://jenkins.ros.org/job/devel-indigo- innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/ws/jenkins_scripts/devel",> line 43, in  <module>
        main()
    File "<http://jenkins.ros.org/job/devel-indigo-innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/ws/jenkins_scripts/devel",> line 37, in main
        repo_sourcespace=repo_sourcespace)
    File "<http://jenkins.ros.org/job/devel-indigo-innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/ws/jenkins_scripts/test_repositories.py",> line 69, in test_repositories
        sudo, no_chroot)
    File "<http://jenkins.ros.org/job/devel-indigo-innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/ws/jenkins_scripts/test_repositories.py",> line 134, in _test_repositories
        apt_get_install(repo_build_dependencies, rosdep_resolver, sudo)
    File "<http://jenkins.ros.org/job/devel-indigo-innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/ws/jenkins_scripts/common.py",> line 28, in apt_get_install
        pkgs = rosdep.to_aptlist(pkgs)
    File "<http://jenkins.ros.org/job/devel-indigo-innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/ws/jenkins_scripts/rosdep.py",> line 44, in to_aptlist
        for a in self.to_apt(r):
    File "<http://jenkins.ros.org/job/devel-indigo-innok_heros_gazebo/ARCH_PARAM=amd64,UBUNTU_PARAM=trusty,label=devel/ws/jenkins_scripts/rosdep.py",> line 57, in to_apt
        return self.r2a[ros_entry]
KeyError: 'innok_heros_description'

'innok_heros_description' is a run dependency of 'innok_heros_gazebo' and I added both packages to indigo/distribution.yaml without the release tag because I still have to perform the prerelease tests. Will the missing key 'innok_heros_descripion' appear in the key DB when the package is released?
Regards,
Sabrina

Originally posted by Sabrina on ROS Answers with karma: 285 on 2015-10-22
Post score: 0

A:

The devel job of innok_heros_gazebo tries to install all it's dependencies from Debian packages. Since innok_heros_description has not yet been released it fails with the above error. Once innok_heros_description has been released the devel job of innok_heros_gazebo will pass.
Just go ahead with the local prereleases to ensure that both packages can be built successfully and then release them in dependency order.

Originally posted by Dirk Thomas with karma: 16276 on 2015-10-22
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Sabrina on 2015-10-22:
Thank you for your answer. This clarifies everything.
Now I have one more question: After releasing the first package, how can I see that the next package can be released? After the first build in Jenkins was successful? When the package is in the ros-shadow-fixed repository?
Comment by Dirk Thomas on 2015-10-22:
You can release a package once all dependencies are "released" in the distribution file which means as soon as the rosdistro PR generated by bloom has been merged. The packages do not have to be built yet in order to release downstream packages.
Comment by Sabrina on 2015-10-22:
I see. Thank you!

