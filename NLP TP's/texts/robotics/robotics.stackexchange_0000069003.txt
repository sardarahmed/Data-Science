Q:

Can I send a goal without quaternion?

Hello,
I'm pretty new to ROS, but I got a navigation stack working, now I want to send a goal without quaternion i.e. I don't care about the orientation of the robot, if he arrives on the coordinates I sent him to. Rotating the robot is somewhat time intensive and inaccurate. Is there an option to do this?
Thanks in advance,
Gork

Originally posted by Gork on ROS Answers with karma: 11 on 2015-07-31
Post score: 1

A:

Just answering this question for future inquiries.
You can do so by calculating the angle between the current position of the robot and the goal. Then convert this angle to quaternion and give it  to send goal function. This way the robot will reach the goal without additional rotating after it arrives.  Here is how:
    angle_to_goal=math.atan2(self.targety-self.currentY,  self.targetx-self.currentX)

    q_angle = tf.transformations.quaternion_from_euler(0, 0, angle_to_goal, axes='sxyz')

    q = Quaternion(*q_angle)

    self.goal = MoveBaseGoal()

    self.goal.target_pose.pose = Pose(Point(self.targetx, self.targety, 0.000), q)

    self.goal.target_pose.header.frame_id = 'map'
    
    self.move_base.send_goal(self.goal)

Originally posted by Gamal Sallam with karma: 46 on 2016-03-19
This answer was ACCEPTED on the original site
Post score: 3

