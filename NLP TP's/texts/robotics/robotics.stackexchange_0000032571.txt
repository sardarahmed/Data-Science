Q:

subscriber pointcloud

Hi,
I am using perception-pcl under ros. I want to get pointcloud from two kinects.
Here, I subscribe to both topics. How can I get the data, which is the "cloud_s" and "cloud_t" into my main function and compute it there?
I tried to put argument on callback function like cloud_cb1(cloud_s) in:
ros::Subscriber sub_source = nh1.subscribe("camera1/depth/points", 1,cloud_cb1);

but, it did not work.
below is part of my code. Thanks in advanced.
...
    void cloud_cb1 (const sensor_msgs::PointCloud2ConstPtr& cloud_s)
    {
      if ((cloud_s->width * cloud_s->height) == 0)
        return; 
}
void cloud_cb2 (const sensor_msgs::PointCloud2ConstPtr& cloud_t)
{
      if ((cloud_t->width * cloud_t->height) == 0)
        return;
}

int main(int argc, char** argv)
{
ros::init (argc, argv, "reg_icp_ros");  //initialize ros  
ros::NodeHandle nh1;
ros::NodeHandle nh2;

while (ros::ok())
  {
//subscribe node
ros::Subscriber sub_source = nh1.subscribe("camera1/depth/points", 1,cloud_cb1);
ros::Subscriber sub_target = nh2.subscribe("camera2/depth/points", 1,cloud_cb2);

...

best,

Originally posted by kang on ROS Answers with karma: 79 on 2011-06-27
Post score: 0

A:

You should have the subscribers outside of the main loop. You only need to subscribe once.
Also you don't need individual NodeHandles, you can use the same handle to subscribe.

Originally posted by dornhege with karma: 31395 on 2011-06-27
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by kang on 2011-06-28:
Thanks ffoote, the links were quite helpful.
Comment by tfoote on 2011-06-27:
I suggest that you look through the tutorials for roscpp http://www.ros.org/wiki/roscpp/Tutorials  In particular this tutorial http://www.ros.org/wiki/roscpp_tutorials/Tutorials/WritingPublisherSubscriber on how to subscribe to messages.
Comment by dornhege on 2011-06-27:
Once the callback is called you can do whatever you want with the cloud_s and cloud_t. You do need two Subscribers, but one NodeHandle is sufficient.
Comment by kang on 2011-06-27:
Thanks, but still how can I get the "cloud_s" and "cloud_t" in my main function? I just use "cloud_s" and "cloud_t" but it seems to be empty. Btw, I don't get it since I think I need two subscriber for two kinect inputs.

