Q:

ARDRONE AUTONOMY - Build and add external projects

Hello,
I want to create a patch for the ardroneLib of autonomy lab.
The CMakeLists includes an external project:
include(ExternalProject)
ExternalProject_Add(ardronelib
    GIT_REPOSITORY git://github.com/AutonomyLab/ardronelib.git
    GIT_TAG 2f987029c55531e4c0119c3600f9c57f935851ed
    PREFIX ${CATKIN_DEVEL_PREFIX}
    CONFIGURE_COMMAND echo "No configure"
    BUILD_COMMAND make
    INSTALL_COMMAND make install INSTALL_PREFIX=${CATKIN_DEVEL_PREFIX}/lib/
    BUILD_IN_SOURCE 1
) 

I wont to use this projectfiles locally.
So I copied it in the sourcefolder:
catkin_ws/src/my_project/
                         ardronelib/
                         src/ ...
                         launch/ ...
...

the ardronelib folder contains the makefile of the project.
ardronelib/
           ARDroneLib
           .git
           .travis.yml
           LICENSE
           Makefile
           README.md

How can I build an include this library locally?
My approach with:
include(ExternalProject)
ExternalProject_Add(ardronelib
    SOURCE_DIR=${PROJECT_SOURCE_DIR}/ardronelib
    PREFIX ${CATKIN_DEVEL_PREFIX}
    CONFIGURE_COMMAND echo "No configure"
    BUILD_COMMAND make
    INSTALL_COMMAND make install INSTALL_PREFIX=${CATKIN_DEVEL_PREFIX}/lib/
    BUILD_IN_SOURCE 1
) 

and several others didn't work. Any ideas how to build the project so that later I can use "ardronelib" within my project?
I am a bit desperate so thanks a lot for your help!

Originally posted by JanOr on ROS Answers with karma: 170 on 2015-11-30
Post score: 0

A:

Try using URL instead of SOURCE_DIR and ${CMAKE_CURRENT_SOURCE_DIR} instead of ${PROJECT_SOURCE_DIR}.
include(ExternalProject)
ExternalProject_Add(ardronelib
    URL ${CMAKE_CURRENT_SOURCE_DIR}/ardronelib
    PREFIX ${CATKIN_DEVEL_PREFIX}
    CONFIGURE_COMMAND echo "No configure"
    BUILD_COMMAND make
    INSTALL_COMMAND make install INSTALL_PREFIX=${CATKIN_DEVEL_PREFIX}/lib/
    BUILD_IN_SOURCE 1
)

Originally posted by Mani with karma: 1704 on 2015-12-02
This answer was ACCEPTED on the original site
Post score: 0

