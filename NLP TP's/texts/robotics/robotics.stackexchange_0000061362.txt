Q:

ROS Indigo and libav libraries' version

I updated my computer from Ubuntu 12.04 ROS Hydro to ubuntu 14.04 ROS Indigo.
One node is causing me problems. It is a C++ node, a kind of modification of the face_recognition package
Now when I try to start it, my system complains that libavformat.so.53 was not found (It was complaining about libtiff4 so I somehow managed to install it manually from the binaries for ubuntu 13). I searched for it and I found it in Trash while in the /usr/lib/x86_64-linux-gnu/ folder there was a newer version libavformat.so.54. I actually don't have any idea where this dependency comes from, I never added it, maybe from OpenCV?
I tried copying it manually (impossible to install libavformat 53 on 14.04) to the libs folder and my node finally worked. The problem now is that when I start the face recognition, there is no window appearing with the webcam images published to the topic I subscribe to. I just get the "Opengl support available" that one normally gets before a window is opened with OpenCv. I am suspecting this manual copy of the library to cause this weird behavior. My node worked fine on Ubuntu 12.04
I also had this same experience  in the past with other packages but under 12.04 with Hydro and Groovy, Face Tracking and Camera calibration did both start but just show "Opengl support available" and stop there, no window with webcam images is shown.
I also tried to run some other packages that use images, image_view for example returns the same error (libavformat.so.53 not found) can somebody reproduce this error?

Originally posted by Mehdi. on ROS Answers with karma: 3339 on 2014-07-31
Post score: 0

A:

Ok I could solve this problem finally. libopencv-dev was causing all the troubles. Somehow libopencv-dev was installed by apt-get without caring about some missing dependencies. I deleted it, and tried to compile OpenCv by myself but got some errors about some static libraries (.a) that cannot be linked and asked me to recompile with -fPIC. So I followed this tutorial to compile OpenCV

http://www.ozbotz.org/opencv-installation/

It worked and I have the latest stable OpenCV version now.
My face recognition is also working again like it did before on Hydro with Ubuntu 12.04.

Originally posted by Mehdi. with karma: 3339 on 2014-08-01
This answer was ACCEPTED on the original site
Post score: 0

