Q:

Invoking "make -j1 -l1" failed in ROS Indigo

Hi,
I am now working on the compilation of the tum_ardrone module (http://wiki.ros.org/tum_ardrone).
In the past, I worked on Hydro and everything worked as expected.
I am now trying to do same on Indigo but then catkin_make will fail with the following error:
In file included from /home/omershal/tum_ardrone_ws/devel/src/ardronelib/ARDroneLib/Soft/Lib/ardrone_tool/Video/video_stage_ffmpeg_decoder.h:14:0,
                 from /home/omershal/tum_ardrone_ws/devel/src/ardronelib/ARDroneLib/Soft/Lib/ardrone_tool/Video/video_stage_decoder.h:27,
                 from /home/omershal/tum_ardrone_ws/devel/src/ardronelib/ARDroneLib/Soft/Lib/ardrone_tool/Video/video_stage.h:27,
                 from /home/omershal/tum_ardrone_ws/src/ardrone_autonomy/include/ardrone_autonomy/ardrone_sdk.h:63,
                 from /home/omershal/tum_ardrone_ws/src/ardrone_autonomy/include/ardrone_autonomy/ardrone_driver.h:41,
                 from /home/omershal/tum_ardrone_ws/src/ardrone_autonomy/src/ardrone_driver.cpp:30:
/home/omershal/tum_ardrone_ws/devel/src/ardronelib/ARDroneLib/FFMPEG/Includes/libavcodec/avcodec.h:525:27: warning: attribute ignored in declaration of ‘enum AVLPCType’ [-Wattributes]
 attribute_deprecated enum AVLPCType {
                           ^
/home/omershal/tum_ardrone_ws/devel/src/ardronelib/ARDroneLib/FFMPEG/Includes/libavcodec/avcodec.h:525:27: note: attribute for ‘enum AVLPCType’ must follow the ‘enum’ keyword
virtual memory exhausted: Cannot allocate memory
make[2]: *** [ardrone_autonomy/CMakeFiles/ardrone_driver.dir/src/ardrone_driver.cpp.o] Error 1
make[1]: *** [ardrone_autonomy/CMakeFiles/ardrone_driver.dir/all] Error 2
make: *** [all] Error 2
Invoking "make -j1 -l1" failed

I read somewhere that this might be an issue of the compiler version so I updated gcc to 4.9 but this still didn't help.

Edit: Thanks, I allocated more memory and the previous error is now gone but now I get a different error:
In file included from /home/omershal/tum_ardrone_ws/src/tum_simulator/cvg_sim_gazebo_plugins/src/diffdrive_plugin_6w.cpp:36:0:
/home/omershal/tum_ardrone_ws/src/tum_simulator/cvg_sim_gazebo_plugins/include/hector_gazebo_plugins/diffdrive_plugin_6w.h:30:28: fatal error: common/Plugin.hh: No such file or directory
 #include "common/Plugin.hh"
                            ^
compilation terminated.
make[2]: *** [tum_simulator/cvg_sim_gazebo_plugins/CMakeFiles/diffdrive_plugin_6w.dir/src/diffdrive_plugin_6w.cpp.o] Error 1
make[1]: *** [tum_simulator/cvg_sim_gazebo_plugins/CMakeFiles/diffdrive_plugin_6w.dir/all] Error 2
make: *** [all] Error 2
Invoking "make -j1 -l1" failed

Originally posted by Omer on ROS Answers with karma: 26 on 2015-11-29
Post score: 0

Original comments
Comment by gvdhoorn on 2015-12-01:
@Omer: please only use answers to answer your question. For everything else, use comments or update your original question. Use the edit link/button for that. I've merged the content into your original question.

A:

Even without looking at the rest, but this:

virtual memory exhausted: Cannot allocate memory

suggests that the host you are compiling this on is running out of memory. Is this an embedded platform, or a virtual machine?
If the former, try to increase the size of your swap, or use cross-compilation. If the latter, try to allocate more memory to your VM instance.

Edit:

Thanks, I allocated more memory and the previous error is now gone but now I get a different error: [..]

It looks like the package will have to be updated in order to be buildable under Indigo. See tum-vision/tum_simulator#8 for some work in that direction. You could see whether merging that PR into your local copy solves the issue.
If it does, it might be nice to report back to the PR author and post some feedback.

Originally posted by gvdhoorn with karma: 86574 on 2015-11-29
This answer was ACCEPTED on the original site
Post score: 2

