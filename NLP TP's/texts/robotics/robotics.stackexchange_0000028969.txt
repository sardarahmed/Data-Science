Q:

Error when trying to run gazebo on macOS Catalina

I try to run gazebo9 on macOS Catalina 10.15.2.
I followed the installation instructions, specifically:
brew tap osrf/simulation
brew install gazebo9
gazebo

When I try to launch gazebo I get the following error:
gazebo --verbose
Gazebo multi-robot simulator, version 9.13.0
Copyright (C) 2012 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

Gazebo multi-robot simulator, version 9.13.0
Copyright (C) 2012 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

[Msg] Waiting for master.
[Msg] Waiting for master.
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
[Msg] Publicized address: 192.168.0.21
[Msg] Publicized address: 192.168.0.21
[Msg] Could not load the Qt platform plugin "cocoa" in "/usr/local/Cellar/qt/5.14.1/plugins/" even though it was found.
[Err] [GuiIface.cc:123] This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: cocoa, minimal, offscreen, webgl.

I tried to follow suggestions from this SO question by setting QT_QPA_PLATFORM_PLUGIN_PATH=/usr/local/Cellar/qt/5.14.1/plugins/ which is where qt 5 exists after installing it with homebrew. xquartz is also installed using homebrew and works when I enter xeyes.
I can also confirm that libqcocoa.dylib exists in /usr/local/Cellar/qt/5.14.1/plugins/platforms. And trying with gazebo11 results in the same error.

Originally posted by fjp on Gazebo Answers with karma: 1 on 2020-04-15
Post score: 0

A:

For me the solution is to export the path to
export QT_QPA_PLATFORM_PLUGIN_PATH=/usr/local/Cellar/qt/5.14.1/plugins/platforms. 

This makes sense somehow, as libqcocoa.dylib exists in /usr/local/Cellar/qt/5.14.1/plugins/platforms and not in /usr/local/Cellar/qt/5.14.1/plugins/.

Originally posted by fjp with karma: 1 on 2020-04-15
This answer was ACCEPTED on the original site
Post score: 0

