Q:

Plugin to find pose of a robot

Hi, I'm new to Gazebo and ROS.
I'm trying to find a plugin that I can hook to the sdf file of my robot which will publish its pose in (x,y,z) format. I noticed that there is already a topic being published to called "/gazebo/model_states" which contains the pose of every model in the world. I'm not sure if there's a way to manipulate this to get the pose from one singular model.
Thanks in advance for any help.

Originally posted by blastpower5 on Gazebo Answers with karma: 3 on 2016-08-12
Post score: 0

Original comments
Comment by chapulina on 2016-08-12:
To clarify, you'd like the pose to be published over a ROS topic, or a Gazebo topic?
Comment by blastpower5 on 2016-08-12:
A ROS topic would be best, but I think (not sure) either would work.
Comment by wicked88 on 2016-08-16:
blastpower5, i just started using the plugins and i can tell that you CAN do the task using both ROS and Gazebo communications. For ROS, you will have to link against the proper libraries. Using Gazebo, it's like the examples. Using a ROS topic would require to link against and include ROS, coding a publisher and publish the information. The plugins work like a normal executable. Since the update function receives a pointer to the model, it's always updated.
Comment by wicked88 on 2016-08-16:
// Continuation : You can then make a forever loop, with a sleep inside, and publish your information.
Comment by wicked88 on 2016-08-16:
If you go to the gazebo folder, under examples/plugin/model_move you can see the structure of a plugin, its a normal c++ program. The Load() function instantiates everything, it's like a constructor. From here, you can do everything, knowing that on startup of the model, the Load function is going to be ran. You also receive this pointer [ ::Load(physics::ModelPtr _parent] which is the pointer to the model, where every data about the model can be read, set and managed, like pose, velocity etc.

A:

Just proceed with the installation of ros-gazebo packages :
$ sudo apt-get install ros-indigo-gazebo-ros-pkgs ros-indigo-gazebo-ros-control
Then, just do $ rosrun gazebo_ros gazebo or  $ rosrun gazebo_ros gzserver (to do it headless).
You can inspect the rostopic list after that. You will see a bunch of topics, just do $ rostopic echo /gazebo/model_states and you will see the names and poses of the models. Parse that, given the name, and you will have eveything you need. Easy wait out is to write a parser to split the full message and separate it into small messages. Don't know if its possible to atatch a plugin to work with ROS to a model, but if it is, i WOULD LOVE IT.

Originally posted by wicked88 with karma: 38 on 2016-08-13
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by blastpower5 on 2016-08-17:
Thanks for the help! I have also found a plugin that I put in the sdf file of my robot's model: ''. It publishes messages of type nav_msgs/Odometry, which includes both the pose and twist of the robot.
Comment by wicked88 on 2016-08-20:
Btw, it's clearly possible and easy to make a ros node inside a plugin, to publish whatever you want :D

