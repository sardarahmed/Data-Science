Q:

Jenkins Debian building fails

Jenkins is having some trouble with building my code... Here is the console output:
I: user script /var/cache/pbuilder/build//2275/tmp/hooks/A50stamp finished
I: Running cd tmp/buildd/*/ && env PATH="/usr/lib/ccache:/usr/sbin:/usr/bin:/sbin:/bin" dpkg-buildpackage -us -uc  "-b" -rfakeroot
dpkg-buildpackage: export CFLAGS from dpkg-buildflags (origin: vendor): -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security
dpkg-buildpackage: export CPPFLAGS from dpkg-buildflags (origin: vendor): -D_FORTIFY_SOURCE=2
dpkg-buildpackage: export CXXFLAGS from dpkg-buildflags (origin: vendor): -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security
dpkg-buildpackage: export FFLAGS from dpkg-buildflags (origin: vendor): -g -O2
dpkg-buildpackage: export LDFLAGS from dpkg-buildflags (origin: vendor): -Wl,-Bsymbolic-functions -Wl,-z,relro
dpkg-buildpackage: source package ros-hydro-p2os-driver
dpkg-buildpackage: source version 1.0.0-0precise-20130621-1904-+0000
dpkg-buildpackage: source changed by root <root@host169.storm.willowgarage.com>
 dpkg-source --before-build ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904
dpkg-buildpackage: host architecture amd64
 fakeroot debian/rules clean
dh  clean
   dh_testdir
Unknown option: buildsystem
dh_testdir: warning: ignored unknown options in DH_OPTIONS
   dh_auto_clean
   dh_clean
Unknown option: buildsystem
dh_clean: warning: ignored unknown options in DH_OPTIONS
    rm -f debian/ros-hydro-p2os-driver.substvars
    rm -f debian/ros-hydro-p2os-driver.*.debhelper
    rm -rf debian/ros-hydro-p2os-driver/
    rm -f debian/*.debhelper.log
    rm -f debian/files
    find .  \( \( -type f -a \
            \( -name '#*#' -o -name '.*~' -o -name '*~' -o -name DEADJOE \
         -o -name '*.orig' -o -name '*.rej' -o -name '*.bak' \
         -o -name '.*.orig' -o -name .*.rej -o -name '.SUMS' \
         -o -name TAGS -o \( -path '*/.deps/*' -a -name '*.P' \) \
        \) -exec rm -f {} \; \) -o \
        \( -type d -a -name autom4te.cache -prune -exec rm -rf {} \; \) \)
    rm -f *-stamp
 debian/rules build
dh  build
   dh_testdir
Unknown option: buildsystem
dh_testdir: warning: ignored unknown options in DH_OPTIONS
   debian/rules override_dh_auto_configure
make[1]: Entering directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904'
# In case we're installing to a non-standard location, look for a setup.sh
# in the install tree that was dropped by catkin, and source it.  It will
# set things like CMAKE_PREFIX_PATH, PKG_CONFIG_PATH, and PYTHONPATH.
if [ -f "/opt/ros/hydro/setup.sh" ]; then . "/opt/ros/hydro/setup.sh"; fi && \
    dh_auto_configure -- \
        -DCATKIN_BUILD_BINARY_PACKAGE="1" \
        -DCMAKE_INSTALL_PREFIX="/opt/ros/hydro" \
        -DCMAKE_PREFIX_PATH="/opt/ros/hydro"
    mkdir -p obj-x86_64-linux-gnu
    cd obj-x86_64-linux-gnu
    cmake .. -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=ON -DCATKIN_BUILD_BINARY_PACKAGE=1 -DCMAKE_INSTALL_PREFIX=/opt/ros/hydro -DCMAKE_PREFIX_PATH=/opt/ros/hydro
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/lib/ccache/gcc
-- Check for working C compiler: /usr/lib/ccache/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/lib/ccache/c++
-- Check for working CXX compiler: /usr/lib/ccache/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Using CATKIN_DEVEL_PREFIX: /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu/devel
-- Using CMAKE_PREFIX_PATH: /opt/ros/hydro
-- This workspace overlays: /opt/ros/hydro
-- Found PythonInterp: /usr/bin/python (found version "2.7.3")
-- Looking for include files CMAKE_HAVE_PTHREAD_H
-- Looking for include files CMAKE_HAVE_PTHREAD_H - found
-- Looking for pthread_create in pthreads
-- Looking for pthread_create in pthreads - not found
-- Looking for pthread_create in pthread
-- Looking for pthread_create in pthread - found
-- Found Threads: TRUE 
-- Found gtest sources under '/usr/src/gtest': gtests will be built
-- Using CATKIN_TEST_RESULTS_DIR: /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu/test_results
-- catkin 0.5.67
-- p2os_driver: 9 messages, 0 services
-- Configuring done
-- Generating done
-- Build files have been written to: /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu
    cd /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904
make[1]: Leaving directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904'
   debian/rules override_dh_auto_build
make[1]: Entering directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904'
# In case we're installing to a non-standard location, look for a setup.sh
# in the install tree that was dropped by catkin, and source it.  It will
# set things like CMAKE_PREFIX_PATH, PKG_CONFIG_PATH, and PYTHONPATH.
if [ -f "/opt/ros/hydro/setup.sh" ]; then . "/opt/ros/hydro/setup.sh"; fi && \
    dh_auto_build
    cd obj-x86_64-linux-gnu
    make -j1
make[2]: Entering directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
/usr/bin/cmake -H/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904 -B/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu/CMakeFiles /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu/CMakeFiles/progress.marks
make -f CMakeFiles/Makefile2 all
make[3]: Entering directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
make -f CMakeFiles/p2os_driver.dir/build.make CMakeFiles/p2os_driver.dir/depend
make[4]: Entering directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
cd /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904 /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904 /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu/CMakeFiles/p2os_driver.dir/DependInfo.cmake --color=
Scanning dependencies of target p2os_driver
make[4]: Leaving directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
make -f CMakeFiles/p2os_driver.dir/build.make CMakeFiles/p2os_driver.dir/build
make[4]: Entering directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
/usr/bin/cmake -E cmake_progress_report /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu/CMakeFiles 4
[  2%] Building CXX object CMakeFiles/p2os_driver.dir/src/p2osnode.cc.o
/usr/lib/ccache/c++   -DROS_PACKAGE_NAME=\"p2os_driver\" -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security  -I/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu/devel/include -I/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/include -I/opt/ros/hydro/include    -o CMakeFiles/p2os_driver.dir/src/p2osnode.cc.o -c /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/src/p2osnode.cc
In file included from /tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/src/p2osnode.cc:29:0:
/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/include/p2os.h:36:31: fatal error: nav_msgs/Odometry.h: No such file or directory
compilation terminated.
make[4]: *** [CMakeFiles/p2os_driver.dir/src/p2osnode.cc.o] Error 1
make[4]: Leaving directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
make[3]: *** [CMakeFiles/p2os_driver.dir/all] Error 2
make[3]: Leaving directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/obj-x86_64-linux-gnu'
dh_auto_build: make -j1 returned exit code 2
make[1]: *** [override_dh_auto_build] Error 2
make[1]: Leaving directory `/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904'
make: *** [build] Error 2
dpkg-buildpackage: error: debian/rules build gave error exit status 2
E: Failed autobuilding of package
W: no hooks of type C found -- ignoring
I: unmounting /var/cache/pbuilder/ccache filesystem
I: unmounting dev/pts filesystem
I: unmounting proc filesystem
I: cleaning the build env 
I: removing directory /var/cache/pbuilder/build//2275 and its subdirectories
Build step 'Execute shell' marked build as failure
Build step 'Groovy Postbuild' marked build as failure
Build step 'Groovy Postbuild' marked build as failure
Description set: 
Sending e-mails to: ros-buildfarm-release@googlegroups.com hunter.allen@vanderbilt.edu
Finished: FAILURE

Update: I have a new issue now. I was able to get Jenkins to try building the package by modifying the tags on my git repository. Unfortunately, there is a new error. Did I forget to mark a dependency somewhere?

Originally posted by allenh1 on ROS Answers with karma: 3055 on 2013-06-21
Post score: 0

A:

About midway down, you have this error:
/tmp/buildd/ros-hydro-p2os-driver-1.0.0-0precise-20130621-1904/include/p2os.h:36:31: fatal error: nav_msgs/Odometry.h: No such file or directory

I don't see a build_depend on nav_msgs in the package.xml for p2os_driver, nor is it in your find_package(catkin DEPENDS  ... ). I would add it to both of those places.
Also, you probably want to add:
add_dependencies(p2os_driver nav_msgs_gencpp)

To your CMakeLists.txt so that if someone is building nav_msgs in the same catkin workspace as the p2os driver everything will still work ok.

Originally posted by fergs with karma: 13902 on 2013-06-21
This answer was ACCEPTED on the original site
Post score: 1

