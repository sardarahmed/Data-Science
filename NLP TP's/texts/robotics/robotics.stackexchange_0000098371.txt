Q:

robot_localization with imu and encoder shaking odom->base transform

Hi,
i am using robot_localization to merge imu and wheel encoder data and want it to publish the odom->base_footprint (2d projection of base_link) transform. I configured everything so far, but the transform starts to shake more and more the further the robot drives away from the start-point. The entire robot is simulated in gazebo.
The problem is very simillar to 290160 but it seems like the original author hasn't found a solution either back in 2018.
I would be thankful if anyone can help me out here.
EDIT: i just found out that gazebo is still publishing the odom transform even though i set the parameter publishOdom of the differential plugin to false. I only found this by refreshing my tf tree very fast and saw gazebo as the publisher every now and then.

Originally posted by Tristan9497 on ROS Answers with karma: 220 on 2021-02-19
Post score: 1

A:

After realizing this problem is caused by Gazebo and not by robot_localization i found out that the problem is caused by an error in the gazebo tutorials here Gazebo tutorials.
In the differential drive plugin section the parameter is written as publishOdom but it needs to be publishOdomTF.
I know that this now transitioned to a gazebo related question and/or answer and should be over at the gazebo forum but still want the information to be somewhere.

Originally posted by Tristan9497 with karma: 220 on 2021-02-19
This answer was ACCEPTED on the original site
Post score: 1

