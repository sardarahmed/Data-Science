Q:

Service Advertice and Class Usage

Hello,
When we try to advertise a service we normally use as shown in ros tutorials:
 ros::ServiceServer service = n.advertiseService("add_two_ints", add);

This is with normal function way.
And if we want to use with class, documentation says use like this:
AddTwo a;
 ros::ServiceServer ss = n.advertiseService("add_two_ints", &AddTwo::add, &a);

Which means we need to initialize an object first.
But suppose I want to use everything related with ros in class and suppose my code is like this:
Comm::Comm()
{
  ros::ServiceServer ss = n.advertiseService("add_two_ints", &write);
  // write() is member of Comm class.
}

In my mind, I should have been use like this, but of course this kind of usage gave me error. Is there any possibility to use service advertise in class as describe. Do I need to initialize the class always?

Originally posted by cheour on ROS Answers with karma: 18 on 2012-09-05
Post score: 0

A:

Use it the same way as above with: &Comm::write, this.
Also you might want to store the ServiceServer as a member variable as otherwise it will go out of scope.

Originally posted by dornhege with karma: 31395 on 2012-09-06
This answer was ACCEPTED on the original site
Post score: 1

