Q:

RuntimeError: Multiple packages found with the same name "tf2", "tf2_msgs", "tf2_py", "tf2_ros"

A few months ago, I had successfully installed ROS Indigo on Mac OS X using Mike Purvis' install script (https://github.com/mikepurvis/ros-install-osx)
Today, I decided to update my installation and also install the navigation stack. First, I did:
rosinstall_generator navigation --rosdistro indigo --deps --tar | wstool merge -t src -
wstool update -t src -j8

And that seemed to work just fine. But then, when I tried to get the dependencies with:
rosdep install --from-paths src --ignore-src --rosdistro indigo -y --as-root pip:no --skip-keys="procps" --skip-keys="gazebo"

I get the following error message:
ERROR: Rosdep experienced an error: Multiple packages found with the same name "tf2":
- geometry2/tf2
- geometry_experimental/tf2
Multiple packages found with the same name "tf2_msgs":
- geometry2/tf2_msgs
- geometry_experimental/tf2_msgs
Multiple packages found with the same name "tf2_py":
- geometry2/tf2_py
- geometry_experimental/tf2_py
Multiple packages found with the same name "tf2_ros":
- geometry2/tf2_ros
- geometry_experimental/tf2_ros
Please go to the rosdep page [1] and file a bug report with the stack trace below.
[1] : http://www.ros.org/wiki/rosdep

rosdep version: 0.11.4

Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/rosdep2/main.py", line 136, in rosdep_main
    exit_code = _rosdep_main(args)
  File "/usr/local/lib/python2.7/site-packages/rosdep2/main.py", line 353, in _rosdep_main
    return _package_args_handler(command, parser, options, args)
  File "/usr/local/lib/python2.7/site-packages/rosdep2/main.py", line 406, in _package_args_handler
    pkgs = find_catkin_packages_in(path, options.verbose)
  File "/usr/local/lib/python2.7/site-packages/rosdep2/catkin_packages.py", line 33, in find_catkin_packages_in
    packages = find_packages(path)
  File "/usr/local/lib/python2.7/site-packages/catkin_pkg/packages.py", line 92, in find_packages
    raise RuntimeError('\n'.join(duplicates))
RuntimeError: Multiple packages found with the same name "tf2":
- geometry2/tf2
- geometry_experimental/tf2
Multiple packages found with the same name "tf2_msgs":
- geometry2/tf2_msgs
- geometry_experimental/tf2_msgs
Multiple packages found with the same name "tf2_py":
- geometry2/tf2_py
- geometry_experimental/tf2_py
Multiple packages found with the same name "tf2_ros":
- geometry2/tf2_ros
- geometry_experimental/tf2_ros

I ignored it and marched on with the installation. But invoking catkin build resulted in a similar error:
[build] Runtime: 0.5 seconds
Traceback (most recent call last):
  File "/usr/local/bin/catkin", line 9, in <module>
    load_entry_point('catkin-tools==0.3.1', 'console_scripts', 'catkin')()
  File "/usr/local/lib/python2.7/site-packages/catkin_tools/commands/catkin.py", line 229, in main
    sys.exit(args.main(args) or 0)
  File "/usr/local/lib/python2.7/site-packages/catkin_tools/verbs/catkin_build/cli.py", line 334, in main
    summarize_build=opts.summarize  # Can be True, False, or None
  File "/usr/local/lib/python2.7/site-packages/catkin_tools/verbs/catkin_build/build.py", line 583, in build_isolated_workspace
    packages_to_be_built, packages_to_be_built_deps, all_packages = determine_packages_to_be_built(packages, context)
  File "/usr/local/lib/python2.7/site-packages/catkin_tools/verbs/catkin_build/build.py", line 162, in determine_packages_to_be_built
    workspace_packages = find_packages(context.source_space_abs, exclude_subspaces=True, warnings=[])
  File "/usr/local/lib/python2.7/site-packages/catkin_pkg/packages.py", line 92, in find_packages
    raise RuntimeError('\n'.join(duplicates))
RuntimeError: Multiple packages found with the same name "tf2":
- geometry2/tf2
- geometry_experimental/tf2
Multiple packages found with the same name "tf2_msgs":
- geometry2/tf2_msgs
- geometry_experimental/tf2_msgs
Multiple packages found with the same name "tf2_py":
- geometry2/tf2_py
- geometry_experimental/tf2_py
Multiple packages found with the same name "tf2_ros":
- geometry2/tf2_ros
- geometry_experimental/tf2_ros

Should I file a ticket, like the error message suggests?  Deleting the geometry_experimental version of these 4 packages seemed to have worked in terms of rosdep. But then catkin buildsaid it couldn't build octomap, orocos_kdl, and stage. Not sure how related that is.

Originally posted by spmaniato on ROS Answers with karma: 1788 on 2016-04-12
Post score: 0

A:

The geometry_experimental repository was renamed to the geometry2 repository. When you reran the rosinstall_generator it create the new repo, but rosinstall does not remove unknown packages from your workspace. If you have no local changes you can just remove the geometry_experimental repository and make sure it's not in a .rosinstall file. If you have local changes you can remove the new geometry2 repo and rename the geometry_experimental to geometry2 and remove any references to geometry_experimental

Originally posted by tfoote with karma: 58457 on 2016-04-12
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by spmaniato on 2016-04-12:
Perfect, thanks Tully! I generated a fresh .rosinstall and successfully built everything, including the nav stack.

