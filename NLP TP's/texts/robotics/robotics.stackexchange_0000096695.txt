Q:

Call substitute for package inside launch file

Hi,
I am currently editing a launch file that I moved from one package to another.
I would like to store the package name inside an argument or parameter so that I can easily substitute the name by editing the substitute. I tried something like:  <arg name "config_pkg" default="pkg1" />
Now if I want to call it inside another argument it would look like this:

This throws an error, is there an easy way to fix this or do I have to change all the pkg names everytime they will change?

Originally posted by carlosg on ROS Answers with karma: 3 on 2020-07-31
Post score: 0

A:

Hi
To answer your question lets look at the following example, I hgave the following launch file:
<?xml version="1.0"?>

<launch>
  <arg name="config_pkg" default="my_pkg"/>
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find $(arg config_pkg))/launch/my_config.rviz"/>
</launch>

This launch file will throw you an RLException since dollar signs '$' cannot be inside of substitution args like `$(find ...)`
You can use this to change dynamically the node package like
<?xml version="1.0"?>

<launch>
  <arg name="config_pkg" default="rviz"/>
  <node name="rviz" pkg="$(arg config_pkg)" type="rviz"/>
</launch>

However bear in mind that what you can do is using enviromental variables:
In a terminal:
export my_path="/path/to/your/config/"

An in the launch file:
<?xml version="1.0"?>

<launch>
  <arg name="config_pkg" default="rviz"/>
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(optenv my_path default/path/to/config)/my_config.rviz"/>
</launch>

For more information about this you can check the following wiki page.
Hope that can help you with this problem.
Regards.

Originally posted by Weasfas with karma: 1695 on 2020-08-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by carlosg on 2020-08-01:
Thanks a lot!

