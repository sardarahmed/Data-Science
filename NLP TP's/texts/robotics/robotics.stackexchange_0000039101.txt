Q:

pr2_mechanism_controllers build error

Hello!
I was trying rosmake on pr2_controllers stack and had some errors concerning the pr2_mechanism package. I'm guessing it has something to do with Eigen library (for the record I have both diamondback and electric installed) but I don't really know how to fix it, since I'm new to ROS and Ubuntu.
Heres the build output (for electric):
[ rosmake ] Last 40 lines2_mechanism_controller... [ 1 Active 129/132 Complete ]
{-------------------------------------------------------------------------------
make[3]: se ingresa al directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
Scanning dependencies of target rospack_genmsg
make[3]: se sale del directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
[ 76%] Built target rospack_genmsg
make[3]: se ingresa al directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
Scanning dependencies of target rosbuild_precompile
make[3]: se sale del directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
[ 76%] Built target rosbuild_precompile
make[3]: se ingresa al directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
Scanning dependencies of target pr2_mechanism_controllers
make[3]: se sale del directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
make[3]: se ingresa al directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
[ 79%] Building CXX object CMakeFiles/pr2_mechanism_controllers.dir/src/laser_scanner_traj_controller.o
[ 82%] Building CXX object CMakeFiles/pr2_mechanism_controllers.dir/src/caster_controller.o
[ 85%] Building CXX object CMakeFiles/pr2_mechanism_controllers.dir/src/base_kinematics.o
[ 88%] Building CXX object CMakeFiles/pr2_mechanism_controllers.dir/src/pr2_odometry.o
In file included from /home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/include/pr2_mechanism_controllers/pr2_odometry.h:35:0,
from /home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:38:
/usr/include/eigen3/Eigen/Array:8:4: error: #error The Eigen/Array header does no longer exist in Eigen3. All that functionality has moved to Eigen/Core.
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp: In member function ‘virtual bool controller::Pr2Odometry::init(pr2_mechanism_model::RobotState*, ros::NodeHandle&)’:
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:156:49: warning: ‘void pr2_mechanism_controllers::DebugInfo_::set_timing_size(uint32_t) [with ContainerAllocator = std::allocator, uint32_t = unsigned int]’ is deprecated (declared at /home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/msg_gen/cpp/include/pr2_mechanism_controllers/DebugInfo.h:54)
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:157:46: warning: ‘void pr2_mechanism_controllers::OdometryMatrix_::set_m_size(uint32_t) [with ContainerAllocator = std::allocator, uint32_t = unsigned int]’ is deprecated (declared at /home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/msg_gen/cpp/include/pr2_mechanism_controllers/OdometryMatrix.h:39)
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:164:53: warning: ‘void tf::tfMessage_::set_transforms_size(uint32_t) [with ContainerAllocator = std::allocator, uint32_t = unsigned int]’ is deprecated (declared at /opt/ros/electric/stacks/geometry/tf/msg_gen/cpp/include/tf/tfMessage.h:40)
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:166:75: warning: ‘void pr2_mechanism_controllers::BaseOdometryState_::set_wheel_link_names_size(uint32_t) [with ContainerAllocator = std::allocator, uint32_t = unsigned int]’ is deprecated (declared at /home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/msg_gen/cpp/include/pr2_mechanism_controllers/BaseOdometryState.h:55)
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:167:82: warning: ‘void pr2_mechanism_controllers::BaseOdometryState_::set_drive_constraint_errors_size(uint32_t) [with ContainerAllocator = std::allocator, uint32_t = unsigned int]’ is deprecated (declared at /home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/msg_gen/cpp/include/pr2_mechanism_controllers/BaseOdometryState.h:59)
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:168:94: warning: ‘void pr2_mechanism_controllers::BaseOdometryState_::set_longitudinal_slip_constraint_errors_size(uint32_t) [with ContainerAllocator = std::allocator, uint32_t = unsigned int]’ is deprecated (declared at /home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/msg_gen/cpp/include/pr2_mechanism_controllers/BaseOdometryState.h:63)
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp: In member function ‘void controller::Pr2Odometry::computeBaseVelocity()’:
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:392:49: error: ‘class controller::OdomMatrix16x1’ has no member named ‘cwise’
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp: In member function ‘controller::OdomMatrix3x1 controller::Pr2Odometry::iterativeLeastSquares(const controller::OdomMatrix16x3&, const controller::OdomMatrix16x1&, const std::string&, const int&)’:
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:426:9: error: ‘SVD’ is not a member of ‘Eigen’
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:426:35: error: expected primary-expression before ‘>’ token
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:426:54: error: ‘svdOfFit’ was not declared in this scope
/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/src/pr2_odometry.cpp:454:31: error: ‘class controller::OdomMatrix16x1’ has no member named ‘cwise’
make[3]: *** [CMakeFiles/pr2_mechanism_controllers.dir/src/pr2_odometry.o] Error 1
make[3]: se sale del directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
make[2]: *** [CMakeFiles/pr2_mechanism_controllers.dir/all] Error 2
make[2]: se sale del directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»
make[1]: *** [all] Error 2
make[1]: se sale del directorio «/home/labrobotica/ros_workspace_elec/pr2_controllers/pr2_mechanism_controllers/build»

Originally posted by Carlos on ROS Answers with karma: 53 on 2012-03-28
Post score: 0

A:

The library seems to be depreciated from diamondback. try
sudo apt-get ros-fuerte-pr2-mechanism

(or electric) instead. <Eigen/Core> contains info from <Eigen/Array>

Originally posted by ocli with karma: 215 on 2012-05-28
This answer was ACCEPTED on the original site
Post score: 0

