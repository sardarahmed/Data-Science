Q:

Issues regarding nodelet_manager and map_server

Hello all,
I am facing a startup issue with the nodelet_manager and also with the map_server.
I am trying to setup this on a Nvidia Jetson Nano board, though the same setup is working on a Raspberry Pi 3B+ board. For Jetson, it's diving into certain issues, I resolved many but unable to resolve these ones.
I am attaching the relevant output from the terminal which I get when I run the project.
process[robot2/tcp_server_node-7]: started with pid [17321]
process[robot2/rplidarNode-8]: started with pid [17326]
process[robot2/laser_filter-9]: started with pid [17333]
process[robot2/robot_controller_node-10]: started with pid [17339]
[ INFO] [1580541481.569816769]: RPLIDAR running on ROS package rplidar_ros. SDK Version:1.12.0
process[robot2/nodelet_manager-11]: started with pid [17341]
process[robot2/velocity_smoother-12]: started with pid [17350]
process[map_server-13]: started with pid [17353]
process[robot2/move_base-14]: started with pid [17354]
[ INFO] [1580541481.688089922]: BOX filter started
[ INFO] [1580541481.692382390]: invert filter not set, assuming false
process[robot2/r2amcl-15]: started with pid [17361]
[ WARN] [1580541481.725805073]: Using deprecated map server interface. Please switch to new interface.
[ERROR] [1580541481.845865565]: Failed to load nodelet [/robot2/velocity_smoother] of type [yocs_velocity_smoother/VelocitySmootherNodelet] even after refreshing the cache: According to the loaded plugin descriptions the class yocs_velocity_smoother/VelocitySmootherNodelet with base class type nodelet::Nodelet does not exist. Declared types are  SlamGMappingNodelet nodelet_tutorial_math/Plus pcl/BAGReader pcl/BoundaryEstimation pcl/ConvexHull2D pcl/CropBox pcl/EuclideanClusterExtraction pcl/ExtractIndices pcl/ExtractPolygonalPrismData pcl/FPFHEstimation pcl/FPFHEstimationOMP pcl/MomentInvariantsEstimation pcl/MovingLeastSquares pcl/NodeletDEMUX pcl/NodeletMUX pcl/NormalEstimation pcl/NormalEstimationOMP pcl/NormalEstimationTBB pcl/PCDReader pcl/PCDWriter pcl/PFHEstimation pcl/PassThrough pcl/PointCloudConcatenateDataSynchronizer pcl/PointCloudConcatenateFieldsSynchronizer pcl/PrincipalCurvaturesEstimation pcl/ProjectInliers pcl/RadiusOutlierRemoval pcl/SACSegmentation pcl/SACSegmentationFromNormals pcl/SHOTEstimation pcl/SHOTEstimationOMP pcl/SegmentDifferences pcl/StatisticalOutlierRemoval pcl/VFHEstimation pcl/VoxelGrid test_nodelet/ConsoleTest test_nodelet/FailingNodelet test_nodelet/NodehandleTest test_nodelet/Plus test_nodelet_topic_tools/NodeletLazyString test_nodelet_topic_tools/NodeletThrottleString
[ERROR] [1580541481.847912635]: The error before refreshing the cache was: According to the loaded plugin descriptions the class yocs_velocity_smoother/VelocitySmootherNodelet with base class type nodelet::Nodelet does not exist. Declared types are  SlamGMappingNodelet nodelet_tutorial_math/Plus pcl/BAGReader pcl/BoundaryEstimation pcl/ConvexHull2D pcl/CropBox pcl/EuclideanClusterExtraction pcl/ExtractIndices pcl/ExtractPolygonalPrismData pcl/FPFHEstimation pcl/FPFHEstimationOMP pcl/MomentInvariantsEstimation pcl/MovingLeastSquares pcl/NodeletDEMUX pcl/NodeletMUX pcl/NormalEstimation pcl/NormalEstimationOMP pcl/NormalEstimationTBB pcl/PCDReader pcl/PCDWriter pcl/PFHEstimation pcl/PassThrough pcl/PointCloudConcatenateDataSynchronizer pcl/PointCloudConcatenateFieldsSynchronizer pcl/PrincipalCurvaturesEstimation pcl/ProjectInliers pcl/RadiusOutlierRemoval pcl/SACSegmentation pcl/SACSegmentationFromNormals pcl/SHOTEstimation pcl/SHOTEstimationOMP pcl/SegmentDifferences pcl/StatisticalOutlierRemoval pcl/VFHEstimation pcl/VoxelGrid test_nodelet/ConsoleTest test_nodelet/FailingNodelet test_nodelet/NodehandleTest test_nodelet/Plus test_nodelet_topic_tools/NodeletLazyString test_nodelet_topic_tools/NodeletThrottleString
[FATAL] [1580541481.869766677]: Failed to load nodelet '/robot2/velocity_smoother` of type `yocs_velocity_smoother/VelocitySmootherNodelet` to manager `nodelet_manager'
[ INFO] [1580541481.947580235]: Subscribed to map topic.
[robot2/velocity_smoother-12] process has died [pid 17350, exit code 255, cmd /home/xena/catkin_ws/devel/lib/nodelet/nodelet `load yocs_velocity_smoother/VelocitySmootherNodelet nodelet_manager velocity_smoother/raw_cmd_vel:=cmd_vel/in velocity_smoother/smooth_cmd_vel:=cmd_vel/out velocity_smoother/robot_cmd_vel:=cmd_vel/out velocity_smoother/odometry:=odom __name:=velocity_smoother __log:=/tmp/f8f13060-44c2-11ea-b35d-00044be541e0/robot2-velocity_smoother-12.log].`
log file: /tmp/f8f13060-44c2-11ea-b35d-00044be541e0/robot2-velocity_smoother-12*.log
[ INFO] [1580541482.391220727]: Received a 1984 X 1984 map @ 0.050 m/pix
[ INFO] [1580541482.738032842]: Initializing likelihood field model; this can take some time on large maps...
[ INFO] [1580541483.191312702]: Done initializing likelihood field model.
RPLIDAR S/N: 55BC9AF2C1EA9FC0A2EB92F1C66F3C02
[ INFO] [1580541484.081465957]: Firmware Ver: 1.25
[ INFO] [1580541484.082130936]: Hardware Rev: 5
[ INFO] [1580541484.085126571]: RPLidar health status : 0
[ INFO] [1580541484.654558211]: current scan mode: Express, max_distance: 12.0 m, Point number: 4.0K , angle_compensate: 1
[ WARN] [1580541487.013626724]: Timed out waiting for transform from base_link to = map to become available before running costmap, tf error: canTransform: target_frame = map does not exist. canTransform: source_frame base_link does not exist.. canTransform returned after 0.100251 timeout was 0.1.
[ WARN] [1580541492.073914543]: Timed out waiting for transform from base_link to = map to become available before running costmap, tf error: canTransform: target_frame = map does not exist. canTransform: source_frame base_link does not exist.. canTransform returned after 0.101147 timeout was 0.1.

The below statement:
[ WARN] [1580541492.073914543]: Timed out waiting for transform from base_link to = map to become available before running costmap, tf error: canTransform: target_frame = map does not exist. canTransform: source_frame base_link does not exist.. canTransform returned after 0.101147 timeout was 0.1.

keeps on continually printing to the terminal until I kill the process.
Specifications for the system am using:-
CPU & Processor  >  Nvidia Jetson Nano
OS  > Ubuntu 18.04.4 LTS
Codename  >  bionic
ros-distro  >  melodic

Relevant packages   :

navigation  >  https://github.com/ros-planning/navigation
rplidar  >  https://github.com/Slamtec/rplidar_ros
nodelet  >  https://github.com/ros/nodelet_core

Originally posted by Nitin_J on ROS Answers with karma: 16 on 2020-02-01
Post score: 0

Original comments
Comment by gvdhoorn on 2020-02-02:\

Failed to load nodelet [/robot2/velocity_smoother] of type [yocs_velocity_smoother/VelocitySmootherNodelet]

do you have the yocs_velocity_smoother package installed?
What is the output of rospack find yocs_velocity_smoother?
Comment by Nitin_J on 2020-02-03:
@gvdhoorn Thanks for the suggestion, I had already solved the problem by installing the concerned package, I've now edited the scenario of the problem with the current problems am facing.
Comment by gvdhoorn on 2020-02-03:
Please don't do this.
This is not a forum, but a Q&A site, which works best with a 1-to-1 ratio of problems-to-answers.
Revert your edit, post how you solved your initial problem as an answer, accept your own answer.
Then post a new question with your current problem -- after having made sure you're not posting a duplicate (use Google to search, append site:answers.ros.org to your query).
Comment by gvdhoorn on 2020-02-03:
Oh, and:

I tried all the solutions available but didn't made any difference

this sentence does not give any information. We don't know what you've tried, so we cannot avoid giving you the same advice/help.
Please always describe what you've already read and done, and why that didn't (seem to) help.
Comment by Nitin_J on 2020-02-03:
@gvdhoorn Thanks for the suggestions regarding the usage of the site. I've done the relevant changes and asked for another question regarding the problems currently. Am new to this site so mistakes, apologies for the same, I'll make sure to follow the ethics in the future.
Comment by gvdhoorn on 2020-02-03:
No need to apologise.
Thanks for reverting.

A:

I have solved the problem by installing the yocs_velocity_smoother. I used the following command to do the same
sudo apt install ros-melodic-yocs-velocity-smoother

Completing this operation the nodes, nodelet_manager and velocity_smoother have been started and started communicating as defined (publishing/subscribing to the topics).

Originally posted by Nitin_J with karma: 16 on 2020-02-03
This answer was ACCEPTED on the original site
Post score: 0

