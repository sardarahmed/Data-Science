Q:

rosmake doesn't work with rosdep on arch linux

I'm trying to install ros on may arch linux but, whenever i use rosmake without the --no-rosdep flag i get the following error:
AttributeError: Arch instance has no attribute 'installers'
Here is one example:
$ rosmake ros ros_comm --rosdep-install
[ rosmake ] Packages requested are: ['ros', 'ros_comm']                                                                                              
[ rosmake ] Logging to directory/home/bruno/.ros/rosmake/rosmake_output-20110929-012256                                                              
[ rosmake ] Expanded args ['ros', 'ros_comm'] to:
['rosclean', 'rosmake', 'rospack', 'rosunit', 'rosdep', 'rosbash', 'roscreate', 'rosboost_cfg', 'rosemacs', 'test_rosmake', 'test_rospack', 'test_roslib', 'test_roscreate', 'test_rosdep', 'mk', 'roslib', 'rosbuild', 'roslang', 'rosmaster', 'topic_tools', 'rosconsole', 'rosservice', 'rosgraph', 'rosparam', 'rosnode', 'rosout', 'rosbag', 'roslaunch', 'rostest', 'rosmsg', 'rostopic', 'rosbagmigration', 'perf_roscpp', 'test_roscpp_serialization', 'test_rosnode', 'test_roscpp', 'test_roslaunch', 'test_rostime', 'test_ros', 'test_rosgraph', 'test_rostopic', 'test_topic_tools', 'test_rosparam', 'test_roswtf', 'test_roscpp_serialization_perf', 'test_roslib_comm', 'test_rosservice', 'test_rospy', 'test_rosmsg', 'test_rostest', 'test_crosspackage', 'test_rosmaster', 'test_rosbag', 'roscpp', 'roscpp_traits', 'roscpp_serialization', 'roslisp', 'rospy', 'std_msgs', 'rosgraph_msgs', 'std_srvs', 'rostime', 'roswtf', 'cpp_common', 'message_filters', 'xmlrpcpp', 'roscore_migration_rules']
[ rosmake ] Generating Install Script using rosdep then executing. This may take a minute, you will be prompted for permissions. . .                 
Traceback (most recent call last):
  File "/home/bruno/ros/ros/bin/rosmake", line 65, in <module>
    if rma.main():
  File "/home/bruno/ros/ros/tools/rosmake/src/rosmake/engine.py", line 855, in main
    self.rosdep_install_result = self.install_rosdeps(buildable_packages, options.rosdep_yes)
  File "/home/bruno/ros/ros/tools/rosmake/src/rosmake/engine.py", line 311, in install_rosdeps
    r = rosdep.core.Rosdep(packages, robust=True)
  File "/home/bruno/ros/ros/tools/rosdep/src/rosdep/core.py", line 343, in __init__
    self.yc = YamlCache(self.osi.get_name(), self.osi.get_version(), self.osi.get_os().installers)
AttributeError: Arch instance has no attribute 'installers'
Traceback (most recent call last):
  File "/home/bruno/ros/ros/bin/rosmake", line 65, in <module>
    if rma.main():
  File "/home/bruno/ros/ros/tools/rosmake/src/rosmake/engine.py", line 855, in main
    self.rosdep_install_result = self.install_rosdeps(buildable_packages, options.rosdep_yes)
  File "/home/bruno/ros/ros/tools/rosmake/src/rosmake/engine.py", line 311, in install_rosdeps
    r = rosdep.core.Rosdep(packages, robust=True)
  File "/home/bruno/ros/ros/tools/rosdep/src/rosdep/core.py", line 343, in __init__
    self.yc = YamlCache(self.osi.get_name(), self.osi.get_version(), self.osi.get_os().installers)
AttributeError: Arch instance has no attribute 'installers'`

when i used the --no-rosdep flag it just worked fine... so, what do i do? i'd like to install the desktop-full with rosinstall bu it just doesn't work because of this.

Originally posted by Bruno Normande on ROS Answers with karma: 35 on 2011-09-28
Post score: 0

A:

Here's a couple patches that got it working for me:
http://pastebin.com/yrNRShkU
http://pastebin.com/JqRpwWiV

Originally posted by gleechinese with karma: 96 on 2011-10-09
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by tfoote on 2011-10-10:
Please update the ticket in the future,  it was just luck that I caught your comment and added it to the ticket.  You'll need a code.ros.org account to update it, and it may take 15 minutes for the account to propogate into the trac instance.
Comment by gleechinese on 2011-10-10:
Oops, the installer command should be "pacman -S" not "pacman -Su". Corrected in pastebin.
Comment by tfoote on 2011-10-10:
Thanks for the patches, I've opened a ticket to get them merged in https://code.ros.org/trac/ros/ticket/3700

