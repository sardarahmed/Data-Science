Q:

Publish an length unknown vector message on a topic

hi, i'm trying to publish a self-defined message composed by 4 vector whose length is unknown.
my .cpp code (incomplete) could be the following:
std::vector <int> l,d,r,u;
   data_pub_ = it_.advertise<rd_ctrl::proc_data>("data", 1);
//vectors u,d,l,r computation
data.u=u;
data.d=d;
data.l=l;
data.r=r;
data_pub_.publish(data);

if it works (i don't know...if there are errors please tell me), how can i define the .msg file?
thank you very much for your help!

Originally posted by mateo_7_7 on ROS Answers with karma: 90 on 2013-02-26
Post score: 0

A:

For creating a msg file,create a folder "msg" in ur package directory. In directory create  msg file name.msg with following content:

int32[] l
int32[] d
int32[] r
int32[] u

Also make changes in CMakelist.txt for compiling msg files. If u ur not sure of vector size u can just declare a variable of message type and publish it without assigning them a value.

Originally posted by ayush_dewan with karma: 1610 on 2013-02-26
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by shan333 on 2013-02-27:
I followed this way to create a message containing an array with unknown size.
But when I assigned some value to the array in the program and publish,
it gave "Segmentation fault (core dumped)" when running.
Should I have to declare the size of the array in the program? How can it be done?
Comment by shan333 on 2013-02-27:
I followed this way to create a message containing an array with unknown size.
Comment by ayush_dewan on 2013-02-27:
U need to first allot memory. Do it using msg.a.resize(size of vector) or u can push elements into it using " msg.a.push_back(integer value) .

