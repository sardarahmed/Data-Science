Q:

The Pick and Place Autonomous Demo, grasping error

Hi all
I was going through the pr2_pick_and_place_demos/Tutorials/The Pick and Place Autonomous Demo. A simulated pr2 was running. The robot always succeed to find the table, move the arm but finally failed to grasp the object, the gripper always stopped nearby the object and reported an error(I have tried different simple objects from gazebo_worlds/objects).
Here is the output from rviz, gazebo, PR2 Dashboard(/rosout) and terminal. Can someone tell me what could possibly go wrong? Thanks. BTW, I was using Diamondback. In the terminal with pr2_tabletop_manipulation.launch, it shows
[ WARN] [1313335466.622271285, 3307.596000000]: waiting for rgbd assembler at /rgbd_assembly
[ INFO] [1313335466.632494052, 3307.596000000]: waitForService: Service [/rgbd_assembly] has not been advertised, waiting...

Don't know if that affects anything.

PR2 Dashboard, Rosout message:
header: 
  seq: 13383
  stamp: 3451.653000000
  frame_id: 
level: 8
name: /object_manipulator
msg: Hand posture controller timed out on goal (1)
file: /tmp/buildd/ros-diamondback-object-manipulation-0.4.4/debian/ros-diamondback-object-manipulation/opt/ros/diamondback/stacks/object_manipulation/object_manipulator/src/tools/mechanism_interface.cpp
function: MechanismInterface::handPostureGraspAction
line: 975
topics[]
  topics[0]: /rosout
  topics[1]: /object_manipulator/grasp_execution_markers
  topics[2]: /object_manipulator/object_manipulator_pickup/result
  topics[3]: /object_manipulator/object_manipulator_pickup/feedback
  topics[4]: /object_manipulator/object_manipulator_pickup/status
  topics[5]: /object_manipulator/object_manipulator_place/result
  topics[6]: /object_manipulator/object_manipulator_place/feedback
  topics[7]: /object_manipulator/object_manipulator_place/status
  topics[8]: /head_traj_controller/point_head_action/goal
  topics[9]: /head_traj_controller/point_head_action/cancel
  topics[10]: /attached_collision_object
  topics[11]: /r_cart/command_pose
  topics[12]: /l_cart/command_pose
  topics[13]: /move_left_arm/goal
  topics[14]: /move_left_arm/cancel
  topics[15]: /l_gripper_grasp_posture_controller/goal
  topics[16]: /l_gripper_grasp_posture_controller/cancel
  topics[17]: /move_right_arm/goal
  topics[18]: /move_right_arm/cancel
  topics[19]: /r_gripper_grasp_posture_controller/goal
  topics[20]: /r_gripper_grasp_posture_controller/cancel

header: 
  seq: 13384
  stamp: 3451.653000000
  frame_id: 
level: 8
name: /object_manipulator
msg: Grasp error; exception: grasp execution:mechanism:Hand posture controller timed out
file: /tmp/buildd/ros-diamondback-object-manipulation-0.4.4/debian/ros-diamondback-object-manipulation/opt/ros/diamondback/stacks/object_manipulation/object_manipulator/src/object_manipulator.cpp
function: ObjectManipulator::pickup
line: 240
topics[]
  topics[0]: /rosout
  topics[1]: /object_manipulator/grasp_execution_markers
  topics[2]: /object_manipulator/object_manipulator_pickup/result
  topics[3]: /object_manipulator/object_manipulator_pickup/feedback
  topics[4]: /object_manipulator/object_manipulator_pickup/status
  topics[5]: /object_manipulator/object_manipulator_place/result
  topics[6]: /object_manipulator/object_manipulator_place/feedback
  topics[7]: /object_manipulator/object_manipulator_place/status
  topics[8]: /head_traj_controller/point_head_action/goal
  topics[9]: /head_traj_controller/point_head_action/cancel
  topics[10]: /attached_collision_object
  topics[11]: /r_cart/command_pose
  topics[12]: /l_cart/command_pose
  topics[13]: /move_left_arm/goal
  topics[14]: /move_left_arm/cancel
  topics[15]: /l_gripper_grasp_posture_controller/goal
  topics[16]: /l_gripper_grasp_posture_controller/cancel
  topics[17]: /move_right_arm/goal
  topics[18]: /move_right_arm/cancel
  topics[19]: /r_gripper_grasp_posture_controller/goal
  topics[20]: /r_gripper_grasp_posture_controller/cancel

Terminal with pick_and_place_demo.py
[INFO] [WallTime: 1313333951.928096] [0.000000] grasp_executive: waiting for object_manipulator_pickup action
[INFO] [WallTime: 1313333952.319281] [3134.483000] grasp_executive: object_manipulator_pickup action found
[INFO] [WallTime: 1313333952.405726] [3134.490000] grasp_executive: waiting for object_manipulator_place action
[INFO] [WallTime: 1313333953.660155] [3134.612000] grasp_executive: object_manipulator_place action found
[INFO] [WallTime: 1313333953.780220] [3134.621000] grasp_executive: waiting for point_head_action client
[INFO] [WallTime: 1313333955.345885] [3134.802000] grasp_executive: point_head_action client found
[INFO] [WallTime: 1313333955.620685] [3134.824000] grasp_executive: waiting for reactive place clients
[INFO] [WallTime: 1313333956.402844] [3134.915000] grasp_executive: reactive place clients found
[INFO] [WallTime: 1313333956.404042] [3134.915000] initializing controller managers for both arms
[INFO] [WallTime: 1313333956.404520] [3134.915000] initializing r controller manager
[INFO] [WallTime: 1313333956.404829] [3134.915000] controller manager: using_slip_controller:False
[INFO] [WallTime: 1313333956.405110] [3134.915000] controller manager: using_slip_detection:False
[INFO] [WallTime: 1313333956.405396] [3134.915000] controller manager waiting for pr2_controller_manager services to be there
[INFO] [WallTime: 1313333956.405694] [3134.915000] controller manager: waiting for pr2_controller_manager/load_controller to be there
[INFO] [WallTime: 1313333956.436547] [3134.925000] controller manager: pr2_controller_manager/load_controller found
[INFO] [WallTime: 1313333956.438188] [3134.925000] controller manager: waiting for pr2_controller_manager/unload_controller to be there
[INFO] [WallTime: 1313333956.494586] [3134.934000] controller manager: pr2_controller_manager/unload_controller found
[INFO] [WallTime: 1313333956.495019] [3134.934000] controller manager: waiting for pr2_controller_manager/switch_controller to be there
[INFO] [WallTime: 1313333956.512625] [3134.934000] controller manager: pr2_controller_manager/switch_controller found
[INFO] [WallTime: 1313333956.515286] [3134.934000] controller manager: waiting for pr2_controller_manager/list_controllers to be there
[INFO] [WallTime: 1313333956.544543] [3134.946000] controller manager: pr2_controller_manager/list_controllers found
[INFO] [WallTime: 1313333956.762364] [3134.953000] controller manager: waiting for r_arm_controller/joint_trajectory_action to be there
[INFO] [WallTime: 1313333957.991711] [3135.101000] controller manager: r_arm_controller/joint_trajectory_action found
[INFO] [WallTime: 1313333957.992133] [3135.101000] controller manager: waiting for r_gripper_controller/gripper_action to be there
[INFO] [WallTime: 1313333957.992534] [3135.101000] controller manager: r_gripper_controller/gripper_action found
[INFO] [WallTime: 1313333957.992869] [3135.101000] setting Cartesian controller parameters
[INFO] [WallTime: 1313333958.168932] [3135.117000] loading any unloaded Cartesian controllers
[INFO] [WallTime: 1313333958.312372] [3135.134000] all Cartesian controllers loaded
[INFO] [WallTime: 1313333960.334492] [3135.376000] done loading controllers
[INFO] [WallTime: 1313333960.334960] [3135.376000] controller manager: waiting for r_arm_cartesian_trajectory_controller/check_moving to be there
[INFO] [WallTime: 1313333960.362241] [3135.377000] controller manager: r_arm_cartesian_trajectory_controller/check_moving found
[INFO] [WallTime: 1313333960.362769] [3135.377000] controller manager: waiting for r_arm_cartesian_trajectory_controller/move_to to be there
[INFO] [WallTime: 1313333960.374659] [3135.378000] controller manager: r_arm_cartesian_trajectory_controller/move_to found
[INFO] [WallTime: 1313333960.375126] [3135.378000] controller manager: waiting for r_arm_cartesian_trajectory_controller/preempt to be there
[INFO] [WallTime: 1313333960.403014] [3135.379000] controller manager: r_arm_cartesian_trajectory_controller/preempt found
[INFO] [WallTime: 1313333960.403664] [3135.379000] setting tip frame back to wrist_roll_link
[INFO] [WallTime: 1313333960.404117] [3135.379000] setting Cartesian controller parameters
[INFO] [WallTime: 1313333960.548146] [3135.396000] setting Cartesian controller parameters
[INFO] [WallTime: 1313333961.283707] [3135.480000] Cartesian controllers unloaded
[INFO] [WallTime: 1313333962.576650] [3135.658000] all Cartesian controllers loaded
[INFO] [WallTime: 1313333962.802866] [3135.695000] creating IKUtilities class objects
[INFO] [WallTime: 1313333962.816065] [3135.697000] ik_utilities: waiting for IK services to be there
[INFO] [WallTime: 1313333962.863233] [3135.701000] ik_utilities: services found
[INFO] [WallTime: 1313333962.870564] [3135.701000] getting the IK solver info
[INFO] [WallTime: 1313333962.892566] [3135.703000] done getting the IK solver info
[INFO] [WallTime: 1313333962.919755] [3135.704000] ik_utilities: done init
[INFO] [WallTime: 1313333962.921915] [3135.704000] done creating IKUtilities class objects
[INFO] [WallTime: 1313333962.925873] [3135.704000] done with controller_manager init for the r arm
[INFO] [WallTime: 1313333962.927118] [3135.705000] initializing l controller manager
[INFO] [WallTime: 1313333962.928183] [3135.705000] controller manager: using_slip_controller:False
[INFO] [WallTime: 1313333962.929434] [3135.705000] controller manager: using_slip_detection:False
[INFO] [WallTime: 1313333962.931974] [3135.705000] controller manager waiting for pr2_controller_manager services to be there
[INFO] [WallTime: 1313333962.934115] [3135.705000] controller manager: waiting for pr2_controller_manager/load_controller to be there
[INFO] [WallTime: 1313333962.946932] [3135.705000] controller manager: pr2_controller_manager/load_controller found
[INFO] [WallTime: 1313333962.950045] [3135.707000] controller manager: waiting for pr2_controller_manager/unload_controller to be there
[INFO] [WallTime: 1313333962.968694] [3135.707000] controller manager: pr2_controller_manager/unload_controller found
[INFO] [WallTime: 1313333962.969237] [3135.707000] controller manager: waiting for pr2_controller_manager/switch_controller to be there
[INFO] [WallTime: 1313333963.061200] [3135.721000] controller manager: pr2_controller_manager/switch_controller found
[INFO] [WallTime: 1313333963.061611] [3135.721000] controller manager: waiting for pr2_controller_manager/list_controllers to be there
[INFO] [WallTime: 1313333963.100582] [3135.728000] controller manager: pr2_controller_manager/list_controllers found
[INFO] [WallTime: 1313333963.313206] [3135.752000] controller manager: waiting for l_arm_controller/joint_trajectory_action to be there
[INFO] [WallTime: 1313333964.683370] [3135.923000] controller manager: l_arm_controller/joint_trajectory_action found
[INFO] [WallTime: 1313333964.684062] [3135.923000] controller manager: waiting for l_gripper_controller/gripper_action to be there
[INFO] [WallTime: 1313333964.684652] [3135.923000] controller manager: l_gripper_controller/gripper_action found
[INFO] [WallTime: 1313333964.685183] [3135.923000] setting Cartesian controller parameters
[INFO] [WallTime: 1313333964.953010] [3135.963000] loading any unloaded Cartesian controllers
[INFO] [WallTime: 1313333964.979235] [3135.977000] all Cartesian controllers loaded
[INFO] [WallTime: 1313333967.032172] [3136.188000] done loading controllers
[INFO] [WallTime: 1313333967.032697] [3136.188000] controller manager: waiting for l_arm_cartesian_trajectory_controller/check_moving to be there
[INFO] [WallTime: 1313333967.041368] [3136.201000] controller manager: l_arm_cartesian_trajectory_controller/check_moving found
[INFO] [WallTime: 1313333967.041817] [3136.201000] controller manager: waiting for l_arm_cartesian_trajectory_controller/move_to to be there
[INFO] [WallTime: 1313333967.057327] [3136.201000] controller manager: l_arm_cartesian_trajectory_controller/move_to found
[INFO] [WallTime: 1313333967.057780] [3136.201000] controller manager: waiting for l_arm_cartesian_trajectory_controller/preempt to be there
[INFO] [WallTime: 1313333967.070502] [3136.201000] controller manager: l_arm_cartesian_trajectory_controller/preempt found
[INFO] [WallTime: 1313333967.071151] [3136.201000] setting tip frame back to wrist_roll_link
[INFO] [WallTime: 1313333967.071587] [3136.201000] setting Cartesian controller parameters
[INFO] [WallTime: 1313333967.465455] [3136.241000] setting Cartesian controller parameters
[INFO] [WallTime: 1313333968.256788] [3136.329000] Cartesian controllers unloaded
[INFO] [WallTime: 1313333969.843109] [3136.566000] all Cartesian controllers loaded
[INFO] [WallTime: 1313333969.985111] [3136.573000] creating IKUtilities class objects
[INFO] [WallTime: 1313333970.006645] [3136.573000] ik_utilities: waiting for IK services to be there
[INFO] [WallTime: 1313333970.071820] [3136.578000] ik_utilities: services found
[INFO] [WallTime: 1313333970.072339] [3136.578000] getting the IK solver info
[INFO] [WallTime: 1313333970.083505] [3136.579000] done getting the IK solver info
[INFO] [WallTime: 1313333970.093273] [3136.579000] ik_utilities: done init
[INFO] [WallTime: 1313333970.093690] [3136.579000] done creating IKUtilities class objects
[INFO] [WallTime: 1313333970.094004] [3136.579000] done with controller_manager init for the l arm
[INFO] [WallTime: 1313333970.094302] [3136.579000] done initializing controller managers for both arms
[INFO] [WallTime: 1313333970.094570] [3136.579000] grasp_executive: waiting for object_detection service
[INFO] [WallTime: 1313333970.104960] [3136.580000] grasp_executive: object_detection service found
[INFO] [WallTime: 1313333970.105458] [3136.580000] grasp_executive: waiting for collision_map_processing service
[INFO] [WallTime: 1313333970.114597] [3136.581000] grasp_executive: collision_map_processing service found
[INFO] [WallTime: 1313333970.115180] [3136.581000] grasp_executive: waiting for find_cluster_bounding_box service
[INFO] [WallTime: 1313333970.127889] [3136.582000] grasp_executive: find_cluster_bounding_box service found
[INFO] [WallTime: 1313333970.128383] [3136.582000] waiting for collision_map_self_occ_node/reset service
[INFO] [WallTime: 1313333970.215393] [3136.593000] waiting for make_static_collision_map action server
[INFO] [WallTime: 1313333971.697080] [3136.801000] advertising on collision object topics
[INFO] [WallTime: 1313333971.761589] [3136.801000] done initializing collision map interface
type:
'start' to start the autonomous demo
s to switch pick-up and put-down sides
hs to point the head at either side
r to control the right arm, l to control the left arm
d to detect objects, dc to detect and take a new static collision map, dca to detect, take a new collision map, and clear attached objects
dp to detect several possible models for each object, take a new collision map, and clear attached objects
p to pick up an object
w to place the object in the place rectangle, wo to place the object where it came from
h to point the head at the current place rectangle and draw it
t to find the table
rm to reset the collision map, tm to take a new collision map
det to detach the object in the gripper
q to quit
press enter to continue
start
[INFO] [WallTime: 1313333988.902952] [3139.026000] resetting the preempt
type s to preempt the autonomous demo, p to pause
[INFO] [WallTime: 1313333988.907190] [3139.026000] try_hard_to_move_joint try number: 0
[INFO] [WallTime: 1313333988.959455] [3139.031000] asking move_arm to go to angles: -2.135 0.803 -1.732 -1.905 -2.369 -1.680 1.398
[INFO] [WallTime: 1313333989.027224] [3139.041000] waiting for move arm server
[INFO] [WallTime: 1313333990.248358] [3139.208000] move arm server was there
[INFO] [WallTime: 1313333991.184634] [3139.321000] move_arm succeeded
[INFO] [WallTime: 1313333991.185119] [3139.321000] move arm reported success
[INFO] [WallTime: 1313333991.185485] [3139.321000] try_hard_to_move_joint try number: 0
[INFO] [WallTime: 1313333991.361930] [3139.345000] asking move_arm to go to angles: 2.135 0.803 1.732 -1.905 2.369 -1.680 1.398
[INFO] [WallTime: 1313333991.420166] [3139.351000] waiting for move arm server
[INFO] [WallTime: 1313333991.997419] [3139.406000] move arm server was there
[INFO] [WallTime: 1313333992.600928] [3139.476000] move_arm succeeded
[INFO] [WallTime: 1313333992.601500] [3139.476000] move arm reported success
[INFO] [WallTime: 1313333993.777131] [3139.601000] calling tabletop detection
[INFO] [WallTime: 1313333995.313601] [3139.763000] tabletop detection reports success
[INFO] [WallTime: 1313333995.441370] [3139.791000] table front edge x: 0.396
[INFO] [WallTime: 1313333995.441873] [3139.791000] table height: 0.504
[INFO] [WallTime: 1313333995.443339] [3139.791000] detection finished, finding bounding boxes for clusters and sorting objects
[INFO] [WallTime: 1313333995.649757] [3139.797000] object 0, red: point cluster with 767 points and col name graspable_object_41
[INFO] [WallTime: 1313333995.652971] [3139.797000] object 1, green: point cluster with 626 points and col name graspable_object_42
[INFO] [WallTime: 1313333998.188565] [3140.093000] calling tabletop detection
[INFO] [WallTime: 1313333999.544262] [3140.234000] tabletop detection reports success
[INFO] [WallTime: 1313333999.617251] [3140.234000] detection finished, finding bounding boxes for clusters and sorting objects
[INFO] [WallTime: 1313333999.756837] [3140.255000] object 0, red: point cluster with 866 points and col name graspable_object_44
[INFO] [WallTime: 1313333999.757811] [3140.255000] object 1, green: point cluster with 1433 points and col name graspable_object_43
[INFO] [WallTime: 1313333999.758976] [3140.255000] object dist from back edge is -0.182
[INFO] [WallTime: 1313333999.760009] [3140.255000] object dist from back edge is -0.179
[INFO] [WallTime: 1313334003.076640] [3140.765000] calling tabletop detection
[INFO] [WallTime: 1313334004.246390] [3140.887000] tabletop detection reports success
[INFO] [WallTime: 1313334004.265934] [3140.887000] detection finished, finding bounding boxes for clusters and sorting objects
[INFO] [WallTime: 1313334004.269303] [3140.887000] saw 2 objects on the right and 0 objects on the left
[INFO] [WallTime: 1313334004.271047] [3140.887000] setting pick_up_side to the right side, put_down_side to the left
[INFO] [WallTime: 1313334004.288691] [3140.887000] starting to move objects from r side to l side
[INFO] [WallTime: 1313334004.290029] [3140.887000] object_tries:0
[INFO] [WallTime: 1313334007.918552] [3141.352000] calling tabletop detection
[INFO] [WallTime: 1313334009.054555] [3141.486000] tabletop detection reports success
[INFO] [WallTime: 1313334060.713876] [3148.001000] detection finished, finding bounding boxes for clusters and sorting objects
[INFO] [WallTime: 1313334060.818590] [3148.011000] object 0, red: point cluster with 839 points and col name graspable_object_46
[INFO] [WallTime: 1313334060.820987] [3148.011000] object 1, green: point cluster with 1445 points and col name graspable_object_45
[INFO] [WallTime: 1313334060.823554] [3148.011000] object dist from back edge is -0.182
[INFO] [WallTime: 1313334060.826233] [3148.011000] object dist from back edge is -0.180
[INFO] [WallTime: 1313334060.829517] [3148.011000] dist_from_point:0.158
[INFO] [WallTime: 1313334060.831536] [3148.011000] refining object detection
[INFO] [WallTime: 1313334063.247282] [3148.297000] calling tabletop detection
[INFO] [WallTime: 1313334064.487983] [3148.434000] tabletop detection reports success
[INFO] [WallTime: 1313334119.636449] [3155.454000] detection finished, finding bounding boxes for clusters and sorting objects
[INFO] [WallTime: 1313334119.974053] [3155.518000] object 0, red: point cluster with 878 points and col name graspable_object_48
[INFO] [WallTime: 1313334119.975549] [3155.518000] object 1, green: point cluster with 1332 points and col name graspable_object_47
[INFO] [WallTime: 1313334119.976729] [3155.518000] refined object's collision name: graspable_object_47
[INFO] [WallTime: 1313334119.977480] [3155.518000] attempting to grasp an object, whicharm = 0
sending object collision name of: graspable_object_47
[INFO] [WallTime: 1313334311.357544] [3177.776000] grasp result: ERROR
saw a bad error, exiting the autonomous thread (hit q to go back to the keyboard interface)

Originally posted by vincent on ROS Answers with karma: 311 on 2011-08-14
Post score: 1

A:

See http://answers.ros.org/question/1675/pr2-object-manipulation-hand-posture-fail-hand?answer=2802#2802

Originally posted by hsiao with karma: 741 on 2011-08-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by vincent on 2011-08-14:
The error in my case lies in the database.  solved by running the database server and changing the database to household_objects-0.4_diamondback_prerelease_2.backup.  but now i went into another problem. (see the post below)

