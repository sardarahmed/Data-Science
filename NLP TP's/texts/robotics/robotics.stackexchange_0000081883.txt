Q:

Reset model poses in a python script

Hi!
I wrote a script with a for loop, where inside I navigate a robot and save the camera output/trajectories.
At the end of the loop I would like to reset the poses of the model, but unfortunately trying
self.reset = rospy.Publisher("gazebo/reset_models", Empty, queue_size=10) 
self.reset.publish(Empty())

does not work.
Do you have an idea on what might work there? Thanks!

Originally posted by kchledowski on ROS Answers with karma: 52 on 2017-07-20
Post score: 0

A:

Isn't /gazebo/reset_models a service, not a topic?

I am sorry, could you please help me by telling what should I type into my for loop in order to get the model poses reset?

I don't know about "get model poses reset", but for invoking the /gazebo/reset_simulation service, the following should work:
import rospy
from std_srvs.srv import Empty

# maybe do some 'wait for service' here
reset_simulation = rospy.ServiceProxy('/gazebo/reset_simulation', Empty)

# invoke
reset_simulation()

See also the Writing a Simple Service and Client (Python) tutorial, specifically the Writing the Client Node section.

Originally posted by gvdhoorn with karma: 86574 on 2017-07-21
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by kchledowski on 2017-07-21:
You are right, thanks for pointing this out :)
Unfortunately, I still didn't manage to reset the world inside my script. I tried to do the following:
self.reset = rospy.Service('gazebo/reset_simulation', Empty); self.reset(Empty)
However, rosservice call /gazebo/reset_world "{}" works fine.
Comment by gvdhoorn on 2017-07-21:
I think you'll need to add the / prefix, otherwise you're specifying a relative name.
Comment by kchledowski on 2017-07-21:
Thanks, but unfortunately, it does not work. I have tried self.reset = rospy.Service('reset', "/gazebo/reset_simulation", Empty), but I get AttributeError: 'str' object has no attribute '_request_class'
Comment by kchledowski on 2017-07-21:
I can find /gazebo/reset_simulation in the rosservice list, but when I go to the folder gazebo_msgs.srv, there is no reset_simulation.srv :( any idea on what can I do to import this service?
Comment by kchledowski on 2017-07-21:
Moreover, I could not find any file "reset_simulation" on my computer.
Comment by gvdhoorn on 2017-07-21:
I'm not sure what you are trying to do. rospy.Service('reset', "/gazebo/reset_simulation", Empty) that is not how you should initialise any service object, neither server nor client.
Comment by gvdhoorn on 2017-07-21:\

I could not find any file "reset_simulation" on my computer.

Where are you expecting to find it? The service is of type Empty apparently, so you'd have to look for Empty.srv, which is in std_srvs.
Comment by kchledowski on 2017-07-21:
I am sorry, could you please help me by telling what should I type into my for loop in order to get the model poses reset?
Comment by kchledowski on 2017-07-21:
I am wondering, what is the good way to initialize rospy service. self.reset = rospy.Service('gazebo/reset_simulation', Empty) comes to my mind, but I am missing one argument. Unfortunately, I do not know what should it be.
Comment by kchledowski on 2017-07-21:
the second argument gives me AttributeError: type object 'Empty' has no attribute '_request_class'
Comment by gvdhoorn on 2017-07-21:
What I showed in my answer was only an example.
If I do exactly what I wrote there, I can successfully reset my Gazebo here, so please check what you have done on your side.
Comment by gvdhoorn on 2017-07-21:
And please take note of the / prefix on the gazebo/reset_simulation name! It is important.
Comment by kchledowski on 2017-07-21:
Thank you so much for your time!! I found out that i have declared Empty as a msg and service at the same time, which caused my program to fail :)
I really appreciate your help! Have a nice day!

