Q:

Interactive marker attached to a moving frame?

Hi,
I'm new to ROS and working in C++ and kinetic. I am able to create an interactive marker attached to the "world" frame and set its pose. But if I attach the interactive marker to a moving piece of my robot (defined with a .urdf), the interactive marker does not appear. Is there a simple example of attaching an interactive marker to a moving frame that I can scrutinize? Have been searching for one but I'm coming up empty.

Originally posted by mogumbo on ROS Answers with karma: 171 on 2017-05-30
Post score: 1

A:

That's the sort of thing I was looking for. Thank you. The problem was that I included this line when creating markers:
int_marker.header.stamp = ros::Time::now();

This causes interactive markers attached to moving frames to not appear. What's more, adding the stamp to just one marker causes all markers to not appear, not just the one that has the stamp. Adding a stamp does not appear to cause any problems for markers in the "world" frame that have their poses updated constantly.
I read some about tf and timestamps, but I still don't understand what's going on here. Can anyone explain it?

Originally posted by mogumbo with karma: 171 on 2017-06-01
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by lucasw on 2017-06-08:
I ran into this problem also, and made an issue here: https://github.com/ros-visualization/interactive_markers/issues/34
Comment by dgossow on 2017-06-08:
If you assign a (valid) timestamp, the marker should appear but not be moving at all, since it will use the transform from that particular moment in time. Might be a bug. See http://docs.ros.org/jade/api/visualization_msgs/html/msg/InteractiveMarker.html
Comment by dgossow on 2017-06-08:
Do you run this on multiple computers, i.e. ros::Time::now() is not from the same clock as the tf info?
Comment by mogumbo on 2017-06-08:
It's the same computer. I'm not going to guess whether or not this is a bug--I haven't been using ROS long enough.

