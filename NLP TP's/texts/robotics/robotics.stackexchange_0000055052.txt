Q:

Testing DWA Local Planner - approaches goal, stops, keeps swinging left & right

I'm trying the DWA Local Planner as an alternative for the TrajectoryPlanner. At first it moves heading to the given goal pretty fast. But close to the goal, that is about half a meter which still is quite a distance considering that the whole world of the robot is just a plane of 2 by 3 meters, it kind of stops and keeps like dancing in place.
Here's my parameter dump for the local costmap and the DWA Local Planner. There has to be something wrong...
//edit: Okay, I overlooked an error message coming out of the local planner. Here it is:

None of the 94 first of 94 (94) points of the global plan were in the local costmap and free

What might be causing this error?
Thanks for your help!
Cheers,
Hendrik

Originally posted by Hendrik Wiese on ROS Answers with karma: 1145 on 2013-10-26
Post score: 1

A:

I have also found some problems around the end of the plans. This is due to some errors in DWA with setting the weights of the different critics. I hope to have a fix for it soon.
For the updated error, do your global map and local map line up the way you think they should?

Originally posted by David Lu with karma: 10932 on 2013-11-01
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Hendrik Wiese on 2013-11-01:
Most of the time. However, sporadically I see wrong tf data (i.e. /base_link jumping to a wrong location for a fraction of a second and immediately return to the correct location). No filters are running yet, so this might likely have some negative influence on the quality of the navigation stack.
Comment by David Lu on 2013-11-01:
AMCL Problem?
Comment by Hendrik Wiese on 2013-11-01:
AMCL isn't started. My robot is just simulated and the simulator provides me with perfect sensor data (x, y, a, vx, vy, va). Despite that tf sometimes jumps around. I've still got to investigate that before ROS can take over controlling the real robot (which isn't even built, yet).
Comment by Hendrik Wiese on 2013-11-02:
So, how about the problems at the end of a plan? By when, approx., do you think you can fix them? Matter of hours? Days? Months? Just curious... on one hand. On the other hand, unfortunately, I've got a pretty strong deadline...
Comment by David Lu on 2013-11-04:
Are you compiling your own version of DWA?
Comment by Hendrik Wiese on 2013-11-04:
Nope. Not yet. Should I?
Comment by David Lu on 2013-11-04:
Which version are you running?
Comment by David Lu on 2013-11-04:
My basic fix is to change this line: https://github.com/ros-planning/navigation/blob/hydro-devel/dwa_local_planner/src/dwa_planner.cpp#L270 to be sq_dist > forward_point_distance_ * forward_point_distance_ * 2
Comment by Hendrik Wiese on 2013-11-04:
Alright, I'll give it a try and report back... //edit: Okay, it seems to work but not a hundret percent reliable. It's somehow depending on the value of sim_time. The higher I set it, the more likely DWA will fail again. Closer to the given goal than before, but still...

