Q:

resource_retriever build failure on mac osx

Hello!
I'm trying to install ROS on my mac. I'm running the following now:
./src/catkin/bin/catkin_make_isolated --install

Apparently resource retriever is not friendly enough with my libcurl. Do I need resource retriever in the first place?
Here is the error I get:
Undefined symbols for architecture x86_64: "_curl_easy_cleanup", referenced from: resource_retriever::Retriever::~Retriever() in retriever.cpp.o 

Here is the full log:
==> Processing catkin package: 'resource_retriever'
==> Building with env: '/Users/olegsinyavskiy/ros_catkin_ws/install_isolated/env.sh'
Makefile exists, skipping explicit cmake invocation...
==> make cmake_check_build_system in '/Users/olegsinyavskiy/ros_catkin_ws/build_isolated/resource_retriever'
==> make -j4 -l4 in '/Users/olegsinyavskiy/ros_catkin_ws/build_isolated/resource_retriever'
Linking CXX shared library /Users/olegsinyavskiy/ros_catkin_ws/devel_isolated/resource_retriever/lib/libresource_retriever.dylib
ld: warning: ignoring file /Library/Frameworks//libcurl.framework/libcurl, missing required architecture x86_64 in file /Library/Frameworks//libcurl.framework/libcurl (2 slices)
Undefined symbols for architecture x86_64:
"_curl_easy_cleanup", referenced from:
resource_retriever::Retriever::~Retriever() in retriever.cpp.o
"_curl_easy_init", referenced from:
resource_retriever::Retriever::Retriever() in retriever.cpp.o
"_curl_easy_perform", referenced from:
resource_retriever::Retriever::get(std::string const&) in retriever.cpp.o
"_curl_easy_setopt", referenced from:
resource_retriever::Retriever::get(std::string const&) in retriever.cpp.o
"_curl_global_cleanup", referenced from:
resource_retriever::CURLStaticInit::~CURLStaticInit() in retriever.cpp.o
"_curl_global_init", referenced from:
resource_retriever::CURLStaticInit::CURLStaticInit() in retriever.cpp.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [/Users/olegsinyavskiy/ros_catkin_ws/devel_isolated/resource_retriever/lib/libresource_retriever.dylib] Error 1
make[1]: *** [CMakeFiles/resource_retriever.dir/all] Error 2
make: *** [all] Error 2
<== Failed to process package 'resource_retriever':
Command '/Users/olegsinyavskiy/ros_catkin_ws/install_isolated/env.sh make -j4 -l4' returned non-zero exit status 2

Originally posted by otognan on ROS Answers with karma: 21 on 2013-08-19
Post score: 2

Original comments
Comment by chenyu on 2013-09-25:
I have faced the same problem. Did you solve it or not?
Comment by Artem on 2013-10-06:
I just got the same error when decided to rebuild hydro. Moreover I have it built in /opt/ros/hydro/ros. Probably  I have changed something between the builds.

A:

The problem is in Apple frameworks that are installed to /Library/Frameworks//
As I mentioned above in my comment, I did not have any problem compiling  resource_retriever just a few days, however just now this problem popped up. The reason is in ConceptDraw Office (or some other dmg package in your case) that I recently installed. This software installed all the frameworks (curl, png..) that brakes the compilation process. So the solution was simply removing all those frameworks. Make sure, you have libcurl, libpng etc installed in your system with homebrew.

Originally posted by Artem with karma: 709 on 2013-10-06
This answer was ACCEPTED on the original site
Post score: 0

