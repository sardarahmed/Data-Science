Q:

Problem with amcl - need some help!

Hello all!
I have a problem with amcl.  My URDF model has a joints. When I launch amcl, it don't work. My robot can't find location himself, it start random driving and can't see obstacles. At that moment i don't have error message.
This is my main launch file:
<launch>

    <param name="robot_description" command="$(find xacro)/xacro.py '$(find tod_description)/urdf/bot_arm.urdf.xacro'" />

   <node name="arduino" pkg="ros_arduino_python" type="arduino_node.py" output="screen">
      <rosparam file="$(find ros_arduino_python)/config/my_arduino_params.yaml" command="load" />
     <!-- <param name="arduino/odom_angular_scale_correction" value="1.25"/> -->
   </node>

  <node name="arbotix" pkg="arbotix_python" type="arbotix_driver" output="screen">
      <rosparam file="$(find bot_bringup)/config/bot_arbotix.yaml" command="load" />
      <param name="sim" value="false"/>
  </node>  

  <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher">
      <param name="publish_frequency" type="double" value="20.0" />
  </node> 
  
</launch>

When launch amcl and my urdf model don't have joints, all it work perfect.
What is wrong? How i can fix it?

Originally posted by seredin on ROS Answers with karma: 45 on 2014-02-22
Post score: 0

Original comments
Comment by pkohout on 2014-02-25:
where do you start amcl, and is your laser scanner working correct ?

A:

I don't know if my answer matches your question. When I launched amcl with turtlebot2 model, I remembered that I had similar problem. I mean that URDF model is complete, but amcl can't parse URDF model.
So, I described the following to solve my problem.

arg name="urdf_file" default="$(find turtlebot_description)/robots/$(arg base)_$(arg stacks)_$(arg 3d_sensor).urdf.xacro"/
param name="robot_description" command="$(find xacro)/xacro.py '$(arg urdf_file)' use_full_gazebo_model:=$(arg use_full_gazebo_model)" /

As you know, arg and param needs blacket <>. I'm not familiar with how to write on web site.
I hope you can solve the problem.

Originally posted by Ken_in_JAPAN with karma: 894 on 2014-03-13
This answer was ACCEPTED on the original site
Post score: 0

