Q:

gazebo-1 has died; rosmake hector_quadrotor error

Hi everyone! I'm fresh from ROScon and am trying to impiment hector_quadrotor on 12.04 with fuerte. I am running into a problem with the first demo. What I've done:
1.I took down every part of the stack to make sure that I didn't miss anything.
 svn co http://tu-darmstadt-ros-pkg.googlecode.com/svn/trunk

2.I then attempted to build the stack
parcon@PC-MBA:~/ros_workspace/trunk$ rosmake hector_quadrotor
[ rosmake ] rosmake starting...                                                                                             
[ rosmake ] Packages requested are: ['hector_quadrotor']                                                                    
[ rosmake ] Logging to directory /home/parcon/.ros/rosmake/rosmake_output-20120523-155917                                   
[ rosmake ] Expanded args ['hector_quadrotor'] to:
['hector_quadrotor_gazebo', 'hector_quadrotor_teleop', 'hector_quadrotor_gazebo_plugins', 'hector_quadrotor_demo', 'hector_quadrotor_urdf']
[rosmake-0] Starting >>> roslang [ make ]                                                                                   
[rosmake-1] Starting >>> common_rosdeps [ make ]                                                                            
[rosmake-2] Starting >>> std_msgs [ make ]                                                                                  
[rosmake-1] Finished <<< common_rosdeps ROS_NOBUILD in package common_rosdeps                                               
[rosmake-1] Starting >>> ogre [ make ]                                                                                      
[rosmake-3] Starting >>> geometry_msgs [ make ]                                                                             
[rosmake-0] Finished <<< roslang ROS_NOBUILD in package roslang
 No Makefile in package roslang                             
[rosmake-0] Starting >>> roscpp [ make ]                                                                                    
[rosmake-2] Finished <<< std_msgs ROS_NOBUILD in package std_msgs
 No Makefile in package std_msgs                          
[rosmake-2] Starting >>> roslib [ make ]                                                                                    
[rosmake-3] Finished <<< geometry_msgs ROS_NOBUILD in package geometry_msgs
 No Makefile in package geometry_msgs           
[rosmake-1] Finished <<< ogre ROS_NOBUILD in package ogre                                                                   
[rosmake-3] Starting >>> sensor_msgs [ make ]                                                                               
[rosmake-2] Finished <<< roslib ROS_NOBUILD in package roslib[ sensor_msgs: 0.0 sec ] [ bullet... [ 4 Active 5/67 Complete ]
 No Makefile in package roslib                                
[rosmake-1] Starting >>> bullet [ make ]                                                                                    
[rosmake-2] Starting >>> colladadom [ make ]                                                                                
[rosmake-0] Finished <<< roscpp ROS_NOBUILD in package roscpp
 No Makefile in package roscpp                                
[rosmake-0] Starting >>> urdf_interface [ make ]                                                                            
[rosmake-1] Finished <<< bullet ROS_NOBUILD in package bullet                                                               
[rosmake-1] Starting >>> std_srvs [ make ]                                                                                  
[rosmake-3] Finished <<< sensor_msgs ROS_NOBUILD in package sensor_msgs
 No Makefile in package sensor_msgs                 
[rosmake-2] Finished <<< colladadom ROS_NOBUILD in package colladadom                                                       
[rosmake-2] Starting >>> rosconsole [ make ]                                                                                
[rosmake-3] Starting >>> gazebo_msgs [ make ]                                                                               
[rosmake-0] Finished <<< urdf_interface ROS_NOBUILD in package urdf_interface                                               
[rosmake-0] Starting >>> urdf_parser [ make ]                                                                               
[rosmake-1] Finished <<< std_srvs ROS_NOBUILD in package std_srvs
 No Makefile in package std_srvs                          
[rosmake-1] Starting >>> collada_parser [ make ]                                                                            
[rosmake-3] Finished <<< gazebo_msgs ROS_NOBUILD in package gazebo_msgs                                                     
[rosmake-2] Finished <<< rosconsole ROS_NOBUILD in package rosconsole
 No Makefile in package rosconsole                    
[rosmake-2] Starting >>> angles [ make ]                                                                                    
[rosmake-3] Starting >>> rospy [ make ]                                                                                     
[rosmake-0] Finished <<< urdf_parser ROS_NOBUILD in package urdf_parser                                                     
[rosmake-1] Finished <<< collada_parser ROS_NOBUILD in package collada_parser                                               
[rosmake-1] Starting >>> rostest [ make ]                                                                                   
[rosmake-2] Finished <<< angles ROS_NOBUILD in package angles                                                               
[rosmake-3] Finished <<< rospy ROS_NOBUILD in package rospy
 No Makefile in package rospy                                   
[rosmake-0] Starting >>> urdf [ make ]                                                                                      
[rosmake-2] Starting >>> roswtf [ make ]                                                                                    
[rosmake-1] Finished <<< rostest ROS_NOBUILD in package rostest
 No Makefile in package rostest                             
[rosmake-3] Starting >>> message_filters [ make ]                                                                           
[rosmake-1] Starting >>> rosgraph_msgs [ make ]                                                                             
[rosmake-3] Finished <<< message_filters ROS_NOBUILD in package message_filters
 No Makefile in package message_filters     
[rosmake-3] Starting >>> rosservice [ make ]                                                                                
[rosmake-2] Finished <<< roswtf ROS_NOBUILD in package roswtf
 No Makefile in package roswtf                                
[rosmake-1] Finished <<< rosgraph_msgs ROS_NOBUILD in package rosgraph_msgs
 No Makefile in package rosgraph_msgs           
[rosmake-2] Starting >>> tf [ make ]                                                                                        
[rosmake-1] Starting >>> rosbuild [ make ]                                                                                  
[rosmake-0] Finished <<< urdf ROS_NOBUILD in package urdf                                                                   
[rosmake-1] Finished <<< rosbuild ROS_NOBUILD in package rosbuild
 No Makefile in package rosbuild                          
[rosmake-1] Starting >>> protobuf [ make ]                                                                                  
[rosmake-0] Starting >>> nav_msgs [ make ]                                                                                  
[rosmake-3] Finished <<< rosservice ROS_NOBUILD in package rosservice
 No Makefile in package rosservice                    
[rosmake-3] Starting >>> dynamic_reconfigure [ make ]                                                                       
[rosmake-2] Finished <<< tf ROS_NOBUILD in package tf                                                                       
[rosmake-0] Finished <<< nav_msgs ROS_NOBUILD in package nav_msgs
 No Makefile in package nav_msgs                          
[rosmake-2] Starting >>> mk [ make ]                                                                                        
[rosmake-3] Finished <<< dynamic_reconfigure ROS_NOBUILD in package dynamic_reconfigure                                     
[rosmake-1] Finished <<< protobuf ROS_NOBUILD in package protobuf                                                           
[rosmake-1] Starting >>> pluginlib [ make ]                                                                                 
[rosmake-3] Starting >>> gazebo [ make ]                                                                                    
[rosmake-0] Starting >>> bond [ make ]                                                                                      
[rosmake-2] Finished <<< mk ROS_NOBUILD in package mk
 No Makefile in package mk                                            
[rosmake-2] Starting >>> smclib [ make ]                                                                                    
[rosmake-1] Finished <<< pluginlib ROS_NOBUILD in package pluginlib                                                         
[rosmake-1] Starting >>> diagnostic_msgs [ make ]                                                                           
[rosmake-0] Finished <<< bond ROS_NOBUILD in package bond                                                                   
[rosmake-0] Starting >>> rosbag [ make ]                                                                                    
[rosmake-1] Finished <<< diagnostic_msgs ROS_NOBUILD in package diagnostic_msgs
 No Makefile in package diagnostic_msgs     
[rosmake-1] Starting >>> diagnostic_updater [ make ]                                                                        
[rosmake-2] Finished <<< smclib ROS_NOBUILD in package smclib                                                               
[rosmake-2] Starting >>> bondcpp [ make ]                                                                                   
[rosmake-1] Finished <<< diagnostic_updater ROS_NOBUILD in package diagnostic_updater                                       
[rosmake-0] Finished <<< rosbag ROS_NOBUILD in package rosbag
 No Makefile in package rosbag                                
[rosmake-0] Starting >>> pcl [ make ]                                                                                       
[rosmake-1] Starting >>> self_test [ make ]                                                                                 
[rosmake-2] Finished <<< bondcpp ROS_NOBUILD in package bondcpp                                                             
[rosmake-2] Starting >>> nodelet [ make ]                                                                                   
[rosmake-0] Finished <<< pcl ROS_NOBUILD in package pcl
 No Makefile in package pcl                                         
[rosmake-1] Finished <<< self_test ROS_NOBUILD in package self_test                                                         
[rosmake-0] Starting >>> image_transport [ make ]                                                                           
[rosmake-1] Starting >>> driver_base [ make ]                                                                               
[rosmake-2] Finished <<< nodelet ROS_NOBUILD in package nodelet                                                             
[rosmake-2] Starting >>> nodelet_topic_tools [ make ]                                                                       
[rosmake-1] Finished <<< driver_base ROS_NOBUILD in package driver_base                                                     
[rosmake-0] Finished <<< image_transport ROS_NOBUILD in package image_transport                                             
[rosmake-1] Starting >>> hector_sensors_description [ make ]                                                                
[rosmake-0] Starting >>> odometry_to_tf [ make ]                                                                            
[rosmake-2] Finished <<< nodelet_topic_tools ROS_NOBUILD in package nodelet_topic_tools                                     
[rosmake-2] Starting >>> pcl_ros [ make ]                                                                                   
[rosmake-2] Finished <<< pcl_ros ROS_NOBUILD in package pcl_ros                                                             
[rosmake-2] Starting >>> visualization_msgs [ make ]                                                                        
[rosmake-2] Finished <<< visualization_msgs ROS_NOBUILD in package visualization_msgs
 No Makefile in package visualization_msgs
[rosmake-2] Starting >>> laser_geometry [ make ]                                                                            
[rosmake-2] Finished <<< laser_geometry ROS_NOBUILD in package laser_geometry                                               
[rosmake-2] Starting >>> orocos_kdl [ make ]                                                                                
[rosmake-2] Finished <<< orocos_kdl ROS_NOBUILD in package orocos_kdl                                                       
[rosmake-2] Starting >>> python_orocos_kdl [ make ]                                                                         
[rosmake-2] Finished <<< python_orocos_kdl ROS_NOBUILD in package python_orocos_kdl                                         
[rosmake-2] Starting >>> kdl [ make ]                                                                                       
[rosmake-2] Finished <<< kdl ROS_NOBUILD in package kdl
 No Makefile in package kdl                                         
[rosmake-2] Starting >>> tf_conversions [ make ]                                                                            
[rosmake-2] Finished <<< tf_conversions ROS_NOBUILD in package tf_conversions                                               
[rosmake-2] Starting >>> hector_mapping [ make ]                                                                            
[rosmake-3] Finished <<< gazebo ROS_NOBUILD in package gazebo                                                               
[rosmake-3] Starting >>> hector_gazebo_plugins [ make ]                                                                     
[ rosmake ] All 21 lines
{-------------------------------------------------------------------------------
  mkdir -p bin
  cd build && cmake -Wdev -DCMAKE_TOOLCHAIN_FILE=`rospack find rosbuild`/rostoolchain.cmake  ..
  [rosbuild] Building package hector_mapping
  Failed to invoke /opt/ros/fuerte/bin/rospack deps-manifests hector_mapping
  [rospack] Error: package/stack hector_mapping depends on non-existent package eigen
  
  
  CMake Error at /opt/ros/fuerte/share/ros/core/rosbuild/public.cmake:129 (message):
    
  
    Failed to invoke rospack to get compile flags for package 'hector_mapping'.
    Look above for errors from rospack itself.  Aborting.  Please fix the
    broken dependency!
  
  Call Stack (most recent call first):
    /opt/ros/fuerte/share/ros/core/rosbuild/public.cmake:203 (rosbuild_invoke_rospack)
    CMakeLists.txt:14 (rosbuild_init)
  
  
  -- Configuring incomplete, errors occurred!
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package hector_mapping written to:
[ rosmake ]    /home/parcon/.ros/rosmake/rosmake_output-20120523-155917/hector_mapping/build_output.log
[rosmake-2] Finished <<< hector_mapping [FAIL] [ 0.21 seconds ]                                                             
[ rosmake ] Halting due to failure in package hector_mapping. 
[ rosmake ] Waiting for other threads to complete.           
[rosmake-1] Finished <<< hector_sensors_description [PASS] [ 0.54 seconds ]                                                 
[ rosmake ] Last 40 linesometry_to_tf: 1.1 sec ] [ hector_gazebo_plugins: 0.9 sec ]              [ 2 Active 52/67 Complete ]
{-------------------------------------------------------------------------------
  
  -- Build files have been written to: /home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build
  cd build && make -l4
  make[1]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[2]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [  0%] Built target rosbuild_premsgsrvgen
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [ 10%] Built target ROSBUILD_gensrv_cpp
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [ 20%] Built target ROSBUILD_gensrv_lisp
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [ 40%] Built target ROSBUILD_gensrv_py
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [ 40%] Built target rospack_gensrv
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [ 40%] Built target rospack_genmsg_libexe
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [ 40%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  [ 50%] Building CXX object CMakeFiles/diffdrive_plugin_6w.dir/src/diffdrive_plugin_6w.o
  In file included from /home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp:36:0:
  /home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/include/hector_gazebo_plugins/diffdrive_plugin_6w.h:30:27: fatal error: gazebo/Param.hh: No such file or directory
  compilation terminated.
  make[3]: *** [CMakeFiles/diffdrive_plugin_6w.dir/src/diffdrive_plugin_6w.o] Error 1
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[2]: *** [CMakeFiles/diffdrive_plugin_6w.dir/all] Error 2
  make[2]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_gazebo/hector_gazebo_plugins/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package hector_gazebo_plugins written to:
[ rosmake ]    /home/parcon/.ros/rosmake/rosmake_output-20120523-155917/hector_gazebo_plugins/build_output.log
[rosmake-3] Finished <<< hector_gazebo_plugins [FAIL] [ 0.94 seconds ]                                                      
[ rosmake ] Halting due to failure in package hector_gazebo_plugins. 
[ rosmake ] Waiting for other threads to complete.    
[ rosmake ] Last 40 linesometry_to_tf: 2.2 sec ]                                                 [ 1 Active 52/67 Complete ]
{-------------------------------------------------------------------------------
  -- Configuring done
  -- Generating done
  CMake Warning:
    Manually-specified variables were not used by the project:
  
      CMAKE_TOOLCHAIN_FILE
  
  
  -- Build files have been written to: /home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build
  cd build && make -l4
  make[1]: Entering directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[2]: Entering directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  [  0%] Built target rospack_genmsg_libexe
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  [  0%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[3]: Entering directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  [100%] Building CXX object CMakeFiles/odometry_to_tf.dir/src/odom_to_tf.o
  /home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/src/odom_to_tf.cpp: In function ‘void sendTransform(const Pose&, const Header&, std::string)’:
  /home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/src/odom_to_tf.cpp:36:26: error: no matching function for call to ‘btMatrix3x3::btMatrix3x3(tf::Quaternion&)’
  /home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/src/odom_to_tf.cpp:36:26: note: candidates are:
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:61:20: note: btMatrix3x3::btMatrix3x3(const btMatrix3x3&)
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:61:20: note:   no known conversion for argument 1 from ‘tf::Quaternion’ to ‘const btMatrix3x3&’
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:52:2: note: btMatrix3x3::btMatrix3x3(const btScalar&, const btScalar&, const btScalar&, const btScalar&, const btScalar&, const btScalar&, const btScalar&, const btScalar&, const btScalar&)
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:52:2: note:   candidate expects 9 arguments, 1 provided
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:43:11: note: btMatrix3x3::btMatrix3x3(const btQuaternion&)
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:43:11: note:   no known conversion for argument 1 from ‘tf::Quaternion’ to ‘const btQuaternion&’
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:38:2: note: btMatrix3x3::btMatrix3x3()
  /opt/ros/fuerte/stacks/bullet/include/LinearMath/btMatrix3x3.h:38:2: note:   candidate expects 0 arguments, 1 provided
  make[3]: *** [CMakeFiles/odometry_to_tf.dir/src/odom_to_tf.o] Error 1
  make[3]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[2]: *** [CMakeFiles/odometry_to_tf.dir/all] Error 2
  make[2]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/parcon/ros_workspace/trunk/hector_localization/odometry_to_tf/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package odometry_to_tf written to:
[ rosmake ]    /home/parcon/.ros/rosmake/rosmake_output-20120523-155917/odometry_to_tf/build_output.log
[rosmake-0] Finished <<< odometry_to_tf [FAIL] [ 2.26 seconds ]                                                             
[ rosmake ] Halting due to failure in package odometry_to_tf. 
[ rosmake ] Waiting for other threads to complete.           
[ rosmake ] Results:                                                                                                        
[ rosmake ] Built 55 packages with 3 failures.                                                                              
[ rosmake ] Summary output to directory                                                                                     
[ rosmake ] /home/parcon/.ros/rosmake/rosmake_output-20120523-155917

I believe my problems with running the demo (where gazebo crashes)
roslaunch hector_quadrotor_demo outdoor_flight_gazebo.launch

are a result of these rosmake errors. Anyone have any advice?
Thanks!
Parker

Originally posted by 0pc0 on ROS Answers with karma: 78 on 2012-05-23
Post score: 1

A:

Hi Parker, we did not make the switch to fuerte yet and are working on setting everything up so both distributions are properly supported. The main/most time consuming problem is the fact that all plugins for quadrotor simulation have to be changed to use the new Gazebo 1.0 plugin API. I'll update this posting with a approximate time estimate of fuerte compatibilty when I talked to all people involved later today.
The bottomline is: You have to use electric for the moment for quadrotor simulation, this should work fine.
/edit: Unfortunately, it will probably be a week till we get to work on porting the stack to fuerte.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2012-05-23
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by 0pc0 on 2012-05-24:
Thank you for the quick response! Unfortunately that means I'll have to get rid of 12.04 also....
Comment by Stefan Kohlbrecher on 2012-05-24:
You're right, that's of course quite a 'non-optimal' situation. We have two deadlines coming up next week, so it will take some more time till we get around to updating the stack.
Comment by SL Remy on 2012-05-30:
roscpp was messing in manifest.xml for quad_rotor teleop (just trying to pitch in... this package was why I upgraded to fuerte.. )

