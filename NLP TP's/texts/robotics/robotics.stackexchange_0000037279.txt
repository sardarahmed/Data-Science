Q:

Running PR2 in Gazebo; 2dnav gives TF errors

Hi,
I'm trying to test some software I wrote in simulation before running it on the real PR2. I created a little Gazebo world that is a somewhat accurate representation of my workspace, and I launch it and it works fine for the most part. I can launch pr2_2dnav_slam.launch and teleop the simulated PR2 around to generate a map of the area. Then I save the map, and I want to load it as a static map using a map_server and then launch the nav stack. However, at this point the nav stack starts throwing a bunch of TF errors that all basically look like

[ERROR] [1327451804.285384190,
15.638000000]: Transform unavailable Lookup would require extrapolation
into the past.  Requested time
15.288000000 but the earliest data is at time 15.508000000, when looking up
transform from frame [/base_footprint]
to frame [/base_link]

and becomes basically unusable. I have set ROBOT=sim and I'm using https://code.ros.org/svn/wg-ros-pkg/stacks/wg_robots_gazebo/trunk/pr2_2dnav_gazebo/2dnav-stack-amcl.launch to launch the nav stack which should ensure that it's using the simulated PR2.
Any ideas on what could be wrong? Thanks!

Originally posted by Ibrahim on ROS Answers with karma: 307 on 2012-01-24
Post score: 1

Original comments
Comment by Ibrahim on 2012-01-25:
Oh thanks! Starting everything together makes it work. I'm guessing I didn't set use_sim_time properly for the other nodes?
Comment by Ibrahim on 2012-01-25:
I didn't try that one, I'll try it out now. For me I get the errors only at the beginning but then I can't actually do anything with the nav stack at that point (eg. I tried publishing an initial pose to localize, didn't work, etc).
Comment by hsu on 2012-01-24:
I do see the same error a couple times on startup, but the error stops and things work correctly.  Do you see a continuous stream of the error message?

A:

did you try the launch file: https://code.ros.org/svn/wg-ros-pkg/stacks/wg_robots_gazebo/trunk/pr2_2dnav_gazebo/pr2-empty-amcl.launch for starting everything together?

Originally posted by hsu with karma: 5780 on 2012-01-24
This answer was ACCEPTED on the original site
Post score: 0

