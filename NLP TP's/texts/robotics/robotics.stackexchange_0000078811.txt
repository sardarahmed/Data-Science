Q:

Jenkins fails to build because of an dependency issue to a package within the same metapackage

Hello
I have an issue building tuw_msgs http://build.ros.org/job/Kdev__tuw_msgs__ubuntu_xenial_amd64/ Build #29
tuw_msgs is a metapackage and it includes various pkgs with msgs and also pkgs with cpp code.
Somehow the pkg nav_msgs is not able to find tuw_geometry_msgs but it was build within the metapackage and I checked countless times the catkin_package statements with the makefiles but everything seems right to me.
The Jenkins output tells me that the tuw_geometry_msgs finished and the tuw_nav_msgs fails on finding that lib :-(
-- Up-to-date: /tmp/catkin_workspace/install_isolated/include/tuw_geometry_msgs
-- Installing: /tmp/catkin_workspace/install_isolated/include/tuw_geometry_msgs/point.h
-- Installing: /tmp/catkin_workspace/install_isolated/include/tuw_geometry_msgs/pose.h
-- Installing: /tmp/catkin_workspace/install_isolated/include/tuw_geometry_msgs/pose_stamped.h
<== Finished processing package [2 of 5]: 'tuw_geometry_msgs'

...

-- Using these message generators: gencpp;geneus;genlisp;gennodejs;genpy
CMake Error at /tmp/catkin_workspace/install_isolated/share/tuw_geometry_msgs/cmake/tuw_geometry_msgsConfig.cmake:141 (message):
Command failed, exiting.
  Project 'tuw_nav_msgs' tried to find library 'tuw_geometry_msgs'.  The
  library is neither a target nor built/installed properly.  Did you compile
  project 'tuw_geometry_msgs'? Did you find_package() it before the
  subdirectory containing its code is included?
Call Stack (most recent call first):
  /opt/ros/kinetic/share/catkin/cmake/catkinConfig.cmake:76 (find_package)
  CMakeLists.txt:8 (find_package)

Originally posted by Markus Bader on ROS Answers with karma: 847 on 2017-02-07
Post score: 0

A:

When tuw_nav_msgs is being built it is trying to use tuw_geometry_msgs. The CMake config file of tuw_geometry_msgs is being included by the find_package call. That is the file referred to in the error message. It is trying to find the library tuw_geometry_msgs which the package declared to be exported (https://github.com/tuw-robotics/tuw_msgs/blob/125e9ccdf7c3314e1380bfd841061edf7d3e3554/tuw_geometry_msgs/CMakeLists.txt#L103). It can't find the library since it is never being installed. You need to enable these lines to install the library - then it can be used by other packages: https://github.com/tuw-robotics/tuw_msgs/blob/125e9ccdf7c3314e1380bfd841061edf7d3e3554/tuw_geometry_msgs/CMakeLists.txt#L159-L163

Originally posted by Dirk Thomas with karma: 16276 on 2017-02-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Markus Bader on 2017-02-07:
Thank you, that was the problem.

