Q:

PCL error in moving least squares

I am using the Moving Least square code provided in pcl, here is my code exaclty:
<iostream>
<pcl/point_types.h>
<pcl/point_cloud.h>
<pcl/io/pcd_io.h>
<pcl/visualization/pcl_visualizer.h>
<pcl/kdtree/kdtree_flann.h>
<pcl/surface/mls.h>

int main(int argc, char **argv) {
    pcl::PointCloud <pcl::PointXYZ> cloud;
    pcl::io::loadPCDFile("KinectPointCloudChest2_filtered.pcd", cloud); // Create a KD-Tree
    pcl::search::KdTree<pcl::PointXYZ>::Ptr tree(new pcl::search::KdTree <pcl::PointXYZ>); 
    // Output has the PointNormal type in order to store the normals calculated by MLS
    pcl::PointCloud <pcl::PointNormal> mls_points; 
    // Init object (second point type is for the normals, even if unused)
    pcl::MovingLeastSquares <pcl::PointXYZ, pcl::PointNormal> mls;
    mls.setComputeNormals(true); // Set parameters
    mls.setInputCloud(cloud.makeShared());
    mls.setPolynomialFit(true);
    mls.setPolynomialOrder(2);
    mls.setSearchMethod(tree);
    mls.setSearchRadius(0.03); // Reconstruct
    mls.process(mls_points);
    pcl::PointCloud<pcl::PointXYZ>::Ptr mls_cloud(new pcl::PointCloud <pcl::PointXYZ>);
    mls_cloud->resize(mls_points.size());
    for (size_t i = 0; i < mls_points.points.size(); ++i) {
        mls_cloud->points.x = mls_points.points.x; //error
        mls_cloud->points.y = mls_points.points.y;
        //error
        mls_cloud->points.z = mls_points.points.z;
        //error
    }
    pcl::io::savePCDFile("KinectPointCloudChest2_mls.pcd", mls_points);
    return 0;
}

but I get an error throw pcl::IOException ("[pcl::PCDWriter::writeASCII] Input point cloud has no data!"); what to do in this case?

Originally posted by sarah.ali.1@ulaval.ca on ROS Answers with karma: 1 on 2014-11-03
Post score: 0

A:

Generally, you'll have more luck with PCL-specific guidance on the PCL boards/mailing list.
If you mean you're following this tutorial, everything looks good until you try to run the for loop, where you're not actually indexing into the points array, or even using the mls_cloud object for anything afterwards.

Originally posted by paulbovbel with karma: 4518 on 2014-11-03
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by meng on 2016-03-24:
precisely.Do you already have a solution?

