Q:

V-Rep with Groovy

Hello,
I've been having difficulty in using V-Rep with ROS Groovy properly. While the publishers and subscribers work generally with no problems, image related publishers cause the V-Rep simulator crash, e.g. when the scene "rosTopicPublisherAndSubscriber" is run.
I tried to rebuild the ros plugin (libv_repExtRos.so) in the stack that comes with the simulator. What may be the cause?
The log is as follows:

$ ./vrep.sh 
Add-on script 'vrepAddOnScript-addOnScriptDemo.lua' was loaded.
Simulator launched.
Plugin 'BubbleRob': loading...
Plugin 'BubbleRob': load succeeded.
Plugin 'Collada': loading...
Plugin 'Collada': load succeeded.
Plugin 'K3': loading...
Plugin 'K3': load succeeded.
Plugin 'Mtb': loading...
Plugin 'Mtb': load succeeded.
Plugin 'ReflexxesTypeIV': loading...
Plugin 'ReflexxesTypeIV': load succeeded.
Plugin 'RemoteApi': loading...
Plugin 'RemoteApi': load succeeded.
Plugin 'Ros': loading...
Plugin 'Ros': load succeeded.
Plugin 'SimpleFilter': loading...
Plugin 'SimpleFilter': load succeeded.
Plugin 'Urdf': loading...
Plugin 'Urdf': load succeeded.
failed to load symbols, rosdep will not function properly
Cannot import rospkg, rosdep will not function properly
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in 
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in 
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in 
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in 
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in 
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in 
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha512
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/rosdep2/rospack.py", line 39, in 
    from .main import _get_default_RosdepLookup
  File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 50, in 
    from .lookup import RosdepLookup, ResolutionError
  File "/usr/lib/pymodules/python2.7/rosdep2/lookup.py", line 33, in 
    import yaml
  File "/usr/lib/python2.7/dist-packages/yaml/__init__.py", line 8, in 
    from loader import *
  File "/usr/lib/python2.7/dist-packages/yaml/loader.py", line 8, in 
    from constructor import *
  File "/usr/lib/python2.7/dist-packages/yaml/constructor.py", line 8, in 
    import datetime
ImportError: /usr/lib/python2.7/lib-dynload/datetime.so: undefined symbol: PyExc_SystemError
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 64, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 4, in 
    from apport.report import Report
  File "/usr/lib/python2.7/dist-packages/apport/report.py", line 16, in 
    from xml.parsers.expat import ExpatError
  File "/usr/lib/python2.7/xml/parsers/expat.py", line 4, in 
    from pyexpat import *
ImportError: /usr/lib/python2.7/lib-dynload/pyexpat.so: undefined symbol: _Py_ZeroStruct

Original exception was:
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/rosdep2/rospack.py", line 39, in 
    from .main import _get_default_RosdepLookup
  File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 50, in 
    from .lookup import RosdepLookup, ResolutionError
  File "/usr/lib/pymodules/python2.7/rosdep2/lookup.py", line 33, in 
    import yaml
  File "/usr/lib/python2.7/dist-packages/yaml/__init__.py", line 8, in 
    from loader import *
  File "/usr/lib/python2.7/dist-packages/yaml/loader.py", line 8, in 
    from constructor import *
  File "/usr/lib/python2.7/dist-packages/yaml/constructor.py", line 8, in 
    import datetime
ImportError: /usr/lib/python2.7/lib-dynload/datetime.so: undefined symbol: PyExc_SystemError
[rospack] Error: could not find python module 'rosdep2.rospack'. is rosdep up-to-date (at least 0.10.4)?
[librospack]: error while executing command
terminate called after throwing an instance of 'pluginlib::LibraryLoadException'
  what():  rospack could not find the image_transport package containing image_transport::PublisherPlugin
Aborted (core dumped)

Originally posted by philotuxo on ROS Answers with karma: 46 on 2013-02-14
Post score: 1

Original comments
Comment by philotuxo on 2013-02-17:
I couldn't diagnose the bug, so I had to downgrade to precise & fuerte, since I have work to do on the simulator.

A:

I had the same problem. It doesn't like image_transport. If you are not interested in compressing the video stream, switch back to sensor_msgs/Image. It works fine for me.
edit: Works fine with Groovy, Ubuntu 12.10 & V-REP 3.02

Originally posted by 23pointsNorth with karma: 36 on 2013-03-18
This answer was ACCEPTED on the original site
Post score: 2

