Q:

wviz missing visualization control panel button

Hello,
I was trying out wviz from the bosch_web_visualization stack.  Everything installed and launches fine but when I point my browser to the wviz URL (http://localhost:8000/wviz/) I do not see the Visualization Control Panel button in the lower left corner of the screen.  I do see the borders around the canvas and the lower panel.  But I cannot launch any controls.
My environment is the latest Electric debs on Ubuntu 11.10.  I am using Rev 1584 of the bosch_web_visualization stack and the latest clone of http://kforge.ros.org/rosbridge/git for rosbridge.
Thanks!
patrick
http://www.pirobot.org
UPDATE:  Here is the output when running "roslaunch wviz wviz.launch".  As far as I can tell, all the nodes are coming up OK.  The connection message at the end occurs when I point my browser to http://localhost:8000/wviz/):
started roslaunch server http://pi-robot-z935:35503/

SUMMARY
========

PARAMETERS
 * /rosversion
 * /mjpeg_server/port
 * /rosdistro

NODES
  /
    webserver (roswww/webserver.py)
    mjpeg_server (mjpeg_server/mjpeg_server)
    wviz_tf_manager (wviz_tf_manager/wviz_tf_manager)
    tf_lister (tf_lister/tf_lister.py)
    rosbridge (rosbridge_server/rosbridge.py)
    rosapi (rosapi/rosapi.py)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
process[webserver-1]: started with pid [13783]
process[mjpeg_server-2]: started with pid [13784]
process[wviz_tf_manager-3]: started with pid [13785]
process[tf_lister-4]: started with pid [13786]
process[rosbridge-5]: started with pid [13787]
process[rosapi-6]: started with pid [13808]
[ INFO] [1347116583.847606183]: Starting mjpeg server
[ INFO] [1347116583.848325125]: Bind(8080) succeeded
[ INFO] [1347116583.848386455]: waiting for clients to connect
[INFO] [WallTime: 1347116583.879331] Webserver initialized for 625 packages
[INFO] [WallTime: 1347116583.963235] Rosapi started
[INFO] [WallTime: 1347116583.975061] Attempting to start webserver on port 80
No handlers could be found for logger "rosout"
[WARN] [WallTime: 1347116583.978099] Insufficient priveliges to run webserver on port 80. Error: Permission denied
[INFO] [WallTime: 1347116583.978127] -- Try re-running as super-user: sudo su; source ~/.bashrc)
[INFO] [WallTime: 1347116583.978178] Attempting to start webserver on port 8000
[INFO] [WallTime: 1347116583.978387] Webserver successfully started on port 8000
[INFO] [WallTime: 1347116584.042363] Rosbridge server started on port 9090
[INFO] [WallTime: 1347116587.367350] Client connected.  1 clients total.
WARNING:root:404 GET /favicon.ico (127.0.0.1) 1.29ms
[INFO] [WallTime: 1347116587.479385] [Client 0] Subscribed to /tf_changes

UPDATE 2: Console output from Chrome:
Connected to rosbridge_server.
spidergl.js:7502Uncaught Error: SpiderGL : Cannot get WebGL context
_SglCanvasManagerspidergl.js:7502
_sglManageCanvasspidergl.js:7885
sglRegisterLoadedCanvasspidergl.js:7910
ros.visualization.VisualizationManager.Class.extend.initvisualizationmanager.js:47
Classclass.js:49
setupVisualization:8000/wviz/:87
(anonymous function)connectionwidget.js:77
EventEmitter.emiteventemitter2.js:297
socket.onopenros.js:332

Originally posted by Pi Robot on ROS Answers with karma: 4046 on 2012-09-07
Post score: 0

A:

Hi Patrick,
the control panel button is loaded after the web socket connection is established with the rosbridge_server. If the connection to rosbridge_server is not made though, you should see a pop-up dialog asking you the address and the port number that the rosbridge_server is listening (in there you should type something like 192.168.0.1:9090).
Do you see that pop-up dialog at all?
Also, a console output would be helpful. Before loading the page if you could do, Ctrl+Shift+J and paste the error output here that would be great.
As a side note, bosch_web_visualization stack is tested only for Fuerte but it should work for Electric as well.
Ben

Originally posted by bener suay with karma: 178 on 2012-09-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Pi Robot on 2012-09-08:
Thanks Ben.  I have updated my original question with the output from roslaunch wviz wviz.launch.  At least on the surface, it seems that all the nodes are coming up OK.
Comment by bener suay on 2012-09-08:
Hi Patrick, Chrome's console output would be also very useful to debug. Could you do Ctrl+Shift+J in Chrome and refresh the page and paste the error console's output here please?
Comment by Pi Robot on 2012-09-08:
@bener suay Ah, sorry about missing that request in your answer: I have appended the console output to the question above.
Comment by bener suay on 2012-09-08:
Does the computer you're trying to open the web page on have a graphics card? This line here: "spidergl.js:7502Uncaught Error: SpiderGL : Cannot get WebGL context " complains about not having WebGL support :/ You can test if your browser/hardware supports webgl with sample applications online.
Comment by Pi Robot on 2012-09-08:
Thanks Ben--I should have figured that out myself.  Looks like none of my 3 machines has a graphics card that supports WebGL. :-(  Oh well...
Comment by bener suay on 2012-09-08:
No problem. It's in my to do list to update the "help and errors" widget so that future users don't have to struggle this much only to find out that their machine does not support WebGL. Sorry for the inconvenience.

