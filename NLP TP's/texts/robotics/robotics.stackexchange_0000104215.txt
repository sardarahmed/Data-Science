Q:

GPS+Navigation2 : Issues navigating with an empty map after success with a pre-built map: "Received plan with zero length"

I've been working on a project using the Navigation2 stack to navigate a robot through GPS waypoints. When using a pre-built map, the robot successfully navigates to all waypoints. However, I encounter issues when I switch to an empty map.
Tutorials Followed:
I have followed the tutorials by Ricardo Tellez (with Clearpath robotics, but they closed their open source project repo now to the outdoor nav product which uses ros2) on GPS integration within the Nav stack and tried to adjust it for the Nav2 stack (I have disabled SLAM and AMCL as the tutorial does not use them) :
ROS Extra Class #1: Outdoors Robot Navigation for Agricultural Robots Using ROS
How to use GPS to do autonomous robot navigation? // ROS Extra Class #2
Or is it possible use NAV2+GPS without any map ? (even empty) as suggested in this answer: Navigation Without Pre-Built Map for Collision-Free Movement
Despite following these tutorials, I'm still stuck on this issue.
Working Scenario:
With a pre-built map, the robot navigates successfully to all waypoints. Here's a video showcasing the successful navigation: GPS Waypoint Follower Planner NAV2 Stack (Previous Mapped Area)
.
Issue Scenario:
When using an empty map, the robot starts showing warnings and errors related to path planning and does not move, remaining stuck. Here's the output I get:

[controller_server-7] [WARN] ... Received plan with zero length
[controller_server-7] [ERROR] ... Controller patience exceeded
[controller_server-7] [WARN] ... [ActionServer] Aborting handle.
[recoveries_server-9] [INFO] ... Attempting spin

Here's a video showcasing the issues with the empty map: GPS follower Empty map (Issue with Plan length = 0)
Request:
I'm looking for insights into why the Navigation2 stack behaves differently with an empty map compared to a pre-built one. Any suggestions or best practices for navigating in an unknown environment using Navigation2 or/and SLAM would be greatly appreciated.
I've already read this feature request discussion: https://github.com/ros-planning/navigation2/issues/2517 , but I confess I did not deeply understand how to adjust, trick or find a solution for my case:
Thank you for your time and assistance!

A:

After extensive troubleshooting, I've identified and resolved the problem. The solution involves two critical steps:
1 Map Creation in GIMP:
While creating a map in GIMP, saving it in the appropriate format, such as .pgm is essential. However, another crucial detail: the map must be saved in ASCII format.

If not saved in this format, the map doesn't populate correctly with the 255 value (White). Instead, it gets filled with question mark points (???????????), as illustrated in the attached figure (the right side is the right one in ASCII format).

2-Map Resolution Adjustment:
The initial resolution of the map was set at 1.0. Surprisingly, the planner couldn't compute a path at this resolution. By reducing the resolution to 0.5, the planner was able to calculate a path, effectively resolving the "plan with zero length" issue.

With these adjustments, the primary navigation issue was addressed. However, I've now encountered a new challenge related to the local planner. I've provided a detailed description of this new problem in this subsequent post:
Challenges with Local Planner in ROS2 Navigation2: Ineffectual Obstacle Avoidance and Potential Self-Detection
Any assistance or insights regarding this would be greatly appreciated as I aim to conclude this project simulation successfully.

