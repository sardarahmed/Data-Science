Q:

Where is max_obstacle_height in an Obstacle_Layer measured from?

I want to know where does the local costmap take the origin to measure the height of the obstacles. Is it from the coordinate frame of the sensor, from the coordinate frame of the robot, or from the coordinate frame of the map?
In case it is measured from the coordinate frame of the map is there a way to change the coordinate frame to the one of the robot?
Thank you!

Originally posted by marpeja on ROS Answers with karma: 63 on 2022-07-29
Post score: 1

Original comments
Comment by Mike Scheutzow on 2022-07-29:
In ros1, my recollection is that each sensor point is converted to the move_base global frame (typically map) and then compared. But I don't know if ros2 has the same behavior.

A:

As @Mike Scheutzow mentioned in the comments, it seems it is the same situation in Nav2 as in ROS1:

https://github.com/ros-planning/navigation2/pull/2922 (ROS2, mentioning one below from ROS1)

https://github.com/ros-planning/navigation/blob/noetic-devel/costmap_2d/cfg/ObstaclePlugin.cfg

gen.add("max_obstacle_height", double_t, 0, "The maximum height of
any obstacle to be inserted into the costmap in meters.", 2, 0, 50)

https://github.com/ros-planning/navigation2/pull/2592#pullrequestreview-779145070 (older one)

and

http://wiki.ros.org/costmap_2d/hydro/obstacles

~<name>/<source_name>/max_obstacle_height (double, default: 2.0)

The maximum height in meters of a sensor reading considered valid. This
is usually set to be slightly higher
than the height of the robot. Setting
this parameter to a value greater than
the global max_obstacle_height
parameter has no effect. Setting this
parameter to a value less than the
global max_obstacle_height will filter
out points from this sensor above that
height.
~<name>/<source_name>/min_obstacle_height (double, default: 0.0)

The minimum height in meters of a sensor reading considered valid. This
is usually set to be at ground height,
but can be set higher or lower based
on the noise model of your sensor.

Originally posted by ljaniec with karma: 3064 on 2022-07-29
This answer was ACCEPTED on the original site
Post score: 1

