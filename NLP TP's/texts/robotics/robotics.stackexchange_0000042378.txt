Q:

Error in compiling uvc_cam

Hi !
I am using ROS Fuerte on my system running Ubuntu 12.04 . i am trying to build uvc_cam but i am getting errros, here are the steps i performed:
rosws set uvc_cam https://github.com/ericperko/uvc_cam.git --git
rosws update uvc_cam

rosmake uvc_cam

And after running make command i got some errors, here's the output of the terminal.
usama@ubuntu:~/fuerte_workspace$ rosmake uvc_cam
[ rosmake ] rosmake starting...                                                 
[ rosmake ] Packages requested are: ['uvc_cam']                                 
[ rosmake ] Logging to directory /home/usama/.ros/rosmake/rosmake_output-20120717-201232
[ rosmake ] Expanded args ['uvc_cam'] to:
['uvc_cam']                           
[rosmake-0] Starting >>> roslang [ make ]                                       
[rosmake-1] Starting >>> geometry_msgs [ make ]                                 
[rosmake-2] Starting >>> rosbuild [ make ]                                      
[rosmake-3] Starting >>> roslib [ make ]                                        
[rosmake-0] Finished <<< roslang  No Makefile in package roslang                
[rosmake-1] Finished <<< geometry_msgs  No Makefile in package geometry_msgs    
[rosmake-0] Starting >>> roscpp [ make ]                                        
[rosmake-1] Starting >>> sensor_msgs [ make ]                                   
[rosmake-2] Finished <<< rosbuild  No Makefile in package rosbuild              
[rosmake-3] Finished <<< roslib  No Makefile in package roslib                  
[rosmake-2] Starting >>> rosconsole [ make ]                                    
[rosmake-3] Starting >>> message_filters [ make ]                               
[rosmake-0] Finished <<< roscpp  No Makefile in package roscpp                  
[rosmake-0] Starting >>> opencv2 [ make ]                                       
[rosmake-1] Finished <<< sensor_msgs  No Makefile in package sensor_msgs        
[rosmake-2] Finished <<< rosconsole  No Makefile in package rosconsole          
[rosmake-3] Finished <<< message_filters  No Makefile in package message_filters
[rosmake-1] Starting >>> bullet [ make ]                                        
[rosmake-2] Starting >>> pluginlib [ make ]                                     
[rosmake-3] Starting >>> angles [ make ]                                        
[rosmake-0] Finished <<< opencv2 ROS_NOBUILD in package opencv2                 
[rosmake-0] Starting >>> cv_bridge [ make ]                                     
[rosmake-3] Finished <<< angles ROS_NOBUILD in package angles                   
[rosmake-2] Finished <<< pluginlib ROS_NOBUILD in package pluginlib             
[rosmake-3] Starting >>> rospy [ make ]                                         
[rosmake-2] Starting >>> image_transport [ make ]                               
[rosmake-1] Finished <<< bullet ROS_NOBUILD in package bullet                   
[rosmake-1] Starting >>> rostest [ make ]                                       
[rosmake-2] Finished <<< image_transport ROS_NOBUILD in package image_transport 
[rosmake-3] Finished <<< rospy  No Makefile in package rospy                    
[rosmake-0] Finished <<< cv_bridge ROS_NOBUILD in package cv_bridge             
[rosmake-0] Starting >>> roswtf [ make ]                                        
[rosmake-3] Starting >>> common_rosdeps [ make ]                                
[rosmake-1] Finished <<< rostest  No Makefile in package rostest                
[rosmake-2] Starting >>> rosservice [ make ]                                    
[rosmake-1] Starting >>> diagnostic_msgs [ make ]                               
[rosmake-0] Finished <<< roswtf  No Makefile in package roswtf                  
[rosmake-0] Starting >>> tf [ make ]                                            
[rosmake-2] Finished <<< rosservice  No Makefile in package rosservice          
[rosmake-3] Finished <<< common_rosdeps ROS_NOBUILD in package common_rosdeps   
[rosmake-1] Finished <<< diagnostic_msgs  No Makefile in package diagnostic_msgs
[rosmake-1] Starting >>> camera_calibration_parsers [ make ]                    
[rosmake-3] Starting >>> dynamic_reconfigure [ make ]                           
[rosmake-2] Starting >>> std_msgs [ make ]                                      
[rosmake-0] Finished <<< tf ROS_NOBUILD in package tf                           
[rosmake-3] Finished <<< dynamic_reconfigure ROS_NOBUILD in package dynamic_reconfigure
[rosmake-2] Finished <<< std_msgs  No Makefile in package std_msgs              
[rosmake-1] Finished <<< camera_calibration_parsers ROS_NOBUILD in package camera_calibration_parsers
[rosmake-1] Starting >>> camera_info_manager [ make ]                           
[rosmake-3] Starting >>> diagnostic_updater [ make ]                            
[rosmake-1] Finished <<< camera_info_manager ROS_NOBUILD in package camera_info_manager
[rosmake-3] Finished <<< diagnostic_updater ROS_NOBUILD in package diagnostic_updater
[rosmake-3] Starting >>> self_test [ make ]                                     
[rosmake-3] Finished <<< self_test ROS_NOBUILD in package self_test             
[rosmake-3] Starting >>> driver_base [ make ]                                   
[rosmake-3] Finished <<< driver_base ROS_NOBUILD in package driver_base         
[rosmake-3] Starting >>> uvc_cam [ make ]                                       
[ rosmake ] Last 40 linesc_cam: 21.7 sec ]           [ 1 Active 28/29 Complete ]
{-------------------------------------------------------------------------------
  make[3]: Leaving directory `/home/usama/fuerte_workspace/uvc_cam/build'
  make[3]: Entering directory `/home/usama/fuerte_workspace/uvc_cam/build'
  [ 66%] Building CXX object CMakeFiles/uvc_cam.dir/src/uvc_cam/uvc_cam.o
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam/uvc_cam.cpp: In member     function ‘int uvc_cam::Cam::grab(unsigned char**, uint32_t&)’:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam/uvc_cam.cpp:459:20: warning: unused variable ‘pyuv_last’ [-Wunused-variable]
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam/uvc_cam.cpp: In member function ‘void uvc_cam::Cam::display_formats_supported()’:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam/uvc_cam.cpp:529:39: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam/uvc_cam.cpp:536:60: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam/uvc_cam.cpp:543:76: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
  Linking CXX shared library ../lib/libuvc_cam.so
  make[3]: Leaving directory `/home/usama/fuerte_workspace/uvc_cam/build'
  [ 66%] Built target uvc_cam
  make[3]: Entering directory `/home/usama/fuerte_workspace/uvc_cam/build'
  Scanning dependencies of target uvc_cam_node
  make[3]: Leaving directory `/home/usama/fuerte_workspace/uvc_cam/build'
  make[3]: Entering directory `/home/usama/fuerte_workspace/uvc_cam/build'
  [100%] Building CXX object CMakeFiles/uvc_cam_node.dir/src/uvc_cam_node.o
  In file included from /home/usama/fuerte_workspace/uvc_cam    /src/uvc_cam_node.cpp:50:0:
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h: In static member function ‘static sensor_msgs::Image_<std::allocator<void> >::Ptr     sensor_msgs::CvBridge::cvToImgMsg(const IplImage*, std::string)’:
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge    /CvBridge.h:408:55: warning: ‘static bool     sensor_msgs::CvBridge::fromIpltoRosImage(const IplImage*, sensor_msgs::Image&, std::string)’ is deprecated (declared at /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:307) [-Wdeprecated-declarations]
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp: At global scope:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp:83:2: error: ‘CameraInfoManager’ does not name a type
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp: In constructor ‘UVCCamNode::UVCCamNode()’:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp:96:3: error: class ‘UVCCamNode’ does not have any field named ‘cinfo_’
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp:97:17: warning: ‘sensor_msgs::CvBridge::CvBridge()’ is deprecated (declared at /opt/ros/fuerte/stacks    /vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:64) [-Wdeprecated-declarations]
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp: In member function ‘bool UVCCamNode::openCamera(UVCCamNode::Config&)’:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp:157:10: error: ‘cinfo_’ was not declared in this scope
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp: In member function ‘bool UVCCamNode::read()’:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp:207:51: warning: ‘static sensor_msgs::Image_<std::allocator<void> >::Ptr sensor_msgs::CvBridge::cvToImgMsg(const IplImage*, std::string)’ is deprecated     (declared at /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:405) [-Wdeprecated-declarations]
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp: In member function ‘void UVCCamNode::publish()’:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp:232:15: error: ‘cinfo_’ was not declared in this scope
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp: In member function ‘void UVCCamNode::reconfig(UVCCamNode::Config&, uint32_t)’:
  /home/usama/fuerte_workspace/uvc_cam/src/uvc_cam_node.cpp:376:8: error: ‘cinfo_’ was not declared in this scope
  make[3]: *** [CMakeFiles/uvc_cam_node.dir/src/uvc_cam_node.o] Error 1
  make[3]: Leaving directory `/home/usama/fuerte_workspace/uvc_cam/build'
  make[2]: *** [CMakeFiles/uvc_cam_node.dir/all] Error 2
  make[2]: Leaving directory `/home/usama/fuerte_workspace/uvc_cam/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/usama/fuerte_workspace/uvc_cam/build'
  -------------------------------------------------------------------------------}
[ rosmake ] Output from build of package uvc_cam written to:
[ rosmake ]    /home/usama/.ros/rosmake/rosmake_output-20120717-201232/uvc_cam/build_output.log
[rosmake-3] Finished <<< uvc_cam [FAIL] [ 21.81 seconds ]                       
[ rosmake ] Halting due to failure in package uvc_cam. 
[ rosmake ] Waiting for other threads to complete.
[ rosmake ] Results:                                                            
[ rosmake ] Built 29 packages with 1 failures.                                  
[ rosmake ] Summary output to directory                                         
[ rosmake ] /home/usama/.ros/rosmake/rosmake_output-20120717-201232 

Any idea, how can i resolve this error ?
regards
usama

Originally posted by usamayaseen on ROS Answers with karma: 69 on 2012-07-17
Post score: 2

A:

Apparently, that driver has not yet been updated for the camera_info_manager change in Fuerte.
As the change list says:

The deprecated global CameraInfoManager class name has been removed. Use camera_info_manager::CameraInfoManager instead.

Looks like you need to make that change in line 79 of src/uvc_cam_node.cpp. Please open a defect report or initiate a github pull request to get that fix merged into the master sources.

Originally posted by joq with karma: 25443 on 2012-07-17
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Eric Perko on 2012-07-17:
Yup. I never updated it as I don't really use it anymore. A github pull request would be a good way to get this fixed, but it would be best if it supported older ROS distros as well.
Comment by joq on 2012-07-17:
The qualified name works in Electric. (Diamondback, too, if I recall correctly.)

