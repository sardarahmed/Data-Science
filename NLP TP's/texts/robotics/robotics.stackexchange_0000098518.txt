Q:

Synchronizing different nodes on different machines

What would be the best approach to synchronize two ROS2 nodes (i.e. a common shared clock/time) on two different machines, connected over a wireless network?
At present I've implemented a third node on one of the machines providing a clock, but apparently there is a slight delay/latency of 5-20ms on the other machine, which is variable, and thus hinders the accuracy of time readings.
Is this delay caused/affected by ROS or solely by the network configuration? Is there any tool built into ROS that can help with precise syncrhonization?

Originally posted by joaocandre on ROS Answers with karma: 35 on 2021-03-09
Post score: 0

A:

What would be the best approach to synchronize two ROS2 nodes (i.e. a common shared clock/time) on two different machines, connected over a wireless network?

A non ROS solution: using ntp or chrony (or perhaps even something using ptp).
Time-synchronisation across different machines is expressly not a responsibility of ROS, as there are well established protocols and tools to do that, and it's largely orthogonal to what ROS was created for.

Is there any tool built into ROS that can help with precise syncrhonization?

No. See my earlier comment.

At present I've implemented a third node on one of the machines providing a clock,

Are you publishing to the clock topic? Note that topic is not intended to be used for (wall) clock synchronisation across multiple machines.
See also: Clock and Time on the ROS 2 Design site.

but apparently there is a slight delay/latency of 5-20ms on the other machine, which is variable, and thus hinders the accuracy of time readings.

Tools like ntp and chrony have built-in systems to compensate for transmission delays and similar challenges which come with time-synchronisation across multiple machines and using COTS networking infrastructure.

Originally posted by gvdhoorn with karma: 86574 on 2021-03-09
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by joaocandre on 2021-03-09:
I'll check ntp and chrony, they seem to be what I'm looking for. My particular setup involves a Raspberry Pi acting as access point to another computer, thus there is no internet access, but I'm not looking at precise time values, I just need both machines to share clock/time.
Comment by gvdhoorn on 2021-03-09:
That would be what chrony is specifically for I believe.
Comment by joaocandre on 2021-03-09:
I'm indeed publishing to \clock, mostly for simplicity/verbosity, but what exactly would be the difference in using a different topic?
Comment by gvdhoorn on 2021-03-09:\

but what exactly would be the difference in using a different topic?

the comment was about the approach, not about the specific name of the topic.

