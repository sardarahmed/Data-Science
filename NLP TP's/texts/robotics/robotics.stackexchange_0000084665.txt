Q:

paths for the package to ros envrionment variables, not found

Hi, have a package with one cpp file, worked great. added another cpp file and built the workspace, now rosrun can't locate the package any more.
when creating the package I have implemented this command echo "source ~/catkin_ws/devel/setup.bash" >> ~/.bashrc , and have tried rospack profile which didn't list the path. why does this happen please?

Originally posted by finch1 on ROS Answers with karma: 9 on 2018-01-11
Post score: 0

Original comments
Comment by tfoote on 2018-01-11:
Please edit your question to provide more information. There's not enough here to reproduce your problem. Please provide the full context of commands you're running with their outputs and any debugging commands you're trying as well.
Comment by finch1 on 2018-01-12:
Hi tfoote,
There is not much I can add. 

(terminal 1) catkin_make <- builds 100%
(terminal 2) roscore
(terminal 3) rosrun package_name <- double tab doesn't resolve path

Comment by gvdhoorn on 2018-01-12:
Do you do a source ~/catkin_ws/devel/setup.bash after step 1? Your .bashrc is only evaluated when you open a new terminal, there is no magic there that makes bash update itself if/when you run catkin_make.
Without the source step, rosrun can't find your package.
Comment by finch1 on 2018-01-12:
Hi gvdhoorn, so how come turtlesim works fine all the time? 
Isn't this the magic trick: echo "source ~/catkin_ws/devel/setup.bash" >> ~/.bashrc that makes bash update itself evertime catkin is run ?
Comment by gvdhoorn on 2018-01-12:
No. Again: .bashrc is only evaluated (ie: read) when you start a new instance of bash. That is typically only when you start a new terminal.
See What is the purpose of .bashrc and how does it work? for some more info on that.
Comment by gvdhoorn on 2018-01-12:\

how come turtlesim works fine all the time?

technical but: because the turtlesim packages were already present on the ROS_PACKAGE_PATH when you started your bash session.
Either in your catkin_ws or in /opt/ros/$distro.
Comment by gvdhoorn on 2018-01-12:
And just to clarify: this is a "Linux thing", not something specific to ROS.
Comment by gvdhoorn on 2018-01-12:
If you can confirm that things work after you source the setup.bash after you built your workspace, I'll write an answer.
Comment by finch1 on 2018-01-12:
Hi gvdhoorn, thanks for your patience and for explaining too. I read the link and makes better sense now. I tried again and for some reason its working ok now. I'm sure I'll encounter this prob again but I can better understand its fix now.
Comment by finch1 on 2018-01-12:
Yes please, can write answer, was gonna ask for one actually, so I can tick. Yes, understood that this is a Linux thing, although wasn't sure who to ask.
Comment by gvdhoorn on 2018-01-12:
You would help yourself -- and us -- if you try to deduce why it now works. "for some reason" is not a very encouraging thing to say: it implies that you're not convinced that what posters here explained to you was the actual cause, and that you can't be bothered to find out what is/was.
Comment by finch1 on 2018-01-12:
Hi gvdhoorn, no its not the case. I had my VM paused from yesterday, turned PC on, resumed VM, opened one terminal, typed roscore, opened another one, typed rosrun package_name, hit tab key twice and the exe appeared.
Comment by finch1 on 2018-01-12:
I believe maybe the VM needs a "restart" to update. but honestly I haven't done any thing else. Otherwise of course I would have posted the fix.
Comment by gvdhoorn on 2018-01-12:\

I believe maybe the VM needs a "restart" to update

no need. See my answer.
All of this is at the level of user programs, not OS or VM.
Read some of the related questions I included in my answer (especially the first one) to see why this is necessary.

A:

I had my VM paused from yesterday, turned PC on, resumed VM, opened one terminal, typed roscore, opened another one, typed rosrun package_name, hit tab key twice and the exe appeared.

Every time you open a new terminal, a new bash session is started.
if you have your .bashrc setup to do source ~/catkin_ws/devel/setup.bash for you, then new terminals will cause your workspace to be sourced.
If you add a package, build your workspace, then don't source it, the package will not be found.
If you now open a new terminal - as you say you did - that terminal will start a new bash session, causing your workspace to be sourced. And as the new package has now been built, it will be added to the appropriate environment variables and can then be found - in the new terminals - by rosrun and roslaunch.
For already open terminals (really: bash sessions), just source ~/catkin_ws/devel/setup.bash yourself, and new packages should now be found.

Edit: some related questions:

#q269784: setup.bash every time?
#q229365: Do I really need to $ source ~/catkin_ws/devel/setup.bash ?
#q200174: How to aviod running the command "source devel/setup.bash"
#q188309: What does source command actually do?

Originally posted by gvdhoorn with karma: 86574 on 2018-01-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by finch1 on 2018-01-12:
Thanks gvdhoorn, in my .bashrc, at the very bottom, I can see the source link to the package, as you're describing. In case this happenes again, I'm more than happy to write how I fixed the issue. But from what I understood, as long as the .bashrc has the source link, there shouldn't be any issues.
Comment by gvdhoorn on 2018-01-12:\

in my .bashrc [..] I can see the source link to the package

Just to be extra clear: the source line points to the devel space, not to any package.
It can't, because package directories do not contain the necessary files.
Comment by gvdhoorn on 2018-01-12:
Additionally: I only wrote about bash, but the same holds for other shells.
Comment by finch1 on 2018-01-12:
Thanks for the helpful links. I asked the question as this happened to me already, so yeah, thanks for your detailed explenation. still getting my head around things.

