Q:

micro_ros_agent failing to connect to Raspberry Pi RP2040 with error: 13

Hi! I’m trying to implement micro ROS on the Pololu 3pi+ 2040 mobile robot. The 3pi+ 2040 has a Raspberry Pi 2040 microcontroller.
I'm currently running Humble in a Ubuntu 20.04 with Kernel 5.15.0-67-generic VM guest in UTM on an Intel Mac.
I’ve successfully compiled the Raspberry Pi Pico implementation of micro ROS and read it’s topic according to the instructions here: https://robofoundry.medium.com/raspberry-pi-pico-ros2-via-micro-ros-actually-working-in-1-hr-9f7a3782d3e3
The problem begins when I’ve loaded the Pico uf2 file on the 3pi+ 2040. Reading from the serial port looks similar to the output from the Pico, but the actual agent dies with error code 13 even though I’m running with sudo.
Does anyone know how to debug in this scenario? I am looking for next steps, if possible.
The actual output of mico ROS agent is as follows:
bash ~/start_micro-ros-agent.sh
[1679288574.823863] error    | TermiosAgentLinux.cpp | init                     | open device error      | device: /dev/ttyACM0, errno: 13. Please re-run with superuser privileges.
Error while starting serial agent!
Where start_micro-ros-agent.sh contains:more ~/start_micro-ros-agent.sh
sudo micro-ros-agent serial --dev /dev/ttyACM0 --baudrate=115200 -v6
At the very least this error message is spurious because I am running with root privileges.

Originally posted by Peter Klemperer on ROS Answers with karma: 16 on 2023-03-20
Post score: 0

A:

Not sure why, but rebuilding the micro ros agent from source works. The snap version doesn't work for this application.

Originally posted by Peter Klemperer with karma: 16 on 2023-03-24
This answer was ACCEPTED on the original site
Post score: 0

