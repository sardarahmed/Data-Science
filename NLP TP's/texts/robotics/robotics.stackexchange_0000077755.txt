Q:

Plot poseStamped topic in rqt_plot/RViz

Hi,
I have a topic which is built like that:
int32 id
float64 size
geometry_msgs/PoseStamped pose 

I am seeing it if I do rostopic list and rostopic echo without any problem. I would like to see it through rqt_plot and/or RViz but I am not able to do so.
The topic is named
/apriltag2_detections

I do
rosrun rqt_plot rqt_plot

And I can arrive only to see the field id and size. Like from the following screenshot (you can also see a rostopic echo output on the right of the image):

Could you tell me why? What am I doing wrong?
Thanks a lot for the help.

Originally posted by fabbro on ROS Answers with karma: 115 on 2016-12-09
Post score: 0

A:

Hi fabbro,
Because detections is an array, you will have to add /apriltag2_tag_detections/detections[0]/pose/pose/position and /apriltag2_tag_detections/detections[0]/pose/pose/orientation to rqt_plot to plot the values of the first detection.
As for showing this pose in Rviz, I don't think Rviz is able to do that by default, but if you (also) publish just the pose on a separate topic, you can add a Pose display to Rviz that subscribes to that topic.
You can use topic_tools (wiki link) to automatically transform your messages to a geometry_msgs/Pose by running:
rosrun topic_tools transform /apriltag2_tag_detections /apriltag2_tag_detections_pose geometry_msgs/Pose 'm.detections[0].pose.pose'

This will create a new topic that transforms your messages into poses that Rviz can easily visualize.
Good luck!

Originally posted by rbbg with karma: 1823 on 2016-12-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by fabbro on 2016-12-11:
Hey, I tried to do that. But as you can see from my figure I can only add /apriltag2_tag_detections/detections
I have no idea why.
Comment by rbbg on 2016-12-12:
Whoops just noticed a typo, should ofourse be apriltag2_tag_detections/detections/pose/pose/position. Did you try explicitly typing that whole string? or even apriltag2_tag_detections/detections/pose/pose/position/x? I have found that the suggestions that rqt makes aren't always complete..
Comment by fabbro on 2016-12-12:
I tried, yes, but it does not work. It is really strange for me.
Comment by rbbg on 2016-12-12:
I don't see where detections comes from in your msg definition, does that happen to an array? In that case you will need apriltag2_tag_detections/detections[0]/pose/pose/position
Comment by fabbro on 2016-12-12:
Yes, finally. This was the problem. I put apriltag2_tag_detections/detections[0]/pose/pose/position  and it is working. If you edit your answer I can also accept it to reward the help you gave me :) . Thanks again.
Comment by rbbg on 2016-12-12:
edited, you're welcome!
Comment by fabbro on 2016-12-12:
Thanks, I also upvoted all your comments.

