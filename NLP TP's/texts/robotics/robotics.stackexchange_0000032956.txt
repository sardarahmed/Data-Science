Q:

Environment Server's get_trajectory_validity is not being advertised

Using ROS diamondback with our custom arm, I'm trying to get move_arm to work. My current problem is that the environment_server is not advertising a get_trajectory_validity service. I am trying to ignore any obstacles in the environment for now.
Here's the launch file that I am using for the environment service
<launch>

  <node pkg="planning_environment" type="environment_server" output="screen" name="environment_server">
    <param name="allow_valid_collisions" type="bool" value="false" />

    <param name="collision_map_safety_timeout" type="double" value="100000.0" />
    <param name="joint_states_safety_timeout" type="double" value="1.0" />
    <param name="tf_safety_timeout" type="double" value="1.0" />
    <param name="bounding_planes" type="string" value="0 0 1 -0.01" />

    <param name="object_padd" type="double" value="0.04" />
    <param name="pointcloud_padd" type="double" value="0.00" />

    <param name="contacts_to_compute_for_display" type="int" value="50" />
    <param name="joint_state_cache_allowed_difference" type="double" value=".1" />

    <param name="use_collison_map" value="false" />

    <param name="default_robot_padding" value="0.01" />

  </node>
</launch>

The error I get (from move_arm) is:
header: 
  seq: 235
  stamp: 1310568657.618890981
  frame_id: 
level: 2
name: /move_right_arm
msg: waitForService: Service [/environment_server/get_trajectory_validity] has not been advertised, waiting...
file: /tmp/buildd/ros-diamondback-ros-comm-1.4.7/debian/ros-diamondback-ros-comm/opt/ros/diamondback/stacks/ros_comm/clients/cpp/roscpp/src/libros/service.cpp
function: service::exists
line: 80
topics[]
  topics[0]: /rosout
  topics[1]: /allowed_contact_regions_array

I am launching the move_arm node with:
<launch>
  <node pkg="move_arm" type="move_arm_simple_action" output="screen" name="move_right_arm">

    <remap from="robot_description" to="/robot_description" />
    <remap from="joint_state" to="/joint_states" />
    <remap from="filter_trajectory" to="trajectory_filter/filter_trajectory_with_constraints" />
    <!--remap from="filter_trajectory" to="chomp_planner_longrange/filter_trajectory_with_constraints" /-->

    <remap from="arm_ik" to="/arm_kinematics/get_constraint_aware_ik" />
    <remap from="arm_fk" to="/arm_kinematics/get_fk" />

    <remap from="get_trajectory_validity" to="environment_server/get_trajectory_validity" />
    <remap from="get_environment_safety" to="environment_server/get_environment_safety" />
    <remap from="get_execution_safety" to="environment_server/get_execution_safety" />
    <remap from="get_group_info" to="environment_server/get_group_info" />
    <remap from="get_robot_state" to="environment_server/get_robot_state" />
    <remap from="get_state_validity" to="environment_server/get_state_validity" />

    <param name="group" type="string" value="right_arm" />
    <param name="ik_allowed_time" type="double" value="2.0" />
    <param name="trajectory_filter_allowed_time" type="double" value="2.0" />
    <param name="group" type="string" value="right_arm" />
    <!-- <param name="controller_action_name" type="string" value="/r_arm_controller/joint_trajectory_action" /> -->
    <param name="controller_action_name" type="string" value="/right_arm/joint_trajectory_action" />

    <param name="pause_allowed_time" type="double" value="5.0" />

  </node>
</launch>

Originally posted by John Hoare on ROS Answers with karma: 765 on 2011-07-13
Post score: 0

Original comments
Comment by John Hoare on 2011-07-13:
I am not seeing the get_trajectory_validity service from the environmental server when I run rosservice list, is that normal?
Comment by arebgun on 2011-07-13:
Can you post how you launch move_arm, what remapping are done there?

A:

Turns out the problem (as you can see in my posted launch file) is that I spelled "collision" wrong for the use_collision_map parameter. Perhaps it would be nice to add in a way for unused parameters that are specified.

Originally posted by John Hoare with karma: 765 on 2011-07-27
This answer was ACCEPTED on the original site
Post score: 0

