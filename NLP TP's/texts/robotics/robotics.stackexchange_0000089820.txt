Q:

ROS indigo Installation Dependency issue

I am trying to install ROS Indigo in ubuntu 14.04.The link for installation is
http://wiki.ros.org/indigo/Installation/Ubuntu
When I give the following install command in my terminal
sudo apt-get install ros-indigo-desktop-full

the output messages i get is
Reading package lists... Done
Building dependency tree       
Reading state information... Done
You might want to run 'apt-get -f install' to correct these:
The following packages have unmet dependencies:
 python-rosdep : Depends: python-rosdistro (>= 0.4.0) but it is not going to be installed
 ros-indigo-desktop-full : Depends: ros-indigo-desktop but it is not going to be installed
                           Depends: ros-indigo-perception but it is not going to be installed
                           Depends: ros-indigo-simulators but it is not going to be installed
                           Depends: ros-indigo-urdf-tutorial but it is not going to be installed
E: Unmet dependencies. Try 'apt-get -f install' with no packages (or specify a solution).

I tried
apt-get -f install

and got
E: Could not open lock file /var/lib/dpkg/lock - open (13: Permission denied)
E: Unable to lock the administration directory (/var/lib/dpkg/), are you root?

So I tried with
sudo apt-get -f install

then i get an error
dpkg-deb: error: archive '/var/cache/apt/archives/python-rosdistro-modules_0.7.0-1_all.deb' has premature member 'control.tar.xz' before 'control.tar.gz', giving up
dpkg: error processing archive /var/cache/apt/archives/python-rosdistro-modules_0.7.0-1_all.deb (--unpack):
 subprocess dpkg-deb --control returned error exit status 2
dpkg-deb: error: archive '/var/cache/apt/archives/python-rosdistro_0.7.0-100_all.deb' has premature member 'control.tar.xz' before 'control.tar.gz', giving up
dpkg: error processing archive /var/cache/apt/archives/python-rosdistro_0.7.0-100_all.deb (--unpack):
 subprocess dpkg-deb --control returned error exit status 2
Errors were encountered while processing:
 /var/cache/apt/archives/python-rosdistro-modules_0.7.0-1_all.deb
 /var/cache/apt/archives/python-rosdistro_0.7.0-100_all.deb
E: Sub-process /usr/bin/dpkg returned an error code (1)

I tried sudo apt-get clean and sudo apt-get autoremove
I also tried several steps which i got from other forums
sudo rm -rf /var/lib/dpkg/updates/*
sudo rm -rf /var/lib/apt/lists/*
sudo rm /var/cache/apt/*.bin
sudo apt-get clean
sudo apt-get autoremove
sudo apt-get update
sudo dpkg --configure -a
sudo apt-get install -f

Nothing worked out.
Anybody have encountered or have an idea on how to solve this problem?

Originally posted by rosusernli on ROS Answers with karma: 52 on 2018-12-12
Post score: 0

Original comments
Comment by gvdhoorn on 2018-12-12:\

has premature member 'control.tar.xz' before 'control.tar.gz', giving up

this seems to tell us that your dpkg is too old. Try running a sudo apt-get update && sudo apt-get upgrade dpkg. Then try again.

A:

This could be a duplicate of #q299091.

Originally posted by gvdhoorn with karma: 86574 on 2018-12-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by rosusernli on 2018-12-12:
sudo apt-get update && sudo apt-get upgrade dpkg gives
python-rosdep : Depends: python-rosdistro (>= 0.4.0) but it is not installed
E: Unmet dependencies

Comment by gvdhoorn on 2018-12-12:
It seems strange that an update of dpkg -- a base Debian package -- would result in errors about python-rosdep.
What is the general status of apt on your system?
Do you have "broken packages"?
Comment by rosusernli on 2018-12-13:
Thanks for the tip. It worked !!!
I removed the broken and residual packages using sudo apt-get remove --purge $(sudo dpkg -l | grep "^iU" | awk '{print $2}' | tr '\n' ' ') and dpkg --list |grep "^rc" | cut -d " " -f 3 | xargs sudo dpkg --purge
I was able to do the  dpkg upgrade and install

