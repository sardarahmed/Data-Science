Q:

controller_spawner node missing

I want to simulate many uavs in gazebo, when I launched 20uavs in gazebo, I found 17th-20th uav can't be controlled. I checked the rqt_graph and found that the node /gazebo had subscribed all uavs' topic (/pose_action) but the last four. So I want to know is there any limitation on topics a node can subscribe?
update1:
I found 17th-20th uavs didn't have the topic "cmd_vel". On the other hand, I checked the rqt_graph and found that the node /gazebo had subscribed all uavs' topic (/command/pose) but the last four. I checked the log and found that the four uavs' log had the following warning:

Controller Spawner couldn't find the expected controller_manager ROS interface.

But other uavs all correctly load controller_manager and upload the controller. I had tried many times and sometimes there were 5 wrong and sometimes 3 and etc. Why some of them can't?
update2:
I also found the four uavs' node (controller_spawner) were not created.

Originally posted by nm46nm on ROS Answers with karma: 1 on 2018-04-09
Post score: 0

A:

There aren't any hard limits in ROS on the number of subscribers, but your operating system may have some limits that indirectly limit the number of publishers or subscribers. For example the maximum number of open file descriptors limits the number of open TCP connections that a process can have.
On most common versions of Ubuntu Linux, for example, the maximum number of open file descriptors is 1024. I suspect your subscriber is nowhere near this limit, but if gazebo is publishing and subscribing to many topics per uav, it may be close to this limit.
You should be able to find the PID (process ID) for gazebo through ps; something like ps a | grep gazebo will probably help. Once you have the process ID, you can show all of the open file descriptors for gazebo with lsof -p {PID} (where {PID} is the process ID for gazebo), or you can count the number of open file descriptors with lsof -p {PID} | wc -l.

Originally posted by ahendrix with karma: 47576 on 2018-04-10
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by gvdhoorn on 2018-04-10:
Additionally: it might be good to check whether the (Gazebo) plugins used impose any (artificial) limits. 20 - 4 == 16. That is too nice a number to be a coincidence.
Comment by nm46nm on 2018-04-10:
I had changed the ulimit by ulimit -n 20480 before, it seemingly didn't work. Besides, when I try lsof -P {PID} , it says "No such file or directory", why?(I had replaced the pid)
Comment by ahendrix on 2018-04-10:
oops; that should be a lowercase p: lsof -p {PID}
Comment by nm46nm on 2018-04-11:
Thank you but it toled me "lsof: WARNING: can't stat() tracefs file system /sys/kernel/debug/tracing
,Output information may be incomplete."
When I put sudo in front of the lsof, it said "lsof: WARNING: can't stat() fuse.gvfsd-fuse file system /run/user/1000/gvfs ,Output information may be incom..."
Comment by nm46nm on 2018-04-11:
@gvdhoorn, it is not always 16. If we want to simu 30 uavs, there are just 9 or 14 or 11 etc uavs connected.

