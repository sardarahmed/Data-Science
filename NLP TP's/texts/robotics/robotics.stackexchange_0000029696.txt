Q:

Diamondback SVN build; roscore won't start, ImportError: No module named rosgraph_msgs.msg

I've just built ROS Diamondback desktop full-install from SVN using instructions here. Installation process run smoothly. When trying to run roscore the following error appears:
Traceback (most recent call last):
  File "/home/user/ros/ros/bin/roscore", line 34, in <module>
    from ros import roslaunch
  File "/home/user/ros/ros/core/roslib/src/ros/__init__.py", line 57, in __getattr__
    return __import__(name)
  File "/home/user/ros/ros_comm/tools/roslaunch/src/roslaunch/__init__.py", line 53, in <module>
    from roslaunch.scriptapi import ROSLaunch
  File "/home/user/ros/ros_comm/tools/roslaunch/src/roslaunch/scriptapi.py", line 42, in <module>
    import roslaunch.parent
  File "/home/user/ros/ros_comm/tools/roslaunch/src/roslaunch/parent.py", line 55, in <module>
    import roslaunch.server
  File "/home/user/ros/ros_comm/tools/roslaunch/src/roslaunch/server.py", line 70, in <module>
    from rosgraph_msgs.msg import Log
ImportError: No module named rosgraph_msgs.msg

roswtf gives the following output:
ERROR: ROS has not been built. To fix:
cd $ROS_ROOT
make

Of course doing as roswtf suggests or running rosmake ros doesn't fix the issue.
EDIT: The thing that seems suspicious to me is there are only 18 steps in the process of building ros via rosmake ros. This seems to little in comparison with 72 dependencies being built when building cturtle.
Any clues?

Originally posted by tom on ROS Answers with karma: 1079 on 2011-02-19
Post score: 0

A:

Can you try running "rosmake ros_comm" and re-running?

Originally posted by kwc with karma: 12244 on 2011-02-20
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by tfoote on 2011-02-28:
rosinstall version 0.5.16 and greater now will bootstrap ros_comm if present.
Comment by kwc on 2011-02-26:
I've patched roswtf r13416.  Unfortunately, it won't make it in the final Diamondback RC, but we are also working to address the underlying cause better in rosinstall.
Comment by joq on 2011-02-25:
Sounds like there is still a bug in roswtf to fix that message.
Comment by tom on 2011-02-20:
Thank you, that solved the problem. I move on to reading REP108 :).
Comment by fergs on 2011-02-20:
See also REP108 for details of how "ros" stack was broken up for diamondback: http://www.ros.org/reps/rep-0108.html

