Q:

Segmentation fault (program cc1plus) when compile code with "ROS_ERROR_STREAM()"

I am trying to compile Autoware.io on Nvidia Jetson Xavier .
Package name : lanelet2_extension (package in Autoware.io, source code from https://github.com/Autoware-AI/autoware.ai)
Jetson Xavier core architecture is ARMv8
OS version：Linux nvidia-desktop 4.9.253-tegra #1 SMP PREEMPT Mon Jul 26 12:19:28 PDT 2021 aarch64 aarch64 aarch64 GNU/Linux

Distributor ID:   Ubuntu
Description:  Ubuntu 18.04.5 LTS
Release:  18.04
Codename: bionic
ROS version: melodic

Error msg:
c++: internal compiler error: Segmentation fault (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-7/README.Bugs> for instructions.
make[3]: *** [CMakeFiles/utilities-test.dir/test/src/test_utilities.cpp.o] Error 4
make[2]: *** [CMakeFiles/utilities-test.dir/all] Error 2
make[1]: *** [CMakeFiles/tests.dir/rule] Error 2
make: *** [tests] Error 2
    GCC version: gcc (Ubuntu/Linaro 7.5.0-3ubuntu1~18.04) 7.5.0

BTW, I tried to compile the code with gcc 5.5, the problem still exists.
I noticed another Q&A (https://answers.ros.org/question/97441/c-compiler-crashed/), so I commented part of the code，such as "ROS_ERROR_STREAM(FUNCTION << "msg is null pointer!");" and so on. Finally, the code can be compiled correctly
so, how should I investigate the cause of the error in depth? Seems to be caused by stream output?

Originally posted by Samuel_Leon_Fisher on ROS Answers with karma: 26 on 2021-12-15
Post score: 0

A:

I think I may have solved this problem.
Maybe the stack size is too small. I increased the stack limit to 8192 and the problem was resolved.
To modify the stack size, please modify the file "/etc/security/limits.conf"

Originally posted by Samuel_Leon_Fisher with karma: 26 on 2021-12-16
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by osilva on 2021-12-18:
Glad you found an answer @Samuel_Leon_Fisher. Thank you for sharing

