Q:

Helping diff. drive robot get through doorways

Hey folks!
I'm working on a differential drive SLAM robot and I have things working pretty well. I'm able to:

Create a map of my apartment using slam_toolbox
Navigate from room to
room using Nav2 and Goal Poses on
RViz2

First off a big thanks to Steve Macenski and all the folks who maintain these open source packages. I've really been enjoying using them so far.
I'm having a problem where my robot is getting "stuck" in doorways that are plenty big for it to navigate through. It doesn't happen every time, and I'd say 50% of the time the robot just breezes through and passes to the next room with no problem. The other 50% though the robot will stop at the threshhold, start rotating to and fro in a confused manner, and sometimes it works itself out after 30sec or so, but most of the time it ends up getting totally stuck until I give it a little help with the joystick.
I have noticed that this happens more often when moving to a room that is positioned a U-turn away from the current room. For instance, the robot can usually handle these paths with no problem:

Whereas it almost ALWAYS gets stuck moving between these two rooms:

It doesn't like something about that turn radius, even though practically there is plenty of room to pass (sometimes it manages to).
What I have tried:

Confirming the URDF descriptions are accurate to the robot's physical dimensions
Playing with the wheel separation multiplier in the controller configuration file

But can't seem to shake this issue. Perhaps there is some setting in Nav2 related to the costmap that I can finetune to get this working? Thanks in advance for any suggestions!

Originally posted by coatwolf on ROS Answers with karma: 13 on 2023-04-12
Post score: 0

Original comments
Comment by Mike Scheutzow on 2023-04-13:
Have you installed the plugin in rviz to display the Local Costmap? If you have "fake" obstacles in the Local Costmap, the Local Planner may be unable to find an open path.
Comment by coatwolf on 2023-04-16:
Yes you can see in the images in my post that I have the costmap displayed in rviz2. Unless you meant something else. I have made some progress (see my response in a comment below).
Comment by Mike Scheutzow on 2023-04-16:
The Global Costmap is different from the Local Costmap. It would benefit you to understand the difference.
Comment by coatwolf on 2023-04-16:
Apologies, I missed the "Local" keyword. Yes I have viewed the local costmap as well and there doesn't seem to be an issue of phantom obstacles. Thanks for the reply.

A:

I haven't solved this entirely BUT I am closer now that I have discovered the costmap parameters file which I was unaware of prior to my post. You can find info here and the code here.
I had originally installed the nav2 stack using apt which made it inconvenient to access this file, so I apt removed all of the packages and then reinstalled by cloning from the nav2 repository (guide here) to a dedicated nav2_ws and editing / building from there.
By playing with the following values I am slowly but surely improving my robot's mobility through turns and doorways:

footprint_padding
inflation_radius
cost_scaling_factor

Originally posted by coatwolf with karma: 13 on 2023-04-16
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by hunterlineage1 on 2023-04-16:
This is right, I had to adjust inflation_radius and it worked.
Comment by coatwolf on 2023-04-16:
Thanks for the reply! Was it simply a matter of reducing the radius?
Comment by hunterlineage1 on 2023-04-16:
Yes, but you might still have to tune the footprint_padding and cost_scaling_factor.

