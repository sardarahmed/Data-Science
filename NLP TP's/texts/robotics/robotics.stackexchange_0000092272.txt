Q:

vision_ssd_detect cannot be launched (fine compilation of ssdcaffe and CUDA enabled device)

Hi all,
It's not possible to launch vision_ssd_detect because it is not possible to find the "libcaffe.so.1.0.0-rc3". Compilation with ssdcaffe went well (followed http://caffe.berkeleyvision.org/installation.html) and then make & make distribute.
I am not able to track where this issue is coming from. I attach the terminal output for ./colcon_release with CUDA flag 1 for debugging purposes.
System Specs:
Ubuntu 16.04
ROS Kinetic
Autoware git commit: 42aba146
CUDA 8.0
Autoware build result - SSDCAFFE build result and .launch log file:
1- https://drive.google.com/file/d/1Epki9X411EMziRscY2ppo62G-HkDo8sl/view?usp=sharing
2- https://drive.google.com/file/d/1UPDzZxQe3Y4PDWQkRQZ2FVPCXJ5LCdZE/view?usp=sharing
3- https://drive.google.com/file/d/1ltTWGH-J2CPP9PMI2a5xXwcI1g2oAg42/view?usp=sharing
/home/ocp/Autoware/ros/install/runtime_manager/lib/runtime_manager/runtime_manager_dialog.py:2865: wxPyDeprecationWarning: Call to deprecated item.
wx.InitAllImageHandlers()
Unable to register with master node [http://localhost:11311]: master may not be running yet. Will keep trying.
loading qs.yaml
Subscribe[localization] topic=/ndt_stat, key=/ndt_stat.NDTStat.exe_time
Subscribe[detection] topic=/topic2, key=/topic2
Subscribe[detection] topic=/topic1, key=/topic1
loading setup.yaml
['rosparam', 'set', 'tf_x', '1.2']
['rosparam', 'set', 'tf_y', '0.0']
['rosparam', 'set', 'tf_z', '2.0']
['rosparam', 'set', 'tf_yaw', '0.0']
['rosparam', 'set', 'tf_pitch', '0.0']
['rosparam', 'set', 'tf_roll', '0.0']
['rosparam', 'set', 'localizer', 'velodyne']
loading map.yaml
loading sensing.yaml
loading computing.yaml
loading interface.yaml
loading data.yaml
loading simulation.yaml
['rosparam', 'set', '/use_sim_time', 'false']
loading status.yaml
loading state.yaml
loading topics.yaml
['roslaunch', 'vision_ssd_detect', 'vision_ssd_detect.launch', 'score_threshold:=0.6', 'image_src:=/image_raw', 'network_definition_file:=/home/ocp/ssdcaffe/models/VGGNet/VOC0712Plus/SSD_300x300/deploy.prototxt', 'pretrained_model_file:=/home/ocp/ssdcaffe/models/VGGNet/VOC0712Plus/SSD_300x300/VGG_VOC0712Plus_SSD_300x300_iter_240000.caffemodel', 'use_gpu:=True', 'gpu_device_id:=0']
pid=2337
sched policy=OTHER prio=0
/home/ocp/Autoware/ros/install/vision_ssd_detect/lib/vision_ssd_detect/vision_ssd_detect: error while loading shared libraries: libcaffe.so.1.0.0-rc3: cannot open shared object file: No such file or directory
[vision_ssd_detect-1] process has died [pid 2356, exit code 127, cmd /home/ocp/Autoware/ros/install/vision_ssd_detect/lib/vision_ssd_detect/vision_ssd_detect __name:=vision_ssd_detect __log:=/home/ocp/.ros/log/d9212ea6-9a00-11e9-8b7c-a4fc771a0d0d/vision_ssd_detect-1.log].
log file: /home/ocp/.ros/log/d9212ea6-9a00-11e9-8b7c-a4fc771a0d0d/vision_ssd_detect-1*.log
/image_raw
Thanks in advance!

Originally posted by cassini.huygens on ROS Answers with karma: 80 on 2019-06-29
Post score: 0

A:

The error itself is telling you that the linux linker cannot found libcaffe.so.
/lib/vision_ssd_detect/vision_ssd_detect: error while loading shared libraries: libcaffe.so.1.0.0-rc3
You'll need to either

add the path where that .so file is located to the LD_LIBRARY_PATH, or
"install" or move caffe headers/libraries to the system path, and update the libraries cache.

Supponsing you cloned Caffe to /home/YOUR_USER/caffe/
If you go for 1.
$ export LD_LIBRARY_PATH=/home/YOUR_USER/caffe/distribute/lib:$LD_LIBRARY_PATH
If you prefer 2.
$ cd /home/YOUR_USER/caffe && sudo make install && sudo ldconfig
Then you should be able to run the node.

Originally posted by amc-nu with karma: 136 on 2019-06-29
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by msw on 2019-11-11:
I have same problem like above,
/lib/vision_ssd_detect/vision_ssd_detect: error while loading shared libraries: libcaffe.so.1.0.0-rc3

but your solution doesnt work for me, either option 1 or option 2. and couldnt do sudo make install, just sudo make or sudo make all. Do you have any other suggestion?
Thanks in advance.

