Q:

ROS system randomly crashes and gdb says corrupt stack in callback queue

My ROS system randomly crashes and I decided to run gdb at all times to catch it next time it happens.
I caught it and this is the output from gdb:
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x6deff420 (LWP 25232)]
0x0003d210 in boost::detail::sp_counted_base::release() ()
(gdb) bt
#0  0x0003d210 in boost::detail::sp_counted_base::release() ()
#1  0x76409570 in ros::SubscriptionQueue::call() () from /opt/ros/indigo/lib/libroscpp.so
#2  0x763baa84 in ros::CallbackQueue::callOneCB(ros::CallbackQueue::TLS*) () from /opt/ros/indigo/lib/libroscpp.so
#3  0x6defec5c in ?? ()
#4  0x6defec5c in ?? ()
Backtrace stopped: previous frame identical to this frame (corrupt stack?)

Obviously that is not much help! Does anyone have an idea how I can go about debugging this? Point me in the right direction? Thanks

Originally posted by Sebastian on ROS Answers with karma: 363 on 2016-04-05
Post score: 0

Original comments
Comment by mrrius on 2019-11-20:
I face the same error here. Any solution?

A:

Looks like stack corruption. I'd start by running your node in valgrind, and if that doesn't find anything I'd start looking for more specific tools for debugging stack overruns.

Originally posted by ahendrix with karma: 47576 on 2016-04-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Sebastian on 2016-04-05:
Thanks. I had heard of valgrind but I've never used it before. I'll give it a look.

