Q:

No laser scan received

I'm trying to use amcl to localize my robot using a bag file. Steps I do are these:

Publishing the map: rosrun map_server map_server map.yaml

Running amcl: rosrun amcl amcl scan:=base_scan _odom_frame:=odom_combided

Playing the bag file: rosbag play small.bag

Published topics are:
/amcl/parameter_descriptions
/amcl/parameter_updates
/amcl_pose
/base_odometry/odom
/base_odometry/odometer
/base_odometry/state
/base_scan
/clock
/initialpose
/map
/map_metadata
/move_base_simple/goal
/particlecloud
/robot_pose_ekf/odom_combined
/rosout
/rosout_agg
/tf
/tilt_scan
/torso_lift_imu/data
/torso_lift_imu/is_calibrated

But amcl node prints out this message continuously: [ WARN] [1391522838.082207618]: No laser scan received (and thus no pose updates have been published) for 1391522838.082082 seconds.  Verify that data is being published on the /base_scan topic.
And /amcl_pose publishes nothing.
rxgraph output:

Originally posted by maysamsh on ROS Answers with karma: 139 on 2014-02-04
Post score: 0

Original comments
Comment by Proc√≥pio on 2014-02-06:
can you post your tf tree?
Comment by hawesie on 2014-06-02:
It's not just a typo odom_combided != odom_combined?

A:

If you are playing back a bagfile, you should probably use simulated time, since the timestamps on the recorded and played back messages will not match the current system time (the "no laser scan recieved for huge number of seconds" is a good indicator of this). To use sim time, you should set the "use_sim_time" parameter to true before starting AMCL:
rosparam set use_sim_time true

And when starting  your bagfile, you should tell it to broadcast the clock (so that the current system time matches the timestamps on  your messages being played):
rosbag play small.bag --clock

Originally posted by fergs with karma: 13902 on 2014-02-04
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by maysamsh on 2014-02-04:
Now it says:  [ WARN] [1391568852.036509093, 1302532602.518714771]: MessageFilter [target=/odom ]: Dropped 100.00% of messages so far. Please turn the [ros.amcl.message_notifier] rosconsole logger to DEBUG for more information.
[ WARN] [1391568852.036509093, 1302532602.518714771]: MessageFilter [target=/odom ]: Dropped 100.00% of messages so far. Please turn the [ros.amcl.message_notifier] rosconsole logger to DEBUG for more information.
Comment by fergs on 2014-02-05:
Have you given AMCL a starting localization, either via parameter or from RVIZ?
Comment by maysamsh on 2014-02-05:
@fergs, no should I do it? if yes, how?
Comment by fergs on 2014-02-06:
http://wiki.ros.org/navigation/Tutorials/Using%20rviz%20with%20the%20Navigation%20Stack shows how to send an initial pose using RVIZ

