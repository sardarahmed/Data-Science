Q:

Raspberry Pi2 roscpp failed during Indigo installation

Hello everybody,
I cannot install ROS Indigo on the Raspberry Pi 2 model B with Raspbian Jessie(no problem with Wheezy).
At each time, it fails when it compiles roscpp with the command :
sudo ./src/catkin/bin/catkin_make_isolated --install -DCMAKE_BUILD_TYPE=Release --install-space /opt/ros/indigo
I followed the official instructions that are here.
I even tried to compile myself libconsole-bridge-dev and liblz4-dev.
I cannot join the .txt because i'm a new user. So, here is the error :
https://www.dropbox.com/s/c6pyfz9ubi5fty6/error_roscpp.txt?dl=0
Have you any idea or solution?
Thanks !
EDIT :
There is also a strange thing that happen : the raspberry pi 2 gets his ram AND swap satured !
And once the Raspberry completely crashed.
Before it prints the error, the raspberry is lagging so even if you have another ssh terminal opened, you can't do anything in it. Even the refresh of top doesn't work !
Here is the error :
[ 36%] Building CXX object CMakeFiles/roscpp.dir/src/libros/single_subscriber_publisher.cpp.o
c++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.9/README.Bugs> for instructions.
CMakeFiles/roscpp.dir/build.make:146: recipe for target 'CMakeFiles/roscpp.dir/src/libros/publisher_link.cpp.o'     failed
make[2]: *** [CMakeFiles/roscpp.dir/src/libros/publisher_link.cpp.o] Error 4
make[2]: *** Waiting for unfinished jobs....
CMakeFiles/Makefile2:308: recipe for target 'CMakeFiles/roscpp.dir/all' failed
make[1]: *** [CMakeFiles/roscpp.dir/all] Error 2
Makefile:127: recipe for target 'all' failed
make: *** [all] Error 2
<== Failed to process package 'roscpp':
Command '['/opt/ros/indigo/env.sh', 'make', '-j4', '-l4']' returned non-zero exit status 2

Reproduce this error by running:
==> cd /home/pi/ros_catkin_ws/build_isolated/roscpp && /opt/ros/indigo/env.sh make -j4 -l4

Command failed, exiting.

Originally posted by amof on ROS Answers with karma: 11 on 2015-10-21
Post score: 1

Original comments
Comment by gvdhoorn on 2015-10-21:
Please run catkin_make -j1 and copy & paste the error text (and some surrounding lines) into your question. Linking to dropbox is not very nice, as that will make this question (and any possible answers) worthless if / when you delete that file. Use the edit button/link to update your question.
Comment by gvdhoorn on 2015-10-21:
Please reformat your copy/paste using the Preformatted text button on the toolbar. It's the one with 101010 on it. That would make this much more readable. Be sure to re-copy/paste the error, as the quotes you used now have changed the lines (inserted formatting characters).
Comment by allenh1 on 2015-10-21:
Looks like it's asking you to report a GCC bug! Never seen this one. That's very interesting... I bet you can get them to fix it quickly, or at least tell you what happened.
Comment by amof on 2015-10-21:
@gvdhoorn : Done ! Thanks for the advices.
@allenh1 : Must I report the GCC bug ??!
Comment by MarkyMark2012 on 2015-10-21:
It's possible it's your swap space. I've has problems like this on my Pi's (Although not the early on in the build). Make sure you have about 1Gb of swap avaliable and it active
Mark
Comment by amof on 2015-10-21:
I just tested it.
I put 1Go of swap and it worked ... Strange because the Rpi 2 has 1gb of ram !
It took apparently 1500 mb of ram-swap to compile roscpp ...
What can necessite all that memory ?
Comment by MarkyMark2012 on 2015-10-21:
To be honest I have no idea. Have put that as the answer though :)
Comment by amof on 2015-10-21:
It could be interesting to investigate on it !
Comment by shahidare on 2015-11-28:
I am also suffering from same problem. Did you found any working solution?
Comment by amof on 2015-11-28:
Yes, you can increase your swap space in /etc/dphys-swapfile.

A:

It's possible it's your swap space. I've has problems like this on my Pi's (Although not the early on in the build). Make sure you have about 1Gb of swap avaliable and it active
Mark

Originally posted by MarkyMark2012 with karma: 1834 on 2015-10-21
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by Hobbert Evergreen on 2017-01-09:
Two days going mad until find this answer!! Thanks a lot!
Comment by ticotico on 2022-02-10:
Thx a lot! Here is a how-to do it.

