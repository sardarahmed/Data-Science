Q:

moving the shadow robot with a haptic glove

hello,
Days ago i build a glove with one flex sensor in each finger and i connect it with a arduino mega 2560, now i have the values of the sensors in a topic on ros, that value are published in a node for each sensor, now what i want to do is to simulate the movement of my hand in the sr_hand of the shadow robot, i saw the cyberglove example but there is not too information about how to do this, anyone of you, knows a way to do that???
Thank you!!

Originally posted by joseescobar60 on ROS Answers with karma: 172 on 2012-11-14
Post score: 1

A:

Hi, if I were you I'd look at the sr_remappers code. Basically you're getting a vector of data from your glove and want to remap it to the shadow hand. To do this you need to remap the glove space to the hand space (-> write a matrix which will transform from one to the other).
The remapper should subscribe to your glove topic and republish to the hand controllers:

/sh_ffj0_mixed_position_velocity_controller/command
/sh_ffj3_mixed_position_velocity_controller/command
/sh_ffj4_mixed_position_velocity_controller/command
etc...

Once you've written this remapper, you can just start the simulated hand:
roslaunch sr_hand gazebo_hand.launch
rosrun gazebo gui

Finally start your glove node and start your remapper node.
Let me know how it goes.
May I ask how many DOFs does your glove have? At what kind of frequency are you polling the data?

Originally posted by Ugo with karma: 1620 on 2012-11-14
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by joseescobar60 on 2012-11-14:
hey, thank you for your answer i will try it, my glove has 5 flex sensors, one per each finger, then i think it have 5 DOFs, and in this moment i'm reading the sensor data at 500ms. Another thing, i don't have the values in only one topic, i have it in 5 topics, one per flex sensor.
Comment by Ugo on 2012-11-15:
OK thanks for that. Your mapping matrix should be very simple then (you could even publish directly to the correct topics (/sh_ffj3_mixed_position_velocity_controller/command, mfj3, rfj3, lfj3, ?? not sure where's you last sensor so I can't know which joint it is controlling on the shadow hand) ).
Comment by joseescobar60 on 2012-11-15:
watching the information that you gives to me, i saw that i have to publish in each joint the position, but i have just one sensor per finger(one sensor for 3 joints), i have to send the same information for each joint?, i know that the movement isn't exactly in my way, but i need to be near
Comment by Ugo on 2012-11-15:
You'll have either to map your sensor to the 3 joints of the finger, or you control only one joint with your sensor (for example the proximal joint (FJ3) ). This depends on the sensor's position. Just note that on our hand you can't control the distal and middle joint separately (coupled J0=J1+J2)
Comment by joseescobar60 on 2012-11-15:
sorry, i don't understand  you, when you said that i can't control the distal and middle joint, it moves just with the proximal one???
Comment by Ugo on 2012-11-15:
No. You can send a target to the middle + distal joints together for first, middle, ring and little finger. You can't control just the distal for example (same as a human hand). So if you send 2*pi/3 to FFJ0, FFJ1 will go to pi/3 and so will FFJ2. But you can send an other target to proximal FFJ3.
Comment by joseescobar60 on 2012-11-15:
ok, i understand, thak you, do you have any tutorial link or files of how to do the remapper, i'm trying but the information is a little poor, and i'm not a advance ros user, thank you!
Comment by Ugo on 2012-11-15:
Sorry no tutorial available for this. If you find the code to complex to your liking you can rewrite something from scratch as you just need to subscribe to your topic and publish to the controller command topics I indicated. Lots of documentation available on how to do this!
Comment by joseescobar60 on 2012-11-15:
Ugo one more thing, what kind of values recieve the controller, my glove gives values between 200-400, i have to condition the my values?
Comment by Ugo on 2012-11-15:
The controllers receive angles in radians so you'll have to calibrate your range.
Comment by joseescobar60 on 2012-11-20:
hello, again me! i have calibrated my glove in radians, now where i have to publish the info of the sensors? i have the values in different topics, one per finger... thank you!
Comment by Ugo on 2012-11-20:
As I said in some of the comments, I can't know how you'll map the data from your glove to our hand, this is for you to decide. To control the hand, you can publish to the command topics for each controller (a rostopic list | grep command when the simulator is running will give you a list of topics)
Comment by joseescobar60 on 2012-11-20:
i'm a little confused, yesterday and today i was working on my glove, now i have calibrated my glove in radians and i have the info in a multiarray topic, now i read something about a matrix and publishing in the controller, you could explain to me again and sorry for that.
Comment by joseescobar60 on 2012-11-20:
can i publish the radian values directly to the controller? or i have to do the remapper matrix first? Really thank you for your help!
Comment by Ugo on 2012-11-20:
You don't NEED to use the remapper, it was just an example to show you how we addressed a similar problem. In your case you can publish directly to the controllers.
Comment by joseescobar60 on 2012-11-22:
Hello Ugo, i want to thank you for your help, now my glove works very good with the shadow hand, i just have one mor question, when i move the fingers the shadow hand sometimes falls to the floor, how can i deactivate this?

