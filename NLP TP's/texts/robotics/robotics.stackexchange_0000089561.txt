Q:

Why doesn't gazebo publish /odom topic?

This is my launch file:
<launch>

  <param name="use_sim_time" value="true" />
  
  <param name="robot_description" command="$(find xacro)/xacro '$(find genius_description)/urdf/test.xacro'"/>

  <node name="state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>

  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" value="$(find genius_gazebo)/worlds/test.world" />
  </include>

  <node name="genius_spawn" pkg="gazebo_ros" type="spawn_model" output="screen"
   args="-urdf -param robot_description -model genius" />

   <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"
         respawn="false" output="screen">
  </node>
   <node pkg="rviz" type="rviz" name="rviz"/>

</launch> 

So as you can see, I am spawning gazebo but at the end I do not see /odom topic to be published. This is strange because this launch file worked earlier and now, no odom topic. Shouldn't gazebo publish /odom topic automatically?
Here is the gazebo plugin I am using:
<gazebo>
    <plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
      <alwaysOn>true</alwaysOn>
      <updateRate>30</updateRate>
          <legacyMode>false</legacyMode>
      <leftJoint>left_wheel_hinge</leftJoint>
      <rightJoint>right_wheel_hinge</rightJoint>
      <wheelSeparation>${chassisWidth+wheelWidth}</wheelSeparation>
      <wheelDiameter>${2*wheelRadius}</wheelDiameter>
      <torque>10</torque>
      <commandTopic>cmd_vel</commandTopic>
      <odometryTopic>odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <robotBaseFrame>base_link</robotBaseFrame>
      <rosDebugLevel>1</rosDebugLevel>
      <publishWheelTF>true</publishWheelTF>
      <publishWheelJointState>true</publishWheelJointState>
      <wheelTorque>20</wheelTorque>
    </plugin>
  </gazebo>

Originally posted by stevemartin on ROS Answers with karma: 361 on 2018-11-12
Post score: 1

Original comments
Comment by gvdhoorn on 2018-11-12:\

Shouldn't gazebo publish /odom topic automatically?

No, not as far as I know.
Do you load any plugins in your urdf/xacro?
Gazebo is basically a replacement for the hardware of your robot. You'll still need to load the necessary drivers (ie: plugins).
Comment by stevemartin on 2018-11-12:
@gvdhoorn I have updated my answer
Comment by PeteBlackerThe3rd on 2018-11-12:
Your launch file doesn't appear to be starting the differential_drive_controller. There should be a controller_manager/spawner node in there.
Comment by PeteBlackerThe3rd on 2018-11-12:
You're also starting two robot_state_publishers, possibly one of these is meant to be your controller_manager spawner.

A:

Okay, I found the solution. After making apt-get upgrade of my system, I was able to create an odom using gazebo. If you are spawining gazebo, odom MUST be created automatically.
Guys, just try sudo apt-get upgrade. For the comment below, yes, I have used the differential gazebo plugin.

Originally posted by stevemartin with karma: 361 on 2018-11-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by gvdhoorn on 2018-11-13:\

odom MUST be created automatically.

what do you mean by this? Without the plugin, Gazebo won't publish any odometry.
Comment by PeteBlackerThe3rd on 2018-11-13:
To answer your own question can you please explain to other uses how you solved your problem. If someone else can't read your answer and work out how to do the same thing then it won't be able to help anyone.

