Q:

How to fix unstable build on buildfarm for noetic because of CMP0048?

I have just released my package on Neotic and the buildfarm reports an unstable build on Ndev_* because of CMake warning CMP0048 than means that VERSION is not provided in the project().
From the console output:
16:09:34 CMake Warning (dev) at CMakeLists.txt:2 (project):
16:09:34   Policy CMP0048 is not set: project() command manages VERSION variables.
16:09:34   Run "cmake --help-policy CMP0048" for policy details.  Use the cmake_policy
16:09:34   command to set the policy and suppress this warning.
16:09:34 
16:09:34   The following variable(s) would be set to empty:
16:09:34 
16:09:34     CMAKE_PROJECT_VERSION
16:09:34     CMAKE_PROJECT_VERSION_MAJOR
16:09:34     CMAKE_PROJECT_VERSION_MINOR
16:09:34     CMAKE_PROJECT_VERSION_PATCH
16:09:34 This warning is for project developers.  Use -Wno-dev to suppress it.

I have checked other ROS packages and they don't seem to provide a version in their CMakeLists.txt nor set the CMP0048 policy explicitly.

Originally posted by rreignier on ROS Answers with karma: 544 on 2020-09-04
Post score: 3

A:

To avoid the warning with newer CMake versions you want to bump the minimum CMake version declared in the package. ROS packages for active distros use the following:
cmake_minimum_required(VERSION 3.0.2)

Originally posted by Dirk Thomas with karma: 16276 on 2020-09-04
This answer was ACCEPTED on the original site
Post score: 7

Original comments
Comment by rreignier on 2020-09-04:
Great, thank you!
Comment by Markus Bader on 2020-12-18:
Yes this works, but I am getting an error if I am using 3.0.2 with meta packages
Comment by sloretz on 2020-12-18:
If you're getting an error due to metapackages, it means the version of catkin_pkg is too old. Upgrade that sudo apt upgrade python3-catkin-pkg. You need at least version 0.4.16 so it has this fix: https://github.com/ros-infrastructure/catkin_pkg/pull/274

