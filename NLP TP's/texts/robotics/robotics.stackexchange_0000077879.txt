Q:

[SOLVED] How to publish two synchronized messages?

Hi,
I build a robot which has two encoders. I want the encoders to publish their count at the exact same time.
Right now, the subscriber node is using the ApproximateTimeSynchronizer, since with the TimeSynchronizer I get nothing (as expected).
So, my question is, is there a way to publish the 2 messages at the exact same time? I'm looking for a code solution.
(I build the robot using BBB, I'm not in a lab and I dont have signal generators, etc,.)
Thanks for the help,
Ron

Originally posted by ManMan88 on ROS Answers with karma: 44 on 2016-12-16
Post score: 0

Original comments
Comment by rbbg on 2016-12-16:
Not sure I completely understand the question, are the encoders both being published by the BeagleBone Black? (I take it that's what BBB stands for) Can you put them both in one message?

A:

Assuming your encoder messages have headers with time stamps, it doesn't really matter if the messages are actually published at the same time as long as the time stamp field is set to the same value for each.  The exact TimeSynchronizer will consider them to have happened at the same time provided they aren't received too far apart in time.
Alternatively publish the two encoders in a single message with two fields and skip the synchronizer subscriber.
If the encoders aren't in fact being captured at the same time at the hardware level then it is questionable to force the synchronization, you'd rather timestamp them as accurately as possible.  If your encoders later get turned into for example angles that are reflected in the tf tree you could use the tf interpolation to get reasonable intermediate angles that are decently accurate for a certain instant in time.

Originally posted by lucasw with karma: 8729 on 2016-12-16
This answer was ACCEPTED on the original site
Post score: 1

