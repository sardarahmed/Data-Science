Q:

Navigation stack tutorial: move_base crashes: bad_alloc thrown, gdb output attached

Hi,
This is a question that is related to
http://answers.ros.org/question/3800/error-on-navstack-with-p3dx-robot-aborting-because
It is a follow-up in the sense that in the previous question I proposed to use AMCL and a pre-made map as in the ROS tutorials. In the previous question, I was not using a pre-made map. I was using Gmapping and making the map as I went along. This time I am running AMCL, pretty similar to the tutorial described in:
http://www.ros.org/wiki/navigation/Tutorials/RobotSetup
While following this tutorial, the move_base node dies even before I send a navigation goal. Upon searching ROS-Answers for similar questions, I came across
http://answers.ros.org/question/316/move_base-node-dies-cant-tell-why
where the solution was investigated by running gdb and running a back trace. I have attempted the same, and the results of the back trace are attached.
My Procedure

Run Motor drivers
Run Laser drivers
Run relevant transforms
Run pre-made map through map server. [Map](http://www.2shared.com/file/of5o4m7n /ltlobby.html) YAML
Run Navigation : Launch file , costmap_common_params , local_costmap_params , global_costmap_params , base_local_planner .

After a few seconds, the terminal where I run the navigation launch file crashes. Here is the output of that terminal along with the gdb backtrace : output with backtrace
Other Relevant Data

Here are the tf frames: frames.pdf
Here is the rxgraph: http://tinypic.com/r/1621gmb/5
Here is the rxgraph with all topics: http://tinypic.com/r/30vbqbo/5

I hope this information is sufficient. Please ask me anything else that you might require.
Cheers!

Originally posted by Shanker on ROS Answers with karma: 259 on 2012-02-06
Post score: 1

A:

I would run top while you try to run this program to see how much of your system memory you are consuming. You're using a 4000x4000 pixel map, so this could easily use the majority of your RAM. Maybe I read it wrong, but it looked like you loaded this map more than once in the backtrace. This could explain your problem.

Originally posted by DimitriProsser with karma: 11163 on 2012-02-06
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Shanker on 2012-02-06:
I can see what you mean. However, I only used the command "rosrun map_server map_server *.yaml" once and before running the navigation launch file. I will try running top and see if it is because I'm using such a large map. Perhaps I could also make the map smaller? I'm not sure how, but i'll try.
Comment by Shanker on 2012-02-21:
Thanks for your answer Dimitri, it was indeed because the default parameters for gmapping, create a map that starts with 200X200 m. Ofcourse it is possible to change the start size of the map using gmapping parameters (xmin, ymax etc.). A small starting map size worked. Thanks!

