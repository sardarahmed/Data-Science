Q:

Code coverage with pytest-based ROS tests

Hi,
I'm trying to add code coverage to my pytests, following the instructions from code_coverage repo, except that I use python3-coverage.
I run my rostest with pytest using the Pytest integration instructions
So I run both prefixed with python3-coverage run -p.  The rostest file looks like:
<launch>    
  <node name="config_server" pkg="config_server" type="config_server_node.py"
        launch-prefix="python3-coverage run -p">
  </node>

  <param name="test_module" value="test_config_server.py"/>
  <test test-name="config_server_test" pkg="config_server" type="pytest_runner.py" time-limit="60.0"
        launch-prefix="python3-coverage run -p"/>
</launch>

As explained in the issue I opened on code coverage repo, I'm actually getting a coverage report on screen, but all files are empty!
nodes/config_server_node.py              7      0   100%
src/config_server/config_server.py     138      8    94%

(see the whole command line output on the issue for details)
Has anyone tried this before and has an example of how to do?
Thanks a lot

Originally posted by jorge on ROS Answers with karma: 2284 on 2022-08-09
Post score: 1

A:

My bad: Python code coverage goes to somewhere else
Python code coverage html-format: /home/jorge/.ros/htmlcov/index.html.

Originally posted by jorge with karma: 2284 on 2022-08-26
This answer was ACCEPTED on the original site
Post score: 0

