Q:

how to obtain declination data in turtlebot3?

I'm running roscore (kinetic) on turtlebot3 burger (using openCR i think). when launching turtlebot3_robot.launch, i only see /imu. However, the imu_compass driver(link here ) need /imu/declination, which i can't find anywhere in rostopic.
How can i obtain the data /imu/declination?

Originally posted by thangvip5432 on ROS Answers with karma: 5 on 2019-10-24
Post score: 0

A:

In the case of that sensor driver, declination can be passed in via parameter, see https://github.com/clearpathrobotics/imu_compass/blob/01f3236101434d5a203fb9c64712f7738bf00ff8/src/imu_compass.cpp#L46, where it defaults to 0.0 if the parameter is not present.
Declination is a function of your location on earth.  There are a couple online tools for computing your current declination based on your location such as: https://www.ngdc.noaa.gov/geomag/calculators/magcalc.shtml
If you want to compute declination online based on your location, you can use a software package such as https://github.com/space-physics/WMM2015 to parse the magnetic model and get the declination for your area.
In general, using the value computed via the website is sufficient unless your robot travels over long enough distances to see changes in the declination.

Originally posted by mjcarroll with karma: 6414 on 2019-10-24
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by thangvip5432 on 2019-10-24:
Thank you,  but what exactly is "long enough distance"?
Comment by mjcarroll on 2019-10-24:
At least the website reports declination accuracy to 30 minutes of arc (or 0.5 degrees).  Since 1 degree of latitude is about 110km apart, that means that the data is accurate to about 55 km (30ish miles). In that case, I would say that "far enough distance" is at least that far, but in practice probably much further.  Where I live, moving a whole degree latitude North or South yields a change in declination of about 0.1 degrees.
30 miles would take quite some time to cover on the turtlebot platform :)

