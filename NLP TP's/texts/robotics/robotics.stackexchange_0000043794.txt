Q:

How to solve 'undefined reference to symbol 'boost::signals::connection::~connection()'?

I followed rein.
And I run:
  svn co https://code.ros.org/svn/wg-ros-pkg/branches/trunk_diamondback/stacks/object_recognition/rein
  wget https://code.ros.org/trac/wg-ros-pkg/raw-attachment/ticket/5069/rein_cmakelists2.patch
  curl -O http://security.ubuntu.com/ubuntu/pool/universe/s/soci/libsoci-core-gcc_3.0.0+cvs20081223-4build2_amd64.deb
  curl -O http://security.ubuntu.com/ubuntu/pool/universe/s/soci/libsoci-core-gcc-dev_3.0.0+cvs20081223-4build2_amd64.deb
  sudo dpkg --install libsoci-core-gcc_3.0.0+cvs20081223-4build2_amd64.deb libsoci-core-gcc-dev_3.0.0+cvs20081223-4build2_amd64.deb
  

I use ubuntu 12.04 with ROS fuerte.
After I rosmake, it shows:
  sam@sam:~/code/ros/perception/recognition/rein$ rosmake
  [ rosmake ] rosmake starting...                                                                                                             
  [ rosmake ] No package specified.  Building ['rein']                                                                                        
  [ rosmake ] Packages requested are: ['rein']                                                                                                
  [ rosmake ] Logging to directory /home/sam/.ros/rosmake/rosmake_output-20120903-155414                                                      
  [ rosmake ] Expanded args ['rein'] to:
  ['rein']                                                                                             
  [rosmake-0] Starting >>> geometry_msgs [ make ]                                                                                             
  [rosmake-0] Finished <<< geometry_msgs  No Makefile in package geometry_msgs                                                                
  [rosmake-0] Starting >>> sensor_msgs [ make ]                                                                                               
  [rosmake-0] Finished <<< sensor_msgs  No Makefile in package sensor_msgs                                                                    
  [rosmake-0] Starting >>> roslang [ make ]                                                                                                   
  [rosmake-0] Finished <<< roslang  No Makefile in package roslang                                                                            
  [rosmake-0] Starting >>> roscpp [ make ]                                                                                                    
  [rosmake-0] Finished <<< roscpp  No Makefile in package roscpp                                                                              
  [rosmake-0] Starting >>> rosbuild [ make ]                                                                                                  
  [rosmake-0] Finished <<< rosbuild  No Makefile in package rosbuild                                                                          
  [rosmake-0] Starting >>> roslib [ make ]                                                                                                    
  [rosmake-0] Finished <<< roslib  No Makefile in package roslib                                                                              
  [rosmake-0] Starting >>> rosconsole [ make ]                                                                                                
  [rosmake-0] Finished <<< rosconsole  No Makefile in package rosconsole                                                                      
  [rosmake-0] Starting >>> pluginlib [ make ]                                                                                                 
  [rosmake-0] Finished <<< pluginlib ROS_NOBUILD in package pluginlib                                                                         
  [rosmake-0] Starting >>> rospy [ make ]                                                                                                     
  [rosmake-0] Finished <<< rospy  No Makefile in package rospy                                                                                
  [rosmake-0] Starting >>> bond [ make ]                                                                                                      
  [rosmake-0] Finished <<< bond ROS_NOBUILD in package bond                                                                                   
  [rosmake-0] Starting >>> smclib [ make ]                                                                                                    
  [rosmake-0] Finished <<< smclib ROS_NOBUILD in package smclib                                                                               
  [rosmake-0] Starting >>> bondcpp [ make ]                                                                                                   
  [rosmake-0] Finished <<< bondcpp ROS_NOBUILD in package bondcpp                                                                             
  [rosmake-0] Starting >>> nodelet [ make ]                                                                                                   
  [rosmake-0] Finished <<< nodelet ROS_NOBUILD in package nodelet                                                                             
  [rosmake-0] Starting >>> rosservice [ make ]                                                                                                
  [rosmake-0] Finished <<< rosservice  No Makefile in package rosservice                                                                      
  [rosmake-0] Starting >>> dynamic_reconfigure [ make ]                                                                                       
  [rosmake-0] Finished <<< dynamic_reconfigure ROS_NOBUILD in package dynamic_reconfigure                                                     
  [rosmake-0] Starting >>> bullet [ make ]                                                                                                    
  [rosmake-0] Finished <<< bullet ROS_NOBUILD in package bullet                                                                               
  [rosmake-0] Starting >>> angles [ make ]                                                                                                    
  [rosmake-0] Finished <<< angles ROS_NOBUILD in package angles                                                                               
  [rosmake-0] Starting >>> rostest [ make ]                                                                                                   
  [rosmake-0] Finished <<< rostest  No Makefile in package rostest                                                                            
  [rosmake-0] Starting >>> roswtf [ make ]                                                                                                    
  [rosmake-0] Finished <<< roswtf  No Makefile in package roswtf                                                                              
  [rosmake-0] Starting >>> message_filters [ make ]                                                                                           
  [rosmake-0] Finished <<< message_filters  No Makefile in package message_filters                                                            
  [rosmake-0] Starting >>> tf [ make ]                                                                                                        
  [rosmake-0] Finished <<< tf ROS_NOBUILD in package tf                                                                                       
  [rosmake-0] Starting >>> rosbag [ make ]                                                                                                    
  [rosmake-0] Finished <<< rosbag  No Makefile in package rosbag                                                                              
  [rosmake-0] Starting >>> std_msgs [ make ]                                                                                                  
  [rosmake-0] Finished <<< std_msgs  No Makefile in package std_msgs                                                                          
  [rosmake-0] Starting >>> nodelet_topic_tools [ make ]                                                                                       
  [rosmake-0] Finished <<< nodelet_topic_tools ROS_NOBUILD in package nodelet_topic_tools                                                     
  [rosmake-0] Starting >>> common_rosdeps [ make ]                                                                                            
  [rosmake-0] Finished <<< common_rosdeps ROS_NOBUILD in package common_rosdeps                                                               
  [rosmake-0] Starting >>> pcl_ros [ make ]                                                                                                   
  [rosmake-0] Finished <<< pcl_ros ROS_NOBUILD in package pcl_ros                                                                             
  [rosmake-0] Starting >>> opencv2 [ make ]                                                                                                   
  [rosmake-0] Finished <<< opencv2 ROS_NOBUILD in package opencv2                                                                             
  [rosmake-0] Starting >>> image_geometry [ make ]                                                                                            
  [rosmake-0] Finished <<< image_geometry ROS_NOBUILD in package image_geometry                                                               
  [rosmake-0] Starting >>> cv_bridge [ make ]                                                                                                 
  [rosmake-0] Finished <<< cv_bridge ROS_NOBUILD in package cv_bridge                                                                         
  [rosmake-0] Starting >>> image_transport [ make ]                                                                                           
  [rosmake-0] Finished <<< image_transport ROS_NOBUILD in package image_transport                                                             
  [rosmake-0] Starting >>> pcl [ make ]                                                                                                       
  [rosmake-0] Finished <<< pcl  No Makefile in package pcl                                                                                    
  [rosmake-0] Starting >>> rein [ make ]                                                                                                      
  [ rosmake ] Last 40 linesin: 99.3 sec ]                                                                          [ 1 Active 31/32 Complete ]
  {-------------------------------------------------------------------------------
    [ 51%] Generating ../src/rein/msg/_DetectionArray.py
    [ 51%] Generating ../src/rein/msg/_Mask.py
    [ 51%] Generating ../src/rein/msg/_Rect.py
    [ 51%] Generating ../src/rein/msg/__init__.py
    make[3]: Leaving directory `/home/sam/code/ros/perception/recognition/rein/build'
    [ 67%] Built target ROSBUILD_genmsg_py
    make[3]: Entering directory `/home/sam/code/ros/perception/recognition/rein/build'
    Scanning dependencies of target rospack_genmsg
    make[3]: Leaving directory `/home/sam/code/ros/perception/recognition/rein/build'
    [ 67%] Built target rospack_genmsg
    make[3]: Entering directory `/home/sam/code/ros/perception/recognition/rein/build'
    Scanning dependencies of target rosbuild_precompile
    make[3]: Leaving directory `/home/sam/code/ros/perception/recognition/rein/build'
    [ 67%] Built target rosbuild_precompile
    make[3]: Entering directory `/home/sam/code/ros/perception/recognition/rein/build'
    Scanning dependencies of target detection_displayer
    make[3]: Leaving directory `/home/sam/code/ros/perception/recognition/rein/build'
    make[3]: Entering directory `/home/sam/code/ros/perception/recognition/rein/build'
    [ 69%] Building CXX object CMakeFiles/detection_displayer.dir/src/tools/detection_displayer.o
    In file included from /home/sam/code/ros/perception/recognition/rein/src/tools/detection_displayer.cpp:48:0:
    /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h: In static member function 「static sensor_msgs::Image_<std::allocator<void> >::Ptr sensor_msgs::CvBridge::cvToImgMsg(const IplImage*, std::string)」:
    /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:408:55: 警告： 「static bool sensor_msgs::CvBridge::fromIpltoRosImage(const IplImage*, sensor_msgs::Image&, std::string)」 is deprecated (declared at /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:307) [-Wdeprecated-declarations]
    /home/sam/code/ros/perception/recognition/rein/src/tools/detection_displayer.cpp: In constructor 「DetectionDisplayer::DetectionDisplayer()」:
    /home/sam/code/ros/perception/recognition/rein/src/tools/detection_displayer.cpp:81:48: 警告： 「sensor_msgs::CvBridge::CvBridge()」 is deprecated (declared at /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:64) [-Wdeprecated-declarations]
    /home/sam/code/ros/perception/recognition/rein/src/tools/detection_displayer.cpp: In member function 「void DetectionDisplayer::detectionCallback(const ImageConstPtr&, const DetectionArrayConstPtr&)」:
    /home/sam/code/ros/perception/recognition/rein/src/tools/detection_displayer.cpp:116:26: 警告： 「sensor_msgs::CvBridge::CvBridge()」 is deprecated (declared at /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:64) [-Wdeprecated-declarations]
    /home/sam/code/ros/perception/recognition/rein/src/tools/detection_displayer.cpp:99:14: 警告： 未使用的變數 「frame_idx」 [-Wunused-variable]
    /home/sam/code/ros/perception/recognition/rein/src/tools/detection_displayer.cpp:152:8: 警告： 未使用的變數 「buf」 [-Wunused-variable]
    Linking CXX executable ../bin/detection_displayer
    /usr/bin/ld: CMakeFiles/detection_displayer.dir/src/tools/detection_displayer.o: undefined reference to symbol 'boost::signals::connection::~connection()'
    /usr/bin/ld: note: 'boost::signals::connection::~connection()' is defined in DSO /usr/lib/libboost_signals.so.1.46.1 so try adding it to the linker command line
    /usr/lib/libboost_signals.so.1.46.1: could not read symbols: Invalid operation
    collect2: ld 回傳 1
    make[3]: *** [../bin/detection_displayer] Error 1
    make[3]: Leaving directory `/home/sam/code/ros/perception/recognition/rein/build'
    make[2]: *** [CMakeFiles/detection_displayer.dir/all] Error 2
    make[2]: Leaving directory `/home/sam/code/ros/perception/recognition/rein/build'
    make[1]: *** [all] Error 2
    make[1]: Leaving directory `/home/sam/code/ros/perception/recognition/rein/build'
  -------------------------------------------------------------------------------}
  [ rosmake ] Output from build of package rein written to:                                                        [ 1 Active 31/32 Complete ]
  [ rosmake ]    /home/sam/.ros/rosmake/rosmake_output-20120903-155414/rein/build_output.log
  [rosmake-0] Finished <<< rein [FAIL] [ 99.33 seconds ]                                                                                      
  [ rosmake ] Halting due to failure in package rein. 
  [ rosmake ] Waiting for other threads to complete.                                     
  [ rosmake ] Results:                                                                                                                        
  [ rosmake ] Built 32 packages with 1 failures.                                                                                              
  [ rosmake ] Summary output to directory                                                                                                     
  [ rosmake ] /home/sam/.ros/rosmake/rosmake_output-20120903-155414                                                                           
  sam@sam:~/code/ros/perception/recognition/rein$                    

How to solve it?
Thank you~

Originally posted by sam on ROS Answers with karma: 2570 on 2012-09-02
Post score: 2

A:

To add a boost libraries to be linked with your ros code you need to add two lines in CMakeList.txt file:
# initilaize boost directory search
rosbuild_add_boost_directories()

# add a given boost library to be linked with your target
rosbuild_link_boost(your_target thread system signals)

In your particular case your second line should look like:
rosbuild_link_boost(detection_displayer signals)

just right after the line like:
rosbuild_add_executable(detection_displayer src/detection_displayer.cpp)

Originally posted by Jakub with karma: 1821 on 2012-09-02
This answer was ACCEPTED on the original site
Post score: 8

