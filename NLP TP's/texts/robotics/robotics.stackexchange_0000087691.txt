Q:

camera_calibration opens gui window but freezes

I'm trying to run the camera_calibration node. I run this command:
rosrun camera_calibration cameracalibrator.py --size 8x7 --square 0.023 --approximate=0.1 --no-service-check image:=/camera/color/image_raw

I see a window opening but then it freezes indefinitely. I tried to debug cameracalibrator.py and saw that the freeze occurs at the cv2.namedWindow("display", cv2.WINDOW_NORMAL) in the run() method of DisplayThread which is created in the OpenCVCalibrationNode init().   I have tried to move the cv2.namedWindow somewhere else but it also freezes. In fact after trying a few times the freeze transforms into a segmentation fault when executing the cv2.namedWindow statement.
Any idea what could the problem be?
I'm running Ubuntu 16.04,  ROS kinetic, opencv version is 3.3

Originally posted by martinakos on ROS Answers with karma: 38 on 2018-07-03
Post score: 1

A:

This was an opencv library version conflict, as I suspected. I had opencv 3.4 also in a development folder. Despite camera_calibration being built with the opencv 3.3 that came with ROS kinetic installation for some reason ldd showed a dependency to a lib in opencv 3.4. I think this dependency came through a thirdparty library built with opencv 3.4 and installed in the system. Interestingly enough other opencv calls in camera_calibration worked well but only showed the problem when opening a window.
I uninstalled opencv 3.4 and rebuild a bunch of libraries with ROS's opencv 3.3 and it worked.

Originally posted by martinakos with karma: 38 on 2018-07-06
This answer was ACCEPTED on the original site
Post score: 1

