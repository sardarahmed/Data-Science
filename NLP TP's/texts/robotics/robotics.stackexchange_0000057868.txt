Q:

PrimeSense RD1.09+USB3.0+Ubuntu

Hi,
I would like to ask if anyone has got to get the PrimeSense RD1.09 RGBD camera working with ROS when connected to a USB 3.0 port under Ubuntu. Right now I am using ROS Fuerte, Ubuntu 12.04.3 (Kernel 3.8.0-31) but cannot get the camera working on the USB 3.0 port (it does work when plugged into a USB 2.0 port). The camera is correctly recognised if I do lsusb. However, it shows the following error message when executing roslaunch openni_launch openni.launch:

[ INFO] [1394633879.104789250]: Number devices connected: 1
[ INFO] [1394633879.105068439]: 1. device on bus 003:02 is a PrimeSense Device (601) from PrimeSense (1d27) with serial id ''
[ INFO] [1394633879.106096703]: Searching for device with index = 1
[ INFO] [1394633879.521013406]: No matching device found.... waiting for devices. Reason: openni_wrapper::OpenNIDevice::OpenNIDevice(xn::Context&, const xn::NodeInfo&, const xn::NodeInfo&, const xn::NodeInfo&, const xn::NodeInfo&) @ /tmp/buildd/ros-fuerte-openni-camera-1.8.6/debian/ros-fuerte-openni-camera/opt/ros/fuerte/stacks/openni_camera/src/openni_device.cpp @ 61 : creating depth generator failed. Reason: Failed to set USB interface!
[ERROR] [1394633880.027343854]: Tried to advertise a service that is already advertised in this node [/camera/depth_registered/image_rect_raw/compressedDepth/set_parameters]
[ERROR] [1394633880.047435912]: Tried to advertise a service that is already advertised in this node [/camera/depth_registered/image_rect_raw/compressed/set_parameters]
[ERROR] [1394633880.069100524]: Tried to advertise a service that is already advertised in this node [/camera/depth_registered/image_rect_raw/theora/set_parameters]
terminate called after throwing an instance of 'openni_wrapper::OpenNIException'
  what():  unsigned int openni_wrapper::OpenNIDriver::updateDeviceList() @ /tmp/buildd/ros-fuerte-openni-camera-1.8.6/debian/ros-fuerte-openni-camera/opt/ros/fuerte/stacks/openni_camera/src/openni_driver.cpp @ 125 : enumerating image nodes failed. Reason: One or more of the following nodes could not be enumerated:
Image: PrimeSense/SensorV2/5.1.2.1: Failed to set USB interface!

Any hint on what I could do?
Thanks!
Edit: Sorry for the post duplicates, there seemed to be an error when I created it.

Originally posted by Tinrik on ROS Answers with karma: 51 on 2014-03-12
Post score: 0

Original comments
Comment by jbinney on 2014-03-12:
I've got almost the same setup, but using openni2_camera: https://github.com/ros-drivers/openni2_camera
It works mostly like openni_camera, so try that and see if it does the right thing.
Comment by Tinrik on 2014-03-12:
I'm absolutely new to ROS and I only know basically how to use openni_launch, nothing else. I have also installed hydro which comes with openni2-camera. Could you please tell me the commands to use openni2_camera? Thanks :)

A:

I finally solved it! For those who are also new to ROS, this is what I did:
First, install openni2. I believe you need Hydro or Groovy for that. As jbinney mentioned, openni2_camera works with USB 3.0. In particular I used openni2_launch:
 roslaunch openni2_launch openni2.launch
In order to see the images you need to use image_view but with different topics than it appears in the documentation. For example, to see the RGB images, I use
 rosrun image_view image_view image:=/camera/rgb/image_raw, instead of  rosrun image_view image_view image:=/camera/rgb/image_color as in the openni_launch wiki.
Thanks! :)

Originally posted by Tinrik with karma: 51 on 2014-03-12
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by simbaforrest on 2014-04-27:
For other people like me who encountered the similar issue and googled here, maybe you can try this:

sudo service udev reload

before you go for the openni2. It maybe just a usb issue.
I was using an Asus Xtion Pro and suddenly it won't connect anymore (showed the same error info in the console as mentioned in the question). I typed lsusb -v | grep PrimeSense and it got stuck there. So I tried: sudo service udev reload as suggested in this post and it worked again!
BTW, I'm working under Ubuntu 12.04 64bit, ROS fuerte, openni_launch.

