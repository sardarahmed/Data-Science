Q:

Stabilize the map => odom tf for localization

Hey ROS forum,
I just tried to add the tf transform to my robot to consider the map => odom transformation for better localization. Here, I use odom from the encoders, and the map data from the slam and gmapping.
I had a look in RVIZ and I could see, that the odom system is jumping very hard in the map coordinates. The odom system should drift with time for sure, but big jumps are too much to get a good localization.
Also the SLAM itself dosen´t work properly, the measured points differ much from the already located obstacles:
C:\fakepath\slam_problem.png
One problem might be, that my robot always spawns to the center again if it crashes into a wall etc.. But I don´t know how to correct that problem.
Do you have an idea how to solve that problem or did you have similar situations?
Thanks in advance!

Originally posted by Tima1995 on ROS Answers with karma: 17 on 2019-08-09
Post score: 0

Original comments
Comment by rmv24 on 2019-08-09:
I've tried using encoder odometry, and has given me bad results always. You could try using world odometry, that has given me decent results.
Comment by Tima1995 on 2019-08-14:
But don´t you get then perfect odometry data from the encoders?
I try to make my localization to run as realistic as possible. That´s why I used the encoder odometry there.
Thanks for your answer!

A:

I'm not sure I 100% follow your issue, but if I were to rephrase you can tell me if this is what you mean: you're running SLAM on a robot providing the map->odom transform and your robot is providing the odom->base_link transform via the encoders. When you're doing this in (what it appears to be simulation of a square, featureless room) your space, the robot is jumping around.
From looking at the photo provided, I have also seen this of gmapping when you put it in a regular, featureless environment like a square room with nothing in it. You need to add some features or make the environment not exactly the same to the simulation for gmapping to grab onto things correctly.

Originally posted by stevemacenski with karma: 8272 on 2019-08-09
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Tima1995 on 2019-08-14:
Sorry for the late comment and thanks for the answer! Yes you perfectly got what I mean. And I will try another world with some additional objects.
When I did that I will tell you if it was helpful.
Comment by stevemacenski on 2019-08-14:
Awesome, can you mark the answer as correct so we can remove it from the unanswered questions queue

