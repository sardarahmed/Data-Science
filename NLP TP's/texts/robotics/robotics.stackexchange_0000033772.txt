Q:

how to rebuild/update graspit-simulator package

Hi all,
I downloaded graspit simulator from debs.
sudo apt-get install ros-diamondback-graspit-simulator

It runs well.
Now I changed part of the source code and want to rebuild the package graspit. I added the patch file "new.patch" to the Makefile.graspit.tarball in the root directory of graspit package:

TARBALL_PATCH=graspit/graspit_project.patch graspit/graspit_dbase.patch

to

TARBALL_PATCH=graspit/graspit_project.patch graspit/graspit_dbase.patch graspit/new.patch

I thought i can just rebuild the package by typing rosmake graspit. But it didn't build saying there is a ROS_BUILD there. So I removed this file to allow rosmake to take effect. But then it goes:
[rosmake-0] Starting >>> graspit [ make ]                                       
[ rosmake ] All 2 linesgraspit: 0.0 sec ]            [ 1 Active 45/46 Complete ]
{-------------------------------------------------------------------------------
  mkdir: cannot create directory `build': Permission denied
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package graspit written to:
[ rosmake ]    /home/vincent/.ros/rosmake/rosmake_output-20110820-164256/graspit/build_output.log
[rosmake-0] Finished <<< graspit [FAIL] [ 0.05 seconds ]        

Can someone help me out with this and tell me what's the standard procedure of patching and rebuilding a ROS package? Thanks.

Originally posted by vincent on ROS Answers with karma: 311 on 2011-08-20
Post score: 0

A:

Using the following;
rosmake --pre-clean

usually does the job for the packages in which ROS_NO_BUILD tag exists, which is most of the 'big' packages. The permission error is just because the package exists somewhere like /opt/.../ which is protected.
To patch the package, I would recommend checking it out onto a folder where permissions are not an issue like around the $HOME or so, then add that path to the ROS_PACKAGE_PATH like so;
export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:<put the path here>

or do it the bashrc way.

Originally posted by makokal with karma: 1295 on 2011-08-20
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by vincent on 2011-08-21:
another question, still in the /opt/... path, I tried sudo rosmake, it said cannot find rospack command. So does that mean 'sudo' doesn't apply to all the commands?

