Q:

error installing openni_kinect from source code

I was trying to do the source-based installation of openni_kinect following the instructions here.
But when I typed make, it stopped with some errors:
g++ -MD -MP -MT "./Release/XnSensorImageGenerator.d Release/XnSensorImageGenerator.o" -c -malign-double -O2 -DNDEBUG -I/usr/include/openni -I../../../../Include -I../../../../Source -I../../../../Source/XnCommon -DXN_DEVICE_EXPORTS -fPIC -fvisibility=hidden -o Release/XnSensorImageGenerator.o ../../../../Source/XnDeviceSensorV2/XnSensorImageGenerator.cpp
../../../../Source/XnDeviceSensorV2/XnSensorImageGenerator.cpp: In member function ‘virtual XnStatus XnExportedSensorImageGenerator::EnumerateProductionTrees(xn::Context&, xn::NodeInfoList&, xn::EnumerationErrors*)’:
../../../../Source/XnDeviceSensorV2/XnSensorImageGenerator.cpp:397: error: no matching function for call to ‘xn::Context::CreateProductionTree(xn::NodeInfo&, xn::Device&)’
/usr/include/openni/XnCppWrapper.h:4827: note: candidates are: XnStatus xn::Context::CreateProductionTree(xn::NodeInfo&)
make[3]: *** [Release/XnSensorImageGenerator.o] Error 1
make[3]: Leaving directory `/home/vincent/drivers/ps_engine/build/ps_engine/Platform/Linux-x86/Build/XnDeviceSensorV2'
make[2]: *** [XnDeviceSensorV2] Error 2

make[2]: Leaving directory `/home/vincent/drivers/ps_engine/build/ps_engine/Platform/Linux-x86/Build'
make[1]: *** [installed] Error 2
make[1]: Leaving directory `/home/vincent/drivers/ps_engine'
make: *** [ps_engine_lib] Error 2

Has someone had the same problems before?

Originally posted by vincent on ROS Answers with karma: 311 on 2011-08-26
Post score: 0

A:

Hi,
I had the same problem yesterday, I've just modified XnSensorImageGenerator.cpp in line 397.
nRetVal = context.CreateProductionTree(sensorNode);//, sensor);

and it works !!
PS1 : you are trying to build the drivers in your /home why not build it directly in your ROS_PATH/openni_kinect, I didn't get an error by doing this.
PS2 : If you are doing the same thing that I have done, I think you'll get another error in @sed, you must remove the "@", in the Makefile.

Originally posted by Anas with karma: 126 on 2011-08-27
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by vincent on 2011-09-01:
do you have any clue why this happens?
Comment by vincent on 2011-09-01:
[ros.openni_camera./openni_node1] [2011-09-01 22:24:28,088] [thread 0x7fab4d9d37c0]: [INFO] [/openni_node1] 2. device on bus 000:00 is a  (4aa4) from  a c/rosout (7fab) with serial id ''
Comment by vincent on 2011-09-01:
[ros.openni_camera./openni_node1] [2011-09-01 22:24:28,088] [thread 0x7fab4d9d37c0]: [INFO] [/openni_node1] 1. device on bus 001:23 is a Xbox NUI Camera (2ae) from Microsoft (45e) with serial id 'Device1'
Comment by vincent on 2011-09-01:
[ros.openni_camera./openni_node1] [2011-09-01 22:24:28,087] [thread 0x7fab4d9d37c0]: [INFO] [/openni_node1] Number devices connected: 1171354718
Comment by vincent on 2011-09-01:
[roscpp_internal] [2011-09-01 22:24:26,652] [thread 0x7fab40861700]: [DEBUG] Connection: Creating TransportSubscriberLink for topic [/rosout] connected to [callerid=[/rosout] address=[TCPROS connection to [127.0.1.1:41762 on socket 16]]]
Comment by vincent on 2011-09-01:
[roscpp_internal] [2011-09-01 22:24:26,652] [thread 0x7fab40861700]: [DEBUG] TCPROS received a connection from [127.0.1.1:41762]
Comment by vincent on 2011-09-01:
[roscpp_internal] [2011-09-01 22:24:26,651] [thread 0x7fab40861700]: [DEBUG] Accepted connection on socket [7], new socket [16]
Comment by vincent on 2011-09-01:
[roscpp_internal] [2011-09-01 22:24:26,437] [thread 0x7fab4d9d37c0]: [DEBUG] XML-RPC call [getParam] returned an error (-1): [Parameter [/openni_node1/num_worker_threads] is not set]
Comment by vincent on 2011-09-01:
[roscpp_internal] [2011-09-01 22:24:26,424] [thread 0x7fab4d9d37c0]: [DEBUG] Started node [/openni_node1], pid [4221], bound on [vincent-desktop], xmlrpc port [34971], tcpros port [50368], logging to [/home/vincent/.ros/log/527aaee6-d4ff-11e0-8042-d4856407c2d5/openni_node1-1.log], using [sim] time
Comment by vincent on 2011-09-01:
cont'd: the log file says: [roscpp_internal] [2011-09-01 22:24:26,403] [thread 0x7fab4d9d37c0]: [DEBUG] UDPROS server listening on port [48266]
[roscpp_internal] [2011-09-01 22:24:26,423] [thread 0x7fab4d9d37c0]: [DEBUG] Publisher update for [/clock]:  already have these connections:
Comment by vincent on 2011-09-01:
thanks, I was using openni_kinect downloaded from debs which runs well. I just want to try the source code version to see if it gives better performance. But even though it compiles now, i got errors with roslaunch openni_camera openni_node.launch.

