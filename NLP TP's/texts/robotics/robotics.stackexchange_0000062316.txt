Q:

move_base launch fails due to: cannot marshal None unless allow_none is enabled

Dear all,
I was following the navigation tutorial for ROS Hydro installed on my UDOO board robot.
I follow the tutorial on the Navigation ROS Wiki but, launching the move_base.launch file, I have a
cannot marshal None unless allow_none is enabled
error.
Those are my yaml files:
base_local_planner_params.yaml
TrajectoryPlannerROS:
  max_vel_x: 0.45
  min_vel_x: 0.1
  max_rotational_vel: 1.0
  min_in_place_rotational_vel: 0.4

  acc_lim_th: 3.2
  acc_lim_x: 2.5
  acc_lim_y: 2.5

  holonomic_robot: false

local_costmap_params.yaml
local_costmap:
  global_frame: odom
  robot_base_frame: base_link
  update_frequency: 5.0
  publish_frequency: 2.0
  static_map: false
  rolling_window: true
  width: 6.0
  height: 6.0
  resolution: 0.05

costmap_common_params.yaml
obstacle_range: 2.5
raytrace_range: 3.0
robot_radius: 0.30
inflation_radius: 0.55
observation_sources: laser_scan_sensor
laser_scan_sensor: {sensor_frame: base_laser, data_type: LaserScan, topic; laser_scan, marking: true, clearing: true}

global_costmap_params.yaml
global_costmap:
  global_frame: /map
  robot_base_frame: base_link
  update_frequency: 5.0
  static_map: false

amcl_diff.launch:
<launch>
  <node pkg="amcl" type="amcl" name="amcl" output="screen">
    <!-- Publish scans from best pose at a max of 10 Hz -->
    <param name="odom_model_type" value="diff"/>
    <param name="odom_alpha5" value="0.1"/>
    <param name="transform_tolerance" value="0.2" />
    <param name="gui_publish_rate" value="10.0"/>
    <param name="laser_max_beams" value="30"/>
    <param name="min_particles" value="500"/>
    <param name="max_particles" value="5000"/>
    <param name="kld_err" value="0.05"/>
    <param name="kld_z" value="0.99"/>
    <param name="odom_alpha1" value="0.2"/>
    <param name="odom_alpha2" value="0.2"/>
    <!-- translation std dev, m -->
    <param name="odom_alpha3" value="0.8"/>
    <param name="odom_alpha4" value="0.2"/>
    <param name="laser_z_hit" value="0.5"/>
    <param name="laser_z_short" value="0.05"/>
    <param name="laser_z_max" value="0.05"/>
    <param name="laser_z_rand" value="0.5"/>
    <param name="laser_sigma_hit" value="0.2"/>
    <param name="laser_lambda_short" value="0.1"/>
    <param name="laser_lambda_short" value="0.1"/>
    <param name="laser_model_type" value="likelihood_field"/>
    <!-- <param name="laser_model_type" value="beam"/> -->
    <param name="laser_likelihood_max_dist" value="2.0"/>
    <param name="update_min_d" value="0.2"/>
    <param name="update_min_a" value="0.5"/>
    <param name="odom_frame_id" value="odom"/>
    <param name="resample_interval" value="1"/>
    <param name="transform_tolerance" value="0.1"/>
    <param name="recovery_alpha_slow" value="0.0"/>
    <param name="recovery_alpha_fast" value="0.0"/>
  </node>
</launch>

and finally the move_base.launch
<launch>

  <include file="$(find geduino_navigation)/launch/amcl_diff.launch" />

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find geduino_navigation)/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find geduino_navigation)/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find geduino_navigation)/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find geduino_navigation)/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find geduino_navigation)/base_local_planner_params.yaml" command="load" />
  </node>

</launch>

When I try to launch move_base.launch I get this error message:
[roslaunch][INFO] 2014-09-03 07:00:27,886: Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
[roslaunch][INFO] 2014-09-03 07:00:27,898: Done checking log file disk usage. Usage is <1GB.
[roslaunch][INFO] 2014-09-03 07:00:27,900: roslaunch starting with args ['/opt/ros/hydro/bin/roslaunch', 'geduino_navigation', 'move_base.launch']
[roslaunch][INFO] 2014-09-03 07:00:27,900: roslaunch env is {'ROS_DISTRO': 'hydro', 'LESSOPEN': '| /usr/bin/lesspipe %s', 'HUSHLOGIN': 'FALSE', 'CPATH': '/home/udoo/ros/devel/include:/opt/ros/hydro/include', 'LOGNAME': 'udoo', 'USER': 'udoo', 'HOME': '/home/udoo', 'PATH': '/home/udoo/ros/devel/bin:/opt/ros/hydro/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games', 'ROS_PACKAGE_PATH': '/home/udoo/ros/src:/opt/ros/hydro/share:/opt/ros/hydro/stacks', 'CMAKE_PREFIX_PATH': '/home/udoo/ros/devel:/opt/ros/hydro', 'LD_LIBRARY_PATH': '/home/udoo/ros/devel/lib:/opt/ros/hydro/lib', 'LANG': 'C', 'TERM': 'linux', 'SHELL': '/bin/bash', 'LANGUAGE': 'C', 'SHLVL': '1', 'ROS_LOG_FILENAME': '/home/udoo/.ros/log/fc4df7ea-3337-11e4-b578-7cdd9047677b/roslaunch-geduino-3197.log', 'ROS_ETC_DIR': '/opt/ros/hydro/etc/ros', 'PYTHONPATH': '/home/udoo/ros/devel/lib/python2.7/dist-packages:/opt/ros/hydro/lib/python2.7/dist-packages', 'ROS_ROOT': '/opt/ros/hydro/share/ros', 'PKG_CONFIG_PATH': '/home/udoo/ros/devel/lib/pkgconfig:/opt/ros/hydro/lib/pkgconfig', 'LC_ALL': 'C', 'ROS_TEST_RESULTS_DIR': '/home/udoo/ros/build/test_results', '_': '/opt/ros/hydro/bin/roslaunch', 'CATKIN_TEST_RESULTS_DIR': '/home/udoo/ros/build/test_results', 'LESSCLOSE': '/usr/bin/lesspipe %s %s', 'LC_MESSAGES': 'POSIX', 'OLDPWD': '/home/udoo', 'PWD': '/home/udoo/ros', 'ROS_MASTER_URI': 'http://localhost:11311', 'MAIL': '/var/mail/udoo', 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:'}
[roslaunch][INFO] 2014-09-03 07:00:27,901: starting in server mode
[roslaunch.parent][INFO] 2014-09-03 07:00:27,902: starting roslaunch parent run
[roslaunch][INFO] 2014-09-03 07:00:27,903: loading roscore config file /opt/ros/hydro/etc/ros/roscore.xml
[roslaunch][INFO] 2014-09-03 07:00:28,360: Added core node of type [rosout/rosout] in namespace [/]
[roslaunch.config][INFO] 2014-09-03 07:00:28,361: loading config file /home/udoo/ros/src/geduino_navigation/launch/move_base.launch
[roslaunch][INFO] 2014-09-03 07:00:28,507: Added node of type [amcl/amcl] in namespace [/]
[roslaunch][INFO] 2014-09-03 07:00:28,678: Added node of type [move_base/move_base] in namespace [/]
[roslaunch][INFO] 2014-09-03 07:00:28,679: ... selected machine [] for node of type [amcl/amcl]
[roslaunch][INFO] 2014-09-03 07:00:28,679: ... selected machine [] for node of type [move_base/move_base]
[roslaunch.pmon][INFO] 2014-09-03 07:00:28,682: start_process_monitor: creating ProcessMonitor
[roslaunch.pmon][INFO] 2014-09-03 07:00:28,683: created process monitor <ProcessMonitor(ProcessMonitor-1, initial daemon)>
[roslaunch.pmon][INFO] 2014-09-03 07:00:28,684: start_process_monitor: ProcessMonitor started
[roslaunch.parent][INFO] 2014-09-03 07:00:28,685: starting parent XML-RPC server
[roslaunch.server][INFO] 2014-09-03 07:00:28,686: starting roslaunch XML-RPC server
[roslaunch.server][INFO] 2014-09-03 07:00:28,686: waiting for roslaunch XML-RPC server to initialize
[xmlrpc][INFO] 2014-09-03 07:00:28,687: XML-RPC server binding to 0.0.0.0:0
[xmlrpc][INFO] 2014-09-03 07:00:28,688: Started XML-RPC server [http://geduino:55112/]
[xmlrpc][INFO] 2014-09-03 07:00:28,688: xml rpc node: starting XML-RPC server
[roslaunch][INFO] 2014-09-03 07:00:28,702: started roslaunch server http://geduino:55112/
[roslaunch.parent][INFO] 2014-09-03 07:00:28,702: ... parent XML-RPC server started
[roslaunch][INFO] 2014-09-03 07:00:28,766: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:28,768: auto-starting new master
[roslaunch][INFO] 2014-09-03 07:00:28,770: create_master_process: rosmaster, /opt/ros/hydro/share/ros, 11311
[roslaunch][INFO] 2014-09-03 07:00:28,770: process[master]: launching with args [['rosmaster', '--core', '-p', '11311']]
[roslaunch.pmon][INFO] 2014-09-03 07:00:28,771: ProcessMonitor.register[master]
[roslaunch.pmon][INFO] 2014-09-03 07:00:28,772: ProcessMonitor.register[master] complete
[roslaunch][INFO] 2014-09-03 07:00:28,772: process[master]: starting os process
[roslaunch][INFO] 2014-09-03 07:00:28,773: process[master]: start w/ args [['rosmaster', '--core', '-p', '11311', '__log:=/home/udoo/.ros/log/fc4df7ea-3337-11e4-b578-7cdd9047677b/master.log']]
[roslaunch][INFO] 2014-09-03 07:00:28,774: process[master]: cwd will be [/home/udoo/.ros]
[roslaunch][INFO] 2014-09-03 07:00:28,795: process[master]: started with pid [3210]
[roslaunch][INFO] 2014-09-03 07:00:28,797: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:28,899: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,001: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,103: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,205: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,307: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,409: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,511: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,518: master.is_running[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,523: ROS_MASTER_URI=http://localhost:11311
[roslaunch][INFO] 2014-09-03 07:00:29,530: setting /run_id to fc4df7ea-3337-11e4-b578-7cdd9047677b
[roslaunch][INFO] 2014-09-03 07:00:29,538: setting /roslaunch/uris/host_geduino__55112' to http://geduino:55112/
[roslaunch][INFO] 2014-09-03 07:00:29,548: ... preparing to launch node of type [rosout/rosout]
[roslaunch][INFO] 2014-09-03 07:00:29,548: create_node_process: package[rosout] type[rosout] machine[Machine(name[] env_loader[None] address[localhost] ssh_port[22] user[None] assignable[True] timeout[10.0])] master_uri[http://localhost:11311]
[roslaunch][INFO] 2014-09-03 07:00:29,549: process[rosout-1]: env[{'ROS_DISTRO': 'hydro', 'LESSOPEN': '| /usr/bin/lesspipe %s', 'HUSHLOGIN': 'FALSE', 'CPATH': '/home/udoo/ros/devel/include:/opt/ros/hydro/include', 'LOGNAME': 'udoo', 'USER': 'udoo', 'HOME': '/home/udoo', 'PATH': '/home/udoo/ros/devel/bin:/opt/ros/hydro/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games', 'ROS_PACKAGE_PATH': '/home/udoo/ros/src:/opt/ros/hydro/share:/opt/ros/hydro/stacks', 'CMAKE_PREFIX_PATH': '/home/udoo/ros/devel:/opt/ros/hydro', 'ROS_LOG_FILENAME': '/home/udoo/.ros/log/fc4df7ea-3337-11e4-b578-7cdd9047677b/roslaunch-geduino-3197.log', 'LANG': 'C', 'TERM': 'linux', 'SHELL': '/bin/bash', 'LANGUAGE': 'C', 'SHLVL': '1', 'LD_LIBRARY_PATH': '/home/udoo/ros/devel/lib:/opt/ros/hydro/lib', 'ROS_MASTER_URI': 'http://localhost:11311', 'PYTHONPATH': '/home/udoo/ros/devel/lib/python2.7/dist-packages:/opt/ros/hydro/lib/python2.7/dist-packages', 'ROS_ROOT': '/opt/ros/hydro/share/ros', 'PKG_CONFIG_PATH': '/home/udoo/ros/devel/lib/pkgconfig:/opt/ros/hydro/lib/pkgconfig', 'LC_ALL': 'C', 'ROS_TEST_RESULTS_DIR': '/home/udoo/ros/build/test_results', '_': '/opt/ros/hydro/bin/roslaunch', 'CATKIN_TEST_RESULTS_DIR': '/home/udoo/ros/build/test_results', 'LESSCLOSE': '/usr/bin/lesspipe %s %s', 'LC_MESSAGES': 'POSIX', 'OLDPWD': '/home/udoo', 'PWD': '/home/udoo/ros', 'ROS_ETC_DIR': '/opt/ros/hydro/etc/ros', 'MAIL': '/var/mail/udoo', 'LS_COLORS': 'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:'}]
[roslaunch][INFO] 2014-09-03 07:00:29,683: process[rosout-1]: args[[u'/opt/ros/hydro/lib/rosout/rosout', u'__name:=rosout']]
[roslaunch][INFO] 2014-09-03 07:00:29,684: ... created process [rosout-1]
[roslaunch.pmon][INFO] 2014-09-03 07:00:29,684: ProcessMonitor.register[rosout-1]
[roslaunch.pmon][INFO] 2014-09-03 07:00:29,685: ProcessMonitor.register[rosout-1] complete
[roslaunch][INFO] 2014-09-03 07:00:29,685: ... registered process [rosout-1]
[roslaunch][INFO] 2014-09-03 07:00:29,686: process[rosout-1]: starting os process
[roslaunch][INFO] 2014-09-03 07:00:29,687: process[rosout-1]: start w/ args [[u'/opt/ros/hydro/lib/rosout/rosout', u'__name:=rosout', u'__log:=/home/udoo/.ros/log/fc4df7ea-3337-11e4-b578-7cdd9047677b/rosout-1.log']]
[roslaunch][INFO] 2014-09-03 07:00:29,687: process[rosout-1]: cwd will be [/home/udoo/.ros]
[roslaunch][INFO] 2014-09-03 07:00:29,700: process[rosout-1]: started with pid [3223]
[roslaunch][INFO] 2014-09-03 07:00:29,703: ... successfully launched [rosout-1]
[roslaunch][INFO] 2014-09-03 07:00:29,706: load_parameters starting ...
[roslaunch][ERROR] 2014-09-03 07:00:29,714: load_parameters: unable to set parameters (last param was [/move_base/TrajectoryPlannerROS/min_in_place_rotational_vel=0.4]): cannot marshal None unless allow_none is enabled
[roslaunch.pmon][INFO] 2014-09-03 07:00:29,859: ProcessMonitor.shutdown <ProcessMonitor(ProcessMonitor-1, started daemon 731092080)>
[roslaunch.pmon][INFO] 2014-09-03 07:00:29,888: ProcessMonitor._post_run <ProcessMonitor(ProcessMonitor-1, started daemon 731092080)>
[roslaunch.pmon][INFO] 2014-09-03 07:00:29,889: ProcessMonitor._post_run <ProcessMonitor(ProcessMonitor-1, started daemon 731092080)>: remaining procs are [<roslaunch.nodeprocess.LocalProcess object at 0x809070>, <roslaunch.nodeprocess.LocalProcess object at 0x7f2e50>]
[roslaunch.pmon][INFO] 2014-09-03 07:00:29,894: ProcessMonitor exit: killing rosout-1
[roslaunch][INFO] 2014-09-03 07:00:29,895: [rosout-1] killing on exit
[roslaunch][INFO] 2014-09-03 07:00:29,898: process[rosout-1]: killing os process with pid[3223] pgid[3223]
[roslaunch][INFO] 2014-09-03 07:00:29,899: [rosout-1] sending SIGINT to pgid [3223]
[roslaunch][INFO] 2014-09-03 07:00:29,899: [rosout-1] sent SIGINT to pgid [3223]
[roslaunch][INFO] 2014-09-03 07:00:30,201: process[rosout-1]: SIGINT killed with return value 0
[roslaunch.pmon][INFO] 2014-09-03 07:00:30,201: ProcessMonitor exit: killing master
[roslaunch][INFO] 2014-09-03 07:00:30,202: [master] killing on exit
[roslaunch][INFO] 2014-09-03 07:00:30,205: process[master]: killing os process with pid[3210] pgid[3210]
[roslaunch][INFO] 2014-09-03 07:00:30,206: [master] sending SIGINT to pgid [3210]
[roslaunch][INFO] 2014-09-03 07:00:30,209: [master] sent SIGINT to pgid [3210]
[roslaunch][INFO] 2014-09-03 07:00:30,415: process[master]: SIGINT killed with return value 0
[roslaunch.pmon][INFO] 2014-09-03 07:00:30,416: ProcessMonitor exit: cleaning up data structures and signals
[roslaunch.pmon][INFO] 2014-09-03 07:00:30,416: ProcessMonitor exit: pmon has shutdown
[rospy.core][INFO] 2014-09-03 07:00:30,425: signal_shutdown [atexit]

I checked my code several times for tabs, ,missing spaces on yaml file, namespace usage but I was not able to find a fix.
Can someone help me to fix it?
Thanks a lot
Alessandro

Originally posted by afranceson on ROS Answers with karma: 497 on 2014-09-03
Post score: 3

Original comments
Comment by afranceson on 2014-09-03:
Wrong reason. The right reason to close this question is RESOLVED.
Comment by ahendrix on 2014-09-03:
You can also click the check box next to my answer to mark it as the correct answer.

A:

I don't see anything obvious wrong with your parameter files.
This sort of error usually happens when there's a missing parameter somewhere. The best way to narrow it down is to start commenting out the <rosparam> lines in your move_base launch file until you find the line that's causing problems, and then take another look at that file to figure out why it fails to load.

Originally posted by ahendrix with karma: 47576 on 2014-09-03
This answer was ACCEPTED on the original site
Post score: 3

