Q:

environment_server refuses to send planning request to ompl

I am having problems with the motion_planning stack in Diamondback, I just finished converting all my C-Turtle code and configuration files and it looks like everything starts up fine, all the lower level pieces work OK by themselves (e.g. IK, FK, joint_trajectory_action, ompl, etc.). But when I try to use the move_arm stack it refuses to plan a path. It looks like environment_server refuses to send a planning request to ompl planner because "Robot pose not updated in the last 0.000000 seconds" (see console output below):

[ INFO] [1308180532.215709962]: Received new goal
[ INFO] [1308180533.529347867]: Displaying move arm joint goal.
[ INFO] [1308180533.874078636]: Constraint violated:: Joint name:shoulder_pitch_joint, value: 0.214906, Constraint: -1.650000, tolerance_above: 0.100000, tolerance_below: 0.100000
[ WARN] [1308180533.874653870]: State violates goal constraints.

[ WARN] [1308180534.182050992]: Environment is not safe for motion: Robot pose not updated in the last 0.000000 seconds
[ WARN] [1308180534.182261629]: Environment is not safe. Will not issue request for planning

How would I go about fixing this? I don't really understand the problem, it just says the robot pose was not updated for 0.000000 seconds, which sounds like a very small amount of time.

Originally posted by arebgun on ROS Answers with karma: 2121 on 2011-06-15
Post score: 1

A:

I found the problem! I did not set a tf_safety_timeout parameter for the environment_server node which defaults to 0, setting that to 1 solved my problem.

Originally posted by arebgun with karma: 2121 on 2011-06-15
This answer was ACCEPTED on the original site
Post score: 1

