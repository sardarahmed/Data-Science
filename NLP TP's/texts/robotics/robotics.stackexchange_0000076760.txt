Q:

NameError: global name 'NAME' is not defined 

Hi people! :)  i am listening GPS's data and i want use them in another part of my code, for do Path Planing, but when I try to use them, it give me back this error
I defined variable global (global Lon, Lat) in many places like inside of def listener(), def backlatitud(): and def backlongitud() and it give back the same error.
Traceback (most recent call last):
  File "/home/pi/ros_catkin_ws/src/ceres_pkg/src/Controlador.py", line 25, in <module>
    listener()
  File "/home/pi/ros_catkin_ws/src/ceres_pkg/src/Controlador.py", line 20, in listener
    print Lat
NameError: global name 'Lat' is not defined

This is my code:
#!/usr/bin/env python
import rospy
from std_msgs.msg import String
global Lon, Lat

def backlatitud(data1):
    Lat = float(data1.data)
    #rospy.loginfo('Latitud %s', data1.data)
    return;

def backlongitud(data):
    Lon = float(data.data)
    #rospy.loginfo('longitud %s', Lon)
    return;

def listener():
    rospy.init_node('listener', anonymous=True)
    rospy.Subscriber("/latitud", String, backlatitud)
    rospy.Subscriber("/longitud", String, backlongitud)
    print Lat
    print Lon
    rospy.spin()
    
if __name__ == '__main__':
    listener()

Originally posted by DannyMB on ROS Answers with karma: 77 on 2016-10-13
Post score: 0

Original comments
Comment by gvdhoorn on 2016-10-13:
Please format code & console copy/pastes using the Preformatted Text button (the one with 101010 on it) in the future. That makes things much easier to read. Thanks.
Comment by gvdhoorn on 2016-10-13:
Also: how is this related to NameError: global name 'NAME' is not defined?

A:

In your listener() function, Lat and Lon are being accessed prior to any initialisation. If you remove the two print statements before rospy.spin(), your code should work fine.

Originally posted by Mani with karma: 1704 on 2016-10-13
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by DannyMB on 2016-10-13:
Yes, that work fine, but I need work with this variables (Lat and Lon) in another function, how do I call them?
for example
def function():
LatNew = 2 * Lat
LonNew = 2 * Lon
Print LatNew
Print LonNew
Comment by gvdhoorn on 2016-10-14:
I'd recommend you use a class, instead of a flat file with a set of free functions. That would work-around all the issues you are having.
Comment by DannyMB on 2016-10-18:
thanks @gvdhoom that's true, I did include a class, look at my final code
C:\fakepath\Captura.JPG
Comment by gvdhoorn on 2016-10-19:
Please don't use screenshots to post what is essentially text.

