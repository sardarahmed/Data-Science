Q:

How do I only run tests for only one package?

catkin_make run_tests --pkg costmap_2d seems a likely candidate but doesn't work.

Originally posted by David Lu on ROS Answers with karma: 10932 on 2013-05-12
Post score: 12

A:

Good question!
I didn't know either, but I did some digging, and here's what I found:
catkin_make run_tests_packageName
catkin_make run_tests_packageName_gtest_testTarget

Read on for more details...
As documented here,

Catkin packages use macros that define make targets prefixed with run-tests.
They can be run by invoking catkin_make run_tests[...]
or just using make run_tests[...].

Given this clue, I googled for a command to list all defined make targets, and found this:
make -qp | awk -F':' '/^[a-zA-Z0-9][^$#\/\t=]*:([^=]|$)/ {split($1,A,/ /);for(i in A)print A[i]}'

When I run that in my catkin workspace, I get the following targets (among others):
run_tests_my_package
run_tests_my_package_gtest
run_tests_my_package_gtest_my_tests

These targets correspond to the following lines in my CMakeLists.txt file:
project(my_package)
catkin_add_gtest(my_tests test/my_tests.cpp)

I would assume there are similar targets defined for rostest tests, but I have not looked for these yet.

Originally posted by Jeremy Zoss with karma: 4976 on 2013-05-12
This answer was ACCEPTED on the original site
Post score: 13

Original comments
Comment by David Lu on 2013-05-13:
That's entirely intuitive.  Thanks!
Comment by William on 2013-05-13:
This is not built into catkin_make because it has to work without catkin_make, i.e. it should work with just cmake and make. Btw, the make targets should be tab completable, so catkin_make run_tests_ should list all of your options.

