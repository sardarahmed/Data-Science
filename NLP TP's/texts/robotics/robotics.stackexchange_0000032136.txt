Q:

Auto white balance with OpenNI

Is it possible to disable the auto white balance of the Kinect camera using the openni_kinect driver?

Originally posted by Ivan Dryanovski on ROS Answers with karma: 4954 on 2011-06-09
Post score: 4

A:

As far as I know, you can't.
OpenNI provides extremely limited access to camera properties. I don't know of any way to change the RGB camera's exposure, gain, or white balance settings through OpenNI.
You can play with the available properties by editing /etc/primesense/GlobalDefaults.ini. This file is read by OpenNI at startup. There are WhiteBalancedEnabled and Gain properties in the [Depth] section, but oddly not in the [Image] section which configures the RGB camera. Note that the openni_kinect driver overrides some properties (e.g. InputFormat/OutputFormat, Resolution, Registration, RegistrationType). The properties are defined in the source code at XnStreamParams.h.
You can try asking this on the openni-dev list.
The libfreenect guys have figured out how to access the registers of the color CMOS sensor to change a variety of settings, including white balance. They don't appear to have added access to these to their API yet, but if you're interesting in hacking, this looks like the easiest path to modify the camera settings.
At WG, for applications where we absolutely require high-quality color images and/or fine control of the camera, we've mounted a Prosilica to the Kinect and calibrated it to the depth sensor. That's a lot of pain for something that should be easy though.
If anyone has more success with this I'm interested to hear about it.

Originally posted by Patrick Mihelich with karma: 4336 on 2011-09-02
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by Ivan Dryanovski on 2012-11-16:
This question still pops up every now and then. I found this thread, might be useful: http://www.pcl-users.org/Kinect-auto-exposure-td4020887.html
Comment by Phreaky on 2015-01-04:
Hi, are there any news on this topic?
Comment by songuke on 2015-12-01:
It's possible in OpenNI2. See the toggleImageAutoExposure function here: https://github.com/OpenNI/OpenNI2/blob/master/Source/Tools/NiViewer/Device.cpp

