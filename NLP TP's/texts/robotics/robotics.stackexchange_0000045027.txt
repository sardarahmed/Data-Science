Q:

Kinect publishes no data on published topics

In the lab we have a laptop (Asus X301A-RX111V with Intel i3-2350m, 1x usb 2.0 and 1x usb 3.0) to be on the turtlebot platform.
Before driving and connecting the turtlebot we can't get Kinect to work. I know that there are issues with usb 3.0, so Kinect is pluged to usb 2.0.
When we run
roslaunch openni_launch openni.launch

Kinect normaly starts, topics are published and no errors printed. But the problem is that nothing is published on the topics. Simptoms are similar when Kinect is connected to USB 3.0 port. It is the same on x64 and x86 versions of Ubuntu.
Does anybody have the fix for that?
Running Ubuntu 12.04 + Fuerte.
EDIT:
There has to be the problem with Linux OpenNI driver for Kinect because also no data is received if using only OpenNI default drivers and samples (openni.org). In Windows everything works normally also with OpenNI drivers. Any ideas how to fix it?
EDIT2:
I narrowed the problem down to libusb and two errors:
Endpoint 0x82, Buffer 15: Failed to re-submit asynch I/O transfer (err=-1)!
Endpoint 0x82, Buffer 15: Failed to cancel asynch I/O transfer (err=-5)!

Thank you.

Originally posted by Grega Pusnik on ROS Answers with karma: 460 on 2012-10-17
Post score: 0

Original comments
Comment by MarkyMark2012 on 2012-10-18:
what do you see from rxgraph?
Comment by Grega Pusnik on 2012-10-18:
I tried rxgraph with rostopic hz /camera/rgb/image_color on working desktop machine and on not working laptop. Both are showing the same. Here is the link to the rxgraph: http://postimage.org/image/4jp3ufl09/
Any ideas?
Comment by jarvisschultz on 2012-10-18:
What is the output of rostopic hz /camera/depth/points (or some other Kinect topic) on the laptop that is not working?
Comment by Grega Pusnik on 2012-10-18:
It is showing "Subscribed to [/camera/depth/points]" and nothing else. The IR light is visible, but nothing is posted on the topic.
Comment by yigit on 2012-10-22:
Hello @grega, Is depth_registration enabled? You can check it using dynamic_reconfigure package as described here http://www.ros.org/wiki/openni_launch#Quick_start
Comment by Grega Pusnik on 2012-10-22:
I tried with dynamic_reconfigure package but no luck. No data is coming. Also I don't think that depth registration has anything to do with the problem.
Comment by daidalos on 2013-12-29:
have the same problem how do i solve it?

A:

I came to the conclusion that on Ubuntu 12.04 LTS Kinect doesn't work on Asus X301A-RX111V with Intel i3-2350m, 1x usb 2.0 and 1x usb 3.0). No drivers work. I think that the problem is with the Ubuntu kernel and new Ivy Bridge CPU and HM76 Intel Chipset.
So now I installed Ubuntu 12.10 and voila Kinect started working with OpenNI unstable version + avin2 Kinect drivers (manually compiled and installed!) + NITE unstable.
All I have to do now is install ROS from source and try if Kinect works in ROS. I'll publish my finding.

Originally posted by Grega Pusnik with karma: 460 on 2012-10-26
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by sai on 2012-10-26:
Did kinect work with ubuntu 12.10?..please let me know if how can i make kinect to work with ros
Comment by Grega Pusnik on 2012-10-27:
Kinect worked in Ubuntu 12.10 with OpenNI unstable version from git and avin2 Kinect drivers manualy compiled from git. I will try Kinect in ROS in monday morning and let you know.
Comment by sai on 2012-10-28:
Thanks and keep me updated
Comment by sai on 2012-11-04:
Did it work
Comment by Grega Pusnik on 2012-11-05:
Still having trouble building ROS from source :) Will keep you posted.
Comment by sai on 2012-11-05:
I m having trouble in building OpenNI..* Building OpenNI...
../../../../Source/OpenNI/XnPlayerImpl.cpp: In constructor ‘xn::PlayerImpl::PlayerImpl()’:
../../../../Source/OpenNI/XnPlayerImpl.cpp:71:33: warning: converting to non-pointer type ‘int’ from NULL [-Wconversion-null]
../../../../Source/Open
Comment by sai on 2012-11-05:
make[1]: *** [../../../Bin/x86-Release/org.OpenNI.jar] Error 127
make: *** [Wrappers/OpenNI.java] Error 2
make: *** Waiting for unfinished jobs....
Building Failed!
Comment by sai on 2012-11-05:
make[1]: *** [../../../Bin/x86-Release/org.OpenNI.jar] Error 127
make: *** [Wrappers/OpenNI.java] Error 2
make: *** Waiting for unfinished jobs....
Comment by Grega Pusnik on 2012-11-05:
Did you clone unstable version from git repo (https://github.com/OpenNI/OpenNI)? Then I just followed instructions on the github site.
After that I cloned https://github.com/avin2/SensorKinect and followed instructions on github - Building Sensor. Last thing I did was build unstable NITE.
Comment by sai on 2012-11-06:
I did that and its working now..thank you so much
Comment by Grega Pusnik on 2012-11-07:
Glad to help.
Comment by sai on 2012-11-09:
I need to add that things are working on ROS Fuerte on UBUNTU 12.04 with the package openni_launch but with the unstable Openni and Avin2/Sensor Kinect
Comment by Grega Pusnik on 2012-11-09:
May I ask you what kind of laptop/desktop are you using? What is the MB chipset and CPU?
Comment by sai on 2012-11-11:
m using HP elitebook laptop and intel i7 processor and 2.5 Ghz
Comment by Grega Pusnik on 2012-11-12:
Is it Sandy or Ivy bridge i7? Thanks.
Comment by sai on 2012-11-19:
I m sorry ..how to know that
Comment by Grega Pusnik on 2012-11-19:
Can you tell me the model of the procesor?
Comment by sai on 2012-11-20:
processor   : 7
vendor_id   : GenuineIntel
cpu family  : 6
model       : 42
model name  : Intel(R) Core(TM) i7-2860QM CPU @ 2.50GHz
Comment by Grega Pusnik on 2012-11-20:
Thank you. Your model is Sandy bridge CPU, so you probably have an Intel QM67 chipet. That's probably why you can get kinect working in Ubuntu 12.04. There is a problem with newer chipsets and Ubuntu 12.04. But it seems that it has been fixed in 12.10.
Comment by sai on 2012-11-20:
great..this might be useful for some one else..

