Q:

tf Python API transform points

Hi
The TF documentation mentions that there are methods to convert points from one frame to another.  I am currently using the python tf api.
I have a list of [x,y,z] points in the sensor frame and I want to transform these points into the map frame.
calling this
 (tran, rot) = self.tf_listener.lookupTransform('/body', '/map', rospy.Time(0.0))

gives a translation vector and a quaternion for the rotation. I am not really familiar with quaternions... but I heard they are hard...
Anyway Is there a method in the python api  to convert my vector of points to another frame?
I noticed in the c++ tf api there was a function called transformPoint. Is this what I need?
My other idea is to use the transformation.py module to convert the quaternions and the translation vector to a homogeneous transformation matrix and transform the vector of points manually. (by using the transformations.py module) http://wiki.ros.org/geometry/RotationMethods#transformations.py

Originally posted by Sentinal_Bias on ROS Answers with karma: 418 on 2014-03-30
Post score: 2

A:

The python tf API has transformPoint, and transformPointCloud. I'm not sure why they don't show up in the API docs, but here's how they work:
transformPoint(self, target_frame, ps) method of tf.listener.TransformListener instance
    :param target_frame: the tf target frame, a string
    :param ps: the geometry_msgs.msg.PointStamped message
    :return: new geometry_msgs.msg.PointStamped message, in frame target_frame
    :raises: any of the exceptions that :meth:`~tf.Transformer.lookupTransform` can raise
    
    Transforms a geometry_msgs PointStamped message to frame target_frame, returns a new PointStamped message.

transformPointCloud(self, target_frame, point_cloud) method of tf.listener.TransformListener instance
    :param target_frame: the tf target frame, a string
    :param ps: the sensor_msgs.msg.PointCloud message
    :return: new sensor_msgs.msg.PointCloud message, in frame target_frame
    :raises: any of the exceptions that :meth:`~tf.Transformer.lookupTransform` can raise
    
    Transforms a geometry_msgs PoseStamped message to frame target_frame, returns a new PoseStamped message.

You'll have to either loop over your vector and create PointStamped objects, or pack all the points into a PointCloud.

Originally posted by Dan Lazewatsky with karma: 9115 on 2014-03-30
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Sentinal_Bias on 2014-03-30:
Hi thanks I use the pointcloud method. I found some documentation here http://mirror.umd.edu/roswiki/doc/diamondback/api/tf/html/python/tf_python.html.  But the official link is missing sections

