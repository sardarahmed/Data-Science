Q:

TypeError: cannot marshal  objects

I am unable to set parameters to the param server using the following code:

hsv = cv2.cvtColor(image,
cv2.COLOR_BGR2HSV)
rospy.set_param("lower_h", hsv[:, :,
0].min()) rospy.set_param("lower_s",
hsv[:, :, 1].min())
rospy.set_param("lower_v", hsv[:, :,
2].min())
print('lower_h = {}\nlower_s =
{}\nlower_v = {}'.format(hsv[:, :,
0].min(), hsv[:, :, 1].min(), hsv[:,
:, 2].min()))

I am getting the following error:
TypeError: cannot marshal <type 'numpy.uint8'> objects
In the above code I am able to print the values in the terminal but not set the values in the parameter server. Any help will be appreciated.

Originally posted by dee-mikey on ROS Answers with karma: 5 on 2021-05-12
Post score: 0

A:

There is a difference between uint8 and float64, but it looks like the same cause as this Question.
I think converting numpy.uint8 to uint8 by doing the following will solve the problem.
rospy.set_param("lower_h", hsv[:, :, 0].min().item())
rospy.set_param("lower_s", hsv[:, :, 1].min().item())
rospy.set_param("lower_v", hsv[:, :, 2].min().item())

Originally posted by miura with karma: 1908 on 2021-05-12
This answer was ACCEPTED on the original site
Post score: 0

