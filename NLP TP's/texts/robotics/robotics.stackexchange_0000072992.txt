Q:

No costmap in local map

Hello all,
Recently, I use Raspberry Pi 2, iRobot Create 1 and XV-11 to build up an autonomous navigation robot. My robot can navigate itself with pre-established map, but I still have a problem with it.
I get no costmap in local map section. I use the same parameters with turtlebot_navigation demo. It means that although my robot can avoid walls, doors and other static obstacles with amcl and map, it can not avoid temporary obstacles, such as people and trash bin which is not in the original map. I saw some videos on Youtube that others use  this same approach, but they can get the local costmap. I don't know why about this issue. I tried to get topic message from the local costmap topic, but there are all zero values in the message.
Here is the screenshot of my rviz when running amcl:

And this is the nodes graph of my program:

Originally posted by lightbulb on ROS Answers with karma: 63 on 2016-03-22
Post score: 2

Original comments
Comment by DavidN on 2016-03-27:
Are you sure that when you echo local cost map, all the values are zero? If so, can you check the observation sources of the local cost map( by running rosparam get /move_base/local_costmap/obstacle_layer/observation_sources )?
Comment by spmaniato on 2016-04-06:
I'm having the same problem as of VERY recently. Up until a few weeks ago the local costmap was working just fine. Now it's all zeros even though the observation sources did not change. Edit: see my answer

A:

I had the same problem, but when simulating a robot using Stage. In my case, the culprit turned out to be a mistake in my Stage world model, which made the height of the LiDAR sensor be 0.502 (twice what it should be, 0.251). In turn, this made the LiDAR measurements' height be outside the bounds of my obstacle layer's observation source:
min_obstacle_height: 0.0
max_obstacle_height: 0.5

Thus, the local costmap was all zeros because it was reflecting the wrong height. Once I "lowered" my LiDAR to the correct height, the local costmap worked as expected.

Originally posted by spmaniato with karma: 1788 on 2016-04-06
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by lightbulb on 2016-04-07:
You are right, thank you!
Comment by spmaniato on 2016-04-07:
Awesome, glad I could help! Could you please also mark my answer as correct by clicking on the checkmark icon to the left? (right below the vote up/down buttons)

