Q:

Preempt a state doesn't work

Hi!
I have tried to do a concurrence state with one one monitor-state that check for a reset topic and one state with a lot of sub-states that do the actual work. The goal is to and the work if someone publish on the reset topic. My problem is that then I publish and the monitor-state get active and try to preempt the other state nothing happen and the work continue:
For every sub state it said:
[INFO] [WallTime: 1480428562.104071] [3378.814000] Preempt requested on state machine before executing the next state. 
[INFO] [WallTime: 1480428562.105243] [3378.814000] Last state 'First task' did not service preempt. Preempting next state 'Second task' before executing...

But then continue. Do I have to add something to all the state that should happend then preempting? They are ordinary smach.state.

Originally posted by pv on ROS Answers with karma: 16 on 2016-11-29
Post score: 0

A:

Last state 'First task'  did not service preempt

indicates that the state was requested to preempt but did not respond to it. If 'First task' is a homemade smach.state, then you need to implement what do to when preempt is requested. Look at the interface for smach.state: preempt_requested and service_preempt.

Originally posted by knxa with karma: 811 on 2017-12-04
This answer was ACCEPTED on the original site
Post score: 0

