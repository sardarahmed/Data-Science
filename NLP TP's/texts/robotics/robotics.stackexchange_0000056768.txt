Q:

openni not working

Dear all,
So, I finally dared to give Hydro a spin and installed it on a fresh Ubuntu 12.04 64bit machine. (The machine's only purpose in this life is to run ROS, so all I did was to install Ubuntu 12.04 and its latest updates right before installing ROS Hydro).
The thing is that when I plug a Microsoft Kinect and execute roslaunch openni_launch openni.launch everything is OK. But, when I plug a PrimeSense RD1.08 or PrimeSense RD1.09 it does not detect them::
[ INFO] [1390375625.910692278]: No matching device found.... waiting for devices. Reason: openni_wrapper::OpenNIDevice::OpenNIDevice(xn::Context&, const xn::NodeInfo&, const xn::NodeInfo&, const xn::NodeInfo&, const xn::NodeInfo&) @ /tmp/buildd/ros-hydro-openni-camera-1.9.2-0precise-20140117-2223/src/openni_device.cpp @ 61 : creating depth generator failed. Reason: USB interface is not supported!

More over, when I plug an ASUS Xtion Pro, the thing just blows up:
martin@martin-U24E:~$ roslaunch openni_launch openni.launch 
... 
process[camera/depth_registered_rectify_depth-14]: started with pid [7090]
process[camera/points_xyzrgb_hw_registered-15]: started with pid [7104]
[ INFO] [1390375812.746335307]: Number devices connected: 1
process[camera/disparity_depth-16]: started with pid [7119]
process[camera/disparity_registered_sw-17]: started with pid [7133]
[FATAL] [1390375812.838870747]: Service call failed!
[FATAL] [1390375812.839177731]: Service call failed!
[FATAL] [1390375812.839430812]: Service call failed!
[FATAL] [1390375812.839533404]: Service call failed!
[FATAL] [1390375812.840017362]: Service call failed!
[FATAL] [1390375812.840183592]: Service call failed!
[FATAL] [1390375812.840222229]: Service call failed!
[FATAL] [1390375812.846948463]: Service call failed!
[FATAL] [1390375812.847145521]: Service call failed!
[FATAL] [1390375812.849545313]: Service call failed!
[FATAL] [1390375812.850908795]: Service call failed!
[camera/camera_nodelet_manager-2] process has died [pid 6894, exit code -11, cmd /opt/ros/hydro/lib/nodelet/nodelet manager __name:=camera_nodelet_manager __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-camera_nodelet_manager-2.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-camera_nodelet_manager-2*.log
process[camera/disparity_registered_hw-18]: started with pid [7148]
process[camera_base_link-19]: started with pid [7162]
process[camera_base_link1-20]: started with pid [7195]
process[camera_base_link2-21]: started with pid [7206]
[camera/rectify_mono-5] process has died [pid 6952, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load image_proc/rectify camera_nodelet_manager --no-bond image_mono:=rgb/image_mono image_rect:=rgb/image_rect_mono __name:=rectify_mono __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-rectify_mono-5.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-rectify_mono-5*.log
[camera/rectify_color-6] process has died [pid 6970, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load image_proc/rectify camera_nodelet_manager --no-bond image_mono:=rgb/image_color image_rect:=rgb/image_rect_color __name:=rectify_color __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-rectify_color-6.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-rectify_color-6*.log
[camera/rectify_ir-7] process has died [pid 6984, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load image_proc/rectify camera_nodelet_manager --no-bond image_mono:=ir/image_raw image_rect:=ir/image_rect_ir __name:=rectify_ir __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-rectify_ir-7.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-rectify_ir-7*.log
[camera/register_depth_rgb-12] process has died [pid 7060, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load depth_image_proc/register camera_nodelet_manager --no-bond rgb/camera_info:=rgb/camera_info depth/camera_info:=depth/camera_info depth/image_rect:=depth/image_rect_raw depth_registered/image_rect:=depth_registered/sw_registered/image_rect_raw __name:=register_depth_rgb __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-register_depth_rgb-12.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-register_depth_rgb-12*.log
process[camera_base_link3-22]: started with pid [7217]
[camera/depth_metric-10] process has died [pid 7030, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load depth_image_proc/convert_metric camera_nodelet_manager --no-bond image_raw:=depth/image_raw image:=depth/image __name:=depth_metric __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_metric-10.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_metric-10*.log
[camera/depth_points-11] process has died [pid 7044, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load depth_image_proc/point_cloud_xyz camera_nodelet_manager --no-bond image_rect:=depth/image_rect_raw points:=depth/points __name:=depth_points __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_points-11.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_points-11*.log
[camera/points_xyzrgb_sw_registered-13] process has died [pid 7074, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load depth_image_proc/point_cloud_xyzrgb camera_nodelet_manager --no-bond rgb/image_rect_color:=rgb/image_rect_color rgb/camera_info:=rgb/camera_info depth_registered/image_rect:=depth_registered/sw_registered/image_rect_raw depth_registered/points:=depth_registered/points __name:=points_xyzrgb_sw_registered __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-points_xyzrgb_sw_registered-13.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-points_xyzrgb_sw_registered-13*.log
[camera/depth_registered_rectify_depth-14] process has died [pid 7090, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load image_proc/rectify camera_nodelet_manager --no-bond image_mono:=depth_registered/image_raw image_rect:=depth_registered/hw_registered/image_rect_raw __name:=depth_registered_rectify_depth __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_registered_rectify_depth-14.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_registered_rectify_depth-14*.log
[camera/points_xyzrgb_hw_registered-15] process has died [pid 7104, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load depth_image_proc/point_cloud_xyzrgb camera_nodelet_manager --no-bond rgb/image_rect_color:=rgb/image_rect_color rgb/camera_info:=rgb/camera_info depth_registered/image_rect:=depth_registered/hw_registered/image_rect_raw depth_registered/points:=depth_registered/points __name:=points_xyzrgb_hw_registered __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-points_xyzrgb_hw_registered-15.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-points_xyzrgb_hw_registered-15*.log
[camera/depth_rectify_depth-8] process has died [pid 6998, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load image_proc/rectify camera_nodelet_manager --no-bond image_mono:=depth/image_raw image_rect:=depth/image_rect_raw __name:=depth_rectify_depth __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_rectify_depth-8.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_rectify_depth-8*.log
[camera/depth_metric_rect-9] process has died [pid 7012, exit code 255, cmd /opt/ros/hydro/lib/nodelet/nodelet load depth_image_proc/convert_metric camera_nodelet_manager --no-bond image_raw:=depth/image_rect_raw image:=depth/image_rect __name:=depth_metric_rect __log:=/home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera-depth_metric_rect-9.log].
log file: /home/martin/.ros/log/06ead13e-8337-11e3-a3f7-c860003ebb31/camera- depth_metric_rect-9*.log
^C[camera_base_link3-22] killing on exit
[camera_base_link2-21] killing on exit
[camera_base_link1-20] killing on exit
[camera_base_link-19] killing on exit
[camera/disparity_registered_hw-18] killing on exit
[camera/disparity_registered_sw-17] killing on exit
[camera/disparity_depth-16] killing on exit
 [camera/debayer-4] killing on exit[camera/driver-3] killing on exit

[rosout-1] killing on exit
[master] killing on exit
shutting down processing monitor...
... shutting down processing monitor complete
done

Paradoxically, the only sensor that is working is the only sensor that I am not interested on using xD
So, to sum up:

Microsoft Kinect:  OK
PrimeSense RD1.08: KO (Device not found 'coz USB interface not supported)
PrimeSense RD1.09: KO (Device not found 'coz USB interface not supported)
ASUS Xtion Pro:    KO (Dies miserably)

I would like to add that the previous mix of Precise + Groovy was working properly. Any solution?
Thank you very much in advance!
[UPDATE]
After some researching it seems that the problem is the package ros-hydro-openni-camera, which currently is on version 1.9.2
The proposed solution is to download and install version 1.8.8
So, after doing it, the situation with roslaunch openni_launch openni.launch is as follows:

Microsoft Kinect: OK
PrimeSense RD1.08: KO (Same error as before)
PrimeSense RD1.09: KO (Same error as before)
ASUS Xtion Pro: OK (now it works, before it died miserably)

Good progress, but I would like to see the PrimeSense devices working...
[UPDATE 2]
I gave a try to the packages for OpenNI2:
sudo apt-get install ros-hydro-openni2-camera ros-hydro-openni2-launch

And get the following results:

Microsoft Kinect: KO (No matching device found)
PrimeSense RD1.08: OK
PrimeSense RD1.08: OK
ASUS Xtion Pro: KO (Device starts up, but Xtion Pro has no color camera, so it complains about not finding a calibration for /camera/depth/image_rect_raw and never publishes any point cloud)

Will we see the day when the universe lines up and all the devices JUST WORK? hehehe

Originally posted by Martin Peris on ROS Answers with karma: 5625 on 2014-01-23
Post score: 3

Original comments
Comment by Athoesen on 2014-01-24:
It could be because openni2_camera is explicitly made for this purpose.
http://wiki.ros.org/openni_camera
http://wiki.ros.org/openni2_camera

A:

For the newer Primesense sensors, you must use OpenNI2, OpenNI doesn't recognize them because the USB device ID has changed. The ROS version of OpenNI2 does not support the Kinect, and it probably doesn't support the Xtion Pro (it does support the Xtion Pro Live which has the color camera).
You can install openni/openni2 side by side, and use openni for Kinect and openni2 for newer primesense sensors. Given the question of future availability of either Kinect/Primesense, it is unlikely that anyone is going to put in the effort to integrate Kinect support with openni2.

Originally posted by fergs with karma: 13902 on 2014-01-24
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Martin Peris on 2014-01-26:
Thank you so much for your answer, what bugs me is that the PrimeSense sensors that I am using, were working perfectly fine before I upgraded to Groovy. If newer Primesense sensors must use OpenNI2, I believe you, but mine were working with OpenNI... but anyway... I'll just use OpenNI2

