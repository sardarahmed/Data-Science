Q:

rgbd_calibration YAML Parsing Exception: Bad Conversion Error

This work is a recurrence of Basso's work: https://github.com/iaslab-unipd/rgbd_calibration, but I have encountered the following problems:
[ INFO] [1558852802.759705575]: camera calibration URL: file:///home/lhy/.ros/camera_info/depth_A00362902964053A.yaml

**[**ERROR] [1558852802.762335020]: Exception parsing YAML camera calibration:
yaml-cpp: error at line 0, column 0: bad conversion
[ERROR] [1558852802.762491164]: Failed to parse camera calibration from file [/home/lhy/.ros/camera_info/depth_A00362902964053A.yaml]****

[ WARN] [1558852802.762643002]: Camera calibration file /home/lhy/.ros/camera_info/depth_A00362902964053A.yaml not found.

[0, 0, 0, 0;
 0, 0, 0, 0;
 0, 0, 0, 0]
[ERROR] [1558852802.763309988]: Tried to advertise a service that is already advertised in this node [/calibration/rgbd_offline/set_camera_info]

[ INFO] [1558852802.763406777]: camera calibration URL: file:///home/lhy/.ros/camera_info/rgb_A00362902964053A.yaml

**[ERROR] [1558852802.765104511]: Exception parsing YAML camera calibration:
yaml-cpp: error at line 0, column 0: bad conversion
[ERROR] [1558852802.765185216]: Failed to parse camera calibration from file [/home/lhy/.ros/camera_info/rgb_A00362902964053A.yaml]**

[ WARN] [1558852802.765279760]: Camera calibration file /home/lhy/.ros/camera_info/rgb_A00362902964053A.yaml not found.

[ INFO] [1558852802.846363646]: Getting data...

[ INFO] [1558852813.493671995]: 40 images + point clouds added.

[ INFO] [1558852813.493820898]: Initial transform:

position: 
  x: 0
  y: 0
  z: 0
orientation: 
  x: 0
  y: 0
  z: 0
  w: 1

****[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!****
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!
[pcl::KdTreeFLANN::setInputCloud] Cannot create a KDTree with an empty input cloud!

[ INFO] [1558852846.915333552]: 0

[ INFO] [1558852846.915474807]: Estimating undistortion map...

[ INFO] [1558852846.915565426]: Recomputing undistortion map...

[ INFO] [1558852846.916575306]: Estimating global error correction map...

[ INFO] [1558852846.956320367]: Estimated transform:

position: 

  x: 0

  y: 0

  z: 0

orientation: 

  x: 0

  y: 0

  z: 0

  w: 1

[ INFO] [1558852846.956465561]: Optimizing...

WARNING: Logging before InitGoogleLogging() is written to STDERR F0526 14:40:46.960085 11180 problem_impl.cc:671] 

Parameter block not found: 0x7ffd02e494f0. You must add the parameter block to the problem before you can set its local 

parameterization.

*** Check failure stack trace: ***
================================================================================REQUIRED 

process [calibration/rgbd_offline-2] has died!

process has died [pid 11180, exit code -6, cmd /home/lhy/calibration_ws/devel/lib/rgbd_calibration/rgbd_offline_calibration 

__name:=rgbd_offline __log:=/home/lhy/.ros/log/15ad8602-7f81-11e9-951b-9cad9784dfa1/calibration-rgbd_offline-2.log].

log file: /home/lhy/.ros/log/15ad8602-7f81-11e9-951b-9cad9784dfa1/calibration-rgbd_offline-2*.log

Initiating shutdown!
================================================================================
[calibration/checkerboards_pub-3] killing on exit
[calibration/rgbd_offline-2] killing on exit
[rosout-1] killing on exit
[master] killing on exit
shutting down processing monitor...
... shutting down processing monitor complete
done

By  the way . I used Ubutu16.04 + kinetic
I know that someone has encountered a similar problem https://github.com/iaslab-unipd/rgbd_calibration/issues/10 , but the author said it is not too clear, so I didn't understand how to go. solve this problem?
In the process of implementation, I did the following work:
First of all,

Compile Basso 2014 https://github.com/iaslab-unipd/rgbd_calibration
1.1 Installing ceres https://github.com/ceres-solver/ceres-solver
http://ceres-solver.org/installation.html
1.2 clone code to catkin_ws/src
[https://github.com/iaslab-unipd/rgbd_calibration branch: indigo](https://github.com/iaslab-unipd/rgbd_calibration branch: indigo)
[https://github.com/iaslab-unipd/calibration_toolkit branch: indigo_v0.3]( https://github.com/iaslab-unipd/calibration_toolkit branch: indigo_v0.3)
1.3 Compilation
Catkin_make --only-pkg-with-deps rgbd_calibration

Successfully generated executable rgbd_offline_calibration, but other errors I ignored(Is there a problem with this, does it affect offline calibration?). The environment I use, Ubuntu 16.04 + ros kinetic.
Secondly,
I used the sensor_data_collection to record some images. And the image_camera_info and depth_camera_info  are shown in the following two figures :
**image_camera_info:**

****frame_id: kinect1_rgb_optical_frame

height: 480

width: 640

distortion_model: plumb_bob

D: [0, 0, 0, 0, 0]

K: [525, 0, 319.5, 0, 525, 239.5, 0, 0, 1]

R: [1, 0, 0, 0, 1, 0, 0, 0, 1]

P: [525, 0, 319.5, 0, 0, 525, 239.5, 0, 0, 0, 1, 0]

binning_x: 0

binning_y: 0

roi:

  x_offset: 0

  y_offset: 0

  height: 0

  width: 0

  do_rectify: False****

**depth_camera_info**

**frame_id: kinect1_depth_optical_frame

height: 480

width: 640

distortion_model: plumb_bob

D: [0, 0, 0, 0, 0]

K: [575.8157348632812, 0, 314.5, 0, 575.8157348632812, 235.5, 0, 0, 1]

R: [1, 0, 0, 0, 1, 0, 0, 0, 1]

P: [575.8157348632812, 0, 314.5, 0, 0, 575.8157348632812, 235.5, 0, 0, 0, 1, 0]

binning_x: 0

binning_y: 0

roi:

  x_offset: 0

  y_offset: 0

  height: 0

  width: 0

  do_rectify: False**

** Finally, I started the offline calibration process, but when I started kinect_47A_tro.launch,  I have encountered the above problems:**

Originally posted by Henryliu on ROS Answers with karma: 21 on 2019-05-26
Post score: 1

A:

That error is usually shown up when the program cannot find the YAML file. Maybe you deleted or modified the calibration YAML file name?

Originally posted by JSandu with karma: 20 on 2020-08-03
This answer was ACCEPTED on the original site
Post score: 0

