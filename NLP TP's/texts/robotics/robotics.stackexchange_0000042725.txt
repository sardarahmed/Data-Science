Q:

transformLaserScanToPointCloud usage problem

Hi. I'm trying to de-rotate (project) LaserScan message using IMU.
p_base_frame_ is a string "base_stabilized".
scan is scan message. const sensor_msgs::LaserScan& scan.
sensor_msgs::PointCloud laser_point_cloud_;
tf::TransformListener tf_;
Following is successful.
tf::StampedTransform laserTransform;
tf_.lookupTransform(p_base_frame_,scan.header.frame_id, scan.header.stamp , laserTransform);
But, following is not successful.
transformLaserScanToPointCloud(p_base_frame_ , scan, laser_point_cloud_, tf_);
I don't know why. It basically find same transformation which is "base_stabilize" to "laser".
It exist. I confirmed by "rosrun tf view_frame".

Originally posted by Hyon Lim on ROS Answers with karma: 314 on 2012-07-27
Post score: 0

Original comments
Comment by Lorenz on 2012-07-27:
Saying just '.. is not successful' makes it hard to infer what's going wrong. Please always post the complete error message and make sure you have a look at the support guidelines: http://www.ros.org/wiki/Support

A:

It appears that in the transformLaserScanToPointCloud function a lookupTransform is called at time:
scan_in.header.stamp + ros::Duration ().fromSec (scan_in.ranges.size () * scan_in.time_increment)
My quick-fix solution was to call waitForTransform and include that added time before calling transformLaserScanToPointCloud.
Source: https://github.com/ros-perception/laser_geometry/blob/hydro-devel/src/laser_geometry.cpp

Originally posted by Angus with karma: 438 on 2014-07-15
This answer was ACCEPTED on the original site
Post score: 0

