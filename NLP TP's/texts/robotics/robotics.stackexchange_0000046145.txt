Q:

About AttachedCollisionObject

Hi everyone,
Just a quick question,
If you want add two or three attached objects into a scenery, You must to do this?:
arm_navigation_msgs::AttachedCollisionObject pieza1_object;
pieza1_object.link_name = "r_gripper_r_finger_tip_link";
...
pieza1_object.object.operation.operation = arm_navigation_msgs::CollisionObjectOperation::ADD;
...                                                                       
pieza1_object.object.header.frame_id = "odom_combined"; //Referencia origen
pieza1_object.object.header.stamp = ros::Time::now();
...
pieza1_object.object.shapes.push_back(pieza1S);
pieza1_object.object.poses.push_back(pieza1P);
//
**att_object_in_map_pub_.publish(pieza1_object);** //ADD into scenary
//
pieza1_object.object.operation.operation = arm_navigation_msgs::CollisionObjectOperation::DETACH_AND_ADD_AS_OBJECT;
**att_object_in_map_pub_.publish(pieza1_object);** // Change the state
 
arm_navigation_msgs::AttachedCollisionObject pieza2_object;
pieza2_object.link_name = "r_gripper_r_finger_tip_link";
...
...
**att_object_in_map_pub_.publish(pieza1_object);** //ADD into scenary
//
pieza2_object.object.operation.operation = arm_navigation_msgs::CollisionObjectOperation::DETACH_AND_ADD_AS_OBJECT;
**att_object_in_map_pub_.publish(pieza2_object);** // Change the state

And following this question,
Is it necessary to do:
if(!get_planning_scene_client.call(planning_scene_req, planning_scene_res)) {
      ROS_WARN("Can't get planning scene");
      return -1;
  }

After every object state modification?
Regards.

Originally posted by Sanxano on ROS Answers with karma: 70 on 2012-11-28
Post score: 0

A:

Have a look at the WorldInterface class in pr2_python. This gives examples for the functionality and I can confirm that it works this way. Even as a C++ guy you should be able to understand what is going on.
Note, that there is a delay after each publish, not sure how necessary that is.
As to the second question: No. This just resets the planning scene. The procedures above influence the world interface and your objects are stored there. However, before you use any component that uses the planning scene (as e.g. the planning scene display in rviz) you should do the reset to get your world updates into the planning scene.

Originally posted by dornhege with karma: 31395 on 2012-11-28
This answer was ACCEPTED on the original site
Post score: 1

