Q:

transform a point from pointcloud

i want to set a goal at the side of a pointcloud. i have the x y z of the point from the pointcloud, but i need to transform it into the right frame. I went through the tf tutorials and I tried with a simple tf listener:
    geometry_msgs::PointStamped theGoal;
    tf::TransformListener listener;
    ros::NodeHandle node;
    ros::Rate rate(10.0);
    while (node.ok()){

     tf::StampedTransform transform;
         try{
            listener.lookupTransform("/move_base_simple/goal", "/camera/rgb/points",  ros::Time(0), transform);
         }
           catch (tf::TransformException ex){
            ROS_ERROR("%s",ex.what());
           } 

      }

but now i dont know how to set the msg for move_base_simple/goal
i also tried with transformPoint, but it only works with geometry_msgs::PointStamped, i tried with transformPointCloud, but then i just get another sensor_msgs/PointCloud2 pointcloud
i just want to transform one point so i can use it to set a goal, i would even multiply it myself if someone would tell me the angles of the difference between the two frames.
i m using ubuntu 10.04, ROS electric, pcl 1.1, robot platform turtlebot

Originally posted by Jerneja Mislej on ROS Answers with karma: 53 on 2012-05-28
Post score: 2

A:

Get the point out of the point cloud, construct a PointStamped, then transform it using transformPoint. Here's a code snippet that will load the values from your point into a PointStamped, transform that point into target_frame, and put the resulting point into pt_transformed.
geometry_msgs::PointStamped pt;
geometry_msgs::PointStamped pt_transformed;
pt.header = myCloud->header;
pt.point.x = myCloud->points[1].x;
pt.point.y = myCloud->points[1].y;
pt.point.z = myCloud->points[1].z;

tf::TransformListener listener;
listener.transformPoint("target_frame", pt, pt_transformed);

However, when sending a goal, whatever is listening for the goal will likely transform it into whatever frame it needs.

Originally posted by Dan Lazewatsky with karma: 9115 on 2012-05-28
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by Jerneja Mislej on 2012-05-28:
right now i am getting my point by calling : myCloud -> points[1].x and same for y and z. if then i want to set the coordinates for move_base_msgs::MoveBaseGoal goal i need to correct the values myself no?
Comment by Jerneja Mislej on 2012-05-28:
what do you mean with construct a PointStamped? do I just declare it like this? geometry_msgs::PointStamped theGoal; how can i transform my point with transformPoint if it only takes in geometry_msgs::PointStamped ?
Comment by Dan Lazewatsky on 2012-05-29:
I've edited my answer with some code that will do what I described.

