Q:

conversion from NED to ENU for vectornav imu

Hello,
I have a vectornav 200 IMU for which i am using the driver provided here:
https://github.com/dawonn/vectornav
I wasn't able to find a clear answer on how to prepare the IMU to be used in EKF node.
Apparently the IMU is publishing its orientation in NED frame. In case I would like to use the IMU with no translation and rotation wrt base_link,
1 How should the actual device be placed?
2 What should be the static transform wrt base_link?
3 How to make imu publish in ENU frame?
I have used the setup proposed here:
https://github.com/ros-perception/imu_pipeline/blob/indigo-devel/imu_transformer/launch/ned_to_enu.launch
but so far I wasnt able to get the right result.
Thanks!

Originally posted by Marek on ROS Answers with karma: 18 on 2018-06-14
Post score: 0

A:

You are asking a very broad question, with few details.
Since this is an IMU with GNSS (GPS), I assume you are doing an outdoor project.
I personally did a project with an vectornav 200 IMU in ROS:
https://youtu.be/rzTScFbkdG0
https://vision.eng.au.dk/uav_lidar/
http://www.mdpi.com/1424-8220/17/12/2703
If you use a bit of time, you should be able to find info and answers to your questions.
I will try to go through your questions quickly.

Fix and way so you know the orientation on the robot or use a calibration procedure

It is a personal choice where on the robot base_link is set, but some places are smarter than others.
If you want to control a multi propelled drone, set in the center. For a front steered vehicle, general rotation point or center of mass might be a good choice. The trick is to know the static translations and rotation between IMU and base_link. The transform between base_link->IMU can be determined using either a fixed setup with known positions and orientations or a calibration procedure. We used a fixed setup based on a 3D printed sensor mount.

If the above information did not provide you with enough details, then have look at this VN-100 node:
https://github.com/FroboLab/frobomind/tree/master/fmSensors/global_sensing/imu/vectornav_vn100
You might choose another approach, but this should help you to move forward.

Originally posted by mpc_agro with karma: 26 on 2018-06-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Marek on 2018-06-14:
Thanks for the answer.
I will try the NED to ENU conversion.

Should there be any rotation between ENU and NED? On top of the republisher which converts the msg, should we add the transformation on the imu?
If i put the imu with label up at the baselink? Should I make a 180 roll for static_tf?

Comment by mpc_agro on 2018-06-15:
I think you are at the point where you need to sit down and do some coding experiments to get the understanding you need :-) You should be able to create a simple setup and validate everything using RVIZ if you published the individual transforms.

