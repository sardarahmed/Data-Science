Q:

ROS/Gazebo crashes when spawing PR2 robot model

Hello all.
I am new to ROS and also to this mailing group, so let me introduce myself breifly:
I am a student in Computer Vision and Robotics and currently working on my master's thesis which needs to be carried out in ROS.
I am getting really strange errors when running GAZEBO and spawing a PR2. In fact the entire GAZEBO crashes and I do not know how to track this error.
Here is the error message I get:
[ WARN] [1329924386.489855153, 11.500000000]: You've passed in true for auto_start for the C++ action server at [/head_traj_controller/follow_joint_trajectory]. You should always pass in false to avoid race conditions.
[base_laser_self_filter-23] process has finished cleanly.
log file: /home/reinhard/.ros/log/9799641e-5d66-11e1-8c07-485b39b465c6/base_laser_self_filter-23*.log
respawning...
[base_laser_self_filter-23] restarting process
process[base_laser_self_filter-23]: started with pid [17328]
[ WARN] [1329924386.592470362, 11.506000000]: Shutdown request received.
[ WARN] [1329924386.592511749, 11.506000000]: Reason given for shutdown: [new node registered with same name]
[ WARN] [1329924386.756356578, 11.529000000]: no localization information yet (odom_combined -> base_laser_link)
[ WARN] [1329924386.928924445, 11.546000000]: No collision geometry specified for link 'r_forearm_cam_frame'
Traceback (most recent call last):
File "/opt/ros/electric/stacks/pr2_mechanism/pr2_controller_manager/scripts/spawner", line 159, in <module>
if __name__ == '__main__': main()
File "/opt/ros/electric/stacks/pr2_mechanism/pr2_controller_manager/scripts/spawner", line 137, in main
resp = load_controller(name)
File "/opt/ros/electric/stacks/ros_comm/clients/rospy/src/rospy/impl/tcpros_service.py", line 430, in __call__
return self.call(*args, **kwds)
File "/opt/ros/electric/stacks/ros_comm/clients/rospy/src/rospy/impl/tcpros_service.py", line 519, in call
raise ServiceException("transport error completing service call: %s"%(str(e)))
rospy.service.ServiceException: transport error completing service call: unable to receive data from sender, check sender's logs for details
[gazebo-1] process has died [pid 11286, exit code -11].
log files: /home/reinhard/.ros/log/9799641e-5d66-11e1-8c07-485b39b465c6/gazebo-1*.log
[tilt_laser_self_filter-21] process has finished cleanly.
log file: /home/reinhard/.ros/log/9799641e-5d66-11e1-8c07-485b39b465c6/tilt_laser_self_filter-21*.log

It seems that if I launch it with gdb it works, but it is extremely weird and definitely not a permanent solution. But I do not know any other way to fix this ..
I hope someone can help me in this. Thank you all in advance!
Best,
Reinhard

Originally posted by ReiniK on ROS Answers with karma: 84 on 2012-02-22
Post score: 2

Original comments
Comment by hsu on 2012-02-23:
are you: 1. roslaunch gazebo_worlds empty_world.launch 2. roslaunch pr2_gazebo pr2.launch and 3. seeing this crash?  is the error message from the first roslaunch console?  and can you try attaching gdb to gazebo thread after step 1 and see if you can catch this segfault that way?  thanks.
Comment by AHornung on 2012-03-14:
Same problem here. "roslaunch pr2_gazebo pr2_empty_world.launch" leads to a crash in gazebo. The mentioned log file does not exist. Running first 1 and then 2 will kill gazebo in 1 as soon as 2 starts up (exit code -11), and then kill default_controllers_spawner (exit code 1).
Comment by AHornung on 2012-03-14:
This happened with the latest ROS electric on two different machines with NVidia graphics card, one Core i7 with Ubuntu 11.10 and one Core i5 with Ubuntu 11.04.

A:

please see my post about nvidia driver in this question, check & downgrade if you have 295.* drivers installed and see if that helps.

Originally posted by hsu with karma: 5780 on 2012-03-22
This answer was ACCEPTED on the original site
Post score: 1

