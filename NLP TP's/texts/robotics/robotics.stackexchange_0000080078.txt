Q:

local_cosmap remark but can't clear

Hi,
I create 2 laser scan by deepth_image_tolaser, one is middle and one is lower z=2-30cm. 
when I insert or remove object: 

glocal_costmap is clean and mark as obstacle 
local_costmap  is remark obstacle but can't clean 

This is my cosmap config.
footprint: [ [0.18, 0.18], [-0.18, 0.18], [-0.18, -0.18], [0.18, -0.18] ]

map_type: voxel

obstacle_layer:
  enabled:              true
  max_obstacle_height:  1.2
  origin_z:             0.0
  z_resolution:         0.2
  z_voxels:             2
  unknown_threshold:    15
  mark_threshold:       0
  combination_method:   1
  track_unknown_space:  true    #true needed for disabling global path planning through unknown space
  obstacle_range: 2.5
  raytrace_range: 0.18   #3
  origin_z: 0.0
  z_resolution: 0.2
  z_voxels: 2
  publish_voxel_map: false

 observation_sources:  scan scan_low bump
  scan:
    data_type: LaserScan
    topic: scan
    observation_persistence: 0.0
    marking: true
    clearing: true
    min_obstacle_height: 0.1
    max_obstacle_height: 1.2

  scan_low:
    data_type: LaserScan
    topic: scan_low
    observation_persistence: 0.0
    marking: true
    clearing: true
    min_obstacle_height: 0.2
    max_obstacle_height: 0.7

  bump:
    data_type: PointCloud2
    topic: mobile_base/sensors/bumper_pointcloud
    observation_persistence: 6000.0
    marking: true
    clearing: false
    min_obstacle_height: 0.0
    max_obstacle_height: 0.15
  # for debugging only, let's you see the entire voxel grid

inflation_layer:
  enabled:              true
  cost_scaling_factor:  5.0  # exponential rate at which the obstacle cost drops off (default: 10)
  inflation_radius:     0.5  # max. distance from an obstacle at which costs are incurred for planning paths.

static_layer:
  enabled:              true
  robot_radius: 0.18  # distance a circular robot should be clear of the obstacle (kobuki: 0.18)

Originally posted by science00000 on ROS Answers with karma: 20 on 2017-04-07
Post score: 0

Original comments
Comment by DavidN on 2017-04-09:
What is the purpose of "bump" topic? I see that it has marking: true, clearing: false in the config
Comment by science00000 on 2017-04-09:
Hi, 
I'm using kobuki and astra camera for navigation
fake laser from depthimage_to_laser that is not reliable,
some time hit obstacle below view of astra 
bump topic got data when hit then add to obstacle layer.
sorry the correct ismarking: true, clearing: true

A:

Your raytrace range is super low, 0.18 m, my guess is you're not clearing due to this.

Originally posted by stevemacenski with karma: 8272 on 2018-06-20
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by science00000 on 2018-06-20:
I have solved by add lidar, that sensor is high accuracy and  speed rate.
Fake laser from image have a lot of issue when working in real-office.
video testing 

