Q:

imu_filter_madgewick frame does not display rotation accurately

I am using the L515 Intel Realsense Camera, and the imu readings function as expected in the realsense-viewer, however when I launch the filter, RVIZ displays the "camera_imu_optical_frame," but neither the orientation nor the rotation accurately represent the positioning and movement of the camera.
When I alter the yaw of the camera, a change in the pitch is displayed in rviz.
Altering the pitch, shows a change in roll.
And changing the roll shows a change in yaw.
The lower frame in the picture is the imu frame, and the top frame is an arbitrary frame that is oriented in the direction that I would like my imu frame to face.
https://imgur.com/vymtoMc (Sorry for using image hosting, I don't have the karma yet).
imu_filter:
  ros__parameters:
    stateless: false
    use_mag: false
    publish_tf: true
    reverse_tf: false
    fixed_frame: "odom"
    constant_dt: 0.0
    publish_debug_topics: false
    world_frame: "enu"
    gain: 0.1
    zeta: 0.0
    mag_bias_x: 0.0
    mag_bias_y: 0.0
    mag_bias_z: 0.0
    orientation_stddev: 0.0

Let me know if you have any recommendations, or need more information.
Thank you!

Originally posted by LiquidTurtle1 on ROS Answers with karma: 15 on 2022-08-10
Post score: 0

A:

The issue had nothing to do with the filter at all, actually. The issue was that my imu data was not aligned with the proper coordinate frame. There seem to be ways to do this with a static transform, but I found it simpler to make the changes on the driver level.
Specifications for imu data preparation: http://docs.ros.org/en/noetic/api/robot_localization/html/preparing_sensor_data.html
I followed the instructions provided in this issue to fix my problem:
https://github.com/IntelRealSense/realsense-ros/issues/1176
This type of fix is likely necessary for anyone using a realsense camera with imu that is looking to use ros packages like imu_madgwick_filter or robot_localization.

Originally posted by LiquidTurtle1 with karma: 15 on 2022-08-15
This answer was ACCEPTED on the original site
Post score: 0

