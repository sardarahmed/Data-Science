Q:

how can rosbag write so fast on disk?

Hi there!
I made some test and I discovered that rosbag is able to record information at an impressive speed (I sent through the network several images (500x250 mono8) at ~29 MBps) and rosbag didn't miss anything.
What are the techniques used by rosbag to make this possible?
Thanks.

Originally posted by sciarp on ROS Answers with karma: 129 on 2012-02-10
Post score: 3

A:

Nodes receive messages as serialized data buffers over sockets. Normally the client library deserializes that buffer, copying all the data fields from that buffer into some language-appropriate message object.
rosbag treats messages a bit differently. When it receives one, it skips the deserialization step and instead copies the data buffer to the end of the bag file it's writing. The bag file has a linear structure - it's basically all the serialized messages written out to disk sequentially. The current format is documented at http://www.ros.org/wiki/Bags/Format/2.0.
Since rosbag writes all the data sequentially, no seeks (which negatively affect I/O performance) are required. So rosbag should be able to hit the max "buffer-to-disk" data transfer rate, which is typically around 1030 Mbits/sec.

Originally posted by Patrick Mihelich with karma: 4336 on 2012-02-10
This answer was ACCEPTED on the original site
Post score: 11

Original comments
Comment by sciarp on 2012-02-10:
Thank you for the very quick and detailed reply ;)

