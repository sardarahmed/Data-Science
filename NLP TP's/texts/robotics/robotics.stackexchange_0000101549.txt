Q:

Xacro Macro Param Not defined

I have a xacro file that has some generic macros for inertia. Currently using this for Noetic but I used the exact file on a previous project in Melodic.
The error I get is:
name 'm' is not defined
when evaluating expression 'm*(3rr+h*h)/12'
coming from the Marco:
 <macro name="cylinder_inertia" params="m r h">
        <inertia  ixx="${m*(3*r*r+h*h)/12}" ixy = "0" ixz = "0"
                    iyy="${m*(3*r*r+h*h)/12}" iyz = "0"
                    izz="${m*r*r/2}" /> 
</macro>

Thank you for any assistance.

Originally posted by jt_axis on ROS Answers with karma: 16 on 2022-04-21
Post score: 0

Original comments
Comment by Mike Scheutzow on 2022-04-23:\

The correct syntax is <xacro:macro name=.
Have you checked the calling tag for m="1.0" property? Quotes are required around value.

Comment by jt_axis on 2022-04-25:
Yeah, the xacro tag was what was missing, on the macro definition and on the calling of the macro.

A:

So as Mike Scheutzow mentioned the correct syntax is:
<xacro:macro name = 

I was missing the xacro: tag on both the definition of the macro and the calling of it. An example of how it is now, is below:
Definition:
<xacro:macro name="box_inertia" params="m x y z">
    <inertia ixx="${m*(y*y+z*z)/12}" ixy = "0" ixz = "0" iyy="${m*(x*x+z*z)/12}" iyz = "0" izz="${m*(x*x+z*z)/12}" /> 
</xacro:macro>

Use:
<xacro:box_inertia m="${weight}" x="${length}" y="${width}" z="${height}"/>

Originally posted by jt_axis with karma: 16 on 2022-04-25
This answer was ACCEPTED on the original site
Post score: 0

