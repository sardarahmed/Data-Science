Q:

Is there a way to check for dropped messages that don't have headers?

In particular, I am sending some joy/Joy messages over a WLAN and am hinting ros::TransportHints().unreliable() in the subscriber (the publisher is a joy/joy_node).
I've occasionally seen a delay of > 0.5 s, where the in the received messages based on timing within the subscriber's callback, and I'd like to see if that might have to do with dropped UDP packets. I was thinking that I would just look at the header.seq field in each received message, looking for and increment greater than 1, and then realized that joy/Joy messages have no header.
Am I SOL or is there some way to determine whether messages are being dropped?
I also wonder about out-of-order messages which I think are theoretically possible with UDP and was hoping to also watch out for those in a similar manner. Maybe a Header could be added to joy/Joy in a future release?

Originally posted by Patrick Bouffard on ROS Answers with karma: 2264 on 2011-03-20
Post score: 1

A:

Adding a Header seems like the best solution to me.
For backwards compatibility, maybe create a JoyStamped message.

Originally posted by joq with karma: 25443 on 2011-03-20
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by mmwise on 2011-05-04:
I'm planning on putting a timestamp on a the Joy msg in the next release. These is a ticket here: https://code.ros.org/trac/ros-pkg/ticket/3998
Comment by Patrick Bouffard on 2011-03-20:
Would backwards compatibility really be an issue, though? Usually you wouldn't have one part of a system running say, C-Turtle, and the other Diamondback. Creating a new message type would mean that all publishers and subscribers would have to be recoded. Just changing the message, they wouldn't.

