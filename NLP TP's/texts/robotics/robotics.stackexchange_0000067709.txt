Q:

turtlebot apt-get update has generated an error on minimal.launch

Hi
Just ran apt-get update on a turtlebot install on an odroid C1 (ARM board) running 14.04 and indigo.
robot_state_publihser version is 1.10.4
After the update running minimal.launch I get the rising notes from the turtlebot but output now contains error
odroid@odroid:~$ roslaunch turtlebot_bringup minimal.launch
... logging to /home/odroid/.ros/log/f6f0c208-0052-11e5-a038-001e06c2b101/roslaunch-odroid-1862.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://odroid:57919/

SUMMARY
========

PARAMETERS
 * /app_manager/auto_rapp_installation: False
 * /app_manager/auto_start_rapp: 
 * /app_manager/capability_server_name: capability_server
 * /app_manager/local_remote_controllers_only: False
 * /app_manager/preferred: [{'rocon_apps/chi...
 * /app_manager/rapp_package_blacklist: []
 * /app_manager/rapp_package_whitelist: ['rocon_apps', 't...
 * /app_manager/robot_icon: turtlebot_bringup...
 * /app_manager/robot_name: turtlebot
 * /app_manager/robot_type: turtlebot
 * /app_manager/screen: True
 * /app_manager/simulation: False
 * /bumper2pointcloud/pointcloud_radius: 0.24
 * /capability_server/blacklist: ['std_capabilitie...
 * /capability_server/defaults/kobuki_capabilities/KobukiBringup: kobuki_capabiliti...
 * /capability_server/defaults/kobuki_capabilities/KobukiBumper: kobuki_capabiliti...
 * /capability_server/defaults/kobuki_capabilities/KobukiCliffDetection: kobuki_capabiliti...
 * /capability_server/defaults/kobuki_capabilities/KobukiLED1: kobuki_capabiliti...
 * /capability_server/defaults/kobuki_capabilities/KobukiLED2: kobuki_capabiliti...
 * /capability_server/defaults/kobuki_capabilities/KobukiLED: kobuki_capabiliti...
 * /capability_server/defaults/kobuki_capabilities/KobukiWheelDropDetection: kobuki_capabiliti...
 * /capability_server/defaults/std_capabilities/Diagnostics: turtlebot_capabil...
 * /capability_server/defaults/std_capabilities/DifferentialMobileBase: kobuki_capabiliti...
 * /capability_server/defaults/std_capabilities/LaserSensor: turtlebot_capabil...
 * /capability_server/defaults/std_capabilities/RGBDSensor: turtlebot_capabil...
 * /capability_server/defaults/std_capabilities/RobotStatePublisher: turtlebot_capabil...
 * /capability_server/defaults/turtlebot_capabilities/TurtleBotBringup: turtlebot_capabil...
 * /capability_server/nodelet_manager_name: capability_server...
 * /capability_server/package_whitelist: ['kobuki_capabili...
 * /cmd_vel_mux/yaml_cfg_file: /opt/ros/indigo/s...
 * /description: Kick-ass ROS turtle
 * /diagnostic_aggregator/analyzers/input_ports/contains: ['Digital Input',...
 * /diagnostic_aggregator/analyzers/input_ports/path: Input Ports
 * /diagnostic_aggregator/analyzers/input_ports/remove_prefix: mobile_base_nodel...
 * /diagnostic_aggregator/analyzers/input_ports/timeout: 5.0
 * /diagnostic_aggregator/analyzers/input_ports/type: diagnostic_aggreg...
 * /diagnostic_aggregator/analyzers/kobuki/contains: ['Watchdog', 'Mot...
 * /diagnostic_aggregator/analyzers/kobuki/path: Kobuki
 * /diagnostic_aggregator/analyzers/kobuki/remove_prefix: mobile_base_nodel...
 * /diagnostic_aggregator/analyzers/kobuki/timeout: 5.0
 * /diagnostic_aggregator/analyzers/kobuki/type: diagnostic_aggreg...
 * /diagnostic_aggregator/analyzers/power/contains: ['Battery', 'Lapt...
 * /diagnostic_aggregator/analyzers/power/path: Power System
 * /diagnostic_aggregator/analyzers/power/remove_prefix: mobile_base_nodel...
 * /diagnostic_aggregator/analyzers/power/timeout: 5.0
 * /diagnostic_aggregator/analyzers/power/type: diagnostic_aggreg...
 * /diagnostic_aggregator/analyzers/sensors/contains: ['Cliff Sensor', ...
 * /diagnostic_aggregator/analyzers/sensors/path: Sensors
 * /diagnostic_aggregator/analyzers/sensors/remove_prefix: mobile_base_nodel...
 * /diagnostic_aggregator/analyzers/sensors/timeout: 5.0
 * /diagnostic_aggregator/analyzers/sensors/type: diagnostic_aggreg...
 * /diagnostic_aggregator/base_path: 
 * /diagnostic_aggregator/pub_rate: 1.0
 * /icon: turtlebot_bringup...
 * /interactions/interactions: ['turtlebot_bring...
 * /interactions/pairing: True
 * /interactions/rosbridge_address: localhost
 * /interactions/rosbridge_port: 9090
 * /interactions/webserver_address: webapp.robotconce...
 * /mobile_base/base_frame: base_footprint
 * /mobile_base/battery_capacity: 16.5
 * /mobile_base/battery_dangerous: 13.2
 * /mobile_base/battery_low: 14.0
 * /mobile_base/cmd_vel_timeout: 0.6
 * /mobile_base/device_port: /dev/kobuki
 * /mobile_base/odom_frame: odom
 * /mobile_base/publish_tf: True
 * /mobile_base/use_imu_heading: True
 * /mobile_base/wheel_left_joint_name: wheel_left_joint
 * /mobile_base/wheel_right_joint_name: wheel_right_joint
 * /name: turtlebot
 * /robot/name: turtlebot
 * /robot/type: turtlebot
 * /robot_description: <?xml version="1....
 * /robot_state_publisher/publish_frequency: 5.0
 * /rosdistro: indigo
 * /rosversion: 1.11.13
 * /turtlebot_laptop_battery/acpi_path: /sys/class/power_...
 * /use_sim_time: False
 * /zeroconf/zeroconf/services: [{'domain': 'loca...

NODES
  /zeroconf/
    zeroconf (zeroconf_avahi/zeroconf)
  /
    app_manager (rocon_app_manager/rapp_manager.py)
    bumper2pointcloud (nodelet/nodelet)
    capability_server (capabilities/capability_server)
    cmd_vel_mux (nodelet/nodelet)
    diagnostic_aggregator (diagnostic_aggregator/aggregator_node)
    interactions (rocon_interactions/interactions_manager.py)
    master (rocon_master_info/master.py)
    mobile_base (nodelet/nodelet)
    mobile_base_nodelet_manager (nodelet/nodelet)
    robot_state_publisher (robot_state_publisher/robot_state_publisher)
    turtlebot_laptop_battery (laptop_battery_monitor/laptop_battery.py)

auto-starting new master
process[master]: started with pid [1876]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to f6f0c208-0052-11e5-a038-001e06c2b101
process[rosout-1]: started with pid [1889]
started core service [/rosout]
process[robot_state_publisher-2]: started with pid [1907]
[robot_state_publisher-2] process has died [pid 1907, exit code -7, cmd /opt/ros/indigo/lib/robot_state_publisher/robot_state_publisher __name:=robot_state_publisher __log:=/home/odroid/.ros/log/f6f0c208-0052-11e5-a038-001e06c2b101/robot_state_publisher-2.log].
log file: /home/odroid/.ros/log/f6f0c208-0052-11e5-a038-001e06c2b101/robot_state_publisher-2*.log
process[diagnostic_aggregator-3]: started with pid [1908]
process[mobile_base_nodelet_manager-4]: started with pid [1927]
process[mobile_base-5]: started with pid [1931]
process[cmd_vel_mux-6]: started with pid [2015]
process[bumper2pointcloud-7]: started with pid [2043]
process[turtlebot_laptop_battery-8]: started with pid [2120]
process[capability_server-9]: started with pid [2148]
process[app_manager-10]: started with pid [2170]
process[master-11]: started with pid [2179]
[WARN] [WallTime: 1432279214.111895] Battery : unable to check laptop battery info [/sys/class/power_supply/BAT0/charge_full_design || /sys/class/power_supply/BAT0/energy_full_design does not exist]
process[interactions-12]: started with pid [2227]
process[zeroconf/zeroconf-13]: started with pid [2258]
[turtlebot_laptop_battery-8] process has finished cleanly
log file: /home/odroid/.ros/log/f6f0c208-0052-11e5-a038-001e06c2b101/turtlebot_laptop_battery-8*.log
[ INFO] [1432279216.138766005]: Zeroconf: service successfully established [turtlebot][_ros-master._tcp][11311]
/opt/ros/indigo/lib/python2.7/dist-packages/bondpy/bondpy.py:114: SyntaxWarning: The publisher should be created with an explicit keyword argument 'queue_size'. Please see http://wiki.ros.org/rospy/Overview/Publishers%20and%20Subscribers for more information.
  self.pub = rospy.Publisher(self.topic, Status)
/opt/ros/indigo/lib/python2.7/dist-packages/bondpy/bondpy.py:114: SyntaxWarning: The publisher should be created with an explicit keyword argument 'queue_size'. Please see http://wiki.ros.org/rospy/Overview/Publishers%20and%20Subscribers for more information.
  self.pub = rospy.Publisher(self.topic, Status)

log folder after running contains this:
odroid@odroid:~/.ros/log/f6f0c208-0052-11e5-a038-001e06c2b101$ ls
app_manager-10-stdout.log           master.log
app_manager-10.log                  mobile_base-5-stdout.log
bumper2pointcloud-7-stdout.log      mobile_base_nodelet_manager-4-stdout.log
capability_server-9-stdout.log      robot_state_publisher-2-stdout.log
capability_server-9.log             roslaunch-odroid-1862.log
cmd_vel_mux-6-stdout.log            roslaunch-odroid-2303.log
diagnostic_aggregator-3-stdout.log  rosout-1-stdout.log
interactions-12-stdout.log          rosout.log
interactions-12.log                 turtlebot_laptop_battery-8-stdout.log
master-11-stdout.log                turtlebot_laptop_battery-8.log
master-11.log
odroid@odroid:~/.ros/log/f6f0c208-0052-11e5-a038-001e06c2b101$ cat robot_state_publisher-2-stdout.log
odroid@odroid:~/.ros/log/f6f0c208-0052-11e5-a038-001e06c2b101$

Have tried switching to staging, but no newer versions are available. Tried a fresh install on on odroid U3 and get the same error on there.
Have tried reinstalling from scratch, building turtlebot from source, with no success.
Running roswtf on the launch file produces
$ roswtf minimal.launch
Loaded plugin tf.tfwtf
Traceback (most recent call last):
  File "/opt/ros/indigo/bin/rosboost-cfg", line 35, in <module>
    rosboost_cfg.main()
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rosboost_cfg/rosboost_cfg.py", line 362, in main
    output = lflags(ver, options.lflags.split(','))
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rosboost_cfg/rosboost_cfg.py", line 280, in lflags
    s += lib_flags(ver, lib) + " "
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rosboost_cfg/rosboost_cfg.py", line 270, in lib_flags
    lib = find_lib(ver, name)
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rosboost_cfg/rosboost_cfg.py", line 240, in find_lib
    raise BoostError('Could not locate library [%s], version %s'%(name, ver))
rosboost_cfg.rosboost_cfg.BoostError: "Could not locate library [regex], version (1, 54, 0, '/usr', '/usr/include', True, True)"

this text is repeated 4 times (From the traceback line, and then prints out what is below and roswtf terminates
=
===============================================================================
Static checks summary:

No errors or warnings
================================================================================
Beginning tests of your ROS graph. These may take awhile...
analyzing graph...
... done analyzing graph
running graph rules...
... done running graph rules

Online checks summary:

Found 1 warning(s).
Warnings are things that may be just fine, but are sometimes at fault

WARNING The following node subscriptions are unconnected:
 * /rosout:
   * /rosout

googling that gives previous similar errors, but not for regex -eg https://github.com/ros/ros/issues/62 and https://github.com/ros/ros/issues/66
it might be related to those
Tried following this  http://answers.ros.org/question/11155/rospack-ends-with-rosboost_cfgrosboost_cfgboosterror/
as it seems to be the same issue
got this result
odroid@odroid:/opt/ros/indigo/share/turtlebot_bringup/launch$ cd
odroid@odroid:~$ export ROS_BOOST_LIB_DIR_NAME=/usr/share/doc/
odroid@odroid:~$ echo $ROS_BOOST_LIB_DIR_NAME
/usr/share/doc/
odroid@odroid:~$ ls /usr/share/doc/ | grep boost-regex
libboost-regex-dev
libboost-regex1.54-dev
libboost-regex1.54.0
odroid@odroid:~$ rosboost-cfg --libs regex
Traceback (most recent call last):
  File "/opt/ros/indigo/bin/rosboost-cfg", line 35, in <module>
    rosboost_cfg.main()
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rosboost_cfg/rosboost_cfg.py", line 350, in main
    output = libs(ver, options.libs.split(','))
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rosboost_cfg/rosboost_cfg.py", line 286, in libs
    s += find_lib(ver, lib, True) + " "
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rosboost_cfg/rosboost_cfg.py", line 251, in find_lib
    raise BoostError('Could not locate library [%s], version %s in lib directory [%s]'%(name, ver, dir))
rosboost_cfg.rosboost_cfg.BoostError: "Could not locate library [regex], version (1, 54, 0, '/usr', '/usr/include', True, True) in lib directory [/usr/share/doc/]"

and same error on minimal.launch
changed ROS_BOOST_LIB_DIR_NAME to /usr/lib/arm-linux-gnueabihf/ based on a webpage that I can't remember, but could find again if needed. This got rid of the errors in roswtf minimal.launch, but robot_state_publisher still fails when it is run
testing on a amd64 install roswtf minimal.launch generates the same errors, but minimal.launch runs successfully, so it would appear that was a dead end.
running with gdb trace as requested produces this
setting /run_id to 5d69beda-02c0-11e5-9ec8-001e06c2b101
process[rosout-1]: started with pid [6778]
started core service [/rosout]
process[robot_state_publisher-2]: started with pid [6796]
process[diagnostic_aggregator-3]: started with pid [6798]
[tcsetpgrp failed in terminal_inferior: Inappropriate ioctl for device]
[tcsetpgrp failed in terminal_inferior: Inappropriate ioctl for device]
[tcsetpgrp failed in terminal_inferior: Inappropriate ioctl for device]
process[mobile_base_nodelet_manager-4]: started with pid [6820]
process[mobile_base-5]: started with pid [6858]
process[cmd_vel_mux-6]: started with pid [6914]
process[bumper2pointcloud-7]: started with pid [6974]
process[turtlebot_laptop_battery-8]: started with pid [7040]
process[capability_server-9]: started with pid [7060]
[tcsetpgrp failed in terminal_inferior: Inappropriate ioctl for device]

do those messages mean I need to run roslaunch as root ?
note - the turtlebot is not plugged in as I am at home at the moment in case any of those are related to that - launch previously worked with no turtlebot
ok messages are benign https://github.com/ros/ros_comm/issues/223
but means there is nothing printed there that seems to be useful - and presumably as robot_state_publisher isn't crashing now there is no core dump generated ? looking in .ros there is a file called roscore-11311.pid
odroid@odroid:~/.ros$ cat roscore-11311.pid
6829odroid@odroid:~/.ros$ 

tried with the screen version, but get
odroid@odroid:~$ screen -D -R
Aborted
odroid@odroid:~$ 

when try to look at gdb
tried the screen version again, and it appears to have worked, result in screen is here
GNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1
Copyright (C) 2014 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "arm-linux-gnueabihf".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
<http://www.gnu.org/software/gdb/documentation/>.
For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from /home/odroid/ros/devel/lib/robot_state_publisher/robot_state_publisher...(no debugging symbols found)...done.
(gdb) 

but typing bt at gdb prompt gets response No stack

Originally posted by nickw on ROS Answers with karma: 1504 on 2015-05-21
Post score: 5

Original comments
Comment by tfoote on 2015-05-21:
Please document the versions of the packages you're running as well as the full console output of what you're running.
Comment by nickw on 2015-05-22:
further info - updated raspberry pi, once updated, same error. On VM machine (not ARM) updated still works
turtlebot packages updated on pi (can't list all in comment) turtlebot, turtlebot-bringup, turtlebot-capabilities, turtlebot-description, turtlebot-teleop
Comment by nickw on 2015-05-22:
turtlebot-bringup, turtlebot-capabilities, turtlebot-description, turtlebot-teleop are all version 2.3.11
Comment by Cubex on 2015-05-24:
I can confirm it has stopped working on ODROID XU3 as well, I guess it only affects ARM processors. Is there a way to revert to the working version of robot_state_publisher? Need my robot to work real fast
Comment by tfoote on 2015-05-25:
Can you get a gdb backtrace? tutorial for launching with gdb
Comment by Cubex on 2015-05-28:
The gdb backtrace resulted in:
Using host libthread_db library "/lib/arm-linux-gnueabihf/libthread_db.so.1".
Program received signal SIGBUS, Bus error.
0xb661ac74 in ?? () from /lib/arm-linux-gnueabihf/libpcre.so.3
PS. I'm using robot_state_publisher in my own robot, not turtlebot

A:

I think I have tracked it down - building robot_model from most current source in a workspace stops robot_state_publisher from crashing. Have tried it on a xu3 and a raspberry pi2 and it has worked on both.

Originally posted by nickw with karma: 1504 on 2015-05-30
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by tfoote on 2015-05-30:
Interesting, thanks for tracking that down. I'll have to take a look at why that makes a difference.
Comment by Cubex on 2015-06-01:
weird, I'm still unable to make it work, it always die with error code -7
Comment by nickw on 2015-06-01:
I installed dependencies for the workspace as well (rosdep install --from-paths src -i -y), so that may pull in something relevant, and assume you have sourced the setup file after building the workspace? I am just using standard turtlebot install, but haven't tested with actual robot yet
Comment by Cubex on 2015-06-01:
Sorry, quite a newbie here, what do you mean by building robot_model, i assume it's for turtlebot? What if I'm using my own robot model for rviz?
Comment by ahendrix on 2015-06-01:
http://wiki.ros.org/robot_model
Comment by nickw on 2015-06-01:
robot_model build a robot model from the files you have, it is not the robot model of the robot.
Comment by Cubex on 2015-06-02:
Ok, I've tried rebuilding all of them. Now, the error code has changed from -7 to 127 and still died upon launch
EDIT: Nope, still error -7, and when rosrun robot_state_publisher just to check, it returns Bus error.
Comment by Cubex on 2015-06-02:
I don't know if it's related, but running rviz returns bus error while most people complained about seg fault
Comment by Cubex on 2015-06-03:
It's finally working with the rebuilt robot_model, 1 version before the current one
Comment by tfoote on 2015-06-03:
Can you clarify specifically which version works for you?
Comment by Cubex on 2015-06-03:
robot_model release: 1.11.6.
The robot_state_publisher using robot_model release 1.11.7 still failed to launch when I built that robot_model in my workspace
Comment by nickw on 2015-06-03:
for me
commit 6534424a2 works
commit 3c5521790 works
commit 04f763742 doesn't
do you want me to go further back to see where it stopped working originally ?
Comment by Kristof on 2015-08-23:
I had the same problem on a cubieboard2 - and rebuilding robot_model from source fixed it indeed. Thanks!
Comment by NStiurca on 2015-09-10:
This did NOT work for me on the Odroid XU3 running Ubuntu 14.04, fully upgraded. See my answer below with my workaround.

