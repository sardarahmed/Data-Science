Q:

How does one assign values to messages with arrays in C++

This is probably more C++ focused, but here is my issue:
int8_t vi[height * width];
// vi has had work done on it between here
nav_msgs::OccupancyGrid debMap;
debMap.data = vi; // error here

The resulting error is:
no operator "=" matches these operands -- operand types are: std::vector<int8_t, std::allocator<int8_t>> = int8_t [height * width]

Now in python something like this would be an issue. In the past I have been using memcpy to get around this, but I am less certain that that is the approach to take for this.
How can I add array data to a message with an array.

Originally posted by cwillia109 on ROS Answers with karma: 49 on 2020-10-19
Post score: 1

Original comments
Comment by praskot on 2020-10-19:
I believe, one brute force method is,
for (int i = 0; i<height*width; i++) {
  debMap.data.pushback(vi[i]);
}

I'm dunno if there is a way to directly assign it to data. May be treated debMap.data as std::vector and use one of the suggested methods here.

A:

Here's one way to do it:
debMap.data.assign(vi, vi + height * width);

Cribbed from this answer on StackOverflow.

Originally posted by KenYN with karma: 541 on 2020-10-20
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by cwillia109 on 2020-10-22:
This worked like a charm. Thank you!

