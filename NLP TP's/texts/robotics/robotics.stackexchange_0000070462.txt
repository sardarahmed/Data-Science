Q:

Get information about topic message at runtime

I am trying to build an interface that universally bridges ROS topics to another system.
I am importing the message type at runtime:
importcom = (  # import type
    "from " +
    topic_class +
    ".msg import " +
    topic_type
)
exec(importcom, globals())

This allows me to later subscribe to this topic dynamically at runtime.
My question is now: How can I gain insight in the structure of this message at runtime? Ideally I need a json object that includes the types of all the parameters that i expect in a message. e.g.:
{
   "angular" :
      {
           "x": float
           "y": float 
   "linear" :
      {
           "x": float
           "y": float 
.... 

(or something like this)

Originally posted by ct2034 on ROS Answers with karma: 862 on 2015-11-18
Post score: 1

A:

I don't know about any existing way to get json directly, but the output of rosmsg show should be relatively easy to parse and transform into json. e.g.:
$ rosmsg show sensor_msgs/CameraInfo
Header header
  uint32 seq
  time stamp
  string frame_id
uint32 height
uint32 width
RegionOfInterest roi
  uint32 x_offset
  uint32 y_offset
  uint32 height
  uint32 width
float64[5] D
float64[9] K
float64[9] R
float64[12] P

And if you're into python, you can checkout the implementation of rosmsg here

Originally posted by Dimitri Schachmann with karma: 789 on 2015-11-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Justin_Qiu on 2018-05-09:
Could you give some hints how to get the API of rosmsg? Because I found the API of rosgraph which can parse the information about which topics the nodes are subscribing from or publishing to. But I didn't find the API to access outputs of "$rosmsg show".

