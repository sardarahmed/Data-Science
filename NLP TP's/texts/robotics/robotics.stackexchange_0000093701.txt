Q:

simple question about rtabmap

Hello!
I am just simple guy, I have robot and want my robot avoiding obstacles.
I dont have much furniture in my room, but certainly I want that my robot could avoid tables with thin legs.
I want to use some camera because lidar does not help in this case.
I have jetson tx2, turtlebot3 waffle, lidar, and d435 camera.
I am trying to use rtabmap to project such tables on 2d occupancy grid.
And rtabmap does not project obstacles at all. There is nothing from camera on 2d occupancy grid.

As I understand rtabmap should project obstacles onto 2d map, right? Maybe, I dont understand something about using rtabmap.
MaxObstacleHeight is set to 1.7 meters. I tried to set Grid/MapFrameProjection to true, still does not help.
<param name="RGBD/NeighborLinkRefining" type="string" value="true"/>
<param name="RGBD/ProximityBySpace" type="string" value="true"/>
<param name="RGBD/OptimizeFromGraphEnd" type="string" value="false"/>
<param name="RGBD/AngularUpdate" type="string" value="0.05"/>
<param name="RGBD/LinearUpdate" type="string" value="0.05"/>
<param name="Optimizer/Slam2D" type="string" value="true"/>
<param name="Reg/Force3DoF" type="string" value="true"/>
<param name="Reg/Strategy" type="string" value="1"/> <!— 1=ICP —>
<param name="Vis/MinInliers" type="string" value="5"/>
<param name="Vis/InlierDistance" type="string" value="0.1"/>
<param name="Kp/MaxDepth" type="string" value="1.75"/>
<param name="Vis/MaxDepth" type="string" value="1.75"/>
<param name="Rtabmap/TimeThr" type="string" value="700"/>
<param name="Rtabmap/DetectionRate" type="string" value="$(arg rate)" />
<param name="Mem/RehearsalSimilarity" type="string" value="0.45"/>
<param name="Grid/MaxObstacleHeight" type="string" value="1.7" />
<param name="Grid/NoiseFilteringRadius" type="string" value="0.05"/>
<param name="Grid/NoiseFilteringMinNeighbors" type="string" value="5"/>

what can I do to make my robot avoiding obstacles? why there is no obstacles on 2d map? Are they supposed to be projected?

Originally posted by june2473 on ROS Answers with karma: 83 on 2019-11-01
Post score: 0

Original comments
Comment by matlabbe on 2019-11-03:
If the turtlebot has a lidar, the map may be created from laser scans. In your case, you want the map to be created from the camera. Set explictiy Grid/FromDepth to true. See @FailFTW answer for more info and optimized segmentation approach if we are moving in 2D.
Comment by june2473 on 2019-11-04:
Thanks for your support!
I left comment down to @FailFTW answer.
Grid/FromDepth parameter has really changed my 2d map as I want, but 2d map is very teared into pieces.
https://yadi.sk/i/dnuxOQ6GRENmLA
which parameters can I change to make 2d map more continuous?
You can answer down to @FailFTW answer.

A:

setting  Grid/NoiseFilteringRadius = 0 helped

Originally posted by june2473 with karma: 83 on 2019-11-17
This answer was ACCEPTED on the original site
Post score: 0

