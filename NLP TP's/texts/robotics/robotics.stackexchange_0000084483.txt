Q:

Cannot initialize this controller, because it failed to be constructed

Hi, I am trying to launch my environment from another catkin workspace, but when I run the same commands I get different results, although I've built it the same (although this catkin workspace also contains different files, because I got it from installing the gym-gazebo). The other files don't look like they invade the space of my gripper file, is there a way to compare between two workspaces?
When i run my files, the console logs:
[ INFO] [1514898661.365225923, 0.070000000]: Physics dynamic reconfigure ready.
[INFO] [1514898661.583828, 0.285000]: Controller Spawner: Waiting for service controller_manager/switch_controller
[INFO] [1514898661.586144, 0.286000]: Controller Spawner: Waiting for service controller_manager/unload_controller
[INFO] [1514898661.588326, 0.286000]: Loading controller: joint_trajectory_controller
[ERROR] [1514898661.602523595, 0.296000000]: Cannot initialize this controller because it failed to be constructed
*** Error in `gzserver': munmap_chunk(): invalid pointer: 0x00007f9e94b588d8 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x777e5)[0x7f9f3bcc67e5]
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x1a8)[0x7f9f3bcd3698]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZN18controller_manager17ControllerManager14loadControllerERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE+0x1efe)[0x7f9e94c070c0]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZN18controller_manager17ControllerManager17loadControllerSrvERN23controller_manager_msgs22LoadControllerRequest_ISaIvEEERNS1_23LoadControllerResponse_IS3_EE+0x27f)[0x7f9e94c0bea3]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZNK5boost4_mfi3mf2IbN18controller_manager17ControllerManagerERN23controller_manager_msgs22LoadControllerRequest_ISaIvEEERNS4_23LoadControllerResponse_IS6_EEEclEPS3_S8_SB_+0x76)[0x7f9e94c30448]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZN5boost3_bi5list3INS0_5valueIPN18controller_manager17ControllerManagerEEENS_3argILi1EEENS7_ILi2EEEEclIbNS_4_mfi3mf2IbS4_RN23controller_manager_msgs22LoadControllerRequest_ISaIvEEERNSE_23LoadControllerResponse_ISG_EEEENS0_5list2ISI_SL_EEEET_NS0_4typeISP_EERT0_RT1_l+0x87)[0x7f9e94c2cba5]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZN5boost3_bi6bind_tIbNS_4_mfi3mf2IbN18controller_manager17ControllerManagerERN23controller_manager_msgs22LoadControllerRequest_ISaIvEEERNS6_23LoadControllerResponse_IS8_EEEENS0_5list3INS0_5valueIPS5_EENS_3argILi1EEENSJ_ILi2EEEEEEclIS9_SC_EEbRT_RT0_+0x5d)[0x7f9e94c28d8b]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZN5boost6detail8function21function_obj_invoker2INS_3_bi6bind_tIbNS_4_mfi3mf2IbN18controller_manager17ControllerManagerERN23controller_manager_msgs22LoadControllerRequest_ISaIvEEERNS9_23LoadControllerResponse_ISB_EEEENS3_5list3INS3_5valueIPS8_EENS_3argILi1EEENSM_ILi2EEEEEEEbSD_SG_E6invokeERNS1_15function_bufferESD_SG_+0x33)[0x7f9e94c24d83]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZNK5boost9function2IbRN23controller_manager_msgs22LoadControllerRequest_ISaIvEEERNS1_23LoadControllerResponse_IS3_EEEclES5_S8_+0x71)[0x7f9e94c3e229]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZN3ros11ServiceSpecIN23controller_manager_msgs22LoadControllerRequest_ISaIvEEENS1_23LoadControllerResponse_IS3_EEE4callERKN5boost8functionIFbRS4_RS6_EEERNS_21ServiceSpecCallParamsIS4_S6_EE+0x45)[0x7f9e94c3aca2]
/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/devel/lib/libcontroller_manager.so(_ZN3ros22ServiceCallbackHelperTINS_11ServiceSpecIN23controller_manager_msgs22LoadControllerRequest_ISaIvEEENS2_23LoadControllerResponse_IS4_EEEEE4callERNS_31ServiceCallbackHelperCallParamsE+0xfb)[0x7f9e94c35deb]
/opt/ros/kinetic/lib/libroscpp.so(_ZN3ros15ServiceCallback4callEv+0x241)[0x7f9f0f2eabf1]
/opt/ros/kinetic/lib/libroscpp.so(_ZN3ros13CallbackQueue9callOneCBEPNS0_3TLSE+0x4a0)[0x7f9f0f33e210]
/opt/ros/kinetic/lib/libroscpp.so(_ZN3ros13CallbackQueue7callOneENS_12WallDurationE+0x264)[0x7f9f0f33ee74]
/opt/ros/kinetic/lib/libroscpp.so(_ZN3ros16AsyncSpinnerImpl10threadFuncEv+0xb5)[0x7f9f0f39b945]
/usr/lib/x86_64-linux-gnu/libboost_thread.so.1.58.0(+0x115d5)[0x7f9f391d45d5]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x76ba)[0x7f9f3b74f6ba]
/lib/x86_64-linux-gnu/libc.so.6(clone+0x6d)[0x7f9f3bd563dd]
======= Memory map: ========

Here, a lot of stuff pointing to different files, don't know if this is relevant, but at the end
Traceback (most recent call last):
  File "/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/src/ros_control/controller_manager/scripts/spawner", line 212, in <module>
    if __name__ == '__main__': main()
  File "/home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/src/ros_control/controller_manager/scripts/spawner", line 190, in main
    resp = load_controller(name)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/rospy/impl/tcpros_service.py", line 435, in __call__
    return self.call(*args, **kwds)
  File "/opt/ros/kinetic/lib/python2.7/dist-packages/rospy/impl/tcpros_service.py", line 525, in call
    raise ServiceException("transport error completing service call: %s"%(str(e)))
rospy.service.ServiceException: transport error completing service call: unable to receive data from sender, check sender's logs for details
[INFO] [1514898661.737440, 0.317000]: Shutting down spawner. Stopping and unloading controllers...
Aborted (core dumped)
[gazebo-2] process has died [pid 4713, exit code 134, cmd /home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/src/gazebo_ros_pkgs/gazebo_ros/scripts/gzserver -e ode /home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/src/gripper_gazebo/worlds/gripper.world __name:=gazebo __log:=/home/user/.ros/log/5fc1b9c4-efbe-11e7-82f4-1c1b0d9a79ac/gazebo-2.log].
log file: /home/user/.ros/log/5fc1b9c4-efbe-11e7-82f4-1c1b0d9a79ac/gazebo-2*.log
[WARN] [1514898692.747412, 0.317000]: Controller Spawner couldn't reach controller_manager to take down controllers. Waited for 30 second(s).
[gripper/controller_spawner-5] process has died [pid 4726, exit code 1, cmd /home/user/smart_robotics_v2/gym-gazebo/gym_gazebo/envs/installation/catkin_ws/src/ros_control/controller_manager/scripts/spawner joint_trajectory_controller joint_state_controller --timeout 50 __name:=controller_spawner __log:=/home/user/.ros/log/5fc1b9c4-efbe-11e7-82f4-1c1b0d9a79ac/gripper-controller_spawner-5.log].
log file: /home/user/.ros/log/5fc1b9c4-efbe-11e7-82f4-1c1b0d9a79ac/gripper-controller_spawner-5*.log

Still, on my own workspace it runs perfectly fine, the controller spawns and I can control it with python interface just fine.

Originally posted by Fiddle on ROS Answers with karma: 64 on 2018-01-02
Post score: 0

A:

Ok, so I figured out the answer, albeit it was pretty tricky. I noticed, that the gazego_ros_pkgs and ros_control were in different versions than in the official repository, so I deleted and reinstalled them according to the docs, now everything works again.

Originally posted by Fiddle with karma: 64 on 2018-01-03
This answer was ACCEPTED on the original site
Post score: 0

