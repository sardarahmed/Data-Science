Q:

robot slips after upgrade to kinetic

Dear all,
After upgrading from Ubuntu 14.04 to 16.04 and from Indigo to Kinetic I'm experiencing a weird behavior from Gazebo and the HyQ robot model.
The complete robot model can be found here.
I made the minimal set of modifications to make it compatible with the new xacro standard (see corresponding branch)
Even after setting unrealistically high friction coefficients in the corresponding tag (see here), the robot can't walk and slips badly.
With the same description on Gazebo 2/ROS Indigo the robot always was fine.
Is there a new way to define friction between feet and ground? Am I missing a tag or something?
I saw that in Gazebo 7 there is a torsional friction, but I can't find from URDF documentation how to add it.
Also, there are many SDF-related tags which don't map well to URDF, like contact slip factor.
UPDATE:
I've narrowed down the issue to this portion of the URDF:
        <!-- Foot link -->
        <link name="${name}_foot">
            <inertial>
                <origin xyz="0 0 0"/>
                <mass value="0.0"/>
                <inertia ixx="0.0" iyy="0.0" izz="0.0" ixy="0.0" ixz="0.0" iyz="0.0"/>
            </inertial>
            <visual>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                    <sphere radius="0.02175"/>
                </geometry>
                <material name="black"/>
            </visual>
            <collision>
                <origin xyz="0 0 0" rpy="0 0 0"/>
                <geometry>
                    <sphere radius="0.02175"/>
                </geometry>
            </collision>

        </link>

Apparently, a collision set as a perfect sphere is handled in a different way from Gazebo 2 to 7.
If I remove the collision field, the tip of the leg (which is not spherical) is taken for the collision, and the robot works fine.
My suspect goes to the torsional friction feature, which has been introduced in new versions of Gazebo.
How can I set torsional friction from URDF?
This answer points to a tutorial which explains how to set it in SDF, not URDF.

Originally posted by mark_vision on ROS Answers with karma: 275 on 2017-09-25
Post score: 0

Original comments
Comment by gvdhoorn on 2017-09-25:
Even though you're using URDF, I feel this is more a Gazebo-specific question. I would recommend you ask it over at answers.gazebosim.org, as the people there have more experience with the changes to the physics engines between Gazebo 2 and 7.
Comment by mark_vision on 2017-09-27:
I've commented on this question, hoping to be approved and answered.

A:

The problem was related to the missing tags <fdir1> and  <minDepth> see here for more detail.

Originally posted by mark_vision with karma: 275 on 2017-10-16
This answer was ACCEPTED on the original site
Post score: 1

