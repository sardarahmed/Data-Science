Q:

Putting a sensor_msgs/Image into a message, getting it back, and converting it for OpenCV?

I'm just doing this wrong somehow.
I've got a Sensor_msgs/Image already. I want to put it into my message which has "Sensor_msgs/Image image" in it's definition.
Can I just do this:
msg.image = *imgPtr;
Or do I need to do some form of deep copy? The data types are a bit too complicated for me to figure out what's going on.
Later, in a service, I want to extract that image and convert it to a IplImage* for use with OpenCV. i'm trying this:
cv_img = cv_bridge::toCvCopy(image, enc::BGR8);
IplImage img; 
img = cv_img->image;
 And it seems to be working alright now, but it's hard to tell since i think that first bit is not working.

Originally posted by Murph on ROS Answers with karma: 1033 on 2011-05-01
Post score: 1

A:

I suggest you take a look at the cv_bridge tutorials

Originally posted by tfoote with karma: 58457 on 2011-05-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by tfoote on 2011-05-06:
All messages should do a full copy on assignment.
Comment by Murph on 2011-05-02:
Any idea on the first part - do i need to do a deep copy or something to put an image into the message file? I think the Image i'm sending is not working right now.

