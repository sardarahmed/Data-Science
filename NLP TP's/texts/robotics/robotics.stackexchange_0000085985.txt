Q:

rostest: fails when using ROS_HOSTNAME (single PC)

My rostest fails with this error:
Couldn't find an AF_INET address for [mypc.local]

It does not fail consistently in the same place.
I have no problems with:
ping mypc.local

However, rostest succeeds when run like this:
roscore &
rostest --reuse-master foo foo.test

And it also succeeds when doing:
unset ROS_HOSTNAME
export ROS_IP=<my IP address>
rostest foo foo.test

... but I do not want to maintain a fixed IP, that's the whole point of DNS!

Why is ROS_HOSTNAME not working for my rostest?
Why is the failure not consistent? Could this be a symptom of a parameter server with too high load?

Originally posted by knxa on ROS Answers with karma: 811 on 2018-03-19
Post score: 0

Original comments
Comment by gvdhoorn on 2018-03-19:
Intermittent failures in hostname resolution could cause this. The fact that ping works does not guarantee your infrastructure is ok. Is mypc.local set in /etc/hosts, or is a DNS serving that domain? ROS_IP working always would seem to point to problems with DNS.
Comment by knxa on 2018-03-19:
Thanks. I have only mypc in /etc/hosts. If I add mypc.local, my rostest works. But I guess I still will have the problem in a multi-machine scenario, where other machines tries to lookup mypc.local?
Do you know of any tools to test the consistency of hostname resolution?
Comment by gvdhoorn on 2018-03-19:
.. experience with any tools in particular, so can't recommend any.
Comment by knxa on 2018-03-19:
Can you explain why my rostest works with the --reuse-master option?
In all the above, does it matter what ROS_MASTER_URI is set to? (It is http://localhost:11311)
Comment by gvdhoorn on 2018-03-19:\

Can you explain why my rostest works with the --reuse-master option?

No.

In all the above, does it matter what ROS_MASTER_URI is set to? (It is http://localhost:11311)

you should not need to set ROS_MASTER_URI unless:

this is a multi-homed system and the default doesn't work.

..
Comment by gvdhoorn on 2018-03-19:\

this is a multi-host ROS application

localhost is fine, as long as you have a roscore running that is reachable via that hostname.

A:

If it works when you add the hostname to /etc/hosts that would definitely point to a DNS issue. Whether that is on your machine or with the DNS, I don't know.

Do you know of any tools to test the consistency of hostname resolution?

No, sorry. I'm sure they exist, but I don't have any ..

Originally posted by gvdhoorn with karma: 86574 on 2018-03-19
This answer was ACCEPTED on the original site
Post score: 1

