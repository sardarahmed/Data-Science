Q:

Gazebo or Rviz (or Player/Stage)?

Hi, I'm working on my autonomous RC car, and would like to use ROS to help me visualize and simulate driving the RC car around a track.
The car is Arduino based, and all sensors and calculations are done onboard.
YouTube video: Here is the actual environment that my autonomous car drives in.
A friend of mine put together a simple visualization in javascript (see screenshot below) where we can see the car, the red square, drive around the track. The IR sensors it uses are represented as lines going from the car to the walls. This was really nice, and gave a good visualization of when the car decided to turn based on IR sensor inputs.

Now, I'd like to use ROS (and related software) to try and accomplish the same. I've found Gazebo, and have been experimenting briefly with it to create a world and a model, but I'm pretty far away from having a fully functioning simulation.
Then I also came across RViz, which also seems to be able to do something like this. Before I ditch Gazebo I wanted to ask you guys what you would do to accomplish this. Is this a task for Gazebo? Or Rviz? Or something else?
I'll appreciate any feedback you might have.

Originally posted by FrodeL on ROS Answers with karma: 3 on 2016-12-07
Post score: 0

A:

IN GENERAL
Gazebo is more for if you don't have physical hardware. It has a physics engine that allows you to simulate the hardware and an environment.
RVIZ is more for if you do have physical hardware and would like to visualize the data
CAVEATS
Gazebo can be nice even if you have hardware. For instance in a classroom environment with 30 students all trying to use the same robot. Students could use gazebo to simulate and then use the real robot to test, reducing load on the real robot.
RVIZ is useful in both situations, whether the sensor data is real or simulated its nice to be able to visualize it.

Originally posted by shoemakerlevy9 with karma: 545 on 2016-12-07
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by gvdhoorn on 2016-12-07:
Gazebo is always useful: I would not want to develop for / on any robot without having a simulation around. The fact that I can (almost) effortlessly switch between a real and a simulated version of my robot (without changing application code) is invaluable.
Comment by FrodeL on 2016-12-07:
In this scenario I do have physical hardware available, BUT would like to use software / simulations to develop the algorithms that the car should use to navigate the track. I imagine the development process will be a lot faster than trying out new firmware in the physical car all the time.
Comment by FrodeL on 2016-12-07:
So I'm imagining mocking up a simulation environment (being Gazebo or Rviz), where I can run some C++ based code (from a ROS node??) which uses virtual IR sensors in the virtual racetrack, and when happy with the result convert that C++ code over to the Arduino on the physical car.
Comment by shoemakerlevy9 on 2016-12-07:
That sounds like a good plan. Just be warned that there can be issues that arise in the real world that don't in simulation, and vise versa. I have spent many an hour debugging simulation only to realize that it worked when I ran it on the real robot. That happens more for humanoid robots though.
Comment by FrodeL on 2016-12-07:
Will Rviz allow me to make a virtual racetrack with some walls that I can point the virtual IR sensors at? And can Rviz make pretty lines so that I can get a sense of what the IRsensors are seeing?
Comment by William on 2016-12-07:
No, rviz can only visualize data. So if you publish "markers" for your racetrack it will visualize them, or if you publish the data for your ir sensors, it can visualize them. If you want to simulate a racetrack and sensors, then you need a simulator, like gazebo or stage or STDR.
Comment by William on 2016-12-07:
It is not uncommon to use gazebo and rviz at the same time. You can also run gazebo "headless" so that it has no GUI, but is only generating sensor data and simulating the kinematics and dynamics of your robot.
Comment by shoemakerlevy9 on 2016-12-07:
Possibly. If you go the RVIZ only route you can make a black and white racetrack.pgm file (not png), display that as an occupancy map, then create a node to calculate the IR sensor readings based on your position and the occupancy map. If you did this with Gazebo it would do that calculation for you
Comment by FrodeL on 2016-12-08:
Thanks for a lot of good feedback. I think I'll explore the Gazebo route for a while.
Comment by FrodeL on 2016-12-10:
After giving up on trying to get Player/Stage to work I'm now turning my attention to STDR. Perhaps it can be the simulator I'm looking for.

