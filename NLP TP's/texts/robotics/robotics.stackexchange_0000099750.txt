Q:

DWA Planner path deflects and prevents smooth movement

Hi, here's the video. Problem occurs at 0:09 and 0:17. When i give goal to the robot, DWA planner produces local path but, after the robot gains good velocity, it produces a local path which greatly deflects from the global path and causes the robot to slow down and halt for a few moments before continuing.

This reduces the performance of the robot. Any suggestions on how to make the movement smooth ?
local_costmap:
global_frame: map
robot_base_frame: base_footprint
robot_radius: 0.15
update_frequency: 1.0
publish_frequency: 1.0
transform_tolerance: 0.75
static_map: false  
rolling_window: true
width: 3 #3
height: 3 #3
resolution: 0.05
inflation_radius: 0.1
cost_scaling_factor: 75
observation_sources: scan
scan: {sensor_frame: laser_link, data_type: LaserScan, topic: /scan, marking: true, clearing: true}

DWAPlannerROS:
  # Robot configuration parameters
  acc_lim_x: 0.1
  acc_lim_y: 0
  acc_lim_theta: 0.25
  acc_lim_trans: 0.15

  max_vel_x: 3.0
  min_vel_x: 0.001
  max_vel_y: 0
  min_vel_y: 0

  max_vel_trans: 3.0
  min_vel_trans: 0.001
  max_vel_theta: 0.5
  min_vel_theta: -0.5

  # Goal Tolerance Parameters
  yaw_goal_tolerance: 0.3
  xy_goal_tolerance: 0.1
  latch_xy_goal_tolerance: false

  # Forward Simulation Parameters
  sim_time: 4.0
  sim_granularity: 0.02
  vx_samples: 15
  vy_samples: 1
  vth_samples: 20
  # penalize_negative_x: true

  # Trajectory scoring parameters
  path_distance_bias: 4.0
  goal_distance_bias: 0.05
  occdist_scale: 3.0 
  forward_point_distance: 0
  stop_time_buffer: 0.2
  scaling_speed: 0.25
  max_scaling_factor: 0.2 

  # Oscillation Prevention Parameters
  oscillation_reset_dist: 0.25
  #Debug
  publish_traj_pc : true
  publish_cost_grid_pc: true

#Move_Base_Params
shutdown_costmaps: false
planner_frequency: 1.0
controller_frequency: 1.0
planner_patience: 3.0
controller_patience: 3.0
conservative_reset_dist: 0.1
oscillation_timeout: 10.0
oscillation_distance: 0.2 
max_planning_retries: -1

Originally posted by Werewolf_86 on ROS Answers with karma: 125 on 2021-07-29
Post score: 1

A:

Ok, i guess i found the answer. By updating to the following values solved the issue:
acc_lim_theta: 1.0
max_vel_theta: 1.0
min_vel_theta: 0.0
vth_samples: 50

I guess, after enlarging the range of angular acceleration and angular velocity, the dwa planner was able to choose better from the increased availability of samples. There is no sudden deflection from the main path howsoever

Originally posted by Werewolf_86 with karma: 125 on 2021-07-30
This answer was ACCEPTED on the original site
Post score: 1

