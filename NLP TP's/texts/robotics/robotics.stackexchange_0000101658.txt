Q:

add acceleration to 'move_group->stop()' command

when 'move_group->stop();' command triggered, or when i press 'Stop' button on 'RViz', the joint stops very suddenly.

how can i add acceleration to stop command ?
is that possible ?

thank you

Originally posted by omeranar1 on ROS Answers with karma: 31 on 2022-05-05
Post score: 1

A:

how can i add acceleration to stop command ? is that possible ?

No, that's not supported.
But, depending on which driver / controller you are using, you can make the stop smoother.
If you're using the wiki/joint_trajectory_controller from ros_control, the stop_trajectory_duration parameter tells the controller how long (in seconds) the trajectory it uses to stop moving should be.
If you set that to a non-zero value, stops should become much less abrupt.
Note that a non-zero value could also have negative consequences, as it will also take longer to stop in cases where you would want the robot to stop immediately (for instance when trying to implement something like "touch sensing").
If you're not using a ros_control-compatible driver, you'd have to see whether your driver supports a similar setting.

Originally posted by gvdhoorn with karma: 86574 on 2022-05-06
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by omeranar1 on 2022-05-09:
yes i use JointTrajectoryController and stop_trajectory_duration solved my problem. Thank you.
i will also add some protection later, for this reason i will search 'how to change stop_trajectory_duration programmatically.'
Comment by gvdhoorn on 2022-05-09:\

i will search 'how to change stop_trajectory_duration programmatically.'

that's not supported in the current implementation of the JointTrajectoryController. It's a parameter read only at initialisation time.
Comment by omeranar1 on 2022-05-09:
oh, thank you.
maybe, in emergency i will stop send new angles to joints, then sync angles between hardware and rviz, that may be solve the problem

