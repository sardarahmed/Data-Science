Q:

profile position mode + ros canopen

Hello,
I want to use profile postion mode with ros canopen, but i want the bits in the control word to be set in a certain way, for example:
Bit 5: If this bit is set to "1", a travel order triggered by bit 4 is immediately carried out. If it is set to
"0", the travel order just being carried out is completed and only then is the next travel order started.
Bit 6: If "0", the target position (607Ah) is absolute and if "1", the target position is relative to the
actual position. The reference position is depending on the Bits 0 and 1 of the object
60F2
How do i get ros canopen to set those bits in the control word so that the position value i am writing to the controller is interpreted correctly?
Is the DCF overlay configuration option in for the canopen_chain_mode the correct place to do this (i dont think it is..)?
I see line 232 in canopen_402/include/canopen_402/motor.h:
cw.set(CW_Immediate)
Would i replace this with cw.set(CW_Blending) to use the different setpoint options for profile position mode?
Thanks

Originally posted by JadTawil on ROS Answers with karma: 71 on 2017-12-26
Post score: 0

A:

The default implementation (absolute, immediate, no blending) made the most sense for generic use with ros_control.
If you want to change the PP mode behavior, you need to write your own MotorBase (e.g. subclass Motor402) plugin that registers a custom mode handler.

Originally posted by Mathias LÃ¼dtke with karma: 1596 on 2017-12-27
This answer was ACCEPTED on the original site
Post score: 0

