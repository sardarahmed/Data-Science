Q:

Writing a Subscriber in Python

Hello all,
I am trying to write a subscriber program in ROS fuerte with python and I get this error after I type "rosmake  packagename" to build my package.
I have "import rospy " in the python code but still I get some errors.
The error I get is CMake cannot determine linker language for target(then it appears the name of python program)
I am following the ros tutorials and as far as my knowledge I have considered all steps necasary for writing a subscriber.
Can you please help me with my issue?
Here is the code for CMake.txt:
cmake_minimum_required(VERSION 2.4.6)
include($ENV{ROS_ROOT}/core/rosbuild/rosbuild.cmake)
rosbuild_init()
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)
rosbuild_add_executable(WhichFace src/WhichFace.py)

and here is the code for Manifest.xml
 <package>
  <description brief="finalPhone">finalPhone  </description>
  <author>pi</author>
  <license>BSD</license>
  <review status="unreviewed" notes=""/>
  <url>http://ros.org/wiki/finalPhone</url>
  <depend package="std_msgs"/>
  <depend package="rospy"/>
</package>

Thanks,

Originally posted by Sam on ROS Answers with karma: 13 on 2015-07-03
Post score: 0

Original comments
Comment by Po-Jen Lai on 2015-07-03:
what's the steps you did? The information is not enough to debug.
Comment by gvdhoorn on 2015-07-04:
Please the contents of your CMakeLists.txt and package.xml. You are most likely treating a Python program as a C++ program (ie: trying to link it against other libraries). Python nodes do not need to be linked against anything.
Comment by Sam on 2015-07-05:
Sure.This is manifest.xml

 finalPhone

  
  pi
  BSD
  
  http://ros.org/wiki/finalPhone
  
  
Comment by Sam on 2015-07-05:
And this is my Cmakelist.txt:
cmake_minimum_required(VERSION 2.4.6)
include($ENV{ROS_ROOT}/core/rosbuild/rosbuild.cmake)
rosbuild_init()
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
rosbuild_add_executable(WhichFace src/WhichFace.py)
Comment by gvdhoorn on 2015-07-06:
Can you add this (properly formatted) to your original question? Please use the edit button/link for that (to the right of Comments under your question), and use the Preformatted Text button to format the manifest and build script.
Comment by Sam on 2015-07-06:
Sure.I did it.

A:

Here is the code for CMake.txt:

cmake_minimum_required(VERSION 2.4.6)

include($ENV{ROS_ROOT}/core/rosbuild/rosbuild.cmake)
rosbuild_init()
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)
rosbuild_add_executable(WhichFace src/WhichFace.py) 

Python nodes are not 'executables' in the sense that you can rosmake them. You cannot rosbuild_add_executable(..) as that will cause CMake (underlying rosbuild) to try and setup all sorts of make targets for building and linking the Python script as if it were a C/C++ program. That is obviously not the case, so it fails.
See wiki/rospy_tutorials/Tutorials/Makefile (make sure to switch to rosbuild at the top of the page) for how to setup a CMakeLists.txt for Python nodes under rosbuild.

Originally posted by gvdhoorn with karma: 86574 on 2015-07-07
This answer was ACCEPTED on the original site
Post score: 1

