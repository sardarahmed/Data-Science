Q:

ros2 publish frame_id

I created a simple image publisher node like the one below
class MinimalPublisher(Node):
def __init__(self):
    super().__init__('minimal_publisher')
    self._bridge = CvBridge()
    self.clock = Clock()
    self.publisher_ = self.create_publisher(Image, 'topic')
    timer_period = 2  # seconds
    self.timer = self.create_timer(timer_period, self.timer_callback)
    self.i = 0

def timer_callback(self):
    dtype = np.uint8
    n_channels = 3
    msg = Image()
    msg.header.stamp.sec = self.clock.now().to_msg().sec
    msg.header.stamp.nanosec = self.clock.now().to_msg().nanosec
    msg.header.frame_id = (str(self.i))
    im = np.ndarray(shape=(width, height, n_channels), dtype=dtype)
    msg = self._bridge.cv2_to_imgmsg(im)
    self.publisher_.publish(msg)
    self.i += 1

but the frame id I publish is always empty. I am a newbie to ros2. Could any one suggest some solution. Thanks in advance.

Originally posted by ros2 on ROS Answers with karma: 1 on 2021-04-16
Post score: 0

A:

it looks like you are setting the msg frame ID, then just 2 lines later you are overwriting the contents of msg and publishing the new contents.

Originally posted by shonigmann with karma: 1567 on 2021-04-16
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ros2 on 2021-04-20:
haaaa. sorry my mistake. Thanks a lot!!

