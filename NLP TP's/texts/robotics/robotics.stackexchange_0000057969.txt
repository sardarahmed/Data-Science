Q:

Adding trajectory to hector_geotiff output

I have a Hokuyo URG-04LX and I use Hector_Slam for mapping. I use hector_geotiff for saving the map as a .tiff file but it doesn't contain trajectory.
Is there any way for add trajectory to .tiff file?
Or is there another package for having these options?
this is my launch file after adding the line that @Stefan Kohlbrecher said :
<launch>
   <arg name="trajectory_source_frame_name" default="/map"/>
   <arg name="trajectory_update_rate" default="4"/>
   <arg name="trajectory_publish_rate" default="0.25"/>
   <arg name="map_file_path" default="$(find hector_geotiff)/maps"/>
   <arg name="map_file_base_name" default="hector_slam_map"/>
  
  <node pkg="hector_trajectory_server" type="hector_trajectory_server" name="hector_trajectory_server" output="screen">
    <param name="target_frame_name" type="string" value="/map" />
    <param name="source_frame_name" type="string" value="$(arg trajectory_source_frame_name)" />
    <param name="trajectory_update_rate" type="double" value="$(arg trajectory_update_rate)" />
    <param name="trajectory_publish_rate" type="double" value="$(arg trajectory_publish_rate)" />
  </node>

  <node pkg="hector_geotiff" type="geotiff_node" name="hector_geotiff_node" output="screen" launch-prefix="nice -n 15">
    <remap from="map" to="/dynamic_map" />
    <param name="map_file_path" type="string" value="$(arg map_file_path)" />
    <param name="map_file_base_name" type="string" value="$(arg map_file_base_name)" />
    <param name="geotiff_save_period" type="double" value="1" />
    <param name="draw_background_checkerboard" type="bool" value="true" />
    <param name="draw_free_space_grid" type="bool" value="true" />
    <param name="plugins" type="string" value="hector_geotiff_plugins/TrajectoryMapWriter" />
  </node>

</launch>

This is my output after running this launch file :

the yellow arrow drew at start point and didn't move!

Originally posted by mr.karimi on ROS Answers with karma: 52 on 2014-03-16
Post score: 1

A:

We made a change to the internal workings of hector_geotiff (using plugins for better extendability), which lead to the path not getting drawn in the tutorial launch file. The functionality is still there, see also answer here.
I also changed the geotiff_mapper.launch file, so the trajectory writer plugin is loaded per default. This change will take a little time till it appears in .debs though:

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2014-03-16
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Stefan Kohlbrecher on 2014-03-17:
You have to set "trajectory_source_frame_name" to a frame that is part of your robot (for example /base_link).
Comment by mr.karimi on 2014-03-17:
yes, after i change the "trajectory_source_frame_name" from map to base_link , it worked!
Thank you very Much  :)

