Q:

how to call arduino codes using topics

the codes are dc motor controller, PID controller, ultrasonic sensor

Originally posted by pamis5 on ROS Answers with karma: 1 on 2017-12-06
Post score: 0

Original comments
Comment by jayess on 2017-12-06:
Welcome! What do you mean by "call arduino codes using topics"? What are you trying to accomplish? Also, please see http://wiki.ros.org/Support#Guidelines_for_asking_a_question_.28Please_read_before_posting.29

A:

If you want to interact with Arduino from ROS you have to do it by serial communication. I think the simplest way is python scripting.
I did it a few years ago. I had implement a protocol with SYNC, OP_ID, PARAMETERS and CHECKSUM between the PC (ROS) and Arduino
This was my Python script imports:
  ...
    import rospy
    import os
    import comm
    from datetime import datetime
    ....

where comm is the python file wich manages communication with arduino board
Here I am reading a message from arduino in my ros node file (this is the arduino objetc: ArdIfc)
...
  newMsg = ArdIfc.recv()
            if newMsg != None:
                if newMsg.mod == comm.MOD_SENSORS: 
                    if newMsg.op == comm.OP_GETCURRENTDIST:
                        torsoPos = newMsg.param[0]
...

Here I am sending a message to the Arduino from my ros node file
...
 rospy.loginfo("Torso-> Stop message.")
                msgMotor = comm.Msg(comm.ARDUINO_ID, comm.MOD_MOTORS, comm.OP_STOP_MOTOR, [], 0)
                ArdIfc.send(msgMotor)
                msgMotor_ack_received = False 
...

If you want the code I can send it to you.
best,
Fedeico

Originally posted by fandrade with karma: 81 on 2017-12-06
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jayess on 2017-12-06:
@fandrade instead of privately sharing code, can you please update your answer with it instead? That way the entire community can benefit from it instead of just one person.
Comment by fandrade on 2017-12-06:
@jayess if this is what @pamis5 need, I completeley agree to share the files here. Since I am not sure about the real question, I am waiting for his answer.
Comment by lagankapoor on 2018-01-15:
Sir may i learn how to connect a arduino based Robotic arm with MoveIt
Comment by jayess on 2018-01-15:
@lagankapoor: comments aren't an appropriate place to ask questions. You should create your own question instead of asking in a comment.
Comment by lagankapoor on 2018-01-17:
thanks sir
check i ask new question today please if you know about that help me

