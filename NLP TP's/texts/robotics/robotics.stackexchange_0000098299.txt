Q:

CMake error when building rclcpp

I got some errors when building rclcpp using colcon build. The error message is shown below. Any idea where the problem is? I had sourced ${ROS_WS}/install/setup.bash before running colcon build.
 root@48fcb45ebd09:/opt/ros_ws# cat log/latest_build/rclcpp/stderr.log
CMake Error at test/CMakeLists.txt:3 (find_package):
  By not providing "Findtest_msgs.cmake" in CMAKE_MODULE_PATH this project
  has asked CMake to find a package configuration file provided by
  "test_msgs", but CMake did not find one.

  Could not find a package configuration file provided by "test_msgs" with
  any of the following names:

    test_msgsConfig.cmake
    test_msgs-config.cmake

  Add the installation prefix of "test_msgs" to CMAKE_PREFIX_PATH or set
  "test_msgs_DIR" to a directory containing one of the above files.  If
  "test_msgs" provides a separate development package or SDK, be sure it has
  been installed.

Originally posted by Zhoulai Fu on ROS Answers with karma: 186 on 2021-02-14
Post score: 0

Original comments
Comment by gvdhoorn on 2021-02-14:
Could you please close either #q371789 or this one?
Comment by Zhoulai Fu on 2021-02-14:
Sorry for the mishap. I edited the question but got a duplicate one.

A:

It seems things start to work if I do rosdep install -y --from-paths src. I am still a bit surprised that colcon build itself does not take care of dependencies.

Originally posted by Zhoulai Fu with karma: 186 on 2021-02-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2021-02-14:
Colcon builds packages.
It does not detect, resolve nor download dependencies.
The error you show is a CMake error, as it's CMake which checks whether required dependencies are present (as long as the developer/maintainer has written a proper CMakeLists.txt that is).
Personally I quite like the separation of concerns. Build tools which try to do everything can be rather annoying.
Comment by Zhoulai Fu on 2021-02-15:
Separation of concerns makes sense to me. Thanks.

