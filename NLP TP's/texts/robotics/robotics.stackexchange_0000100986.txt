Q:

No completion for 'ros2 run' in zsh

I've installed 'Ros2-Galactic' via apt and added thesource /opt/ros/galactic/setup.zsh to my '.zshrc'. I found that there is no completion for 'ros2 run', 'ros2 pkg', and so on. (I mean no completion for the package_names , topic_names, etc) However the 'ros2' completion works just fine in bash. Later, I've also tried to install via binary package from https://github.com/ros2/ros2/releases. This time, the completion functioned in zsh after sourcing the 'setup.zsh' from the downloaded package. The 'setup.zsh' from this two installation methods are totally different which really confused me.
I'm now using the apt-installed ros2. Wanna know if there is any solution to bring completion for 'ros2' to zsh.

Originally posted by Soap-Shampoo on ROS Answers with karma: 3 on 2022-01-10
Post score: 0

A:

This is a known bug. Someone found a workaround here.
Basically you can run the following to re-enable the autocomplete.
# argcomplete for ros2 & colcon
eval "$(register-python-argcomplete3 ros2)"
eval "$(register-python-argcomplete3 colcon)"

Originally posted by Maxime with karma: 96 on 2022-01-11
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Soap-Shampoo on 2022-01-11:
Thanks!!! The autocompletion works after I adding the lines above right after source /opt/ros/galactic/setup.zsh  to my .zshrc. Wonder if this issue still exists in the latest release of ros2-foxy?

