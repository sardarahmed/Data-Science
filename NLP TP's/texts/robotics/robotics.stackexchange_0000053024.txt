Q:

Phantom_Omni with Ros

Hello,
I'm trying to use a Phantom Omni device with ROS, but when I run the omni node terminal shows next message and nothing happens more, the prompt doesn't return and the cursor keeps flashing.
INFO 1374828811.829641606: Found PHANTOM Omni.
INFO 1374828811.881649887: HD_CALIBRATION_INKWELL..
INFO 1374828811.883714328: Calibrating.. (put stylus in well)
INFO 1374828811.883780678:
Calibration complete.
Regards

Originally posted by jalvarofa on ROS Answers with karma: 20 on 2013-07-24
Post score: 0

Original comments
Comment by Boris on 2013-07-24:
Seems error message got lost. Please update the question.

A:

That is correct behavior. The messages are showing that device was found and successfully calibrated.
To read coordinates and buttons states you have to subscribe to omni1_pose and omni1_button topics respectively. To command force to Omni use omni1_force_feedback topic.
If you are not sure how to do aforementioned, please go through beginner tutorials.
For a quick test you also may want to try:
$ rostopic echo omni1_pose

This will output current pose (position + orientation) of Omni end-effector to the terminal.

EDIT: (summarizing comments below)
On Ubuntu 12.04 and higher a JUJU Phantom Device Drivers (PDD) have to be used. The necessary files can be found on SensAble Developer Support Center.
Since original phantom_omni package seems to be broken a more generic sensable_phantom can be used instead, both on Fuerte and Groovy. The package suppose to work with any Phantom models (Omni, Premium 1.5, Premium 3.0 etc).
To install the latter on Fuerte:
# Go to sandbox directory in the rosbuild workspace
$ roscd && cd sandbox

# Clone `rosbuild' branch of package
$ git clone -b rosbuild https://github.com/bgromov/sensable_phantom.git

# Update rospack cache
$ rospack profile

# Compile the package
$ rosmake sensable_phantom

P.S. Something wrong with AskBot. The link on the git clone line should be without surrounding HTML-tags.

Originally posted by Boris with karma: 3060 on 2013-07-26
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by jalvarofa on 2013-07-29:
When I try omni1_button and I press the buttons works good. But when I try omni1_pose and I move the phantom's omni stylus the coordenates don't change, always it is 0.0
header: seq: 122795 stamp: secs: 1375096548 nsecs: 228468035 frame_id: omni1_link6 pose: position: x: 0.0 y: 0.0 z: 0.0 orientation: x: 0.0 y: 0.0 z: 0.0 w: 1.0
Comment by Boris on 2013-07-29:
What version of the OpenHaptics do you use? Does the PHANToMTest utility works on your system?
Comment by jalvarofa on 2013-07-30:
I use v3.0 in Ubuntu 12.04, Linux JUJU PDD 32-bits and ROS Fuerte. PHANToMTest works good.
Comment by Boris on 2013-07-31:
What about Phantom Device Drivers (PDD)? I'm using PDD v4.3 and OpenHaptics v3.0, but 64-bit version... And with this PDD 4.3 I cannot run PHANToMTest at all, so I guess you have previous version of PDD.
Comment by Boris on 2013-07-31:
... As far as I know new version was never released officially, but you can download it from SensAble Developer Support Center (don't remember exact link).
Comment by jalvarofa on 2013-08-18:
Yes, I use this "unofficial" version called Linux JUJU PDD 32-bits and all works good (PHANToMTest, omni1_button, some examples, etc) but omni1_pose doesn't work
Comment by Boris on 2013-08-18:
Honestly I didn't use original phantom_omni for a long time, but my own reimplemented version. If you do not need specific features of original package you maybe interested to try that one. For Fuerte checkout rosbuild branch.
Comment by jalvarofa on 2013-08-19:
ok, I'll try to use your version to see how works, thank you very much.
EDIT: Your version works in ROS Fuerte or ROS Groovy?
Comment by Boris on 2013-08-19:
Both. As I mentioned above, for Fuerte you have to use rosbuild branch of repository. To do that use the following command git clone -b rosbuild https://github.com/bgromov/sensable_phantom.git
Comment by jalvarofa on 2013-08-21:
Perfect!! topic's pose works!!! thank you very much!! I have a new problem that I elevate to question.

