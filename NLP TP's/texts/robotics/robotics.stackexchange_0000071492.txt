Q:

Message generation fails after JADE update

Hello.
This morning I apt-get update and upgrade my Linux (14.04 Xubuntu).
After this, catkin_make is not able to generate header files for a custom message of mine anymore.
It worked before and I have all the necessary dependencies and message-generations set up.
After googling around here is what I tried but what was unsuccessful:
catkin_make clean #of course

catkin_make -j1 #Some reported that it would help to build one "jobbed"

Looking for my CustomMessage works:
rosmsg show my_package/CustomMessage

When I search in the devel/include/my_package I find no headerfile.
My Error that I get while building is, because the header file was not generated:
In file included from /home/username/catkin_ws/src/my_package/src/MyProgramm.cpp:1:0:
/home/username/catkin_ws/src/my_package/src/MyProgramm.h:5:37: fatal error: my_package/CustomMessage.h: No such file or directory
 #include "my_package/CustomMessage.h"

I want to stress out that this worked before. I even reverted the git repo of my catkin_ws to a previous state (where the header files were build correctly) and it does not work anymore.
Somehow the update of JADE is responsible for this, which is why I now show you, what was updated. Please help me.
Note: The only message that my custom message depends on is geometry_msgs/Pose.
//EDIT:
So before the update log here my package.xml and CMakeList.
I changed my packagename (my_package), my message (Custom_Message.msg) and my cpp file (MyProgram):
package.xml:
<?xml version="1.0"?>
<package>
  <name>my_package</name>
  <version>0.0.1</version>
  <description>The my_package package</description>

  <maintainer email="blabla">name</maintainer>

  <license>TODO</license>

  <buildtool_depend>catkin</buildtool_depend>

  <build_depend>roscpp</build_depend>
  <build_depend>std_msgs</build_depend>
  <build_depend>roscpp_serialization</build_depend>
  <build_depend>geometry_msgs</build_depend>
  <build_depend>message_generation</build_depend>

  <run_depend>roscpp</run_depend>
  <run_depend>std_msgs</run_depend>
  <run_depend>roscpp_serialization</run_depend>
  <run_depend>geometry_msgs</run_depend>
  <run_depend>message_runtime</run_depend>
  <export>

  </export>
</package>

CMakeList.txt:
cmake_minimum_required(VERSION 2.8.3)
project(my_package)

find_package(catkin REQUIRED COMPONENTS
  roscpp
  std_msgs
  geometry_msgs
  roscpp_serialization
  hector_quadrotor_gazebo
  message_generation
)

add_message_files(
  FILES
  CustomMessage.msg
)

generate_messages(
  DEPENDENCIES
  geometry_msgs
)

catkin_package(
CATKIN_DEPENDS roscpp_serialization message_runtime
)

include_directories(
  ${catkin_INCLUDE_DIRS}
)

add_executable(my_package src/MyProgramm.cpp)

target_link_libraries(my_package
  ${catkin_LIBRARIES}
)

I am sorry for this mess, but I don't know any other way.
Preparing to unpack .../python-oneconf_0.3.7.14.04.1_all.deb ...^M
Unpacking python-oneconf (0.3.7.14.04.1) over (0.3.7) ...^M
Preparing to unpack .../ros-jade-cv-bridge_1.11.9-0trusty-20151130-0054-+0000_amd64.deb ...^M
Unpacking ros-jade-cv-bridge (1.11.9-0trusty-20151130-0054-+0000) over (1.11.8-0trusty-20151110-1415-+0000) ...^M
Preparing to unpack .../ros-jade-image-geometry_1.11.9-0trusty-20151130-0101-+0000_amd64.deb ...^M
Unpacking ros-jade-image-geometry (1.11.9-0trusty-20151130-0101-+0000) over (1.11.8-0trusty-20151110-0900-+0000) ...^M
Preparing to unpack .../ros-jade-camera-calibration_1.12.14-0trusty-20151130-2000-+0000_amd64.deb ...^M
Unpacking ros-jade-camera-calibration (1.12.14-0trusty-20151130-2000-+0000) over (1.12.14-0trusty-20151110-1420-+0000) ...^M
Preparing to unpack .../ros-jade-camera-calibration-parsers_1.11.8-0trusty-20151130-0157-+0000_amd64.deb ...^M
Unpacking ros-jade-camera-calibration-parsers (1.11.8-0trusty-20151130-0157-+0000) over (1.11.7-0trusty-20151110-0900-+0000) ...^M
Preparing to unpack .../ros-jade-image-transport_1.11.8-0trusty-20151130-0226-+0000_amd64.deb ...^M
Unpacking ros-jade-image-transport (1.11.8-0trusty-20151130-0226-+0000) over (1.11.7-0trusty-20151110-1410-+0000) ...^M
Preparing to unpack .../ros-jade-camera-info-manager_1.11.8-0trusty-20151130-0237-+0000_amd64.deb ...^M
Unpacking ros-jade-camera-info-manager (1.11.8-0trusty-20151130-0237-+0000) over (1.11.7-0trusty-20151110-1413-+0000) ...^M
Preparing to unpack .../ros-jade-octomap_1.7.0-0trusty-20151128-2010-+0000_amd64.deb ...^M
Unpacking ros-jade-octomap (1.7.0-0trusty-20151128-2010-+0000) over (1.6.8-0trusty-20151110-0831-+0000) ...^M
Preparing to unpack .../ros-jade-geometric-shapes_0.4.3-0trusty-20151128-2259-+0000_amd64.deb ...^M
Unpacking ros-jade-geometric-shapes (0.4.3-0trusty-20151128-2259-+0000) over (0.4.3-0trusty-20151110-0858-+0000) ...^M
Preparing to unpack .../ros-jade-collada-urdf_1.11.8-0trusty-20151129-1043-+0000_amd64.deb ...^M
Unpacking ros-jade-collada-urdf (1.11.8-0trusty-20151129-1043-+0000) over (1.11.8-0trusty-20151110-1432-+0000) ...^M
Preparing to unpack .../ros-jade-compressed-depth-image-transport_1.9.2-0trusty-20151130-2006-+0000_amd64.deb ...^M
Unpacking ros-jade-compressed-depth-image-transport (1.9.2-0trusty-20151130-2006-+0000) over (1.9.2-0trusty-20151110-1441-+0000) ...^M
Preparing to unpack .../ros-jade-compressed-image-transport_1.9.2-0trusty-20151130-2010-+0000_amd64.deb ...^M
Unpacking ros-jade-compressed-image-transport (1.9.2-0trusty-20151130-2010-+0000) over (1.9.2-0trusty-20151110-1445-+0000) ...^M
Preparing to unpack .../ros-jade-depth-image-proc_1.12.14-0trusty-20151130-2002-+0000_amd64.deb ...^M
Unpacking ros-jade-depth-image-proc (1.12.14-0trusty-20151130-2002-+0000) over (1.12.14-0trusty-20151110-1530-+0000) ...^M
Preparing to unpack .../ros-jade-robot-model_1.11.8-0trusty-20151129-2218-+0000_amd64.deb ...^M
Unpacking ros-jade-robot-model (1.11.8-0trusty-20151129-2218-+0000) over (1.11.8-0trusty-20151110-1437-+0000) ...^M
Preparing to unpack .../ros-jade-robot_1.2.0-0trusty-20151129-2350-+0000_amd64.deb ...^M
Unpacking ros-jade-robot (1.2.0-0trusty-20151129-2350-+0000) over (1.2.0-0trusty-20151110-1539-+0000) ...^M
Preparing to unpack .../ros-jade-rqt-image-view_0.3.12-0trusty-20151130-1952-+0000_amd64.deb ...^M
Unpacking ros-jade-rqt-image-view (0.3.12-0trusty-20151130-1952-+0000) over (0.3.12-0trusty-20151110-1527-+0000) ...^M
Preparing to unpack .../ros-jade-rqt-common-plugins_0.3.12-0trusty-20151201-0736-+0000_amd64.deb ...^M
Unpacking ros-jade-rqt-common-plugins (0.3.12-0trusty-20151201-0736-+0000) over (0.3.12-0trusty-20151111-1551-+0000) ...^M
Preparing to unpack .../ros-jade-rviz_1.11.10-0trusty-20151130-2039-+0000_amd64.deb ...^M
Unpacking ros-jade-rviz (1.11.10-0trusty-20151130-2039-+0000) over (1.11.10-0trusty-20151110-1449-+0000) ...^M
Preparing to unpack .../ros-jade-rqt-rviz_0.4.2-0trusty-20151201-0837-+0000_amd64.deb ...^M
Unpacking ros-jade-rqt-rviz (0.4.2-0trusty-20151201-0837-+0000) over (0.4.2-0trusty-20151110-1527-+0000) ...^M
Preparing to unpack .../ros-jade-rqt-robot-plugins_0.4.2-0trusty-20151201-1636-+0000_amd64.deb ...^M
Unpacking ros-jade-rqt-robot-plugins (0.4.2-0trusty-20151201-1636-+0000) over (0.4.2-0trusty-20151110-1808-+0000) ...^M
Preparing to unpack .../ros-jade-urdf-tutorial_0.2.4-0trusty-20151201-0841-+0000_amd64.deb ...^M
Unpacking ros-jade-urdf-tutorial (0.2.4-0trusty-20151201-0841-+0000) over (0.2.4-0trusty-20151110-1514-+0000) ...^M
Preparing to unpack .../ros-jade-librviz-tutorial_0.9.2-0trusty-20151201-0837-+0000_amd64.deb ...^M
Unpacking ros-jade-librviz-tutorial (0.9.2-0trusty-20151201-0837-+0000) over (0.9.2-0trusty-20151110-1514-+0000) ...^M
Preparing to unpack .../ros-jade-rviz-plugin-tutorials_0.9.2-0trusty-20151201-0841-+0000_amd64.deb ...^M
Unpacking ros-jade-rviz-plugin-tutorials (0.9.2-0trusty-20151201-0841-+0000) over (0.9.2-0trusty-20151110-1514-+0000) ...^M
Preparing to unpack .../ros-jade-rviz-python-tutorial_0.9.2-0trusty-20151201-0841-+0000_amd64.deb ...^M
Unpacking ros-jade-rviz-python-tutorial (0.9.2-0trusty-20151201-0841-+0000) over (0.9.2-0trusty-20151110-1514-+0000) ...^M
Preparing to unpack .../ros-jade-visualization-tutorials_0.9.2-0trusty-20151201-1637-+0000_amd64.deb ...^M
Unpacking ros-jade-visualization-tutorials (0.9.2-0trusty-20151201-1637-+0000) over (0.9.2-0trusty-20151111-1131-+0000) ...^M
Preparing to unpack .../ros-jade-viz_1.2.0-0trusty-20151201-1638-+0000_amd64.deb ...^M
Unpacking ros-jade-viz (1.2.0-0trusty-20151201-1638-+0000) over (1.2.0-0trusty-20151111-2308-+0000) ...^M
Preparing to unpack .../ros-jade-desktop_1.2.0-0trusty-20151201-1641-+0000_amd64.deb ...^M
Unpacking ros-jade-desktop (1.2.0-0trusty-20151201-1641-+0000) over (1.2.0-0trusty-20151111-2310-+0000) ...^M
Preparing to unpack .../ros-jade-polled-camera_1.11.8-0trusty-20151130-0254-+0000_amd64.deb ...^M
Unpacking ros-jade-polled-camera (1.11.8-0trusty-20151130-0254-+0000) over (1.11.7-0trusty-20151110-1414-+0000) ...^M
Preparing to unpack .../ros-jade-image-common_1.11.8-0trusty-20151130-0257-+0000_amd64.deb ...^M
Unpacking ros-jade-image-common (1.11.8-0trusty-20151130-0257-+0000) over (1.11.7-0trusty-20151110-1419-+0000) ...^M
Preparing to unpack .../ros-jade-image-proc_1.12.14-0trusty-20151130-2004-+0000_amd64.deb ...^M
Unpacking ros-jade-image-proc (1.12.14-0trusty-20151130-2004-+0000) over (1.12.14-0trusty-20151110-1529-+0000) ...^M
Preparing to unpack .../ros-jade-image-rotate_1.12.14-0trusty-20151130-2005-+0000_amd64.deb ...^M
Unpacking ros-jade-image-rotate (1.12.14-0trusty-20151130-2005-+0000) over (1.12.14-0trusty-20151110-1530-+0000) ...^M
Preparing to unpack .../ros-jade-image-view_1.12.14-0trusty-20151130-2017-+0000_amd64.deb ...^M
Unpacking ros-jade-image-view (1.12.14-0trusty-20151130-2017-+0000) over (1.12.14-0trusty-20151110-1537-+0000) ...^M
Preparing to unpack .../ros-jade-stereo-image-proc_1.12.14-0trusty-20151130-2008-+0000_amd64.deb ...^M
Unpacking ros-jade-stereo-image-proc (1.12.14-0trusty-20151130-2008-+0000) over (1.12.14-0trusty-20151110-1533-+0000) ...^M
Preparing to unpack .../ros-jade-image-pipeline_1.12.14-0trusty-20151201-0743-+0000_amd64.deb ...^M
Unpacking ros-jade-image-pipeline (1.12.14-0trusty-20151201-0743-+0000) over (1.12.14-0trusty-20151110-1540-+0000) ...^M
Preparing to unpack .../ros-jade-theora-image-transport_1.9.2-0trusty-20151130-2011-+0000_amd64.deb ...^M
Unpacking ros-jade-theora-image-transport (1.9.2-0trusty-20151130-2011-+0000) over (1.9.2-0trusty-20151110-1453-+0000) ...^M
Preparing to unpack .../ros-jade-image-transport-plugins_1.9.2-0trusty-20151201-0747-+0000_amd64.deb ...^M
Unpacking ros-jade-image-transport-plugins (1.9.2-0trusty-20151201-0747-+0000) over (1.9.2-0trusty-20151110-1455-+0000) ...^M
Preparing to unpack .../ros-jade-perception_1.2.0-0trusty-20151201-0750-+0000_amd64.deb ...^M
Unpacking ros-jade-perception (1.2.0-0trusty-20151201-0750-+0000) over (1.2.0-0trusty-20151110-1553-+0000) ...^M
Preparing to unpack .../ros-jade-gazebo-plugins_2.5.1-0trusty-20151130-1950-+0000_amd64.deb ...^M
Unpacking ros-jade-gazebo-plugins (2.5.1-0trusty-20151130-1950-+0000) over (2.5.1-0trusty-20151110-1523-+0000) ...^M
Preparing to unpack .../ros-jade-gazebo-ros-pkgs_2.5.1-0trusty-20151201-0740-+0000_amd64.deb ...^M
Unpacking ros-jade-gazebo-ros-pkgs (2.5.1-0trusty-20151201-0740-+0000) over (2.5.1-0trusty-20151110-1533-+0000) ...^M
Preparing to unpack .../ros-jade-simulators_1.2.0-0trusty-20151201-1638-+0000_amd64.deb ...^M
Unpacking ros-jade-simulators (1.2.0-0trusty-20151201-1638-+0000) over (1.2.0-0trusty-20151111-2308-+0000) ...^M
Preparing to unpack .../ros-jade-desktop-full_1.2.0-0trusty-20151201-1649-+0000_amd64.deb ...^M
Unpacking ros-jade-desktop-full (1.2.0-0trusty-20151201-1649-+0000) over (1.2.0-0trusty-20151112-0124-+0000) ...^M
Preparing to unpack .../ros-jade-hector-sensors-gazebo_0.4.0-0trusty-20151201-0741-+0000_amd64.deb ...^M
Unpacking ros-jade-hector-sensors-gazebo (0.4.0-0trusty-20151201-0741-+0000) over (0.4.0-0trusty-20151110-1534-+0000) ...^M

Originally posted by Borob on ROS Answers with karma: 111 on 2016-01-20
Post score: 0

Original comments
Comment by ahendrix on 2016-01-20:
I know you think this is a update issues, but the most common cause for issues like this is missing dependencies in your CMakeLists. Can you please edit your question to include your CMakeLists.txt, so that we can rule out any issues there?
Comment by Borob on 2016-01-20:
I updated my post to include my CMakeList and package.xml

A:

Your CMakeLists.txt is missing the dependency which tells cmake that it needs to do message generation before it tries to compile your program.
Add the following to your CMakeLists.txt, to inform CMake that your program needs the generated messages in order to compile:
add_dependencies(my_package my_package_generate_messages_cpp)

Have a look at this question for a more detailed discussion of how this works and why it is necessary.

Originally posted by ahendrix with karma: 47576 on 2016-01-20
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Borob on 2016-01-20:
Thanks a lot, I will try it out. But why the hell is that not featured on the tutorials: http://wiki.ros.org/ROS/Tutorials/CreatingMsgAndSrv or http://wiki.ros.org/ROS/Tutorials/DefiningCustomMessages ??
Comment by ahendrix on 2016-01-20:
Feel free to update the tutorials if you think they're lacking.
Comment by ahendrix on 2016-01-21:
The use of add_dependencies() is mentioned in the C++ publisher tutorial, section 1.3
Comment by Borob on 2016-01-21:
So it is stated somewhere, but not in the documentation which sole purpose it is to describe exactly this. I don't want to sound ungracious, but that's the problem with ros: Poorly documented and/or outdated docs while stuff actually is pretty simple (if you could read about it in the docs).
Comment by ahendrix on 2016-01-21:
Feel free to update the other tutorials if you think they're lacking.
Comment by William on 2016-01-21:
@Druff I understand your frustration, as this issue is particularly opaque due to the nature of the problem. It is also mentioned in the catkin documentation: http://docs.ros.org/hydro/api/catkin/html/howto/format2/cpp_msg_dependencies.html It hasn't always been there, it has been since before Jade.
Comment by William on 2016-01-21:
It's also covered in the catkin_create_pkg template: https://github.com/ros-infrastructure/catkin_pkg/blob/master/src/catkin_pkg/templates/CMakeLists.txt.in#L136 The ${${PROJECT_NAME}_EXPORTED_TARGETS} will contain any message generation targets like my_package_generate_messages_cpp.
Comment by Borob on 2016-01-21:
Thank you @William, I appreciate your efforts. I don't want to get into a big fundamental argument. But e.g. for your first link, why is that on a different site than the other ros docs (from the wiki). I don't want to diminish the communities efforts, but the documentation is so spotty.
Comment by Borob on 2016-01-21:
If I create a new message for my package, I will look up the message generation topics of the documentation that I linked above. If it still doesn't work after, I search for problems in other areas. I wouln't go back into the package-create tutorials e.g.. But I thank you guys so much for your help!
Comment by William on 2016-01-21:
That particular documentation is the catkin API documentation and it lives in the catkin git repository and is done RST. I don't have a good reason why it's not in the wiki instead. It is linked to from the wiki: http://wiki.ros.org/catkin#External_Documentation
Comment by William on 2016-01-21:
Also it is mentioned from the catkin cookbook for CMakeLists.txt: http://wiki.ros.org/catkin/CMakeLists.txt#Important_Prerequisites.2BAC8-Constraints However, I accept the complaint that it isn't as well organized as it could be.
Comment by ahendrix on 2016-01-21:
I have updated the wiki ( http://wiki.ros.org/ROS/Tutorials/DefiningCustomMessages and http://wiki.ros.org/ROS/Tutorials/CreatingMsgAndSrv ) with a short note about building C++ nodes against custom messages.
Comment by ahendrix on 2016-01-21:
These docs are part of the introductory ROS tutorial, so I don't think a long diversion into build system specifics is justified, particularly when the next tutorial in the sequence builds a C++ node and covers the build process in greater detail.

