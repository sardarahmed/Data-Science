Q:

Invoking "make -j8 -l8" failed for face_recognition

I am following the installation instructions for face_recognition found at http://wiki.ros.org/face_recognition.  When I attempt to run catkin_make I get the error: Invoking "make -j8 -l8" failed.  Looking at previous questions asked about this the problem was people were running the wrong version of Ubuntu or Ros Distro.  I am running Ubuntu 16.04 with ROS Kinetic as I believe I should be.  I also checked, and all required dependencies are installed.  Below is the full error message I get when I run catkin_make.  Any suggestions would be much appreciated!
horc@horc-Z97X-SLI:~/catkin_ws$ catkin_make
Base path: /home/horc/catkin_ws
Source space: /home/horc/catkin_ws/src
Build space: /home/horc/catkin_ws/build
Devel space: /home/horc/catkin_ws/devel
Install space: /home/horc/catkin_ws/install
####
#### Running command: "make cmake_check_build_system" in "/home/horc/catkin_ws/build"
####
####
#### Running command: "make -j8 -l8" in "/home/horc/catkin_ws/build"
####
[  0%] Built target std_msgs_generate_messages_py
[  0%] Built target std_msgs_generate_messages_eus
[  0%] Built target std_msgs_generate_messages_cpp
[  0%] Built target std_msgs_generate_messages_lisp
[  0%] Built target _ca_msgs_generate_messages_check_deps_Mode
[  0%] Built target std_msgs_generate_messages_nodejs
[  0%] Built target _ca_msgs_generate_messages_check_deps_ChargingState
[  0%] Built target _ca_msgs_generate_messages_check_deps_DefineSong
[  0%] Built target _ca_msgs_generate_messages_check_deps_PlaySong
[  0%] Built target _ca_msgs_generate_messages_check_deps_Bumper
[  0%] Built target nav_msgs_generate_messages_nodejs
[  0%] Built target _hector_nav_msgs_generate_messages_check_deps_GetNormal
[  0%] Built target nav_msgs_generate_messages_lisp
[  0%] Built target nav_msgs_generate_messages_eus
[  0%] Built target nav_msgs_generate_messages_py
[  0%] Built target nav_msgs_generate_messages_cpp
[  0%] Built target _hector_nav_msgs_generate_messages_check_deps_GetDistanceToObstacle
[  0%] Built target _hector_nav_msgs_generate_messages_check_deps_GetSearchPosition
[  0%] Built target _hector_nav_msgs_generate_messages_check_deps_GetRobotTrajectory
[  0%] Built target _catkin_empty_exported_target
[  0%] Built target roscpp_generate_messages_lisp
[  0%] Built target _hector_nav_msgs_generate_messages_check_deps_GetRecoveryInfo
[  0%] Built target actionlib_msgs_generate_messages_py
[  0%] Built target actionlib_msgs_generate_messages_lisp
[  0%] Built target _beginner_tutorials_generate_messages_check_deps_Num
[  0%] Built target geometry_msgs_generate_messages_cpp
[  0%] Built target actionlib_msgs_generate_messages_cpp
[  0%] Built target actionlib_msgs_generate_messages_eus
[  0%] Built target _beginner_tutorials_generate_messages_check_deps_AddTwoInts
[  0%] Built target geometry_msgs_generate_messages_eus
[  0%] Built target geometry_msgs_generate_messages_nodejs
[  0%] Built target actionlib_msgs_generate_messages_nodejs
[  0%] Built target rosgraph_msgs_generate_messages_cpp
[  0%] Built target geometry_msgs_generate_messages_py
[  0%] Built target roscpp_generate_messages_py
[  0%] Built target geometry_msgs_generate_messages_lisp
[  0%] Built target rosgraph_msgs_generate_messages_eus
[  0%] Built target rosgraph_msgs_generate_messages_nodejs
[  0%] Built target roscpp_generate_messages_cpp
[  0%] Built target rosgraph_msgs_generate_messages_lisp
[  0%] Built target roscpp_generate_messages_eus
[  0%] Built target roscpp_generate_messages_nodejs
[  0%] Built target rosgraph_msgs_generate_messages_py
[  0%] Built target actionlib_generate_messages_nodejs
[  0%] Built target sensor_msgs_generate_messages_py
[  0%] Built target sensor_msgs_generate_messages_eus
[  3%] Built target rplidarNode
[  3%] Built target sensor_msgs_generate_messages_lisp
[  4%] Built target rplidarNodeClient
[  4%] Built target sensor_msgs_generate_messages_nodejs
[  5%] Built target map_to_image_node
[  5%] Built target sensor_msgs_generate_messages_cpp
[  5%] Built target actionlib_generate_messages_cpp
[  5%] Built target actionlib_generate_messages_lisp
[  5%] Built target actionlib_generate_messages_eus
[  5%] Built target _face_recognition_generate_messages_check_deps_FaceRecognitionResult
[  5%] Built target _face_recognition_generate_messages_check_deps_FaceRecognitionGoal
[  5%] Built target _face_recognition_generate_messages_check_deps_FaceRecognitionFeedback
[  5%] Built target _face_recognition_generate_messages_check_deps_FaceRecognitionActionFeedback
[  5%] Built target _face_recognition_generate_messages_check_deps_FRClientGoal
[  5%] Built target _face_recognition_generate_messages_check_deps_FaceRecognitionActionResult
[  5%] Built target _face_recognition_generate_messages_check_deps_FaceRecognitionAction
[  5%] Built target actionlib_generate_messages_py
[  6%] Performing update step for 'libcreate'
[  6%] Building CXX object procrob_functional/CMakeFiles/face_recognition_lib.dir/src/face_recognition_lib.cpp.o
[  6%] Built target _face_recognition_generate_messages_check_deps_FaceRecognitionActionGoal
[  6%] Built target visualization_msgs_generate_messages_eus
[  6%] Built target tf2_msgs_generate_messages_nodejs
[  6%] Built target visualization_msgs_generate_messages_nodejs
[  7%] Built target imu_attitude_to_tf_node
[  9%] Built target pose_and_orientation_to_imu_node
[ 10%] Built target tf_generate_messages_py
[ 10%] Performing configure step for 'libcreate'
[ 10%] Built target visualization_msgs_generate_messages_py
[ 10%] Built target visualization_msgs_generate_messages_cpp
[ 10%] Built target visualization_msgs_generate_messages_lisp
[ 10%] Built target tf_generate_messages_nodejs
[ 10%] Built target tf_generate_messages_cpp
[ 10%] Built target tf_generate_messages_eus
[ 10%] Built target tf2_msgs_generate_messages_cpp
[ 10%] Built target tf2_msgs_generate_messages_eus
[ 10%] Built target tf2_msgs_generate_messages_lisp
[ 10%] Built target tf_generate_messages_lisp
[ 10%] Built target tf2_msgs_generate_messages_py
-- Boost version: 1.58.0
-- Found the following Boost libraries:
--   system
--   thread
--   chrono
--   date_time
--   atomic
[ 11%] Built target tf_listener
[ 12%] Built target tf_broadcaster
-- Configuring done
[ 14%] Built target turtlebot_teleop_joy
-- Generating done
-- Build files have been written to: /home/horc/catkin_ws/devel/src/libcreate
[ 14%] Built target turtlebot_description_xacro_generated_to_devel_space_
[ 17%] Built target ca_msgs_generate_messages_py
[ 17%] Built target _hector_mapping_generate_messages_check_deps_HectorDebugInfo
[ 20%] Built target ca_msgs_generate_messages_eus
[ 23%] Built target ca_msgs_generate_messages_cpp
[ 23%] Performing build step for 'libcreate'
make[3]: warning: jobserver unavailable: using -j1.  Add '+' to parent make rule.
[ 23%] Built target _hector_mapping_generate_messages_check_deps_HectorIterData
[ 26%] Built target ca_msgs_generate_messages_lisp
[ 29%] Built target hector_nav_msgs_generate_messages_nodejs
[ 31%] Built target hector_nav_msgs_generate_messages_lisp
[ 35%] Built target ca_msgs_generate_messages_nodejs
[ 39%] Built target hector_nav_msgs_generate_messages_eus
[ 41%] Built target hector_nav_msgs_generate_messages_cpp
[ 45%] Built target hector_nav_msgs_generate_messages_py
[ 47%] Built target beginner_tutorials_generate_messages_nodejs
[ 47%] Built target beginner_tutorials_generate_messages_cpp
[ 49%] Built target beginner_tutorials_generate_messages_eus
[ 51%] Built target beginner_tutorials_generate_messages_py
[ 57%] Built target create
[ 52%] Built target beginner_tutorials_generate_messages_lisp
[ 57%] Built target face_recognition_generate_messages_cpp
[ 62%] Built target face_recognition_generate_messages_nodejs
[ 68%] Built target face_recognition_generate_messages_eus
[ 73%] Built target face_recognition_generate_messages_py
[ 71%] Built target create_demo
[ 73%] Building CXX object procrob_functional/CMakeFiles/Fserver.dir/src/face_recognition.cpp.o
[ 77%] Built target face_recognition_generate_messages_lisp
[ 78%] Built target hector_mapping_generate_messages_nodejs
[ 79%] Built target hector_mapping_generate_messages_cpp
[ 85%] Built target odom_example
[ 80%] Built target hector_trajectory_server
[ 82%] Built target hector_mapping_generate_messages_py
[ 84%] Built target hector_map_server
[ 85%] Built target hector_mapping_generate_messages_lisp
[ 87%] Built target hector_mapping_generate_messages_eus
[ 87%] Built target hector_nav_msgs_generate_messages
[ 87%] Built target ca_msgs_generate_messages
[100%] Built target bumper_example
[ 87%] Built target beginner_tutorials_generate_messages
[ 87%] Built target face_recognition_generate_messages
[ 87%] Built target hector_mapping_generate_messages
[ 88%] Built target Fclient
[ 89%] Built target geotiff_writer
[ 91%] Built target hector_mapping
[ 92%] Performing install step for 'libcreate'
No install
[ 92%] Completed 'libcreate'
[ 93%] Built target geotiff_saver
[ 94%] Built target hector_geotiff_plugins
[ 95%] Built target geotiff_node
[ 96%] Built target libcreate
[ 97%] Built target ca_driver
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp: In member function ‘void FaceRecognitionLib::storeEigenfaceImages()’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:333:31: error: ‘cvCopyImage’ was not declared in this scope
    cvCopyImage(byteImg, bigImg);
                               ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp: In member function ‘bool FaceRecognitionLib::learn(const char*)’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:375:45: error: ‘cvEigenDecomposite’ was not declared in this scope
    projectedTrainFaceMat->data.fl + i*offset);
                                             ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp: In member function ‘void FaceRecognitionLib::doPCA()’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:553:3: error: ‘CV_EIGOBJ_NO_CALLBACK’ was not declared in this scope
   CV_EIGOBJ_NO_CALLBACK,
   ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:558:23: error: ‘cvCalcEigenObjects’ was not declared in this scope
   eigenValMat->data.fl);
                       ^
procrob_functional/CMakeFiles/face_recognition_lib.dir/build.make:62: recipe for target 'procrob_functional/CMakeFiles/face_recognition_lib.dir/src/face_recognition_lib.cpp.o' failed
make[2]: *** [procrob_functional/CMakeFiles/face_recognition_lib.dir/src/face_recognition_lib.cpp.o] Error 1
CMakeFiles/Makefile2:6844: recipe for target 'procrob_functional/CMakeFiles/face_recognition_lib.dir/all' failed
make[1]: *** [procrob_functional/CMakeFiles/face_recognition_lib.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
In file included from /home/horc/catkin_ws/src/procrob_functional/src/face_recognition.cpp:42:0:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp: In member function ‘void FaceRecognitionLib::storeEigenfaceImages()’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:333:31: error: ‘cvCopyImage’ was not declared in this scope
    cvCopyImage(byteImg, bigImg);
                               ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp: In member function ‘bool FaceRecognitionLib::learn(const char*)’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:375:45: error: ‘cvEigenDecomposite’ was not declared in this scope
    projectedTrainFaceMat->data.fl + i*offset);
                                             ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp: In member function ‘void FaceRecognitionLib::doPCA()’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:553:3: error: ‘CV_EIGOBJ_NO_CALLBACK’ was not declared in this scope
   CV_EIGOBJ_NO_CALLBACK,
   ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition_lib.cpp:558:23: error: ‘cvCalcEigenObjects’ was not declared in this scope
   eigenValMat->data.fl);
                       ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition.cpp: In constructor ‘FaceRecognition::FaceRecognition(std::__cxx11::string)’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition.cpp:413:35: warning: ‘FaceRecognition::it_’ will be initialized after [-Wreorder]
   image_transport::ImageTransport it_;
                                   ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition.cpp:411:24: warning:   ‘ros::NodeHandle FaceRecognition::pnh_’ [-Wreorder]
   ros::NodeHandle nh_, pnh_;
                        ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition.cpp:50:3: warning:   when initialized here [-Wreorder]
   FaceRecognition(std::string name) : 
   ^
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition.cpp: In member function ‘void FaceRecognition::imageCB(const ImageConstPtr&)’:
/home/horc/catkin_ws/src/procrob_functional/src/face_recognition.cpp:340:108: error: ‘cvEigenDecomposite’ was not declared in this scope
 lizedImg,frl.nEigens,frl.eigenVectArr,0, 0,frl.pAvgTrainImg,projectedTestFace);
                                                                              ^
procrob_functional/CMakeFiles/Fserver.dir/build.make:62: recipe for target 'procrob_functional/CMakeFiles/Fserver.dir/src/face_recognition.cpp.o' failed
make[2]: *** [procrob_functional/CMakeFiles/Fserver.dir/src/face_recognition.cpp.o] Error 1
CMakeFiles/Makefile2:6291: recipe for target 'procrob_functional/CMakeFiles/Fserver.dir/all' failed
make[1]: *** [procrob_functional/CMakeFiles/Fserver.dir/all] Error 2
Makefile:138: recipe for target 'all' failed
make: *** [all] Error 2
Invoking "make -j8 -l8" failed

Originally posted by mjc1021 on ROS Answers with karma: 1 on 2018-02-19
Post score: 0

Original comments
Comment by ahendrix on 2018-02-19:
It looks like this is failing on OpenCV2 function calls. Do you have OpenCV3?
Comment by mjc1021 on 2018-02-19:
I have vision_opencv
Comment by ahendrix on 2018-02-19:
vision_opencv is a wrapper library, not a version of OpenCV. According to http://www.ros.org/reps/rep-0003.html#kinetic-kame-may-2016-may-2021, on Kinetic and Ubuntu 16.04, the default version of OpenCV is OpenCV3, so that's probably what you have.
Comment by gvdhoorn on 2018-02-20:
@mjc1021:

I am running Ubuntu 16.04 with ROS Kinetic as I believe I should be

It's not made explicit (in the readme fi), but at least the wiki page you link shows only an Indigo version. So Kinetic is not necessarily supported.
As @ahendrix writes, the pkg uses OpenCV2, and you have v3.

A:

It looks like this package uses an obsolete API from OpenCV2, which is no longer supported in OpenCV3.
It looks like you or someone else will need to update this package to support OpenCV3. You can either try to do this yourself and submit a pull request on GitHub, or open an issue on the project's issue tracker and hope that the maintainers have time to update it.

Originally posted by ahendrix with karma: 47576 on 2018-02-19
This answer was ACCEPTED on the original site
Post score: 0

