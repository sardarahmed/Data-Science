Q:

Navigation Stack -Error

I have been using the Segbot Navigation package to navigate our robot through office work spaces with cubicles and rooms. It sometimes has problem navigating through narrow aisles and doorways (not always very consistent). I have attached a file with some of the error/warning messages I am getting.
After going through navigation stack literature, I feel 'obstacle range' in the Costmap configuration is one of the parameters I could change. Please let me know if you have suggestions/recommendations regarding any other parameters that I could modify to improve the performance.
I feel the map we are getting is pretty good . Will manually modifying it improve the performance ?
     WARN] [1411756064.480605628]: Calculation of Distance between bubble and nearest obstacle failed. Frame 0 of 5 in collision. Plan invalid 
    [ WARN] [1411756064.480653208]: Failed to add frames to existing band 
    [ WARN] [1411756064.824642032]: Map update loop missed its desired rate of 5.0000Hz... the loop actually took 0.2956 seconds 
    [ WARN] [1411756064.880660273]: Calculation of Distance between bubble and nearest obstacle failed. Frame 105 of 130 in collision. Plan invalid 
    [ WARN] [1411756064.880743612]: Conversion from plan to elastic band failed. Plan probably not collision free. Plan not set for optimization 
    [ERROR] [1411756064.880786228]: Setting plan to Elastic Band method failed! 
    [ERROR] [1411756064.880828885]: Failed to pass global plan to the controller, aborting. 
[ WARN] [1411756064.480605628]: Calculation of Distance between bubble and nearest obstacle failed. Frame 0 of 5 in collision. Plan invalid 
[ WARN] [1411756064.480653208]: Failed to add frames to existing band 
[ WARN] [1411756064.824642032]: Map update loop missed its desired rate of 5.0000Hz... the loop actually took 0.2956 seconds 
[ WARN] [1411756064.880660273]: Calculation of Distance between bubble and nearest obstacle failed. Frame 105 of 130 in collision. Plan invalid 
[ WARN] [1411756064.880743612]: Conversion from plan to elastic band failed. Plan probably not collision free. Plan not set for optimization 
[ERROR] [1411756064.880786228]: Setting plan to Elastic Band method failed! 
[ERROR] [1411756064.880828885]: Failed to pass global plan to the controller, aborting. 
[ INFO] [1411756192.792013719]: Global plan set to elastic band for optimization 
[ WARN] [1411756201.242162218]: Calculation of Distance between bubble and nearest obstacle failed. Frame 0 of 1 in collision. Plan invalid 
[ WARN] [1411756201.242268942]: Failed to add frames to existing band 
[ INFO] [1411756201.291943229]: Global plan set to elastic band for optimization 
[ WARN] [1411756202.241923475]: Optimization failed - Band invalid - No controls availlable 
[ INFO] [1411756202.292122263]: Global plan set to elastic band for optimization 
[ WARN] [1411756217.241859529]: Optimization failed - Band invalid - No controls availlable 
[ INFO] [1411756217.291952232]: Global plan set to elastic band for optimization 
[ WARN] [1411756218.641859635]: Calculation of Distance between bubble and nearest obstacle failed. Frame 0 of 1 in collision. Plan invalid 
[ WARN] [1411756218.641931723]: Failed to add frames to existing band 
[ INFO] [1411756218.691938193]: Global plan set to elastic band for optimization 
[ WARN] [1411756219.591840715]: Calculation of Distance between bubble and nearest obstacle failed. Frame 0 of 1 in collision. Plan invalid 
[ WARN] [1411756219.591897692]: Failed to add frames to existing band 
[ INFO] [1411756219.641959228]: Global plan set to elastic band for optimization 
[ WARN] [1411756223.841820722]: Optimization failed - Band invalid - No controls availlable 
[ WARN] [1411756223.891952513]: Calculation of Distance between bubble and nearest obstacle failed. Frame 79 of 96 in collision. Plan invalid 
[ WARN] [1411756223.892017305]: Conversion from plan to elastic band failed. Plan probably not collision free. Plan not set for optimization 
[ERROR] [1411756223.892063528]: Setting plan to Elastic Band method failed! 
[ERROR] [1411756223.892101993]: Failed to pass global plan to the controller, aborting. 

Originally posted by pnambiar on ROS Answers with karma: 120 on 2014-09-29
Post score: 1

Original comments
Comment by pnambiar on 2014-09-29:
Conversion from plan to elastic band failed. Plan probably not collision free. Plan not set for optimization
Setting plan to Elastic Band method failed!
Failed to pass global plan to the controller, aborting.
Comment by anonymous60874 on 2022-03-15:
Hi, I have the same problem but couldn't solve it. Can someone help me.

A:

I feel the map we are getting is pretty good .

Mapping (gmapping or etc.) doesn't have anything to do with the navigation stack. To experiment with getting a good nav setup, get a static map separately via gmapping and teleoperation, or setup navigation without a static map (using fake_localization instead of amcl to publish the odom->map transform).
Assuming you're running a typical move_base setup, 'Map update loop missed' means that your pc was process costmap updates as quickly as it wanted. Since your system is not realtime, it tries to run loops at a certain rate set in the parameters. Specifically, one of the costmaps inside move_base was unable to update at 5 Hz, this is usually due to too much processing load on the system. However since that message only popped up once, it's likely a corner case and you shouldn't need to reduce/alter any of the rates in your parameter files.
From the remainder of the messages, I'm guessing you're running eband_local_planner. If you're just trying to get the navigation stack up and running, you could try the defaultbase_local_planner instead, since it's a little more battle tested. Then you can tune the rest of the stack (move_base, costmap, and global_planner parameters) before delving into swapping in a more experimental planner.

Originally posted by paulbovbel with karma: 4518 on 2014-09-29
This answer was ACCEPTED on the original site
Post score: 1

