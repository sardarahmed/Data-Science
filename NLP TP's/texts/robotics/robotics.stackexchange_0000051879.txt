Q:

openni_tracker_clean_transformation

Dear all.
Just wondering whether it might be possible to clean the last transformation from a "New User N".
In other words, when I stand in front of the Xtion Pro live I get the transformation from "/openni_depth_frame" to "/right_hip_1" then I move away from the sensor, but it keeps giving me the last transformation. And the function
listener.waitForTransformationform("/openni_depth_frame","/right_hip_1",right_hip_point_1.header.stamp, ros::Duration(3))
keeps giving me true and I cant use other transformations from other New Users.
In advance I appreciate your help.

Originally posted by acp on ROS Answers with karma: 556 on 2013-06-11
Post score: 0

A:

I am not using Xtion Pro, but for kinect, but it is the same openni_tracker.
I would say that in fact you make two mistakes :

as soon as you live the frame, the transformation "/openni_depth_frame" to "/right_hip_1" disappears in almost no time (less than two seconds). However, if you are using RVIZ, you have a parameter you can change : In RVIZ, in the pannel Displays, under TF you have "Frame Timeout". Try putting this to 0, and you will not see the transforms anymore, as soon as you left the frame.
The second mistake concerns your use of listener.waitForTransform : as you can see on this tutorial, the third argument is the moment at which you want to know the transform was. Here, it seems that you always ask for a transform in the past, at the last moment you found the right hip. Thus leading to a seemingly always existing transform. Try to replace right_hip_point_1.header.stamp by ros::Time::now(), and you should not have it anymore.

The combination of the two thus lead you to think the transform was still here after you left the frame, whereas in fact it is not :-)
Let me know,
Bests regards,
Steph

Originally posted by Stephane.M with karma: 1304 on 2013-06-11
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by acp on 2013-06-11:
Hi Step, thanks for your answer, I have tried to change the parameter 'Frame Timeout' under 'TF'  to zero, but for some reason rviz does not allow me, it always end up with 1.
Comment by Stephane.M on 2013-06-11:
Ok, I always put 1 also :-S Sorry for the mistake ^^ By the way, is it "normal" now ? If yes, please mark my answer as correct. If not, let me know the remaining problems (edit your question with a [EDIT] tag, so I can also modify my answer) Bests
Comment by acp on 2013-06-11:
Hi Steph, well, some how, I can not use the edit tag.  But it seems to be that it is working now.
Comment by acp on 2013-06-12:
I have a question, what is the best to track, the hip, shoulder etc....thanx :)
Comment by Stephane.M on 2013-06-12:
If my answer solved the problem, mark it as the correct answer please.
Then, for another question, open a new question, never ask a question as an answer or comments ;-)
Comment by acp on 2013-06-13:
I think I have mark it as correct question, if not where can i do that? :)
Comment by Stephane.M on 2013-06-13:
Near my post, on the left, there are two arrows, with a  "1" between. And just under a "v" inside a grey circle, you click there to mark my answer as correct :-)

