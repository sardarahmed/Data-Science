Q:

Can't make "getParams" work in C++

I'm able to set params but when I get them, it returns success with the wrong value.
double myDouble = 7.7;
_node.setParam("/my_double", myDouble);
double myDoubleFromRos;
std::cout << "get success = " << _node.getParam("/my_double", myDoubleFromRos) << "   get value = " << myDoubleFromRos << "   value should be = " << myDouble << std::endl;
The output of this is:
get success = 1   get value = 6.95333e-310   value should be = 7.7
On the command line I type:
rosparam get "/my_double"

7.7

So I'm successfully setting the parameter but I'm not able to get it. I'm fairly new to ROS so there must be some assumption I'm missing.
Any advice would be greatly appreciated.
Using fuerte-desktop-full latest.

Originally posted by uuilly on ROS Answers with karma: 13 on 2013-03-05
Post score: 0

Original comments
Comment by Claudio on 2013-03-06:
Next time please format your code correctly.

A:

I think your problem here is not with getParam, but with the way you've structured your output.
The evaluation order of "<<" is undefined, so the compiler is free to evaluate the statements on the output line in whatever order it chooses.  If it chooses a right-to-left order, then it will try and string-ify the value of "myDoubleFromRos" before the call to _node.getParam(), so the value is uninitialized.
Try the following:
double myDouble = 7.7, myDoubleFromRos;
_node.setParam("/my_double", myDouble);

std::cout << "get success = " << _node.getParam("/my_double", myDoubleFromRos);
std::cout << "get value = " << myDoubleFromRos << " value should be = " << myDouble;

For more explanation, see the discussion here.

Originally posted by Jeremy Zoss with karma: 4976 on 2013-03-05
This answer was ACCEPTED on the original site
Post score: 6

