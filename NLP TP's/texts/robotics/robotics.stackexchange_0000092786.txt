Q:

navsat_transform_node without IMU

I'm trying to fuse GPS data and IMU data using robot_localization. I have the IMU data going into the filter nicely, now I'm trying to configure GPS. The problem is that my robot has a large inverter relatively close to where the IMU is mounted which is causing too much magnetic noise, so the magnetometer on the IMU is disabled. I understand that the navsat_transform_node requires an absolute starting heading (usually from the IMU) to initialize properly. What are some ways I can get around this?
I thought about enabling the "wait_for_datum" parameter and then using the GPS to manually using the set_datum service. Has anyone done this in the past?

Originally posted by levi.starrett on ROS Answers with karma: 23 on 2019-07-29
Post score: 1

A:

navsat_transform_node only needs one IMU message to generate the required transform, so one option is to make a node that waits until your robot has driven X meters, and then uses the relative poses of the start and current GPS readings to generate an earth-referenced heading. Then you can publish that as a quaternion in an IMU message.

Originally posted by Tom Moore with karma: 13689 on 2019-08-29
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by w_botics on 2022-11-29:
Just wondering if anyone else has had any success with this technique.
Comment by Vini71 on 2023-08-08:
Crazy behavior I have spent hours trying to see the /imu topic being subscribed by navsat_transform_node and nave saw it! Then quickly echoing the /imu topic in subsequent seconds, I checked this behavior:
new_nav2_ws$ ros2 topic info /imu
Type: sensor_msgs/msg/Imu
Publisher count: 0
Subscription count: 2

new_nav2_ws$ ros2 topic info /imu
Type: sensor_msgs/msg/Imu
Publisher count: 1
Subscription count: 1

the navsat_transform node consumed once the imu data and unsubscribed (the counter fall from 2 to 1)

