Q:

Using Bebop Autonomy with Bebop 2 Power drone in WSL windows 10

Hi,
I have followed the steps for the installation and running of the driver on Kinetic Ubuntu through BASH on Windows 10.
The drone is connected to the WIFI and can be pinged using 192.168.42.1.
When I run the roslaunch bebop_driver bebop_node.launch
I get the following:
SUMMARY
========

PARAMETERS
 * /bebop/bebop_driver/bebop_ip: 192.168.42.1
 * /bebop/bebop_driver/camera_info_url: package://bebop_d...
 * /bebop/bebop_driver/cmd_vel_timeout: 0.2
 * /bebop/bebop_driver/odom_frame_id: odom
 * /bebop/bebop_driver/publish_odom_tf: True
 * /bebop/bebop_driver/reset_settings: True
 * /bebop/bebop_driver/states/enable_altitudechanged: True
 * /bebop/bebop_driver/states/enable_autotakeoffmodechanged: True
 * /bebop/bebop_driver/states/enable_camerastate_orientation: True
 * /bebop/bebop_driver/states/enable_commonstate_batterystatechanged: True
 * /bebop/bebop_driver/states/enable_commonstate_wifisignalchanged: True
 * /bebop/bebop_driver/states/enable_controllerstate_ispilotingchanged: True
 * /bebop/bebop_driver/states/enable_flightplanstate_availabilitystatechanged: True
 * /bebop/bebop_driver/states/enable_flightplanstate_componentstatelistchanged: True
 * /bebop/bebop_driver/states/enable_gpsstate_numberofsatellitechanged: True
 * /bebop/bebop_driver/states/enable_mavlinkstate_mavlinkfileplayingstatechanged: True
 * /bebop/bebop_driver/states/enable_mavlinkstate_mavlinkplayerrorstatechanged: True
 * /bebop/bebop_driver/states/enable_mediastreamingstate_videoenablechanged: True
 * /bebop/bebop_driver/states/enable_numberofsatellitechanged: True
 * /bebop/bebop_driver/states/enable_overheatstate_overheatchanged: True
 * /bebop/bebop_driver/states/enable_pilotingstate_altitudechanged: True
 * /bebop/bebop_driver/states/enable_pilotingstate_attitudechanged: True
 * /bebop/bebop_driver/states/enable_pilotingstate_flattrimchanged: True
 * /bebop/bebop_driver/states/enable_pilotingstate_flyingstatechanged: True
 * /bebop/bebop_driver/states/enable_pilotingstate_navigatehomestatechanged: True
 * /bebop/bebop_driver/states/enable_pilotingstate_positionchanged: True
 * /bebop/bebop_driver/states/enable_pilotingstate_speedchanged: True
 * /bebop/robot_description: <?xml version="1....
 * /rosdistro: kinetic
 * /rosversion: 1.12.7

NODES
  /bebop/
    bebop_driver (bebop_driver/bebop_driver_node)
    robot_state_publisher (robot_state_publisher/robot_state_publisher)

auto-starting new master
process[master]: started with pid [1541]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 6597259c-b3e5-11e7-a780-3417eba55f55
process[rosout-1]: started with pid [1554]
started core service [/rosout]
process[bebop/bebop_driver-2]: started with pid [1557]
process[bebop/robot_state_publisher-3]: started with pid [1572]
[ INFO] [1508318353.641131800]: Initializing nodelet with 8 worker threads.
[ INFO] [1508318354.019629800]: [BebopSDK] 10:19:14:019 | Bebop:225 - Bebop Cnstr()
[ INFO] [1508318354.026915700]: Nodelet Cstr
[ INFO] [1508318354.053343700]: Connecting to Bebop ...
[ INFO] [1508318354.061066900]: [CB] 10:19:14:061 | Ardrone3PilotingStateFlatTrimChanged:388 - [STATES] Enabling states/ardrone3/PilotingState/FlatTrimChanged
[ INFO] [1508318354.063845800]: [CB] 10:19:14:063 | Ardrone3PilotingStateFlyingStateChanged:432 - [STATES] Enabling states/ardrone3/PilotingState/FlyingStateChanged
[ INFO] [1508318354.067703300]: [CB] 10:19:14:067 | Ardrone3PilotingStateNavigateHomeStateChanged:534 - [STATES] Enabling states/ardrone3/PilotingState/NavigateHomeStateChanged
[ INFO] [1508318354.070739700]: [CB] 10:19:14:070 | Ardrone3PilotingStatePositionChanged:592 - [STATES] Enabling states/ardrone3/PilotingState/PositionChanged
[ INFO] [1508318354.073281000]: [CB] 10:19:14:073 | Ardrone3PilotingStateSpeedChanged:657 - [STATES] Enabling states/ardrone3/PilotingState/SpeedChanged
[ INFO] [1508318354.076121700]: [CB] 10:19:14:076 | Ardrone3PilotingStateAttitudeChanged:722 - [STATES] Enabling states/ardrone3/PilotingState/AttitudeChanged
[ INFO] [1508318354.079936300]: [CB] 10:19:14:079 | Ardrone3PilotingStateAltitudeChanged:838 - [STATES] Enabling states/ardrone3/PilotingState/AltitudeChanged
[ INFO] [1508318354.092637900]: [CB] 10:19:14:092 | Ardrone3MediaStreamingStateVideoEnableChanged:1388 - [STATES] Enabling states/ardrone3/MediaStreamingState/VideoEnableChanged
[ INFO] [1508318354.096673000]: [CB] 10:19:14:096 | Ardrone3CameraStateOrientation:1490 - [STATES] Enabling states/ardrone3/CameraState/Orientation
[ INFO] [1508318354.106931500]: [CB] 10:19:14:106 | Ardrone3GPSStateNumberOfSatelliteChanged:1882 - [STATES] Enabling states/ardrone3/GPSState/NumberOfSatelliteChanged
[ INFO] [1508318354.116109700]: [CB] 10:19:14:116 | CommonCommonStateBatteryStateChanged:148 - [STATES] Enabling states/common/CommonState/BatteryStateChanged
[ INFO] [1508318354.125102700]: [CB] 10:19:14:125 | CommonCommonStateWifiSignalChanged:510 - [STATES] Enabling states/common/CommonState/WifiSignalChanged
[ INFO] [1508318354.137140100]: [CB] 10:19:14:137 | CommonOverHeatStateOverHeatChanged:1023 - [STATES] Enabling states/common/OverHeatState/OverHeatChanged
[ INFO] [1508318354.144972900]: [CB] 10:19:14:144 | CommonMavlinkStateMavlinkFilePlayingStateChanged:1118 - [STATES] Enabling states/common/MavlinkState/MavlinkFilePlayingStateChanged
[ INFO] [1508318354.159478500]: [CB] 10:19:14:159 | CommonMavlinkStateMavlinkPlayErrorStateChanged:1183 - [STATES] Enabling states/common/MavlinkState/MavlinkPlayErrorStateChanged
[ INFO] [1508318354.182370400]: [CB] 10:19:14:182 | CommonFlightPlanStateAvailabilityStateChanged:1568 - [STATES] Enabling states/common/FlightPlanState/AvailabilityStateChanged
[ INFO] [1508318354.194394500]: [CB] 10:19:14:194 | CommonFlightPlanStateComponentStateListChanged:1619 - [STATES] Enabling states/common/FlightPlanState/ComponentStateListChanged
[ WARN] [1508318354.221960300]: [ARCONTROLLER_Network] 10:19:14:221 | ARCONTROLLER_Network_GetAvailableSocketPort:125 - Failed to set socket option SO_REUSEADDR: error=22 (Invalid argument)
[ INFO] [1508318354.223498300]: [ARCONTROLLER_Network] 10:19:14:223 | ARCONTROLLER_Network_GetAvailableSocketPort:128 - d2c_port port: 43210
[ WARN] [1508318354.235618200]: [ARCONTROLLER_Stream2] 10:19:14:235 | ARCONTROLLER_Stream2_Open_Socket:140 - Failed to set socket option SO_REUSEADDR: error=22 (Invalid argument)
[ INFO] [1508318354.240886100]: [ARCONTROLLER_Stream2] 10:19:14:240 | ARCONTROLLER_Stream2_Open_Socket:143 - udp local port stream: 55004
[ WARN] [1508318354.262788400]: [ARCONTROLLER_Stream2] 10:19:14:262 | ARCONTROLLER_Stream2_Open_Socket:140 - Failed to set socket option SO_REUSEADDR: error=22 (Invalid argument)
[ INFO] [1508318354.284812800]: [ARCONTROLLER_Stream2] 10:19:14:284 | ARCONTROLLER_Stream2_Open_Socket:143 - udp local port control: 55005

It hangs here for a while then continues to
[ERROR] [1508318375.291464600]: [ARDISCOVERY_Connection] 10:19:35:291 | ARDISCOVERY_Socket_Connect:731 - connect() failed: 11 Resource temporarily unavailable
[ERROR] [1508318380.292986200]: [ARDISCOVERY_Device] 10:19:40:292 | ARDISCOVERY_Device_NewARNetworkAL:243 - error: timeout error
[ERROR] [1508318380.294098100]: [ARCONTROLLER_Network] 10:19:40:294 | ARCONTROLLER_Network_New:355 - error: Error during the getting of the ARNETWORKAL_Manager from the device
[ INFO] [1508318380.294735900]: [ARCONTROLLER_Device] 10:19:40:294 | ARCONTROLLER_Device_StartRun:5123 - Start failed or canceled.
[ERROR] [1508318380.295142600]: [ARCONTROLLER_Device] 10:19:40:295 | ARCONTROLLER_Device_StopNetwork:5822 - Error occured durring unregistering ARCommands to the feature ARCONTROLLER_DICTIONARY_KEY_GENER
[ERROR] [1508318380.295418100]: [ARCONTROLLER_Device] 10:19:40:295 | ARCONTROLLER_Device_StopNetwork:5831 - Error occured durring unregistering ARCommands to the feature ARCONTROLLER_DICTIONARY_KEY_ARDRO
[ERROR] [1508318380.295678900]: [ARCONTROLLER_Device] 10:19:40:295 | ARCONTROLLER_Device_StopNetwork:5840 - Error occured durring unregistering ARCommands to the feature ARCONTROLLER_DICTIONARY_KEY_COMMO
[ERROR] [1508318380.295903300]: [ARCONTROLLER_Device] 10:19:40:295 | ARCONTROLLER_Device_StopRun:5166 - StopNetwork failed with error :Bad parameters
[ERROR] [1508318380.296222300]: [ARCONTROLLER_Device] 10:19:40:296 | ARCONTROLLER_Device_StartRun:5131 - Start fail error :Error during the getting of the ARNETWORKAL_Manager from the device
[ INFO] [1508318380.296780200]: [BebopSDK] 10:19:40:296 | Cleanup:326 - Bebop Cleanup()
[FATAL] [1508318380.297489600]: Init failed: Waiting for device failed: No error
[ INFO] [1508318380.297983100]: Bebop Nodelet Dstr: 0
[ INFO] [1508318380.298184000]: Killing Camera Thread ...
[ INFO] [1508318380.298475000]: Killing Aux Thread ...
[bebop/bebop_driver-2] process has died [pid 1557, exit code -11, cmd /home/Vicon/bebop_ws/devel/lib/bebop_driver/bebop_driver_node __name:=bebop_driver __log:=/home/Vicon/.ros/log/6597259c-b3e5-11e7-a780-3417eba55f55/bebop-bebop_driver-2.log].
log file: /home/Vicon/.ros/log/6597259c-b3e5-11e7-a780-3417eba55f55/bebop-bebop_driver-2*.log

I followed the steps and also tried on a different PC with the same settings and also using the Indigo package as well.
Cheers Jack

Originally posted by jfursdon on ROS Answers with karma: 3 on 2017-10-18
Post score: 0

Original comments
Comment by gvdhoorn on 2017-10-18:
May I suggest you include the information that you are trying this on Win10/WSL in either your question title or (at least) in the tags?

A:

on Kinetic Ubuntu through BASH on Windows 10

I think this is what is causing you issues: ROS on WSL is not an officially supported setup, and while it can be made to work somewhat (see #q238646), the network stack of WSL is not mature enough (in my opinion and according to quite some reporters on the wsl issue tracker) to support the same kind of applications as a regular Ubuntu/other Linux install would be able to.

ARCONTROLLER_Network_GetAvailableSocketPort:125 - Failed to set socket option SO_REUSEADDR: error=22 (Invalid argument)

This is the kind of errors I've seen quite a lot with WSL, and they point to (remaining) issues with the network stack.
I cannot say conclusively that WSL is the real cause here, but I would test whether this works on a 'native' Ubuntu Xenial-ROS Kinetic install. If it does, then it would seem WSL's network stack is missing something the software you're trying to run needs.

Originally posted by gvdhoorn with karma: 86574 on 2017-10-18
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jfursdon on 2017-10-20:
There were good examples for the take off, landing and emergency commands but no example of what the piloting commands should look like. I tried the same layouts but these did not work.
Any examples of piloting commands would be greatly appreciated.

