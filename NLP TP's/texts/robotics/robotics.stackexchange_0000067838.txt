Q:

Error: 'ros::TimeNotInitializedException' thrown due to calling ros::Time::now() before creating the first NodeHandle or calling ros::start()

I tried googling for an answer but it seems like the answers are targeted for rospy and not roscpp. Also, I am using ros indigo.
The code I am trying to run is pretty simple:
#include "generate_global_map.hpp"
#include <iostream>

int main(int argc, char **argv) {

  ros::init(argc, argv, "test_generate_global_map");

  std::cout << "hello world" << std::endl;

  ros::Rate loop_rate(5); //10hz loop rate

  while (ros::ok()){

  ros::spinOnce(); //ros spin is to ensure that ros threading does not leave subscribes un processed
  loop_rate.sleep();

  }

  return 0;

}

When I try to rosrun this I get this error:
hello world
terminate called after throwing an instance of 'ros::TimeNotInitializedException'
  what():  Cannot use ros::Time::now() before the first NodeHandle has been created or ros::start() has been called.      If this is a standalone app or test that just uses ros::Time and does not communicate over ROS, you may also call     ros::Time::init()
Aborted (core dumped)

Anyone know what the issue is?

Originally posted by justiliang on ROS Answers with karma: 23 on 2015-05-31
Post score: 2

A:

Cannot use ros::Time::now() before the first NodeHandle has been created or ros::start() has been called.      If this is a standalone app or test that just uses ros::Time and does not communicate over ROS, you may also call     ros::Time::init()

I hate it when I get these kind of answers, but in this case I think the exception is actually pretty verbose and points you to your issue: you need to create a ros::NodeHandle instance before using any of ros::Rate, ros::ok() or ros::spinOnce(), or manually call ros::start() (but I doubt that is a recommended use of that API).
If you do not want a NodeHandle, you could (as the message tells you) also directly call ros::Time::init().
See also the Writing a Simple Publisher and Subscriber (C++) tutorial.

Originally posted by gvdhoorn with karma: 86574 on 2015-05-31
This answer was ACCEPTED on the original site
Post score: 5

