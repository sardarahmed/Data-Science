Q:

How to use ROS gscam to get grayscale image

I am using ubuntu 12.04, ROS hydro and gscam to read webcam.
I can get color image easily by make
GSCAM_CONFIG="v4l2src device=/dev/video1 ! video/x-raw-yuv,framerate=30/1 ! ffmpegcolorspace"

Then I run gscam, rostopic /camera/image_raw gives me images.
However, I want to get single channel grayscale image from webcam directly, because my subsequent algorithms can only handle grayscale image (in opencv, the mat entries are CV_8UC1).
I tried
GSCAM_CONFIG="v4l2src device=/dev/video1 ! video/x-raw-yuv,framerate=30/1 ! videobalance saturation=0.0 ! ffmpegcolorspace"

It does make the output image looks as grayscale, but rostopic /camera/image_raw still have 3 channels instead of channel 1. (/camera/image_raw/step is three times of /camera/image_raw/width).
How can I get single channel image from gscam? (/camera/image_raw/step equals to /camera/image_raw/width)

Originally posted by PaulYang on ROS Answers with karma: 1 on 2013-12-01
Post score: 0

A:

It's possible the driver doesn't support that.

Originally posted by tfoote with karma: 58457 on 2014-11-23
This answer was ACCEPTED on the original site
Post score: 0

