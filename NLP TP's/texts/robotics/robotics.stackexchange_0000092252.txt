Q:

When an intended exit occurs, rosbag status problem

Hi, all
I am using rosbag to record some data automatically with systemd service in ubuntu.
When an intended exit occurs, the rosbag file is not completed status as *.bag.active.
I tried the bellow commands to restore the file.
rosbag reindex
rosbag fix
but it was not restored as unknown some problem.
Just It is possible to properly save using rosnode kill "node_name". But it is not automatic system...
I want to know that a rosbag file will be saved properly when it terminates abnormally.

Originally posted by Han Gyu-dong on ROS Answers with karma: 1 on 2019-06-28
Post score: 0

A:

It sounds as though you're sending a kill signal to the rosbag node so it's shutting down instantly and not cleaning up the .bag.active file. If you can send a sig int to shut it down instead then it should correctly close the bag file it's recording.
How is the rosbag node being killed? If you can tell us exactly how this is happening then we can suggest a method that should close out the bag file correctly. If you're doing it from a bash script you could use
kill -INT <rosbag PID>

to shut it down as if ctrl+c has been pressed.

Originally posted by PeteBlackerThe3rd with karma: 9529 on 2019-06-28
This answer was ACCEPTED on the original site
Post score: 0

