Q:

seq or time stamp for publishing a message

Hi I am currently working on a web interface to control a turtlebot and i am using ROSLIBJS but i am not too sure what to put for seq and time stamp for the /MoveBaseActionGoal message. If I put a number, it will work for the first time but it i want the turtlebot to go to another destination after it reached its first goal, it will not work because the time stamp is supposed to be the ROS time now.
However, I don't know how to get ros time now on ROSLIBJS.

Originally posted by Ashecotton on ROS Answers with karma: 1 on 2018-03-07
Post score: 0

Original comments
Comment by jayess on 2018-03-07:
As far as I can recall the seq field should be set for you and you should use ROS time to set the time stamp. I can't look up the documentation for this which is why I'm posting this as a comment.
Comment by Ashecotton on 2018-03-07:
Yeah me too, I understand that I need ros time for the time stamp but I just donâ€™t know how to get it in the JavaScript or ROSLIBJS. Thanks for the help anyway.

A:

If you look at the implementation of the SimpleActionServer, you'll see that you can use the Date object to get the time (in milliseconds):
var currentTime = new Date();
var secs = Math.floor(currentTime.getTime()/1000);
var nsecs = Math.round(1000000000*(currentTime.getTime()/1000-secs));
that.statusMessage.header.stamp.secs = secs;
that.statusMessage.header.stamp.nsecs = nsecs;

Originally posted by jayess with karma: 6155 on 2018-03-07
This answer was ACCEPTED on the original site
Post score: 0

