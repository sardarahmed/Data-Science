Q:

Cannot build a package on Debian (Could not find a package configuration file provided by "pcl_ros")

I am trying to build a package from github (point_cloud_io) on Debian and unfortunately catkin stops with an error:
Base path: /home/pi
Source space: /home/pi/src
Build space: /home/pi/build
Devel space: /home/pi/devel
Install space: /home/pi/install
Creating symlink "/home/pi/src/CMakeLists.txt" pointing to "/opt/ros/indigo/share/catkin/cmake/toplevel.cmake"
####
#### Running command: "cmake /home/pi/src -DCATKIN_DEVEL_PREFIX=/home/pi/devel -DCMAKE_INSTALL_PREFIX=/home/pi/install -G Unix Makefiles" in "/home/pi/build"
####
-- The C compiler identification is GNU 4.9.2
-- The CXX compiler identification is GNU 4.9.2
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Using CATKIN_DEVEL_PREFIX: /home/pi/devel
-- Using CMAKE_PREFIX_PATH: /opt/ros/indigo
-- This workspace overlays: /opt/ros/indigo
-- Found PythonInterp: /usr/bin/python (found version "2.7.9")
-- Using PYTHON_EXECUTABLE: /usr/bin/python
-- Using Debian Python package layout
-- Using empy: /usr/bin/empy
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /home/pi/build/test_results
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Looking for pthread_create
-- Looking for pthread_create - not found
-- Looking for pthread_create in pthreads
-- Looking for pthread_create in pthreads - not found
-- Looking for pthread_create in pthread
-- Looking for pthread_create in pthread - found
-- Found Threads: TRUE
-- Found gtest sources under '/usr/src/gtest': gtests will be built
-- Using Python nosetests: /usr/bin/nosetests-2.7
-- catkin 0.6.18
-- BUILD_SHARED_LIBS is on
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- ~~  traversing 1 packages in topological order:
-- ~~  - point_cloud_io
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- +++ processing catkin package: 'point_cloud_io'
-- ==> add_subdirectory(point_cloud_io)
CMake Warning at /opt/ros/indigo/share/catkin/cmake/catkinConfig.cmake:76 (find_package):
  Could not find a package configuration file provided by "pcl_ros" with any
  of the following names:

    pcl_rosConfig.cmake
    pcl_ros-config.cmake

  Add the installation prefix of "pcl_ros" to CMAKE_PREFIX_PATH or set
  "pcl_ros_DIR" to a directory containing one of the above files.  If
  "pcl_ros" provides a separate development package or SDK, be sure it has
  been installed.
Call Stack (most recent call first):
  point_cloud_io/CMakeLists.txt:8 (find_package)

-- Could not find the required component 'pcl_ros'. The following CMake error indicates that you either need to install the package with the same name or change your environment so that it can be found.
CMake Error at /opt/ros/indigo/share/catkin/cmake/catkinConfig.cmake:83 (find_package):
  Could not find a package configuration file provided by "pcl_ros" with any
  of the following names:

    pcl_rosConfig.cmake
    pcl_ros-config.cmake

  Add the installation prefix of "pcl_ros" to CMAKE_PREFIX_PATH or set
  "pcl_ros_DIR" to a directory containing one of the above files.  If
  "pcl_ros" provides a separate development package or SDK, be sure it has
  been installed.
Call Stack (most recent call first):
  point_cloud_io/CMakeLists.txt:8 (find_package)

-- Configuring incomplete, errors occurred!
See also "/home/pi/build/CMakeFiles/CMakeOutput.log".
See also "/home/pi/build/CMakeFiles/CMakeError.log".
Invoking "cmake" failed    enter code here

libpcl was installed using:
sudo apt-get install libpcl-dev

Any ideas what's wrong?
Rosdep also fails:
$ rosdep install --from-paths src --ignore-src --rosdistro indigo -y
ERROR: the following packages/stacks could not have their rosdep keys resolved
to system dependencies:
point_cloud_io: No definition of [pcl_ros] for OS [debian]

Adding --os=ubuntu:trusty forces it to build with this at the end:
#All required rosdeps installed successfully

But I still get:
Base path: /home/pi
Source space: /home/pi/src
Build space: /home/pi/build
Devel space: /home/pi/devel
Install space: /home/pi/install
####
#### Running command: "cmake /home/pi/src -DCATKIN_DEVEL_PREFIX=/home/pi/devel -DCMAKE_INSTALL_PREFIX=/home/pi/install -G Unix Makefiles" in "/home/pi/build"
####
-- Using CATKIN_DEVEL_PREFIX: /home/pi/devel
-- Using CMAKE_PREFIX_PATH: /opt/ros/indigo
-- This workspace overlays: /opt/ros/indigo
-- Using PYTHON_EXECUTABLE: /usr/bin/python
-- Using Debian Python package layout
-- Using empy: /usr/bin/empy
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /home/pi/build/test_results
-- Found gtest sources under '/usr/src/gtest': gtests will be built
-- Using Python nosetests: /usr/bin/nosetests-2.7
-- catkin 0.6.18
-- BUILD_SHARED_LIBS is on
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- ~~  traversing 1 packages in topological order:
-- ~~  - point_cloud_io
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- +++ processing catkin package: 'point_cloud_io'
-- ==> add_subdirectory(point_cloud_io)
-- Using these message generators: gencpp;genlisp;genpy
-- Configuring done
-- Generating done
-- Build files have been written to: /home/pi/build
####
#### Running command: "make -j4 -l4" in "/home/pi/build"
####
Scanning dependencies of target read
Scanning dependencies of target write
[ 16%] Building CXX object point_cloud_io/CMakeFiles/write.dir/src/write_node.cpp.o
[ 33%] Building CXX object point_cloud_io/CMakeFiles/write.dir/src/Write.cpp.o
[ 50%] Building CXX object point_cloud_io/CMakeFiles/read.dir/src/read_node.cpp.o
[ 66%] Building CXX object point_cloud_io/CMakeFiles/read.dir/src/Read.cpp.o
c++: internal compiler error: Killed (program cc1plus)
Please submit a full bug report,
with preprocessed source if appropriate.
See <file:///usr/share/doc/gcc-4.9/README.Bugs> for instructions.
point_cloud_io/CMakeFiles/read.dir/build.make:86: recipe for target 'point_cloud_io/CMakeFiles/read.dir/src/Read.cpp.o' failed
make[2]: *** [point_cloud_io/CMakeFiles/read.dir/src/Read.cpp.o] Error 4
make[2]: *** Waiting for unfinished jobs....
CMakeFiles/Makefile2:1852: recipe for target 'point_cloud_io/CMakeFiles/read.dir/all' failed
make[1]: *** [point_cloud_io/CMakeFiles/read.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
[ 83%] Linking CXX executable /home/pi/devel/lib/point_cloud_io/write
/usr/bin/ld: warning: libboost_system.so.1.54.0, needed by /opt/ros/indigo/lib/libpcl_ros_filters.so, may conflict with libboost_system.so.1.55.0
/usr/bin/ld: warning: libboost_thread.so.1.54.0, needed by /usr/lib/gcc/arm-linux-gnueabihf/4.9/../../../libpcl_common.so, may conflict with libboost_thread.so.1.55.0
/usr/bin/ld: warning: libboost_filesystem.so.1.54.0, needed by /usr/lib/gcc/arm-linux-gnueabihf/4.9/../../../libpcl_io.so, may conflict with libboost_filesystem.so.1.55.0
/usr/bin/ld: warning: libboost_regex.so.1.54.0, needed by /opt/ros/indigo/lib/librosbag.so, may conflict with libboost_regex.so.1.55.0
/usr/bin/ld: warning: libboost_program_options.so.1.54.0, needed by /opt/ros/indigo/lib/librospack.so, may conflict with libboost_program_options.so.1.55.0
[ 83%] Built target write
Makefile:138: recipe for target 'all' failed
make: *** [all] Error 2
Invoking "make -j4 -l4" failed

Originally posted by ArkadiuszN on ROS Answers with karma: 19 on 2017-03-27
Post score: 0

A:

It looks like you've resolved the error about pcl_ros with rosdep. The first log fails to configure the build, but once pcl_ros is installed since the second log shows that cmake has configured successfully and is now running the compiler.
The error message in the second log that stands out to me is c++: internal compiler error: Killed (program cc1plus) , which is usually a sign that the compiler has run out of memory while trying to build. From your home directory it looks like you're on a raspberry pi, and they're a pretty low-memory CPU, so that also points to running out of memory.
It looks like you're running four builds in parallel, which can eat up memory pretty quickly; the first thing you can try is to run a single build job with:
catkin_make -j1

If you still run out of memory, you may have to set up a swap file.

Originally posted by ahendrix with karma: 47576 on 2017-03-27
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ArkadiuszN on 2017-03-28:
Wow! You are right, thank you! :)

