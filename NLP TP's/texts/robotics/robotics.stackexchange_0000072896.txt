Q:

How do I create dynamic launch files?

I developed a node which represent an agent in an emergent system that implements a collision avoidance algorithm.
Problem is, I need to perform multiple simulations with N robots, I know I can pass N as arg to launch file, but I can't find a way to launch N nodes in the launch file.
At the moment the only solution I have is to edit the launch file.

Originally posted by inusO on ROS Answers with karma: 81 on 2016-03-18
Post score: 5

A:

You could use eval (as of Kinetic) to create a recursive launchfile:
<launch> 

   <!-- start node -->
   <arg name="nr" default="1"/> 
   <group ns="$(eval 'turtle' + str(arg('nr')))">
      <node name="turtle" pkg="turtlesim" type="turtlesim_node"/>
   </group>

   <!-- recursively start new node -->
   <include file="$(find your_package)/launch/this_launch_file.launch" if="$(eval arg('nr') - 1 > 0)">
       <arg name="nr" value="$(eval arg('nr') - 1)"/>
   </include>

</launch>

As of Lunar you could also use $(dirname) instead of $(find your_package)/launch.

Originally posted by MartinK with karma: 106 on 2018-04-26
This answer was ACCEPTED on the original site
Post score: 9

Original comments
Comment by raphael on 2018-10-20:
Does eval support the smaller than symbol, i.e. < ? I tried several time this code snippet, didn't work.
Comment by m.bahno on 2020-09-22:
For me, '>' does not work. However, I was able to use '>' with switched arguments, which is equivalent. Though I have no idea, why the first option doesn't work and throws Invalid XML syntax...
Comment by cgnarendiran on 2021-05-12:
I'm sorry, but I fail to understand how this is recursive? I tried this script by setting nr:=5 and it just launched the turtlesim node and my launch file once each.
Comment by harunresul on 2021-09-02:
hey cgnarendiran. are you sure you set the 'this_launch_file.launch' correctly? the name must be same as your desired launch file. For example, if you have an example.launch file and want to launch it 5 times, you should set the nr=5 as the default. Then you should re-launch your example.launch file in  part. Include the example.launch file in that part by writing it's package, path and name correctly. This should work.
Comment by Mehdi. on 2021-10-27:
This is very very smart!

