Q:

gmapping : Scan Matching Failed, using odometry‚Äè

Hi,
I'm using gmapping to create maps. But, it returns a lot of messages saying Scan Matching Failed, using odometry and the resulting map has several overlapped maps.
In rviz the laser values seem to be correct. When  I run the rostopic command to see the behavior of base_scan (laser) and odom (odometry) topics, it is possible to verify that the values are correctly published on ROS.
. I'm using these parameters in my code for the values on LaserScan:
scan.angle_min = -1.57;
scan.angle_max = 1.57;
scan.angle_increment = 3.14 / num_readings;
scan.time_increment = (1 / laser_frequency) / (num_readings);
scan.range_min = 0.0;
scan.range_max = 80.0;

Someone can help me ? Together with this message I attach the resulting .yaml file and the .bag file.
NOTE: Below is presented part of the resulting command line with the error:
 -maxUrange 79.99 -maxUrange 79.99 -sigma     0.05 -kernelSize 1 -lstep 0.05 -lobsGain 3 -astep 0.05
 -srr 0.1 -srt 0.2 -str 0.1 -stt 0.2
 -linearUpdate 1 -angularUpdate 0.5 -resampleThreshold 0.5
 -xmin -100 -xmax 100 -ymin -100 -ymax 100 -delta 0.05 -particles 30
[ INFO] [1321129265.860843005]: Initialization complete
update frame 0
update ld=0 ad=0
Laser Pose= 15 1 1.57733
m_count 0
Registering First Scan
update frame 246
update ld=1.00164 ad=0
Laser Pose= 13.9984 0.993456 1.57733
m_count 1
Scan Matching Failed, using odometry. Likelihood=3.10908e-305
lp:15 1 1.57733
op:13.9984 0.993456 1.57733
Scan Matching Failed, using odometry. Likelihood=-1200
lp:15 1 1.57733
op:13.9984 0.993456 1.57733

Thanks

Originally posted by rcampos on ROS Answers with karma: 31 on 2011-11-14
Post score: 3

Original comments
Comment by Brian Gerkey on 2011-11-15:
I don't see the bag file you're referring to.  Can you post it somewhere?

A:

The first thing that I would do is verify that accumulating laser data in the odometric frame produces a sensible result.  See this question for a simple technique using rviz.
If you can't build at least a crude "map" by just accumulating scans based on odometry over short distances, then something is wrong with your laser, or odometry, or both, and gmapping won't be able to help you.

Originally posted by Brian Gerkey with karma: 2916 on 2011-11-15
This answer was ACCEPTED on the original site
Post score: 4

