Q:

How to get pose from april tag topic tag_detection?

Hi,
Currently, I have a bag file which publishes the /tag_detections coming from apriltag node.
I'm having trouble in writing a callback function which could extract information like pose from the topic.
The details of the topic are:
rosmsg show apriltag_ros/AprilTagDetectionArray

std_msgs/Header header
  uint32 seq
  time stamp
  string frame_id
apriltag_ros/AprilTagDetection[] detections
  int32[] id
  float64[] size
  geometry_msgs/PoseWithCovarianceStamped pose
    std_msgs/Header header
      uint32 seq
      time stamp
      string frame_id
    geometry_msgs/PoseWithCovariance pose
      geometry_msgs/Pose pose
        geometry_msgs/Point position
          float64 x
          float64 y
          float64 z
        geometry_msgs/Quaternion orientation
          float64 x
          float64 y
          float64 z
          float64 w
      float64[36] covariance

The piece of code that I manage to write till now is:
#include "ros/ros.h"
#include "apriltag_ros/AprilTagDetectionArray.h"

void callback(const apriltag_ros::AprilTagDetectionArray::ConstPtr &msg)
{
    //What to do?
}

int main(int argc, char **argv)
{
    ros::init(argc, argv, "apriltag_location");
    ros::NodeHandle n;
    ros::Subscriber sub = n.subscribe("tag_detections",1000,callback);
    ros::spin();

}

Could someone point out on how to get the pose from here?

Originally posted by dj95 on ROS Answers with karma: 52 on 2020-02-14
Post score: 0

A:

The pose is the msg->detections[i].pose of type geometry_msgs/PoseWithCovariance for all N detections.

Originally posted by stevemacenski with karma: 8272 on 2020-02-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by dj95 on 2020-02-14:
Could you explain what 'i' here would be?
geometry_msgs::PoseWithCovariance x;
x = msg->detections[0].pose.pose;
ROS_INFO("[%f]",x.pose.position.x);

Writing like gives me a message 'Segmentation fault (core dumped)'
Comment by stevemacenski on 2020-02-14:
I think your issue here is not really understanding C++ rather than a ROS-specific issue. I'd recommend going through some C++ STL tutorials and  then coming back to revisit to this.
Comment by dj95 on 2020-02-14:
That is true, thanks for the input.
Comment by stevemacenski on 2020-02-14:
If I've answered your question, can you hit the checkmark so its removed from our unanswered questions queue?

