Q:

slam in gmapping auto turnaround

I make a experiment as follow.
1、the robot is static.
2、provide corridor laser information like this:

3、suppose the robot move following x-axis from (0, 0) as a speed 0.2m/s, and provide the odom data to simulate the process. In this case, the direction of the robot is always 0 degree.
However, the result is:

If the robot have enough time for running, the trajectory would be a circle. Unbelievable!

Originally posted by gong on ROS Answers with karma: 164 on 2011-07-05
Post score: 0

Original comments
Comment by gong on 2011-07-17:
ok
Comment by Eric Perko on 2011-07-14:
@gong: Please "answer" your question with some description of how you solved the problem (even if it's just as simple as "I was setting the laser data incorrectly" or something) so that an admin can come mark it as the correct answer. This will make it easier for others who find this in the future.
Comment by gong on 2011-07-14:
I have been fix the problem. The setting of laser data array have some problem. Thank you so much. You are really help me out.
Comment by gong on 2011-07-12:
You are right. Today during the testing I think the updating of laser data would have some problem. I should find out the problem.
Comment by dornhege on 2011-07-11:
I just want to stress again: Laser and Odometry data have to fit together, otherwise you are tuning the wrong thing. In a structured environment with correct laser and odo, gmapping should work OK out of the box.
Comment by gong on 2011-07-11:
I think you are right. Chris Tralie in here(http://www.princeton.edu/~ctralie/Projects/DukeDusty2/logbook.htm) also adjust the linear_updata and angular_update to acquire a better map. However, until now I can not get an acceptable map. So, test continue ... ...
Comment by dornhege on 2011-07-06:
The valid range seems to be only 2m, so there is very little overlap to match/correct anything. Maybe setting linear_update and angular_update quite low can do what you want (at the cost of computation).
Comment by gong on 2011-07-06:
The reason why I'm designed this experiment is to find out what cause the map have drift the robot error or parameter setting error, etc.
Comment by gong on 2011-07-06:
I want to simulate a process in which the robot move straight in a corridor. In this process, the scan data would always the same or can be consider the same though odom is changing.
Comment by dornhege on 2011-07-06:
gmapping is basically an algorithm that merges odometry and laser information into a map. You are now feeding laser from one source (static) and odometry from a different one (moving), thus any try to merge that can only be wrong - what would you expect as the map here, anyways?
Comment by gong on 2011-07-06:
yes, you are right.  But why it can not work?
Comment by dornhege on 2011-07-06:
In 3.: Did you provide odom that signals the robot moving at 0.2m/s and always the same static scan? That cannot work.
Comment by gong on 2011-07-06:
The robot is static, so the scan data is always the same. Does this would have problem? Why the overlap from consecutive scans would have problem?                                                 Raw data? Do you mean the scan data before Gmaping?
Comment by dornhege on 2011-07-05:
It looks as there is very little overlap from consecutive scans. Is this also like that in the raw data?

A:

When I was deploying the laser scan parameters(angle resolution and scan frequency), I found the size of laser data array is wrong. If the array setting more than actual size, there would be always have wrong data for Gmapping. Otherwise, there would be memory error.
Here also solve the problem in: http://answers.ros.org/question/1270/shift-in-the-map-of-gmapping?comment=3132#comment-3132
Relate problem: http://answers.ros.org/question/1269/the-tf-between-map-and-odom-is-not-static?answer=2184#2184
This is the result(the actual scene):

I would like to thank dornhege, Brian Gerkey, dlaz, mbj and Ivan Dryanovski for help in finding out the problem.

Originally posted by gong with karma: 164 on 2011-07-17
This answer was ACCEPTED on the original site
Post score: 0

