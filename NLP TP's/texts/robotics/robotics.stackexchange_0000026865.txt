Q:

Get mouse click location and event

I would like to put a callback on any mouse clicks in the World View. The callback requires the location of the mouse click.
Is this possible without modifying gazebo (system plugin?)? This question and answer is probably very similar to this question, although I am focused on mouse clicks, not key presses.
One idea I have is capturing clicks on a transparent GUIOverlay, but CEGUI is completely new to me so I'm not sure if this is viable. I'm also hoping there's a better solution I haven't been able to find yet.
Thanks

Originally posted by amptrofa on Gazebo Answers with karma: 41 on 2013-12-02
Post score: 3

A:

Here's an example I got working today. Follow the system plugin tutorial to compile/run it.
#include <gazebo/math/Rand.hh>
#include <gazebo/gui/GuiIface.hh>
#include <gazebo/rendering/rendering.hh>
#include <gazebo/gazebo.hh>
#include <gazebo/gui/MouseEventHandler.hh>
#include <gazebo/common/MouseEvent.hh>

namespace gazebo
{
  class SystemGUI : public SystemPlugin
  {

    // Destructor
    public: virtual ~SystemGUI()
    {
        gui::MouseEventHandler::Instance()->RemovePressFilter("glwidget");
    }

    // Called after the plugin has been constructed.
    public: void Load(int /*_argc*/, char ** /*_argv*/)
    {   
        gui::MouseEventHandler::Instance()->AddPressFilter("glwidget",
            boost::bind(&SystemGUI::OnMousePress, this, _1));
    }

    public: bool OnMousePress(const common::MouseEvent & /*_event*/)
    {
        std::cout << "Mouse press detected!\n";
        return true;
    }
  };

  // Register this plugin with the simulator
  GZ_REGISTER_SYSTEM_PLUGIN(SystemGUI)
}

Originally posted by jdddog with karma: 66 on 2014-11-27
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by maxieckert on 2016-01-25:
Is this also possible with a GUIPlugin?
Comment by nkoenig on 2016-01-25:
Should be. Give it a try, and let us know if you run into any problems.
Comment by chapulina on 2016-01-25:
It should actually work better with GUI plugins than with System plugins. See this question and this issue
Comment by vishnurs on 2017-03-31:
When I try to compile the code, I am getting the following error.
/usr/local/include/OGRE/Paging/OgrePagingPrerequisites.h:32:31: fatal error: OgrePrerequisites.h: No such file or directory
#include "OgrePrerequisites.h"
I have no clue if I have to install anything. Please, help.
Comment by chapulina on 2017-03-31:
Hi @vishnurs, could you start a new question describing the code you're trying to run, your Gazebo version and other relevant information? Thanks!
Comment by voila on 2022-06-17:
Your code works fine, thanks, but along with 'mouse press detected' , I want to print the coordinate value in the console, anyone have any idea how I can do this? TIA

