Q:

How to open several gazebos in a linux operating system?

I can use the gazebo command to start Gazebo in my Linux. However, when I open a new terminal and type in gazebo (for the second time), then nothing happens. How can I run several Gazebo instances at the same time in my Linux?

Originally posted by shin on Gazebo Answers with karma: 41 on 2017-04-17
Post score: 0

Original comments
Comment by shin on 2017-04-17:
I have create several gzserver with different localhosts, then I create corresponding gzclient. It is strange that all clients do same operation as if they had received same instructions, but I connect them to gzserver with different localhosts. What determines the server? How can I use different server to control different client ?

A:

To run various Gazebo instances, you must make sure each of them is using a different port. You can set this with the GAZEBO_MASTER_URI environment variable.
It's also convenient to run Gazebo in verbose mode so you can read error messages.
For example, on one terminal, start gzserver on the default port (11345):
gzserver --verbose
You'll see the port printed in green:
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
Then on a new terminal, open gzclient:
gzclient --verbose
You'll see the same port printed in green:
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
If you try to start another gzserver on a new terminal, without changing the URI, you'll get an error:
[Err] [Master.cc:96] EXCEPTION: Unable to start server[bind: Address already in use]. There is probably another Gazebo process running.
The correct way is to open a new terminal and start another instance with a new URI:
export GAZEBO_MASTER_URI=http://localhost:11346; gzserver --verbose
This time the URI is different:
[Msg] Connected to gazebo master @ http://127.0.0.1:11346
And then on a new terminal, the respective gzclient:
export GAZEBO_MASTER_URI=http://localhost:11346; gzclient --verbose
And you should also see the same URI:
[Msg] Connected to gazebo master @ http://127.0.0.1:11346

Originally posted by chapulina with karma: 7504 on 2017-04-17
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by shin on 2017-04-17:
By your instructions, I can really open multiple gazebo, however, when I use some control instructions, the models of all windows move in the same way. Can I just control only one window at one time and keep the states of other windows unchanged?
Comment by chapulina on 2017-04-17:
How are you sending instructions? You should be able to specify the URI to send them to and only that simulation will be affected. For example, if you use the gz command line tool, you should specify GAZEBO_MASTER_URI for the shell where you're running it.
Comment by shin on 2017-04-17:
I am playing a project, I guess the instructions have been packed. Can I specify URI when I open gzserver? If I do so, it will tell me no correct URl, and use old value, how can I solve it ?
Comment by chapulina on 2017-04-17:
I added more detailed instructions. Note that the URI must be set for each gzclient/gzserver you start.
Comment by shin on 2017-04-18:
This approach does work in some projects, but interesting things happen in project haptix, if I open two gazebo in this way, when I use keyboard to control the arms, two arms in different clients will act in same way. However, if I use the C API of this project to control, I can only control the one who was opened earier, even if I use the hx_connection to set host and port, it seems useless, I guess this may be related to the principle of gzserver, could you give me some ideas?
Comment by amit1989 on 2018-10-17:
@chapulina as described above, I am able to run multiple gazebo instant and get data from it by putting export GAZEBO_MASTER_URI=http://localhost:11345
I am using C++ standalone plugin.
So how to do it programmatically? What should I add in my program to do this automatically?
Comment by chapulina on 2018-10-17:
@amit1989, this sounds good for a new question

