Q:

How to solve 'Failed to load r_cart'?

I followed Teleop PR2 arm in simulation.
I run:
  roslaunch pr2_gazebo pr2_empty_world.launch

And jtteleop launch file:
  sam@sam:~/code/ros/test$ roslaunch jtteleop.launch 
  ... logging to /home/sam/.ros/log/cab3d0b6-c687-11e1-bd65-20cf30a23845/roslaunch-sam-26533.log
  Checking log directory for disk usage. This may take awhile.
  Press Ctrl-C to interrupt
  Done checking log file disk usage. Usage is <1GB.
  
  started roslaunch server http://sam:57702/
  
  SUMMARY
  ========
  
  PARAMETERS
   * /r_cart/joint_max_effort/r_forearm_roll_joint
   * /r_cart/pose_command_filter
   * /r_cart/joint_max_effort/r_shoulder_pan_joint
   * /r_cart/joint_feedforward/r_shoulder_lift_joint
   * /r_cart/joint_feedforward/r_elbow_flex_joint
   * /r_cart/joint_max_effort/r_wrist_flex_joint
   * /r_cart/joint_max_effort/r_upper_arm_roll_joint
   * /r_cart/joint_feedforward/r_shoulder_pan_joint
   * /rosdistro
   * /r_cart/vel_saturation_trans
   * /r_cart/joint_feedforward/r_wrist_roll_joint
   * /r_cart/cart_gains/trans/d
   * /rosversion
   * /r_cart/joint_max_effort/r_shoulder_lift_joint
   * /r_cart/cart_gains/trans/p
   * /r_cart/type
   * /r_cart/tip_name
   * /r_cart/vel_saturation_rot
   * /r_cart/joint_feedforward/r_forearm_roll_joint
   * /r_cart/cart_gains/rot/p
   * /r_cart/root_name
   * /r_cart/jacobian_inverse_damping
   * /r_cart/joint_max_effort/r_elbow_flex_joint
   * /r_cart/k_posture
   * /r_cart/cart_gains/rot/d
   * /r_cart/joint_max_effort/r_wrist_roll_joint
   * /r_cart/joint_feedforward/r_upper_arm_roll_joint
   * /r_cart/joint_feedforward/r_wrist_flex_joint
  
  NODES
    /
      stop_r_arm (pr2_controller_manager/pr2_controller_manager)
      spawn_cart (pr2_controller_manager/spawner)
  
  ROS_MASTER_URI=http://localhost:11311
  
  core service [/rosout] found
  process[stop_r_arm-1]: started with pid [26551]
  process[spawn_cart-2]: started with pid [26552]
  [stop_r_arm-1] process has finished cleanly.
  log file: /home/sam/.ros/log/cab3d0b6-c687-11e1-bd65-20cf30a23845/stop_r_arm-1*.log
  [ERROR] [WallTime: 1341482270.896231] [32.088000] Failed to load r_cart
                                                        

How to solve it?
Thank you~

I followed the answer.
I try this launch:
  <launch> 
  
  <node name="stop_r_arm" pkg="pr2_controller_manager" type="pr2_controller_manager" args="stop r_arm_controller"/>
  
  <rosparam ns="r_cart"> 
  type: robot_mechanism_controllers/JTTCartesianController 
  root_name: torso_lift_link 
  tip_name: r_gripper_tool_frame 
  k_posture: 25.0 
  jacobian_inverse_damping: 0.01 
  pose_command_filter: 0.01 
  cart_gains: 
  trans: 
  p: 800.0 
  d: 15.0 
  rot: 
  p: 80.0 
  d: 1.2 
  joint_feedforward: 
  r_shoulder_pan_joint: 3.33 
  r_shoulder_lift_joint: 1.16 
  r_upper_arm_roll_joint: 0.1 
  r_elbow_flex_joint: 0.25 
  r_forearm_roll_joint: 0.133 
  r_wrist_flex_joint: 0.0727 
  r_wrist_roll_joint: 0.0727 
  joint_max_effort: 
  r_shoulder_pan_joint: 11.88 
  r_shoulder_lift_joint: 11.64 
  r_upper_arm_roll_joint: 6.143 
  r_elbow_flex_joint: 6.804 
  r_forearm_roll_joint: 8.376 
  r_wrist_flex_joint: 5.568 
  r_wrist_roll_joint: 5.568
  
  vel_saturation_trans: 2.0 
  vel_saturation_rot: 4.0 
  </rosparam> 
  
  <node name="spawn_cart" pkg="pr2_controller_manager" type="spawner" args="r_cart"/> 
  </launch>                                                                  

And I got this error:
  sam@sam:~/code/ros/test$ roslaunch t3.launch 
  ... logging to /home/sam/.ros/log/a8d96ed0-d495-11e1-a466-20cf30a23845/roslaunch-sam-12098.log
  Checking log directory for disk usage. This may take awhile.
  Press Ctrl-C to interrupt
  Done checking log file disk usage. Usage is <1GB.
  
  started roslaunch server http://sam:32831/
  
  SUMMARY
  ========
  
  PARAMETERS
   * /r_cart/r_upper_arm_roll_joint
   * /r_cart/pose_command_filter
   * /r_cart/joint_max_effort
   * /r_cart/cart_gains
   * /r_cart/r_wrist_roll_joint
   * /r_cart/joint_feedforward
   * /r_cart/r_elbow_flex_joint
   * /r_cart/k_posture
   * /r_cart/p
   * /r_cart/trans
   * /rosdistro
   * /r_cart/vel_saturation_trans
   * /r_cart/r_wrist_flex_joint
   * /r_cart/rot
   * /rosversion
   * /r_cart/root_name
   * /r_cart/d
   * /r_cart/type
   * /r_cart/tip_name
   * /r_cart/vel_saturation_rot
   * /r_cart/r_forearm_roll_joint
   * /r_cart/jacobian_inverse_damping
   * /r_cart/r_shoulder_lift_joint
   * /r_cart/r_shoulder_pan_joint
  
  NODES
    /
      stop_r_arm (pr2_controller_manager/pr2_controller_manager)
      spawn_cart (pr2_controller_manager/spawner)
  
  ROS_MASTER_URI=http://localhost:11311
  
  core service [/rosout] found
  load_parameters: unable to set parameters (last param was [/r_cart/r_shoulder_pan_joint=11.88]): cannot marshal None unless allow_none is enabled
  Traceback (most recent call last):
    File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/__init__.py", line 252, in main
      p.start()
    File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/parent.py", line 265, in start
      self.runner.launch()
    File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/launch.py", line 644, in launch
      self._setup()
    File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/launch.py", line 631, in _setup
      self._load_parameters()
    File "/opt/ros/electric/stacks/ros_comm/tools/roslaunch/src/roslaunch/launch.py", line 322, in _load_parameters
      r  = param_server_multi()
    File "/usr/lib/python2.6/xmlrpclib.py", line 1042, in __call__
      return MultiCallIterator(self.__server.system.multicall(marshalled_list))
    File "/usr/lib/python2.6/xmlrpclib.py", line 1199, in __call__
      return self.__send(self.__name, args)
    File "/usr/lib/python2.6/xmlrpclib.py", line 1483, in __request
      allow_none=self.__allow_none)
    File "/usr/lib/python2.6/xmlrpclib.py", line 1132, in dumps
      data = m.dumps(params)
    File "/usr/lib/python2.6/xmlrpclib.py", line 677, in dumps
      dump(v, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 699, in __dump
      f(self, value, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 759, in dump_array
      dump(v, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 699, in __dump
      f(self, value, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 780, in dump_struct
      dump(v, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 699, in __dump
      f(self, value, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 759, in dump_array
      dump(v, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 699, in __dump
      f(self, value, write)
    File "/usr/lib/python2.6/xmlrpclib.py", line 703, in dump_nil
      raise TypeError, "cannot marshal None unless allow_none is enabled"
  TypeError: cannot marshal None unless allow_none is enabled
  sam@sam:~/code/ros/test$                                                                   

How to solve it?
Thank you~

Originally posted by sam on ROS Answers with karma: 2570 on 2012-07-05
Post score: 0

Original comments
Comment by Sarah Osentoski on 2012-07-16:
Can you provide a little bit more information?  What does jtteleop.launch look like?  Or at least, which package is the launch file from?
Comment by sam on 2012-07-17:
I totally follow that page. That jtteleop.launch is in Cartesian Controller section of the doc.

A:

Ah I missed the first link.  In electric the jttelop controller was moved.  Use this launch file instead:
(Note that you need to have the pr2_controllers stack installed.)

 
 
   type: robot_mechanism_controllers/JTTCartesianController
   root_name: torso_lift_link
   tip_name: r_gripper_tool_frame
   k_posture: 25.0
   jacobian_inverse_damping: 0.01
   pose_command_filter: 0.01
   cart_gains:
     trans:
       p: 800.0
       d: 15.0
     rot:
       p: 80.0
       d: 1.2
   joint_feedforward:
     r_shoulder_pan_joint: 3.33
     r_shoulder_lift_joint: 1.16
     r_upper_arm_roll_joint: 0.1
     r_elbow_flex_joint: 0.25
     r_forearm_roll_joint: 0.133
     r_wrist_flex_joint: 0.0727
     r_wrist_roll_joint: 0.0727
   joint_max_effort:
     r_shoulder_pan_joint: 11.88
     r_shoulder_lift_joint: 11.64
     r_upper_arm_roll_joint: 6.143
     r_elbow_flex_joint: 6.804
     r_forearm_roll_joint: 8.376
     r_wrist_flex_joint: 5.568
     r_wrist_roll_joint: 5.568
vel_saturation_trans: 2.0
vel_saturation_rot: 4.0

Originally posted by Sarah Osentoski with karma: 136 on 2012-07-17
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by sam on 2012-07-22:
I followed your answer and edit my original post to show the error.
Comment by Sarah Osentoski on 2012-07-30:
Hmm.  Let me see if I had a typo in my first answer.  I've not seen that error before.

