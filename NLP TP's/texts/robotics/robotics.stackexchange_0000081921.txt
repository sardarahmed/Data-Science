Q:

Raspberry pi and Teleop

Hi all,
I have been searching for days now to get any keyboard-teleop node to run on my kinetic-jessie-pi system.
None of the apt-get packages are ever found (another forum question says its not possible to install ROS packages using apt-get if i had not installed ros with it in the first place).
I tried installing from source following this link , replacing indigo with kinetic. it downloads the source but trying to install only gives:
ERROR: the following packages/stacks could not have their rosdep keys resolved to system dependencies:
rocon_apps: No definition of [rospy_tutorials] for OS version []
and more similar lines for every package. I also tried to clone the git of "teleop_twist_keyboard", put it in my ws, ran catkin_make, sourced setup.bash and ros refuses to find it. When using rosrun from inside the folder, I get a long list of errors.
Tried to create my own node using python, the only viable keyboard listener I could find is from keyboard 0.9.13 which requires sudo privileges, while adding the "sudo" prefix in a launch file results in that the root user cannot find the ros environment variables. Trying to export them through the python script or call an external bash script from within python did not work.
I just want to move my Rpi robot using a wireless keyboard. Does anyone have any idea how to run any keyboard teleop node on a raspberry pi 3?
Many thanks, Steve

Originally posted by StevenCoral on ROS Answers with karma: 167 on 2017-07-22
Post score: 1

A:

Hello Steve,
In my raspberry pi 3 I have followed this guide:http://wiki.ros.org/ROSberryPi/Installing%20ROS%20Kinetic%20on%20the%20Raspberry%20Pi to install ROS-comm version in Raspbian Jessie.
This version includes only the bare essentials, so many times when I wanted for instanse other packages like URDF or msg, I followed the procedure explained at the bottom of this page.
So for instance, in your case I imagine that something like that will work:
$ cd ~/ros_catkin_ws

$ rosinstall_generator teleop_twist_keyboard --rosdistro kinetic --deps --wet-only --tar > kinetic-custom_ros.rosinstall

$ wstool merge -t src kinetic-custom_ros.rosinstall

$ wstool update -t src

$ rosdep install --from-paths src --ignore-src --rosdistro kinetic -y -r --os=debian:jessie

$ sudo ./src/catkin/bin/catkin_make_isolated --install -DCMAKE_BUILD_TYPE=Release --install-space /opt/ros/kinetic -j1

Yes, I usually use -j1 because in -j4 the rPi3 freezes and I have to reboot.
Hope that will help you.

Originally posted by angelos.p with karma: 148 on 2017-07-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by StevenCoral on 2017-07-23:
Thank you very much, I missed that part. Your code is correct with an addition of space between the word "generator" and "teleop". I made the mistake of trying to install the entire turtlebot + turtlebot_apps + rviz, building took forever, and got stuck at some point with every -j except -j1.
Comment by angelos.p on 2017-07-23:
Well done Steve, I'm happy that it worked. Enjoy coding!

