Q:

How to un-break a ROS installation that doesn't know where to find any stacks/packages?

I installed ROS Fuerte by following the online tutorial for Gentoo and running:
rosinstall ~/ros "http://packages.ros.org/cgi-bin/gen_rosinstall.py?rosdistro=fuerte&variant=desktop-full&overlay=no"

This installed ROS into /opt/ros/fuerte and my stacks into ~/ros. Later, I wanted to install another stack from source so I asked this question. Following everything after "Now add the repository you want to check out" didn't work so I decided to re-init my workspace by running
rosws init ~/ros /opt/ros/fuerte

And then add the respository.
This worked - now ROS knows about the brown_remotelab stack I was adding - except now it's forgotten about all my other stacks. I've tried re-adding them manually by following the same instructions I followed for brown_remotelab. This doesn't work because the other stacks don't seem to be a kept in a subversion repository. For example, trying to reinstall the image_transport_plugins stack by running:
roscd
rosws set image_transport_plugins https://code.ros.org/trac/ros-pkg/browser/trunk/stacks/image_transport_plugins --svn
rosws update image_transport_plugins

Generates the error:
Failed to detect svn presence at /root/ros/image_transport_plugins. (d)elete and replace, (a)bort, (b)ackup and replace, (s)kip:

And choosing (d)elete and replace doesn't work because svn co https://code.ros.org/trac/ros-pkg/browser/trunk/stacks/image_transport_plugins fails.
So how do I re-add the rest of my stacks manually or otherwise tell ROS that they are there and that it should be able to see them?

Originally posted by Shum on ROS Answers with karma: 1 on 2012-06-19
Post score: 0

Original comments
Comment by SL Remy on 2012-06-19:
What does your ROS_PACKAGE_PATH currently contain?
Comment by Shum on 2012-06-19:
/root/ros/brown_remotelab:/opt/ros/fuerte/stacks:/opt/ros/fuerte/share:/opt/ros/fuerte/share/ros. Which is obviously wrong but it gets set by setup.sh

A:

As you already noticed, your repository URL is wrong. Use:
rosws set image_transport_plugins https://code.ros.org/svn/ros-pkg/stacks/image_transport_plugins/trunk --svn
rosws update image_transport_plugins

The URLs for stacks that are tracked by the ROS wiki indexer can be easily found by using roslocate. E.g.:
roslocate info image_transport_plugins

This will output a rosinstall file. For quickly adding it to your ros workspace you can do:
roslocate info image_transport_plugins >> ~/ros/.rosinstall
rosws update image_transport_plugins

Finally, either re-source ~/ros/setup.bash or open a new terminal.

Originally posted by Lorenz with karma: 22731 on 2012-06-19
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by joq on 2012-06-20:
We need a wiki page explaining how to set up source workspaces after installing ROS from binary Ubuntu packages. That seems to confuse many people.
Comment by Lorenz on 2012-06-20:
Actually, I think this should become part of the install tutorial. I never really understood why it didn't even mention rosinstall/rosws.
Comment by joq on 2012-06-20:
Agreed. What I have in mind is a relatively generic "how to create source overlays" page with links at the end of various install pages for "if you need to build source packages that work with what you just installed". Most people need that, but not everyone.
Comment by tfoote on 2012-06-21:
Ticketed it here: https://code.ros.org/trac/ros/ticket/3993 @joq @Lorenz It's assigned to me but feel free to take it on.

