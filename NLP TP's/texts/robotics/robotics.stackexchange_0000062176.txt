Q:

Question concerning the movement of a 6DOF + frames

Right now I m writing a small urdf file to simulate the behaviour of a small RC helicopter (or UAV) in Rviz.
The flying robot is going to read datas from an IMU and should move in Rviz accordingly to the received angles like in the following picture:

Now...I found a problem writing my code because as stated here is the definition of a "floating" joint deprecated and no more usable.
My idea was to define a frame fixed with the robot and a "floating" frame which rotate about all 3 axis (see euler angles as a visual description of my idea):

How can I solve this problem? Defining 3 different frames doesn 't help since the rotation order is very important as you can see during a transformation about one axis then the other and the last one:

I this case I get different orientations depending on the sequence of the rotations. Shortly: 3 frames with a common center is definitely not the way to go...
EDIT: (Thanks foote): another idea could be to think the flying robot as a flying "point". It moves on a reference map. But in this case I face a big problem regarding that from this point of view is not possibile to give the flying point an orientation about one axis (let say yaw), just the absolute localization of the object in the space. Or how about roll? I can describe the movement in reference of a static object in Rviz but not the different position around one axis.
So I would be really happy if you could me some hints and example to realize a small flying object. Perhaps it is only a different way to think or a different perspective of the problem. Anyway any help is much appreciated! :)
Thanks and regards

Originally posted by Andromeda on ROS Answers with karma: 893 on 2014-08-27
Post score: 0

A:

The expected solution for a urdf of a flying robot is that the urdf will contain the robot, and the connection to the world will be done through a localization node which publishes the position of the robot in free space. Usually in relationship to a map, and the URDF does not encompass the total movements of the robot.
Update:
The position of the robot in free space is usually captured by the tf coordinate frame. And it can represent a full freespace position and orientation.

Originally posted by tfoote with karma: 58457 on 2014-08-27
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Andromeda on 2014-08-28:
Many thanks for your answer. To be honest it is not clear to me what do you mean with "localization node". Could you please tell me a link or something like that to point me in the right direction? I already tried to search but didn t find anything useful. Regards
Comment by Andromeda on 2014-08-28:
Another question: I was thinking again and maybe I m wrong, but from your explanation seems to me that I can set up in my URDF just one frame (to define the base body of my copter or just to load a .stl file) and then I use only tf to drive the flying robot. Am I right? Thanks in advance

