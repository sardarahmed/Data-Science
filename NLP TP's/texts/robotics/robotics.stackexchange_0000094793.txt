Q:

How to generate a point cloud map?

Hello all,
I am trying to generate a 3D point cloud map of a small route in my university. May I please know how can this be achieved? What lidar sensor is needed and how do I convert the lidar data into a 3D point cloud map to use it with the Autoware?
Please advise! Thank you.

Originally posted by omkard on ROS Answers with karma: 64 on 2020-02-18
Post score: 0

A:

Autoware has a ndt_mapping node.
You can use it in computing tab in runtime manager!

Originally posted by Masaya Kataoka with karma: 111 on 2020-02-18
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by omkard on 2020-02-19:
Hi @Masaya Kataoka,
I am doing this to collect the point cloud map before going for a field test from here:
Build a pointcloud map
Autoware provides a 3D mapping module based on simultaneous localization and mapping (SLAM). It builds a local-coordinate pointcloud map while manually driving the vehicle. You should be careful about a loop closure constraint. If you drive too far from the origin, the resulting pointcloud map might be misaligned with the real geographical features, unless you use the Graph SLAM method. That is, the pointcloud map built by Autoware alone should not be large-scale.
Do I do the above mentioned using the ndt_mapping node in Autoware?
Thanks!
Comment by omkard on 2020-03-03:
This one worked for me.
Comment by pedroexe on 2020-04-07:
@omkard, did you remind the steps to execute ndt_mapping? I created one from a rosbag file, but when I load the created map to reexecute the rosbag, the car and the map are too far away. Did you have this issue? Thank you.
Comment by omkard on 2020-04-07:
@pedroexe Here is how created the point cloud map from the recorded rosbag (The rosbag contained the recorded velodyne lidar data).

First open the simulation tab in ARM and load your .bag file. Wait for the .bag file to load. Hit play and pause immediately after that.

Now go to setup tab and load TF and Vehicle Model (click on those buttons until they turn blue).

Go to computing tab and select ndt_map.

Go back to simulation and hit pause now. You should see the ndt_computing in the terminal.

Wait for all the points to be processed. You could see something like this with Processed/Input.
Sequence number: 7376
Number of scan points: 22288 points.

Once you see that all the points are processed, go back to computing tab and click on  [app] beside ndt_map.

Select your .pcd output file location and click on 'PCD OUTPUT' button.

Wait for a while until .pcd file is ready.

Please let me know if you have any questions!

