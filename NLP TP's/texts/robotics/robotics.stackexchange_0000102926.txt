Q:

Incorrect Yaw from imu_filter_magwick at ENU and NED

Hello all,
Currently, I am using a PhidgetSpatial 3/3/3 1042. However, I encounter strange yaw output when passing the reading of my IMU to imu_filter_magwick.
1
When I set "world_frame" to "ned", my yaw value (after subscribe to /imu/rpy/filtered) gives 0 degree when facing east and
-90 degree when facing north.  On the other hand, If I select "enu", my yaw value is 0 when facing north, and -90 when facing east.
Originally, base on my reading from https://answers.ros.org/question/364998/should-imu-frame-follow-the-red-east-green-north-and-blue-up-convention/  I was expecting in 'ENU', yaw = 0 when face east, and yaw=-90 when face north. And in "NED" mode, yaw =0 when face north and yaw=90 when face east
2
Aside from the weird 90 degree offset. Something I find also strange.
In "NED" mode,my  yaw = 0 +/- 5 degree when face east. However, my yaw = -75 degree when facing North.
On the other hand, yaw = 180 degree when face west, yaw = 75 when face south.
Thus, my question is why is the yaw offset rather huge when face south and north.
Atempt

Tried to calibrate IMU with the company's firmware.

Config file
imu_filter:
  ros__parameters:
    stateless: false
    use_mag: true
    publish_tf: true # pueublish /odom to imu_link
    reverse_tf: false
    fixed_frame: "odom"
    constant_dt: 0.0
    publish_debug_topics: false
    world_frame: "ned"
    gain: 0.1
    zeta: 0.0
    mag_bias_x: 0.0
    mag_bias_y: 0.0
    mag_bias_z: 0.0
    orientation_stddev: 0.1
    publish_debug_topics: true

Originally posted by sdu568 on ROS Answers with karma: 45 on 2023-01-16
Post score: 0

A:

So I realized what I wrong.
The X-axis for the imu is pointing to the left side, not pointing forward.
Is a very naive mistake of mine.

Originally posted by sdu568 with karma: 45 on 2023-01-29
This answer was ACCEPTED on the original site
Post score: 0

