Q:

Cannot control joint from pygazebo

So I am trying to control a joint from the following world file: exported.world
While I can move the joint with the following command via terminal

gz joint -m 'default_body' -j hingejoint0 -f 10000

I cannot move the same joint with the following python script using PyGazebo:
import trollius
from trollius import From

import pygazebo
import pygazebo.msg.joint_cmd_pb2

@trollius.coroutine
def publish_loop():
    manager = yield From(pygazebo.connect())

    publisher = yield From(
        manager.advertise('/gazebo/default/model/joint_cmd',
                          'gazebo.msgs.JointCmd'))

    message = pygazebo.msg.joint_cmd_pb2.JointCmd()
    message.name = 'default_bot::hingejoint0'
    #message.axis = 0
    message.force = 10000

    while True:
        yield From(publisher.publish(message))
        yield From(trollius.sleep(1.0))

loop = trollius.get_event_loop()
loop.run_until_complete(publish_loop())

What am I doing wrong? Am I sending the command to the wrong endpoint? is my message improperly formatted?
I am using Gazebo 4.1.0 on Ubuntu with the Simbody physics engine.

Originally posted by Skylion on Gazebo Answers with karma: 5 on 2015-07-02
Post score: 0

A:

I believe you are advertising on the wrong topic. Try:
manager.advertise('/gazebo/world/default_body/joint_cmd', 'gazebo.msgs.JointCmd'))

The topic name is /gazebo/WORLD_NAME/MODEL_NAME/join_cmd. In your case WORLD_NAME="world", and MODEL_NAME="default_body", based on your SDF file.

Originally posted by nkoenig with karma: 7676 on 2015-07-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Skylion on 2015-07-02:
Thank you, I just submitted a pull request to the repo to update their example code for those unfamiliar with how topics are generated.

