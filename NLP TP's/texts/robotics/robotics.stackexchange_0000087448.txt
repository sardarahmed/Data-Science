Q:

Ubuntu18 and ROS melodic catkin error: ImportError: No module named terminal_color

I exactly followed the instructions from http://wiki.ros.org/melodic/Installation/Ubuntu.
Then I created a workspace by
cd
mkdior -p catkin_ws/src
cd catkin_ws/src
catkin_init_workspace
cd ..
catkin_make

The I got
Traceback (most recent call last):
  File "/opt/ros/melodic/bin/catkin_make", line 13, in <module>
    from catkin.terminal_color import disable_ANSI_colors, fmt
  File "/opt/ros/melodic/lib/python2.7/dist-packages/catkin/terminal_color.py", line 2, in <module>
    from catkin_pkg.terminal_color import *  # noqa
ImportError: No module named terminal_color

I googled and tried everything I could(except for reinstalling my OS). But the problem is still there.
For example, to give more info:
Run
sudo dpkg -L python-catkin-pkg

and got
/.
/usr
/usr/share
/usr/share/doc
/usr/share/doc/python-catkin-pkg
/usr/share/doc/python-catkin-pkg/changelog.Debian.gz
/usr/bin
/usr/bin/catkin_generate_changelog
/usr/bin/catkin_prepare_release
/usr/bin/catkin_tag_changelog
/usr/bin/catkin_create_pkg
/usr/bin/catkin_test_changelog
/usr/bin/catkin_package_version
/usr/bin/catkin_find_pkg
/usr/lib
/usr/lib/python2.7
/usr/lib/python2.7/dist-packages
/usr/lib/python2.7/dist-packages/catkin_pkg-0.4.3.egg-info
/usr/lib/python2.7/dist-packages/catkin_pkg-0.4.3.egg-info/top_level.txt
/usr/lib/python2.7/dist-packages/catkin_pkg-0.4.3.egg-info/dependency_links.txt
/usr/lib/python2.7/dist-packages/catkin_pkg-0.4.3.egg-info/requires.txt
/usr/lib/python2.7/dist-packages/catkin_pkg-0.4.3.egg-info/SOURCES.txt
/usr/lib/python2.7/dist-packages/catkin_pkg-0.4.3.egg-info/entry_points.txt
/usr/lib/python2.7/dist-packages/catkin_pkg-0.4.3.egg-info/PKG-INFO

And
python -c 'import catkin_pkg; print(catkin_pkg.__file__)'

got
/usr/lib/python2.7/dist-packages/catkin_pkg/__init__.pyc

And
printenv | grep ROS
ROS_ETC_DIR=/opt/ros/melodic/etc/ros
ROS_ROOT=/opt/ros/melodic/share/ros
ROS_MASTER_URI=http://localhost:11311
ROS_VERSION=1
ROS_PYTHON_VERSION=2
ROS_PACKAGE_PATH=/opt/ros/melodic/share
ROSLISP_PACKAGE_DIRECTORIES=
ROS_DISTRO=melodic

Any suggestion? Thanks in advance!
Edit:
dpkg -L python-catkin-pkg-modules
/.
/usr
/usr/share
/usr/share/doc
/usr/share/doc/python-catkin-pkg-modules
/usr/share/doc/python-catkin-pkg-modules/changelog.Debian.gz
/usr/lib
/usr/lib/python2.7
/usr/lib/python2.7/dist-packages
/usr/lib/python2.7/dist-packages/catkin_pkg
/usr/lib/python2.7/dist-packages/catkin_pkg/metapackage.py
/usr/lib/python2.7/dist-packages/catkin_pkg/__init__.py
/usr/lib/python2.7/dist-packages/catkin_pkg/group_membership.py
/usr/lib/python2.7/dist-packages/catkin_pkg/changelog_generator.py
/usr/lib/python2.7/dist-packages/catkin_pkg/tool_detection.py
/usr/lib/python2.7/dist-packages/catkin_pkg/topological_order.py
/usr/lib/python2.7/dist-packages/catkin_pkg/packages.py
/usr/lib/python2.7/dist-packages/catkin_pkg/package.py
/usr/lib/python2.7/dist-packages/catkin_pkg/cmake.py
/usr/lib/python2.7/dist-packages/catkin_pkg/package_templates.py
/usr/lib/python2.7/dist-packages/catkin_pkg/package_version.py
/usr/lib/python2.7/dist-packages/catkin_pkg/python_setup.py
/usr/lib/python2.7/dist-packages/catkin_pkg/changelog.py
/usr/lib/python2.7/dist-packages/catkin_pkg/group_dependency.py
/usr/lib/python2.7/dist-packages/catkin_pkg/workspaces.py
/usr/lib/python2.7/dist-packages/catkin_pkg/templates
/usr/lib/python2.7/dist-packages/catkin_pkg/templates/CMakeLists.txt.in
/usr/lib/python2.7/dist-packages/catkin_pkg/templates/metapackage.cmake.in
/usr/lib/python2.7/dist-packages/catkin_pkg/templates/package.xml.in
/usr/lib/python2.7/dist-packages/catkin_pkg/changelog_generator_vcs.py
/usr/lib/python2.7/dist-packages/catkin_pkg/rospack.py
/usr/lib/python2.7/dist-packages/catkin_pkg/condition.py
/usr/lib/python2.7/dist-packages/catkin_pkg/cli
/usr/lib/python2.7/dist-packages/catkin_pkg/cli/__init__.py
/usr/lib/python2.7/dist-packages/catkin_pkg/cli/generate_changelog.py
/usr/lib/python2.7/dist-packages/catkin_pkg/cli/find_pkg.py
/usr/lib/python2.7/dist-packages/catkin_pkg/cli/create_pkg.py
/usr/lib/python2.7/dist-packages/catkin_pkg/cli/test_changelog.py
/usr/lib/python2.7/dist-packages/catkin_pkg/cli/tag_changelog.py
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.1.egg-info
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.1.egg-info/top_level.txt
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.1.egg-info/dependency_links.txt
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.1.egg-info/requires.txt
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.1.egg-info/PKG-INFO

Originally posted by Jaxxl on ROS Answers with karma: 83 on 2018-06-20
Post score: 2

A:

The Python module in question has recently been moved from catkin into catkin_pkg. It is actually in the Debian python-catkin-pkg-modules. Can you please post the output of dpkg -L python-catkin-pkg-modules. Maybe you haven't update that package to the same version as python-catkin-pkg?
Edit:
Make sure both packages are up-to-date: sudo apt update && sudo apt install --reinstall python-catkin-pkg python-catkin-pkg-modules

Originally posted by Dirk Thomas with karma: 16276 on 2018-06-20
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by Jaxxl on 2018-06-21:
Thanks for your answer! The version indeed does not match. I fixed the problem by upgrading python-catkin-pkg-modules with sudo pip install --upgrade catkin_pkg_modules.
Comment by Dirk Thomas on 2018-08-08:
We highly discourage users to install these packages through pip. The problem is that even if you install future versions of the Debian package the pip installed version will be used and likely leading to problem.
Comment by inspire on 2018-08-27:
"sudo apt update && sudo apt install python-catkin-pkg python-catkin-pkg-modules" says that everything is up to date with ROS kinetic but the problem persists.
Comment by inspire on 2018-08-27:
okay I found a workaround: https://answers.ros.org/question/301702/ros-kinetic-importerror-no-module-named-terminal_color/?answer=301712#post-id-301712
Comment by cwbullivant on 2019-04-04:
I am having the same problem as this user was, but when I try to run the command you recommend, I get a result saying:
sudo: python-catkin-pkg: command not found
Have any other names been changed since last June?
Comment by Dirk Thomas on 2019-04-04:
The right command is: sudo apt install --reinstall python-catkin-pkg python-catkin-pkg-modules
Comment by cwbullivant on 2019-04-11:
I've run that command and the packages were reinstalled. However, the error persists.
I ran dpkg -L python-catkin-pkg-modules after reinstalling and got mostly the same output as the above user (with these added lines at the bottom):
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.11.egg-info
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.11.egg-info/PKG-INFO
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.11.egg-info/dependency_links.txt
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.11.egg-info/requires.txt
/usr/lib/python2.7/dist-packages/catkin_pkg_modules-0.4.11.egg-info/top_level.txt

Even more strangely, typing "from catkin_pkg.terminal_color import *" into the interpreter from the command line works just fine. It's only when this line is invoked from catkin_make that it fails.
Comment by liqsuq on 2019-07-16:
I have run above command, but python-catkin-pkg-modules was not found.
And python-catkin-pkg had no dependencies.
However, the error is occurring.  Any ideas?
$ uname -v
#26~18.04.1-Ubuntu SMP Thu Jun 27 07:28:31 UTC 2019
$ sudo apt install python-catkin-pkg-modules
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package python-catkin-pkg-modules
$ apt list | grep python-catkin-pkg

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

python-catkin-pkg/bionic,bionic,now 0.3.9-1 all [installed]

