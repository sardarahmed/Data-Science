Q:

How to set velocity of Carrot local planner?

Hi. I am using carrot planner. I want to know, how we can set the velocity in the carrot planner? I donâ€™t see any velocity param in carrot planner. At which velocity robot will drive towards the goal?

Originally posted by elemecrobots on ROS Answers with karma: 15 on 2020-11-27
Post score: 0

A:

TLDR: In any nav stack there is a global and local planner, the local planner is the one where you specify velocity limits.
In the documentation it says:

The carrot_planner::CarrotPlanner is a simple global planner...

Global planners are responsible for finding a connected path of cells through a costmap, NOT actually producing the command velocities that are required to execute the plan. The local planner is responsible for generating the command velocities and you will see a v_min/v_max parameter there.
Disclaimer: There are some high order global planners that do take into account kinematic/dynamic constraints at plan time but they aren't relevant to this question.
Also: See the answer to this question or any number of others to learn more clearly the distinction between global and local planning.
Cheers

Originally posted by JackB with karma: 977 on 2020-11-28
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by elemecrobots on 2020-11-28:
Thanks for a detailed response. Can we somehow don't use local planner and use carrot planner as global planner only? In this case, where we will set velocities? The reason to use carrot planner is, I don't want to use local planner such teb_local or dwa etc. I want carrot planner behavior as local planner as well
Comment by JackB on 2020-11-28:
Eh well I don't think think it works like that directly. If you look at the documentation of the base_local_planner you see they describe the general algorithm behind Trajectory Rollout and DWA. One of the steps in it is,
"3. Evaluate (score) each trajectory resulting from the forward simulation, using a metric that incorporates characteristics such as: proximity to obstacles, proximity to the goal, proximity to the global path, and speed. Discard illegal trajectories (those that collide with obstacles)."
The part of the cost metric which scales how much to emphasize the local planner's carrot (the parameter "gdist_scale")  can be used maybe recreate the behavior you want.
Although the term "carrot" gets thrown around a lot you have to distinguish between the context in the global planning and local planning context.
Comment by elemecrobots on 2020-11-28:
Thanks a lot..This answers most of my queries
Comment by JackB on 2020-11-29:
I am glad I could help, you can mark this answer as correct or write your own to better explain how your question was answered. Good luck!

