Q:

Read text file to build a vector

Hi,
I am trying to read a text file "filename.txt" to build a vector of doubles. I used following code which works fine when I am using outside ROS. However, when I include this code as a part of my .cpp file in a ROS package, it does not work. At line while(myFile >> value), it does not read any thing and hence does not enter the loop. Any help is appreciated.
#include <fstream>
#include <vector>
#include <iostream>

std::vector<double> vec;

void readDATA(){
double value;
std::ifstream myFile;
myFile.open("filename.txt", std::ios::app); 
if (myFile.is_open()){
    std::cout << "File is open."<<std::endl;
    while(myFile >> value){
        vec.push_back(value);
        std::cout << "value is " <<value<< std::endl;
        }
    myFile.close();
}
else std::cout << "Unable to open the file"; 
}

int main(){
     readDATA();
return 0;
}

Originally posted by AsifA on ROS Answers with karma: 231 on 2014-07-29
Post score: 0

Original comments
Comment by kmhallen on 2014-07-29:
"filename.txt" is relative to you current directory. If the file is relative to an ROS package, you can use #include <ros/package.h> and ros::package::getPath("some_package")
Comment by AsifA on 2014-07-30:
Thanks kmhallen, I replaced line number 10 with following code: myFile.open((ros::package::getPath("package_name")+"/filename.txt"), std::ios::app); and included the header file as #include <ros/package.h>. Still getting "no matching function" error. Any idea please?
Comment by AsifA on 2014-07-30:
PS: The error is:
error: no matching function for call to ‘std::basic_ifstream::open(std::basic_string, const openmode&)’

A:

Try putting the full path to your file. Normally it should work. If you don't want to put the full path, you can either do as kmhallen commented or move to your package's folder before executing rosrun
roscd your_package
rosrun your_node

If filename.txt is in your package's folder of course.

Originally posted by Mehdi. with karma: 3339 on 2014-07-29
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by AsifA on 2014-07-30:
Thanks Mehdi, that was helpful.

