Q:

how to subscribe a topic which is publishing a image using rosjava

can you explain how to subscribe a image coming from a camera?

Originally posted by vinay_kumar28 on ROS Answers with karma: 11 on 2017-02-28
Post score: 1

A:

You need to create a node that subscribes to a sensor_msgs/Image topic. Here's some code:
public class ImageListenerNode extends AbstractNodeMain {

public static String TAG = "image_listener";

@Override
public GraphName getDefaultNodeName() {
    return GraphName.of(TAG);
}

@Override
public void onStart(ConnectedNode node) {
  final Log log = node.getLog();
  Subscriber<Image> subscriber = node.newSubscriber("/image_topic", "sensor_msgs/Image");
  
  subscriber.addMessageListener(new MessageListener<Image>() {
      @Override
      public void onNewMessage(Image message) {
          log.info("New image is here!");
      }

  });
}
}

Apart from the standard rosjava dependency, you will need to add org.ros.rosjava_messages:sensor_msgs to your dependencies in your Gradle script / POM file (check https://github.com/rosjava/rosjava_mvn_repo/tree/master/org/ros/rosjava_messages/sensor_msgs to see the latest version of these messages). Then, you will be able to import sensor_msgs.Image to your project.
Hope it helps!

Originally posted by jubeira with karma: 1054 on 2017-04-11
This answer was ACCEPTED on the original site
Post score: 0

