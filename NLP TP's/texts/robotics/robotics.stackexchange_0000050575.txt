Q:

Definition of a ROI publisher with c++

Hi communitiy,
I'm currently using the procrob functional face detection package, which is completely written in c++. In one of the functions I am getting a rectangle that includes a recognized face. The variables that I get are: x- and y-postition of the upper left corner pixel and the width and height of the rectangle. I want to publish these information as a RegionOfInterest. But I don't know how to define the ROI-Publisher in c++. Does anyone else know?
Thank you for your help,
Greetings from Germany,
Bison

Originally posted by Bison on ROS Answers with karma: 52 on 2013-04-22
Post score: 0

A:

There is a pretty good tutorial describing how to write topic publishers in C++.
Here is a small code sample that should get you started.  Note that you'll need to also set up a package, package.xml, and CMakeLists.txt as described here.
#include "ros/ros.h"
#include "sensor_msgs/RegionOfInterest.h"

int main(int argc, char **argv)
{
  ros::init(argc, argv, "faceROI");
  ros::NodeHandle n;

  ros::Publisher pub = n.advertise<sensor_msgs::RegionOfInterest>("faceROI", 1000);

  ros::Rate loop_rate(10);
  while (ros::ok())
  {
    <do your code to calculate Face ROI here>

    sensor_msgs::RegionOfInterest roi_msg;
    roi_msg.x_offset = 10;
    roi_msg.y_offset = 10;
    roi_msg.height = 200;
    roi_msg.width = 100;

    pub.publish(roi_msg);

    ros::spinOnce();
    loop_rate.sleep();
  }
  return 0;
}

Originally posted by Jeremy Zoss with karma: 4976 on 2013-04-23
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Bison on 2013-04-23:
Thank you very much. That's exactly what i was looking for. I did the tutorial but I am really not into c++ yet. Greetings from Germany

