Q:

nav2d Navigator failing to create path

Hello,
I am trying to use nav2d with the turtlebot robot, in order to map an unknown room. I was able to modify the tutorial3.launch file and the costmap is created without problems. But when i try to add a goal in Rviz, the robot don't move and it show
[ERROR]: Prepare failed!

I also tried to use
rosservice call /StartMapping 3

but it only print response: 0 and shut down.
Here is my rqt_graph : http://img11.hostingpics.net/pics/270785rosgraph.png
EDIT :
The mapper log show the following error
[[33m[ WARN] [1444902817.579649858]: Failed to compute odometry pose, skipping scan ("base_laser_link" passed to lookupTransform argument source_frame does not exist. )^[[0m

Originally posted by Swan Baigne on ROS Answers with karma: 47 on 2015-10-13
Post score: 0

A:

"Prepare" means, that the Navigator tries to get a map and the robot's position from the Mapper. You should check if a map is build (global map from Mapper, not local costmap from the Operator).

Originally posted by Sebastian Kasperski with karma: 1658 on 2015-10-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Swan Baigne on 2015-10-15:
Thanks for your answer, it seems that the Mapper node is not creating the map. It seems that it is because 3 topic it subscribe to are not published : /tf_static , /karto_in and /initialpose.
Which node is supposed to publish those 3 topic ?
Comment by Sebastian Kasperski on 2015-10-15:
I don't think it is related to these 3 topics. /tf_static is from tf and only used for static transforms, /karto_in and /initialpose are only needed in a multi-robot scenario. You could set the Mapper's log level to debug. And check for errors when you call the get_map service.
Comment by Swan Baigne on 2015-10-15:
Thanks for your anwers.
May i ask how to do that ? i was able to change the Mapper's log level with rosservice call /mapper ros debug, but i don't know how to call the get_map service as it is not listed in rosservice list, only /GetMap/get_loggers and /GetMap/set_logger_level
Comment by Sebastian Kasperski on 2015-10-15:
I usually use the 'rqt_console' tool directly to change the log level of a node. There has to be a service 'get_map', which is called by the Navigator in Prepare-Phase. Looks like your mapper is not running correctly. Are there any messages from the mapper during startup?
Comment by Swan Baigne on 2015-10-15:
No messages during startup, sadly :-(
It only show around 20 time a sec the following message in the Mapper log :
[[33m[ WARN] [1444902817.579649858]: Failed to compute odometry pose, skipping scan ("base_laser_link" passed to lookupTransform argument source_frame does not exist. )^[[0m

Comment by Sebastian Kasperski on 2015-10-15:
This seems to be the problem. All scans are skipped and not added to the map. Make sure that the parameters "laser_frame", "robot_frame" and "odometry_frame" are set according to your robot setup. You can use "rosrun tf view_frames" to inspect your current frame tree.
Comment by Swan Baigne on 2015-10-16:
Thanks a lot for the answers, i was able to change the /laser_frame to the correct value.
It took me so long because thoses parameters are not listed in the rosparam list /Mapper
The map is now correctly created, but as the robot is not responding to goals, i may create another question :)
Comment by 张京林 on 2015-12-23:
But how to set those three frames "laser_frame", "robot_frame" and "odometry_frame" ? I meet the same problem.
Comment by Sebastian Kasperski on 2015-12-27:
The frame names are set at the top-level-file, so they are available to all nodes
Comment by Swan Baigne on 2016-01-04:
You have to set thoses parameters inside the mapper.yaml or ros.yaml file you use if i remember correctly, will re-check when i have my robot available.

