Q:

Small Confusion about TF

if I have a broadcaster like this:
void pub_odom::odom_callback(const nav_msgs::Odometry& odom) {

btVector3 Position;
btQuaternion Orientation;
tf::TransformBroadcaster odom_broadcaster_;
tf::StampedTransform odom_transform;

Position.setValue(odom.pose.pose.position.x,odom.pose.pose.position.y,odom.pose.pose.position.z);
Orientation.setW(odom.pose.pose.orientation.w);
Orientation.setX(odom.pose.pose.orientation.x);
Orientation.setY(odom.pose.pose.orientation.y);
Orientation.setZ(odom.pose.pose.orientation.z);

odom_transform.setOrigin(map_center);
odom_transform.setRotation(tf::Quaternion(tf::Vector3(0,0,1),-yaw_init));
odom_transform.stamp_ = odom.header.stamp;
odom_transform.child_frame_id_= "/odom";
odom_transform.frame_id_= "/center_map";
odom_broadcaster_.sendTransform(odom_transform);}

How do I visualise its publication on rviz and tf. Do i have to create something like in my launch file in order to visualise it:
<node pkg="tf" type="static_transform_publisher" name="tf_data" args="1.0 0.0 0.0 0.0 1.0 0.0 /odom /another_link 20" />

WHen I do it with this launch file I can visualise in tf the tranformation between /odom and /another_link and the transformation is based on args I have given in launch file. How do I get the publication based on the broadcaster and the callback function.

Originally posted by micheal on ROS Answers with karma: 121 on 2013-08-09
Post score: 0

A:

You can remove the static transform publisher from the launch file, if you want /center_map to be your center in rviz.
In your code do the following:
odom_transform.setOrigin(Position);
odom_transform.setRotation(Orientation);

In rviz select center_map as the fixed frame.
Hope this works.

Originally posted by BennyRe with karma: 2949 on 2013-08-09
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by micheal on 2013-08-10:
so I removed the whole line <node pkg="tf" .................   /> from my launch file. I also added the 2 lines that you mentioned into my code. But when I do rostopic list. It does not list tf as a topic now. Why does it not list tf as a topic. Similarly my view_frames return no tf data now. What should I do ?
Comment by BennyRe on 2013-08-10:
Could you please update the code in your question, so I can check, if it's correct? Does your callback get called?

