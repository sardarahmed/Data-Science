Q:

Transform geometry_msgs/TransformedStamped() to sensor_msgs/PointCloud2 on rospy

Hi people,
I have a geometry_msgs/TransformedStamped() vector which I am trying to translate to sensor_msgs/PointCloud2.
I have looked aroun in the rospy api docs but nothing clear comes out strking.
Question: Has anyone ever used rospy to do this sort of transformation in the past? Example codes/pointing to api references would be helpful.
Thanks!

Originally posted by lakehanne on ROS Answers with karma: 152 on 2016-10-04
Post score: 0

Original comments
Comment by gvdhoorn on 2016-10-05:
What is it exactly that you are trying to do, and what is the end result you are after? A transform cannot be meaningfully 'translated' into a point cloud, afaict.
Comment by lakehanne on 2016-10-05:
Data is from vicon_bridge package w/each marker packed into a geometry/TransformStamped() msg. I'm trying to stream the markers' world position to move-it as a sensor_msgs/PointCloud2 msg. I wrote a basic rospy code that picks the vector3() translation information but the pcl doens't show directions
Comment by lakehanne on 2016-10-05:
Wondering if I should somehow include the rotation information in the pcl code so i can see the rotation of the clouds when an object moves. Code is here: https://github.com/SeRViCE-Lab/superchicko/blob/devel/superchick_cloud/src/superchick_cloud.py
Comment by gvdhoorn on 2016-10-05:
So you're creating point clouds from scratch, based on TF data coming from the vicon system?
Comment by lakehanne on 2016-10-05:
Yes. I have the code here: https://github.com/SeRViCE-Lab/superchicko/blob/devel/superchick_cloud/src/cloud.py. For some reason, my clouds are static and never move even when my object changes position.
Comment by gvdhoorn on 2016-10-06:
Are you setting the cloud's frame_id to the correct values? Without those, they will never be transformed.
Comment by lakehanne on 2016-10-06:
The frame_id of the child cloud doesn't matter AFAIK. What matters is that the fixed frame we are transforming into must match that of the markers from vicon. What I eventually did was to use the twist I computed from the four markers in vicon to generate a TransformedStamped msg. This was cont'd
Comment by lakehanne on 2016-10-06:
This was then used in computing the new cloud's tranform with the do_transform_cloud object. The code is here if you are interested. It is working!

A:

This has been fixed. In the end, what I did was to use the twist I computed from the four markers in vicon to generate a TransformedStamped msg. This was then used in computing the new cloud's tranform with the do_transform_cloud object. The code is here if you are interested.

Originally posted by lakehanne with karma: 152 on 2016-10-06
This answer was ACCEPTED on the original site
Post score: 0

