Q:

Python Spin Once Equivalent

Is there an equivalent to spin_once (C++) in ROS for Python?
In C++ I have a loop with spin_once and during each iteration of the loop the code checks a couple of global variables for changes and then does some action based on the value of those global variables. The global variables are based on messages from other nodes' topics to which my C++ ROS node is subscribed. How would this code structure translate into Python?

Originally posted by atp on ROS Answers with karma: 529 on 2013-12-13
Post score: 6

A:

No, there is no spin_once in rospy. In rospy the subscriber's callbacks are executed in separate threads. Google quickly produces these old questions including answers:

http://ros-users.122217.n3.nabble.com/rospy-version-of-spinOnce-td180442.html
http://ros-users.122217.n3.nabble.com/ros-spinOnce-equivalent-for-rospy-td2317347.html
http://answers.ros.org/question/30490/rospy-suscriber-run-a-callback-once-using-rospyspin/

To translate your loop from C++ you could either check periodically in a loop in the main thread, or check in each of the callbacks. Either way you likely need some thread synchronization.

Originally posted by demmeln with karma: 4306 on 2013-12-16
This answer was ACCEPTED on the original site
Post score: 10

Original comments
Comment by lucasw on 2022-01-12:
Nabble doesn't work any longer, but I was able to find this one (it's nice the nabble url contained some searchable text, though this once has a date encoded) http://lists.ros.org/lurker/message/20110123.210157.d2c85cc6.html

You don't need spinOnce in rospy as the I/O is multithreaded.
You can use the Rate object to contrain the rate of processing, though it does not have the same effect as spinOnce in roscpp.

Ken

