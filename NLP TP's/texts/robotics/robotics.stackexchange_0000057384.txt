Q:

set ROS_MASTER_URI directly in code

is it Possible to set ROS_MASTER_URI directly in c++ code without use of environment variables????
I use a big program with needs a lot time of initialisation, and I builded roslibs wichthe program uses
but I like to change sometimes the masteruri,the hostname without to setting new env-vars and reload the whole programm.
It would be nice if I colud set them as argument in ros::init or so. Thus the programm could change dynamically the server without restart.
(want to change ROS_IP,ROS_HOSTNAME too)

Originally posted by major on ROS Answers with karma: 21 on 2014-02-20
Post score: 1

A:

ROS does not allow you to change the master URI at runtime. The internal hooks to change the master URI, subscribe and publish topics to the new master don't exist.
If you want your node to communicate with different topics or a different ROS master at runtime, I suggest you take a look at some of the topic and multimaster tools that can be used to forward topics between different ROS masters:

http://wiki.ros.org/rosproxy
http://wiki.ros.org/foreign_relay
http://wiki.ros.org/multimaster
http://wiki.ros.org/topic_tools/relay

Originally posted by ahendrix with karma: 47576 on 2014-02-21
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by major on 2014-02-22:
What about the parameters in ros::init() is it possible the config it once for the whole session without use of environment variables??
Comment by ahendrix on 2014-02-22:
Sure; just run your node as 'rosrun my_pkg my_node  __master:=http://foo:11311' or './my_node __master:=http://foo:11311' using the remapping arguments you found. Or, collect the appropriate environment variables into two rc files, and source the appropriate file before your run.
Comment by major on 2014-02-24:
and with the function ros::shutdown()
is it possible to call ros::init(...) with  pass arguments for the first ros_master the after doing some stuff call ros::shutdown()
and then to start ros::init again with another  ros_master and doing stuff on that one ???
(i dont want to do stuff on both simultanously just want to change it in runtime for longer periods without shuting down the progranm)
Comment by ahendrix on 2014-02-24:
I don't think anyone has tried to use the ROS API that way before. I suspect you'll run into some weird corner cases and bugs.

