Q:

how to get turtlebot pose

I would like to get turtlebot poses when it walking. The following codes are used, but there is no responds. I guess it was the problem of topic "/odom". could anybody give me some ideas to fix it?
thanks.
virtual void onInit()
{
      ros::NodeHandle& nh = getNodeHandle();
      ros::NodeHandle& private_nh = getPrivateNodeHandle();           
      cmdpub_ = private_nh.advertise<geometry_msgs::Twist> ("cmd_vel", 1);
      sub_= nh.subscribe<PointCloud>("depth/points", 1, &TurtlebotFollower::cloudcb, this);
      ros::Subscriber sub  = nh.subscribe("/odom",10, &TurtlebotFollower::poseCallback,this);
}
    
void poseCallback(const geometry_msgs::TwistPtr& msg){
      std::cout << msg.linear.x << "\t" <<msg.linear.y<< "\t" << 0.0 << "\t" << std::endl;
}

I found that if I put above codes into the onInit() virtual function, it will be failed. But if I put it in an main() function, it will be succeed. What is the difference?

Originally posted by baowei lin on ROS Answers with karma: 16 on 2015-09-08
Post score: 0

Original comments
Comment by Willson Amalraj on 2015-09-09:
Did your poseCallback work even if the message type is geometry_msgs::Twist? You are trying to use nodelets. You have to run them differently. Please follow the link to learn about running nodelets.
Comment by baowei lin on 2015-09-09:
sorry, the "succeed" means that I've changed them to nav_msgs. I will check nodelets, thank you Willson.

A:

I fixed the problem by changing getNodeHandle() to getMTNodeHandle(), which means if you want to subscribe multiple topics, you need a multiple thread callback queue. Thank you Willson again.

Originally posted by baowei lin with karma: 16 on 2015-09-09
This answer was ACCEPTED on the original site
Post score: 0

