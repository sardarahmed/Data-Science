Q:

programmatically turning off a camera

Hello,
To make a video recording of my gazebo stage I have followed tutorial at http://gazebosim.org/tutorials?tut=camera_save&cat=sensors and successfully recorded jpg files for the screen.
How can I turn off this camera programmatically?
Best regards,
C.A.

Originally posted by altineller on Gazebo Answers with karma: 9 on 2020-05-02
Post score: 0

A:

You can get the sensor and deactivate it:
#include <gazebo/sensors/SensorManager.hh>
sensors::SensorPtr sensor = sensors::SensorManager::Instance()->GetSensor(
    "world_name::model_name::link_name::sensor_name");
sensor->SetActive(false);

If you are not sure about the name, you can get the names of all sensors and identify yours:
for (sensors::SensorPtr sensor : sensors::SensorManager::Instance()->GetSensors())
    gzmsg << sensor->ScopedName() << "\n";

At the same time, you can skip the whole saving images thing, and directly record a video with the camera:
sensors::CameraSensorPtr camera_sensor =
  std::static_pointer_cast<sensors::CameraSensor>(sensor);
camera_sensor->Camera()->StartVideo("mp4");
camera_sensor->Camera()->StopVideo();
camera_sensor->Camera()->SaveVideo("~/recording");

Originally posted by nlamprian with karma: 833 on 2020-05-02
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by altineller on 2020-05-02:
thank you for the answer. is there any example code that I can work on? I have a setup where I run a simulation for 100seconds, then stop recording at that time. unfortunately, killing gazebo with a timer node, does work, but it takes a varying amount of time to stop, which records more images.
Comment by nlamprian on 2020-05-02:
You can create a world plugin and configure things as you like in there. If you don't wanna get into that, I recently released a plugin that records videos, which you can control through ROS services. See gazebo_video_monitor_plugins
Comment by rezenders on 2020-06-16:
When I use sensor->SetActive(false);  I have to call it several times before the change takes effect, should it be like this?

