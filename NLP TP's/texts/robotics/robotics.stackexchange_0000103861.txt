Q:

Gazebo Ignition how to bridge SerializedStepMap

I have a robot in .sdf, that I'm simulating in Gazebo Ignition. For further development I need TF of that robot. How can I get it?
I found information, that TF is published to /world/<world_name>/model/<model_name>/state (source), in my case /world/roomba_world/state, with message of type

How can i bridge it to ROS Humble? What is ROS substitute of SerializedStepMap?
ros2 run ros_gz_bridge parameter_bridge /world/roomba_world/state@???[ignition.msgs.SerializedStepMap

My second question: I found other tutorials using ros_gazebo_pkgs, but current documentation of Gazebo for ROS users tells to install Ignition, what is current way to do simulations? URDF of robot in ROS + ros_gazebo_pkgs? Currently I have SDF for Ignition/Gazebo and simplified URDF for RViz2, it is convinient, because I can simulate lidar without <gazebo></gazebo> tags etc, but on the other hand it is not that easy to get TF.

A:

The JointStatePublisher plugin publishes a gz.msgs.Model (might be the SerializedStepMap on older Ignition versions - which version do you use?) to a joint_state topic by default and the equivalent for that in the ROS domain is a sensor_msgs/msg/JointState, see here. But this isn't a TF2 yet.
You also need a robot_state_publisher that subscribes to the joint states and generates a TF2 based on the input robot description.
Yes, for new projects one should use the new Gazebo (Ignition). You can convert a SDF to URDF via sdformat_urdf and this is also available in RViz as it is published to the robot_description topic as usual.

