Q:

Indigo on trusty: how to handle ffmpeg dependency

My project depends on libavcodec-dev, libavformat-dev, libavutil-dev, libswscale-dev.
To this end for groovy and hydro in package.xml  I added a build and run dependency on ffmpeg
that brings from rosdep the expected dependencies:
In https://github.com/ros/rosdistro/blob/master/rosdep/base.yaml there is:
ffmpeg:
  arch: [ffmpeg]
  debian: [ffmpeg, libavcodec-dev, libavformat-dev, libavutil-dev, libswscale-dev]
  fedora: [ffmpeg-devel]
  gentoo:
    portage:
      packages: [media-plugins/ffmpeg]
  macports: [ffmpeg]
  ubuntu: [ffmpeg, libavcodec-dev, libavformat-dev, libavutil-dev, libswscale-dev]

Now for indigo it seems that the ffmpeg debian package is not available for trusty.
We cannot change rosdep/base.yaml to the following (even if it shall work for trusty):
  debian: [libavcodec-dev, libavformat-dev, libavutil-dev, libswscale-dev]
  ubuntu: [libavcodec-dev, libavformat-dev, libavutil-dev, libswscale-dev]

Shall I introduce new entries for each debian package ?
libavcodec-dev:
  debian: [libavcodec-dev]
  ubuntu: [libavcodec-dev]

libavformat-dev:
  debian: [libavformat-dev]
  ubuntu: [libavformat-dev]

libavutil-dev:
  debian: [libavutil-dev]
  ubuntu: [libavutil-dev]

libswscale-dev:
  debian: [libswscale-dev]
  ubuntu: [libswscale-dev]

Any ideas ?
Thanks
Fabien

Originally posted by Fabien Spindler on ROS Answers with karma: 126 on 2014-04-01
Post score: 1

A:

It looks like ffmpeg has been deprecated in Ubuntu for a while, and it's being replaced in 14.04 with lbav-tools according to http://askubuntu.com/questions/432542/is-ffmpeg-missing-from-the-official-repositories-in-14-04 .
You should probably either:

declare a new rosdep called avtools or similar, which contains most of the same things that ffmpeg contained. This may introduce extra maintenance for packages that will have to switch their API to depending on avtools.
update the existing ffmpeg dependency to silently depend on avtools on newer versions of Ubuntu. This will probably become very brittle as the avtools and ffmpeg command-line tools and APIs diverge in upcoming Ubuntu releases.

Originally posted by ahendrix with karma: 47576 on 2014-04-01
This answer was ACCEPTED on the original site
Post score: 1

