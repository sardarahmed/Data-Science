Q:

How to calibrate analog signal with velocity command?

Hi there,
Right now I'm trying to make an autonomous wheelchair. I am using an Arduino to write analog signals to two non-inverting op amps, which are connected to the X (controls forward and backward) and Y (controls rotation) pins of the wheelchair joystick control. All these op amps do is amplify the analog signal and output a voltage between 4 and 6 volts. I also have two encoders connected to the Arduino that will provide me with odometry information.
What is the best way for me to calibrate the magnitude and duration of analog signal required to obtain a particular velocity on my wheelchair? Are there any good ROS tools that I can use?
So far I have looked into rqt_plot and dynamic_reconfigure. I was wondering if there were any better options out there?

Originally posted by OwnageManFromLOL on ROS Answers with karma: 149 on 2017-06-23
Post score: 0

A:

Not clear what you mean by writing signal on X and Y pin of joystick. You can directly use the pwm signal from arduino to control the velocity of the motors. I think you are generating the velocity commands using odometery information in ROS. So you just need to implement a PID controller in arduino using the error in the required velocity and actual velocity (from odometry) that will try to achieve the required velocity.

Originally posted by hardik2 with karma: 16 on 2017-06-23
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by OwnageManFromLOL on 2017-06-23:
Hi hardik, sorry I was unclear in the question. I have updated the question. The analog signal actually goes through two non inverting op amps before reaching the wheelchair pins. Can I still use a PID controller in this case?

