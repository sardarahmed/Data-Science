Q:

Navigation stack not publishing Obstacles & inflation obstacles details

Hello Everyone,
I am trying to use navigation stack with static map fed to it. Currently i am feeding LaseScan data through Kinect and sonar sensors. When triggering the navigation launch file and observing the same in rviz i can see the global and local path seems to be getting created but cant see and information related to the obstacles and inflation obstacles. Going through the tutorial this is supposed to be published on /local_costmap/inflated_obstacles and /local_costmap/obstacles respectively.
Instead of these topics i can see topics like
/move_base/local_costmap/obstacle_layer/parameter_descriptions
/move_base/local_costmap/obstacle_layer/parameter_updates
/move_base/local_costmap/obstacle_layer_footprint/footprint_stamped
/move_base/local_costmap/obstacle_layer_footprint/parameter_descriptions
/move_base/local_costmap/obstacle_layer_footprint/parameter_updates
But these topics cannot be monitored in RVIZ as the data type doesn't match with nav_msgs/GridCells.
My launch file looks like below
`

  
  
  
  
  
    
    
    
    
    
  

`
costmap_common_params.yaml
max_obstacle_height: 0.80
obstacle_range: 1
raytrace_range: 3.0
footprint: [[-0.3,-0.3],[-0.3,0.3],[0.45,0.3], [0.45,-0.3]]
inflation_radius: 0.55
obstacles:
observation_sources: laser_scan_sensor sonar_scan_1 sonar_scan_2 sonar_scan_3 sonar_scan_4
#laser_scan_sensor: {sensor_frame: camera_link, data_type: LaserScan, topic: scan, marking: true, clearing: true}
laser_scan_sensor: {data_type: LaserScan, topic: scan, marking: true, clearing: true, min_obstacle_height: 0.05, max_obstacle_height: 0.5}
sonar_scan_sensor: {data_type: LaserScan, topic: sonar_scan_1, marking: true, clearing: true, min_obstacle_height: 0., max_obstacle_height: 0.15}
sonar_scan_sensor: {data_type: LaserScan, topic: sonar_scan_2, marking: true, clearing: true, min_obstacle_height: 0., max_obstacle_height: 0.15}
sonar_scan_sensor: {data_type: LaserScan, topic: sonar_scan_3, marking: true, clearing: true, min_obstacle_height: 0., max_obstacle_height: 0.15}
sonar_scan_sensor: {data_type: LaserScan, topic: sonar_scan_4, marking: true, clearing: true, min_obstacle_height: 0., max_obstacle_height: 0.15}
Thanks in Advance,
Nithin G

Originally posted by Nithin on ROS Answers with karma: 53 on 2014-11-07
Post score: 1

Original comments
Comment by Nithin on 2014-11-12:
Does anyone have idea on this? This is still an issue. Cant see topics for obstacles and inflated obstacles.
In hydro is it published on different topic or something?
Thanks,
Nithin
Comment by rem1968 on 2017-02-28:
Hi Nithin,  did you ever get this resolved?  I am having the same problem.  I am working on ROS Indigo.  Thanks, Eric
Comment by ROOBBE on 2018-03-26:
I meet this problem too
how to solve it?
Comment by pk99 on 2021-04-23:
How did you solve this problem? Also is /scan topics or the sensor stream data getting published to move_base. I'm asking cause you haven't posted a rqt_graph screenshot

A:

I just got my navigation stack up and running and had much the same issue.
The RViz with Navigation Tutorial does not seem to be up to date with the verion of RViz or gmapping that I am using, as the video has you adding Grid Cells for displaying obstacles, costmaps, and inflation data.
The problem is that Grid Cells utilizes nav_msgs::GridCells messages and the topics which publish obstacle, costmap, and inflation data are nav_msgs::OccupancyGrid messages.
The way to display this information is to add two Map displays.  One with the topic /move_base/local_costmap/costmap and the other with /move_base/global_costmap/costmap.
I hope this helps.  If it does not, please let me know and we will try to get you through this.

Originally posted by sealguy77 with karma: 323 on 2015-03-23
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by ARCHANA on 2016-09-27:
I am also facing the same problem as discussed above by @Nithin and may be due to this problem my robot is not able to detect obstacles while reaching its navigation goal. Also by adding two Map displays as mentioned by you does not solve the problem. Can you suggest me what else should I do?
Comment by charlie on 2019-04-28:
I added the maps as described above and the topics  - the /move_base/local_costmap/costmap does seem to infate the region around the laserscan data in the local map region. It does so on both sides of the laser data. I have not validated if it impacts the actual navigation.
Comment by yhw on 2020-06-30:
I can't see why "costmap" and "obstacles" are the same thing. Costmap is an occupancy grid, which is built on the probability computed from the map prior and observations. While "obstacles" (and "inflated obstacles") should be the immediate observation (with inflation) from the scans.
Comment by pk99 on 2021-04-23:
@sealguy77 I did the same thing which you suggested but it's not working for me. Also in my rqt_graph, the connection between /scan and /move_base is missing. Is there any obvious solution for this?

