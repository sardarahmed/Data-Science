Q:

How to send tf data from multiple namespaces to Rviz?

My setup: I have setup a launch file with two groups defining the namespaces for two robots, and launching rviz together with a joint_state_publisher, robot_state_publisher, ned_static_transform_publisher and a robot_description parameter.
The goal is to simulate multiple robots, each in its own namespace and visualize in Rviz.
Each robot sends tf transforms with sendTransform() from tf.TransformBroadcaster(), but they become the same /tf when seen in rqt_graph, and in rviz it means that my robot model is updating to the two robots seperatepositions, and not having a seperate model for each.
I have tried to used the tf_prefix, but that does not do any thing. I am using Indigo. I have found that it might be because that method is not valid since Hydro. See [1].
I have searched quite a bit around via google and directly on the answers.ros.org, but only found older posts saying to use tf prefixes as  , and also a lot saying that it does not work any more. But I have not found a solution. I have thought about writing another node that takes the poes from the two robots and let this send the transforms.
I hope someone has another and more elegant solution that the one I just proposed. Any pointers or help is appreciated.
[1] http://answers.ros.org/question/12877/tf-on-multiple-robots-gets-crowded/?answer=19017#post-id-19017

Originally posted by nickoe on ROS Answers with karma: 3 on 2014-10-24
Post score: 0

A:

The principle of the tf_prefix still works, but the implementation is different. AFAIK the currently recommended method is to simple name tf frames "correctly", i.e. robot_a's base_link frame should just be named /robot_a/base_link. The TF library is agnostic to that.
The robot_state_publisher however needs to prefix frames correctly. If it doesn't this won't work easily.

Originally posted by dornhege with karma: 31395 on 2014-10-24
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by nickoe on 2014-10-24:
Ok, thank you for your reply. Would that mean that I should somehow make my node figure out what namespace it is in and prefix that to the frame id? Adn what should I modify for robot_state_publisher?
<node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher" />

Comment by nickoe on 2014-10-26:
Ok, I did just that by making the node sending the tf prefix the frame id with the namespace using the method in http://answers.ros.org/question/62620/programatically-get-nodes-namespace/  I did nothing to robot_state_publisher.

