Q:

How to implement Postgresql C ++ API in ROS?

Hi guys!
Recently I got involved in the programming of databases through PostgreSQL. After some time I managed to create a good database with JDBC and Java, but now I want to migrate it to C ++ with ROS to have it running on my laptop with Ubuntu (16.04) and in my Raspberry PI (Jessie).
I know that the C ++ API for PostgreSQL is libpqxx and I already have it installed but I could not enter it successfully in the CMakeList and the catkin: make always fails.
I am also aware that there is a database integration package for ROS, however, but it does not help me at all since it is only a concept of encapsulation and does not provide a real connection with PostgreSQL.
Has anyone succeeded  integrating of libpqxx with ROS? How did you do it? What other alternatives do I have to be able to migrate my development from JDBC to C ++ in ROS?
PD: I am working with ROS Kinetic.
Thanks a lot . . .
Edit1:
Due to a request I have attached the error I received at the time of performing the catkin_make. As you can see it actually happens as I describe it, I can not include a package or the PQXX libraries
-- +++ processing catkin package: 'avc_hor'
-- ==> add_subdirectory(avc_hor)
-- Using these message generators: gencpp;geneus;genlisp;gennodejs;genpy
CMake Error at avc_hor/CMakeLists.txt:17 (find_package):
  By not providing "FindPQXX.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "PQXX", but
  CMake did not find one.

  Could not find a package configuration file provided by "PQXX" with any of
  the following names:

    PQXXConfig.cmake
    pqxx-config.cmake

  Add the installation prefix of "PQXX" to CMAKE_PREFIX_PATH or set
  "PQXX_DIR" to a directory containing one of the above files.  If "PQXX"
  provides a separate development package or SDK, be sure it has been
  installed.

-- Configuring incomplete, errors occurred!
See also "/home/fhfonsecaa/catkin_ws/build/CMakeFiles/CMakeOutput.log".
See also "/home/fhfonsecaa/catkin_ws/build/CMakeFiles/CMakeError.log".
Makefile:2390: fallo en las instrucciones para el objetivo 'cmake_check_build_system'
make: *** [cmake_check_build_system] Error 1
Invoking "make cmake_check_build_system" failed

Originally posted by fhfonsecaa on ROS Answers with karma: 90 on 2018-01-23
Post score: 0

A:

This seems like a cmake question, not a ROS question. Maybe try to get the library working in a non-ROS project, and then take that working example and incorporate it into ROS.
If you can simplify this to problems using libpqxx in a cmake project (without ROS) then you'll probably find more people who can help if you ask on Stack Overflow or a similar general-purpose programming forum.
If you can get this to work in a normal cmake project but it doesn't work within a ROS project, then there may be some interaction with catkin or some other part of the ROS build system. In that case, please edit your question with the CMakeLists.txt for both the normal project, the non-working ROS project and the full error message that you get when trying to build.
Update
Based on the error message in your post and from some searching online, it looks like pqxx does not come with cmake support by default. The library is probably fine, but cmake can't find it.
The appropriate way to fix this in cmake is to set up and use a FindPQXX.cmake, as the initial error message suggests. This will be more portable than hardcoding the path to the libpqxx library, and will work with the system package.
It looks like VTK already has a FindPQXX.cmake, so you can just download https://raw.githubusercontent.com/Kitware/VTK/master/CMake/FindPQXX.cmake into the cmake sub-directory of your project, and then update your CMakeLists.txt with:
set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})
find_package( PQXX REQUIRED )

include_directories( ${PQXX_INCLUDE_DIRECTORIES} )

target_link_libraries( avc_horpolar_node ${catkin_LIBRARIES} ${PQXX_LIBRARIES} )

Originally posted by ahendrix with karma: 47576 on 2018-01-23
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by fhfonsecaa on 2018-01-23:
That is absolutely correct, in fact libpqxx already works in a normal C ++ project in my ubuntu and in my windows, however I can not get the interaction with ROS to work because of the classic error PQXX package not found.
The problem is not make libpqxx to work, but to do it with ROS
Comment by gvdhoorn on 2018-01-24:
I feel @ahendrix is correct here: the problem is most likely not with ROS. ROS uses CMake as a build tool, so if anything, the problem is with CMake.
But as @ahendrix also notes: if you don't show us your CMakeLists.txt, we can't help you.
Comment by gvdhoorn on 2018-01-24:
@ahendrix: it looks like libpqxx comes with a PkgConfig file, so that should be easily integrated into a CMakeLists.txt.

