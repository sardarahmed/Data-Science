Q:

ps3joy slow output

Hi all,
I am using p3joy to get feedback from my ps3 controller on an Odroid u2 running Ubuntu 12.10, however it is incredibly slow. There appears to be a delay of a few seconds before messages arrive regarding changes of the controller. evtest and jstest give me the same kind of delay. I 'debugged' ps3joy_node.py and it does seem like its update function is called often enough, where could this delay then be coming from?
In addition, I noticed that if I don't move the controller (this also happens on a laptop with Ubuntu), no events get sent. For example if I keep the controller laying still and press the X button, no messages/events are being sent. If I then move the controller slightly, I get the message/event.
Any suggestions?

Originally posted by Hansg91 on ROS Answers with karma: 1909 on 2013-11-19
Post score: 2

A:

Update (4/21):
I found a PPA that contains a different PS3 driver:
https://help.ubuntu.com/community/Sixaxis#Quick_Setup_Guide_for_12.10
I currently recommend installing this, then:
sudo  sixad --start
rosrun joy joy_node
You should see usable output now.

OK I just ran into this issue.  Here's what I know:
I see rates through rostopic hz that are absolutely terrible (1.5Hz through 6 to maybe 10 Hz).  Even --continuous-output doesn't help.  I expect something around 40Hz normal and 90Hz using --continuous-output.  Tried multiple dongles, built-in bluetooth, nothing worked.
I tried it on another computer and it worked perfectly there.  Eventually I found out that it's due to the kernel version.  The latest kernel that works for me is way back to linux-generic-quantal (3.5).  3.8 and 3.11 are both terribly broken.
You can try testing this by installing the linux-generic-quantal package, then holding shift as your computer boots and selection "previous kernels" -> 3.5 from the grub menu.  Let me know if this resolves it for you as well.  If you don't need a newer kernel, I would uninstall any later kernels and stick with quantal's kernel.
As for fixing this, I have no idea in the slightest.  I would personally ask @ahendrix as he was my go to Kernel guy at Willow Garage.

Originally posted by Chad Rockey with karma: 4541 on 2014-01-15
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by Hansg91 on 2014-01-16:
I tried to install 3.5, but all my drivers stopped working (including bluetooth and internet), so I couldn't test it there. I tried 3.13rc8, it still gives the same frequency (around 13hz for me). Adding continuous output does not change anything for me.
Comment by Hansg91 on 2014-01-16:
I just tried it on an old Pandaboard with Ubuntu and kernel 3.1, it gave me 40hz there. Curious :)
Comment by ahendrix on 2014-01-17:
Sadly, I don't have a PS3 controller, so I can't play around with this. @chad-rockey if you have one that I can borrow, I could play around with it. I'm also interested to see if the newer kernels have native support for the PS3 controller.
Comment by Chad Rockey on 2014-01-17:
@ahendrix, Yeah, please feel free to drop by Savioke and borrow one.  I also have two USB bluetooth adapters if you want to borrow those, though it doesn't seem to make a difference between an X230, ASUS Bluetooth, and el-cheapo Bluetooth.
Comment by tuuzdu on 2014-02-19:
Hi @Hansg91 are you fixed the problem slow output in new kernels? I need working bluetooth joystick with kernel 3.8 and BeagleBone Black. I dont understand where to begin to solve...
Comment by Hansg91 on 2014-02-21:
Nop, no idea. I just know its due to the kernel now.

