Q:

protobuf Version verification failed

Hi,
I want to run a launch file, error about protobuf version occur:
[Msg] Waiting for master.
[Msg] Connected to gazebo master @ http://127.0.0.1:11345
[Msg] Publicized address: 192.168.0.131
[Wrn] [msgs.cc:1655] Conversion of sensor type[depth] not suppported.
[Wrn] [Event.cc:87] Warning: Deleteing a connection right after creation. Make sure to save the ConnectionPtr from a Connect call
[libprotobuf FATAL google/protobuf/stubs/common.cc:61] This program requires version 3.4.0 of the Protocol Buffer runtime library, but the installed version is 2.6.1.  Please update your library.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in "/home/wang/ridgeback_cartographer_ws/protobuf/src/google/protobuf/descriptor.pb.cc".)
terminate called after throwing an instance of 'google::protobuf::FatalException'
  what():  This program requires version 3.4.0 of the Protocol Buffer runtime library, but the installed version is 2.6.1.  Please update your library.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in "/home/wang/ridgeback_cartographer_ws/protobuf/src/google/protobuf/descriptor.pb.cc".)
Aborted (core dumped)

What confuse me is  Version verification failed in "/home/wang/ridgeback_cartographer_ws/protobuf/src/google/protobuf/descriptor.pb.cc".), the workspace mentioned here is not the workspace include the launch file, and if I delete the /home/wang/ridgeback_cartographer_ws, the error still be the same. How can I delete the link between the protobuf and /home/wang/ridgeback_cartographer_ws? Gazebo version is 7.
update:
I used to build ridgeback_cartographer_ws in my ubuntu. I guess it is because of the protobuf built with the ridgeback_cartographer_ws crash the protobuf come with gazebo. I test the tutorial of gazebo, there is also the error occur:
[libprotobuf FATAL google/protobuf/stubs/common.cc:61] This program requires version 3.4.0 of the Protocol Buffer runtime library, but the installed version is 2.6.1.  Please update your library.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in "/home/wang/ridgeback_cartographer_ws/protobuf/src/google/protobuf/descriptor.pb.cc".)
terminate called after throwing an instance of 'google::protobuf::FatalException'
  what():  This program requires version 3.4.0 of the Protocol Buffer runtime library, but the installed version is 2.6.1.  Please update your library.  If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library.  (Version verification failed in "/home/wang/ridgeback_cartographer_ws/protobuf/src/google/protobuf/descriptor.pb.cc".)

I don't know how to delete the protobuf built with ridgeback_cartographer_ws. Can you provide some advice?

Originally posted by TouchDeeper on Gazebo Answers with karma: 11 on 2019-03-23
Post score: 0

A:

I uninstall the protobuf by sudo apt-get remove libprotoc-dev, remember to take a screenshot of the package uninstall with the  protobuf.
and reinstall the protobug by sudo apt-get install libprotoc-dev, then reinstall the package uninstall with the protobuf.
The error pass.

Originally posted by TouchDeeper with karma: 11 on 2019-03-24
This answer was ACCEPTED on the original site
Post score: 1

