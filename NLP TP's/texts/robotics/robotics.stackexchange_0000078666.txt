Q:

Turtlebot RVIZ visualisation opposite from real Robot

Hi,
I am currently facing an RVIZ problem. The turtlebot robot model on RVIZ displays itself as backwards to that of the actual robot such that when I use keyboard teleop to control, the actual robot moves forward but RVIZ displays it moving backwards. Changing the teleop commands does not work as it still ends up going in opposite directions. Here is the link to the video of the problem I am facing: https://youtu.be/SddtF5hGNvw
Not sure if it is related but this problem might also be affecting a successful launch of amcl and hector mapping as the laser scans from my rplidar A2 sensor do not display correctly. The following screenshots are in the links below
Laser scan before 2D pose estimate:
https://www.dropbox.com/s/f7cbxygicsg8zhj/turtlebot1.png?dl=0
Laser scan after 2D pose estimate (laser scan flips when I make the robot face the correct direction on RVIZ):
https://www.dropbox.com/s/ahcy2v4mi8enwe2/turtlebot2.png?dl=0
Please help me out! Been struggling with this issue for quite some time already.
Thanks in advance!

Originally posted by Rayner on ROS Answers with karma: 62 on 2017-01-31
Post score: 0

Original comments
Comment by gvdhoorn on 2017-01-31:
Has it always done this (ie: TB came out of the box like this)? Or have you changed anything (hw, sw)?
Comment by Rayner on 2017-02-01:
I am currently trying to isolate the problem. I am unsure if it is an rviz visualization problem or hector mapping problem. By the way, is there a way to have an rviz visualization of turtlebot teleop with the actual robot? I don't think I changed hw or sw as I am using RPLidar A2 sensor only.

A:

I am making a guess here. Since your turtle_bot_teleop drives the robot while hector_slam builds the map independently, the problem could be your TF, the orientation of the laser maybe. Try checking your TF tree, especially the laser->base_link

Originally posted by hmchung with karma: 66 on 2017-01-31
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Rayner on 2017-02-01:
Yes! That was the problem. I simply had to rotate the sensor by 180degrees and the RVIZ worked well. Now there is a wire sticking out in front of the turtlebot though, any idea how to rotate the tf frame by 180degrees instead? Thank you so much!
Comment by hmchung on 2017-02-01:
I assume that you are starting the SLAM by a launch file, yeah? Try adding a static_transform_publisher. Something like this might work:
<node pkg="tf" type="static_transform_publisher" name="laser_to_baselink" args="0 0 0 3.14159 0 0 /laser /base_link 50"/>
Comment by Rayner on 2017-02-02:
That works! Forgot that it is in radian..Thanks for your help.

