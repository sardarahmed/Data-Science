Q:

Filter out messages from a ros bag

Hi,
I'd like to filter out some "bad messages" from my rosbags. I'm using the C++ rosbag API. Should I open the bagfile in read mode and republish the good messages and record them in another bag using 'rosbag record'? Or is there a way to modify the bag in place when it's in read or write mode?
I've gone through the C++ API of rosbag a bit, I couldn't find examples similar to what I want to do. Thanks.
Update:
Is there a method to find out the list of topics that are present in the bag and other statistics through the API?
Is there a way to find out which topic, a particular message instance is from while iterating over them in a boost foreach loop as shown in the example here

Originally posted by 2ROS0 on ROS Answers with karma: 1133 on 2016-08-01
Post score: 2

A:

I opened the bag file in read mode and used the rosbag::View class to look at each topic individually. Then saved all the messages into an object I'm more comfortable with (std::vector for instance). It's based off of the example on this page in the Wiki.
And so perform all operations/logic on the more familiar data structure and then open a new bag file in write mode into which you can add all the required messages.
This is a roundabout way to do it, but I couldn't find a method in the API to: 1. find out which topic a particular message is coming from (if I were to view all topics at once in a single for loop) or 2. modify the messages in a particular topic in place or query what topics are present in a bag and other things like that.

Originally posted by 2ROS0 with karma: 1133 on 2016-08-02
This answer was ACCEPTED on the original site
Post score: 0

