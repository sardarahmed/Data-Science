Q:

viso2 stereo odometry with sample bagfile

Hello and good evening,
i am trying to run the stereo odometer from the viso2 package with the provided bagfile "test.bag" on the viso2 ros page.
I do a remapping in the rosbag play to suit the right topics in my launch file.

rosbag play -l test.bag /stereo_forward/left/image_raw:=/camera/left/image_raw /stereo_forward/right/image_raw:=/camera/right/image_raw /stereo_forward/left/camera_info:=/camera/left/camera_info /stereo_forward/right/camera_info:=/camera/right/camera_info

after that i call my launchfile via

roslaunch stereo_VISO2_test.launch

<arg name="camera" default="camera" /> <!-- The namespace where images are published -->

<param name="/use_sim_time" value="false"/>

<!-- **********Run the ROS package stereo_image_proc********** -->
<group ns="$(arg camera)" >
    <node pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc">
    </node>
</group>

<!-- **********Run the viso2_ros package********** -->
<node pkg="viso2_ros" type="stereo_odometer" name="stereo_odometer" output="screen">
    <remap from="stereo" to="$(arg camera)"/>
    <remap from="image" to="image_rect"/>
    <param name="odom_frame_id" value="odom"/>
    <param name="base_link_frame_id" value="base_link"/>
    <param name="publish_tf" value="true"/>
</node>

the problem i am facing now is that if i go into rviz and try to look at the motion published in the tf odom->base_link the motion is really bad and twitchy and does not look like the movement in the image_rect images at all. I allready checked the disparity of the rectified images and they look nice. "really nice camera used probably :-)"
Can somebody help me maybe with the parameters for the provided bag file or other setting i might be missing.
Thanks for the help in advance and excuse my bad spelling/language. I give my best :-)

Originally posted by moody on ROS Answers with karma: 31 on 2016-02-10
Post score: 0

A:

Hi moody,
there are three major problem sources:

Frame rate: viso2 works better with high framerates or small displacements. It was originally designed for a forward looking camera.

Computation time: check that the computer where the node is running is not 100% busy.

Texture/Illumination conditions: not only the disparity image has to be good, but also the texture in order to extract good features.

In a nutshell, it is a visual odometer and it will drift over time. It is better that you fuse it with other sensors than using it alone.

Originally posted by Miquel Massot with karma: 1471 on 2016-03-15
This answer was ACCEPTED on the original site
Post score: 0

