Q:

navigation stack

When i run the navigation stack I get this error
[ WARN] [1351800032.265951422]: Waiting on transform from /base_link to /world to become available before running costmap, tf error:
I get this error only if I use a static map.
The fact is that I never use a frame /world so I can't figure out why that transformation is needed.
This is my local costmap configuration file:
local_costmap:
      global_frame: /map
      robot_base_frame: /base_link
      update_frequency: 5
      publish_frequency: 1
      static_map: false
      rolling_window: true
      width: 1.0
      height: 1.0
      resolution: 0.1

This is my common params configuration file:
obstacle_range: 1.0
raytrace_range: 1.5
robot_radius: 0.1
inflation_radius: 0.1
transform_tolerance: 0.3

observation_sources: laser_scan_sensor 

laser_scan_sensor: {sensor_frame: /ultrasonic_sensor, data_type: LaserScan, topic: scan, marking: true, clearing: true}

This is my global costmap configuration file:
 global_costmap:
      global_frame: /map
      robot_base_frame: /base_link
      update_frequency: 2
      static_map: true
      rolling_window: false
      width: 6.0
      height: 6.0

This is my move_base.launch file:
<launch>

  <param name="map_file_name" value="$(find nxt_lejos_map_server)/mymap.svg"/>
  <node pkg="nxt_lejos_map_server" 
    type="nxt_lejos_map_server" 
    args="org.lejos.ros.nodes.PublishOccupancyMap" 
    name="nxt_lejos_map_server" 
    output="screen" />
    
     <!--- Run AMCL -->
  <!--- <include file="$(find amcl)/examples/amcl_omni.launch" /> -->
  
  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find nxt_lejos_navigation)/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find nxt_lejos_navigation)/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find nxt_lejos_navigation)/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find nxt_lejos_navigation)/global_costmap_params.yaml" command="load" />

    <rosparam file="$(find nxt_lejos_navigation)/base_local_planner_params.yaml" command="load" />
    
    <param name="controller_frequency" value="5.0"/>
  </node>
</launch>

Originally posted by camilla on ROS Answers with karma: 255 on 2012-11-01
Post score: 0

Original comments
Comment by weiin on 2012-11-01:
sorry , could you repost the error? It does not seem to be showing
Comment by Lorenz on 2012-11-01:
That was just a bug in answers.ros.org. I reformatted the error, now it's visible. @camilla can you please reindent your config correctly. Indentation matters in this case and if it is not indented correctly, parameters might be initialized wrong which might be one reason for your error.
Comment by camilla on 2012-11-02:
Done!this is my indentation.

A:

The problem is likely in PublishOccupancyMap.java The frame_id for the occupancy grid has been set to /world in line 72. You might have to change all your references to /map frame to /world instead. (Or go through all the nxt_lejos_map_server codes to check for references to /world and change to /map)

Originally posted by weiin with karma: 2268 on 2012-11-04
This answer was ACCEPTED on the original site
Post score: 0

