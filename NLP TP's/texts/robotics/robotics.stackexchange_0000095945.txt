Q:

Missing packages after installing rosdep based on python3-rosdep2 in Noetic

After the installation of Noetic on ubuntu 20.04, I started to redo the tutorials. When I wanted to see the dependencies of beginner_tutorials package, I couldn't use the #rosdep command!
pourya@pourya:~/catkin_ws$ rospack depends beginner_tutorials 
[rospack] Error: the rosdep view is empty: call 'sudo rosdep init' and 'rosdep update'

pourya@pourya:~/catkin_ws$ rosdep init
Command 'rosdep' not found, but can be installed with:

sudo apt install python3-rosdep2

pourya@pourya:~/catkin_ws$ sudo apt install python3-rosdep2
pourya@pourya:~/catkin_ws$ rosdep init

ERROR: Rosdep experienced an error: The read operation timed out
Please go to the rosdep page [1] and file a bug report with the stack trace below.
[1] : http://www.ros.org/wiki/rosdep

rosdep version: 0.18.0

Traceback (most recent call last):
  File '/usr/lib/python3/dist-packages/rosdep2/main.py', line 144, in rosdep_main
    exit_code = _rosdep_main(args)
  File '/usr/lib/python3/dist-packages/rosdep2/main.py', line 426, in _rosdep_main
    return _no_args_handler(command, parser, options, args)
  File '/usr/lib/python3/dist-packages/rosdep2/main.py', line 435, in _no_args_handler
    return command_handlers[command](options)
  File '/usr/lib/python3/dist-packages/rosdep2/main.py', line 579, in command_init
    data = download_default_sources_list()
  File '/usr/lib/python3/dist-packages/rosdep2/sources_list.py', line 331, in download_default_sources_list
    f = urlopen(url, timeout=DOWNLOAD_TIMEOUT)
  File '/usr/lib/python3.8/urllib/request.py', line 222, in urlopen
    return opener.open(url, data, timeout)
  File '/usr/lib/python3.8/urllib/request.py', line 525, in open
    response = self._open(req, data)
  File '/usr/lib/python3.8/urllib/request.py', line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File '/usr/lib/python3.8/urllib/request.py', line 502, in _call_chain
    result = func(*args)
  File '/usr/lib/python3.8/urllib/request.py', line 1369, in https_open
    return self.do_open(http.client.HTTPSConnection, req,
  File '/usr/lib/python3.8/urllib/request.py', line 1330, in do_open
    r = h.getresponse()
  File '/usr/lib/python3.8/http/client.py', line 1332, in getresponse
    response.begin()
  File '/usr/lib/python3.8/http/client.py', line 303, in begin
    version, status, reason = self._read_status()
  File '/usr/lib/python3.8/http/client.py', line 264, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), 'iso-8859-1')
  File '/usr/lib/python3.8/socket.py', line 669, in readinto
    return self._sock.recv_into(b)
  File '/usr/lib/python3.8/ssl.py', line 1241, in recv_into
    return self.read(nbytes, buffer)
  File '/usr/lib/python3.8/ssl.py', line 1099, in read
    return self._sslobj.read(len, buffer)
socket.timeout: The read operation timed out

pourya@pourya:~/catkin_ws$ rosdep init
ERROR: default sources list file already exists:
    /etc/ros/rosdep/sources.list.d/20-default.list
Please delete if you wish to re-initialize

Regarding the message in the terminal, I installed the rosdep. Now, it seems a lots of packages are missed such as rospy and ...
pourya@pourya:~/catkin_ws/src$ catkin_create_pkg beginner_tutorials rospython roscpp 
Created file beginner_tutorials/package.xml
Created file beginner_tutorials/CMakeLists.txt
Created folder beginner_tutorials/include/beginner_tutorials
Created folder beginner_tutorials/src
Successfully created files in /home/pourya/catkin_ws/src/beginner_tutorials. Please adjust the values in package.xml.
pourya@pourya:~/catkin_ws/src$ cd ..
pourya@pourya:~/catkin_ws$ catkin_make
Base path: /home/pourya/catkin_ws
Source space: /home/pourya/catkin_ws/src
Build space: /home/pourya/catkin_ws/build
Devel space: /home/pourya/catkin_ws/devel
Install space: /home/pourya/catkin_ws/install
####
#### Running command: "cmake /home/pourya/catkin_ws/src -DCATKIN_DEVEL_PREFIX=/home/pourya/catkin_ws/devel -DCMAKE_INSTALL_PREFIX=/home/pourya/catkin_ws/install -G Unix Makefiles" in "/home/pourya/catkin_ws/build"
####
CMake Warning (dev) in CMakeLists.txt:
  No project() command is present.  The top-level CMakeLists.txt file must
  contain a literal, direct call to the project() command.  Add a line of
  code such as

    project(ProjectName)

  near the top of the file, but after cmake_minimum_required().

  CMake is pretending there is a "project(Project)" command on the first
  line.
This warning is for project developers.  Use -Wno-dev to suppress it.

-- Using CATKIN_DEVEL_PREFIX: /home/pourya/catkin_ws/devel
-- Using CMAKE_PREFIX_PATH: /home/pourya/catkin_ws/devel;/opt/ros/noetic
-- This workspace overlays: /home/pourya/catkin_ws/devel;/opt/ros/noetic
-- Found PythonInterp: /usr/bin/python3 (found suitable version "3.8.2", minimum required is "3") 
-- Using PYTHON_EXECUTABLE: /usr/bin/python3
-- Using Debian Python package layout
-- Using empy: /usr/lib/python3/dist-packages/em.py
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /home/pourya/catkin_ws/build/test_results
-- Forcing gtest/gmock from source, though one was otherwise available.
-- Found gtest sources under '/usr/src/googletest': gtests will be built
-- Found gmock sources under '/usr/src/googletest': gmock will be built
-- Found PythonInterp: /usr/bin/python3 (found version "3.8.2") 
-- Using Python nosetests: /usr/bin/nosetests3
-- catkin 0.8.5
-- BUILD_SHARED_LIBS is on
-- BUILD_SHARED_LIBS is on
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- ~~  traversing 1 packages in topological order:
-- ~~  - beginner_tutorials
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- +++ processing catkin package: 'beginner_tutorials'
-- ==> add_subdirectory(beginner_tutorials)
-- Could NOT find rospython (missing: rospython_DIR)
-- Could not find the required component 'rospython'. The following CMake error indicates that you either need to install the package with the same name or change your environment so that it can be found.
CMake Error at /opt/ros/noetic/share/catkin/cmake/catkinConfig.cmake:83 (find_package):
  Could not find a package configuration file provided by "rospython" with
  any of the following names:

    rospythonConfig.cmake
    rospython-config.cmake

  Add the installation prefix of "rospython" to CMAKE_PREFIX_PATH or set
  "rospython_DIR" to a directory containing one of the above files.  If
  "rospython" provides a separate development package or SDK, be sure it has
  been installed.
Call Stack (most recent call first):
  beginner_tutorials/CMakeLists.txt:10 (find_package)

-- Configuring incomplete, errors occurred!
See also "/home/pourya/catkin_ws/build/CMakeFiles/CMakeOutput.log".
See also "/home/pourya/catkin_ws/build/CMakeFiles/CMakeError.log".
Invoking "cmake" failed

How can I fix this issue?

Originally posted by Pourya on ROS Answers with karma: 23 on 2020-05-23
Post score: 2

Original comments
Comment by gvdhoorn on 2020-05-24:
I've removed the # from the question title.
This is not twitter.

A:

python3-rosdep2
Command 'rosdep' not found, but can be installed with:
sudo apt install python3-rosdep2

Ah that's awkward. The package you actually want to install is python3-rosdep. The package python3-rosdep2 is a (possibly incompatibly) version that comes from upstream Debian packages. So first remove python3-rosdep2 and install python3-rosdep.

catkin_create_pkg beginner_tutorials rospython roscpp

I think there might be a typo here; it should be rospy instead of rospython. Where did this command come from?

Originally posted by sloretz with karma: 3061 on 2020-05-23
This answer was ACCEPTED on the original site
Post score: 9

Original comments
Comment by gaya on 2020-05-23:
I also destroyed my installation by getting python3-rosdep2. The reason is that this is the package that's suggested by Ubuntu:
$ rosdep update

Command 'rosdep' not found, but can be installed with:

sudo apt install python3-rosdep2

As long as I stick to the correct rosdep package everything is fine, so thanks for the answer.
Comment by Pourya on 2020-05-23:
Thank you.
That's right.
Maybe it was a suggestion from Ubuntu and doesn't solve the ROS command missing in Noetic eg. rosdep and rospack
I hope the python3-rosdep will be included in the Noetic updates.
Comment by gvdhoorn on 2020-05-24:
Bah, another case of “upstream packages” becoming increasingly a problem.
It's really annoying Ubuntu keeps suggesting the upstream packages.
Comment by Pourya on 2020-05-24:
Exactly: https://wiki.ros.org/UpstreamPackages
Comment by sloretz on 2020-05-26:
Opened a ticket to talk about one way to solve this https://github.com/ros-infrastructure/rosdep/issues/763
Comment by hillripper21 on 2020-06-03:
Agreed, installling rosdep2 broke a lot of stuff on Ubuntu 20.04, ROS Noetic. Needed to do a fresh install of ROS. Really should be fixed to recommend rosdep and not rosdep2
Comment by gvdhoorn on 2020-06-04:
At this point it looks like it's something only Canonical can do, as the suggestions system is largely automated.
As long as the upstream version (ie: rosdep2) gets found by that tool first, it's going to recommend installing it.

