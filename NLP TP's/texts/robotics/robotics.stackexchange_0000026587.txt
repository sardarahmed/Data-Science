Q:

Error Parameter is not an int - issue loading from sdf

Trying to load an int with a model plugin.
sdf:
<plugin name="catvehicle_sim" filename="libcatvehicle_sim.so">
    <robotNamespace>/</robotNamespace>
    <speed>20</speed>
</plugin>

Try to access with:
 speed = _sdf->GetElement("speed")->GetValueInt();

gives error:
Error [Param.cc:514] Parameter [speed] is not an int

Using Gazebo 1.5 with ROS groovy. What is the correct way to do this? I could just convert from a string but it seems like I am missing something easy. Should I be using attributes?

Originally posted by FiliusFortunae on Gazebo Answers with karma: 43 on 2013-07-23
Post score: 3

Original comments
Comment by AndreiHaidu on 2013-07-23:
This happened to me as well, not only for int, bool as well. I know getting the value as double works, and then you can change it to int.

A:

I can replicate the problem with Gazebo 1.5.0 in Groovy and in standalone Gazebo 1.8.6.  As @AndreiHaidu suggests, retrieving it as a double is a reasonable workaround.  E.g.:
int speed = (int)_sdf->GetElement("speed")->GetValueDouble();

This problem is not present (i.e., the call to retrieve the parameter as an int works) in gazebo 1.9.x with sdformat 1.4.4.  So it would seem that the bug was fixed during the extraction of the SDF parser into the sdformat package.
Given the relative ease of the workaround, we're unlikely to fix this bug in older versions.

Originally posted by gerkey with karma: 1414 on 2013-07-23
This answer was ACCEPTED on the original site
Post score: 0

