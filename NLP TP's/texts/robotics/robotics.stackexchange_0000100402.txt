Q:

ROS2: What is the purpose of a guard condition?

I was browsing the rclpy repository the other day and found this example which implements something called a guard condition. What is the use case for something like this? Is this a single use branching statement? Is it a multi threading thing?

Originally posted by Per Edwardsson on ROS Answers with karma: 501 on 2021-10-27
Post score: 2

A:

The low level rcl functionality seems to be interrupting threads waiting on wait sets by allowing the guard condition to become ready when being triggered by another thread.
The rclpy implementation seems to add a callback to be executed by the executor in this case.
I have seen guard conditions being used for implementing executors which can be interrupted while waiting for work to become ready, but not much else (maybe someone more experienced knows more use cases?).
I dont exactly know if triggering the guard condition works only if it is currently waited on or if the state is being stored and reset somehow.
Update: After some tests and looking at the rcl guard condition tests it seems that a guard condition remains triggered until it is waited on.

Originally posted by Deric with karma: 18 on 2023-01-11
This answer was ACCEPTED on the original site
Post score: 0

