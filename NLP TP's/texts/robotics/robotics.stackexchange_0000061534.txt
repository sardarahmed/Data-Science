Q:

A display question about Opencv&ROS

Hello , I am learning how to use OpenCV in ROS recently , now I meet a question about display the image .
Here is my code :
ROS_INFO_STREAM("node1");
cv::namedWindow("test",1);
ROS_INFO_STREAM("node2");

But after I run the code , there is not window display . The terminal just print these information :
[ INFO] [1407293765.605951849]: node1
[ INFO] [1407293765.629249378]: node2

I can not understand why . Can you help me ?
Thank you !

Originally posted by Lau on ROS Answers with karma: 47 on 2014-08-05
Post score: 0

Original comments
Comment by Mehdi. on 2014-08-05:
does it show when you add cd::waitKey(0); after cv::namedWindow ?
Comment by Lau on 2014-08-06:
Yes , It occurs . But why ? I wrote " ros::spin() " at the end of "int main(...) ", does the code running in a loop ?
Comment by Lau on 2014-08-06:
I ran the code in http://wiki.ros.org/cv_bridge/Tutorials/UsingCvBridgeToConvertBetweenROSImagesAndOpenCVImages , it still did not occur the window .

A:

If you check the code, image_converter.cpp the images are shown in line 53
  51     // Update GUI Window
  52     cv::imshow(OPENCV_WINDOW, cv_ptr->image);
  53     cv::waitKey(3);

cv::waitKey handles any windowing events, such as creating windows or showing images.
if you call cv::imshow() in a loop through video frames, without following up each draw with cv::waitKey(3) nothing appears on screen, because highgui is never given time to process the draw requests from cv::imshow(). If you insist on showing an empty window before getting the images add
cv::waitKey(3); 

after
cv::namedWindow("test",1);

you can replace 3 by any other small number, it expresses how long opencv should wait in milliseconds.

Originally posted by Mehdi. with karma: 3339 on 2014-08-06
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Lau on 2014-08-06:
Yes , the window occurred . Thank you . Maybe it should wait for several ms after imshow or namedwindow in Linux . I never met this problem in win7 with VS or QtCreator .

