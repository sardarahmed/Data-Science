Q:

Cannot solve rosdistro error: Unable to handle format version 2

Getting error during installing of ROS on pcDuino following instruction on LinkSprite or on pcDuino sites "install ros groovy on pcduino"
On step "Initialize rosdep", command "rosdep update" - an error raised:
ERROR: Rosdep experienced an internal error: Unable to handle format version 2, please update rosdistro
Please go to the rosdep page [1] and file a bug report with the stack trace below.

Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 118, in rosdep_main
    exit_code = _rosdep_main(args)
  File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 257, in _rosdep_main
    return _no_args_handler(command, parser, options, args)
  File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 265, in _no_args_handler
    return command_handlers[command](options)
  File "/usr/lib/pymodules/python2.7/rosdep2/main.py", line 422, in command_update
    error_handler=update_error_handler)
  File "/usr/lib/pymodules/python2.7/rosdep2/sources_list.py", line 414, in update_sources_list
    for d, dist in get_index().distributions.iteritems():
  File "/usr/lib/pymodules/python2.7/rosdep2/rosdistrohelper.py", line 58, in get_index
    _RDCache.index = rosdistro.get_index(_RDCache.index_url)
  File "/usr/lib/pymodules/python2.7/rosdistro/__init__.py", line 105, in get_index
    return Index(data, base_url)
  File "/usr/lib/pymodules/python2.7/rosdistro/index.py", line 47, in __init__
    assert self.version == 1, 'Unable to handle format version %d, please update rosdistro' % int(data['version'])
AssertionError: Unable to handle format version 2, please update rosdistro

Configuration:
pcDuino V2, extended to 4GB;
Lubuntu - Linaro 12.07 or Libaro 12.11 (upgrated by "apt-get upgrade")
Original images or images from 20140620;
Booted from NAND or from MMC;
Found similar issues  in other threads but didn't manage to solve as suggested.

Originally posted by satr on ROS Answers with karma: 13 on 2014-08-03
Post score: 0

Original comments
Comment by ahendrix on 2014-08-03:
I suspect you're using an outdated version of the python-rosdep package. I've bumped your karma so that you can make links - can you link to the tutorial you're following?
Comment by satr on 2014-08-04:
Tutorials:
http://www.pcduino.com/install-ros-groovy-on-pcduino/
http://learn.linksprite.com/pcduino/ros/install-ros-groovy-on-pcduino/
Command " sudo apt-get install --reinstall python-rosdep" among output lines gives following:
. . .
Preparing to replace python-rosdep 0.10.18-1 (using .../python-rosdep_0.10.18-1_all.deb) ...
. . .
Setting up python-rosdep (0.10.18-1) ...

A:

Those instructions look pretty outdated; in particular, they're pointing you to the old ahendrix-mirror repository on package.ros.org, which hasn't been updated in about a year, and has since been moved to packages.namniart.com.
Please update your /etc/apt/sources.list.d/ros-latest.list to:
deb http://packages.namniart.com/repos/ros precise main

Originally posted by ahendrix with karma: 47576 on 2014-08-04
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by satr on 2014-08-04:
This work for me, thank you!
In general now I followed an instruction http://wiki.ros.org/groovy/Installation/UbuntuARM
The only difference I installed ros-groovy-ros-comm. Now ros-groovy-ros-base cannot be found if I try to install it.
Comment by satr on 2014-08-04:
In addition: before run "sudo apt-get update" I commented lines with "http://www.wiimu.com" in a file /etc/apt/sources.list; When started roscore - an error raised "locale::facet::_S_create_c_locale name not valid";this command helped (but not sure if it's correct): sudo locale-gen en_US en_US.UTF-8
Comment by satr on 2014-08-04:
Tried to reinstall (on clean system - recreating bootable MMC as copy of NAND). Cannot install ros-groovy-ros-base by "sudo apt-get install ros-groovy-ros-base": "E: Unable to locate package ros-groovy-ros-base"
Comment by ahendrix on 2014-08-04:
Yes - the ros-groovy-ros-base metapackage is missing. I have the build server running again and I'm looking into it.
Comment by ahendrix on 2014-08-04:
Fixed. You should be able to install ros-groovy-ros-base after running an apt-get update.
Comment by satr on 2014-08-05:
Now I was able to install ros-groovy-ros-base. Thank you. When run of roscore raised the error I exported LC_ALL=C and added this command to bashrc: echo "export LC_ALL=C" >> ~/.bashrc

