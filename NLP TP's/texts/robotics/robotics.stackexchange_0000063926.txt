Q:

How does Mavros RC override work?

Hi,
I've been trying to work with the mavros, but the wiki doesn't have a lot of detail about it. I'm using an Iris and connecting with roslaunch mavros apm2_radio.launch.
First I'm setting SYSID_MYGCS to 1, as specified at the bottom of this github issue. Then I'm publishing messages on the command line
$ rosrun mavros mavparam set SYSIS_MYGCS 1
$ rostopic pub -1 /mavros/rc/override mavros/OverrideRCIn '[1500, 1500, 1500, 1500, 1325, 1560, 2000, 1500]'

I'm testing RC by leaving the quadcopter in an unarmed state, connecting a gimbal to RC Channel 6 using APM Mission Planner, then publishing various values on Channel 6 (1560 in the example code) and trying to get the gimbal to move. What happens now is that

When the quadcopter is first powered I have control of the gimbal using our RC controller, channel 6
After setting the SYSID_MYGCS value I still have control with the RC controller
Publishing a mavros/rc/override message with a small deviation in the Channel 6 value does not change the gimbal position, but it does make it so that the RC controller can no longer affect the gimbal position
Publishing messages with a variety of Channel 6 values has no effect, except when there is a large change of >150 in the Channel 6 measurement. This makes the gimbal travel fully in one direction and stay stuck there until you send a largely different Channel 6 value that makes the gimbal rail in the other direction.

I feel like I just don't understand what mavros/rc/override is sending to the quadcopter. The gimbal is perfectly controllable using the RC controller before we publish anything to mavros/rc/override, so we know the gimbal is commandable with Channel 6.
I apologize if this is a drone-discuss (or other quadcopter forum) question, not a mavros question, but I don't have a good enough understanding of what mavros is calling under the surface in order to usefully search the drone-discuss forums. If someone has a link to useful non-ROS information I'd welcome it...

Originally posted by Eric Schneider on ROS Answers with karma: 60 on 2014-11-09
Post score: 2

Original comments
Comment by tonybaltovski on 2014-12-29:
Did you figure this out?
Comment by Eric Schneider on 2014-12-30:
Unfortunately not, I'm not sure what's going on with the RC topics. I've been working on other stuff in the meantime.

A:

The mavros/rc/override is exactly what you think, it directly overrides the RC that would be sent via the transmitter.  The values typically range from 1000 to 2000.  If you want give control back to your RC transmitter or ignore a certain channel, publish 65535 on the channel.  Can you check what values are coming in on mavros/rc/in when you control it using the RC transmitter?

Originally posted by tonybaltovski with karma: 2549 on 2014-12-30
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Eric Schneider on 2014-12-30:
I'm away from the quadcopter for a couple weeks, but I'll look into it when I get back, thanks!
Comment by Vinh K on 2016-03-02:
I have similar problems I can seem to make the override work. The /mavros/rc/in topic displays changes when I use RC but when I run the command
rostopic pub -1 /mavros/rc/override mavros_msgs/OverrideRCIn '[1500, 1500, 1500, 1500, 1325, 1560, 2000, 1500]

it is not working.
Comment by Hugo Sardinha on 2017-08-02:
Hi Vinh, Have you managed to solve this. I have the same problem. cheers
Comment by Vinh K on 2017-08-02:
my suggestion, is RC override will work with PX4 firmware. But do not use it. It gives unexpected result. Sometimes it will go up smoothly while other time it will jump very fast and dangerous.
Comment by Hugo Sardinha on 2017-08-02:
so how do you control yaw using mavros? say imagine you want to rotate 180 degrees around z

