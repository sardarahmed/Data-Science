Q:

How to setup ROS for controlling servos

I'm new to ROS, and I'm trying to create a ROS setup for a simple 4 legged robot, with 2 DOF per leg. Since there's no physical robot, I'll have to simulate everything in Gazebo. However, I'm not really sure where to begin. I've reading a lot of the ROS tutorials, but they're either too low-level (browsing the file system, creating a package, etc) or too high-level (how to navigate using SLAM and planners). I can't find anything on "how to setup a basic project for your robot".
Also, there are a lot of disconnects between ROS and Gazebo. Following the Gazebo tutorials, I've been able to model my platform and apply torque to joints to move limbs, but I'm unsure how to simulate a servo PID and actuate joints from ROS. Where do I begin?
Also, Gazebo seems to use SDF to model everything, while ROS uses URDF. Which should I use? I've already modelled my platform in SDF. Am I going to have to rewrite it in URDF to get it to work with ROS?

Originally posted by Cerin on ROS Answers with karma: 940 on 2015-04-19
Post score: 0

Original comments
Comment by Gaurav Suryawanshi on 2018-06-02:
Here I have a code for servo_controller which may help. You may add comments for further doubts. Here I've used urdf files for convience, but sdf files can also be integrated. There is also a ros package which controls the servo which will aid you further
https://github.com/Gauraviitkgp/Servo-Contro

A:

I do not really know about legged robots, but they are normally not just simple.
But I guess a good start would be to check out an existing legged robot like the Nao:
http://wiki.ros.org/action/show/nao?action=show&redirect=Robots%2FNao
The control on your robot you need to do on your own, also the state output, but you need to check for the used topics so that they might fit available software.
SDF or URDF:
Use URDF! You maybe read that SDF is so nice, actually true, but the Robot State Publisher does not support it (yet?)!
Also if you use XACRO macros you can create SDF from your URDF. So I would definitely go for URDF,
(I started with SDF because I also read the Gazebo Documentation where they say, that SDF is super awesome etc... but they do not lose a word about not being supported by ROS Tools ...)
Regards,
Christian

Originally posted by cyborg-x1 with karma: 1376 on 2015-04-20
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Cerin on 2015-04-20:
The only SDF I've written is for the physical model, which is just the 4 legs and body. Is there no way to use that from ROS? Isn't the SDF just used to render the robot in Gazebo? Why would ROS need to support it?
Comment by cyborg-x1 on 2015-04-21:
Check out the robot state publisher, it will publish the static transforms of your robot, so that it can be displayed in rviz and other nodes can use the tf::transforms to do calculations on them. The transforms for the joint states you will have to publish with your own node (on the real robot).
Comment by cyborg-x1 on 2015-04-21:
For some robot types there are already existing plugins like the diff drive plugin in ros gazebo plugins which will publish the states from ros to gazebo. The question is: "Is there one for a 4 leged robot?" I do not know but I am in doubt that there is one,so maybe you have to write it on your own.
Comment by cyborg-x1 on 2015-04-21:
See http://wiki.ros.org/robot_state_publisher as example.

