Q:

How to fix pr2_kinect_empty_world broken when collision?

When I add a box,and drag it to make a collision with pr2, sometimes caused gazebo to crash.
Here is the crash picture:

And here is the crash error messages:
  [ERROR] [1333361033.522978054, 165.891000000]: TF_NAN_INPUT: Ignoring transform for child_frame_id "torso_lift_link" from authority "/robot_state_publisher" because of a nan value in the transform (-nan -nan -nan) (0.000000 0.000000 0.000000 1.000000)

How to fix it?
Thank you~

Originally posted by sam on ROS Answers with karma: 2570 on 2012-04-02
Post score: 0

A:

What you are seeing is probably the physics solver destabilizing, leading to NaN's in link velocities and eventually segmentation fault of the simulator.  For objects with deep interpenetration, there is no known cure in ODE/Gazebo right now.
There is, however, something I am experimenting with that may potentially reduce or eliminate these types of numerical "explosion" by using a type of pose projection correction for interpenetrating bodies.   You can see the improved interpenetration correction behavior in the following videos for simple shapes in collision and PR2 in collision.  Unfortunately, there is no free lunch in this case, in complex dynamical scenarios for PR2, completely removing the original ODE interpenetration correction introduces limit cycles and errors in overall dynamic behavior of the robot: i.e. see PR2 drift backwards in first 3 seconds of this video.  Any comments or suggestions are welcome here.

Originally posted by hsu with karma: 5780 on 2012-04-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by sam on 2012-04-02:
So pose projection correction will solve the problem I have met?
Comment by hsu on 2012-04-07:
maybe, it's experimental, so I wouldn't hold my breadth for it.  But for now try not to spawn models that overlaps each other.

