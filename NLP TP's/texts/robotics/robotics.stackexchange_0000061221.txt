Q:

problem publishing tf map->base_link

Hi
I wrote my own localization and I figured out hat amcl is publishing map->odom and not map->base_link.
Which is strange but on the end I had to do the same by computing first the difference to publish map->odom->base_link.
Can anyone help my out to clarify this situation.
Thanks

Originally posted by Markus Bader on ROS Answers with karma: 847 on 2014-07-28
Post score: 2

Original comments
Comment by Moda on 2014-07-28:
How did you managed to have map->odom->base_link ? I'm struggling to have map->odom (I already have odom->base_link)
Comment by Markus Bader on 2014-07-29:
Yes my stuff is working.
I had a look how it is done in amcl_node.cpp line 1125-1160.
Comment by lalten on 2018-02-08:
Thanks, that's what I was looking for. Here is a link to the AMCL code with updated line #: http://docs.ros.org/lunar/api/amcl/html/amcl__node_8cpp_source.html#l01356
Comment by Markus Bader on 2018-09-06:
Hi lalten!
To not edit AMCL, what it does makes perfect sense, have a look at the figures on the bottom of http://wiki.ros.org/amcl and on domhege answer below.

A:

This is unintuitively strange indeed, but correct. The reason for that is that TF can only form a tree, thus having /map->/base_link and /odom->/base_link there would be a node with two parents.
More details are here: http://www.ros.org/reps/rep-0105.html

Originally posted by dornhege with karma: 31395 on 2014-07-28
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Markus Bader on 2014-07-29:
Thanks, now a day later it is clear. It also solves the problem of different update rates and allows a native localization base on the last localization update and odom values.

