Q:

CMake error : Attempt to add a custom rule to output

Hi everybody,
I am trying to migrate the face_recognition package to catkin but I have lots of problems.
I tried with : http://wiki.ros.org/catkin/migrating_from_rosbuild
but it doesn't work. So I create a new catkin workspace and I tried to add every folder one by one as if it was a new project. When I try to do a catkin_make I have this message :
CMake Error: Attempt to add a custom rule to output "/home/www/ros/devel/include/face_recognition/FaceRecognitionAction.h.rule" which already has a custom rule.
CMake Error: Attempt to add a custom rule to output "/home/www/ros/devel/share/common-lisp/ros/face_recognition/msg/FaceRecognitionAction.lisp.rule" which already has a custom rule.
CMake Error: Attempt to add a custom rule to output "/home/www/ros/devel/lib/python2.7/dist-packages/face_recognition/msg/_FaceRecognitionAction.py.rule" which already has a custom rule.
-- Configuring incomplete, errors occurred!
make: *** [cmake_check_build_system] Erreur 1
Invoking "make cmake_check_build_system" failed

My Cmakelist.txt is like this:
cmake_minimum_required(VERSION 2.8.3)
project(face_recognition)
find_package(catkin REQUIRED COMPONENTS
actionlib
  actionlib_msgs
  cv_bridge
  image_transport
  #opencv2
  roscpp
  roslib
  rospy
  std_msgs
)
 add_message_files(
    FILES
    FaceRecognitionAction.msg
    #FaceRecognitionActionFeedback.msg
    #FaceRecognitionActionGoal.msg
    #FaceRecognitionActionResult.msg
    #FaceRecognitionFeedback.msg
    #FaceRecognitionGoal.msg
    #FaceRecognitionResult.msg
    #FRClientGoal.msg
 )

 find_package( OpenCV REQUIRED )

   add_action_files(
      FILES
      FaceRecognition.action
    )

   ## Generate added messages and services with any dependencies listed here
   generate_messages(
     DEPENDENCIES
     actionlib_msgs
     std_msgs
    )
     include_directories(  ${catkin_INCLUDE_DIRS}  ${OpenCV_INCLUDE_DIRS} )
     add_executable(Fserver src/face_recognition.cpp)
     add_executable(Fclient src/face_rec_client.cpp)

Can somebody help me please?
thank you

Originally posted by RosFaceNoob on ROS Answers with karma: 42 on 2014-07-28
Post score: 2

Original comments
Comment by BennyRe on 2014-07-28:
Please post your CMakeLists.txt
Comment by RosFaceNoob on 2014-07-28:
I edited my post

A:

Don't name your message FaceRecognitionAction.msg.
This name conflicts with your FaceRecognition.action because when the action gets compiled to message files a message called FaceRecognitionAction.msg will be created and this new message conflicts with your FaceRecognitionAction.msg.
So, simple solution: Rename your message.

Originally posted by BennyRe with karma: 2949 on 2014-07-28
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by RosFaceNoob on 2014-07-28:
I rename my action as FaceReco.action and it worked. but now I have a message :
/home/www/ros/src/face_recognition/src/face_rec_client.cpp:12:52: fatal error: face_recognition/FaceRecognitionAction.h : Any file or folder of this type.
I try to include a .h that I put in the folder include but I guess that's not where  I should put it?
Comment by BennyRe on 2014-07-29:
Sorry, I don't get your new problem from this description. What is the exact error message? What header files do you put in include. If include is the wrong place, where should header files go otherwise?
Comment by RosFaceNoob on 2014-07-29:
The error message says that the file FaceRecognitionAction.h doesn't exist but actually it exists and it's in my include folder. I don't know where I should put it so the program can find it.
In the include file, I put all my headers. I don't know where else should I put them.
Comment by BennyRe on 2014-07-29:
Do you mean the FaceRecognitionAction.h that was auto created from your action? This one shouldn't be in YOUR include directory. This one should be in devel/include automatically.
Comment by RosFaceNoob on 2014-07-29:
I think it's the FaceRecognitionaction.h auto created from my action that also generate messages. I clean the message folder so the message can be built automatically and try to buil again but I still have the error about the FaceRecognitionaction.h missing. My folder devel/include is empty.
Comment by tianb03 on 2015-03-24:
I followed the actionlib tutorial. same problem with @RosFaceNoob. So when I first time compiled the Fibonacci.action, I commented out the add_action_files in CMakelist and copied the msg folder from devel/share to the package folder. Compiled successfully.
Comment by BennyRe on 2015-03-25:
@tianb03 I would recommend you to search for the true reason for your error. Your solution is not very nice and could possibly cause you some trouble afterwards.

