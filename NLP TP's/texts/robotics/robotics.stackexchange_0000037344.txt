Q:

Turtlebot microphone troubleshooting guide

Hello all,
I've had a rather painful time getting the microphone to work on the Asus eeePC 1215n that comes with the turtlebot.  I finally got everything working again, so I'll post here to save others some pain.
Hopefully others will edit this post and add their own notes.
Setup
Asus eePC 1215n running Ubuntu 10.04 that comes with the turtlebot.  Latest patches installed and running ROS electric.
The microphone jack works currently, but the internal mic is misbehaving.  This isn't a problem for me as I'd rather use the external anyway.  If someone else has ideas on how to get this working, please post.
Basic Microphone Configuration
You need to unmute the microphone lines and select the correct profile.

Open volume control properties or launch gnome-volume-control
Run alsamixer and press F4 to go the input section.  Make sure all lines are unmuted (press 'm' to mute/unmute) and the gain is set fairly high.  Alternatively, open sound preferences or run gnome-volume-control and use the "input devices" tab to unmute / adjust levels.
Install pavucontrol and configure things there.

apt-get install pavucontrol
launch pavucontrol
On the "configuration" tab, select "analog stereo duplex + input"
Go to "input devices" tab and make sure your devices are unmuted and gain is fairly high.

Open sound recorder or audacity and try recording a sound to make sure the mic is working.

reference: http://tarnusdrinkscoffee.blogspot.com/2011/03/ubuntu-1010-1215n-built-in-micro.html
Advanced Troubleshooting
Ubuntu has some good resources for troubleshooting microphone problems.
Ubuntu sound troubleshooting guide
Intel-hda specific troubleshooting
Problem: Microphone is not recording
Solution: follow the basic configuration above to unmute everything.
Problem: There's too much static
Solution:
Use alsamixer to adjust your microphone gain
Problem: I only get static on the microphone
Solution:
Try advanced troubleshooting, check to see if you see any ports or connectors under volume control and try the section below if you don't see any.
Problem: Alsa can't see my input devices
Symptoms

No "connectors" or "ports" show up under volume control even though the sliders are still there.
arecord -l lists "0/1" devices
You've tried everything else and it still doesn't work

Solution:
This is the nasty one that took me forever to solve.  The microphone mysteriously stopped working after an upgrade and I couldn't figure out why.
So... you need to follow the intel-hda troubleshooting guide found above.
I solved the problem by editing /etc/modprobe.d/alsa-base.conf and adding the following line to the bottom of the file and then rebooting.

options snd-hda-intel model=basic

The above will make the mic jack work, but may not make the internal mic work.
Problem: the internal mic doesn't work, but the mic jack does
Solution: no clue, I still haven't got this to work.  Try google?

Originally posted by brianpen on ROS Answers with karma: 183 on 2012-01-26
Post score: 2

A:

No Answer Necessary.

Originally posted by tfoote with karma: 58457 on 2012-04-05
This answer was ACCEPTED on the original site
Post score: 0

