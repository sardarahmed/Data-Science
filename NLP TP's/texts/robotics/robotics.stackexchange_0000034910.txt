Q:

Help programming a simulation in stageros

Hi,
I want to program a simulation with stage, where I'd like a robot to move forward till he detects an obstacle, and then, turn until he can continue forward. For that I know I have to subscribe to scan topic and to publish to cmd_vel to make the robot move (thanks, Martin Günther!).
But I don't know how to interact with stage itself. I think I could manage to write the subscribe and publish algorithms with what I learnt from the publisher's and subscriber's tutorials, but once that is done, I'm at a loss as to how execute the simulation. I read some of this link, but I'm still really lost. Any suggestions?
Thanks!

Originally posted by jlo on ROS Answers with karma: 385 on 2011-10-13
Post score: 1

A:

You will need a so-called world file which contains a description of the virtual environment and the characteristics of your simulated robot. The stage package contains a suitable demo world file. You must start Stage with the world file as argument, e.g.
rosrun stage stageros `rospack find stage`/world/willow-erratic.world

Now you can receive on the /base_scan topic and publish to the /cmd_vel topic with your own program.
If you want to create your own world file, you need a position and laser model for your robot and a suitable floor plan (usually a bitmap) that encodes the obstacles. For the exact syntax, you can read the manual or look at the existing world files.

Originally posted by roehling with karma: 1951 on 2011-10-13
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Arkapravo on 2011-10-29:
@Röhling : Nice command for stage, I was using ./stageros from the stage executables - but this is much better ! :-)
Comment by tonyParker on 2014-09-11:
Hi, I stage is not running on my machine , I am using Ubuntu 12.04 and Hydro, when I entered above command it shows this error:
[rosrun] Couldn't find executable named stageros below /opt/ros/hydro/share/stage
Comment by tonyParker on 2014-09-19:
ROS Hydro use stage 4.1.1. for this version try
rosrun stage_ros stageros ..............

