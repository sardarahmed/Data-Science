Q:

Move_base observation_sources data_type uses wrong value

Hi,
iam trying to run the navigation stack with stage, but my move_base is not using the right data_type in its observation_sources.
I get the following error:
[ERROR] [1392014064.082396840, 3.200000000]: Client [/move_base] wants topic /base_scan to have datatype/md5sum [sensor_msgs/PointCloud/d8e9c3f5afbdd8a130fd1d2763945fca], but our version has [sensor_msgs/LaserScan/90c7ef2dc6895d81024acba2ac42f369]. Dropping connection.

The common_costmap.yaml file:
map_type: costmap
transform_tolerance: 50
obstacle_range: 2.5
raytrace_range: 4.0
inscribed_radius: 0.35
circumscribed_radius: 0.4
inflation_radius: 0.6
cost_scaling_factor: 15.0
lethal_cost_threshold: 100
footprint: [[-0.25, -0.25], [-0.25, 0.25], [0.25, 0.25],[0.25, -0.25]]
observation_sources: base_scan
base_scan: {data_type: LaserScan, topic: /base_scan, marking: true, clearing: true}

The parameters are used right, if i use rosparag get /move_base/local_costmap i get:
base_scan: {clearing: true, data_type: LaserScan, marking: true, topic: /base_scan}
circumscribed_radius: 0.4
cost_scaling_factor: 15.0
footprint:
- [-0.25, -0.25]
- [-0.25, 0.25]
- [0.25, 0.25]
- [0.25, -0.25]
global_frame: /odom
height: 4.0
inflation_radius: 0.6
inscribed_radius: 0.35
lethal_cost_threshold: 100
map_type: costmap
observation_sources: base_scan
obstacle_range: 2.5
publish_frequency: 1.0
raytrace_range: 4.0
resolution: 0.01
robot_base_frame: /base_footprint
rolling_window: true
static_map: false
track_unknown_space: true
transform_tolerance: 0.5
unknown_cost_value: 255
update_frequency: 1.0
width: 4.0

--EDIT:
The Launch file i am using:
<?xml version="1.0"?>

  <!-- ******************************************************************************* -->
  <!-- ********** START THE GMAPPING NODE ********** -->
  <!-- ******************************************************************************* -->
<launch>
  <arg name="scan_topic" default="base_scan" />
  <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
    <param name="base_frame" value="base_footprint"/>
    <param name="odom_frame" value="odom"/>
    <param name="map_update_interval" value="0.5"/>
    <param name="maxUrange" value="16.0"/>
    <param name="sigma" value="0.05"/>
    <param name="kernelSize" value="1"/>
    <param name="lstep" value="0.05"/>
    <param name="astep" value="0.05"/>
    <param name="iterations" value="5"/>
    <param name="lsigma" value="0.075"/>
    <param name="ogain" value="3.0"/>
    <param name="lskip" value="0"/>
    <param name="srr" value="0.01"/>
    <param name="srt" value="0.02"/>
    <param name="str" value="0.01"/>
    <param name="stt" value="0.02"/>
    <param name="linearUpdate" value="0.01"/>
    <param name="angularUpdate" value="0.01"/>
    <param name="temporalUpdate" value="-1.0"/>
    <param name="resampleThreshold" value="0.5"/>
    <param name="particles" value="10"/>
  
    <param name="xmin" value="-4.0"/>
    <param name="ymin" value="-4.0"/>
    <param name="xmax" value="4.0"/>
    <param name="ymax" value="4.0"/>

    <param name="delta" value="0.01"/>
    <param name="llsamplerange" value="0.01"/>
    <param name="llsamplestep" value="0.01"/>
    <param name="lasamplerange" value="0.005"/>
    <param name="lasamplestep" value="0.005"/>
    <remap from="scan" to="$(arg scan_topic)"/>
  </node>

  <!-- ******************************************************************************* -->
  <!-- ********** START MOVE BASE ********** -->
  <!-- ******************************************************************************* -->

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find simple_navigation)/param/common_costmap.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find simple_navigation)/param/common_costmap.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find simple_navigation)/param/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find simple_navigation)/param/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find simple_navigation)/param/base_local_planner_params.yaml" command="load" />

  </node>

</launch>

I am using ubuntu 12.04 LTS 64 Bit. Running ROS-Groovy (have also installed ROS-Fuerte, but is not in use).
I have read that it might be caused if the packages were build with an older message defenition, i have updated all of my ros-packages i am using, but the error do not dissapear. Does anyone know what i could do next ?
If you need more information, just say.
regards,
Peter

Originally posted by pkohout on ROS Answers with karma: 336 on 2014-02-09
Post score: 0

Original comments
Comment by gustavo.velascoh on 2014-02-09:
What distro are you using? Are you using a launch file?
Comment by ahendrix on 2014-02-09:
Which version of ROS are you using? There were some fairly major changes to the nav stack between Groovy and Hydro
Comment by pkohout on 2014-02-09:
I use Ubuntu 12.04 and ROS-Groovy, i also have installed Fuerte but do not use it. Yes i am using a Launch file (see edit)

A:

I have fixed the problem, i updated my ros-groovy and i had to recompile every package i was using, now it works again.

Originally posted by pkohout with karma: 336 on 2014-02-10
This answer was ACCEPTED on the original site
Post score: 0

