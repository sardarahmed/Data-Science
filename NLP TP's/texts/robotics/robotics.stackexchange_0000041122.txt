Q:

turtlebot navigation almost working

Im using the turtlebot_navigation gmapping_demo.launch along with the turtlebot_teleop turtlebot_teleop_key. When running the gmapping_demo the first section of the map that it produces is always 100% correct, however when i start driving the turtlebot around and watching the map being built in Rviz the turtle bot moves a lot farther in real life than it thinks it does in rviz basically making it so the laserscan is looking at an adjacent wall in real life while in rviz the robot has only rotated like 5 degrees causing overlap in the map an making them always look cone shaped. The robot in Rviz also jumps around randomly sometimes.
The fixed frame in Rviz is set to /map and the transform tree all checks out. I've tried calibrating the bot and the values to multiply by were only like 1.004 and when I changed them using the dynamic method it didn't seem to help, if anything made it worse. The calibration process also seemed a little strange, the robot turned 360 degrees twice at a slow speed overshooting by about 20 degrees, it readjusted itself to the wall and then 360'd again at a slightly faster speed again overshooting, the third time it undershot and the last two times it was perfect. I am using the minimal.launch for the turtlebot_bringup. And while dynamically re configuring (gyro_measurement_range) and (odom_angular_scale_correction) the turtlebot terminal only reports the (gyro_measurement_range) and (gyro_scale_correction) as changing.  Am I missing something here? Is there a set speed that I should adjust the teleop to? The community has been very helpful so far, thanks.

Originally posted by Rydel on ROS Answers with karma: 600 on 2012-06-05
Post score: 3

Original comments
Comment by Eric Perko on 2012-06-05:
How far away are all of the walls in your environment from your Turtlebot and do they have any distinguishing features (or are they mostly smooth)?
Comment by Rydel on 2012-06-06:
The room I was working in was no bigger than 5 x 10 meters and the walls are full of distinguishing features, namely toolboxes and desks and cabinets
Comment by Eric Perko on 2012-06-06:
Sounds like a doable environment for the Kinect and gmapping... Could you post a bagfile from your robot as you drive it around while pretending to map? (Don't run gmapping, but everything else so we can run gmapping offline with different parameters). I'd like to see if your odometry is incorrect.
Comment by Rydel on 2012-06-06:
alright, so make a bag file with no mapping just driving around? Here is the bag file, about 1:30 of driving around a small area. http://www.mediafire.com/?h4swu2ws871vvj8
Comment by allenh1 on 2012-06-06:
could I see a bag with just tf, scan, odom, and imu?
Comment by Eric Perko on 2012-06-06:
Ya, we'll need the scan topic as well in order to look into this. I guess I didn't mention that before. Sorry. The rest of your bag looks fine, so just take those settings and add in the /scan topic and we should have the data we need.
Comment by Rydel on 2012-06-07:
I am using a bilibot with turtlebot software because the bilibot hasnt been updated since its creation, which was basically just a copy and paste of an old turtlebot stack. I have addressed the problem but a new one has arose, see below. If you guys still want a bag let me know ill get it tomorrow.
Comment by Rydel on 2012-06-12:
http://www.mediafire.com/?hut9qwcc55ezds8 --a bag with tf, scan, odem and imu

A:

Alright, I seem to have fixed my original problem, I am using minimal.launch to start the turtlebot so I had to copy the appropriate parameters in turtlebot.launch into minimal.launch. Now I am even closer to building accurate maps, however,now no matter if i turn the robot left or right in real life, in Rviz the robot always turns the same way, it recognizes forwards and backwards but both right turns and left turns are interpreted as the same. Anyone have any thoughts?

Originally posted by Rydel with karma: 600 on 2012-06-07
This answer was ACCEPTED on the original site
Post score: 3

