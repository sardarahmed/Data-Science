Q:

catkin: generate_messages before building library?

How do I specify in the CMakeList.txt the generation of messages and building of a library. I know how to generate messages only. But when I added a library that used these message the library was compiled before the messages had been generated.
So what is the correct way to do this?

Originally posted by TommyP on ROS Answers with karma: 1339 on 2013-02-15
Post score: 5

Original comments
Comment by joq on 2013-02-15:
Regardless of catkin or rosbuild, the recommended practice is to define messages in a separate package. That might or might not help with this problem.
Comment by TommyP on 2013-02-15:
Yes, I usually do that. But for now I have a package were we have not split it that way. And that would have been a working solution if I had not found a working dependency.

A:

Found the answer:
add_dependencies(CUASVNodelets lrs_cvimage_gencpp)

solved my problem in the package lrs_cvimage. For me this is not intuitive at all that I have to specify a dependency inside the package. I mean messages could always be generated before compiling.

Originally posted by TommyP with karma: 1339 on 2013-02-15
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by WilliamWoodall on 2013-02-15:
This Q/A might help explain it: http://answers.ros.org/question/52744/how-to-specify-dependencies-with-foo_msgs-catkin-packages/
Comment by KruseT on 2013-02-15:
catkin relies on native cmake for the build process, and thus add_dependencies is the only way to create a build order (other than wrapping cmake targets, which is against catkin philisophy).
Comment by TommyP on 2013-02-16:
Now when I have made this mistake I will probably start to think that it is natural to specify this dependency.  It was just a bit annoying that it was hard to find this information. i think this should be in the tutorials since that was what I checked first.
Comment by KruseT on 2013-02-17:
Definitely. https://github.com/ros/catkin_tutorials/issues/4

