Q:

unable to build re_vision, problem with g2o-library

Hi,
i am using Ros Groovy on Ubuntu 12.04.
While trying to install the Roboearth stack i come across the following problem. I have a feeling the re_vision package is heavily outdated for usage with groovy.
First i had to manually copy an old version of cvbridge.h (cv_bridge.h) in order to get rid of the error.
After that i got an error that the g2o-library was missing so i installed it via sudo apt-get install ros-groovy-libg2o
Now i am getting an error-message i have no idea how to solve. Here it is:
..
[rosmake-1] Finished <<< re_msgs [PASS] [ 5.34 seconds ]                                                        
[rosmake-1] Starting >>> re_vision [ make ]                                                                     
[ rosmake ] Last 40 lines_vision: 23.1 sec ]                                         [ 1 Active 38/39 Complete ]
{-------------------------------------------------------------------------------
  /opt/ros/groovy/include/g2o/core/base_binary_edge.hpp:208:6: error: redefinition of ‘void g2o::BaseBinaryEdge<D, E, VertexXi, VertexXj>::mapHessianMemory(double*, int, int, bool)’
  /home/faps/catkin_ws/src/latest/re_vision/src/g2o/g2o/core/base_binary_edge.hpp:149:6: error: ‘virtual void g2o::BaseBinaryEdge<D, E, VertexXi, VertexXj>::mapHessianMemory(double*, int, int, bool)’ previously declared here
  In file included from /opt/ros/groovy/include/g2o/core/base_multi_edge.h:109:0,
                   from /home/faps/catkin_ws/src/latest/re_vision/src/NonLinearLS.h:19,
                   from /home/faps/catkin_ws/src/latest/re_vision/src/ObjectDetectorMethod.cpp:43:
  /opt/ros/groovy/include/g2o/core/base_multi_edge.hpp: In member function ‘virtual void g2o::BaseMultiEdge<D, E>::mapHessianMemory(double*, int, int, bool)’:
  /opt/ros/groovy/include/g2o/core/base_multi_edge.hpp:133:73: error: ‘vertex’ is not a member of ‘g2o::HyperGraph::Edge’
  /opt/ros/groovy/include/g2o/core/base_multi_edge.hpp:134:73: error: ‘vertex’ is not a member of ‘g2o::HyperGraph::Edge’
  /home/faps/catkin_ws/src/latest/re_vision/src/ObjectDetectorMethod.cpp: In member function ‘void ObjectDetectorMethod::calculatePose(const ObjectModel::Face&, const std::vector<int>&, const DVision::SurfSet&, const std::vector<int>&, const CameraBridge&, cv::Mat&) const’:
  /home/faps/catkin_ws/src/latest/re_vision/src/ObjectDetectorMethod.cpp:81:18: warning: unused variable ‘dis’ [-Wunused-variable]
  In file included from /opt/ros/groovy/include/g2o/core/base_multi_edge.h:109:0,
                   from /home/faps/catkin_ws/src/latest/re_vision/src/NonLinearLS.h:19,
                   from /home/faps/catkin_ws/src/latest/re_vision/src/ObjectDetectorMethod.cpp:43:
  /opt/ros/groovy/include/g2o/core/base_multi_edge.hpp: In member function ‘void g2o::BaseMultiEdge<D, E>::constructQuadraticForm() [with int D = 2, E = Eigen::Matrix<double, 2, 1>]’:
  /home/faps/catkin_ws/src/latest/re_vision/src/ObjectDetectorMethod.cpp:476:1:   instantiated from here
  /opt/ros/groovy/include/g2o/core/base_multi_edge.hpp:41:5: error: base operand of ‘->’ is not a pointer
  /home/faps/catkin_ws/src/latest/re_vision/src/ObjectDetectorMethod.cpp:476:1:   instantiated from here
  /opt/ros/groovy/include/g2o/core/base_multi_edge.hpp:44:5: error: ‘class g2o::BaseMultiEdge<2, Eigen::Matrix<double, 2, 1> >’ has no member named ‘robustInformation’
  Linking CXX executable ../bin/extractOutlineFromImages
  make[3]: Leaving directory `/home/faps/catkin_ws/src/latest/re_vision/build'
  [ 52%] Built target extractOutlineFromImages
  [ 53%] Building CXX object CMakeFiles/ObjectDetectorFunctions.dir/src/Surf3DDetector.cpp.o
  make[3]: *** [CMakeFiles/ObjectDetectorFunctions.dir/src/ObjectDetectorMethod.cpp.o] Error 1
  make[3]: *** Waiting for unfinished jobs....
  make[3]: Entering directory `/home/faps/catkin_ws/src/latest/re_vision/build'
  Scanning dependencies of target extractSurf
  make[3]: Leaving directory `/home/faps/catkin_ws/src/latest/re_vision/build'
  make[3]: Entering directory `/home/faps/catkin_ws/src/latest/re_vision/build'
  [ 55%] Building CXX object CMakeFiles/extractSurf.dir/src/PointCloudModelCreator/extractSurf.cpp.o
  [ 57%] Building CXX object CMakeFiles/extractSurf.dir/src/PointCloudModelCreator/Mask.cpp.o
  make[3]: Leaving directory `/home/faps/catkin_ws/src/latest/re_vision/build'
  make[2]: *** [CMakeFiles/ObjectDetectorFunctions.dir/all] Error 2
  make[2]: *** Waiting for unfinished jobs....
  Linking CXX executable ../bin/extractSurf
  make[3]: Leaving directory `/home/faps/catkin_ws/src/latest/re_vision/build'
  [ 57%] Built target extractSurf
  make[2]: Leaving directory `/home/faps/catkin_ws/src/latest/re_vision/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/faps/catkin_ws/src/latest/re_vision/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package re_vision written to:
[ rosmake ]    /home/faps/.ros/rosmake/rosmake_output-20130522-152030/re_vision/build_output.log
[rosmake-1] Finished <<< re_vision [FAIL] [ 23.14 seconds ]                                                     
[ rosmake ] Halting due to failure in package re_vision. 
[ rosmake ] Waiting for other threads to complete.    
[ rosmake ] Results:                                                                                            
[ rosmake ] Built 39 packages with 1 failures.                                                                  
[ rosmake ] Summary output to directory                                                                         
[ rosmake ] /home/faps/.ros/rosmake/rosmake_output-20130522-152030

Well, it states that some member named 'robustInformation' is missing in some class, written in /opt/ros/groovy/include/g2o/core/base_multi_edge.hpp.
To be honest this information does not help me at all. Is it a problem with the g2o-library or is re_vision just too outdated to work with the groovy-library? What should i do?
Thx in advance.

Originally posted by Schluchti on ROS Answers with karma: 1 on 2013-05-22
Post score: 0

A:

Please try installing ros-groovy-libg2o Debian package and try rosmake again.

Originally posted by Devasena Inupakutika with karma: 320 on 2013-06-19
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by patrickl on 2014-03-07:
if there is still a problem.....
try to remove the libg2o package: sudo apt-get remove ros-groovy-libg2o
after that install the libg2o from source, this should work ;)

