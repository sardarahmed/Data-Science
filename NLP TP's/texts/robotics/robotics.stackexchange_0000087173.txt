Q:

What is the difference between local_setup.bash and setup.bash

In ROS2, we always source the local_setup.bash while working with the original parent workspace. Now lets say if i create an overlay workspace and create my own package, then while trying to build it, shall i source the local_setup.bash or the setup.bash.
My observation : if i start a new terminal and try these commands :
cd ~/ros2_overlay_ws/
source install/ local_setup.bash
ament build

This gives me an error stating ament: command not found
But if i source the setup.bash file instead, the build is successfull. wehereas i thought local_setup.bash file is used for sourcing the current variables to the current path. So it sould have built with the local_setup.bash Could anyone please clear out the differences ?

Originally posted by aks on ROS Answers with karma: 667 on 2018-05-29
Post score: 7

A:

To answer the actual question first:

The local_setup.<ext> script sets up the environment for all package in the prefix path where that script is. It doesn't include any parent workspaces.
The setup.<ext> script on the other hand sources the local_setup.<ext> script for all workspaces which were sourced in the environment when this workspace was built. And then it also sources the sibling local_setup.<ext> script.

What does that mean:

If you want to source the first workspace (e.g. /opt/ros/ardent) it doesn't make any difference because that workspace doesn't have any parent workspaces.

If you have built your own workspace ~/ws after sourcing /opt/ros/ardent you can do either of the following:

Source ~/ws/install/setup.<ext> to setup the environment to include paths from /opt/ros/ardent as well as ~/ws/install.

That is the same as if you would source /opt/ros/ardent/(local_)setup.<ext> first and then ~/ws/install/local_setup.<ext>.

Originally posted by Dirk Thomas with karma: 16276 on 2018-05-29
This answer was ACCEPTED on the original site
Post score: 11

Original comments
Comment by fredBeauj on 2021-06-02:
In case someone needs it: essentially the same info from the colcon documentation

