Q:

ros-hydro-navigation stack compilation - trouble with openni

Hello,
I have some troubles with the compilation of the package hydro-navigation-devel fetched from github here
This is my configuration :
-Ubuntu 12.04
-ros-groovy-desktop-full installed
-ros-hydro-desktop full installed
-pcl 1.7 installed
-ros-groovy /hydro-navigation installed
-ros-groovy/hydro-pcl-installed
-ros-hydro-perception-pcl installed
-libopenni-dev installed
-openni-dev NOT installed

All those package are installed from synaptic (apt-get)
ros-hydro-navigation is working perfectly
Then, I tried to compile the package from source (source from the git navigation-hydro-devel) so I did a catkin_make on the costmap_2d (after successfully compiling the voxel_grid package) in my catkin workspace and I got some errors :
catkin_make -DCATKIN_WHITELIST_PACKAGES="costmap_2d"
Base path: /home/XXX/hydroWS
Source space: /home/XXX/hydroWS/src
Build space: /home/XXX/hydroWS/build
Devel space: /home/XXX/hydroWS/devel
Install space: /home/XXX/hydroWS/install
####
#### Running command: "cmake /home/XXX/hydroWS/src -DCATKIN_DEVEL_PREFIX=/home/XXX/hydroWS/devel -DCMAKE_INSTALL_PREFIX=/home/XXX/hydroWS/install -DCATKIN_WHITELIST_PACKAGES=costmap_2d" in "/home/XXX/hydroWS/build"
####
-- Using CATKIN_DEVEL_PREFIX: /home/XXX/hydroWS/devel
-- Using CMAKE_PREFIX_PATH: /opt/ros/groovy
-- This workspace overlays: /opt/ros/groovy
-- Using PYTHON_EXECUTABLE: /usr/bin/python
-- Python version: 2.7
-- Using Debian Python package layout
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: /home/XXX/hydroWS/build/test_results
-- Found gtest sources under '/usr/src/gtest': gtests will be built
-- catkin 0.5.89
-- BUILD_SHARED_LIBS is on
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- ~~  traversing 1 packages in topological order:
-- ~~  - costmap_2d
-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-- +++ processing catkin package: 'costmap_2d'
-- ==> add_subdirectory(navigation-hydro-devel/costmap_2d)
CMake Error at /opt/ros/hydro/share/catkin/cmake/catkinConfig.cmake:75 (find_package):
  Could not find a configuration file for package cmake_modules.

  Set cmake_modules_DIR to the directory containing a CMake configuration
  file for cmake_modules.  The file will have one of the following names:

    cmake_modulesConfig.cmake
    cmake_modules-config.cmake

Call Stack (most recent call first):
  navigation-hydro-devel/costmap_2d/CMakeLists.txt:4 (find_package)

CMake Error at /opt/ros/hydro/share/catkin/cmake/catkinConfig.cmake:75 (find_package):
  Could not find a configuration file for package map_msgs.

  Set map_msgs_DIR to the directory containing a CMake configuration file for
  map_msgs.  The file will have one of the following names:

    map_msgsConfig.cmake
    map_msgs-config.cmake

Call Stack (most recent call first):
  navigation-hydro-devel/costmap_2d/CMakeLists.txt:4 (find_package)

-- Using these message generators: gencpp;genlisp;genpy
-- checking for module 'openni-dev'
--   package 'openni-dev' not found
-- checking for module 'openni-dev'
--   package 'openni-dev' not found
-- checking for module 'openni-dev'
--   package 'openni-dev' not found
-- looking for PCL_COMMON
-- looking for PCL_KDTREE
-- looking for PCL_OCTREE
-- looking for PCL_SEARCH
-- looking for PCL_IO
-- looking for PCL_SAMPLE_CONSENSUS
-- looking for PCL_FILTERS
-- looking for PCL_GEOMETRY
-- looking for PCL_VISUALIZATION
-- looking for PCL_OUTOFCORE
-- looking for PCL_FEATURES
-- looking for PCL_SEGMENTATION
-- looking for PCL_PEOPLE
-- looking for PCL_REGISTRATION
-- looking for PCL_RECOGNITION
-- looking for PCL_KEYPOINTS
-- looking for PCL_SURFACE
-- looking for PCL_TRACKING
-- looking for PCL_APPS
-- Eigen found (include: /usr/include/eigen3)
CMake Error at /opt/ros/hydro/share/genmsg/cmake/genmsg-extras.cmake:255 (message):
  Messages depends on unknown pkg: map_msgs (Missing find_package(map_msgs?))
Call Stack (most recent call first):
  navigation-hydro-devel/costmap_2d/CMakeLists.txt:44 (generate_messages)

-- Configuring incomplete, errors occurred!
Invoking "cmake" failed

When I am compiling from source the groovy nav stack, I also have some troubles with openni but it passes this error by disabling some features.
If i install openni-dev, openni-dev is found but pcl (uninstalled) is not found so it doesn't work. This is due to a conflict between openni and libopenni that i don't know how to solve...

Originally posted by draziel on ROS Answers with karma: 11 on 2014-10-06
Post score: 1

Original comments
Comment by ahendrix on 2014-10-06:
sudo apt-get install ros-hydro-cmake-modules ros-hydro-map-msgs
Comment by draziel on 2014-10-06:
I tried with this... but it didn't solve the problem

A:

For starters, make sure you have the ros-hydro-cmake-modules and -map-msgs package installed.
To isolate the issue, try:

removing all versions of openni and pcl from your system, and remove + purge any PPAs (jspricke's?) that may be conflicting

put the whole navigation stack in a fresh empty workspace, make sure you have the base ROS installation sourced, and try running rosdep install --from-path src --rosdistro hydro -i -y to grab all the dependencies

run catkin_make on the whole workspace, not just costmap_2d

Originally posted by paulbovbel with karma: 4518 on 2014-10-06
This answer was ACCEPTED on the original site
Post score: 0

