Q:

Prerelease tests with Bloom on first-release

Hi,
I'm releasing a package with bloom for the first time and I'd like to run a prerelease test.
I'm following this tutorial: http://wiki.ros.org/bloom/Tutorials/FirstTimeRelease
and everything works fine until I arrive at Step 4 here:
http://wiki.ros.org/bloom/Tutorials/PrereleaseTest#bloom.2BAC8-Tutorials.2BAC8-PrereleaseTest.2BAC8-indigo.Prepare_the_release
Now, obviously the pre-release site doesn't know my repository, yet, because there is not entry in the release.yaml file at all. However, if I do open the pull-request to get that in there, I'd release it without ever testing.
Am I missing some step in between or what is the correct way to proceed?
As a side-note I've entered bloom-release multiple times and it's bumped the version each time. Is there any way to reset that, so I don't have unnecessary versions in between? I'm OK with resetting the release repo as that's new anyways.

Originally posted by dornhege on ROS Answers with karma: 31395 on 2015-01-28
Post score: 1

A:

The prerelease website can test your package based on data from three places:

The repository and branch listed in your source entry in the distribution.yaml on ros/rosdistro
This is the devel option.
The release repository and the "release" branch for each package.
Since this is a branch it will be updated after you push from bloom, but before you submit the pull request.
This is the latest option.
The latest released version of your package.
This is the x.y.z option, where x, y, and z are numbers for you package's most recent released version.

Now the question is, should you do a prerelease? The prerelease job does something that no other job does, it downloads, builds, and tests released packages which depend on your packages. This is really awesome if you are releasing a new version of a package which has already been released, but it is strictly less useful when you are releasing a package for the first time, since that means there are no released packages which can depend on you yet.
On the first release into a ROS distribution, I would recommend either just not doing a prerelease or doing the binary build test locally, see: http://wiki.ros.org/bloom/Tutorials/PrereleaseTest#bloom.2BAC8-Tutorials.2BAC8-PrereleaseTest.2BAC8-indigo.Perform_the_pre-release_locally
For Jade we plan to roll out a new tool which allows you to do pre-releases locally and with more control. This should make it easier to debug pre-releases and faster to run them since you don't have to wait on our farm which gets pretty backed up on pre-releases.

Originally posted by William with karma: 17335 on 2015-01-28
This answer was ACCEPTED on the original site
Post score: 3

