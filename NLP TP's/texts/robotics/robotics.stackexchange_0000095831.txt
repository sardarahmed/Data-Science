Q:

How to get ira_laser_tools laserscan_multi_merger to subscribe to laser scans?

I'm using the laserscan_multi_merger node from the ira_laser_tools package to combine 2 laser scans. I have demonstrated this working well once but, for some unknown reason, the nodes appears to have stopped subscribing to the individual scan topics. However, the node is still connected correctly to publish a merged scan but this is empty without the individual scan connections!
In this question, suggestions are made to do with the node timing out if it can't subscribe to the individual scans straight away and source code edits are proposed to add a delay. I'm also not sure what role the use_sim_time parameter plays in Gazebo too.
I'd prefer not to edit the laserscan_multi_merger cpp file if possible and just get it working again, as I previously had. I'm unsure what I've changed to cause this.
Does anyone have any suggestions?

Originally posted by Py on ROS Answers with karma: 501 on 2020-05-12
Post score: 0

A:

I don't have an answer that fits your constraints (i.e. not modifying source code) but when I've used ira_laser_tools in the past, the only way to have it work deterministically 100% as expected is to fix the issues it has with timing. Otherwise, unexpected things can alter the stock ira_laser_tools behavior, such as rearranging or adding to a launch file.
You can perhaps look into using a fork that already implements timing fixes: see this Pull Request. I have used this fork in the past and it worked well for me. This will save you time and get you back to it working again without having to edit files yourself.

Originally posted by maxsvetlik with karma: 161 on 2020-05-12
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Py on 2020-05-16:
This is really useful. I'll give that a try. Thanks very much for the help. Do you think using Google Cartographer instead of GMapping would simplify the merging of 2 laser scans? I'm not entirely clear whether this is how Cartographer works out of the box...
Comment by maxsvetlik on 2020-05-18:
I've never used Cartographer so I can't speak to that. If you do end up going that route, report back here!
Comment by Py on 2020-05-18:
Iâ€™ve managed to get it working today..... it seems great so far. I suppose I mainly like that it can use 2 lasers out of the box.

