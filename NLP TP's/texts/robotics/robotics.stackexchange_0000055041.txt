Q:

Error using ur5_driver on Groovy

Hi there,
I am working on ROS-Groovy installed on precise 12.04 linux machine. when trying to connect to ur5 robot using the instructions given in README.md file found in this link github.com/ros-industrial/universal_robot...
I get the below error.
[ERROR] [WallTime: 1382729859.230626] Loaded calibration offsets: {} 
Traceback (most recent call last): 
  File "/home/robotlabpc/catkin_ws/src/universal_robot/ur_driver/src/ur_driver/driver.py", line 697, in <module> 
    if __name__ == '__main__': main() 
  File "/home/robotlabpc/catkin_ws/src/universal_robot/ur_driver/src/ur_driver/driver.py", line 648, in main 
    program = fin.read() % {"driver_hostname": get_my_ip(robot_hostname, PORT)} 
  File "/home/robotlabpc/catkin_ws/src/universal_robot/ur_driver/src/ur_driver/driver.py", line 609, in get_my_ip 
    s = socket.create_connection((robot_ip, port)) 
  File "/usr/lib/python2.7/socket.py", line 571, in create_connection 
    raise err 
socket.error: [Errno 111] Connection refused 
[ur_driver-2] process has died [pid 22866, exit code 1, cmd /home/robotlabpc/catkin_ws/src/universal_robot/ur_driver/src/ur_driver/driver.py 192.168.1.5 __name:=ur_driver __log:=/home/robotlabpc/.ros/log/a1eeed26-3dac-11e3-8aa7-0013d41b020f/ur_driver-2.log]. 
log file: /home/robotlabpc/.ros/log/a1eeed26-3dac-11e3-8aa7-0013d41b020f/ur_driver-2*.log 

Can some one please provide steps to configure the server side (ROS) and any details which needs attention on the polyscope touch screen interface.
Any help in this regard will be good. Thanks in advance.
Regards,
Murali

Originally posted by MKI on ROS Answers with karma: 246 on 2013-10-25
Post score: 0

Original comments
Comment by sedwards on 2013-10-27:
Are you able to ping your robot?
Comment by MKI on 2013-10-27:
Hi Shaun, Yes, I was able to ping the robot, I defined the Robot and My PC to have static IP addresses. Robot is configured listen on port 30000. When I launch ur5.launch, I get warning msgs stating that, I have not configured the calibration offsets for joints. Awaiting your response, Thank you.

A:

It would seem the host at the IP address specified (192.168.1.5) is not accepting any connections, hence the socket.error: [Errno 111] Connection refused error.
Are you sure that you specified the correct IP for your UR5? You can find the IP of the robot on the SETUP Robot screen, under Setup NETWORK.

Originally posted by gvdhoorn with karma: 86574 on 2013-10-26
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by MKI on 2013-10-27:
Firstly.Thank you for the response. I did configure the IP address on both UR5 and my pc as static. $ ping 192.168.1.5 also worked, however this command $ roslaunch ur_bringup ur5.launch robot_ip:=192.168.1.5 gives the above error. I believe,I am missing few configuration on my pc,(wrt driver.py).
Comment by gvdhoorn on 2013-10-28:
AFAIK, it should just work. Network setup seems correct, if you can ping the robot. Does the log on the teach pendant show anything out of the ordinary? Does a telnet 192.168.1.5 30002 succeed (alternatively, try nc 192.168.1.5 30002)? Your terminal should be flooded with 'unreadable text'.
Comment by MKI on 2013-11-09:
Hi, $ telnet 192.168.1.5 30002 did seem to work, My terminal got flooded with junk binary data. Which means there is a path from my pc to the robot. Is it possible to perform the same from the touch screen interface of the robot to my pc? If yes, could please clarify the same. Thank you.
Comment by gvdhoorn on 2013-11-10:
@MuraliKrishnan: no, the TP cannot telnet to your PC. But you only get data back if the network setup is correct. EDIT: you could however write a small program that uses the socket functions to connect from the TP to your host PC. But I doubt very much that will tell you anything useful.
Comment by MKI on 2013-11-14:
Hi @gvdhoorn: Well after few more tests, I could figure out that except port 30000 I could establish connection via ports 30001, 30002 and 30003, I was also able to test my connection and move the robot using a small python script.Also, $ roswtf gives warning that tf nodes are not connected.

