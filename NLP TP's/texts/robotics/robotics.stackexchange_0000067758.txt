Q:

movement detection in ROS

Hello Everyone, I tried a program on OpenCV about movement detection and It works pretty well since it's capturing 2 camera frames and making differentiation between them (from image to grayscale then threshold then absolute difference plus other variables like the sensitivity of the differentiation), however when I try to move the same program to ROS it's not working,
My assumption about this is that when I use image transport nodes, the image callback function just sends one image per parameter and then the comparison between both frames would be the same. can you guys please suggest me something I could use?... I don't have any idea about what to do and I checked in Internet and didn't find anything.

Originally posted by Diego on ROS Answers with karma: 46 on 2015-05-26
Post score: 0

A:

I guess you could create a global "image" variable and then if the variable is not set yet, just use the callback to store the variable. If the variable is set, use the callback you compare the new image with the stored image and afterwards set the saved image to the new image.
Some untested python pseudocode:
def image_cb(msg):
    global old_img
    if old_img is None:
         old_img = msg
         return
    movement_result = compare_imgs(old_img, msg)
    old_img = msg

Originally posted by daenny with karma: 376 on 2015-05-27
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Diego on 2015-06-03:
Hello, thanks for your answers. I had done something similar to this and it worked.

