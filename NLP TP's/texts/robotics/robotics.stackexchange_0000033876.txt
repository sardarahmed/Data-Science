Q:

gmapping slam map shrunk

https://docs.google.com/drawings/d/1e4BW-T9eKJRz9DEIlpouFsAMtXd5bdWstPRDinUFEM0/edit?hl=en_US
My maps are shrunk.....:( I've been working on this for a while > week
This is fairly typical of what is happening, except this time the whole map is shrunk. It starts off ok, the first few metres look great then there's a scan a match and a portion usually the top north west end of the corridoor shrinks from almost 2.70 to less 2.0 and the whole map starts to change.
Been playing with slam options not much joy.
I posted a screen grab on google docs as not only is my flat shrinking I have no karma either.....what a day!
I'm using cturtle, on arm lucid and a base PC under maverick
I have a small issue with magnetic influences as I'm using a compass, but as you can see from the scans fairly straight lines along the corridoor by hook or crook but the compass error is less +- 5 degrees
odom looks ok, error is about 10cm over 8.3 M doing the trig on the broadcast odom
The laser ( ummm sorry, a PML sharp 20-150 cm ir range finder on a 180 degree 1 degree step servo) The laser data looks reasonable to me. I'm scanning every 40 to 50 cm from a halted position
I think there may be some issues with the laser going into and out of shadows which I can work it seems to cause a sweep at the longer range of a wall at an acute angle.
The sharp it's fairly accurate about +-1cm < 100 1.0 -1.5 about +- 2.5 but often better, of course depends on the surface angles etc....that's with filtering and curve fitting not the typical linearisation technique
I have a small issue with magnetic influences as I'm using a compass, but as you can see from the scans fairly straight lines along the corridoor
The features   are ok in the undecayed scan points
I've tried lots of slam options, not sure about how to guestimate stt str srt srr or actual what they are.
output of gmapping slam

 -maxUrange 1.5 -maxUrange 1.5 -sigma     0.05 -kernelSize 1 -lstep 0.05 -lobsGain 3 -astep 0.05
 -srr 0.1 -srt 0.2 -str 0.1 -stt 0.2
 -linearUpdate 0.02 -angularUpdate 0.5 -resampleThreshold 0.5
 -xmin -25 -xmax 25 -ymin -100 -ymax 25 -delta 0.05 -particles 120
[ INFO] [1314266203.037209866, 1314264197.070439983]: Initialization complete
update frame 0
update ld=0 ad=0
Laser Pose= -0.00781462 0.0184101 1.97222
m_count 0
Registering First Scan
update frame 1
update ld=0.539888 ad=0.174533
Laser Pose= -0.118015 0.546932 1.79769
m_count 1
Average Scan Matching Score=89.0036
neff= 118.987
Registering Scans:Done
update frame 2
update ld=0.519974 ad=0.0174533
Laser Pose= -0.248544 1.05026 1.81514
m_count 2
Average Scan Matching Score=97.7648
neff= 118.786
Registering Scans:Done
update frame 3
update ld=0.439915 ad=0.0174533
Laser Pose= -0.341714 1.48019 1.79769
m_count 3
Average Scan Matching Score=103.959
neff= 118.699
Registering Scans:Done
update frame 4
update ld=1.13973 ad=0.0349066
Laser Pose= -0.62387 2.58444 1.76278
m_count 4
Average Scan Matching Score=69.235
neff= 111.231
Registering Scans:Done
update frame 5
update ld=0.419966 ad=0.122173
Laser Pose= -0.750322 2.98492 1.88496
m_count 5
Average Scan Matching Score=119.072
neff= 109.485
Registering Scans:Done
update frame 6
update ld=0.419987 ad=0
Laser Pose= -0.882095 3.3837 1.88496
m_count 6
Average Scan Matching Score=117.336
neff= 109.29
Registering Scans:Done
update frame 7
update ld=0.419936 ad=0.0174533
Laser Pose= -1.00454 3.78539 1.90241
m_count 7
Average Scan Matching Score=100.226
neff= 108.346
Registering Scans:Done
update frame 8
update ld=0.399963 ad=0.10472
Laser Pose= -1.1653 4.15162 2.00713
m_count 8
Average Scan Matching Score=113.118
neff= 108.124
Registering Scans:Done
update frame 9
update ld=0.399964 ad=0
Laser Pose= -1.33907 4.51187 2.00713
m_count 9
Average Scan Matching Score=112.787
neff= 107.34
Registering Scans:Done
update frame 10
update ld=0.399924 ad=0.122173
Laser Pose= -1.47322 4.88862 1.88496
m_count 10
Average Scan Matching Score=130.042
neff= 106.456
Registering Scans:Done
update frame 11
update ld=0.419951 ad=0.0523599
Laser Pose= -1.61685 5.28324 1.93732
m_count 11
Average Scan Matching Score=142.093
neff= 106.227
Registering Scans:Done
update frame 12
update ld=0.419967 ad=0.0349066
Laser Pose= -1.7463 5.68276 1.90241
m_count 12
Average Scan Matching Score=139.473
neff= 105.989
Registering Scans:Done
update frame 13
update ld=0.419933 ad=0.0174533
Laser Pose= -1.86907 6.08435 1.88496
m_count 13
Average Scan Matching Score=129.624
neff= 105.851
Registering Scans:Done
update frame 14
update ld=0.419984 ad=0
Laser Pose= -2.00018 6.48334 1.88496
m_count 14
Average Scan Matching Score=133.441
neff= 103.311
Registering Scans:Done
update frame 15
update ld=0.399967 ad=0.0872665
Laser Pose= -2.15292 6.853 1.97222
m_count 15
Average Scan Matching Score=118.824
neff= 102.784
Registering Scans:Done

Can anyone suggest how I improve this
Thanks
Dave

Originally posted by davo on ROS Answers with karma: 42 on 2011-08-25
Post score: 0

A:

I got side tracked realising that an ir distance sensor is not man enough for the job, so I'm looking at stereo web cams and pointcloud to laserscan conversions to overcome the lack of sensor data, and that also unties from the arduino for laserscan messages.
The coreslam does seem to be better with the pml, and it's highlighted the areas of magnetic variations. I am hoping that with a camera setup to be able to fuse the odometry a bit better either via improved odometery or some form of feature recognition even if I have to coloured label on the wall. The areas of magnetic variation are 10 degrees in 1 cm so it needs to be precise.
Dave

Originally posted by davo with karma: 42 on 2011-09-04
This answer was ACCEPTED on the original site
Post score: 0

