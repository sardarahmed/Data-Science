Q:

ROS library cannot find service built in the same package

Hello,
I had experienced a weird issue: I am creating in the same package a service, a library relying on this service, and some executable.
Whenever I clean my workspace (remove devel and build) and do a casual catkin_make, it is saying my libraries cannot find my generated service.
BUT if I source setup.bash do again a catkin_make, source one more time and do catkin_make, it can generate nicely without any error.
My question is: Did I mistook by trying to do everything in the same package? Should I divide or I should change my CMakeLists?
Here is my CMakeLists:
cmake_minimum_required(VERSION 2.8.3)
project(ndt)

add_compile_options(-std=c++11)
SET(CMAKE_CXX_FLAGS "-O2 -g -Wall ${CMAKE_CXX_FLAGS}")

find_package(catkin REQUIRED COMPONENTS
  roslaunch
  geometry_msgs
  nav_msgs
  sensor_msgs
  roscpp
  rospy
  std_msgs
  cv_bridge
  image_transport
  tf
  message_generation
)

add_service_files(
  FILES
  GpsData.srv
)

generate_messages(DEPENDENCIES geometry_msgs)

find_package(Eigen3 REQUIRED)
find_package(PCL REQUIRED)
find_package(OpenCV 3 REQUIRED)

if (CATKIN_ENABLE_TESTING)
  find_package(roslaunch REQUIRED)
  roslaunch_add_file_check(launch USE_TEST_DEPENDENCIES)
endif()

include_directories(include
    ${catkin_INCLUDE_DIRS} 
    ${EIGEN3_INCLUDE_DIR}
    ${PCL_INCLUDE_DIRS}
  ${OPENCV_INCLUDE_DIRS}
)

include_directories(/usr/include)

add_library(ndt_func SHARED library/ndt_func.cpp)
add_library(ndt_func_nogps SHARED library/ndt_func_nogps.cpp)

catkin_package(
  INCLUDE_DIRS include
  LIBRARIES ndt_func ndt_func_nogps
  CATKIN_DEPENDS geometry_msgs nav_msgs roscpp rospy std_msgs cv_bridge
  DEPENDS EIGEN3 PCL OpenCVlibraaries
)

add_executable(ndt_loc src/code/ndt_node.cpp)
target_include_directories(ndt_loc PRIVATE ${OpenCV_INCLUDE_DIRS} ${PCL_INCLUDE_DIRS})
target_link_libraries(ndt_loc ndt_func ${catkin_LIBRARIES} ${PCL_LIBRARIES} ${OpenCV_LIBS} /usr/lib/liblas.so)

add_executable(ndt_loc_nogps src/tests/ndt_node_nogps.cpp)
target_include_directories(ndt_loc_nogps PRIVATE ${OpenCV_INCLUDE_DIRS} ${PCL_INCLUDE_DIRS})
target_link_libraries(ndt_loc_nogps ndt_func_nogps ${catkin_LIBRARIES} ${PCL_LIBRARIES} ${OpenCV_LIBS} /usr/lib/liblas.so)

add_executable(ndt_loc_ref src/tests/ndt_node_ref.cpp)
target_include_directories(ndt_loc_ref PRIVATE ${OpenCV_INCLUDE_DIRS} ${PCL_INCLUDE_DIRS})
target_link_libraries(ndt_loc_ref ndt_func_nogps ${catkin_LIBRARIES} ${PCL_LIBRARIES} ${OpenCV_LIBS} /usr/lib/liblas.so)

add_executable(test_gps src/tests/test_gps.cpp)
add_dependencies(test_gps ${ndt_EXPORTED_TARGETS})
target_link_libraries(test_gps ${catkin_LIBRARIES})

#add_executable(ndt_map src/ndt_map_node.cpp)
#target_include_directories(ndt_map PRIVATE ${OpenCV_INCLUDE_DIRS} ${PCL_INCLUDE_DIRS})
#target_link_libraries(ndt_map ndt_func ${catkin_LIBRARIES} ${PCL_LIBRARIES} ${OpenCV_LIBS} /usr/lib/liblas.so)

add_executable(ndt_data_transfer src/code/ndt_data_transfer.cpp)
add_dependencies(ndt_data_transfer ${ndt_EXPORTED_TARGETS})
target_link_libraries(ndt_data_transfer ${catkin_LIBRARIES})

add_executable(ndt_data_transfer_noscore src/tests/ndt_data_transfer_noscore.cpp)
target_link_libraries(ndt_data_transfer_noscore ${catkin_LIBRARIES})

#add_executable(GPS_message src/code/GPS_message.cpp)
#target_link_libraries(GPS_message ${catkin_LIBRARIES})

install(DIRECTORY 
        DESTINATION ${CATKIN_PACKAGE_INCLUDE_DESTINATION})

install(TARGETS ndt_func
   ARCHIVE DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
   LIBRARY DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
   RUNTIME DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION}
)

install(TARGETS ndt_loc ndt_loc_nogps ndt_data_transfer ndt_data_transfer_noscore test_gps #ndt_map ndt_loc_gps ndt_loc_ref 
   ARCHIVE DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
   LIBRARY DESTINATION ${CATKIN_PACKAGE_LIB_DESTINATION}
   RUNTIME DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION}
)

install(DIRECTORY include/${PROJECT_NAME}/
   DESTINATION ${CATKIN_PACKAGE_INCLUDE_DESTINATION}
)

Here the output after cleaning (only for this package):
####
#### Running command: "make -j12 -l12" in "/home/mobiltech/catkin_ws/build"
####
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_BatteryServer2
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_GPUStatus
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_LaserTrajCmd
Scanning dependencies of target geometry_msgs_generate_messages_lisp
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_BatteryState
Scanning dependencies of target std_msgs_generate_messages_lisp
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_DashboardState
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_PowerState
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_SetLaserTrajCmd
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_LaserScannerSignal
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_BatteryState2
Scanning dependencies of target media_files
[  0%] Built target std_msgs_generate_messages_lisp
[  0%] Built target geometry_msgs_generate_messages_lisp
[ 58%] Built target media_files
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_SetPeriodicCmd
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_BatteryServer
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_AccelerometerState
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_DashboardState
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_BatteryServer2
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_LaserTrajCmd
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_PowerState
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_BatteryState
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_SetLaserTrajCmd
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_LaserScannerSignal
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_GPUStatus
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_PowerBoardState
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_BatteryState2
Scanning dependencies of target geometry_msgs_generate_messages_eus
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_PressureState
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_AccessPoint
Scanning dependencies of target geometry_msgs_generate_messages_nodejs
Scanning dependencies of target std_msgs_generate_messages_eus
Scanning dependencies of target std_msgs_generate_messages_nodejs
Scanning dependencies of target _pr2_msgs_generate_messages_check_deps_PeriodicCmd
Scanning dependencies of target geometry_msgs_generate_messages_py
[ 58%] Built target geometry_msgs_generate_messages_eus
[ 58%] Built target std_msgs_generate_messages_eus
[ 58%] Built target geometry_msgs_generate_messages_nodejs
[ 58%] Built target std_msgs_generate_messages_nodejs
Scanning dependencies of target std_msgs_generate_messages_py
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_AccelerometerState
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_BatteryServer
[ 58%] Built target geometry_msgs_generate_messages_py
Scanning dependencies of target geometry_msgs_generate_messages_cpp
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_SetPeriodicCmd
[ 58%] Generating moc_qnode.cxx
Scanning dependencies of target _qt_tutorials_generate_messages_check_deps_TwoInts
Scanning dependencies of target std_msgs_generate_messages_cpp
[ 58%] Built target std_msgs_generate_messages_py
Scanning dependencies of target mt_loc
Scanning dependencies of target ndt_data_transfer_noscore
[ 58%] Built target geometry_msgs_generate_messages_cpp
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_PowerBoardState
Scanning dependencies of target _ndt_generate_messages_check_deps_GpsData
[ 58%] Built target std_msgs_generate_messages_cpp
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_PressureState
Scanning dependencies of target ndt_func_nogps
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_AccessPoint
Scanning dependencies of target ndt_func
Scanning dependencies of target ndt_loc_ums
[ 58%] Built target _pr2_msgs_generate_messages_check_deps_PeriodicCmd
Scanning dependencies of target diagnostic_msgs_generate_messages_py
Scanning dependencies of target _catkin_empty_exported_target
Scanning dependencies of target rosgraph_msgs_generate_messages_cpp
Scanning dependencies of target roscpp_generate_messages_py
[ 58%] Building CXX object ndt_matching/CMakeFiles/ndt_data_transfer_noscore.dir/src/tests/ndt_data_transfer_noscore.cpp.o
[ 59%] Generating qrc_images.cxx
[ 59%] Built target rosgraph_msgs_generate_messages_cpp
[ 59%] Built target diagnostic_msgs_generate_messages_py
[ 59%] Built target _catkin_empty_exported_target
[ 59%] Built target roscpp_generate_messages_py
[ 59%] Built target _qt_tutorials_generate_messages_check_deps_TwoInts
Scanning dependencies of target rosgraph_msgs_generate_messages_eus
Scanning dependencies of target rosgraph_msgs_generate_messages_nodejs
Scanning dependencies of target roscpp_generate_messages_cpp
[ 59%] Built target _ndt_generate_messages_check_deps_GpsData
[ 59%] Generating ui_main_window.h
Scanning dependencies of target roscpp_generate_messages_eus
[ 59%] Built target rosgraph_msgs_generate_messages_eus
Scanning dependencies of target rosgraph_msgs_generate_messages_py
[ 59%] Generating moc_main_window.cxx
[ 59%] Built target roscpp_generate_messages_cpp
[ 59%] Built target rosgraph_msgs_generate_messages_nodejs
[ 59%] Built target roscpp_generate_messages_eus
[ 59%] Built target rosgraph_msgs_generate_messages_py
Scanning dependencies of target roscpp_generate_messages_nodejs
Scanning dependencies of target rosgraph_msgs_generate_messages_lisp
Scanning dependencies of target tf2_msgs_generate_messages_cpp
Scanning dependencies of target roscpp_generate_messages_lisp
Scanning dependencies of target actionlib_generate_messages_nodejs
Scanning dependencies of target actionlib_generate_messages_lisp
[ 59%] Built target rosgraph_msgs_generate_messages_lisp
[ 59%] Built target roscpp_generate_messages_lisp
[ 59%] Building CXX object mt_loc/CMakeFiles/mt_loc.dir/src/mt_func.cpp.o
[ 59%] Built target tf2_msgs_generate_messages_cpp
[ 59%] Built target roscpp_generate_messages_nodejs
Scanning dependencies of target qtutorials
[ 59%] Built target actionlib_generate_messages_nodejs
[ 59%] Built target actionlib_generate_messages_lisp
Scanning dependencies of target actionlib_generate_messages_py
Scanning dependencies of target actionlib_msgs_generate_messages_lisp
Scanning dependencies of target actionlib_msgs_generate_messages_py
Scanning dependencies of target nav_msgs_generate_messages_nodejs
[ 59%] Building CXX object ndt_matching/CMakeFiles/ndt_func_nogps.dir/library/ndt_func_nogps.cpp.o
Scanning dependencies of target actionlib_msgs_generate_messages_eus
[ 60%] Building CXX object ndt_matching/CMakeFiles/ndt_func.dir/library/ndt_func.cpp.o
Scanning dependencies of target tf_generate_messages_py
[ 60%] Built target nav_msgs_generate_messages_nodejs
[ 60%] Built target actionlib_generate_messages_py
[ 60%] Built target actionlib_msgs_generate_messages_lisp
[ 60%] Built target actionlib_msgs_generate_messages_py
[ 60%] Built target actionlib_msgs_generate_messages_eus
[ 61%] Building CXX object ndt_ums/CMakeFiles/ndt_loc_ums.dir/src/ndt_node.cpp.o
[ 61%] Built target tf_generate_messages_py
Scanning dependencies of target tf_generate_messages_eus
Scanning dependencies of target tf_generate_messages_nodejs
Scanning dependencies of target nav_msgs_generate_messages_py
Scanning dependencies of target tf2_msgs_generate_messages_nodejs
Scanning dependencies of target tf_generate_messages_lisp
Scanning dependencies of target actionlib_msgs_generate_messages_cpp
[ 61%] Built target tf_generate_messages_nodejs
[ 61%] Built target tf_generate_messages_eus
[ 61%] Built target nav_msgs_generate_messages_py
[ 61%] Built target tf2_msgs_generate_messages_nodejs
[ 61%] Built target tf_generate_messages_lisp
[ 61%] Built target actionlib_msgs_generate_messages_cpp
Scanning dependencies of target nav_msgs_generate_messages_eus
Scanning dependencies of target nav_msgs_generate_messages_cpp
Scanning dependencies of target tf2_msgs_generate_messages_py
Scanning dependencies of target tf2_msgs_generate_messages_eus
Scanning dependencies of target nav_msgs_generate_messages_lisp
Scanning dependencies of target sensor_msgs_generate_messages_cpp
[ 61%] Built target nav_msgs_generate_messages_cpp
[ 61%] Built target nav_msgs_generate_messages_eus
[ 61%] Built target tf2_msgs_generate_messages_eus
[ 61%] Built target tf2_msgs_generate_messages_py
[ 61%] Built target nav_msgs_generate_messages_lisp
[ 62%] Building CXX object qt_ros/qt_tutorials/common/CMakeFiles/qtutorials.dir/main_window.cpp.o
[ 62%] Building CXX object qt_ros/qt_tutorials/common/CMakeFiles/qtutorials.dir/qnode.cpp.o
Scanning dependencies of target tf_generate_messages_cpp
Scanning dependencies of target actionlib_generate_messages_eus
[ 62%] Built target sensor_msgs_generate_messages_cpp
Scanning dependencies of target sensor_msgs_generate_messages_eus
Scanning dependencies of target tf2_msgs_generate_messages_lisp
[ 62%] Built target tf_generate_messages_cpp
[ 62%] Building CXX object qt_ros/qt_tutorials/common/CMakeFiles/qtutorials.dir/qrc_images.cxx.o
[ 62%] Built target actionlib_generate_messages_eus
[ 62%] Built target sensor_msgs_generate_messages_eus
[ 62%] Built target tf2_msgs_generate_messages_lisp
Scanning dependencies of target sensor_msgs_generate_messages_lisp
Scanning dependencies of target sensor_msgs_generate_messages_nodejs
Scanning dependencies of target sensor_msgs_generate_messages_py
[ 62%] Building CXX object qt_ros/qt_tutorials/common/CMakeFiles/qtutorials.dir/moc_main_window.cxx.o
[ 62%] Built target sensor_msgs_generate_messages_lisp
[ 62%] Built target sensor_msgs_generate_messages_py
[ 62%] Built target sensor_msgs_generate_messages_nodejs
Scanning dependencies of target actionlib_msgs_generate_messages_nodejs
Scanning dependencies of target actionlib_generate_messages_cpp
[ 62%] Building CXX object qt_ros/qt_tutorials/common/CMakeFiles/qtutorials.dir/moc_qnode.cxx.o
[ 62%] Built target actionlib_msgs_generate_messages_nodejs
[ 62%] Built target actionlib_generate_messages_cpp
Scanning dependencies of target _realsense2_camera_generate_messages_check_deps_Extrinsics
Scanning dependencies of target _realsense2_camera_generate_messages_check_deps_IMUInfo
[ 62%] Built target _realsense2_camera_generate_messages_check_deps_IMUInfo
[ 62%] Built target _realsense2_camera_generate_messages_check_deps_Extrinsics
Scanning dependencies of target diagnostic_msgs_generate_messages_eus
Scanning dependencies of target bond_generate_messages_lisp
[ 62%] Built target diagnostic_msgs_generate_messages_eus
[ 62%] Built target bond_generate_messages_lisp
Scanning dependencies of target bond_generate_messages_eus
Scanning dependencies of target dynamic_reconfigure_generate_messages_nodejs
[ 62%] Built target bond_generate_messages_eus
Scanning dependencies of target bond_generate_messages_nodejs
[ 62%] Built target dynamic_reconfigure_generate_messages_nodejs
[ 62%] Built target bond_generate_messages_nodejs
Scanning dependencies of target nodelet_generate_messages_lisp
Scanning dependencies of target dynamic_reconfigure_generate_messages_py
Scanning dependencies of target bond_generate_messages_cpp
[ 62%] Built target nodelet_generate_messages_lisp
[ 62%] Built target dynamic_reconfigure_generate_messages_py
[ 62%] Built target bond_generate_messages_cpp
Scanning dependencies of target nodelet_generate_messages_cpp
Scanning dependencies of target nodelet_generate_messages_py
Scanning dependencies of target nodelet_generate_messages_eus
[ 62%] Built target nodelet_generate_messages_cpp
[ 62%] Built target nodelet_generate_messages_py
[ 62%] Built target nodelet_generate_messages_eus
Scanning dependencies of target nodelet_generate_messages_nodejs
Scanning dependencies of target dynamic_reconfigure_generate_messages_eus
Scanning dependencies of target bond_generate_messages_py
[ 62%] Built target nodelet_generate_messages_nodejs
[ 62%] Built target dynamic_reconfigure_generate_messages_eus
Scanning dependencies of target dynamic_reconfigure_generate_messages_cpp
[ 62%] Built target bond_generate_messages_py
Scanning dependencies of target diagnostic_msgs_generate_messages_lisp
[ 62%] Built target dynamic_reconfigure_generate_messages_cpp
Scanning dependencies of target dynamic_reconfigure_generate_messages_lisp
[ 62%] Built target diagnostic_msgs_generate_messages_lisp
Scanning dependencies of target dynamic_reconfigure_gencfg
[ 62%] Built target dynamic_reconfigure_generate_messages_lisp
Scanning dependencies of target diagnostic_msgs_generate_messages_cpp
[ 62%] Built target dynamic_reconfigure_gencfg
[ 62%] Built target diagnostic_msgs_generate_messages_cpp
Scanning dependencies of target diagnostic_msgs_generate_messages_nodejs
Scanning dependencies of target realsense2_camera_generate_messages_py
[ 62%] Built target diagnostic_msgs_generate_messages_nodejs
Scanning dependencies of target realsense2_camera_generate_messages_lisp
[ 62%] Generating Python from MSG realsense2_camera/IMUInfo
Scanning dependencies of target realsense2_camera_generate_messages_eus
[ 62%] Generating Lisp code from realsense2_camera/IMUInfo.msg
[ 62%] Generating EusLisp code from realsense2_camera/IMUInfo.msg
[ 62%] Generating Lisp code from realsense2_camera/Extrinsics.msg
[ 63%] Generating EusLisp code from realsense2_camera/Extrinsics.msg
[ 63%] Built target realsense2_camera_generate_messages_lisp
Scanning dependencies of target realsense2_camera_generate_messages_nodejs
[ 64%] Generating Javascript code from realsense2_camera/IMUInfo.msg
[ 64%] Generating Python from MSG realsense2_camera/Extrinsics
[ 64%] Generating EusLisp manifest code for realsense2_camera
[ 64%] Generating Javascript code from realsense2_camera/Extrinsics.msg
[ 64%] Built target realsense2_camera_generate_messages_nodejs
Scanning dependencies of target turtlebot_teleop_joy
[ 64%] Building CXX object turtlebot/turtlebot_teleop/CMakeFiles/turtlebot_teleop_joy.dir/src/turtlebot_joy.cpp.o
[ 65%] Generating Python msg __init__.py for realsense2_camera
[ 65%] Built target realsense2_camera_generate_messages_py
Scanning dependencies of target turtlebot_description_xacro_generated_to_devel_space_
[ 65%] Built target turtlebot_description_xacro_generated_to_devel_space_
Scanning dependencies of target pr2_msgs_generate_messages_lisp
[ 65%] Generating Lisp code from pr2_msgs/LaserScannerSignal.msg
[ 65%] Generating Lisp code from pr2_msgs/DashboardState.msg
In file included from /home/mobiltech/catkin_ws/src/ndt_matching/library/ndt_func.cpp:2:0:
/home/mobiltech/catkin_ws/src/ndt_matching/include/ndt_func.h:24:25: fatal error: ndt/GpsData.h: No such file or directory
compilation terminated.
ndt_matching/CMakeFiles/ndt_func.dir/build.make:62: recipe for target 'ndt_matching/CMakeFiles/ndt_func.dir/library/ndt_func.cpp.o' failed
make[2]: *** [ndt_matching/CMakeFiles/ndt_func.dir/library/ndt_func.cpp.o] Error 1
CMakeFiles/Makefile2:5444: recipe for target 'ndt_matching/CMakeFiles/ndt_func.dir/all' failed
make[1]: *** [ndt_matching/CMakeFiles/ndt_func.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
[ 66%] Generating Lisp code from pr2_msgs/AccelerometerState.msg
[ 66%] Generating Lisp code from pr2_msgs/BatteryServer.msg
[ 66%] Generating Lisp code from pr2_msgs/PowerBoardState.msg
[ 66%] Generating Lisp code from pr2_msgs/BatteryState.msg
[ 67%] Generating Lisp code from pr2_msgs/PressureState.msg
[ 67%] Generating Lisp code from pr2_msgs/GPUStatus.msg
[ 67%] Generating Lisp code from pr2_msgs/PeriodicCmd.msg
[ 67%] Generating Lisp code from pr2_msgs/PowerState.msg
[ 67%] Generating Lisp code from pr2_msgs/LaserTrajCmd.msg
[ 68%] Generating Lisp code from pr2_msgs/AccessPoint.msg
[ 68%] Generating Lisp code from pr2_msgs/BatteryServer2.msg
[ 68%] Generating Lisp code from pr2_msgs/BatteryState2.msg
[ 68%] Generating Lisp code from pr2_msgs/SetLaserTrajCmd.srv
[ 69%] Generating Lisp code from pr2_msgs/SetPeriodicCmd.srv
[ 69%] Built target realsense2_camera_generate_messages_eus
[ 69%] Built target pr2_msgs_generate_messages_lisp
[ 70%] Linking CXX shared library /home/mobiltech/catkin_ws/devel/lib/libqtutorials.so
[ 70%] Built target qtutorials
[ 71%] Linking CXX executable /home/mobiltech/catkin_ws/devel/lib/turtlebot_teleop/turtlebot_teleop_joy
[ 71%] Built target turtlebot_teleop_joy
[ 71%] Linking CXX executable /home/mobiltech/catkin_ws/devel/lib/ndt/ndt_data_transfer_noscore
[ 71%] Built target ndt_data_transfer_noscore
[ 71%] Linking CXX shared library /home/mobiltech/catkin_ws/devel/lib/libmt_loc.so
[ 71%] Built target mt_loc
[ 71%] Linking CXX executable /home/mobiltech/catkin_ws/devel/lib/ndt_ums/ndt_loc_ums
[ 71%] Built target ndt_loc_umslibraarieslibraaries
[ 71%] Linking CXX shared library /home/mobiltech/catkin_ws/devel/lib/libndt_func_nogps.so
[ 71%] Built target ndt_func_nogps
Makefile:138: recipe for target 'all' failed
make: *** [all] Error 2
Invoking "make -j12 -l12" failed

I source devel/setup.bash, do catkin_make and get the same error, source one more time and after a third catkin_make:

This code block was moved to the following github gist:
https://gist.github.com/answers-se-migration-openrobotics/ee674acaa31daecec38575abc8abb545

And it is working
EDIT
Thanks to @Solrac3589, sourcing the package does not have any effects. Effectively it is a known issue that messages might not be built before the executable. In my case the problem are not the executable but the libraries...

Originally posted by MCmobil on ROS Answers with karma: 33 on 2020-06-19
Post score: 0

A:

Fixed! After reading commentary from @Solrac3589
add_dependencies function is working either for creating executable, but also for libraries.
That is to say I add just one line in my CMakeLists under add_libraries like this:
add_library(ndt_func SHARED library/ndt_func.cpp)
add_dependencies(ndt_func ${catkin_EXPORTED_TARGETS})

Originally posted by MCmobil with karma: 33 on 2020-06-21
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Solrac3589 on 2020-06-22:
Hey! great you find the solution! Sorry to not tell anything before!
Comment by MCmobil on 2020-06-22:
No! You have been helpful enough, your links allowed me to find the solution, that what I was looking for ;)
Thank you one more time!

