Q:

apriltag_ros, process died when detected required tag

Hey everyone, why does apriltag_ros continuous_detection.launch process died when it detects a required tag? I am using a intel realsense d435 camera trying to setup apriltag detection. Running on Ubuntu 18.04 in a conda env using python 3.8.17.
Issue: When I show a tag to the camera that is required to be detected the process instantly died.
[apriltag_ros_continuous_node-2] process has died [pid 1454, exit code -11, cmd /home/ubuntu/apriltag_ws/devel/lib/apriltag_ros/apriltag_ros_continuous_node image_rect:=/Front_D435/color/image_raw camera_info:=/Front_D435/color __name:=apriltag_ros_continuous_node __log:=/home/ubuntu/.ros/log/bb93716c-25fe-11ee-813e-14857f44b28b/apriltag_ros_continuous_node-2.log].
log file: /home/ubuntu/.ros/log/bb93716c-25fe-11ee-813e-14857f44b28b/apriltag_ros_continuous_node-2*.log

But it is able to detect tags that are not required.
[ WARN] [1689749511.600538788]: Requested description of standalone tag ID [26], but no description was found...

My config files:
tags.yaml
standalone_tags:
  [
    {id: 0, size: 0.4},
    {id: 1, size: 0.4},
    {id: 2, size: 0.4},
    {id: 3, size: 0.4},
    {id: 4, size: 0.4},
    {id: 5, size: 0.4},
    {id: 6, size: 0.4},
    {id: 7, size: 0.4},
    {id: 8, size: 0.4},
    {id: 9, size: 0.4},
    {id: 10, size: 0.4},
    {id: 11, size: 0.4},
    {id: 12, size: 0.4},
    {id: 13, size: 0.4},
    {id: 14, size: 0.4},
    {id: 15, size: 0.4},
    {id: 16, size: 0.4},
    {id: 17, size: 0.4},
    {id: 18, size: 0.4}
  ]

settings.yaml
# AprilTag 3 code parameters
# Find descriptions in apriltag/include/apriltag.h:struct apriltag_detector
#                      apriltag/include/apriltag.h:struct apriltag_family
tag_family:        'tag36h11' # options: tagStandard52h13, tagStandard41h12, tag36h11, tag25h9, tag16h5, tagCustom48h12, tagCircle21h7, tagCircle49h12
tag_threads:       2          # default: 2
tag_decimate:      1.0        # default: 1.0
tag_blur:          0.0        # default: 0.0
tag_refine_edges:  1          # default: 1
tag_debug:         0          # default: 0
max_hamming_dist:  2          # default: 2 (Tunable parameter with 2 being a good choice - values >=3 consume large amounts of memory. Choose the largest value possible.)
# Other parameters
publish_tf:        true       # default: false
transport_hint:    "raw"      # default: raw, see http://wiki.ros.org/image_transport#Known_Transport_Packages for options

Originally posted by RowBot on ROS Answers with karma: 35 on 2023-07-19
Post score: 0

A:

Hi!
There is an open issue on the apriltag_ros GitHub repo. I suggest you subscribe to the issue, so to receive notifications if there is any update.
For the sake of completeness, I report here what, to date, is stated in the GitHub issue:

If you do not need to publish the image with the result, you can go to continuous_detector.cpp and set draw_tag_detections_image_ to false. You will not get the annotated image anymore, but you can still get the detection without the node to crash.

If you have built the apriltag_ros package from source, you may try to install it via apt as the released version does not -reportedly- have this issue.

Originally posted by bluegiraffe-sc with karma: 221 on 2023-07-27
This answer was ACCEPTED on the original site
Post score: 1

