Q:

SkidSteerDrivePlugin

Hi all,
I'm trying to work with new skid steering drive plugin and URDF model of Pioneer 3AT. I included plugin to my URDF file, but still getting:
Error [Param.hh:249] Unable to set value [-nan -nan -nan 0 -0 0] for key[pose]
Error [Param.hh:249] Unable to set value [-nan] for key[ixx]
Error [Param.hh:249] Unable to set value [nan] for key[ixy]
Error [Param.hh:249] Unable to set value [-nan] for key[ixz]
Error [Param.hh:249] Unable to set value [-nan] for key[iyy]
Error [Param.hh:249] Unable to set value [-nan] for key[iyz]
Error [Param.hh:249] Unable to set value [nan] for key[izz]
Error [SkidSteerDrivePlugin.cc:51] Unable to find the right_front joint in model pioneer3at.
Error [SkidSteerDrivePlugin.cc:51] Unable to find the right_rear joint in model [INFO] [WallTime: 1372089505.447163] [0.489000] Spawn status: SpawnModel: Successfully spawned model
pioneer3at.
Error [SkidSteerDrivePlugin.cc:51] Unable to find the left_front joint in model pioneer3at.
Error [SkidSteerDrivePlugin.cc:51] Unable to find the left_rear joint in model pioneer3at.

This is how I included plugin:
<gazebo>
  <plugin name="SkidSteerDrivePlugin" filename="libSkidSteerDrivePlugin.so">
      <right_front>p3at_front_right_wheel_joint</right_front>
      <right_rear>p3at_back_right_wheel_joint</right_rear>
      <left_front>p3at_front_left_wheel_joint</left_front>
      <left_rear>p3at_back_left_wheel_joint</left_rear>
      <max_force>5.0</max_force>
  </plugin>
</gazebo>

ROS Groovy, Gazebo 1.8.6 compiled from source as well as gazebo_ros_pkgs.
I just briefly checked code of plugin and I'm not sure, but it looks like it searches for joints named "right_front" etc. and not for joints defined by these parameters. Am I right? Or could it be somehow related with NaN errors?
Thanks in advance.
Btw, what is prefered way to control robot from ROS? Use "pure" Gazebo plugin and ROS node for translating communication between Gazebo/ROS, or Gazebo plugin like those in gazebo_ros_pkgs? Second option looks better for me - are there any disadvantages?

Originally posted by ZdenekM on Gazebo Answers with karma: 62 on 2013-06-24
Post score: 1

A:

Hi,

Error [Param.hh:249] Unable to set value [-nan] for key[ixx]

This is from bad or missing values in your  tags. Make sure all the xx, yy, zz values are greater than zero, make sure there are no spaces inside the quotation marks, etc. Here's an example:
<inertia ixx="2e-08" ixy="0" ixz="0" iyy="3e-08" iyz="0" izz="2e-08"/>

Error [SkidSteerDrivePlugin.cc:51] Unable to find the right_front joint in model pioneer3at.

From reviewing your code earlier during the pull request, I think I saw these 'right_front' values hard coded in. This needs to be fixed for sure.

what is prefered way to control robot from ROS?

ros_control is the new preferred way to control robots, using the new gazebo_ros_control plugin. However, this is under heavy development for the Hydro release, but should stabilize in the next couple days.

Originally posted by davetcoleman with karma: 369 on 2013-06-25
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by ZdenekM on 2013-06-26:
Hi. Thanks for answers and some hints. Hard coded link names are in SkidSteerDrivePlugin plugin in Gazebo. Plugin I created (libgazebo_ros_skid_steer_drive.so, within gazebo_ros_pkgs) has no hard coded link names ;)
Comment by Martí Morta - IRI on 2013-11-04:
Hi @ZdenekM, where can I find this plugin? I am having issues with the joints too. Thanks!
Comment by ZdenekM on 2013-11-05:
@Martí Morta - IRI You can find it in the package call gazebo_ros_pkgs. Documentation sits here: http://gazebosim.org/wiki/Tutorials/1.9/ROS_Motor_and_Sensor_Plugins#Skid_Steering_Drive
Comment by Martí Morta - IRI on 2013-11-05:
thanks! the italics made the names confusing :)

