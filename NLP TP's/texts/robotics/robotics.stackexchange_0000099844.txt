Q:

Colcon build fail - notify2

OS: Pop OS 20.04
I was running the command colcon build and receive the following output:

Starting >>> turtlesim
Finished <<< turtlesim [0.64s]                     

Summary: 1 package finished [0.75s]
[1.016s] ERROR:dbus.connection:Unable to set arguments ('colcon', 0, '/usr/lib/python3/dist-packages/colcon_notification/desktop_notification/image/colcon-success.ico', '`colcon build` successful', '/home/joaocastilho/dev_ws', [], {'transient': True}, -1) according to signature 'susssasa{ss}i': <class 'TypeError'>: Expected a string or unicode object
[1.017s] ERROR:colcon.colcon_notification.desktop_notification:Exception in desktop notification extension 'notify2': Expected a string or unicode object
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/colcon_notification/desktop_notification/__init__.py", line 106, in notify
    retval = extension.notify(
  File "/usr/lib/python3/dist-packages/colcon_notification/desktop_notification/notify2.py", line 51, in notify
    self._last_notification.show()
  File "/usr/lib/python3/dist-packages/notify2.py", line 181, in show
    nid = dbus_iface.Notify(appname,       # app_name       (spec names)
  File "/usr/lib/python3/dist-packages/dbus/proxies.py", line 72, in __call__
    return self._proxy_method(*args, **keywords)
  File "/usr/lib/python3/dist-packages/dbus/proxies.py", line 141, in __call__
    return self._connection.call_blocking(self._named_service,
  File "/usr/lib/python3/dist-packages/dbus/connection.py", line 643, in call_blocking
    message.append(signature=signature, *args)
TypeError: Expected a string or unicode object

I am using ROS2 Foxy version and following this tutorial: https://docs.ros.org/en/foxy/Tutorials/Workspace/Creating-A-Workspace.html

Originally posted by ccpjBoss on ROS Answers with karma: 46 on 2021-08-16
Post score: 0

A:

I “solved” the problem. I was using Pop OS + Regolith and the problem was that regolith wasn’t letting colcon send the notification that the build was successful. I changed back to default Pop OS and it is working now!

Originally posted by ccpjBoss with karma: 46 on 2021-08-20
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2021-08-22:
Have you reported this to the appropriate Colcon issue tracker? It would be good to let the developer(s)/maintainer(s) know this is a problem.
There might be some changes required to the detection logic which determines whether dbus is available and can be used.

