Q:

Kinect light flashing with openni, but works with freenect

Hello all,
I am running Ubuntu 12.04 with ROS Fuerte and the latest openi_camera and openni_launch packages that are available through Ubuntu's package manager. I have an XBox 360 Kinect. When I run roslaunch openni_launch openni.launch, I get the output below. No errors are present, but yet the green light continues to flash, the IR light never turns on, and the unit just sits there endlessly. Firing up rviz and setting fixed and target frames to /camera_depth_optical_frame does nothing.
Strangely, when I use the test programs for libfreenect, it works just fine. Any ideas?
Thanks.
ayrton@Robobook:~$ roslaunch openni_launch openni.launch 
\... logging to /home/ayrton/.ros/log/09152036-165f-11e2-8578-c018858b6579/roslaunch-Robobook-3053.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://Robobook:58864/

SUMMARY
========

PARAMETERS
 * /camera/depth/rectify_depth/interpolation
 * /camera/disparity_depth/max_range
 * /camera/disparity_depth/min_range
 * /camera/disparity_depth_registered/max_range
 * /camera/disparity_depth_registered/min_range
 * /camera/driver/depth_camera_info_url
 * /camera/driver/depth_frame_id
 * /camera/driver/depth_registration
 * /camera/driver/device_id
 * /camera/driver/rgb_camera_info_url
 * /camera/driver/rgb_frame_id
 * /rosdistro
 * /rosversion

NODES
  /camera/ir/
    rectify_ir (nodelet/nodelet)
  /camera/
    disparity_depth (nodelet/nodelet)
    disparity_depth_registered (nodelet/nodelet)
    driver (nodelet/nodelet)
    points_xyzrgb_depth_rgb (nodelet/nodelet)
    register_depth_rgb (nodelet/nodelet)
  /camera/depth/
    metric (nodelet/nodelet)
    metric_rect (nodelet/nodelet)
    points (nodelet/nodelet)
    rectify_depth (nodelet/nodelet)
  /
    camera_base_link (tf/static_transform_publisher)
    camera_base_link1 (tf/static_transform_publisher)
    camera_base_link2 (tf/static_transform_publisher)
    camera_base_link3 (tf/static_transform_publisher)
    camera_nodelet_manager (nodelet/nodelet)
  /camera/rgb/
    debayer (nodelet/nodelet)
    rectify_color (nodelet/nodelet)
    rectify_mono (nodelet/nodelet)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_nodelet_manager-1]: started with pid [3073]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/driver-2]: started with pid [3074]
[ INFO] [1350261150.366668695]: Initializing nodelet with 4 worker threads.
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/rgb/debayer-3]: started with pid [3118]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/rgb/rectify_mono-4]: started with pid [3137]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/rgb/rectify_color-5]: started with pid [3156]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/ir/rectify_ir-6]: started with pid [3178]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/rectify_depth-7]: started with pid [3200]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/metric_rect-8]: started with pid [3224]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/metric-9]: started with pid [3246]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/points-10]: started with pid [3276]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/register_depth_rgb-11]: started with pid [3313]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/points_xyzrgb_depth_rgb-12]: started with pid [3379]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/disparity_depth-13]: started with pid [3404]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/disparity_depth_registered-14]: started with pid [3422]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link-15]: started with pid [3470]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link1-16]: started with pid [3509]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link2-17]: started with pid [3536]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link3-18]: started with pid [3587]
[ INFO] [1350261154.753242186]: Number devices connected: 1
[ INFO] [1350261154.753614071]: 1. device on bus 001:06 is a Xbox NUI Camera (2ae) from Microsoft (45e) with serial id 'A00366903025051A'
[ INFO] [1350261154.759204265]: Searching for device with index = 1
[ INFO] [1350261154.870464904]: Opened 'Xbox NUI Camera' on bus 1:6 with serial number 'A00366903025051A'
[ INFO] [1350261155.018053363]: rgb_frame_id = '/camera_rgb_optical_frame' 
[ INFO] [1350261155.018491253]: depth_frame_id = '/camera_depth_optical_frame' 
[ WARN] [1350261155.050054677]: Camera calibration file /home/ayrton/.ros/camera_info/rgb_A00366903025051A.yaml not found.
[ WARN] [1350261155.053312093]: Using default parameters for RGB camera calibration.
[ WARN] [1350261155.054984209]: Camera calibration file /home/ayrton/.ros/camera_info/depth_A00366903025051A.yaml not found.
[ WARN] [1350261155.055289532]: Using default parameters for IR camera calibration.

Originally posted by Tom Moore on ROS Answers with karma: 13689 on 2012-10-14
Post score: 1

A:

Sounds like a bug in the driver. Please open a defect ticket.
EDIT: I talked with @piyushk about this yesterday. He thinks the lower-level openni library was re-released with new bugs a while back, causing the ROS driver to stop working reliably.

Originally posted by joq with karma: 25443 on 2012-10-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Tom Moore on 2012-10-16:
Done: https://kforge.ros.org/openni/trac/ticket/59
Comment by jarvisschultz on 2012-10-16:
I'm not so sure that this is a bug.  Did you try using rostopic to see if any data is coming over.  When I start openni_launch, my green light flashes and the IR light stays off.  Then as soon as something subscribes to an IR topic, the light turns on and stays on until there are no subscribers.
Comment by jarvisschultz on 2012-10-16:
Just opening rviz and setting it's frames is not sufficient to turn on the IR.  Something like rostopic hz /camera/depth/points  immediately turns it on.

