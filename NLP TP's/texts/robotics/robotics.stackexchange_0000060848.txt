Q:

Odometry not correct

I am trying to test the odometry of Segbot( With RMP 200 and Hokuyo) using the tests recommended in the ROS website. The translational test results looks reasonable, but the rotational results looks totally off. Any suggestions regarding what parameters needs to be changed to fix the problem?

Originally posted by pnambiar on ROS Answers with karma: 120 on 2014-07-15
Post score: 0

A:

If you're asking about the specific parameters for the segway, I'm not sure how the interface looks like for the segway rmp 200.
Suggestions.
Run your odometry node and subscribe to it with RVIZ. If you have a joystick or keyboard controls, see how transform moves as you control it with your joystick(Make sure the joystick drives your rmp correctly first). See if the joystick inputs match up to the transform of the odom tf(motion doesn't have to be exact, but just make sure if you flick the joystick left, the robot moves counter clock wise(etc).
I've used a segway rmp(although not exactly the 200 series), the input is in linear/angular velocity, correct? If so check to make sure a POSITIVE angular velocity input to the RMP makes it go counter clock wise, and a NEGATIVE angular velocity makes it go clock wise. I think I ran into this issue before where the RMP is opposite from the ROS standard. (Segway RMP goes cw with positive, ccw with negative, iirc).
Lastly, check your odometry math. The segway I used didn't output encoder values, so you have to find a way to derive it correctly given your output from the segway RMP.
Good luck with it!

Originally posted by pwong with karma: 447 on 2014-07-15
This answer was ACCEPTED on the original site
Post score: 0

