Q:

Unable to go straight ahead with move_base

Our robot is just turning on itself, whatever we ask it.
It is heavy and has an important inertia.
However, the turning direction keeps to be the same. We wonder why it does not go straight ahead.
Here is the launch file:
<launch>
  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <param name="base_local_planner" value="base_local_planner/TrajectoryPlannerROS" />
    <rosparam file="$(find mv_fiveco)/param/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find mv_fiveco)/param/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find mv_fiveco)/param/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find mv_fiveco)/param/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find mv_fiveco)/param/base_local_planner_params.yaml" command="load" />
  </node>
</launch>

Here is base_local_planner_params.yaml :
controller_frequency: 2.0  

TrajectoryPlannerROS:

# Robot Configuration Parameters
  max_vel_x: 0.06
  min_vel_x: 0.01 # forward
  max_vel_theta: 0.02
  min_vel_theta: -0.02
  min_in_place_vel_theta: 0.01

  acc_lim_theta: 0.005
  acc_lim_x: 0.01
  acc_lim_y: 0.0

  holonomic_robot: false

# Goal Tolerance Parameters
  yaw_goal_tolerance: 0.3
  xy_goal_tolerance: 0.5
  latch_xy_goal_tolerance: true

  meter_scoring: true

Here is costmap_common_params.yaml:
footprint: [[-0.65, -0.33], [-0.65, 0.33], [0.65, 0.33], [0.65, -0.33]]
obstacle_range: 1.5
raytrace_range: 2.0
inflation_radius: 0.45
robot_base_frame: base_footprint
width: 20
height: 20
resolution: 0.05
transform_tolerance: 0.8
observation_sources: scan
scan: {data_type: LaserScan, topic: scan, marking: true, clearing: true}

Here is global_costmap_param.yaml:
global_costmap:
  global_frame: /map
  robot_base_frame: /base_footprint
  update_frequency: 1.5
  publish_frequency: 1.0
  static_map: true
  transform_tolerance: 1.0
  resolution: 0.1

Here is local_costmap_param.yaml:
local_costmap:
  global_frame: odom
  robot_base_frame: base_footprint
  update_frequency: 1.5
  publish_frequency: 1.0
  static_map: false
  rolling_window: true
  width: 6.0
  height: 6.0

Here is a bagfile.

Originally posted by pl.guhur on ROS Answers with karma: 23 on 2018-05-15
Post score: 0

Original comments
Comment by PeteBlackerThe3rd on 2018-05-15:
Can you view the /cmd_vel topic using rostopic echo /cmd_vel to find out what commands are being given to the robot. You may need to add update the topic name to match that of your robot.
Comment by David Lu on 2018-05-15:
Any particular reason you're using TrajectoryPlannerROS?
Comment by pl.guhur on 2018-05-16:
/cmd_vel showed only rotation and translation.

A:

Thanks to @David Lu, we look over another TrajectoryPlanner. DWA brings us what we expected.

Originally posted by pl.guhur with karma: 23 on 2018-05-16
This answer was ACCEPTED on the original site
Post score: 0

