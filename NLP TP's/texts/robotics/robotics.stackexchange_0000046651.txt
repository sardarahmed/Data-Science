Q:

compiling java file in ros environment

Hi,
I have a ros package my_pkg. I have c++ files in my_pkg/src folder and I can make the ros nodes using command "rosmake my_pkg". Is there any way to compile java file too while compiling the package if I add Server.java file. I dont want to use rosjava I just want to get Server.class and later want to run this class with command "java Server".
Any hints please.. thanks

Originally posted by safzam on ROS Answers with karma: 111 on 2012-12-18
Post score: 0

A:

rosmake is a wrapper aound make. You can extend the Makefile or the CMakeLists.txt of your project to invoke javac or ant.
From your description I would try to extend CMakeLists.txt with a custom command (look for a recipe with Google), but several other approaches exist.

Originally posted by KruseT with karma: 7848 on 2012-12-18
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by safzam on 2012-12-18:
I used command EXECUTE_PROCESS(COMMAND "${PROJECT_SOURCE_DIR}/classes/javac Server.java") in at the end in CMakeList.txt of my_pkg. The package was comiped successfully but I dont see any Server.class anywhere..am I doing something wrong?
Comment by Lorenz on 2012-12-18:
Don't use execute_process. It will be executed during configuration, not when your targets are built. You really need to use a custom command. If you need examples for building jave, have a look at client_rosjava_jni. There we define a cmake macro for building java code.
Comment by safzam on 2012-12-18:
I had a look at http://ros.org/rosdoclite/fuerte_bak/api/client_rosjava_jni/repo.yaml and stack.yaml I didn't find any clue about "javac". I dont want to depend upon rosjava. want a command to compile Server.java and give Server.class in my_pkg/classes dir. Can you plz just write me command? thnx
Comment by Lorenz on 2012-12-18:
Just have a look at the corresponding cmake macros in client_rosjava_jni. You don't need to use it or depend on it. Just copy and adjust the cmake macro.
Comment by safzam on 2012-12-18:
I found this command in macro add_java_source_dir_internal: COMMAND ${JAVA_COMPILE} -source 1.5 -classpath "${_javac_classpath_param}:$ENV{ROSJAVA_AUX_CLASSPATH}" -d ${JAVA_OUTPUT_DIR} ${_java_source_files} but I don' understand how does it execute javac

