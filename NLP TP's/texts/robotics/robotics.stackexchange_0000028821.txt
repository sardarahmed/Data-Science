Q:

class gazebo::physics::World’ has no member named ‘GetModel’; did you mean ‘Models’?

Hi All,
I am very new to Gazebo and ROS.
I have the following code snippet in my Ros World Plugin:
    void Load(physics::WorldPtr _world, sdf::ElementPtr _sdf)
    {
        physics::ModelPtr ballmodel;
        ballmodel = _world->GetModel("ball");
 

Any idea why I always get a error like
class gazebo::physics::World’ has no member named ‘GetModel’; did you mean ‘Models’?
I am using Ubuntu 18, Melodic and Gazebo 9.
Any idea?
Thanks in advance, Peter

EDIT
No idea what's going on, but the ball is not found :-(
class SimulatorPlugin : public WorldPlugin
{
    void Load(physics::WorldPtr _world, sdf::ElementPtr _sdf)
    {
        sdf::SDF ballSDF;
        ballSDF.SetFromString(
        "<sdf version ='1.6'>\
                <model name='ball'>\
                    <pose>0 0 0 0 0 0</pose>\
                        <include>\
                            <uri>/home/peter/gazebo_plugin/models/my_robocup_spl_ball</uri>\
                        </include>\
                </model>\
            </sdf>");

        sdf::ElementPtr ballmodel = ballSDF.Root()->GetElement("model");
        ballmodel->GetAttribute("name")->SetFromString("ball");
        _world->InsertModelSDF(ballSDF);

        physics::ModelPtr ballmodelPtr = _world->ModelByName("ball");
        if (ballmodelPtr != NULL)
        {
            printf("ball found \n");
        }

        _world->LoadPlugin("librifball.so", "rifball", ballmodel);
    }
}

Originally posted by PeterHer on Gazebo Answers with karma: 15 on 2019-08-20
Post score: 0

A:

This is the API documentation for Gazebo 9. The method you are looking for is ModelByName(name).

reaction to the EDIT
The use of the API looks right. One thing that comes on my mind is that the retrieval of the ball model is happening right after the call for the model insertion into the world. Is it possible the model is still being loaded when you want to get the pointer to it?
What happens if you wait until the model is fully loaded? Something like
class SimulatorPlugin : public WorldPlugin
{
    void Load(physics::WorldPtr _world, sdf::ElementPtr _sdf)
    {
        sdf::SDF ballSDF;
        ballSDF.SetFromString(
        "<sdf version ='1.6'>\
                <model name='ball'>\
                    <pose>0 0 0 0 0 0</pose>\
                        <include>\
                            <uri>/home/peter/gazebo_plugin/models/my_robocup_spl_ball</uri>\
                        </include>\
                </model>\
            </sdf>");

        sdf::ElementPtr ballmodel = ballSDF.Root()->GetElement("model");
        ballmodel->GetAttribute("name")->SetFromString("ball");
        _world->InsertModelSDF(ballSDF);

        physics::ModelPtr ballmodelPtr = _world->ModelByName("ball");

        while(ballmodelPtr == NULL) 
        {
             ballmodelPtr = _world->ModelByName("ball");
        }
        printf("ball found \n");

        _world->LoadPlugin("librifball.so", "rifball", ballmodel);
    }
}

EDIT 2
The solution to wait for the model to be loaded showed above cannot work. The while loop inside the Load function would block all the other processes so the model or anything else would not be loaded ever.
See this answer for the correct solution: https://answers.gazebosim.org/question/24887/how-to-wait-until-model-is-loaded-while-not-blocking-the-other-processes/?answer=24890#post-id-24890

Originally posted by kumpakri with karma: 755 on 2019-08-21
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by PeterHer on 2019-08-21:
Thanks, I was looking at the wrong API
I have tried your code, but it will fall into an endless loop. Skipping the While() this code result back that there world is loaded and only has one Model, named: ground_plane
    void Init()
    {
            printf("IsLoaded: %d \n", my_worldPtr->IsLoaded());
            printf("ModelCount: %d \n", my_worldPtr->ModelCount());
    }

Maybe this has something to do with it when I run the sim. [Err] [REST.cc:205] Error in REST request
Comment by PeterHer on 2019-08-26:
Or maybe this: libcurl: (51) SSL: no alternative certificate subject name matches target host name 'api.ignitionfuel.org'
Comment by PeterHer on 2019-08-26:
BTW, the ball is visible in Gazebo and listed under Models
Comment by kumpakri on 2019-08-26:
@PeterHer try this https://www.youtube.com/watch?v=ftDz_EVoatw for the REST error. Otherwise I'm out of ideas. I think it is a good idea to create a new question for this issue. You will get more attention and people will be more willing to help you, if they don't see any answers to your question.

