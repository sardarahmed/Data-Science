Q:

Rosmake missing error messages

Often rosmake does not tell me what the error is when it finds an error.
In this case I am in the middle of converting an AtlasState variable to the new format, and it still has a .imu and .force_torque_sensors field. Here is the feedback from rosmake:

  /home/cga/rosf/pkgs/rstand1/main.cc:1718:25: warning: ‘sensor_msgs::CvBridge::CvBridge()’ is deprecated (declared at /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:64) [-Wdeprecated-declarations]
  /home/cga/rosf/pkgs/rstand1/main.cc:1717:7: warning: unused variable ‘i’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1719:14: warning: unused variable ‘count’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1720:7: warning: unused variable ‘ix’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1720:11: warning: unused variable ‘iy’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1720:15: warning: unused variable ‘index’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1720:22: warning: unused variable ‘index2’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1721:8: warning: unused variable ‘filename’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc: In function ‘void imageCallbackRight(const ImageConstPtr&)’:
  /home/cga/rosf/pkgs/rstand1/main.cc:1782:25: warning: ‘sensor_msgs::CvBridge::CvBridge()’ is deprecated (declared at /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:64) [-Wdeprecated-declarations]
  /home/cga/rosf/pkgs/rstand1/main.cc:1781:7: warning: unused variable ‘i’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1783:14: warning: unused variable ‘count’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1784:7: warning: unused variable ‘ix’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1784:11: warning: unused variable ‘iy’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1784:15: warning: unused variable ‘index’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1784:22: warning: unused variable ‘index2’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:1785:8: warning: unused variable ‘filename’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc: In function ‘void DisparityCallback(const ConstPtr&)’:
  /home/cga/rosf/pkgs/rstand1/main.cc:1843:7: warning: unused variable ‘i’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc: In function ‘void Points2Callback(const ConstPtr&)’:
  /home/cga/rosf/pkgs/rstand1/main.cc:1877:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
  /home/cga/rosf/pkgs/rstand1/main.cc:1880:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
  /home/cga/rosf/pkgs/rstand1/main.cc: In function ‘int main(int, char**)’:
  /home/cga/rosf/pkgs/rstand1/main.cc:2098:7: warning: unused variable ‘i’ [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/atlas.h: At global scope:
  /home/cga/rosf/pkgs/rstand1/atlas.h:117:20: warning: ‘joint_names’ defined but not used [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/atlas.h:134:20: warning: ‘link_names’ defined but not used [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/atlas.h:151:15: warning: ‘joint_offset’ defined but not used [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/atlas.h:185:15: warning: ‘axis’ defined but not used [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/atlas.h:219:15: warning: ‘com_offset’ defined but not used [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/atlas.h:253:15: warning: ‘masses’ defined but not used [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:208:22: warning: ‘my_left_image’ defined but not used [-Wunused-variable]
  /home/cga/rosf/pkgs/rstand1/main.cc:209:22: warning: ‘my_right_image’ defined but not used [-Wunused-variable]
  make[3]: *** [CMakeFiles/stand.dir/main.o] Error 1
  make[3]: Leaving directory `/home/cga/rosf/pkgs/rstand1/build'
  make[2]: *** [CMakeFiles/stand.dir/all] Error 2
  make[2]: Leaving directory `/home/cga/rosf/pkgs/rstand1/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/cga/rosf/pkgs/rstand1/build'

I did get messages about the joint-states field not being defined.
After removing the .imu and .force_torque_sensors fields, I get no errors.
This happens fairly often, and I have to do a lot of detective work to figure out what the error is.
As you can imagine, it is a little difficult developing code with erratic feedback on compiler errors.
Any suggestions on how to deal with this?

Originally posted by cga on Gazebo Answers with karma: 223 on 2013-04-16
Post score: 0

A:

By default, rosmake only shows you the last 40 lines of compiler/linker output in error cases.
Two suggestions, in my preference order:

Call make explicitly on the (first) package that's failing to build.  E.g., instead of rosmake rstand1, do:
 roscd rstand1
 make

Then you'll get all the output.  If you want to see the compile and link lines (by default CMake hides them from you), do:
    roscd rstand1
    make VERBOSE=1

In addition to giving you all the build output, calling make on one package is faster than calling rosmake, because it doesn't try to build other packages.

Go look at the logs that rosmake produces.  At the end of each failed run, rosmake will say something like the following:
 [ rosmake ] Output from build of package joint_commands_gui written to:
 [ rosmake ]    /home/gerkey/.ros/rosmake/rosmake_output-20130416-110752/joint_commands_gui/build_output.log

The build_output.log file it's pointing to will have the complete output from make.

Originally posted by gerkey with karma: 1414 on 2013-04-16
This answer was ACCEPTED on the original site
Post score: 2

