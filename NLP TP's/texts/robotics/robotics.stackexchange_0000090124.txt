Q:

Is possible to use mutex in two different nodes?

Hi, everyone! I'm using the motor drive md25 in raspberry pi with i2c communication. Now I need to add a Ultrasonic sensor that works with i2c too. The sensor and the motor drive work on different ROS nodes. How can I avoid crashing the i2c communication? Can i use mutex in different nodes? Does ROS provide tools to avoid this?

Originally posted by joelsonmiller on ROS Answers with karma: 5 on 2019-01-19
Post score: 0

A:

ROS doesn't provide any mutex classes; those are provided by the Python standard library, the C++ standard library (in C++11 and newer), or pthreads, boost, or another threading library. (For example, boost has https://www.boost.org/doc/libs/1_67_0/doc/html/interprocess.html ).
I have written and used mutexes across processes like this as part of my day job, and it took me about a week to build a well-tested, inter-process mutex using the available primitives from posix and pthreads. It is possible, but it's a lot of work and NOT a beginner project.
Instead, all of the ROS nodes that I've seen that need to do this write a single node that handles the mutexing internally, and publishes and subscribes to multiple topics. If you have two devices on the same I2C bus, you should write (or combine) the ROS nodes into a single node.

Originally posted by ahendrix with karma: 47576 on 2019-01-19
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by joelsonmiller on 2019-01-19:
I'm  surely a beginner. hahaha
Thanks for your answer. ;)

