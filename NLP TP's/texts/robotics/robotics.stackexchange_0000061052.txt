Q:

ROS Answers SE migration: tf2 example?

Hi all,
Trying to learn ROS, I understand tf is deprecated and tf2 is the currently maintained version. Now the tutorials for tf2 are rather wrong as stated here and here (and as I actually experienced just now). Is there a simple example somewhere I can rely on to know how to listen and broadcast frames?
Thanks,
Antoine.

Originally posted by arennuit on ROS Answers with karma: 955 on 2014-07-22
Post score: 2

A:

Ok.... huh...
I just was trying to implement this, when I saw your question. So I will try to help you, or at least show you my solution which seams to work. It is done in C++.
So you need following headers:
#include <tf2_ros/transform_listener.h>
#include <tf2_geometry_msgs/tf2_geometry_msgs.h>

Than initialise all variables:
tf2_ros::Buffer tfBuffer;
tf2_ros::TransformListener tfListener(tfBuffer);
geometry_msgs::TransformStamped transform;

Ant than the magic line:
  try{
    transform = tfBuffer.lookupTransform("base_link", frame_id, ros::Time(0));
  }
  catch (tf2::TransformException ex ){
            ROS_ERROR("%s",ex.what());
  }

To this solution I came by searching code of geometry_experimental stack on GitHub.

Originally posted by destogl with karma: 877 on 2014-07-23
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by arennuit on 2014-07-24:
Hello destogl, this is a good to help me start with, thanks for your answer ;)
Comment by destogl on 2014-07-25:
There is also code examples now in C++ and Python, please check this pull request: https://github.com/ros/geometry_tutorials/pull/6
Comment by arennuit on 2014-07-28:
Interesting! Thanks a lot , this will help indeed!

