Q:

Kinematic chain for Husky + UR5

After spending time with MoveIt!, I am trying to integrate ur5 with husky.
<joint name="husky_ur5_joint" type="fixed">
  <parent link="base_link" />
  <child link = "ur5_arm_base_link" />
  <origin xyz="0.205 0.0 0.6" rpy="0.0 0.0 3.142" />
</joint>

This is how I am combining both of them in the URDF. While using the MoveIt setup assistant, I selected the kinematic chain starting from ur5_arm_base_link to ur5_arm_ee_link. This can be seen in the SRDF file :
<group name="manipulator">
    <chain base_link="ur5_arm_base_link" tip_link="ur5_arm_ee_link" />
</group> 

But when I am moving the manipulator group P2P, I have to give the target pose in base_link and not in ur5_arm_base_link. I want to eliminate the errors induced while calculating the transformations between the two, so I want the target pose to be in ur5_arm_base_link. Why is the kinematic chain being considered starting from base_link and how can I eliminate that?

Originally posted by ipa-hsd on ROS Answers with karma: 150 on 2017-06-27
Post score: 0

Original comments
Comment by gvdhoorn on 2017-06-27:
Is this a custom attempt, or are you using the Clearpath provided packages? If the latter, it's very important to check which IK plugin you are using, as Clearpath worked on some changes to the default IK plugin for that setup which could be affecting what you're seeing.
Comment by ipa-hsd on 2017-06-27:
The combination is a custom attempt. I am using KDL kinematics plugin. I am not sure if this is a Husky issue, because before this I had mounted the UR5 on a table, and I saw the same behavior.
Comment by v4hn on 2017-06-27:
while this does not address your question: you should very likely move to tracIK, it improves a lot over KDL with the ur5 setup
Comment by ipa-hsd on 2017-06-27:
Could you post a link for tracIK if possible? I tried setting group->setPoseReferenceFrame("ur5_arm_base_link") and this works
Comment by v4hn on 2017-06-27:
http://docs.ros.org/kinetic/api/moveit_tutorials/html/doc/trac_ik_tutorial.html
Comment by ipa-hsd on 2017-06-27:
Now I am unable to plan Cartesian paths (only about 5% is planned). But the position is reachable with P2P. How is this possible?

A:

OK finally understood the issue, since it kept coming back again and again.
So the planning frame is usually the root of the URDF model (unless a virtual joint is defined in the SRDF model).
The virtual joint defined for husky_ur5 SRDF is
<virtual_joint name="virtual_joint" type="fixed" parent_frame="base_link" child_link="base_footprint" />
Hence the planning is done wrt base_link
More details here: https://groups.google.com/forum/#!msg/moveit-users/a3W5sQcxRAM/9jNumXqwUvAJ

Originally posted by ipa-hsd with karma: 150 on 2017-09-11
This answer was ACCEPTED on the original site
Post score: 0

