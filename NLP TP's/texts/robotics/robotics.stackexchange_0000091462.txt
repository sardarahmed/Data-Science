Q:

ROS Answers SE migration: [ROS2] bag API

Hi,
I'm trying to find a way to process a ros2 bag, but at the moment it appears there is no API implemented yet to parse it like it was possible in ROS1 (http://wiki.ros.org/rosbag/Code%20API).
What is the best way to deal with it right now? Should I just make a parsing node that grabs data from topic during replay and stores it as a csv?
Cheers

Originally posted by vadbut on ROS Answers with karma: 78 on 2019-04-22
Post score: 2

A:

You can use rosbag2::SequentialReader package to read rosbag2 data. Because bag data is serialized, you should have to deserialize that data using rosbag2::SerializationFormatConverterFactory and rosbag2::converter_interfaces.
Article on my blog (in Korean): https://kyungpyo-kim.github.io/study/ROS2-Bag-file-parsing/#getting-started.

Originally posted by kyungpyo with karma: 16 on 2020-03-13
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jayess on 2020-03-13:
Putting the main points here in the answer would be the normal protocol (and be especially helpful for those who don't read Korean). Should the blog post disappear, then this answer would not be helpful for the users of this site.
Comment by kyungpyo on 2020-03-13:
Modified following your comment. Thanks!
Comment by DanielRobotics on 2020-04-24:
@kyungpyo I tried to use your c++ node and I get the following error:
terminate called after throwing an instance of 'eprosima::fastcdr::exception::NotEnoughMemoryException'
  what():  Not enough memory in the buffer stream

I use my own bag for this and I have changed the msg type to look for nav_msgs/msg/Odometry. Have you seen this error occur before?
Comment by sttobia on 2021-01-05:
Unfortunately, exactly what was predicted by @jayess is the case now: the original article disappeared.
@kyungpyo: Would it be possible to post more detailed instructions in english on how to achieve the reading of rosbag2 data in the proposed way? Maybe some small sample code would be really helpful for a lot of people... Thanks in advance!
Comment by jayess on 2021-01-05:
And there's no archive of it at the Internet Archive either
Comment by gvdhoorn on 2021-01-06:
I +100 the point about including the important parts of the article in the answer itself, for the aforementioned reasons.
However, the article is still available: ROS2 Bag File Parsing 하기.
Comment by kyungpyo on 2021-02-02:
Actually my article is very personal project and I can't move it to in English now...(I am very busy these days... really sorry for that and late reply...) As @gvdhoorn mentioned you can find my article at new page.
But I think it is better to see example API source code:  https://github.com/ros2/rosbag2/blob/master/rosbag2_tests/test/rosbag2_tests/test_rosbag2_cpp_api.cpp

