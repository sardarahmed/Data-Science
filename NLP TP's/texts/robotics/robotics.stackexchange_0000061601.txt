Q:

record rosrun tf tf_echo /map /base_link

I run tf tf_echo /map /base_link and compute exact data needed:
...
At time 1407419581.729
- Translation: [-8.999, -22.000, 0.000]
- Rotation: in Quaternion [-0.000, 0.000, 0.850. 0.526]
                 in RPY [0.000. -0.000, 2.034]
...

Is there a way to record this streaming data with rosbag record?

Originally posted by Orso on ROS Answers with karma: 37 on 2014-08-07
Post score: 0

A:

I don't know if this is the best approach, but it should work. I would write a node that publishes the transformations between /map and /base_link. In order to get the transformation you should use "lookupTransform" as you can see here:
http://wiki.ros.org/tf/Tutorials/Writing%20a%20tf%20listener%20%28C%2B%2B%29
As you can see, the transformation can be published to a topic of your choice. Whatever it is, you can then use this command in order to record it:
rosbag record -O subset /chosentopic

Originally posted by lucaluca with karma: 74 on 2014-08-07
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Orso on 2014-08-07:
Thanks, I thought this may be the case. Though, I hoped I may already record this data since it is already streaming in when I run:
tf tf_echo /map /base_link
Comment by lucaluca on 2014-08-07:
@Orso since the help file of rosbag record says "Record a bag file with the contents of specified topics" and it seems there's not a topic with your data, I'm assuming this cannot be done directly. You can wait to see if some other user knows a direct approach :)
Comment by Orso on 2014-08-07:
A tf listener is required to record a transformation of a coordinate frame from tf to a bag file. No way around it that I could find. Thanks for the direction lucaluca.

