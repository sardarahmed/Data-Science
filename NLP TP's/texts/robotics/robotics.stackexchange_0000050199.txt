Q:

ROS Answers SE migration: map_server

Hi all!
I tried rosrun map_server map_server testmap.yaml and get the message
[rosrun] Couldn't find executable named map_server below /opt/ros/electric/stacks/navigation/map_server
[rosrun] Found the following, but they're either not files, 
[rosrun] or not executable:
[rosrun]   /opt/ros/electric/stacks/navigation/map_server
[rosrun]   /opt/ros/electric/stacks/navigation/map_server/include/map_server

Why it does not work?
Do I have anything to do after the installation, before i can start it?
Thanks for help!
The rosmake map_server does not work right:
(The bin folder is empty.)
[ rosmake ] Packages requested are: ['map_server']                              
[ rosmake ] Logging to directory/home/jaru/.ros/rosmake/rosmake_output-20130411-122637 
[ rosmake ] Expanded args ['map_server'] to: 
['map_server']                     
[ rosmake ] Checking rosdeps compliance for packages map_server.  This may take a few seconds. 
Failed to find rosdep sdl-image for package map_server on OS:ubuntu version:lucid 
WARNING: Rosdeps [u'sdl-image'] could not be resolved 
Failed to find rosdep sdl-image for package map_server on OS:ubuntu version:lucid 
[ rosmake ] rosdep check failed to find system dependencies: sdl-image          
[rosmake-0] Starting >>> cpp_common [ make ]                                    
[rosmake-0] Finished <<< cpp_common ROS_NOBUILD in package cpp_common           
[rosmake-1] Starting >>> rosbuild [ make ]                                      
[rosmake-1] Finished <<< rosbuild ROS_NOBUILD in package rosbuild 
 No Makefile in package rosbuild 
[rosmake-2] Starting >>> roslib [ make ]                                        
[rosmake-2] Finished <<< roslib ROS_NOBUILD in package roslib                   
[rosmake-3] Starting >>> bullet [ make ]                                        
[rosmake-0] Starting >>> rostime [ make ]                                       
[rosmake-1] Starting >>> roslang [ make ]                                       
[rosmake-2] Starting >>> roscpp_traits [ make ]                                 
[rosmake-1] Finished <<< roslang ROS_NOBUILD in package roslang 
 No Makefile in package roslang 
[rosmake-1] Starting >>> xmlrpcpp [ make ]                                      
[rosmake-0] Finished <<< rostime ROS_NOBUILD in package rostime                 
[rosmake-0] Starting >>> rosconsole [ make ]                                    
[rosmake-2] Finished <<< roscpp_traits ROS_NOBUILD in package roscpp_traits     
[rosmake-2] Starting >>> roscpp_serialization [ make ]                          
[rosmake-3] Finished <<< bullet ROS_NOBUILD in package bullet                   
[rosmake-0] Finished <<< rosconsole ROS_NOBUILD in package rosconsole           
[rosmake-1] Finished <<< xmlrpcpp ROS_NOBUILD in package xmlrpcpp               
[rosmake-2] Finished <<< roscpp_serialization ROS_NOBUILD in package roscpp_serialization 
[rosmake-0] Starting >>> std_msgs [ make ]                                      
[rosmake-2] Starting >>> rosclean [ make ]                                      
[rosmake-3] Starting >>> rosgraph [ make ]                                      
[rosmake-1] Starting >>> rosparam [ make ]                                      
[rosmake-0] Finished <<< std_msgs ROS_NOBUILD in package std_msgs               
[rosmake-2] Finished <<< rosclean ROS_NOBUILD in package rosclean               
[rosmake-2] Starting >>> rosmaster [ make ]                                     
[rosmake-1] Finished <<< rosparam ROS_NOBUILD in package rosparam               
[rosmake-0] Starting >>> rosgraph_msgs [ make ]                                 
[rosmake-2] Finished <<< rosmaster ROS_NOBUILD in package rosmaster             
[rosmake-1] Starting >>> rosunit [ make ]                                       
[rosmake-1] Finished <<< rosunit ROS_NOBUILD in package rosunit                 
[rosmake-0] Finished <<< rosgraph_msgs ROS_NOBUILD in package rosgraph_msgs     
[rosmake-3] Finished <<< rosgraph ROS_NOBUILD in package rosgraph               
[rosmake-1] Starting >>> angles [ make ]                                        
[rosmake-0] Starting >>> roscpp [ make ]                                        
[rosmake-2] Starting >>> rospy [ make ]                                         
[rosmake-1] Finished <<< angles ROS_NOBUILD in package angles                   
[rosmake-0] Finished <<< roscpp ROS_NOBUILD in package roscpp                   
[rosmake-2] Finished <<< rospy ROS_NOBUILD in package rospy                     
[rosmake-3] Starting >>> rosnode [ make ]                                       
[rosmake-3] Finished <<< rosnode ROS_NOBUILD in package rosnode                 
[rosmake-2] Starting >>> rosout [ make ]                                        
[rosmake-2] Finished <<< rosout ROS_NOBUILD in package rosout                   
[rosmake-2] Starting >>> roslaunch [ make ]                                     
[rosmake-2] Finished <<< roslaunch ROS_NOBUILD in package roslaunch 
 No Makefile in package roslaunch 
[rosmake-2] Starting >>> rostest [ make ]                                       
[rosmake-2] Finished <<< rostest ROS_NOBUILD in package rostest                 
[rosmake-2] Starting >>> topic_tools [ make ]                                   
[rosmake-0] Starting >>> message_filters [ make ]                               
[rosmake-2] Finished <<< topic_tools ROS_NOBUILD in package topic_tools         
[rosmake-0] Finished <<< message_filters ROS_NOBUILD in package message_filters 
[rosmake-2] Starting >>> rosbag [ make ]                                        
[rosmake-2] Finished <<< rosbag ROS_NOBUILD in package rosbag                   
[rosmake-2] Starting >>> rosbagmigration [ make ]                               
[rosmake-1] Starting >>> rosmsg [ make ]                                        
[rosmake-2] Finished <<< rosbagmigration ROS_NOBUILD in package rosbagmigration 
 No Makefile in package rosbagmigration 
[rosmake-2] Starting >>> geometry_msgs [ make ]                                 
[rosmake-1] Finished <<< rosmsg ROS_NOBUILD in package rosmsg 
 No Makefile in package rosmsg 
[rosmake-2] Finished <<< geometry_msgs ROS_NOBUILD in package geometry_msgs     
[rosmake-2] Starting >>> nav_msgs [ make ]                                      
[rosmake-1] Starting >>> sensor_msgs [ make ]                                   
[rosmake-3] Starting >>> rostopic [ make ]                                      
[rosmake-2] Finished <<< nav_msgs ROS_NOBUILD in package nav_msgs               
[rosmake-1] Finished <<< sensor_msgs ROS_NOBUILD in package sensor_msgs         
[rosmake-3] Finished <<< rostopic ROS_NOBUILD in package rostopic               
[rosmake-3] Starting >>> rosservice [ make ]                                    
[rosmake-3] Finished <<< rosservice ROS_NOBUILD in package rosservice           
[rosmake-3] Starting >>> roswtf [ make ]                                        
[rosmake-3] Finished <<< roswtf ROS_NOBUILD in package roswtf                   
[rosmake-3] Starting >>> tf [ make ]                                            
[rosmake-3] Finished <<< tf ROS_NOBUILD in package tf                           
[rosmake-3] Starting >>> map_server [ make ]                                    
[ rosmake ] Last 40 linesp_server: 12.5 sec ]        [ 1 Active 37/38 Complete ] 
{Check for working CXX compiler: /usr/bin/c++ -- works 
  -- Detecting CXX compiler ABI info 
  -- Detecting CXX compiler ABI info - done 
  -- Found PythonInterp: /usr/bin/python2.6 
  [rosbuild] Building package map_server 
  [rosbuild] Cached build flags older than manifests; calling rospack to get flags 
  [rosbuild] Including /opt/ros/electric/stacks/ros_comm/clients/roslisp/cmake/roslisp.cmake 
  [rosbuild] Including /opt/ros/electric/stacks/ros_comm/clients/rospy/cmake/rospy.cmake 
  [rosbuild] Including /opt/ros/electric/stacks/ros_comm/clients/cpp/roscpp/cmake/roscpp.cmake 
  -- Configuring done 
  -- Generating done 
  -- Build files have been written to: /opt/ros/electric/stacks/navigation/map_server/build 
  cd build && make -l4 
  make[1]: Entering directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  make[2]: Entering directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  make[3]: Entering directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  Scanning dependencies of target rospack_genmsg_libexe 
  make[3]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  [  0%] Built target rospack_genmsg_libexe 
  make[3]: Entering directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  Scanning dependencies of target rosbuild_precompile 
  make[3]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  [  0%] Built target rosbuild_precompile 
  make[3]: Entering directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  Scanning dependencies of target map_saver 
  make[3]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  make[3]: Entering directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  [ 33%] Building CXX object CMakeFiles/bin/map_saver.dir/src/map_saver.o 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:35:37: error: tf/LinearMath/Matrix3x3.h: No such file or directory 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp: In member function ‘void MapGenerator::mapCallback(const nav_msgs::OccupancyGridConstPtr&)’: 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:105: error: ‘tf’ has not been declared 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:105: error: expected ‘;’ before ‘mat’ 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:107: error: ‘mat’ was not declared in this scope 
  make[3]: *** [CMakeFiles/bin/map_saver.dir/src/map_saver.o] Error 1 
  make[3]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  make[2]: *** [CMakeFiles/bin/map_saver.dir/all] Error 2 
  make[2]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  make[1]: *** [all] Error 2 
  make[1]: Leaving directory [ 33%] Building CXX object CMakeFiles/bin/map_saver.dir/src/map_saver.o 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:35:37: error: tf/LinearMath/Matrix3x3.h: No such file or directory 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp: In member function ‘void MapGenerator::mapCallback(const nav_msgs::OccupancyGridConstPtr&)’: 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:105: error: ‘tf’ has not been declared 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:105: error: expected ‘;’ before ‘mat’ 
  /opt/ros/electric/stacks/navigation/map_server/src/map_saver.cpp:107: error: ‘mat’ was not declared in this scope 
  make[3]: *** [CMakeFiles/bin/map_saver.dir/src/map_saver.o] Error 1 
  make[3]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  make[2]: *** [CMakeFiles/bin/map_saver.dir/all] Error 2 
  make[2]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
  make[1]: *** [all] Error 2 
  make[1]: Leaving directory `/opt/ros/electric/stacks/navigation/map_server/build' 
-------------------------------------------------------------------------------} 
[ rosmake ] Output from build of package map_server written to: 
[ rosmake ]    /home/jaru/.ros/rosmake/rosmake_output-20130411-122637/map_server/build_output.log 
[rosmake-3] Finished <<< map_server [FAIL] [ 12.56 seconds ]                    
[ rosmake ] Halting due to failure in package map_server. 
[ rosmake ] Waiting for other threads to complete. 
[ rosmake ] Results:                                                            
[ rosmake ] Built 38 packages with 1 failures.                                  
[ rosmake ] Summary output to directory                                         
[ rosmake ] /home/jaru/.ros/rosmake/rosmake_output-20130411-122637            
[ rosmake ] WARNING: Rosdep did not detect the following system dependencies as installed: sdl-image Consider using --rosdep-install option or `rosdep install map_server` 

Originally posted by JaRu on ROS Answers with karma: 153 on 2013-04-09
Post score: 1

A:

This is weird. There should be an executable called map_server in that package. What does the following command give you?
$ ls -l /opt/ros/electric/stacks/navigation/map_server/bin/map_server 
-rwxr-xr-x 1 root root 1498250 2012-05-09 06:23 /opt/ros/electric/stacks/navigation/map_server/bin/map_server

Update: It looks like you are running rosmake as root (using sudo?) in the /opt/... directory. You should never do that. Something like this is probably also the cause of your problems. Instead, reinstall the deb package, as Felix suggested. The command is:
sudo apt-get install --reinstall ros-electric-navigation

Originally posted by Martin Günther with karma: 11816 on 2013-04-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by JaRu on 2013-04-11:
ls: cannot access /opt/ros/electric/stacks/navigation/map_server/bin/map_server: No such file or directory.
The bin folder exists, but he is empty. I think that is because I get error messages when I do rosmake map_server. I add this to my question, so you can look at it. Maybe you can help me.
Comment by Felix Endres on 2013-04-11:
Reinstall the respective ros package
Comment by JaRu on 2013-04-11:
I tried, but the command rosdep install map_server give me the command: Failed to find rosdep sdl-image for package map_server on OS:ubuntu version:lucid
rosdep install ERROR:
failed to install sdl-image
Comment by Martin Günther on 2013-04-11:
I've updated my answer, see above.
Comment by JaRu on 2013-04-12:
sudo apt-get install --reinstall ros-electric-navigation give the command that some packages could not installed, because ros-electric-navigation depend on libsdl-image1.2-dev, but should not installed because E: broken package
Comment by JaRu on 2013-04-13:
When I like to install libsdl-image1.2-dev I have the same problem, could not install, because depends on libsdl1.2-dev. But libsdl1.2-dev is already installed... I do not know what I can do now.
Comment by Martin Günther on 2013-04-13:
What it probably says that it depends on libsdl1.2-dev in a specific version that's newer than your installed version. Try sudo apt-get update; sudo apt-get dist-upgrade; sudo apt-get install libsdl-image1.2-dev. Hope that helps.
Comment by JaRu on 2013-04-15:
I tried, but unfortunately I got the same command, it does not work.
Comment by rasoo on 2016-07-05:
I am also having the same problem. I am using catkin and installed the map server. But I have only cmake folder
$ ls -l /opt/ros/indigo/share/map_server
total 8
drwxr-xr-x 2 root root 4096 Jul  3 02:32 cmake
-rw-r--r-- 1 root root 1326 Jun 25 06:02 package.xml

Comment by Felix Endres on 2016-07-08:
The information in this thread is for ROS electric. Things like the location of binaries have changed since then, so I suggest you write a new question.

