Q:

Laser scan message publishing error

I have a problem regarding publishing laser scan message. It is publishing but, rather, it works differently. The laser scan keeps on rotating pretty fast and it's normally shouldn't move so fast as the scan message doesn't have any other information like position and orientation. I'm willing to use only 90 degree of the middle region of the laser scan view/mirror. Perhaps, I've overlooked something that somebody could figure out. The laser scan data resides in a dataset file in which it starts from column of 10 to 1080.
            while (n.ok() && (t < num_row))
            {
                scan.header.frame_id = "laser";

                scan.angle_min = -45 * M_PI / 180; // -45 degree
                scan.angle_max = 45 * M_PI / 180;   // 45 degree

                scan.angle_increment = 0.25 * M_PI/180.0;

                scan.time_increment = (1 / laser_frequency) / (int)(90/0.25); 

                scan.range_min = 0.0;
                scan.range_max = 30.0;

                scan.ranges.resize((int)(90/0.25));

                for(int i = 0; i < 360; ++i)
                {
                     scan.ranges[i] = data_set[t][i+9+360] / 1000.0;
                }

                scan.header.stamp = ros::Time::now();

                scan_pub.publish(scan);

            }

Thanks in advance.

Originally posted by alfa_80 on ROS Answers with karma: 1053 on 2012-02-03
Post score: 0

Original comments
Comment by alfa_80 on 2012-02-05:
@DimitriProsser: When you have time, could you have a look on this issue: http://answers.ros.org/question/3855/strange-output-of-point-cloud-building
Comment by DimitriProsser on 2012-02-03:
Could you also be more descriptive of your error?
Comment by alfa_80 on 2012-02-03:
I've set 360 as such, because it's the lower bound by which it corresponds to 90(starts from left or right) deg of the scanning.
Comment by alfa_80 on 2012-02-03:
Maximum angle is 270 deg with 1080 points per scan line.
Comment by DimitriProsser on 2012-02-03:
Why are you adding 360 to the index of data_set? What is the native maximum angle of your scan?

A:

I've just solved it. Actually the culprit is because of the wrongly assigned number of column variable.

Originally posted by alfa_80 with karma: 1053 on 2012-02-03
This answer was ACCEPTED on the original site
Post score: 0

