Q:

save subscribed image when service is called

Hi all,
Is there any package to save subscribed image when service is called?
I also want to set filename format ("frame%04i.jpg", for example) to get sequential numbered image and save directory with rosparam.

Originally posted by atsushi_tsuda on ROS Answers with karma: 91 on 2012-08-07
Post score: 0

A:

I recommend using OpenCV for writing images. Generate a file name like this:
std::ostringstream jpg_filename;
jpg_filename << file_path << "frame" << count << ".jpg";
++count;

I guess there should be a variant to create a printf style formatted string too, but I haven't tried anything.
If you are not doing so already, you need to convert your sensor_msgs::Image to cv::Mat format. There is a nice tutorial for that.
And finally save your image.
cv::imwrite(jpg_filename.str(), your_cv_mat);

Make sure to define OpenCV as a dependency and include the right headers:
#include <fstream>
#include <opencv2/highgui/highgui.hpp>

Best
Tim

Originally posted by timster with karma: 396 on 2013-11-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Thomas on 2013-11-13:
Small note: Boost.Format should be used over printf in C++.

