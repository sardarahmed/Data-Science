Q:

Catkin_make not installing Python dependencies

How do you make catkin_make install all Python package dependencies via pip?
I've written a simple Python package with a setup.py file like:
#!/usr/bin/env python
from distutils.core import setup
from catkin_pkg.python_setup import generate_distutils_setup
d = generate_distutils_setup(
    version='0.0.1',
    packages=['mypackage'],
    package_dir={'': 'src'},
    install_requires=['somepackage'],
)
setup(**d)

And my CMakeLists.txt includes catkin_python_setup().
However, when I run catkin_make and source devel/setup.sh, somepackage isn't installed into the virtual environment.

Originally posted by Cerin on ROS Answers with karma: 940 on 2016-03-16
Post score: 2

A:

I wouldn't expect catkin_make to do that.
Instead, I'd expect rosdep to do that, however, it doesn't generally. Most python packages are defined in the rosdep distribution files in the form python-packagename. So you can add a run dependency on python-somepackage into package.xml and let rosdep install the package.
However, not all pip-installable packages are in rosdep's distribution lists. E.g. numpy and scikit-learn are there (as python-numpy and python-sklearn), but tensorflow is not. When the package is not present, you are, to my best knowledge, out of luck, and have to install it manually (or you can open a Pull request to rosdistro to add the pip package: http://docs.ros.org/independent/api/rosdep/html/contributing_rules.html )
You can verify by issuing
rosdep resolve python-somepackage

Originally posted by peci1 with karma: 1366 on 2017-01-26
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by mgruhler on 2017-01-26:
@peci1 you are right. However, if you need a  pip package which is somehow usable for the broader public, simply provide the respective rosdep rule:  http://docs.ros.org/independent/api/rosdep/html/contributing_rules.html
Comment by peci1 on 2017-01-26:
Thanks, I've edited the answer.
Comment by peci1 on 2017-01-26:
This led me to ask on the catkin issue tracker, what's actually the requires field doing. The answer is simple: nothing. Do not use it in ROS. I've added a few comments to the documentation, so that people are warned about that. Details here: https://github.com/ros-infrastructure/rosdep/issues/497

