Q:

moveit: param server is missing planner configurations

Hello all,
here are the errors,
[ERROR] [1528993777.322079817]: Could not find the planner configuration 'RRTConneckConfigDefault' on the param server
[ERROR] [1528993777.326028820]: Could not find the planner configuration 'SBLkConfigDefault' on the param server
[ERROR] [1528993777.326619022]: Could not find the planner configuration 'ESTkConfigDefault' on the param server
[ERROR] [1528993777.327209350]: Could not find the planner configuration 'LBKPIECEkConfigDefault' on the param server
[ERROR] [1528993777.327770784]: Could not find the planner configuration 'BKPIECEkConfigDefault' on the param server
[ERROR] [1528993777.328322494]: Could not find the planner configuration 'KPIECEkConfigDefault' on the param server
[ERROR] [1528993777.328897858]: Could not find the planner configuration 'RRTkConfigDefault' on the param server
[ERROR] [1528993777.329486582]: Could not find the planner configuration 'RRTConnectkConfigDefault' on the param server
[ERROR] [1528993777.330046872]: Could not find the planner configuration 'RRTstarkConfigDefault' on the param server
[ERROR] [1528993777.330620285]: Could not find the planner configuration 'TRRTkConfigDefault' on the param server
[ERROR] [1528993777.331185690]: Could not find the planner configuration 'PRMkConfigDefault' on the param server
[ERROR] [1528993777.331821514]: Could not find the planner configuration 'PRMstarkConfigDefault' on the param server
[ERROR] [1528993777.332365152]: Could not find the planner configuration 'FMTkConfigDefault' on the param server
[ERROR] [1528993777.332903057]: Could not find the planner configuration 'BFMTkConfigDefault' on the param server
[ERROR] [1528993777.333557242]: Could not find the planner configuration 'PDSTkConfigDefault' on the param server
[ERROR] [1528993777.334391734]: Could not find the planner configuration 'STRIDEkConfigDefault' on the param server
[ERROR] [1528993777.335209338]: Could not find the planner configuration 'BiTRRTkConfigDefault' on the param server
[ERROR] [1528993777.337834268]: Could not find the planner configuration 'LBTRRTkConfigDefault' on the param server
[ERROR] [1528993777.340810491]: Could not find the planner configuration 'BiESTkConfigDefault' on the param server
[ERROR] [1528993777.343505094]: Could not find the planner configuration 'ProjESTkConfigDefault' on the param server
[ERROR] [1528993777.344906710]: Could not find the planner configuration 'LazyPRMkConfigDefault' on the param server
[ERROR] [1528993777.346300595]: Could not find the planner configuration 'LazyPRMstarkConfigDefault' on the param server
[ERROR] [1528993777.347891216]: Could not find the planner configuration 'SPARSkConfigDefault' on the param server
[ERROR] [1528993777.352570257]: Could not find the planner configuration 'SPARStwokConfigDefault' on the param server

i know they are from the drop down menu of the OMPL planning library section. what should i edit to fix this?
EDIT:
Current ompl_planning.yaml (fixed through the fix i mentioned)
planner_configs:
  SBL:
    type: geometric::SBL
    range: 0.0  # Max motion added to tree. ==> maxDistance_ default: 0.0, if 0.0, set on setup()
  EST:
    type: geometric::EST
    range: 0.0  # Max motion added to tree. ==> maxDistance_ default: 0.0, if 0.0 setup()
    goal_bias: 0.05  # When close to goal select goal, with this probability. default: 0.05
  LBKPIECE:
    type: geometric::LBKPIECE
    range: 0.0  # Max motion added to tree. ==> maxDistance_ default: 0.0, if 0.0, set on setup()
    border_fraction: 0.9  # Fraction of time focused on boarder default: 0.9
    min_valid_path_fraction: 0.5  # Accept partially valid moves above fraction. default: 0.5
  BKPIECE:
    type: geometric::BKPIECE
    range: 0.0  # Max motion added to tree. ==> maxDistance_ default: 0.0, if 0.0, set on setup()
    border_fraction: 0.9  # Fraction of time focused on boarder default: 0.9
    failed_expansion_score_factor: 0.5  # When extending motion fails, scale score by factor. default: 0.5
    min_valid_path_fraction: 0.5  # Accept partially valid moves above fraction. default: 0.5
  ...
manipulator:
  default_planner_config: RRTConnect
  planner_configs:
    - SBL
    - EST
    - LBKPIECE
    - BKPIECE
    - ...
  projection_evaluator: joints(joint_1,joint_2)
  longest_valid_segment_fraction: 0.005

Prior to the fix, all of the names under the "planner_configs:" line were concatenated with kConfigDefault, along with the base names up top such as TRRT, RRTConnect, etc. Moveit looks for the base names, and a default, but if all of them are labeled default like mine was, it caused an issue.

Originally posted by nquattro on ROS Answers with karma: 38 on 2018-06-14
Post score: 1

Original comments
Comment by Sanddog23 on 2018-06-18:
Have you found a solution to this problem? I am currently going through the same problem. Thanks!
Comment by Sanddog23 on 2018-06-18:
I believe this is because of a recent update to moveit. Because now the motion planning window is different than it was before
Comment by gvdhoorn on 2018-06-19:
Afaik the motion planning window (you mean the rviz plugin?) doesn't set these. The launch file(s) do(es).
Comment by nquattro on 2018-06-19:
gvdhoorn, the moveit setup assistant creates a .yaml file when you create a moveit config package. it ends up concatenating kconfigdefault to the end of the planner names and confused the system because now RRTConnect is RRTConnectkConfigDefault
Comment by gvdhoorn on 2018-06-19:
RRTConnectkConfigDefault is a valid planner configuration name. I don't recognise that as an issue per se.
If you feel this is a regression, then I recommend reporting this over at ros-planning/moveit/issues.
Comment by gvdhoorn on 2018-06-19:
@nquattro: can you please include an example ompl_planning.yaml that shows the problem?
Please add it to your original question (edit it).
Comment by gvdhoorn on 2018-06-19:
@nquattro: the kConfigDefault should actually be there, for all entries. The changes you suggest in your answer are essentially a 'reverse fix' (ie: you remove something, while it should probably be added). Compare with existing ompl_planning.yaml files.
Please open an issue about this.
Comment by Sanddog23 on 2018-06-19:
Is there a reason why it could still be planning even with these errors showing up?
Comment by gvdhoorn on 2018-06-20:\

Is there a reason why it could still be planning even with these errors showing up?

I can't say. Some planners might have defaults that will let them work, even though it might not be in an optimal way.

A:

The only solution i have found, and be careful when you adjust these, is to comment the section that concatenates the planner name with the kConfigDefault out entirely. i haven't ran into any issues from doing this, but if it screws up anything else let me know:
the CPP file you have to edit is moveit_config_data.cpp, and you need to be running moveit from the git repo or else you don't have this file
search for these lines:
// Output associated planners
emitter << YAML::Key << "default_planner_config" << YAML::Value
        << group_meta_data_[group_it->name_].default_planner_ + "kConfigDefault";
emitter << YAML::Key << "planner_configs";
emitter << YAML::Value << YAML::BeginSeq;
for (std::size_t i = 0; i < pconfigs.size(); ++i)
  emitter << pconfigs[i] + "kConfigDefault"
emitter << YAML::EndSeq;

mainly just search for kconfigdefault, and you'll find the section.
change it to
// Output associated planners
emitter << YAML::Key << "default_planner_config" << YAML::Value
        << group_meta_data_[group_it->name_].default_planner_;// + "kConfigDefault";
emitter << YAML::Key << "planner_configs";
emitter << YAML::Value << YAML::BeginSeq;
for (std::size_t i = 0; i < pconfigs.size(); ++i)
  emitter << pconfigs[i];//+ "kConfigDefault"
emitter << YAML::EndSeq;

all i did was literally comment out the section that concatenated the text to the planner names. once you comment that out, catkin make, then launch setup assistant, recreate all of the moveit files, and it should be fine. yaml files are just data packets, so if you rename the packet that its looking for, like the above code did, it cannot find it and it gets confused. but once you comment it out, everything in the yaml file that is generated now coincides, and the planner names at the top of the ompl_planning.yaml now match the planning configs at the bottom, where the array of names for the planners are arranged. i believe that this is probably some small Boolean issue, but at this point this seems to work, generate a moveit config folder that works and i haven't had any issues yet.
but do post is this helped you and worked, Sanddog23, im curious.

Originally posted by nquattro with karma: 38 on 2018-06-19
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Sanddog23 on 2018-06-19:
It would probably be best if I gave some context on what I am doing. I am trying to plan pre-defined paths of a 6 joint dynamixel arm using the RViz Motion Planning tool. Before updating to the newest version of the moveit library this Motion Planning tool looked different than it does now.
Comment by Sanddog23 on 2018-06-19:
Even though I am still getting those errors I can still plan movements to my arm through this motion planning tool. It also seems to be smoother when moving to different paths. I am debating on whether to revert back to the previous release of moveit before these updates took place.
Comment by Sanddog23 on 2018-06-19:
Some control code that I wrote for my arm to needs to be changed because now the library is different for MoveGroupCommander which now takes a 'ns' parameter when initializing where it hadn't before.
Comment by Sanddog23 on 2018-06-19:
I did not attempt to try this fix because I am still getting planning abilities...
Comment by gvdhoorn on 2018-06-20:
Really: please report this as an issue on the moveit issue tracker.
@Sanddog23 and @nquattro: is there some reason you're not willing to do this?
Comment by nquattro on 2018-06-21:
@gvdhoorn, Terribly sorry, I have been busy, and it has not created an error for me since. I will post a link to my issue on: https://github.com/ros-planning/moveit/issues/955?_pjax=%23js-repo-pjax-container
sorry about the lateness, and I appreciate the help you have given me.
Comment by gvdhoorn on 2018-06-21:
No need to be terribly sorry about it. I was just surprised by the apparent unwillingness to report this as an issue. But it's done and that's ok.
Comment by akosodry on 2018-07-12:
Hello. Has the issue been solved? Or the 'reverse fix' is the only solution? I have the same problem as the one described in the original question. Thank you in advance.
Comment by nquattro on 2018-07-12:
As far as I know, it is the only one that worked. But you can read up on the github updates on the prior comment. I don't want to select it as working until i get feedback saying it worked for others.
Comment by akosodry on 2018-07-12:
Yes, i checked the github updates, but did not find any other solution for the problem. It is mentioned in your answer that the git repo shall be used. Does it mean that its enough if i do git clone https://github.com/ros-planning/moveit in catkin_ws/src then modify the cpp and do catkin_make?
Comment by nquattro on 2018-07-12:
I believe that should work. I already had the files inside my src folder, so i just went in there and modified them. I Believe that was the process to get them in my folder, however.

