Q:

pointgrey_camera_driver fails to compile

I'm trying to follow the navigation tutorials for the Clearpath Jackal here:
http://www.clearpathrobotics.com/assets/guides/ros/ROS%20Navigation%20Basics.html
However after installing everything from github in the jackal_navigation/src/ directory, it fails at the 'catkin make' stage and gives me this error:
-- +++ processing catkin package: 'pointgrey_camera_driver'
-- ==> add_subdirectory(pointgrey_camera_driver/pointgrey_camera_driver)
-- libflycapture not found in system library path
INFO:root:Logging into ptgrey.com.
INFO:root:Downloading SDK archive.
INFO:root:Unpacking tarball.
Traceback (most recent call last):
  File "/home/user/autosys_repo1/jackal_navigation/src/pointgrey_camera_driver/pointgrey_camera_driver/cmake/download_flycap", line 81, in <module>
    with tarfile.open(mode="r:gz", fileobj=cStringIO.StringIO(resp.read())) as tar:
  File "/usr/lib/python2.7/tarfile.py", line 1678, in open
    return func(name, filemode, fileobj, **kwargs)
  File "/usr/lib/python2.7/tarfile.py", line 1730, in gzopen
    raise ReadError("not a gzip file")
tarfile.ReadError: not a gzip file
-- libflycapture library: /home/user/autosys_repo1/jackal_navigation/devel/lib/libflycapture.so.2
-- libflycapture include: /home/user/autosys_repo1/jackal_navigation/build/pointgrey_camera_driver/pointgrey_camera_driver/usr/include
-- Configuring done
-- Generating done
-- Build files have been written to: /home/user/autosys_repo1/jackal_navigation/build

which is later followed by:
Scanning dependencies of target PointGreyCamera
make[2]: *** No rule to make target `/home/user/autosys_repo1/jackal_navigation/devel/lib/libflycapture.so.2', needed by `/home/user/autosys_repo1/jackal_navigation/devel/lib/libPointGreyCamera.so'.  Stop.
make[2]: *** Waiting for unfinished jobs....
[ 73%] Building CXX object pointgrey_camera_driver/pointgrey_camera_driver/CMakeFiles/PointGreyCamera.dir/src/PointGreyCamera.cpp.o
In file included from /home/user/autosys_repo1/jackal_navigation/src/pointgrey_camera_driver/pointgrey_camera_driver/src/PointGreyCamera.cpp:32:0:
/home/user/autosys_repo1/jackal_navigation/src/pointgrey_camera_driver/pointgrey_camera_driver/include/pointgrey_camera_driver/PointGreyCamera.h:46:36: fatal error: flycapture/FlyCapture2.h: No such file or directory
#include "flycapture/FlyCapture2.h"
                                ^
compilation terminated.

and:
Scanning dependencies of target image_exposure_msgs_generate_messages
[ 89%] Built target image_exposure_msgs_generate_messages
make[2]: *** [pointgrey_camera_driver/pointgrey_camera_driver/CMakeFiles/PointGreyCamera.dir/src/PointGreyCamera.cpp.o] Error 1
make[1]: *** [pointgrey_camera_driver/pointgrey_camera_driver/CMakeFiles/PointGreyCamera.dir/all] Error 2
make: *** [all] Error 2
Invoking "make -j2 -l2" failed

At this point the compilation fails completely and kicks me back to the command prompt "user@system:"
I'm currently using a VM running Ubuntu 14.04 LTS with ROS Indigo. This worked perfectly fine a few week ago, and I get the exact same error on a fresh VM install of Ubuntu/ROS so I assume this indicates a problem with the flycapture libraries, downloading them from the website or otherwise the library isn't present in the main ROS library (which it isn't but that didn't appear to be an issue previously). But I'm not sure if its a bug or something I've done wrong.
Does anyone else experience the same problem working through the same tutorial? And does anyone know how this might be solved?

Originally posted by M@t on ROS Answers with karma: 2327 on 2016-05-02
Post score: 1

A:

Problem: When installing and compiling the pointgrey_camera_driver (as part of a tutorial or otherwise) cmake fails to build the package, giving an error similar to the one above.
Cause: pointgrey_camera_driver requires the Point Grey SDK, which cmake will automatically try to download it if cannot detect the SDK already on your system. However (and I may be wrong in this, so please correct me if I am), if the SDK version has changed and the pointgrey_camera_driver cmake file has not been updated to reflect this, the SDK will not install properly and the header files will not be present. This will cause cmake to crash during compilation, producing the error seen above.
Solution: Manually install the SDK version you need. In the pointgrey_camera_driver source files, open pointgrey_camera_driver/cmake/download_flycap and look for a section of code similar to this:
'x86_64': (
    'https://www.ptgrey.com/support/downloads/10594', (
        'flycapture2-2.9.3.13-amd64/libflycapture-2.9.3.13_amd64.deb',
        'flycapture2-2.9.3.13-amd64/libflycapture-2.9.3.13_amd64-dev.deb'),
    'usr/lib/libflycapture.so.2.9.3.13'),

This will tell you what version of the SDK cmake is expecting and where to get it. Then:

Follow the url
Log in (there will likely be a email and password just above this segment of code that you can use)
Download the SDK and unpack it
Open the readme file and it will guide you through the installation process
Re-download the pointgrey-camera_driver files and compile them.

Cmake should now recognize the SDK version you've just installed and skip trying to download it from the Point Grey website. This should fix the problem.

Originally posted by M@t with karma: 2327 on 2016-05-02
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by M@t on 2016-05-31:
It seems that pointgrey_camera_driver has been updated so this should no longer be a problem. However, it will still be useful for anyone who tries to install the driver after the next SDK change and before the driver is updated again.

