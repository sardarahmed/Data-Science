Q:

How to use lsd_slam with usb camera?

I install lsd_slam from  here. I run succesfully lsd_slam with .bag files from taken here. I want to try lsd_Slam with usb camera or image sequence. To do it, I run below commands :
roscore
rosrun lsd_slam_viewer viewer
rosrun lsd_slam_core live_slam  /image:=/usb_cam/image_raw _calib:=pinhole_example_calib.cfg
roslaunch slam.launch

slam.launch
<launch>
<!-- Activate the color webcam. -->
<node name="usb_cam" pkg="usb_cam" type="usb_cam_node" output="screen" >
    <param name="video_device" value="/dev/video0" />
    <param name="image_width" value="640" />
    <param name="image_height" value="480" />
    <param name="pixel_format" value="yuyv" />
    <param name="camera_frame_id" value="usb_cam" />
    <param name="io_method" value="mmap" />
</node>
<!-- Convert the color webcam's output to mono. -->
<node name="to_mono_node1" pkg="image_proc" type="image_proc" ns="usb_cam" />
<!-- Display the mono stream. -->
<node name="image_view" pkg="image_view" type="image_view" respawn="false" output="screen">
    <remap from="image" to="/usb_cam/image_mono" />
    <param name="autosize" value="true" />
</node>
</launch>

Error is :
Input resolution: 752 480
In: 0.527334 0.827306 0.473568 0.499436 0.000000
NO RECTIFICATION
Output resolution: 752 480
Prepped Warp matrices
Started  constraint search thread!
Started mapping thread!
Started optimization thread 
UndistorterPTAM: input image size differs from expected input size! Not undistorting.
Doing Random initialization!
Segmentation fault (core dumped)

I use ros-indigo, ubuntu 14.04. How can I run lsd_slam with images or usb camera frames?

Originally posted by jossy on ROS Answers with karma: 83 on 2015-07-04
Post score: 0

A:

The error is complaining about your input image size.
Modify your "pinhole_example_calib.cfg", and don't forget to change the camera parameters in the first line. You can get those parameters by calibrating your camera with ptam's tool.
0.527334 0.827306 0.473568 0.499436 0
640 480 
crop
640 480 

Originally posted by Po-Jen Lai with karma: 1371 on 2015-07-04
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jossy on 2015-07-04:
ptam's tool uses catkin, but lsd_slam uses rosbuild. If I use rosbuild_ws/package_dir$ rosrun camera_calibration cameracalibrator.py --size 8x5 --square 0.030 image:=/usb_cam/image_raw --no-service-check , isn't it  sufficient calibration task?
Comment by Po-Jen Lai on 2015-07-04:
Yeah, it should be sufficient. But the question is how to link these parameters.
http://answers.ros.org/question/212251/whats-the-relationship-between-camera-calibration-values-in-ethzasl_ptam-camera_calibration/
Comment by jossy on 2015-07-06:
Thanks your help. But this link has a only question. It hasn't an answer.
Comment by Po-Jen Lai on 2015-07-06:
Yes, because I am also trying to figure out how to interpret these parameters...maybe by tracing the code: https://github.com/ethz-asl/ethzasl_ptam/blob/master/ptam/src/CameraCalibrator.cc
But for now I don't have much time on this project.

