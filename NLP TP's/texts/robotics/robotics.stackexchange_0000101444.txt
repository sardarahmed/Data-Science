Q:

Undefined reference error while building

I am trying to update my version of rtabmap to the current one on Ubuntu 20.04 with ros noetic. While following the instructions below from here:
############ rtabmap ###########
$ cd rtabmap
$ git pull origin master
$ cd build
$ make #<-- This is where I get the error
$ make install # Do "sudo make install" if you installed rtabmap in "/usr/local"

############ rtabmap_ros###########
$ roscd rtabmap_ros
$ git pull origin master
$ roscd
$ cd ..
$ catkin_make -j1 --pkg rtabmap_ros

At the indicated point, I end up with the following error:
(base) zippyzoo77@MountainLion:~/rtabmap/build$ make
[ 4%] Built target rtabmap_utilite
[ 5%] Built target res_tool
[ 42%] Built target rtabmap_core
[ 80%] Built target rtabmap_gui
[ 81%] Linking CXX executable ../../bin/rtabmap
/usr/bin/ld: ../../bin/librtabmap_core.so.0.20.19: undefined reference to `octomath::Pose6D::Pose6D(octomath::Pose6D const&)'
collect2: error: ld returned 1 exit status
make[2]: *** [app/src/CMakeFiles/rtabmap.dir/build.make:243: bin/rtabmap] Error 1
make[1]: *** [CMakeFiles/Makefile2:993: app/src/CMakeFiles/rtabmap.dir/all] Error 2
make: *** [Makefile:152: all] Error 2

I have done all the proper steps and have octomap installed, so I really don't know what could be causing this error. Any help on debugging this so I can get rtabmap up and working would be greatly appreciated. Thanks!
I also get this warning (for over a dozen libraries in the same location) during a previous install step, which I think may be at the root of the problem. What could cause my installation of ROS to be doing this to my files, and how can I fix this?
CMake Warning at examples/NoEventsExample/CMakeLists.txt:64 (ADD_EXECUTABLE):
  Cannot generate a safe runtime search path for target noEventsExample
  because files in some directories may conflict with libraries in implicit
  directories:

    runtime library [liboctomap.so.1.9] in /usr/lib/x86_64-linux-gnu may be hidden by files in:
      /opt/ros/noetic/lib
    runtime library [liboctomath.so.1.9] in /usr/lib/x86_64-linux-gnu may be hidden by files in:
      /opt/ros/noetic/lib

  Some of these libraries may not be found correctly.

Originally posted by zippyzoo77 on ROS Answers with karma: 13 on 2022-03-31
Post score: 0

Original comments
Comment by Petros ADLATUS on 2022-03-31:
hey,
if your create the workspace it is catkin_make or not?
Comment by zippyzoo77 on 2022-04-05:
Eventually it is catkin_make yes, but that's not where I was running into trouble. I still don't know what was causing this, I eventually ended up just completely uninstalling rtabmap and reinstalling it.

A:

I just had the same error. It seemed I forgot to source my ros installation (where the octomap was installed) before the build.
After I sourced /opt/ros/noetic/setup.bash it built just fine.

Originally posted by moooeeeep with karma: 194 on 2022-08-11
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by efe on 2023-01-24:
where did you source it to by the way?
Comment by moooeeeep on 2023-01-26:
To the shell where I run the build command.
Comment by matlabbe on 2023-01-27:
More info from this post:

On Noetic, another cause is that both liboctomap-dev and ros-noetic-octomap may be installed at the same time (some ros packages depend on the system version, and others on the noetic version). Cleanup rtabmap's build directory, make sure you sourced /opt/ros/noetic/setup.bash and redo cmake/make. Rtabmap's cmake should find the version in /opt/ros/noetic first, thus it will work with ros-noetic-octomap-msgs used by rtabmap_ros, and the undefined reference error won't show up.

