Q:

Depth image from a Disparity image

Hi there,
I am using a Bumblebee2 stereo camera, and with the "stereo_image_proc"  node, I am able to get the disparity image of the scene, as well as the point cloud...
But It would be more useful for me to have a normal grey-scale image. I know it is straightforward to get it from the disparity information, just applying the formula Z(depth) = T*f (camera parameters) / d (disparity), but I guess there should be another done performing this as well as the interpolation of the  "NaN", "0", or "inf" pixels of the disparity image...
Any help? I've been looking around but couldn't find any.
Thanks!

Originally posted by vvaquero on ROS Answers with karma: 46 on 2014-05-16
Post score: 1

A:

I faced the same problem and implemented a conversion nodelet based on the pointcloud2 nodelet in stereo_image_proc. The whole thing isn´t very polished (it´s still subscribing to the left camera image, although it wouldn´t have to for example) but it generates depth images as needed. See here on github and this example launch file.
/edit: Also created issue 71 at image_pipeline github on the topic.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2014-05-19
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by lilouch on 2015-04-07:
How do you run your package Stefan please ? I got an error and a Fatal error when i tried to use it. Thank
Comment by Wintermute on 2018-10-04:
Hi, Stefan. I'm using your disparity_image_proc package to convert disparity image from stereo camera to depth image. Unfortunately depth image topic has no messages. I've posted the issue on the github, if you have time could you please give a hint on what possibly be wrong

