Q:

Trying to build ardrone_autonomy from source on my Ubuntu MATE on my Raspberry Pi and failing

Currently, I am trying to build the ardrone_autonomy package, so that I can start using it in my project. I am following the instructions in question 1, due to the fact that we have discerned that ardrone_autonomy cannot be installed directly on an ARM device in question 2. question 1's last instruction was to invoke catkin_make, and while this is being done, I get the errors below:
Building ARDroneTool/Lib
dep Platform/x86/UVLC/uvlc_codec.c
dep Platform/x86/video_utils.c
dep UVLC/uvlc_picture_layer.c
dep UVLC/uvlc_mb_layer.c
dep UVLC/uvlc_gob_layer.c
dep UVLC/uvlc.c
dep UVLC/uvlc_codec.c
dep Stages/vlib_stage_encode.c
dep Stages/vlib_stage_decode.c
dep P264/video_p264.c
dep P264/p264_picture_layer.c
dep P264/p264_mb_layer.c
dep P264/p264_gob_layer.c
dep P264/p264.c
dep P264/p264_codec.c
dep P264/p264_merge.c
dep P264/p264_inter_mc.c
dep P264/p264_intra_pred.c
dep P264/p264_Qp.c
dep P264/p264_transform.c
dep P264/p264_zigzag.c
dep P263/p263_picture_layer.c
dep P263/p263_gob_layer.c
dep P263/p263_mb_layer.c
dep P263/p263_huffman.c
dep P263/p263_codec.c
dep video_quantizer.c
dep video_picture.c
dep video_packetizer.c
dep video_macroblock.c
dep video_huffman.c
dep video_dct.c
dep video_mem32.c
dep video_controller.c
dep video_codec.c
cc video_codec.c
cc video_controller.c
cc video_mem32.c
/tmp/ccCA8dy9.s: Assembler messages:
/tmp/ccCA8dy9.s:74: Error: bad instruction `bswap r3'
generic.makefile:231: recipe for target '../../Soft/Build/targets_versions/vlib_PROD_MODE_Linux_4.1.19-v7+_GNU_Linux_usrbingcc_5.4.0/video_mem32.o' failed
make[8]: *** [../../Soft/Build/targets_versions/vlib_PROD_MODE_Linux_4.1.19-v7+_GNU_Linux_usrbingcc_5.4.0/video_mem32.o] Error 1
vlib.makefile:104: recipe for target 'all' failed
make[7]: *** [all] Error 2
Makefile:167: recipe for target 'build_vlib' failed
make[6]: *** [build_vlib] Error 2
Makefile:170: recipe for target 'all' failed
make[5]: *** [all] Error 2
Makefile:84: recipe for target 'build_libs' failed
make[4]: *** [build_libs] Error 2
Makefile:20: recipe for target 'all' failed
make[3]: *** [all] Error 2
ardrone_autonomy/CMakeFiles/ardronelib.dir/build.make:110: recipe for target '/home/sharand/catkin_ws/devel/src/ardronelib-stamp/ardronelib-build' failed
make[2]: *** [/home/sharand/catkin_ws/devel/src/ardronelib-stamp/ardronelib-build] Error 2
CMakeFiles/Makefile2:532: recipe for target 'ardrone_autonomy/CMakeFiles/ardronelib.dir/all' failed
make[1]: *** [ardrone_autonomy/CMakeFiles/ardronelib.dir/all] Error 2
Makefile:138: recipe for target 'all' failed
make: *** [all] Error 2
Invoking "make -j4 -l4" failed

Don't hesitate to ask me if more of a log is needed. I do not understand what the error here is. Is it the fact that I don't have whatever vlib_PROD_MODE_Linux_4.1.19-v7+_GNU_Linux_usrbingcc_5.4.0/video_mem32.o is? Would I have to switch to Raspbian to get through this?

Originally posted by sharan100 on ROS Answers with karma: 83 on 2017-01-23
Post score: 0

A:

This issue over here perfectly describes what needs to be done.
First off, Edit ardrone_autonomy/CMakeList.txt and replace line 80 and 81, which are:
GIT_REPOSITORY git://github.com/AutonomyLab/ardronelib.git
GIT_TAG bdacd1cbd3fbc54263d29e6e2067265e5941d10e

with:
GIT_REPOSITORY https://github.com/PhilippeMorere/ardronelib.git 
GIT_TAG 53af2ad47cbfea022f70ca1360daa7974369d6b3

Make sure you limit the number of threads during compilation:
export ROS_PARALLEL_JOBS=-j2

and finally invoke catkin_make.
P.S. Now if you have a problem with ffmpeg, like I did, just invoke sudo apt-get remove ffmpeg and it should be working (At least in my case).

Originally posted by sharan100 with karma: 83 on 2017-01-23
This answer was ACCEPTED on the original site
Post score: 0

