Q:

Problem when using navigation stack in the rviz

Hello everybody,
I'm trying to using navigation stack in the rviz. I have the launch file looks like this:
 <launch>
    <param name="/use_sim_time" value="false" />
     <arg name="urdf_file" default="$(find xacro)/xacro.py '$(find smartcar_description)/urdf/smartcar.urdf.xacro'" />
    <arg name="gui" default="false" />
    <param name="robot_description" command="$(arg urdf_file)" />
    <param name="use_gui" value="$(arg gui)"/>
 
    <node  name="arbotix" pkg="arbotix_python" type="arbotix_driver" output="screen">
        <rosparam command="delete" param="/arbotix" />
        <rosparam file="$(find smartcar_description)/config/smartcar_arbotix.yaml" command="load" />
        <param name="sim" value="true"/>
        </node>
    <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" >
    </node>
        <node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher">
        <param name="publish_frequency" type="double" value="20.0" />
        </node> 
      <node name="map_server" pkg="map_server" type="map_server" args="$(find rbx1_nav)/maps/test_map.yaml"/>  
     <include file="$(find rbx1_nav)/launch/fake_move_base_amcl.launch" />
     <node pkg="fake_localization" type="fake_localization" name="fake_localization" clear_params="true" output="screen">
      <remap from="base_pose_ground_truth" to="odom" />
      <param name="global_frame_id" value="map" />
      <param name="base_frame_id" value="base_link" />
       </node>
 <node name="rviz" pkg="rviz" type="rviz" args="-d $(find rbx1_nav)/nav.rviz" />  
</launch>

My  fake_move_base_amcl.launch file looks like this:
<launch>

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" clear_params="true" output="screen">
    <rosparam file="$(find rbx1_nav)/config/fake/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find rbx1_nav)/config/fake/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find rbx1_nav)/config/fake/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find rbx1_nav)/config/fake/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find rbx1_nav)/config/fake/base_local_planner_params.yaml" command="load" />
  </node>
  
</launch>

when I run the launch file,there are map and RobotModel.But no autonomous navigation.
The Warning as  following:
[INFO] [WallTime: 1441624427.388872] Started DiffController (base_controller). Geometry: 0.26m wide, 4100.0 ticks/m.
process[rviz-8]: started with pid [16162]
[ WARN] [1441624432.486553111]: Waiting on transform from base_footprint to map to become available before running costmap, tf error: 
[ WARN] [1441624437.562957259]: Waiting on transform from base_footprint to map to become available before running costmap, tf error: 

Thank you for any kind of help..
the tf tree looks like:

Originally posted by Alice63 on ROS Answers with karma: 63 on 2015-09-07
Post score: 0

Original comments
Comment by David Lu on 2015-09-07:
What does the transform tree look like between map and base_footprint?
Comment by Alice63 on 2015-09-07:
@David Lu    I have uploaded  the image  of  tf tree

A:

One of your config files, most likely for move_base is specifying the base frame for the robot as base_footprint. It should be base_link instead.

Originally posted by David Lu with karma: 10932 on 2015-09-08
This answer was ACCEPTED on the original site
Post score: 3

