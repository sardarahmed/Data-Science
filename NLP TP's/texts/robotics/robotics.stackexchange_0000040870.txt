Q:

Running Gazebo headless in Fuerte over SSH

I am trying to run gazebo in headless mode over SSH but gazebo is crashing. I tried to run roslaunch gazebo_worlds empty_world_no_x.launch and I got the following:
Dbg pluginPaths and GAZEBO_PLUGIN_PATH doesn't exist.Set GAZEBO_PLUGIN_PATH to Ogre's installation path. ...or are you loading via SystemPlugins?
Msg Waiting for master[ INFO] [1338188893.944008919]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...
Msg Connected to gazebo master @ http://localhost:11345
Exception [RenderEngine.cc:505] Can't open display: 
Error [Rendering.cc:37] Failed to load the Rendering engine subsystem
Can't open display: 
Exception [RenderEngine.cc:505] Can't open display: 
Exception [Sensors.cc:39] Unable to load the rendering engine
terminate called after throwing an instance of 'gazebo::common::Exception'
Aborted (core dumped)
[gazebo-2] process has died [pid 4158, exit code 134, cmd /opt/ros/fuerte/stacks/simulator_gazebo/gazebo/scripts/gazebo -r /opt/ros/fuerte/stacks/simulator_gazebo/gazebo_worlds/worlds/empty.world __name:=gazebo __log:=/home/cameronlee/.ros/log/e3a86b5c-a893-11e1-9065-f46d040632e2/gazebo-2.log].
log file: /home/cameronlee/.ros/log/e3a86b5c-a893-11e1-9065-f46d040632e2/gazebo-2*.log

How come it is trying to "open a display" and "load the rendering engine" when I am running gazebo headless?
I also used NoMachine NX to get a virtual desktop and tried to run gazebo in headless mode (I ran roslaunch gazebo_worlds empty_world_no_x.launch), and it hangs after displaying the following:
Dbg pluginPaths and GAZEBO_PLUGIN_PATH doesn't exist.Set GAZEBO_PLUGIN_PATH to Ogre's installation path. ...or are you loading via SystemPlugins?
Msg Waiting for master[ INFO] [1338189191.179503188]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...
Msg Connected to gazebo master @ http://localhost:11345
X Error of failed request:  BadMatch (invalid parameter attributes)
  Major opcode of failed request:  147 (GLX)
  Minor opcode of failed request:  5 (X_GLXMakeCurrent)
  Serial number of failed request:  19
  Current serial number in output stream:  19

Again, why does running gazebo in headless mode have anything to do with GLX?

Originally posted by clee2693 on ROS Answers with karma: 71 on 2012-05-27
Post score: 3

A:

This might get you a little further down the path, but apparently even headless gazebo needs to know where to display (and localhost:0 is a no no... when I have time I'll have to look up why)

DISPLAY=:0 roslaunch gazebo_worlds
empty_world_no_x.launch

Originally posted by SL Remy with karma: 2022 on 2012-05-30
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by mbforbes on 2014-07-16:
Any more info from the asker, or the answerer?
I'm trying to do this in ROS Groovy (Gazebo 1.5) and having the same issue. gui:=false doesn't help, and running with DISPLAY=:0 does get me farther, but it still seg faults after everything starts up.
Many thanks!

