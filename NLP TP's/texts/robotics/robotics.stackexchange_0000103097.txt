Q:

IR Range sensor data not visualizing in RViz

Hello, I'm trying to visualize the Time of Flight sensor data reading on Rviz.
The first image shows the echo of data received from my sensor /tof2,

https://ibb.co/0DyMyjp
this is the Rviz view. As you can see the sensor is properly detected under "Range" but it is not visualized in Rviz. what seems to be the issue here and how can I resolve it?
Im using ROS Noetic

https://ibb.co/MCPJqr4
Thank you in advance!

Originally posted by Dinoj on ROS Answers with karma: 3 on 2023-03-07
Post score: 0

Original comments
Comment by gvdhoorn on 2023-03-07:
I'm sorry to have to do this for something seemingly minor, but please don't post screenshots of terminal text or source code in question on ROS Answers. It's all text, so there is no need. Just copy-paste the text from the terminal or the source into your question text. Do make sure to format it properly by selecting the text and pressing ctrl+k (or clicking the Preformatted Text button (the one with 101010 on it)).
You don't need to post a new question, just edit your curent one. You can use the edit button/link for this.
After you replace the screenshot with the error message itself, we can re-open your question.

A:

The issue is likely one of units.
The units of "all" ROS messages containing distance measurements are metres (see REP 103). This is also mentioned in the sensor_msgs/Range documentation.
The message you show has a current range: 2491.0, or just about 2.5 Km. Max range is set to 4 Km.
RViz uses metres as well.
The grid you see in your RViz screenshot measures 10 x 10 metres. Depending on zoom factors, that's about a 200 times smaller than the range currently reported by your sensor driver node. So RViz probably visualises your sensor data correctly, it's just not visible with your current view settings.
The solution would be to convert your sensor measurements to the correct units (being: metres). I expect everything to start working as you expect it to.

Originally posted by gvdhoorn with karma: 86574 on 2023-03-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Dinoj on 2023-03-07:
Thank you very much for the info. The sensor values in the /tof2 are in mm. I will change the values to meters. I was able to visualize the sensor reading after adding a tf. But it shows a very big cone shape. I think that happened because the values are not in meters.
Once again thank you very much for your information it was really helpful.

