Q:

error running patrolling_sim

I am a newbie in ROS and learning to run patrolling_sim (http://wiki.ros.org/patrolling_sim)
Environment: Windows 7 64-bit host, Nootrix built VM (Ubuntu 14.04.1 LTS and ROS Indigo Igloo)
Following instruction from tutorial (http://wiki.ros.org/patrolling_sim/Tutorials/Running%20patrolling_sim)
Make some revision to the original code before running.

(FILE: cumberland_stage6robots.launch) pkg="stage" --> pkg="stage_ros"

(FILE: cumberland6robots.world, Line1) define hokuyo laser --> define hokuyo ranger

Process:
$ rosmake (success)
$ roslaunch patrolling_sim cumberland_stage6robots.launch (WRONG)
... logging to /home/viki/.ros/log/8365587e-a0b9-11e4-823a-080027b46cdd/roslaunch-c3po-3101.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

WARNING: ignoring defunct <master /> tag
started roslaunch server http://c3po:59937/

SUMMARY
========

PARAMETERS
 * /rosdistro: indigo
 * /rosversion: 1.11.8

NODES
  /
    stageros (stage_ros/stageros)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
process[stageros-1]: started with pid [3119]
libGL error: pci id for fd 10: 80ee:beef, driver (null)
OpenGL Warning: glFlushVertexArrayRangeNV not found in mesa table
OpenGL Warning: glVertexArrayRangeNV not found in mesa table
OpenGL Warning: glCombinerInputNV not found in mesa table
OpenGL Warning: glCombinerOutputNV not found in mesa table
OpenGL Warning: glCombinerParameterfNV not found in mesa table
OpenGL Warning: glCombinerParameterfvNV not found in mesa table
OpenGL Warning: glCombinerParameteriNV not found in mesa table
OpenGL Warning: glCombinerParameterivNV not found in mesa table
OpenGL Warning: glFinalCombinerInputNV not found in mesa table
OpenGL Warning: glGetCombinerInputParameterfvNV not found in mesa table
OpenGL Warning: glGetCombinerInputParameterivNV not found in mesa table
OpenGL Warning: glGetCombinerOutputParameterfvNV not found in mesa table
OpenGL Warning: glGetCombinerOutputParameterivNV not found in mesa table
OpenGL Warning: glGetFinalCombinerInputParameterfvNV not found in mesa table
OpenGL Warning: glGetFinalCombinerInputParameterivNV not found in mesa table
OpenGL Warning: glDeleteFencesNV not found in mesa table
OpenGL Warning: glFinishFenceNV not found in mesa table
OpenGL Warning: glGenFencesNV not found in mesa table
OpenGL Warning: glGetFenceivNV not found in mesa table
OpenGL Warning: glIsFenceNV not found in mesa table
OpenGL Warning: glSetFenceNV not found in mesa table
OpenGL Warning: glTestFenceNV not found in mesa table
libGL error: core dri or dri2 extension not found
libGL error: failed to load driver: vboxvideo
OpenGL Warning: No pincher, please call crStateSetCurrentPointers() in your SPU
 [Loading /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world]
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:3 : property [fov] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:2 : property [range_max] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:4 : property [samples] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:3 : property [fov] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:2 : property [range_max] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:4 : property [samples] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:3 : property [fov] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:2 : property [range_max] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:4 : property [samples] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:3 : property [fov] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:2 : property [range_max] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:4 : property [samples] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:27 : property [laser_return] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:3 : property [fov] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:2 : property [range_max] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:4 : property [samples] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:3 : property [fov] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:2 : property [range_max] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
warn: worldfile /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world:4 : property [samples] is defined but not used (/tmp/buildd/ros-indigo-stage-4.1.1-2trusty-20140711-1054/libstage/worldfile.cc WarnUnused)
[ INFO] [1421767955.470286730]: found 6 position and laser(6)/camera(0) pairs in the file
[stageros-1] process has died [pid 3119, exit code -11, cmd /opt/ros/indigo/lib/stage_ros/stageros /home/viki/patrolling_sim/maps/cumberland/cumberland6robots.world __name:=stageros __log:=/home/viki/.ros/log/8365587e-a0b9-11e4-823a-080027b46cdd/stageros-1.log].
log file: /home/viki/.ros/log/8365587e-a0b9-11e4-823a-080027b46cdd/stageros-1*.log
all processes on machine have died, roslaunch will exit
shutting down processing monitor...
... shutting down processing monitor complete
done

Not sure what is wrong.
Possible problem:

patrolling_sim is not tested and released on Indigo?

compatibility of stage version?

Thank you.

Originally posted by chenhuanfa on ROS Answers with karma: 13 on 2015-01-20
Post score: 1

A:

Hello Huanfa!
I'm sorry for this. Unfortunately, the patrolling_sim pkg version that is on the Wiki only works under ROS Fuerte.
I haven't maintained the package anymore. However, Prof. Luca Iocchi from "La Sapienza" University of Rome (Italy), kindly updated the package with several interesting add-ons, which makes it much easier to use (so please ignore the Wiki Tutorials).
It should work under Groovy, Hydro and Indigo.
You can now download the latest version from:
https://github.com/davidbsp/patrolling_sim
Please leave a follow-up comment if it works on your system (or not).
Cheers,
David

Originally posted by DavidPortugal with karma: 349 on 2015-01-21
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by chenhuanfa on 2015-01-21:
Thanks David!
New problem comes with the master branch from github,
However new problem occurred.

rosmake

python start_experiment.py

select paras (robot number <= 4)

problem:
WARNING: no messages received and simulated time is active.
Is /clock being published?
Comment by chenhuanfa on 2015-01-21:
(continue)
I have tried different replies. But the software was hung withou progress.
From rqt_console, only one node is active, rostopic__****.
It seems the nodes of robots fail to activate.
Also tried with run-exp.sh. Same result.
Thank you for your kindness.
Comment by chenhuanfa on 2015-01-21:
In some running there is such error info:
ERROR: simulation-running not specified. (NOT exactly these words)
Comment by DavidPortugal on 2015-01-22:
I've cloned the latest version of the repo and was able to run simulations in a ROS Hydro installation.
Which ROS distro are you using?
Are you running "rosmake" within a ROS_PACKAGE_PATH folder?
Comment by DavidPortugal on 2015-01-22:
(continue) If not, please add: "export ROS_PACKAGE_PATH=/directory:$ROS_PACKAGE_PATH" to the ".bashrc" file.
Replace "/directory" by the folder dir (example: "/home/huanfa/patrolling_sim").
You are probably not compiling the pkg. When you run "rosmake" the full compilation should take around 1 min,
Comment by chenhuanfa on 2015-01-22:
Thanks David. Using ROS Indigo Igloo (preinstalled in virtualBox, see http://nootrix.com/2014/09/ros-indigo-virtual-machine/).
Have checked the ROS_PACKAGE_PATH. Successfully running rosmake.
Built 53 packages with 0 failures.
BUT fail to run the experiment.
Stop at "Is /clock being published?
Comment by chenhuanfa on 2015-01-22:
(continue) Can't see the terminal of maps and robots (once appeared and flashed back soon. Initialization error?)
I will try to install a ROS Hydro on another Ubuntu VirtualBox. Will give feedback. Thanks.
Comment by DavidPortugal on 2015-01-22:
Hello Huanfa! I've never tried ROS Indigo :/
I've created a "catkin" branch in the repository, in case you want to try to compile it with catkin.
It seems that you might not be using "sim_time". Please run "rosparam get /use_sim_time" when you start the experiment. It should be set to true.
Comment by DavidPortugal on 2015-01-22:
Also, isn't the "/clock" topic being published?
Comment by chenhuanfa on 2015-01-22:
Hi David. Two updates (still in Indigo)
1.Tried catkin version. However, catkin_make cmd went wrong.
/src$ catkin_init_workspace
/src$ cd ..
$ catkin_make
"patrolling_sim-catkin" contains a package but "catkin_make" must be invoked in the root of workspace
Comment by chenhuanfa on 2015-01-22:
(continue)
2. "/clock" topic is not published in previous trials
3. tested "rosparam get /use_sim_time" during exp in a new terminal. True.
Hydro ROS is being downloaded. Will try soon.
Comment by chenhuanfa on 2015-01-23:
Hi David. Another sad story. I downloaded Hydro ROS and run the master code from Github (non-catkin), And got the same result with ROS Indigo.
Will try the catkin version after lunch today.
Comment by chenhuanfa on 2015-01-23:
Hi David. I am so soooory for my stupid mistake. The working directory name on my computer is revised to patrolling_sim-master, and start_experiment.py wants "patrolling_sim" directory so it went down.
After I revise the directory everything is fine now and I can see the map and robots!
Comment by DavidPortugal on 2015-01-23:
Yes, evidently u need to rename the pkg to "patrolling_sim" otherwise nothing will work ;)
I'm glad u figured it out! Also, to avoid the catkin error, u need to execute the "catkin_make" instruction in the root dir of the workspace (usually accessible by "roscd"). Can u check if it works in Indigo?

