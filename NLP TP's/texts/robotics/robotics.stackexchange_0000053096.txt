Q:

/odom and /vo priority in robot_pose_ekf

Hi, my setup currently is using ccny_rgbd to provide /vo data and then using this with gmapping. If I publish odometry transforms then the vo corrects the odometry too much, what is the best way to change odom so it has a higher priority and robot_pose_ekf takes into account odom more than vo?

Originally posted by boog on ROS Answers with karma: 18 on 2013-07-26
Post score: 0

A:

This is controlled by the covariance part of the of the nav_msgs/Odometry and sensor_msgs/Imu messages subscribed to by robot_pose_ekf. Larger values in the covariance will cause that source to be "trusted" less.

Originally posted by Dan Lazewatsky with karma: 9115 on 2013-07-26
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by boog on 2013-07-26:
Do you have any idea what sort of number range to put them as or can you link to some theory about it? Thanks.
This is how it is set up for the /vo; I don't understand covariance matrices, I found this code on an answer here. Can you explain why 3 of the numbers are the 9s?
odom.pose.covariance = boost::assign::list_of(VISUAL_COVARIANCE)(0)(0)(0)(0)(0)

                                          (0)(VISUAL_COVARIANCE)(0)(0)(0)(0)

                                          (0)(0)(999999)(0)(0)(0)

                                          (0)(0)(0)(999999)(0)(0)

                                          (0)(0)(0)(0)(999999)(0)

                                          (0)(0)(0)(0)(0)(VISUAL_COVARIANCE);

From:
http://answers.ros.org/question/66489/combine-visual-odometry-data-from-ccny_rgbd-with-encodersimu/
Comment by dornhege on 2013-07-27:
The 999s are just large values, signaling a large covariance and are probably there because there is no information for the specific values (they are probably at z, roll, pitch, leaving non-large values for x,y, yaw).
Comment by boog on 2013-07-27:
Are you able to point out to me which column is used for yaw? Thanks.
Edit: I changed (6,6) and it seems to have worked, but if I have done it wrong please correct me, thanks.

