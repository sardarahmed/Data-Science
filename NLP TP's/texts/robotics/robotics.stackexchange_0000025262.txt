Q:

How to bypass the ros-gazebo rosmake/makefile magic?

Is there some documentation about how to build Gazebo for ROS after
trying to apply some patches? I do need bumper sensors, which are still
broken in 1.6.16 on Gazebo for ROS Fuerte.
The known patch was promised for 1.6.17, but this has not been released
(as of 02/Oct/2012)...
A normal rosbuild either does nothing, or first downloads and then
unpacks the "magic" tarballs with ROS-compatible Gazebo checkouts,
which in turn overwrites any patches applied to the source tree...
Is the following correct?

install ros-fuerte-simulator-gazebo package

remove any existing ROS_NOBUILD

rosmake --pre-clean
(which downloads the magic tarball, unpacks, compiles everything)

cd to the actual gazebo source tree

edit some source files, apply patches, etc.

make

make install

cd to simulator_gazebo; touch ROS_NOBUILD

I am (trying to) use Gazebo on ROS Fuerte with the Shadow hand model.
The latest available release version is 1.6.12, with

Originally posted by Norman on Gazebo Answers with karma: 1 on 2012-10-03
Post score: 0

A:

Hi,
I'd recommend the following steps:

leave the debian installs (things inside /opt/ros/fuerte/* untouched) and work off of an overlay by following the steps below.  If you have already changed files inside of /opt/ros/fuerte/*, you might want to consider reinstalling affected packages by

sudo apt-get install --reinstall ros-fuerte-simulator-gazebo

create a workspace directory and cd into it

     mkdir ~/workspace
     cd ~/workspace

checkout simulator_gazebo stack.

    svn co https://code.ros.org/svn/ros-pkg/stacks/simulator_gazebo/branches/simulator_gazebo-1.6 simulator_gazebo

let ros know you want to use this stack instead of the one inside /opt/ros/fuerte/... and refresh rospack

    export ROS_PACKAGE_PATH=~/workspace:$ROS_PACKAGE_PATH
    rospack profile

build simulator_gazebo.  Note that gazebo is pulled in from mercurial repo and built (see Makefile.gazebo.hg).

    rosmake simulator_gazebo

to make changes to gazebo, go inside the mercurial checkout inside simulator_gazebo/gazebo/build/gazebo-hg/.

Note that above is compiled against a ''fuerte''-branch inside of gazebo repository, it's a snapshot back at revision gazebo-1.0.2.  I've been testing it with gazebo-1.2.0 release candidate, if you want to test that branch out, get the sdf_1.2 branch
svn co https://code.ros.org/svn/ros-pkg/stacks/simulator_gazebo/branches/sdf_1.2 simulator_gazebo

But this is not yet completely stable.  And to run pr2 simulation, you might also want to checkout pr2_common along with it due to changes in SDF:
svn co https://code.ros.org/svn/wg-ros-pkg/stacks/pr2_common/branches/sdf_1.2 pr2_common

as well as pr2_simulator
svn co https://code.ros.org/svn/wg-ros-pkg/stacks/pr2_simulator/trunk pr2_simulator

into your workspace.

Originally posted by hsu with karma: 1873 on 2012-10-05
This answer was ACCEPTED on the original site
Post score: 0

