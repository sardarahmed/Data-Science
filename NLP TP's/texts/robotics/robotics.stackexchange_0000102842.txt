Q:

transform error in ekf_localization

I am having issues with my transforms it appears. This is my first time running the ekf_localization node. Launch file and errors below. My tf tree only shows odom-> base link.
The static publishers should take care of imu-> base_link, base_link->base_footprint, odom-> map
I then have controller code that broadcasts odom->base_footprint, and navsat_transform should take care of utm->odom. This should have a completed tf tree, but I only see odom->base_link. Is there any apparent issues in my launch file? Thanks
 launch>
  <node pkg="tf2_ros" type="static_transform_publisher" name="imu_broadcaster" args="-.4064 .3048 .4572 0 0 0 base_link imu 30"/>
  <node pkg="tf2_ros" type="static_transform_publisher" name="base_link_broadcaster" args="0 0 0.889 0 0 0 base_footprint base_link 30" />
  <node pkg="tf2_ros" type="static_transform_publisher" name="map_to_odom" args="0 0 0 0 0 0 map odom 30" />
  <!--Launch odom, imu, gps-->

 <!-- subscribes to cmd_vel topic -->
  <!-- publishes odom topic with base_link frame -->
  <!-- broadcasts odom->base_footprint transform -->
  <include file="$(find mc_driver)/launch/driver.launch"/>

  <node name="imu_node" pkg="imu" type="imu">
    <remap from="imu/mag" to="imu/mag"/>
    <remap from="imu/data" to="imu/data"/>
    <param name="_baudrate" value="921600"/>
  </node>

 <!-- GPS launches: publishes NavSatFix to /fix, which will be used with navsat_transform_node-->
  <!-- /gps/fix-->
  <node pkg="gps_fix_pub" type="driver.py" name="gps">
  </node>

 
  <rosparam command="load" file="$(find nav_pub)/param/ekf_params.yaml" />
  <rosparam command="load" file="$(find nav_pub)/param/navsat_params.yaml" />
  
  <node pkg="robot_localization" type="ekf_localization_node" name="ekf_se_odom" clear_params="true"/>

 <node pkg="robot_localization" type="ekf_localization_node" name="ekf_se_map" clear_params="true">
    <remap from="odometry/filtered" to="odometry/filtered_map"/>
  </node>

  <node pkg="robot_localization" type="navsat_transform_node" name="navsat_transform" clear_params="true" output="screen">
    <remap from="odometry/filtered" to="odometry/filtered_map"/>
  </node> 

</launch
    
[ WARN] [1671570728.685366563]: Transform from base_link to map was unavailable for the time requested. Using latest instead.

[ WARN] [1671570729.429466639]: Transform from odom to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570730.234656934]: Transform from base_footprint to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570731.460892075]: Transform from odom to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570731.479805854]: Transform from base_footprint to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570732.345719163]: Transform from base_footprint to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570733.494249460]: Transform from odom to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570733.679772610]: Transform from base_link to map was unavailable for the time requested. Using latest instead.

[ WARN] [1671570734.885671028]: Transform from base_footprint to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570735.527168286]: Transform from odom to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570736.079708892]: Transform from base_link to map was unavailable for the time requested. Using latest instead.

[ WARN] [1671570745.280298372]: Transform from base_footprint to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570745.599284651]: Transform from odom to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570748.767587672]: Failed to meet update rate! Took 0.10817311700000001307
[ WARN] [1671570748.794316663]: Failed to meet update rate! Took 0.10160054800000001274
[ WARN] [1671570749.690036014]: Transform from base_footprint to base_link was unavailable for the time requested. Using latest instead.

[ WARN] [1671570749.691733300]: Transform from odom to base_link was unavailable for the time requested. Using latest instead.

Originally posted by chased11 on ROS Answers with karma: 137 on 2022-12-20
Post score: 0

A:

Further reading showed that both ekf's take care of map->odom, odm-> base_link, and I have both of those broadcasted elsewhere which is a big no-no. Missed that detail the first time around.

Originally posted by chased11 with karma: 137 on 2022-12-20
This answer was ACCEPTED on the original site
Post score: 0

