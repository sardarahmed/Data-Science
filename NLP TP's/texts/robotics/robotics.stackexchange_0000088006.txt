Q:

Most jobs fail in my buildfarm

I configured a buildfarm and triggered an import upstream job with the build parameters as mentioned in the documentation. But, most of the jobs failed to build. Also, is there any way one can educate me or point me to some material that tells how to start a job for my ros package (which is in my git repo right now) in my buildfarm ?
I tried starting a job in my buildfarm but it just clones the repo from github and doesn't perform any build on it. I'm new to jenkins and I'm learning.
Also I performed everything as mentioned here in this link.
I don't know whether I should be doing this but, I updated my jenkins to 2.121 from 2.89. Please tell me if this is wrong. Also in my lab currently everyone is developing in lunar, but I see that the distributions in ros_buildfarm_config show only jade, indigo and kinetic. Is this fine ? Can I still build packages developed in lunar or melodic in the buildfarm I configured ?

I apologize if this isn't much information. I can improve this post to help others who wants to setup a buildfarm. Inputs are welcome.
Thanks !
EDIT - 1
I scrapped the entire deployment and redid everything from scratch. I still ended up having all my jobs fail. This time I had my jenkins version set to default (2.89).

Originally posted by venkisagunner on ROS Answers with karma: 89 on 2018-07-19
Post score: 1

A:

I don't know whether I should be doing this but, I updated my jenkins to 2.121 from 2.89. Please tell me if this is wrong.

Jenkins 2.107.1 makes some substantial changes (https://jenkins.io/changelog-stable/#v2.107.1), mainly moving from a blacklist to a whitelist for serialize-able classes (https://jenkins.io/blog/2018/01/13/jep-200/) and I haven't had the time to audit our buildfarm for issues related to that. Anyone in the community who does use a more recent jenkins version is encouraged to share their experience in https://github.com/ros-infrastructure/buildfarm_deployment/issues/193

Also in my lab currently everyone is developing in lunar, but I see that the distributions in ros_buildfarm_config show only jade, indigo and kinetic. Is this fine ? Can I still build packages developed in lunar or melodic in the buildfarm I configured ?

You'll need to update your configuration in order to build packages for Lunar and Melodic. And to save overhead on rosdistros you don't need you'll want to comment out or remove indigo, jade, and kinetic from your ros_buildfarm_config index.yaml if you don't need to build for them.
Since you mention above that you want to build your own packages which aren't in the upstream rosdistro you'll also want to follow this guide https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/custom_rosdistro.rst#use-a-custom-rosdistro-database

But, most of the jobs failed to build.

There are many reasons a job could fail. Could you post an example build log which will help identify possible causes.

how to start a job for my ros package (which is in my git repo right now) in my buildfarm ?

After setting up your custom rosdistro and updating your ros_buildfarm_config your buildfarm will use your rosdistro database to know what jobs to build. You can set up devel jobs without first creating a release but if you want to build install-able binaries for your package you will first need to run bloom and release it into your custom rosdistro. This Bloom tutorial http://wiki.ros.org/bloom/Tutorials/FirstTimeRelease is aimed at releasing packages to the upstream rosdistro but much of the information is still useful. If you do have questions about that process be sure to ask them separately so that this question stays on topic.

Originally posted by nuclearsandwich with karma: 906 on 2018-07-24
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by venkisagunner on 2018-07-24:
Thank you for your answer. Is there an example that I can refer for creating a custom rosdistro ? Also is there an example that says how to add melodic and lunar to the ros_buildfarm_config ?

