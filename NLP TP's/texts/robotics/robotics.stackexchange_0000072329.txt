Q:

roslaunch ssh error

Hi,
I am getting the following error when attempting to launch a series of nodes across two machines..

beaglebone black (ubuntu@bbone):
ubuntu 14.04 LTS  (3.14 kernel) and
ROS indigo
Linux workstation (thayer@T1538):
ubuntu 14.04 LTS (3.14 kernel) and
ROS indigo

I have verified that both machines have the correct ROS_MASTER_URI environment variables set, and I have full bi-directional internet connectivity between the two. I can get success if I start up roscore and bring up each node on the respective machines one at a time, but can't get the launch file to work. Also, FWIW, the sys.excepthook is missing lost sys.stderr error message occurs often on the beaglebone after killing roscore if it is running, however has never affected functionality in any way. Does this point to a deeper issue?
Error message:
thayer@T1538:~/catkin_ws/src/mvp_ros/launch$ roslaunch mvp_ros rangetest.launch 
... logging to /home/thayer/.ros/log/b097f6ac-dbd8-11e5-a8ba-78acc0a5686d/roslaunch-T1538-9473.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://T1538:44498/
remote[bbone-0] starting roslaunch
remote[bbone-0]: creating ssh connection to bbone:22, user[ubuntu]
launching remote roslaunch child with command: [env ROS_MASTER_URI=http://localhost:11311 /opt/ros/indigo/env.sh roslaunch -c bbone-0 -u http://T1538:44498/ --run_id b097f6ac-dbd8-11e5-a8ba-78acc0a5686d]
remote[bbone-0]: ssh connection created
remote[bbone-0]: Exception while registering with roslaunch parent [http://T1538:44498/]: Traceback (most recent call last):
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/server.py", line 506, in _register_with_server
    code, msg, _ = server.register(name, self.uri)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1233, in __call__
    return self.__send(self.__name, args)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1587, in __request
    verbose=self.__verbose
  File "/usr/lib/python2.7/xmlrpclib.py", line 1273, in request
    return self.single_request(host, handler, request_body, verbose)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1301, in single_request
    self.send_content(h, request_body)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1448, in send_content
    connection.endheaders(request_body)
  File "/usr/lib/python2.7/httplib.py", line 975, in endheaders
    self._send_output(message_body)
  File "/usr/lib/python2.7/httplib.py", line 835, in _send_output
    self.send(msg)
  File "/usr/lib/python2.7/httplib.py", line 797, in send
    self.connect()
  File "/usr/lib/python2.7/httplib.py", line 778, in connect
    self.timeout, self.source_address)
  File "/usr/lib/python2.7/socket.py", line 553, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno -2] Name or service not known

The traceback for the exception was written to the log file
Unhandled exception in thread started by 
sys.excepthook is missing
lost sys.stderr

[bbone-0] killing on exit
remote roslaunch failed to launch: bone
The traceback for the exception was written to the log file

Launch File:
<launch>
    <machine name="bone" address="bbone" default="true" user="ubuntu" password="ubuntu"/>
    <machine name="thayer" address="localhost" default="true"/>

    <node name="relay" pkg="mvp_ros" type="xbox_ser_relay" machine="bone"/>
    <node name="teleop" pkg="mvp_ros" type="teleop_xbox" machine="bone"/>
    <node name="joystick" pkg="joy" type="joy_node" machine="thayer"> 
        <param name="dev" value="/dev/input/js0"/> 
    </node>
</launch>

EDIT1: Has nobody ever seen this error before? It seems oddly specific. I also get it when I try to launch on my raspberry pi. I have included the log file here. The key parts are below.
[roslaunch][INFO] 2016-02-28 19:15:35,291: started roslaunch server http://192.168.1.117:38349/
[roslaunch.parent][INFO] 2016-02-28 19:15:35,291: ... parent XML-RPC server started
[roslaunch.remote][INFO] 2016-02-28 19:15:35,291: remote[pi-3-0] starting roslaunch
[roslaunch][INFO] 2016-02-28 19:15:35,292: remote[pi-3-0] starting roslaunch
[roslaunch][INFO] 2016-02-28 19:15:35,292: remote[pi-3-0]: creating ssh connection to pi-3:22, user[pi]
[roslaunch.remoteprocess][INFO] 2016-02-28 19:15:35,292: remote[pi-3-0]: invoking with ssh exec args [/opt/ros/indigo/env.sh roslaunch -c pi-3-0 -u http://192.168.1.117:38349/ --run_id 8d8946
cc-de79-11e5-9723-b8e85632a8ba]
[paramiko.transport][INFO] 2016-02-28 19:15:35,363: Connected (version 2.0, client OpenSSH_6.7p1)
[paramiko.transport][ERROR] 2016-02-28 19:15:35,366: Exception: Incompatible ssh peer (no acceptable kex algorithm)
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367: Traceback (most recent call last):
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367:   File "/usr/lib/python2.7/dist-packages/paramiko/transport.py", line 1585, in run
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367:     self._handler_table[ptype](self, m)
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367:   File "/usr/lib/python2.7/dist-packages/paramiko/transport.py", line 1664, in _negotiate_keys
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367:     self._parse_kex_init(m)
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367:   File "/usr/lib/python2.7/dist-packages/paramiko/transport.py", line 1779, in _parse_kex_init
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367:     raise SSHException('Incompatible ssh peer (no acceptable kex algorithm)')
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367: SSHException: Incompatible ssh peer (no acceptable kex algorithm)
[paramiko.transport][ERROR] 2016-02-28 19:15:35,367: 
[roslaunch.remoteprocess][ERROR] 2016-02-28 19:15:35,370: Traceback (most recent call last):
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/remoteprocess.py", line 192, in _ssh_exec
    ssh.connect(address, port, username, password, timeout=TIMEOUT_SSH_CONNECT)
  File "/usr/lib/python2.7/dist-packages/paramiko/client.py", line 306, in connect
    t.start_client()
  File "/usr/lib/python2.7/dist-packages/paramiko/transport.py", line 465, in start_client
    raise e
SSHException: Incompatible ssh peer (no acceptable kex algorithm)

[roslaunch][ERROR] 2016-02-28 19:15:35,370: remote[pi-3-0]: failed to launch on mvp:

Unable to establish ssh connection to [pi@pi-3:22]: Incompatible ssh peer (no acceptable kex algorithm)

[roslaunch.pmon][INFO] 2016-02-28 19:15:35,371: ProcessMonitor.register[pi-3-0]
[roslaunch.pmon][INFO] 2016-02-28 19:15:35,371: ProcessMonitor.register[pi-3-0] complete
[roslaunch.pmon][INFO] 2016-02-28 19:15:35,371: ProcessMonitor.shutdown <ProcessMonitor(ProcessMonitor-1, started daemon 140521618212608)>
[roslaunch.pmon][INFO] 2016-02-28 19:15:35,379: ProcessMonitor._post_run <ProcessMonitor(ProcessMonitor-1, started daemon 140521618212608)>
[roslaunch.pmon][INFO] 2016-02-28 19:15:35,379: ProcessMonitor._post_run <ProcessMonitor(ProcessMonitor-1, started daemon 140521618212608)>: remaining procs are [<roslaunch.remoteprocess.SSHChildROSLaunchProcess object at 0x7fcdbd4ef3d0>]
[roslaunch.pmon][INFO] 2016-02-28 19:15:35,380: ProcessMonitor exit: killing pi-3-0
[roslaunch][INFO] 2016-02-28 19:15:35,380: [pi-3-0] killing on exit
[roslaunch.pmon][INFO] 2016-02-28 19:15:35,381: ProcessMonitor exit: cleaning up data structures and signals
[roslaunch.pmon][INFO] 2016-02-28 19:15:35,381: ProcessMonitor exit: pmon has shutdown
[roslaunch][ERROR] 2016-02-28 19:15:35,381: unable to start remote roslaunch child: pi-3-0
[roslaunch][ERROR] 2016-02-28 19:15:35,381: The traceback for the exception was written to the log file
[roslaunch][ERROR] 2016-02-28 19:15:35,381: Traceback (most recent call last):
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/__init__.py", line 307, in main
    p.start()
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/parent.py", line 268, in start
    self._start_infrastructure()
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/parent.py", line 230, in _start_infrastructure
    self._start_remote()
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/parent.py", line 210, in _start_remote
    self.remote_runner.start_children()
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/remote.py", line 124, in start_children
    p = self._start_child(server_node_uri, machines[m], counter)
  File "/opt/ros/indigo/lib/python2.7/dist-packages/roslaunch/remote.py", line 97, in _start_child
    raise RLException("unable to start remote roslaunch child: %s"%name)
RLException: unable to start remote roslaunch child: pi-3-0

[rospy.core][INFO] 2016-02-28 19:15:35,381: signal_shutdown [atexit]

Thanks,
Brett

Originally posted by bigbrett on ROS Answers with karma: 58 on 2016-02-25
Post score: 1

A:

Found the solution after much digging....
The error lay in the version of paramiko on my computer, as seen here. I updated paramiko and then that error went away. I also needed to provide an env-loader option in my .launch file when I declared the remote machine. Once I did this, everything worked.
I don't have enough points to accept my own answer, but if someone else could flag it as accepted, that would be great.

Originally posted by bigbrett with karma: 58 on 2016-02-28
This answer was ACCEPTED on the original site
Post score: 2

