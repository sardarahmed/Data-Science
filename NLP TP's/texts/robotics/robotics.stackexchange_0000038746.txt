Q:

roboearth: fails to detect object when receiving point cloud

Hi,
I'm using ros-electric-turtlebot running the roboearth.
After building up a 3D model, I use the re_kinect_object_detector to detect the object. The first time the re_kinect_object_detector node received point cloud, there's log message: (I opened some log messages in matchAspects function)
[ INFO] [1331729328.968390255]: received point cloud
[ INFO] [1331729329.068954900]: matching model: PointCloud2.kinectZoomPointCloud2
[ INFO] [1331729329.069546826]: found 2 correspondences.
[ INFO] [1331729329.069591011]: found 2 3D correspondences.
[ INFO] [1331729329.069626568]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.070866657]: found 7 correspondences.
[ INFO] [1331729329.070905464]: found 7 3D correspondences.
[ INFO] [1331729329.070943400]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.070972396]: found 0 correspondences.
[ INFO] [1331729329.071004012]: found 0 3D correspondences.
[ INFO] [1331729329.071033772]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.071294529]: found 0 correspondences.
[ INFO] [1331729329.071322469]: found 0 3D correspondences.
[ INFO] [1331729329.071354157]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.071436934]: found 0 correspondences.
[ INFO] [1331729329.071464717]: found 0 3D correspondences.
[ INFO] [1331729329.071495055]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.072120036]: found 3 correspondences.
[ INFO] [1331729329.072158913]: found 3 3D correspondences.
[ INFO] [1331729329.072194388]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.072599001]: found 0 correspondences.
[ INFO] [1331729329.072637274]: found 0 3D correspondences.
[ INFO] [1331729329.072672226]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.072792093]: found 0 correspondences.
[ INFO] [1331729329.072820856]: found 0 3D correspondences.
[ INFO] [1331729329.072856909]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.073550326]: found 2 correspondences.
[ INFO] [1331729329.073588965]: found 2 3D correspondences.
[ INFO] [1331729329.073622813]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.074955371]: found 9 correspondences.
[ INFO] [1331729329.074985202]: found 9 3D correspondences.
[ INFO] [1331729329.075034665]: matchAspects: found 3 correspondences.
[ INFO] [1331729329.075088732]: HIT 9, minerror: 1.000000
[ INFO] [1331729329.075467930]: found 1 correspondences.
[ INFO] [1331729329.075496754]: found 1 3D correspondences.
[ INFO] [1331729329.075527096]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.077067249]: found 13 correspondences.
[ INFO] [1331729329.077095463]: found 13 3D correspondences.
[ INFO] [1331729329.077138026]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.077487096]: found 1 correspondences.
[ INFO] [1331729329.077515891]: found 1 3D correspondences.
[ INFO] [1331729329.077545470]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.078075524]: found 2 correspondences.
[ INFO] [1331729329.078103767]: found 2 3D correspondences.
[ INFO] [1331729329.078134121]: matchAspects: found 0 correspondences.
[ INFO] [1331729329.078167414]: displaying 307200 points in frame: camera_rgb_optical_frame

And a image window opens, i can see the highlighted object.
But afterwards, when the node receives another point cloud:
[ INFO] [1331729341.966271561]: received point cloud
[ INFO] [1331729342.066705365]: matching model: PointCloud2.kinectZoomPointCloud2
[ INFO] [1331729342.067266809]: found 4 correspondences.
[ INFO] [1331729342.067307929]: found 4 3D correspondences.
[ INFO] [1331729342.067344704]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.068547286]: found 5 correspondences.
[ INFO] [1331729342.068586474]: found 5 3D correspondences.
[ INFO] [1331729342.068620191]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.068651428]: found 0 correspondences.
[ INFO] [1331729342.068683878]: found 0 3D correspondences.
[ INFO] [1331729342.068715168]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.068979946]: found 1 correspondences.
[ INFO] [1331729342.069009116]: found 1 3D correspondences.
[ INFO] [1331729342.069053959]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.069138500]: found 0 correspondences.
[ INFO] [1331729342.069166477]: found 0 3D correspondences.
[ INFO] [1331729342.069197986]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.069836880]: found 2 correspondences.
[ INFO] [1331729342.069874740]: found 2 3D correspondences.
[ INFO] [1331729342.069909677]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.070318471]: found 6 correspondences.
[ INFO] [1331729342.070356941]: found 6 3D correspondences.
[ INFO] [1331729342.070389626]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.070463898]: found 0 correspondences.
[ INFO] [1331729342.070493916]: found 0 3D correspondences.
[ INFO] [1331729342.070523936]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.071188529]: found 1 correspondences.
[ INFO] [1331729342.071217346]: found 1 3D correspondences.
[ INFO] [1331729342.071247565]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.072461884]: found 9 correspondences.
[ INFO] [1331729342.072491868]: found 9 3D correspondences.
[ INFO] [1331729342.072531046]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.072898441]: found 1 correspondences.
[ INFO] [1331729342.072927276]: found 1 3D correspondences.
[ INFO] [1331729342.072959137]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.074394981]: found 10 correspondences.
[ INFO] [1331729342.074428000]: found 10 3D correspondences.
[ INFO] [1331729342.074471048]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.074802410]: found 2 correspondences.
[ INFO] [1331729342.074830775]: found 2 3D correspondences.
[ INFO] [1331729342.074861772]: matchAspects: found 0 correspondences.
[ INFO] [1331729342.075351770]: found 1 correspondences.
[ INFO] [1331729342.075380449]: found 1 3D correspondences.
[ INFO] [1331729342.075414387]: matchAspects: found 0 correspondences.
[ INFO] [1331729354.974112529]: received point cloud
[ INFO] [1331729355.074293655]: matching model: PointCloud2.kinectZoomPointCloud2
[ INFO] [1331729355.074942892]: found 7 correspondences.
[ INFO] [1331729355.074983544]: found 7 3D correspondences.
[ INFO] [1331729355.075021067]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.076333226]: found 7 correspondences.
[ INFO] [1331729355.076362332]: found 7 3D correspondences.
[ INFO] [1331729355.076398655]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.076430564]: found 0 correspondences.
[ INFO] [1331729355.076464470]: found 0 3D correspondences.
[ INFO] [1331729355.076496073]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.076759882]: found 1 correspondences.
[ INFO] [1331729355.076788046]: found 1 3D correspondences.
[ INFO] [1331729355.076818566]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.076904032]: found 0 correspondences.
[ INFO] [1331729355.076931404]: found 0 3D correspondences.
[ INFO] [1331729355.076961659]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.077631401]: found 3 correspondences.
[ INFO] [1331729355.077659832]: found 3 3D correspondences.
[ INFO] [1331729355.077690798]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.078073823]: found 2 correspondences.
[ INFO] [1331729355.078101807]: found 2 3D correspondences.
[ INFO] [1331729355.078157563]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.078226283]: found 0 correspondences.
[ INFO] [1331729355.078254901]: found 0 3D correspondences.
[ INFO] [1331729355.078284719]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.078951732]: found 0 correspondences.
[ INFO] [1331729355.078981623]: found 0 3D correspondences.
[ INFO] [1331729355.079012249]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.080319497]: found 6 correspondences.
[ INFO] [1331729355.080349025]: found 6 3D correspondences.
[ INFO] [1331729355.080387034]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.080758381]: found 1 correspondences.
[ INFO] [1331729355.080786097]: found 1 3D correspondences.
[ INFO] [1331729355.080818358]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.082265197]: found 13 correspondences.
[ INFO] [1331729355.082300087]: found 13 3D correspondences.
[ INFO] [1331729355.082341145]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.082696568]: found 2 correspondences.
[ INFO] [1331729355.082725134]: found 2 3D correspondences.
[ INFO] [1331729355.082756689]: matchAspects: found 0 correspondences.
[ INFO] [1331729355.083281062]: found 2 correspondences.
[ INFO] [1331729355.083309711]: found 2 3D correspondences.
[ INFO] [1331729355.083339826]: matchAspects: found 0 correspondences.

It seems suddenly it can't match the object now. And the highlighted points in the image disappear. Even though I didn't change the position or lightning condition.
Aftwards even the node continue receive more point clouds, the object can't be detected.
It feels like the detection only works for the first time the node receive point clouds.
Does anyone have similar problem as i do now?
Why does this happen? How can I let the object highlighted all the time and get the detection correct every time the node receives a point cloud package?
Thanks for any reply..

Originally posted by Gemini Ma on ROS Answers with karma: 32 on 2012-03-16
Post score: 0

Original comments
Comment by ddimarco on 2012-03-19:
Which image do you refer to? The one published under 're_kinect/detection_results'?
Alternatively, you can try to enable DEBUG_VIS in src/recognitionmodel.h, ~line 42.
Comment by Gemini Ma on 2012-03-22:
I enabled DEBUG_VIS and can see the match. but after a while, sometimes it lost the highlight points. Also, if i lay down the object that was modeled while standing up, the algorithm can't detect it either...
Comment by ddimarco on 2012-03-27:
The methods does not guarantee 100% stability. I don't think I can easily help you there, sorry.

A:

I believe I was getting similar results to this when using RoboEarth. Fortunately for me I had to simulate my detection on a light flooring on which it worked very well. Sometimes changes in the background when performing training can cause some issues so when I performed the training I also used a light plain background. Finally I used a bounding box almost perfect to the object rather than the default amount. This means you won't get any issues with other fluctuations around the training surface.
Like ddimarco said this method does not guarantee 100% stability so don't expect a 100% detection rate. It will definitely fluctuate and I also tried it with the object lying down and unfortunately it did not work.

Originally posted by AksatShah with karma: 59 on 2012-07-10
This answer was ACCEPTED on the original site
Post score: 1

