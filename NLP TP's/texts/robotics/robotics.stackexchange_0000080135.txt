Q:

Why tf trees for multi-robot system not showing?

Hi all,
I have been building a simple multi-robot system for 3 days referencing to patrolling_sim, which wrap all necessary nodes for a robot in a group tag. I am frustrated to find out the following:

I can run the multi-robot system on Stage_ros with the following TF tree but somehow move_base just can't publish cmd_vel.:

I also wrote a similar launch file for a single robot to run only on Rviz (for future integration on real robots). The TF tree can be displayed and that means proper introspective and outward frame transformations. But if I try to launch this launch files under different robot name (e.g. robot_0, robot_1, etc), then TF trees cannot be published but the nodes are functioning and being published.

Here is the node graph:

And the TF tree for a single robot:

While the TF data cannot be found, Rviz displays the error:
No tf data. Actual Error: Fixed Frame [map] does not exist.

I suspected that every launch file brings up the nodes under their own ROS master, but it seems that it was not the case.

So my question is, why the robots cannot be launched in the same launch file? What should I do to make the TF tree linked as working with a simulator such as Stage_ros? Please help and thank you in advance !

Originally posted by Megacephalo on ROS Answers with karma: 106 on 2017-04-10
Post score: 0

Original comments
Comment by ahendrix on 2017-04-10:
Per the ROS Support Guidelines marking your post "urgent" is considered rude. I've removed the "urgent" from your post title.
Comment by Megacephalo on 2017-04-11:
My deepest apology for the ROS community, @ahendrix. I apologize for putting inadequate tag on my title and I will not put any sort of tags in any of my posts. You have my words.
Comment by LucYang on 2018-07-30:
Hi,I am trying to run multi turtlebots on one master.
Have you solved this problem?
I wonder how did you make your tf tree like the first image? I added  and 

A:

It seems like you're asking two or three different questions here. I'll provide brief responses, but you should split these into separate questions and ask them again with more details.
(1) when running something (unclear what) in stage, move_base is running but isn't publishing cmd_vel. You've provided a TF tree for this circumstance but no launch files, configs, logs or node graph, so it's hard for me to see anything that indicates why it isn't working. The best advice I can give here is to use rostopic list, rostopic info and rostopic echo on the cmd_vel topics to see which topics move_base is publishing on, what it's publishing, and which topics stage is subscribing to.
(2) your on-robot launch file doesn't work. you've provided the node graph and you say that TF doesn't work, but you haven't provided a tf graph or any of the error messages you might have gotten from running tf view_frames, or any other logs or launch files that might help. I'd advise that you split this into a separate question and include the launch files and the TF error messages that you're getting.
(3) you seem to have some confusion about roslaunch. ROS uses a single ROS master, and multiple instances of roslaunch will all use the same ROS master unless you explicitly change the ROS_MASTER_URI and start a new roscore on a different port.

Originally posted by ahendrix with karma: 47576 on 2017-04-10
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Megacephalo on 2017-04-11:
Thank you for your answer and advices. Indeed I had posted too many questions that blurred my true intention. For this post, I would only concentrate on discussing the failure to generate a complete TF tree. I could not publish any messages of TF on my question since there was no error to be found
Comment by Megacephalo on 2017-04-11:
And this particularly baffled me. I figured out that there maybe a certain possibility that I cannot shutdown all the launched nodes with Ctrl + C and thus some old settings remained. I therefore have to kill the processes myself. After that, It came back to normal. Thank you very much !

