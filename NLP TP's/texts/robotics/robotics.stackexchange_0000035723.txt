Q:

gmapping and inverted (upside-down) laser

Hello folks, I am having trouble using gmapping with my robot which has an upside-down laser. Last time I was building a map was probably in cturtle and it worked just fine. But in electric it seems that gmapping doesn't detect that the laser is inverted.
Looking at gmapping node source I can see that it uses "angle_increment" value of the LaserScan message to determine if the laser is inverted, e.g. if it is negative then the laser is upside-down. I did echo the messages coming from the laser and angle_increment is indeed positive, and the map is mirrored.
In hokuyo node source code angle_increment parameter is populated from the raw scan message coming from the laser driver, which wouldn't know anything about how the laser is mounted.
Am I missing something or did something change/break from previous release in either gmapping or hokuyo_node?

Originally posted by arebgun on ROS Answers with karma: 2121 on 2011-11-15
Post score: 2

A:

Ok, there was definitely a bug in gmapping node, ticket with a patch is here.
Update: I have uploaded our robot's bag file that can be used to test proposed patches to gmapping, use this command to run gmapping: rosrun gmapping slam_gmapping scan:=base_scan/scan _odom_frame:=odom_combined. The laser in use is a Hokuyo URG-04LX mounted upside down on the front of the robot.

Originally posted by arebgun with karma: 2121 on 2011-11-15
This answer was ACCEPTED on the original site
Post score: 0

