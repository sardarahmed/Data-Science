Q:

How to migrate a catkin workspace?

I just upgraded my VM from Ubuntu 12.04 to 14.04, and my ROS installation from Hydro to Indigo.
Now that I've done that, I wonder if there is anything special I need to do to migrate my catkin workspace (which was created initially with Hydro) to Indigo.
I just tried the obvious (I guess I could have tried this before I asked my question, but the end result was about what I expected):
$ source catkin_ws/devel/setup.bash 
$ cd catkin_ws/
$ catkin_make
catkin_make: command not found

Originally posted by wpd on ROS Answers with karma: 249 on 2014-09-30
Post score: 3

A:

Now that I've done that, I wonder if there is anything special I need to do to migrate my catkin workspace (which was created initially with Hydro) to Indigo.

tl;dr: remove the devel/ and build/ directories from your catkin_ws/. Remove src/CMakeLists.txt. Then:
source /opt/ros/DISTRO/setup.bash
cd catkin_ws/
catkin_make

Anytime you move a catkin_ws/ directory, it is recommended to remove the devel/ and build/ directories. Files in those dirs (may) contain references to the old location(s) of build artefacts, which, after moving your workspace, has just changed.
Changing between ROS distributions is similar, in that the build/ and devel/ directories contain references to the location(s) of several key binaries, paths and environment variables that (may) have changed. Additionally, the src/ directory should contain a CMakeLists.txt symlink, which points (in your case) to the Hydro version. This should be updated as well. Remove it and invoke catkin_make in your catkin_ws/: the link will be recreated automatically.

Originally posted by gvdhoorn with karma: 86574 on 2014-10-01
This answer was ACCEPTED on the original site
Post score: 8

Original comments
Comment by Wolf on 2014-10-01:
I guess a catkin_init_workspace in the catkin_ws/src will be necessary as well; because the prior sym link to top_level cmakelists of hydro distribution will no longer be valid....
Comment by gvdhoorn on 2014-10-01:
@Wolf, yes, that is probably true. I've updated my answer.
Comment by wpd on 2014-10-01:
Thanks for the answer.  That's what I needed.  If I hadn't been so lazy and willing to just ask the question, where could I have found that myself?
Comment by Dirk Thomas on 2014-10-01:
catkin_make implicitly performs the same logic as catkin_init_workspace. Calling it manually is never necessary.
Comment by gvdhoorn on 2014-10-01:
@Dirk Thomas: I wasn't sure without looking it up. Updated answer again.
Comment by gvdhoorn on 2014-10-01:
@wpd: I'm not sure whether this is actually ROS specific. catkin is essentially CMake, so i just used that knowledge and extrapolated a bit.

