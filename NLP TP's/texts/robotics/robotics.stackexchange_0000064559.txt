Q:

Generating Octomap [Solved]

Hello guys!
I'm facing some problems trying to generate an Octomap. First of all, I downloaded RGBDSLAM (http://felixendres.github.io/rgbdslam_v2/) and installed as recommended. I'm able to run roslaunch rgbdslam rgbdslam.launch and see the map as i capture the frames. My problem is when i try to save this map as an octomap or pointcloud map. None of them are working.
-- As Felix said, the only think you must do to save the octomap is, from the GUI, click on 'Octomap'->'Save Octomap'. First problem: When i click on save octomap, i generate a .pcd file, not a .bt. Second problem: When i try to open this .pcd file from rosrun pcl_viewer file.pcd I got this error: No points to read. How can i properly save an Octomap after finish my rgbdslam ?
-- My second attempt was try to use these packages: http://octomap.github.io/ but i don't know and didn't find out how to run this package. In other words, i want to use this to generate my own octomap and, if it's possible, visualize it in RVIZ. I downloaded the latest version (1.6.8) and extract all the folder to my home folder. Then i run the commands to compile and (i think) everythink is ok with that. So, how can i use this package to create my own map using ROS ? Also, i tried to follow these instructions (http://wiki.ros.org/octomap) but nothing changed.

Originally posted by Thiagopj on ROS Answers with karma: 23 on 2014-12-10
Post score: 1

A:

To build an octomap, you might wanna use octomap_server. You can change the subcribed topics using remap and them build your own map. Secondly, for saving the map you can use octomap_saver node.

Originally posted by ajain with karma: 281 on 2014-12-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Thiagopj on 2014-12-11:
I tried to use with octomap_server, but didn't understand when you say "change the subcribed topics using remap". How can i do that ?
And about the usage of octomap_saver, i just need to build a map in rgbdslamv2 and then run this node to save (And then not use the GUI) ?
Comment by l0g1x on 2014-12-11:
you can run the octomap_server node from a launch file (this is one way), and within the <node> </node> tags you can specify another tag
<remap from="/octomap_defualt_topic" to="/actually_listen_to_this_one"/>
Comment by Thiagopj on 2014-12-11:
In my octomap_server.launch i have this line <remap from="cloud_in" to="/rgbdslam/batch_clouds" /> but how can i check if its correct ? And where do i see who's the right one ? When i run rosrun octomap_server octomap_saver file.(bt|ot) i got an error that msg.data.size() is empty.
Comment by ajain on 2014-12-11:
You can use rqt_graph to see if all topics and nodes are correctly connected, or visualize topic published by octomap_server in rviz using Marker array data type. You won't get an error in using octomap_saver if data is correctly published by the server.
Comment by Thiagopj on 2014-12-11:
I did run rqt_graph, and i think everything is ok. See here.
As from RVIZ, using Marker array nothing happen. See here.
Any ideia of what is happening ? Thanks!
Comment by Thiagopj on 2014-12-12:
Sorry. I've fixed my links. rqt_graph. MarkerArray. rgbdslam.launch. octomap_server.launch.
Comment by Thiagopj on 2014-12-12:
My steps are: roscore && roslaunch openni_launch openni.launch && roslaunch rgbdslam rgbdslam.launch && roslaunch rgbdslam octomap_server.launch. After that i capture the frames in the GUI and try to save the octomap but no data is received.
Comment by ajain on 2014-12-12:
Firstly, please post a rqt_graph with topic names please. Secondly, try adding output="screen"  parameter in octomap_server.launch for the node to see the logs of octomap_server and understand what's going wrong. Also, FYI you don;t need to run roscore if you are using roslaunch
Comment by Eyshika on 2018-01-09:
Are you using point cloud data to generate octomap ? If yes then how ?

