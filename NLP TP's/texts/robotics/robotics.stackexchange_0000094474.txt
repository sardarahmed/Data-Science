Q:

Gazebo effort_controller torque telemetry?

Tried asking this on the gazebo answer forum, but there seems to be way less traffic there.
I am using an effort_controller/velocity_controller, so I input a velocity and get an effort output to a wheel. This is all a black box to me and I have no idea how this works. I'd like to visualize the effort that's being generated.
Is this possible? I tried putting a torque sensor on the wheel joint and it wouldnt read anything.

Originally posted by mugetsu on ROS Answers with karma: 195 on 2020-01-22
Post score: 0

A:

Afaik, all ros_control controllers periodically publish their internal state to a private state topic.
The code which does that for effort_controllers/JointVelocityController is here.
Subscribing to that topic should get you messages of type control_msgs::JointControllerState, which includes the command field which seems to be what you are after:
# Current output of the controller.
float64 command

See #q323036 for a related question.

Originally posted by gvdhoorn with karma: 86574 on 2020-01-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2020-01-22:
Note: this gets you access to the internal state of the controller. What happens to the command after it is written to the JointCommandHandle is something else (ie: what Gazebo does with it).

