Q:

Using 2dnav with pr2

Hi ppl,
I have been trying to use 2dnav with pr2 robot. The tutorial I followed is this.
After I reached instruction 3.1 and started Rviz,I tried to set a goal in rViz for the robot to follow, however, the robot didn't move as expected.
In Rviz, the status of all the displays are "ok". This includes the local plan, global plan and planner plan, however when I set 2D NAV GOAL, the paths are not displayed at all. So does anyone have any idea what could be the issues?
Or does anyone knows which robot works well with 2dnav? So far I tried turtlebot and pr2, both gave me some errors. I am using ubuntu 12.01 with fuerte. Thanks for your help.
1st update
After doing rostopic info move_base_simple/goal, this is what i get,
Type: geometry_msgs/PoseStamped

Publishers:
 * /rviz_ubuntu_29082_5799833781995074337 (http://ubuntu:37754/)

Subscribers:
 * /move_base_node (http://ubuntu:46201/)

Originally posted by ChengXiang on ROS Answers with karma: 201 on 2012-10-27
Post score: 0

Original comments
Comment by Lorenz on 2012-10-27:
2dnav is expected to work for both, the turtlebot and the pr2. Did you change the 2d pose topic to the correct value in rviz before sending the goal?
Comment by ChengXiang on 2012-10-27:
Hi Lorenz.By 2d pose , do you mean 2d pose estimate? That is set to " initialpose" .
Comment by Lorenz on 2012-10-30:
No. I mean the goal. It should default to goal and you'll have to change it to the correct value. Have a look here.
Comment by ChengXiang on 2012-10-31:
I have already set the 2dnav goal to move_base_simple/goal. But it did not work. One other thing is when I tried to set its initialpose using 2d pose estimate, the many tiny red arrows did not appears. Could that be the issue?
Comment by Lorenz on 2012-10-31:
Try rostopic info move_base_simple/goal. Please edit your question and show us the output of that command.
Comment by ChengXiang on 2012-10-31:
In addition, when I tried navigation stack demo in  this , the 2dnav works, although it give the same error described here
Comment by ChengXiang on 2012-10-31:
Updated. Please take a look at the question.
Comment by Lorenz on 2012-10-31:
Ok. Rostopic info looks good. Does rxconsole maybe show any warning/error messages when you send the nav goal?
Comment by ChengXiang on 2012-10-31:
No. All the messages are info. On a side note, my computer slows down after I launched the pr2.

A:

HI Chengxiang,
have you check the feekback from rviz(from the terminal which you run rosrun rviz rviz ), if a 2D NAV GOAL was set up properly, the feedback will look like:
[ INFO] [1353665215.531624702, 1014.437000000]: Setting goal: Frame:/map, Position(-0.094, -1.259, 0.000), Orientation(0.000, 0.000, -0.454, 0.891) = Angle: -0.943
if you got this feedback, but you robot still did not move, then you can try to use teleop_keyboard.launch to test whether the robot move or not.
if I remembered well, the command for launch teleop pr2 is:
roslaunch pr2_teleop teleop_keyboard.launch
In summary, there are various reasons can result in your robot fail to move, you should do a proper test, then modify your question with more details.
also before you do any test, after you launched the simulation , you can use this command to view whether your robot received any commands telling it move
rostopic echo -c /base_controller/command
hope this can give you some helps.
Tao

Originally posted by Tao with karma: 26 on 2012-11-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by ChengXiang on 2012-11-30:
Hi Tao, thanks I will try it out.

