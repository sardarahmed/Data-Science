Q:

Is there a way to publish a video file so it can be displayed with a camera display in RViz? (solved)

I have recorded videos I want to display in RViz with a camera display so that I can overlay them with my other plugins.
Is there a way to do that?
I tried with the video_stream_opencv plugin already and I can get it to publish data that I can display with an Image View in RViz, but if I subscribe to the Image topic with the camera display it shows me the warning of "No Image received" and only shows a black screen.
Thank you.

Originally posted by Fetzle on ROS Answers with karma: 3 on 2020-01-21
Post score: 0

A:

The difference between the Image and Camera displays is that the former just takes an image and displays is, while the latter additionally uses information about camera intrinsics for additional functionality such as being able to project rviz 3D rendered information into the image. To be able to do so, it requires a CameraInfo message to be published along with each Image message, see for instance REP-0104.
So for the Camera display to work, you need to publish a correctly timestamped CameraInfo message for each Image you publish. According to the video_stream_opencv documentation such functionality is already available, so you might want to check if CameraInfo messages are already published.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2020-01-21
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Fetzle on 2020-01-21:
Thank you for your answer.
As far as I understood video_stream_opencv does publish a default CameraInfo if I don't specify a camera calibration. I checked if this message is published and it is.
RViz also shows me in the camera status that the CameraInfo and the Topic are OK.

