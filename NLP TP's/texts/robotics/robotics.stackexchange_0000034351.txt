Q:

Why doesn't the Turtlebot tutorial for SLAM map building work?

I am trying to use the Turtlebot tutorial for SLAM map building. I can run the the gmapping app on the Turtlebot, and then run rviz on the my laptop. The /map topic doesn't seem to be working, and rviz receives no data.
Rviz:
Global Status: Error    Fixed Frame [/map] does not exist

02. Map (Map)
Status: Warning
Message  No map received

Gmapping:
turtlebot@turtlebot-0169:~$ roslaunch turtlebot_navigation gmapping_demo.launch
... logging to /home/turtlebot/.ros/log/4d75f176-e274-11e0-90a4-485d607558c5/roslaunch-turtlebot-0169-19921.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://turtlebot-0169:35895/

SUMMARY
========

PARAMETERS
 * /slam_gmapping/sigma
 * /robot_pose_ekf/odom_used
 * /robot_pose_ekf/vo_used
 * /kinect_laser/output_frame_id
 * /move_base/TrajectoryPlannerROS/vx_samples
 * /move_base/local_costmap/observation_sources
 * /slam_gmapping/lskip
 * /move_base/TrajectoryPlannerROS/acc_lim_y
 * /move_base/TrajectoryPlannerROS/acc_lim_x
 * /slam_gmapping/ogain
 * /move_base/TrajectoryPlannerROS/sim_time
 * /move_base/local_costmap/transform_tolerance
 * /move_base/TrajectoryPlannerROS/min_vel_x
 * /move_base/local_costmap/height
 * /move_base/global_costmap/scan/topic
 * /kinect_laser_narrow/max_height
 * /slam_gmapping/map_update_interval
 * /move_base/global_costmap/obstacle_range
 * /move_base/local_costmap/inflation_radius
 * /kinect_laser/max_height
 * /openni_camera/projector_depth_baseline
 * /kinect_laser_narrow/output_frame_id
 * /move_base/local_costmap/robot_radius
 * /openni_camera/depth_frame_id
 * /move_base/local_costmap/static_map
 * /move_base/local_costmap/resolution
 * /slam_gmapping/lsigma
 * /openni_camera/image_time_offset
 * /move_base/global_costmap/publish_frequency
 * /slam_gmapping/srt
 * /slam_gmapping/srr
 * /move_base/local_costmap/width
 * /move_base/TrajectoryPlannerROS/max_vel_x
 * /move_base/local_costmap/rolling_window
 * /move_base/controller_frequency
 * /openni_camera/depth_time_offset
 * /move_base/local_costmap/scan/clearing
 * /openni_camera/depth_mode
 * /slam_gmapping/lasamplestep
 * /slam_gmapping/angularUpdate
 * /move_base/TrajectoryPlannerROS/xy_goal_tolerance
 * /move_base/global_costmap/scan/sensor_frame
 * /move_base/global_costmap/inflation_radius
 * /slam_gmapping/temporalUpdate
 * /slam_gmapping/particles
 * /rosdistro
 * /robot_pose_ekf/freq
 * /move_base/local_costmap/scan/data_type
 * /move_base/TrajectoryPlannerROS/max_rotational_vel
 * /move_base/TrajectoryPlannerROS/goal_distance_bias
 * /slam_gmapping/lasamplerange
 * /slam_gmapping/resampleThreshold
 * /move_base/local_costmap/scan/marking
 * /slam_gmapping/linearUpdate
 * /kinect_laser_narrow/min_height
 * /move_base/global_costmap/static_map
 * /robot_pose_ekf/publish_tf
 * /move_base/global_costmap/scan/data_type
 * /robot_pose_ekf/sensor_timeout
 * /move_base/TrajectoryPlannerROS/dwa
 * /robot_pose_ekf/imu_used
 * /pointcloud_throttle/max_rate
 * /move_base/global_costmap/robot_base_frame
 * /move_base/local_costmap/scan/topic
 * /slam_gmapping/astep
 * /move_base/local_costmap/update_frequency
 * /move_base/local_costmap/raytrace_range
 * /slam_gmapping/xmax
 * /move_base/local_costmap/publish_frequency
 * /move_base/global_costmap/observation_sources
 * /slam_gmapping/llsamplestep
 * /slam_gmapping/xmin
 * /slam_gmapping/delta
 * /move_base/global_costmap/update_frequency
 * /move_base/TrajectoryPlannerROS/acc_lim_th
 * /openni_camera/shift_offset
 * /move_base/TrajectoryPlannerROS/min_in_place_rotational_vel
 * /move_base/TrajectoryPlannerROS/heading_lookahead
 * /move_base/TrajectoryPlannerROS/holonomic_robot
 * /move_base/TrajectoryPlannerROS/yaw_goal_tolerance
 * /slam_gmapping/lstep
 * /slam_gmapping/llsamplerange
 * /move_base/global_costmap/scan/clearing
 * /slam_gmapping/maxUrange
 * /move_base/TrajectoryPlannerROS/path_distance_bias
 * /openni_camera/image_mode
 * /move_base/global_costmap/robot_radius
 * /move_base/local_costmap/scan/sensor_frame
 * /move_base/local_costmap/robot_base_frame
 * /openni_camera/depth_rgb_translation
 * /move_base/global_costmap/transform_tolerance
 * /move_base/global_costmap/scan/marking
 * /openni_camera/depth_registration
 * /kinect_laser/min_height
 * /move_base/local_costmap/obstacle_range
 * /move_base/global_costmap/raytrace_range
 * /move_base/TrajectoryPlannerROS/vtheta_samples
 * /openni_camera/depth_rgb_rotation
 * /move_base/TrajectoryPlannerROS/oscillation_reset_dist
 * /slam_gmapping/kernelSize
 * /rosversion
 * /openni_camera/debayering
 * /move_base/local_costmap/global_frame
 * /move_base/global_costmap/global_frame
 * /slam_gmapping/iterations
 * /openni_camera/rgb_frame_id
 * /slam_gmapping/ymin
 * /slam_gmapping/stt
 * /slam_gmapping/ymax
 * /slam_gmapping/str
 * /slam_gmapping/odom_frame

NODES
  /
    robot_pose_ekf (robot_pose_ekf/robot_pose_ekf)
    slam_gmapping (gmapping/slam_gmapping)
    move_base (move_base/move_base)
    kinect_breaker_enabler (turtlebot_node/kinect_breaker_enabler.py)
    openni_manager (nodelet/nodelet)
    openni_camera (nodelet/nodelet)
    pointcloud_throttle (nodelet/nodelet)
    kinect_laser (nodelet/nodelet)
    kinect_laser_narrow (nodelet/nodelet)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
process[robot_pose_ekf-1]: started with pid [20060]
process[slam_gmapping-2]: started with pid [20067]
process[move_base-3]: started with pid [20076]
process[kinect_breaker_enabler-4]: started with pid [20091]
process[openni_manager-5]: started with pid [20100]
process[openni_camera-6]: started with pid [20114]
process[pointcloud_throttle-7]: started with pid [20120]
process[kinect_laser-8]: started with pid [20128]
process[kinect_laser_narrow-9]: started with pid [20144]
[ INFO] [1316405004.001125207]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405004.283606201]: Subscribed to Topics: scan
[ INFO] [1316405004.336257035]: Requesting the map...

[ INFO] [1316405004.341809827]: Still waiting on map...

[ INFO] [1316405005.010092851]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405005.341890217]: Still waiting on map...

[ INFO] [1316405006.019010957]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405006.341824567]: Still waiting on map...

[ INFO] [1316405007.029806679]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405007.342214779]: Still waiting on map...

[ INFO] [1316405008.039128567]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405008.341802950]: Still waiting on map...

[ INFO] [1316405009.048117046]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405009.341815126]: Still waiting on map...

[ INFO] [1316405010.057038949]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405010.341812920]: Still waiting on map...

[ INFO] [1316405011.066328064]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405011.341804728]: Still waiting on map...

[ INFO] [1316405012.075293301]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405012.341822687]: Still waiting on map...

[kinect_breaker_enabler-4] process has finished cleanly.
log file: /home/turtlebot/.ros/log/4d75f176-e274-11e0-90a4-485d607558c5/kinect_breaker_enabler-4*.log
[ INFO] [1316405013.084292766]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405013.341826381]: Still waiting on map...

[ INFO] [1316405014.093128877]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405014.341805358]: Still waiting on map...

[ INFO] [1316405015.104259338]: [/openni_camera] No devices connected.... waiting for devices to be connected
[ INFO] [1316405015.341835466]: Still waiting on map...

[ INFO] [1316405016.341800101]: Still waiting on map...

[ INFO] [1316405017.341795644]: Still waiting on map...

[ INFO] [1316405017.674939931]: [/openni_camera] Number devices connected: 1
[ INFO] [1316405017.675493766]: [/openni_camera] 1. device on bus 001:12 is a Xbox NUI Camera (2ae) from Microsoft (45e) with serial id 'A00365918487050A'
[ WARN] [1316405017.679877755]: [/openni_camera] device_id is not set! Using first device.
[ INFO] [1316405017.746357383]: [/openni_camera] Opened 'Xbox NUI Camera' on bus 1:12 with serial number 'A00365918487050A'
[ INFO] [1316405017.801474750]: rgb_frame_id = 'kinect_rgb_optical_frame' 
[ INFO] [1316405017.808970727]: depth_frame_id = 'kinect_depth_optical_frame' 
[ INFO] [1316405018.341843820]: Still waiting on map...

[ INFO] [1316405019.341845241]: Still waiting on map...

 -maxUrange 16 -maxUrange 9.99 -sigma     0.05 -kernelSize 1 -lstep 0.05 -lobsGain 3 -astep 0.05
 -srr 0.01 -srt 0.02 -str 0.01 -stt 0.02
 -linearUpdate 0.5 -angularUpdate 0.436 -resampleThreshold 0.5
 -xmin -1 -xmax 1 -ymin -1 -ymax 1 -delta 0.05 -particles 80
[ INFO] [1316405019.677929669]: Initialization complete
update frame 0
update ld=0 ad=0
Laser Pose= 0 0 0
m_count 0
Registering First Scan
[ INFO] [1316405020.342255791]: Still waiting on map...

[ INFO] [1316405021.376333727]: Received a 256 X 32 map at 0.050000 m/pix

[ INFO] [1316405021.710116383]: MAP SIZE: 256, 32
[ INFO] [1316405021.734994211]: Subscribed to Topics: scan
[ INFO] [1316405022.221708936]: Sim period is set to 0.20

Originally posted by edgan on ROS Answers with karma: 66 on 2011-09-18
Post score: 0

A:

I wasn't setting ROS_HOSTNAME on the turtlebot. So it was defaulting to the hostname, like ROS_HOSTNAME=turtlebot-0169. My laptop couldn't resolve turtlebot-0169, and so it couldn't pull the data for rviz.

Originally posted by edgan with karma: 66 on 2011-09-19
This answer was ACCEPTED on the original site
Post score: 0

