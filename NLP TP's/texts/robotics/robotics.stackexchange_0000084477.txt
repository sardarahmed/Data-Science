Q:

DWA Cannot control at reasonable rate (controller_frequency)

When I set my DWA controller_frequency in move base params above 7.0 Hz, I get the behavior below and the robot does not move. I see the default is 20Hz, Any thoughts on potential causes? I have near-vanilla DWA params for the turtlebot in use and my velocity smoother accepts at 60 hz. I included my local planner yaml file below as well.
I'm running an i5 computer on my turtlebot.
Behavior is: Control loop missed its desired rate of 20.0000z, Got new plan, DWA planner failed to produce path., Got new plan, DWA planner failed to produce path., etc over and over
DWAPlannerROS:
  max_vel_x: 0.55# 0.55
  min_vel_x: 0.0 
  max_vel_y: 0.0# diff drive robot
  min_vel_y: 0.0# diff drive robot
  max_trans_vel: 0.5 # choose slightly less than the base's capability
  min_trans_vel: 0.1# this is the min trans velocity when there is negligible rotational velocity
  trans_stopped_vel: 0.1
  max_rot_vel: 5.0# choose slightly less than the base's capability
  min_rot_vel: 0.4# this is the min angular velocity when there is negligible translational velocity
  rot_stopped_vel: 0.4
  acc_lim_x: 1. # maximum is theoretically 2.0, but we go to 1.5 (now 1.)
  acc_lim_theta: 2.0
  acc_lim_y: 0.0# diff drive robot
  yaw_goal_tolerance: 0.10#0.3# 0.05
  xy_goal_tolerance: 0.10 #0.15
  # latch_xy_goal_tolerance: false
  sim_time: 1.7 # 1.0 from 1.7. 2. ok. 2.5+bad
  vx_samples: 20 # from 6 default 3
  vy_samples: 1 # diff drive robot, there is only one sample, but to be safe --Steve
  vtheta_samples: 40# 20
  path_distance_bias: 564.0 # 64. - weighting for how much it should stick to the global path plan
  goal_distance_bias: 24.0# 24.0 - wighting for how much it should attempt to reach its goal
  occdist_scale: 0.5# 0.01 - weighting for how much the controller should avoid obstacles
  forward_point_distance: 0.325 # 0.325- how far along to place an additional scoring point
  stop_time_buffer: 0.2 # 0.2- amount of time a robot must stop in before colliding for a valid traj.
  scaling_speed: 0.25 # 0.25 - absolute velocity at which to start scaling the robot's footprint
  max_scaling_factor: 0.2 # 0.2- how much to scale the robot's footprint when at speed.
  oscillation_reset_dist: 0.05

Originally posted by stevemacenski on ROS Answers with karma: 8272 on 2018-01-02
Post score: 0

Original comments
Comment by jayess on 2018-01-02:
Can you please copy and paste the error that you're receiving?
Comment by stevemacenski on 2018-01-02:
The error is:
Control loop missed its desired rate of 20.0000z.. actual loop took XYZ seconds.
Got new plan
DWA planner failed to produce path.
Got new plan
DWA planner failed to produce path.
over and over
Comment by jayess on 2018-01-02:\

Control loop missed its desired rate of 20.0000z.. actual loop took XYZ seconds

Is that literally (copy and paste of) the error that you received?
Comment by stevemacenski on 2018-03-10:
I found the cause of this, months later. It was from the robot state publisher not publishing fast enough for TF to make new transformations for DWA. I.e. I had it set at 10hz, so I cannot exceed that in DWA control.
Comment by jayess on 2018-03-10:
Could you please post your solution as an answer?
Comment by stevemacenski on 2018-03-10:
I dont have enough points to reopen in order to move that comment into an answer
Comment by jayess on 2018-03-10:
I reopened it for you. Next time, instead of closing a question you can leave an answer

A:

I found the cause of this, months later. It was from the robot state publisher not publishing fast enough for TF to make new transformations for DWA. I.e. I had it set at 10hz, so I cannot exceed that in DWA control.

Originally posted by stevemacenski with karma: 8272 on 2018-03-10
This answer was ACCEPTED on the original site
Post score: 1

