Q:

Gscam compilation error on Gumstix running Ubuntu 11.04

I am trying to install gscam on a Gumstix Overo COM. I have successfully installed the base ROS electric functions such as roscore, rosmake, etc. and I can run roscore. However, rosdep is not able to install yaml-cpp nor tinyxml on the Gumstix's ARM processor. Thus, I tried to install the packages from source:
yaml-cpp : http://code.google.com/p/yaml-cpp/downloads/list
tinyxml : http://code.google.com/p/libtinyxml/
yaml program compiled/installed natively with: cmake, make, sudo make install. Tinyxml I installed by following command: sudo apt-get install libtinyxml-dev
Also I installed necessary dependencies required by gscam:
Image common
svn co https://code.ros.org/svn/ros-pkg/stacks/image_common/tags/electric image_common
#common msgs
svn co https://code.ros.org/svn/ros-pkg/stacks/common_msgs/tags/electric common_msgs
pluginlib
hg clone https://kforge.ros.org/common/pluginlib -r electric
common rosdeps
hg clone https://kforge.ros.org/common/rosdepcore -r electric

But still problem is still present, I receive following error while trying to compile gscam package:

robot@overo:~/ros_packages/gscam$ rosmake --rosdep-install gscam
[ rosmake ] Packages requested are: ['gscam']                                                                                   
[ rosmake ] Logging to directory/home/robot/.ros/rosmake/rosmake_output-20120327-190214                                         
[ rosmake ] Expanded args ['gscam'] to:
['gscam']                                                                               
[ rosmake ] Generating Install Script using rosdep then executing. This may take a minute, you will be prompted for permissions. . .
Failed to find rosdep yaml-cpp for package gscam on OS:ubuntu version:11.04
Failed to find rosdep tinyxml for package gscam on OS:ubuntu version:11.04
WARNING: Rosdeps [u'yaml-cpp', u'tinyxml'] could not be resolved
rosdep executing this script:
{{{
set -o errexit
#No Packages to install
}}}
[ rosmake ] rosdep successfully installed all system dependencies                                                               
[ rosmake ] Starting >>> tools/rospack                                                                                          
[ rosmake ] Finished >> rosbuild [ make ]                                                                                      
[rosmake-0] Finished >> roslang [ make ]                                                                                       
[rosmake-0] Finished >> cpp_common [ make ]                                                                                    
[rosmake-0] Finished >> roscpp_traits [ make ]                                                                                 
[rosmake-0] Finished >> rostime [ make ]                                                                                       
[rosmake-0] Finished >> roscpp_serialization [ make ]                                                                          
[rosmake-0] Finished >> roslib [ make ]                                                                                        
[rosmake-0] Finished >> xmlrpcpp [ make ]                                                                                      
[rosmake-0] Finished >> rosconsole [ make ]                                                                                    
[rosmake-0] Finished >> std_msgs [ make ]                                                                                      
[rosmake-0] Finished >> rosgraph_msgs [ make ]                                                                                 
[rosmake-0] Finished >> roscpp [ make ]                                                                                        
[rosmake-0] Finished >> rospy [ make ]                                                                                         
[rosmake-0] Finished >> rosclean [ make ]                                                                                      
[rosmake-0] Finished >> rosgraph [ make ]                                                                                      
[rosmake-0] Finished >> rosparam [ make ]                                                                                      
[rosmake-0] Finished >> rosmaster [ make ]                                                                                     
[rosmake-0] Finished >> rosout [ make ]                                                                                        
[rosmake-0] Finished >> roslaunch [ make ]                                                                                     
[rosmake-0] Finished >> rosunit [ make ]                                                                                       
[rosmake-0] Finished >> rostest [ make ]                                                                                       
[rosmake-0] Finished >> topic_tools [ make ]                                                                                   
[rosmake-0] Finished >> rosbag [ make ]                                                                                        
[rosmake-0] Finished >> rosbagmigration [ make ]                                                                               
[rosmake-0] Finished >> geometry_msgs [ make ]                                                                                 
[rosmake-0] Finished >> sensor_msgs [ make ]                                                                                   
[rosmake-0] Finished >> pluginlib [ make ]                                                                                     
[rosmake-0] Finished >> message_filters [ make ]                                                                               
[rosmake-0] Finished >> image_transport [ make ]                                                                               
[rosmake-0] Finished >> common_rosdeps [ make ]                                                                                
[rosmake-0] Finished >> camera_calibration_parsers [ make ]                                                                    
[ rosmake ] All 32 linesamera_calibration_parsers: 8.5 sec ]                                         [ 1 Active 31/33 Complete ]
{-------------------------------------------------------------------------------
  mkdir -p bin
  cd build && cmake -Wdev -DCMAKE_TOOLCHAIN_FILE=`rospack find rosbuild`/rostoolchain.cmake  ..
  [rosbuild] Building package camera_calibration_parsers
  [rosbuild] Including /home/robot/ros/ros_comm/clients/roslisp/cmake/roslisp.cmake
  [rosbuild] Including /home/robot/ros/ros_comm/clients/rospy/cmake/rospy.cmake
  [rosbuild] Including /home/robot/ros/ros_comm/clients/cpp/roscpp/cmake/roscpp.cmake
  -- Configuring done
  -- Generating done
  -- Build files have been written to: /home/robot/ros_packages/image_common/camera_calibration_parsers/build
  cd build && make -l1
  make[1]: Entering directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[2]: Entering directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[3]: Entering directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[3]: Leaving directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  [  0%] Built target rospack_genmsg_libexe
  make[3]: Entering directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[3]: Leaving directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  [  0%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[3]: Leaving directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[3]: Entering directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  Linking CXX shared library ../lib/libcamera_calibration_parsers.so
  /usr/bin/ld: /usr/local/lib/libyaml-cpp.a(emitter.cpp.o): relocation R_ARM_THM_MOVW_ABS_NC against `a local symbol' can not be used when making a shared object; recompile with -fPIC
  /usr/local/lib/libyaml-cpp.a: could not read symbols: Bad value
  collect2: ld returned 1 exit status
  make[3]: *** [../lib/libcamera_calibration_parsers.so] Error 1
  make[3]: Leaving directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[2]: *** [CMakeFiles/camera_calibration_parsers.dir/all] Error 2
  make[2]: Leaving directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/robot/ros_packages/image_common/camera_calibration_parsers/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package camera_calibration_parsers written to:
[ rosmake ]    /home/robot/.ros/rosmake/rosmake_output-20120327-190214/camera_calibration_parsers/build_output.log
[rosmake-0] Finished 
This question dealt with similar problem but i was unable to solve mine with the help of this previous answer

Originally posted by ajr_ on ROS Answers with karma: 97 on 2012-03-27
Post score: 0

A:

Previous error was solved by installing yaml-cpp with following commands...

mkdir build
cd build
cmake -DBUILD_SHARED_LIBS=ON ..
make
sudo make install

Still one error left, which i think is caused by Ubuntu 11.10 and different paths for certain dependencies. I received following error message while trying to rosmake gscam:

[rosmake-0] Starting >>> gscam [ make ]                                         
[ rosmake ] Last 40 linescam: 54.1 sec ]             [ 1 Active 32/33 Complete ]
{-------------------------------------------------------------------------------
  [rosbuild] Including /home/robot/ros/ros_comm/clients/rospy/cmake/rospy.cmake
  [rosbuild] Including /home/robot/ros/ros_comm/clients/cpp/roscpp/cmake/roscpp.cmake
  -- Configuring done
  -- Generating done
  -- Build files have been written to: /home/robot/ros_packages/gscam/build
  cd build && make -l1
  make[1]: Entering directory `/home/robot/ros_packages/gscam/build'
  [rosbuild] Building package gscam
  [rosbuild] Cached build flags older than manifests; calling rospack to get flags
  [rosbuild] Including /home/robot/ros/ros_comm/clients/roslisp/cmake/roslisp.cmake
  [rosbuild] Including /home/robot/ros/ros_comm/clients/rospy/cmake/rospy.cmake
  [rosbuild] Including /home/robot/ros/ros_comm/clients/cpp/roscpp/cmake/roscpp.cmake
  -- Configuring done
  -- Generating done
  -- Build files have been written to: /home/robot/ros_packages/gscam/build
  make[2]: Entering directory `/home/robot/ros_packages/gscam/build'
  make[3]: Entering directory `/home/robot/ros_packages/gscam/build'
  make[3]: Leaving directory `/home/robot/ros_packages/gscam/build'
  [  0%] Built target rospack_genmsg_libexe
  make[3]: Entering directory `/home/robot/ros_packages/gscam/build'
  make[3]: Leaving directory `/home/robot/ros_packages/gscam/build'
  [  0%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/robot/ros_packages/gscam/build'
  make[3]: Leaving directory `/home/robot/ros_packages/gscam/build'
  make[3]: Entering directory `/home/robot/ros_packages/gscam/build'
  make[3]: Warning: File `/home/robot/ros/ros_comm/messages/std_msgs/msg_gen/cpp/include/std_msgs/Header.h' has modification time 3.8e+08 s in the future
  [100%] Building CXX object CMakeFiles/gscam.dir/src/gscam.o
  In file included from /usr/include/glib-2.0/glib/galloca.h:34:0,
                   from /usr/include/glib-2.0/glib.h:32,
                   from /usr/include/gstreamer-0.10/gst/gst.h:27,
                   from /home/robot/ros_packages/gscam/src/gscam.cpp:6:
  /usr/include/glib-2.0/glib/gtypes.h:34:24: fatal error: glibconfig.h: No such file or directory
  compilation terminated.
  make[3]: *** [CMakeFiles/gscam.dir/src/gscam.o] Error 1
  make[3]: Leaving directory `/home/robot/ros_packages/gscam/build'
/glibconfig.h  /usr/include/glib-2.0/glib/Error 2                               e /usr/include/glib-2.0/glib/                  dcp: cannot create regular file `/usr/include/glib-2.0/glib/glibconfig.h': Permission deniedude/glib-2.0/glib/                  lrobot@overo:~/ros_packages/gscam$ man cp                                        c /usr/include/glib-2.0/glib/                  nCP(1)                            User Commands                           CP(1)  i /usr/include/glib-2.0/glib/                  / /usr/include/glib-2.0/glib/---------------------------------------------------}0 /usr/include/glib-2.0/glib/                  .robot@overo:~/ros_packages/gscam

Originally posted by ajr_ with karma: 97 on 2012-04-04
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by ajr_ on 2012-04-23:
... this final step was solved by editing CMakelist.txt file inside gscam package. It was necessary to check if output of command pkg-config --cflags glib-2.0 was found on CMakelist.txt file includes. Correct include path was missing so by adding right path to txt file, gscam finally compiled.
Comment by ajr_ on 2012-04-24:
Also some libraries where missing. Running command sudo apt-get install gstreamer0.10-plugins-good helped.

