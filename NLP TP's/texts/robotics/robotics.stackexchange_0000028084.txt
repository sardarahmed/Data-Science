Q:

Gazebo crashes when spawning robot from URDF

When launching pioneer3dx.gazebo.launch from the p2os_urdf ROS package, gazebo crashes with the following error message:
[INFO] [1491870638.263414, 0.215000]: Calling service /gazebo/spawn_urdf_model
[INFO] [1491870638.489795, 0.361000]: Spawn status: SpawnModel: Successfully spawned model
[spawn_pioneer-5] process has finished cleanly
log file: /home/damjan/.ros/log/149f697e-1e4e-11e7-833b-3c970e29894f/spawn_pioneer-5*.log
Error [Param.cc:451] Unable to set value [-nan -nan -nan] for key[size]
gzclient: /build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/src/OgreNode.cpp:630: virtual void Ogre::Node::setScale(const Ogre::Vector3&): Assertion `!inScale.isNaN() && "Invalid vector supplied as parameter"' failed.
Aborted (core dumped)
[gazebo_gui-4] process has died [pid 26353, exit code 134, cmd /opt/ros/kinetic/lib/gazebo_ros/gzclient __name:=gazebo_gui __log:=/home/damjan/.ros/log/149f697e-1e4e-11e7-833b-3c970e29894f/gazebo_gui-4.log]

I'm running ROS Kinetic with Gazebo 7 (both installed with apt) on Xenial.
Seems to be a different issue from this one.

Originally posted by damjan on Gazebo Answers with karma: 35 on 2017-04-10
Post score: 1

A:

I had the same issue.
Sensor collistions are broken in the model. In amr_robots_description/urdf open all xacro files and replace size="0 0 0" with something like size="0.01 0.01 0.01". Then It'll work

Originally posted by eugene-katsevman with karma: 163 on 2017-04-14
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by damjan on 2017-04-16:
Thanks, this solved the crash!
Comment by eugene-katsevman on 2017-04-17:
please note there are two pull request into amr to fix this bug, as well as some others.
Comment by damjan on 2017-04-19:
Thanks! For now, I have ported your changes to my p2os fork. Right now amr-ros-config seems a bit unwieldy due to all the stuff that's in there.
Comment by midoosman on 2020-12-14:
worked for me, Thanks

