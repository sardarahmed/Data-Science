Q:

Odometry - 4ws quasiomnidirectional - Trigonometry - Strange behaviour

Hi,
Iam trying to make odometry work on a four wheel steering quasiomnidirectional base. Its losely based on pr2 trigonometry. The Problem that I encounter is that everything works except Angular_Z without any Linear_X or _Y. In that case the odometry frame twists opposite to reality. I also tried another approach (different math) but the same strange result. Anybody else encountered something like this before? Any suggestions how to solve this?

Originally posted by Dragonslayer on ROS Answers with karma: 574 on 2020-02-01
Post score: 0

A:

Problem solved. It was my "smart" base-controller that was the issue.
EDIT: More exact, I had it decide to invert linear(wheel) if the desired steerangle was bigger then PI/2 and adjust the steeringangle accordingly. This worked with other poses because all the wheels made this move but in the case of twist only 2 out of 4 wheels made this move. I think it might have been the covariance matrix that somehow saw this as an error and started mixing things up. Will ask that question in another post.

Originally posted by Dragonslayer with karma: 574 on 2020-02-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Dragonslayer on 2020-02-05:
EDIT: It wasnt the "smart" base-controller. ANSWER see: https://answers.ros.org/question/343104/odometry-4ws-quasiomnidirectional-covariance_matrix/

