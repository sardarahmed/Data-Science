Q:

How to get versions in package.xml from roscpp codes

Hi.
I would like to know if there is a way to get versions inside roscpp codes.
I want to print out the software version of node when it is launched, automatically referring manifest file.
Any hints, comments are welcomed.
Thanks in advance.

Originally posted by okku on ROS Answers with karma: 23 on 2016-04-14
Post score: 2

A:

Buried deep in the catkin documentation there is a note that after calling catkin_pacakge(), the package version is available as a cmake variable that is named after your package:  <packagename>_VERSION
You could make this available to C++ code using the add_definitions cmake command, like:
catkin_package(
    # any arguments to catkin_package here
)

add_definitions("-D${PROJECT_NAME}_VERSION=\"${${PROJECT_NAME}_VERSION}\"")

This uses the -D option to the compiler, which is equivalent to a #define.
You could use the version in your code as a string, for example:
ROS_INFO("Package version is %s", mypackage_VERSION); // replace mypackage with your package name

Originally posted by ahendrix with karma: 47576 on 2016-04-24
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by okku on 2016-04-25:
Cool! This is what I wanted.
Worked perfectly on my ROS Indigo environment.

