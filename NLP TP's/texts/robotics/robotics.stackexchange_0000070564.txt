Q:

Access field in message inside a message

Hallo
Being new to ros, IÂ´ve stumbled into a stupid problem..
Im writing a python listener, and I want to get the orientation from an Imu.
The variable I want to access can be echoed with : rostopic echo /imu/orientation/z
Here is what I have so far - which is not really working out...:
#!/usr/bin/env python
import rospy
from sensor_msgs.msg import Imu
from geometry_msgs.msg import Quaternion
def imu_callback(data):
    rospy.loginfo(Imu.orientation.z)
   #do something with z

def imu_listener():
    rospy.init_node('listener', anonymous=True)
    rospy.Subscriber("imu", Imu, imu_callback)
    rospy.spin()
if __name__ == '__main__':
    imu_listener()

Originally posted by Oevli on ROS Answers with karma: 30 on 2015-11-24
Post score: 0

A:

In imu_callback try
rospy.loginfo(data.orientation.z)

You need to use the message variable passed into your callback function (which you have named data), not the message type.
Be careful though, the orientation is represented as a quaternion, so if you are thinking that the z component is yaw you are going to have issues. See this answer for ways to convert rotations in rospy.

Originally posted by Thomas D with karma: 4347 on 2015-11-24
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Oevli on 2015-11-24:
Thanks :-)

