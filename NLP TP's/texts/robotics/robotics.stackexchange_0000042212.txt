Q:

compile error hector_quadrotor_controller

I am trying to compile hector_quadrotor_controller in Ros Fuerte on Ubuntu Lucid lynx.
I am getting following compile errors:
[ rosmake ] Last 40 linesctor_quadrotor_controller: 2.3 sec ]                                                                     [ 1 Active 30/31 Complete ]
{-------------------------------------------------------------------------------
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:328: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:328: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:328: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:329: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:329: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:329: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:348: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:349: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:350: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:351: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:352: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:353: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:363: error: request for member ‘data’ in ‘((gazebo::GazeboQuadrotorAerodynamics*)this)->gazebo::GazeboQuadrotorAerodynamics::drag_model_->gazebo::GazeboQuadrotorAerodynamics::DragModel::u’, which is of non-class type ‘int’
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:363: error: ‘struct gazebo::GazeboQuadrotorAerodynamics::DragModel’ has no member named ‘parameters_’
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:363: error: request for member ‘data’ in ‘((gazebo::GazeboQuadrotorAerodynamics*)this)->gazebo::GazeboQuadrotorAerodynamics::drag_model_->gazebo::GazeboQuadrotorAerodynamics::DragModel::y’, which is of non-class type ‘int’
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:363: error: ‘quadrotorDrag’ was not declared in this scope
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:364: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:364: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:364: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:365: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:365: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:365: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:369: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:369: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:369: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:369: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:371: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:372: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:373: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:374: error: invalid types ‘int[int]’ for array subscript
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp: In member function ‘virtual void gazebo::GazeboQuadrotorAerodynamics::Reset()’:
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:388: error: request for member ‘assign’ in ‘((gazebo::GazeboQuadrotorAerodynamics*)this)->gazebo::GazeboQuadrotorAerodynamics::propulsion_model_->gazebo::GazeboQuadrotorAerodynamics::PropulsionModel::x’, which is of non-class type ‘int’
  /home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/src/quadrotor_aerodynamics.cpp:389: error: request for member ‘assign’ in ‘((gazebo::GazeboQuadrotorAerodynamics*)this)->gazebo::GazeboQuadrotorAerodynamics::propulsion_model_->gazebo::GazeboQuadrotorAerodynamics::PropulsionModel::x_pred’, which is of non-class type ‘int’
  make[3]: *** [CMakeFiles/hector_gazebo_quadrotor_aerodynamics.dir/src/quadrotor_aerodynamics.o] Error 1
  make[3]: Leaving directory `/home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/build'
  make[2]: *** [CMakeFiles/hector_gazebo_quadrotor_aerodynamics.dir/all] Error 2
  make[2]: Leaving directory `/home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/dst/robotics/experiments/tu-darmstadt-ros-pkg/fuerte/hector_quadrotor/hector_quadrotor_controller/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package hector_quadrotor_controller written to:
[ rosmake ]    /home/dst/.ros/rosmake/rosmake_output-20120712-205353/hector_quadrotor_controller/build_output.log
[rosmake-3] Finished <<< hector_quadrotor_controller [FAIL] [ 2.38 seconds ]                                                                                 
[ rosmake ] Halting due to failure in package hector_quadrotor_controller. 
[ rosmake ] Waiting for other threads to complete.                               
[ rosmake ] Results:                                                                                                                                         

Source file looks fine to me. Did anyone faced such problem?

Originally posted by prince on ROS Answers with karma: 660 on 2012-07-12
Post score: 0

A:

You do not need the package hector_quadrotor_controller to run the quadrotor simulation using the hector_quadrotor_simple_controller plugin. Just use the command
rosmake hector_quadrotor_gazebo

or
rosmake hector_quadrotor_demo

to build all necessary packages. Nevertheless, as other people also had that kind of problem, I decided to move the hector_quadrotor_controller package to a new stack named hector_quadrotor_experimental.
If you want to build hector_quadrotor_controller, you have to compile some parts that define the aerodynamic model of the quadrotor using Matlab before building the ROS package itself. This build step is not integrated with cmake yet. The package contains a single plugin, that subscribes to motor voltages and generates thrust and torques out of them based on an aerodynamic model. The controller part is missing in the public repository as we use the Orocos Real-Time Toolkit (rtt_ros_integration) and integration is a bit weird at the moment.

Originally posted by Johannes Meyer with karma: 1266 on 2012-07-12
This answer was ACCEPTED on the original site
Post score: 1

