Q:

Problem loading Mesh with createMeshFromResource

Hi everyone,
I get the warning "Mesh definition is empty" when I run this code, Is there any problem?
I have tried with a lot of .dae and .stl files, but the result is the same.
moveit_msgs::CollisionObject co;
shapes::Mesh* m = shapes::createMeshFromResource("file://...");
shape_msgs::Mesh co_mesh;
shapes::ShapeMsg co_mesh_msg = co_mesh;
shapes::constructMsgFromShape(m,co_mesh_msg);
co.meshes.resize(1);
co.meshes[0] = co_mesh;
co.mesh_poses.resize(1);
co.mesh_poses[0].position.x = 1.0;
co.mesh_poses[0].position.y = 1.0;
co.mesh_poses[0].position.z = 0.0;
co.mesh_poses[0].orientation.w= 1.0;
co.mesh_poses[0].orientation.x= 0.0;
co.mesh_poses[0].orientation.y= 0.0;
co.mesh_poses[0].orientation.z= 0.0;
pub_co.publish(co);

Thanks for your help
Best

Originally posted by Fran Marquez on ROS Answers with karma: 13 on 2014-06-03
Post score: 1

Original comments
Comment by bluefish on 2015-03-22:
Hi!
I tried to compile your code. But I get the error:
error: ‘pub_co’ was not declared in this scope
pub_co.publish(co);
Could you help me out here? Do I need to implement a some header I forgot?
Thanks

A:

The first 6 lines of your code should be:
moveit_msgs::CollisionObject co;
shapes::Mesh* m = shapes::createMeshFromResource("file://...");
shape_msgs::Mesh co_mesh;
shapes::ShapeMsg co_mesh_msg;
shapes::constructMsgFromShape(m,co_mesh_msg);
co_mesh = boost::get<shape_msgs::Mesh>(co_mesh_msg);

I had the same problem when I followed the buggy response in this topic: http://answers.ros.org/question/147886/creating-a-collisionobject-from-a-mesh-in-hydro/

Originally posted by yvk with karma: 36 on 2014-06-09
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Fran Marquez on 2014-06-10:
Thanks! That work fine!

