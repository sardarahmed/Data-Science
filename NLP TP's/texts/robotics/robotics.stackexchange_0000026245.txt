Q:

DRCSIM - ROS interface to BDI WALK and STEP

The z value appears to be ignored for the foot placement to the 4 step (WALK) interface to the BDI library.  In particular, different z values for foot placement make no difference during the actual walking.
The single step (STEP) interface to the BDI library has 2 apparent problems.  First, the desired placement is ignored (even placements that work for the WALK interface).  Second, it goes into a loop and keeps trying to take a step.  The WALK interface takes four steps and returns to STAND on its own.  The STEP interface doesn't do that and doesn't return to STAND even when commanded to.
As always, there is an x% chance of user error, but I wanted to ask the question to see if others were seeing the same issue.
To reproduce the first issue - modify this tutorial in three ways - alter the z position of the foot placements, use roslaunch atlas_utils atlas.launch gzworld:=atlas_AtlasSimInterface.world (so that the robot can actually walk and not fall over), comment out the publish in step 5 (so the robot is left in the standing mode - makes testing quicker)
To reproduce the second issue - start as above, change the WALK to STEP, assign values to the step parameters.  An easy way in the loop is:

 - if (i==0):
 -       walk_msg.step_params.desired_step = step_data
 -       walk_msg.step_params.use_demo_walk = False

(the 2nd and 3rd lines should be indented, but I couldn't get that formatting to stay)
Add a call to return to stand mode at the end (repeat the second half of step 2)

Originally posted by GoRobotGo on Gazebo Answers with karma: 21 on 2013-04-17
Post score: 0

Original comments
Comment by scpeters on 2013-04-18:
Which version of drcsim and the BDI library are you using? The code has been changing quite rapidly, so it's important to know which version you're using.
Comment by GoRobotGo on 2013-04-18:
I am using the BDI library released with DRCSIM 2.4.0.  Is there a different one I should be using?
Comment by scpeters on 2013-04-18:
Ok, DRCSIM 2.4.0 uses AtlasSimInterface Library 1.0.8. You shouldn't need to use atlasAtlasSimInterface.world; that was only required for older versions of the BDI library. Now you should be able to use other worlds such as the qual world. Does your robot fall down when running the unmodified tutorial?
Comment by GoRobotGo on 2013-04-18:
Yes, the robot falls down when using the qual 1 world with the unmodified tutorial.
Comment by GoRobotGo on 2013-04-18:
Looking at my LD_LIBRARY_PATH, the only place where the library exists  is in /usr/lib/drcsim-2.4/AtlasSimInterface_1.0.8  There is a libAtlasSimInterface.so that is 13037808 bytes in size.  To verify that was the library used, I removed it and started the simulator and noted that there was an error about the plugin not found.
Comment by GoRobotGo on 2013-04-18:
To be more specific - it sometimes falls down at the end with qual 1 world and the unmodified tutorial after taking steps as expected, but sometimes it fails to take the steps with the qual 1 world and just wobbles a bit.
Comment by GoRobotGo on 2013-04-20:
Submitted issue about single STEP interface as drcsim issue 211
Comment by GoRobotGo on 2013-04-20:
Submitted issue about WALK as drcsim issue 212

A:

Issue submitted to the issue tracker. See comments.

Originally posted by nkoenig with karma: 7676 on 2013-07-30
This answer was ACCEPTED on the original site
Post score: 0

