Q:

Android apps build failure: dependencies error in rosjava_bootstrap

Hello,
I'm trying to build the ROS android apps following this tutorial: http://ros.org/wiki/ApplicationsPlatform/Clients/Android
There seems to be a dependency problem in rosjava_core/rosjava_bootstrap that I haven't been able to figure out.  I've tried reverting to a previous revision (January 13th revision), but that doesn't seem to help.
The exact error is:

  rosrun rosjava_bootstrap make.py rosjava_bootstrap
  Buildfile: /home/hcmi/ros/ros-android/rosjava_core/rosjava_bootstrap/dependencies.xml
  [artifact:dependencies] There were no dependencies specified
  [artifact:dependencies] There were no dependencies specified
  [artifact:dependencies] There were no dependencies specified

  BUILD FAILED
  /home/hcmi/ros/ros-android/rosjava_core/rosjava_bootstrap/build.xml:5: Problem: failed to create task or type include
  Cause: The name is undefined.

and here's the whole messy build log

$ rosmake android_app_chooser --threads=1[ rosmake ] Packages requested are: ['android_app_chooser']                     
[ rosmake ] Logging to directory/home/hcmi/.ros/rosmake/rosmake_output-20120124-150744
[ rosmake ] Expanded args ['android_app_chooser'] to:
['android_app_chooser']   
[ rosmake ] Checking rosdeps compliance for packages android_app_chooser.  This may take a few seconds.
[ rosmake ] rosdep check failed to find system dependencies: ant                
[rosmake-0] Starting >>> roslib [ make ]                                        
[rosmake-0] Finished >> rosclean [ make ]                                      
[rosmake-0] Finished >> rosgraph [ make ]                                      
[rosmake-0] Finished >> std_msgs [ make ]                                      
[rosmake-0] Finished >> rosgraph_msgs [ make ]                                 
[rosmake-0] Finished >> rosparam [ make ]                                      
[rosmake-0] Finished >> rosbuild [ make ]                                      
[rosmake-0] Finished >> roslang [ make ]                                       
[rosmake-0] Finished >> rospy [ make ]                                         
[rosmake-0] Finished >> rosmaster [ make ]                                     
[rosmake-0] Finished >> cpp_common [ make ]                                    
[rosmake-0] Finished >> roscpp_traits [ make ]                                 
[rosmake-0] Finished >> rostime [ make ]                                       
[rosmake-0] Finished >> roscpp_serialization [ make ]                          
[rosmake-0] Finished >> xmlrpcpp [ make ]                                      
[rosmake-0] Finished >> rosconsole [ make ]                                    
[rosmake-0] Finished >> roscpp [ make ]                                        
[rosmake-0] Finished >> rosout [ make ]                                        
[rosmake-0] Finished >> roslaunch [ make ]                                     
[rosmake-0] Finished >> rosunit [ make ]                                       
[rosmake-0] Finished >> rostest [ make ]                                       
[rosmake-0] Finished >> app_manager [ make ]                                   
[rosmake-0] Finished >> turtlebot_driver [ make ]                              
[rosmake-0] Finished >> topic_tools [ make ]                                   
[rosmake-0] Finished >> rosbag [ make ]                                        
[rosmake-0] Finished >> rosbagmigration [ make ]                               
[rosmake-0] Finished >> geometry_msgs [ make ]                                 
[rosmake-0] Finished >> sensor_msgs [ make ]                                   
[rosmake-0] Finished >> bullet [ make ]                                        
[rosmake-0] Finished >> angles [ make ]                                        
[rosmake-0] Finished >> rosnode [ make ]                                       
[rosmake-0] Finished >> rosmsg [ make ]                                        
[rosmake-0] Finished >> rostopic [ make ]                                      
[rosmake-0] Finished >> rosservice [ make ]                                    
[rosmake-0] Finished >> roswtf [ make ]                                        
[rosmake-0] Finished >> message_filters [ make ]                               
[rosmake-0] Finished >> tf [ make ]                                            
[rosmake-0] Finished >> nav_msgs [ make ]                                      
[rosmake-0] Finished >> diagnostic_msgs [ make ]                               
[rosmake-0] Finished >> orocos_kdl [ make ]                                    
[rosmake-0] Finished >> python_orocos_kdl [ make ]                             
[rosmake-0] Finished >> kdl [ make ]                                           
[rosmake-0] Finished >> dynamic_reconfigure [ make ]                           
[rosmake-0] Finished >> turtlebot_node [ make ]                                
[rosmake-0] Finished >> test_ros [ make ]                                      
[rosmake-0] Finished >> rosjava_bootstrap [ make ]                             
[ rosmake ] All 23 linesosjava_bootstrap: 2.4 sec ]  [ 1 Active 46/63 Complete ]
{-------------------------------------------------------------------------------
  rosrun rosjava_bootstrap make.py rosjava_bootstrap
  Buildfile: /home/hcmi/ros/ros-android/rosjava_core/rosjava_bootstrap/dependencies.xml
  [artifact:dependencies] There were no dependencies specified
  [artifact:dependencies] There were no dependencies specified
  [artifact:dependencies] There were no dependencies specified
  
  get-dependencies:
  
  BUILD SUCCESSFUL
  Total time: 1 second
  Buildfile: build.xml
  
  BUILD FAILED
  /home/hcmi/ros/ros-android/rosjava_core/rosjava_bootstrap/build.xml:5: Problem: failed to create task or type include
  Cause: The name is undefined.
  Action: Check the spelling.
  Action: Check that any custom tasks/types have been declared.
  Action: Check that any / declarations have taken place.
  
  
  Total time: 0 seconds
  Executing command: ['ant']
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package rosjava_bootstrap written to:
[ rosmake ]    /home/hcmi/.ros/rosmake/rosmake_output-20120124-150744/rosjava_bootstrap/build_output.log
[rosmake-0] Finished 

Originally posted by brianpen on ROS Answers with karma: 183 on 2012-01-24
Post score: 0

Original comments
Comment by Shanker on 2012-01-24:
I had the same problem and it was fixed the same way. The error message is not indicative of the problem at all. Perhaps this could be an added feature for the developers.
Comment by brianpen on 2012-01-24:
This appears to be related to this issue: http://answers.ros.org/question/3699/rosmake-build-failed, but is different enough that I thought I posted my own question so people googling the error message will find it.

A:

Naturally I figure out the answer right after finally posting to ROS answers...  Hopefully someone else finds this useful.
Solution: another package downgraded my ant version to 1.7 instead of 1.8.  I reinstalled 1.8 and the build is working again.

Originally posted by brianpen with karma: 183 on 2012-01-24
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by brianpen on 2012-01-26:
Note: the package is eclipse on ubuntu 10.04.  So... beware if you're following the rosjava tutorials.
Comment by brianpen on 2012-01-26:
It won't let me accept/unaccept my own answer :(
Comment by damonkohler on 2012-01-25:
Please mark this answer as accepted.

