Q:

'rosdep init' error when running without internet

Hi
I am trying to follow catkin tutorial for hydro. I realise 'sudo rosdep init' and rosdep update command need connection to internet repository. We have a local deb repository of ubuntu & ros in lab and are not connected directly to net.
Is there a work around of this problem?
EDIT 2:
I have created /etc/ros/rosdep/sources.list.d . In this directory I copied https://github.com/ros/rosdistro/tree/master/rosdep/sources.list.d/20-default.list. I modified https URL with local URI as file:///hoe/rosdep/base.yaml etc.
Other files are copied from https://github.com/ros/rosdistro/tree/master/rosdep .
I have set 20-default.list properly. rosdep update can read from it. After generating HIT for listed yaml files, rosdep start looking for net with the following prompt
 query rosdistro index
 https://raw.github.com/ros/rosdistro/master/index.yaml

This file I have added as one of the yaml files!
My current sources.list.d/20-default.list files have following contents
yaml file:///mnt/store/rosdep/osx-homebrew.yaml osx
#yaml https://github.com/ros/rosdistro/raw/master/rosdep/osx-homebrew.yaml osx
# generic
#yaml https://github.com/ros/rosdistro/raw/master/rosdep/base.yaml
yaml file:///mnt/store/rosdep/base.yaml
#yaml https://github.com/ros/rosdistro/raw/master/rosdep/python.yaml
yaml file:///mnt/store/rosdep/python.ymal
#gbpdistro https://github.com/ros/rosdistro/raw/master/releases/fuerte.yaml fuerte

I do not have any entry relataed to hydro which IMHO rosdep is trying to access.
This link https://github.com/ros/rosdistro/raw/master/releases/hydro.yaml do not works! I do not know whether gbpdistro resolves this into  an actual link?  A fuerte.yaml is available at https://github.com/ros/rosdistro/tree/master/releases but nothing related to hydro or groovy. It is probably because in hydro rosdep is updated.  There is a hint in 20-default.list, which read as follows :
newer distributions (Groovy, Hydro, ...) must not be listed anymore, they are being fetched from the rosdistro index.yaml instead

I have no idea how set it up.I need help in resolving this issue.
thanks
prince

Originally posted by prince on ROS Answers with karma: 660 on 2014-02-24
Post score: 1

A:

Hi
rosdep uses a source.list file (pretty much like apt does):
On my system it's located here:
/etc/ros/rosdep/sources.list.d/20-default.list

In this .list file you can find several links to github-hosted yaml files.

Try creating the file by hand if it doesn't exist
Make the necessary changes in the sources.list file, and probably in the .yaml files, so rosdep update can work without Internet access...

Edit: Here's the content of the file. cat /etc/ros/rosdep/sources.list.d/20-default.list 
# os-specific listings first
yaml https://github.com/ros/rosdistro/raw/master/rosdep/osx-homebrew.yaml osx
yaml https://github.com/ros/rosdistro/raw/master/rosdep/gentoo.yaml gentoo

# generic
yaml https://github.com/ros/rosdistro/raw/master/rosdep/base.yaml
yaml https://github.com/ros/rosdistro/raw/master/rosdep/python.yaml
yaml https://github.com/ros/rosdistro/raw/master/rosdep/ruby.yaml
gbpdistro https://github.com/ros/rosdistro/raw/master/releases/fuerte.yaml fuerte
gbpdistro https://github.com/ros/rosdistro/raw/master/releases/groovy.yaml groovy
gbpdistro https://github.com/ros/rosdistro/raw/master/releases/hydro.yaml hydro

For the yaml files, just fetch the files from github since they're too big to post here.
Edit2 (I can't reply until someone else replies first): You're right, it looks like the gbpdistro lines are useless (rosdep update throws "Ignore legacy gbpdistro "<ros_distro_here>") (It's funny I have them since my setup is only two weeks old...)
Actually, the <ros_distro> specifics can be found in the index.yaml file you linked. There:
[...]
hydro:
    distribution: hydro/distribution.yaml
    distribution_cache: http://ros.org/rosdistro/hydro-cache.yaml.gz
    [...]

But I'm not sure you'll need this since you won't have any Internet access to fetch the git sources (for the ROS packages).
From there, I see two options:

You trick rosdep, changing your /etc/hosts file and setting up a webserver (where you put the file rosdep tries to download) so it'll use yours and not try to access the Internet
You can try the command lines options (see Here) to enforce the update so rosdep is happy and then provides you the system dependencies management you need.

Originally posted by RedoXyde with karma: 66 on 2014-02-25
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by prince on 2014-02-25:
Can you post contents of this file other relevant yaml files?
Comment by prince on 2014-02-25:
I do not have  gbpdistro in the 20-default.list. I have edited question to reflect my observations.

