Q:

Cannot Declare Reference to tf2_msgs::TFMessage

Background:
I had a great callback function in a Gazebo plugin. I declared it with
void OnMsg(ConstVector3dPtr &msg)
and subscribed-to by my plugin's Load function with
subscriber = node->Subscribe("~/eb/vel_cmd", &MyPlugin::OnMsg, this);
Problem:
Instead of subscribing to "~/eb/vel_cmd", I'm subscribing to "/tf", so I need to change the message type of the callback (MyPlugin::OnMsg) to tf2_msgs::TFMessage. I followed the convention of the question in the link below to create a constant pointer for a tf2_msgs::TFMessage message.
http://answers.ros.org/question/21481...
Following the positionCb callback declaration in that code, now my callback is declared with:
private: void OnMsg(const tf2_msgs::TFMessage::ConstPtr& &msg)
I'm getting all kinds of compiling errors, but the biggest problem appears to be "Cannot declare reference to tf2_msgs::TFMessage_std::allocator<void >::ConstPtr& {aka class boost::shared_ptr<const tf2_msgs::tfmessage_std::allocator<void="">&}' (picture below).
Any ideas on what I'm doing incorrectly?
Compiling Errors:

Originally posted by ElizabethA on Gazebo Answers with karma: 5 on 2016-11-02
Post score: 0

A:

It looks like you're trying to mix gazebo transport with ROS. A Gazebo subscriber is not able to subscribe to ROS messages and vice-versa. You'll need a ROS node for that.
Here's an example of a ROS subscriber in a Gazebo plugin.

Originally posted by chapulina with karma: 7504 on 2016-11-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ElizabethA on 2016-11-04:
That was the problem!  Thanks so much for the example.
I also found this link to a Gazebo tutorial, once I knew what to look for, that also helped.
http://gazebosim.org/tutorials?tut=guided_i6
Comment by chapulina on 2016-11-04:
Nice find, I looked a bit for a tutorial which mentioned it and couldn't find one. Feel free to accept this answer so others know it solved your issue ;)

