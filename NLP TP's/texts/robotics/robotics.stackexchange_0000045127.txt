Q:

openni_launch in ROS fuerte doesn't work

Hi.
I was using Ubuntu 11.10 and ROS Electric version before, and it worked pretty well.
And I upgraded my Ubuntu to 12.04 and so I changed my ROS from Electric to Fuerte.
Installing ROS, and openni_camera, openni_launch, and I commanded in terminal,
$ roslaunch openni_launch openni.launch
THEN, it showed so many Exception AttributeErrors, errors, fatal errors. Followings are what the
terminal said..
... logging to /home/cpslab/.ros/log/3426f506-1c40-11e2-bd5e-90e6bace91bb/roslaunch-cpslab-System-Product-Name-12244.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.
started roslaunch server http://cpslab-System-Product-Name:58779/
SUMMARY
PARAMETERS

/camera/depth/rectify_depth/interpolation
/camera/depth_registered/rectify_depth/interpolation
/camera/disparity_depth/max_range
/camera/disparity_depth/min_range
/camera/disparity_depth_registered/max_range
/camera/disparity_depth_registered/min_range
/camera/driver/depth_camera_info_url
/camera/driver/depth_frame_id
/camera/driver/depth_registration
/camera/driver/device_id
/camera/driver/rgb_camera_info_url
/camera/driver/rgb_frame_id
/rosdistro
/rosversion

NODES
/camera/depth/
metric (nodelet/nodelet)
metric_rect (nodelet/nodelet)
points (nodelet/nodelet)
rectify_depth (nodelet/nodelet)
/camera/rgb/
debayer (nodelet/nodelet)
rectify_color (nodelet/nodelet)
rectify_mono (nodelet/nodelet)
/
camera_base_link (tf/static_transform_publisher)
camera_base_link1 (tf/static_transform_publisher)
camera_base_link2 (tf/static_transform_publisher)
camera_base_link3 (tf/static_transform_publisher)
camera_nodelet_manager (nodelet/nodelet)
/camera/
disparity_depth (nodelet/nodelet)
disparity_depth_registered (nodelet/nodelet)
driver (nodelet/nodelet)
points_xyzrgb_depth_rgb (nodelet/nodelet)
register_depth_rgb (nodelet/nodelet)
/camera/ir/
rectify_ir (nodelet/nodelet)
/camera/depth_registered/
metric (nodelet/nodelet)
metric_rect (nodelet/nodelet)
rectify_depth (nodelet/nodelet)
auto-starting new master
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[master]: started with pid [12260]
ROS_MASTER_URI=http://localhost:11311
setting /run_id to 3426f506-1c40-11e2-bd5e-90e6bace91bb
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[rosout-1]: started with pid [12273]
started core service [/rosout]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_nodelet_manager-2]: started with pid [12285]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/driver-3]: started with pid [12286]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/rgb/debayer-4]: started with pid [12308]
[ INFO] [1350907286.211506330]: Initializing nodelet with 4 worker threads.
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/rgb/rectify_mono-5]: started with pid [12344]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/rgb/rectify_color-6]: started with pid [12362]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/ir/rectify_ir-7]: started with pid [12386]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/rectify_depth-8]: started with pid [12424]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/metric_rect-9]: started with pid [12465]
[ERROR] [1350907286.443579252]: Failed to load nodelet [/camera/driver] of type [openni_camera/driver]: Failed to load library /opt/ros/fuerte/stacks/openni_camera/lib/libopenni_nodelet.so. Make sure that you are calling the PLUGINLIB_REGISTER_CLASS macro in the library code, and that names are consistent between this macro and your XML. Error string: Cannot load library: libOpenNI.so: wrong ELF class: ELFCLASS32
[FATAL] [1350907286.444286759]: Service call failed!
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/metric-10]: started with pid [12514]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth/points-11]: started with pid [12532]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/register_depth_rgb-12]: started with pid [12564]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth_registered/rectify_depth-13]: started with pid [12613]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth_registered/metric_rect-14]: started with pid [12636]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/depth_registered/metric-15]: started with pid [12654]
[camera/driver-3] process has died [pid 12286, exit code 255, cmd /opt/ros/fuerte/stacks/nodelet_core/nodelet/bin/nodelet load openni_camera/driver /camera_nodelet_manager --no-bond ir:=ir rgb:=rgb depth:=depth depth_registered:=depth_registered projector:=projector __name:=driver __log:=/home/cpslab/.ros/log/3426f506-1c40-11e2-bd5e-90e6bace91bb/camera-driver-3.log].
log file: /home/cpslab/.ros/log/3426f506-1c40-11e2-bd5e-90e6bace91bb/camera-driver-3*.log
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/points_xyzrgb_depth_rgb-16]: started with pid [12688]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/disparity_depth-17]: started with pid [12731]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera/disparity_depth_registered-18]: started with pid [12750]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link-19]: started with pid [12784]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link1-20]: started with pid [12830]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link2-21]: started with pid [12846]
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
process[camera_base_link3-22]: started with pid [12881]
[ERROR] [1350907287.597660166]: Tried to advertise a service that is already advertised in this node [/camera/depth_registered/image_rect_raw/compressedDepth/set_parameters]
[ERROR] [1350907287.607404970]: Tried to advertise a service that is already advertised in this node [/camera/depth_registered/image_rect_raw/compressed/set_parameters]
[ERROR] [1350907287.617166359]: Tried to advertise a service that is already advertised in this node [/camera/depth_registered/image_rect_raw/theora/set_parameters]
------END -----------------
$ roscore alone works well, so it is the problem of launch files or else..
at "http://www.ros.org/wiki/openni", I think it's the problem of dependency.. but I don't know
about it exactly.
Could you give me any solutions? Do I have to fix some codes or install other stuffs?
Thanks a lot in advance!!

Originally posted by Oppenheim on ROS Answers with karma: 41 on 2012-10-22
Post score: 0

Original comments
Comment by yigit on 2012-10-22:
First of all, you can safely ignore the exceptions. It's a python error and there are some patches that do nothing but suppressing the exception message. For the nodelet error could you please do a "killall XnSensorServer" and relaunch your openni services using roslaunch openni_launch ...
Comment by dinamex on 2012-10-22:
have You insatlled the openni drivers? How did you install openni_launch from source or with $sudo apt get ros-fuerte-openni-kinect ?
Comment by Oppenheim on 2012-10-23:
@yygyt Thanks for your answering. But when i command $ killall XnSensorServer, then it says XnSensorServer : no process found. Then isn't it the problem of other things than XnSensorServer? Again, thanks a lot!
Comment by Oppenheim on 2012-10-23:
@dinamex Thanks for your answering. I installed openni_launch with $ sudo apt-get install ros-fuerte-openni-launch. and I just installed openni_camera and openni_launch. Should I install other things?, Thanks a lot!

A:

I had the same problem , the solution is to stop the service , start again , in a new terminal , write killall XnSensorServer and then start the openni launch .. it will work .. the order is important... also you have to do it every time.. i havent found a fix for it yet to make it a permanent sol.

Originally posted by Vegeta with karma: 340 on 2012-10-26
This answer was ACCEPTED on the original site
Post score: 1

