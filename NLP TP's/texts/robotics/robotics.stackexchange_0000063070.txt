Q:

bondcpp fails on osx

Hello!
I tried the tutorial http://wiki.ros.org/indigo/Installation/OSX/Homebrew/Source and I know there is a section there for bondcpp fails and the exact problem I have, which is:
Built target roscpp_generate_messages_cpp
Linking CXX shared library /Users/tiberio/ros_catkin_ws/devel_isolated/bondcpp/lib/libbondcpp.dylib
ld: library not found for -luuid
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [/Users/tiberio/ros_catkin_ws/devel_isolated/bondcpp/lib/libbondcpp.dylib] Error 1
make[1]: *** [CMakeFiles/bondcpp.dir/all] Error 2
make: *** [all] Error 2
<== Failed to process package 'bondcpp':
  Command '/Users/tiberio/ros_catkin_ws/install_isolated/env.sh make -j8 -l8' returned non-zero exit status 2

Reproduce this error by running:
==> cd /Users/tiberio/ros_catkin_ws/build_isolated/bondcpp && /Users/tiberio/ros_catkin_ws/install_isolated/env.sh make -j8 -l8

Command failed, exiting.

However the solution doesn't work. Am I doing it right?
I did:
brew update
rosdep update
rosdep install --from-paths src --ignore-src --rosdistro indigo -y

and then tried again
./src/catkin/bin/catkin_make_isolated --install -DCMAKE_BUILD_TYPE=Release

and had no better luck.
I thank you all for the patience and time in advance.
EDIT: Output from VERBOSE=1, I ran only cd /Users/tiberio/ros_catkin_ws/build_isolated/bondcpp && VERBOSE=1 /Users/tiberio/ros_catkin_ws/install_isolated/env.sh make -j8 -l8

This code block was moved to the following github gist:
https://gist.github.com/answers-se-migration-openrobotics/1b6390b5d66046f40e5c4bd68663af64

Originally posted by Tiberius on ROS Answers with karma: 36 on 2014-10-03
Post score: 2

A:

In order to link against uuid, I'm guessing we are using pkg-config:
% pkg-config --libs uuid
-L/usr/local/Cellar/uuid/1.6.2/lib -luuid

This looks like a bug in bondcpp, from your c++ command (I expanded it for easier reading), you can see that only -luuid is passed but the corresponding -L/usr/local/Cellar/uuid/1.6.2/lib is missing, that is why it cannot find the library:
/usr/bin/c++

-O3
-DNDEBUG
-isysroot
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk
-dynamiclib
-Wl,-headerpad_max_install_names

-o
/Users/tiberio/ros_catkin_ws/devel_isolated/bondcpp/lib/libbondcpp.dylib
-install_name
/Users/tiberio/ros_catkin_ws/devel_isolated/bondcpp/lib/libbondcpp.dylib
CMakeFiles/bondcpp.dir/src/timeout.cpp.o
CMakeFiles/bondcpp.dir/src/bond.cpp.o
CMakeFiles/bondcpp.dir/src/BondSM_sm.cpp.o
-luuid
/Users/tiberio/ros_catkin_ws/install_isolated/lib/libroscpp.dylib
/usr/local/lib/libboost_signals-mt.dylib
/usr/local/lib/libboost_filesystem-mt.dylib
/Users/tiberio/ros_catkin_ws/install_isolated/lib/librosconsole.dylib
/Users/tiberio/ros_catkin_ws/install_isolated/lib/librosconsole_log4cxx.dylib
/Users/tiberio/ros_catkin_ws/install_isolated/lib/librosconsole_backend_interface.dylib
/usr/local/lib/liblog4cxx.dylib
/usr/local/lib/libboost_regex-mt.dylib
/Users/tiberio/ros_catkin_ws/install_isolated/lib/libroscpp_serialization.dylib
/Users/tiberio/ros_catkin_ws/install_isolated/lib/librostime.dylib
/usr/local/lib/libboost_date_time-mt.dylib
/Users/tiberio/ros_catkin_ws/install_isolated/lib/libxmlrpcpp.dylib
/Users/tiberio/ros_catkin_ws/install_isolated/lib/libcpp_common.dylib
/usr/local/lib/libboost_system-mt.dylib
/usr/local/lib/libboost_thread-mt.dylib
/usr/local/lib/libconsole_bridge.dylib

bondcpp or who ever is originally finding uuid is either not passing along the library directory or not converting the relative library (-L/usr/local/Cellar/uuid/1.6.2/lib -luuid) into an absolute library (maybe /usr/local/Cellar/uuid/1.6.2/lib/libuuid.dylib).
Please file an issue against bond_core on GitHub:
https://github.com/ros/bond_core/issues
And include as much detail from this Q&A as appropriate.

Originally posted by William with karma: 17335 on 2014-10-06
This answer was ACCEPTED on the original site
Post score: 0

