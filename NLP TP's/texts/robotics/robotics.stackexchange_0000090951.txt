Q:

Have two nodes publish to same topic

So I have two nodes publishing to the topic /mavros/setpoint_position/local and I want one to have priority over the other. Right now it just switches between the two. Is there a way to have them both publish then assign priority to one?
More info on my particular problem. I have a exploration node sending to the topic, then have another node which sends only when battery is too low. I don't want to change anything in the exploration alghoritm, just have the battery node publish to the topic /mavros/setpoint_position/local and overwrite what the exploration node publishes.

Originally posted by lidar_help on ROS Answers with karma: 25 on 2019-03-18
Post score: 1

A:

It sounds like multiplexing may help. From the description on the wiki

mux is a ROS node that subscribes to a set of incoming topics and republishes incoming data from one of them to another topic, i.e., it's a multiplexer that switches an output among 1 of N inputs. Services are offered to switch among input topics, and to add and delete input topics. At startup, the first input topic on the command line is selected.

To use it with rosrun:
rosrun topic_tools <outopic> <intopic1> [intopic2...] [standard ROS arguments]

and to use it with roslaunch see #q84386.

Originally posted by jayess with karma: 6155 on 2019-03-18
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by lidar_help on 2019-03-19:
I solved the problem. What I did was to change the topic names of the two nodes then simply have a new control node subscribe to both of those topics. This control node would then decide which of the two topics to publish. From what I can read this method is very similar to what jayess described above, and that method seems easier than creating a whole new node.
Comment by Dyson sphere on 2019-03-19:
You can also consider using nodelets for this as it provides features as zero copy of data and reduced networking (nodelets wiki). There is already nodelet for similar use case and that is yocs_waypoints_navi

