Q:

Protobuf version error on Ubuntu 18.04 and gazebo9

Hello,
I try to build an external plugin with gazebo9 on ubunut 8.04 form OSRF repo and it fails with many error like "/usr/include/ignition/msgs1/ignition/msgs/color.pb.h:17:2: error: #error This file was generated by an older version of protoc which is #error This file was generated by an older version of protoc which is"
lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 18.04 LTS
Release:    18.04
Codename:   bionic

dpkg -l | grep gazebo9 
ii  gazebo9                           9.2.0-1~bionic              amd64        Open Source Robotics Simulator
ii  gazebo9-common            9.2.0-1~bionic              all                Open Source Robotics Simulator - Shared files
ii  gazebo9-plugin-base       9.2.0-1~bionic              amd64        Open Source Robotics Simulator - base plug-ins
ii  libgazebo9:amd64           9.2.0-1~bionic              amd64        Open Source Robotics Simulator - shared library
ii  libgazebo9-dev:amd64    9.2.0-1~bionic              amd64        Open Source Robotics Simulator - Development Files

dpkg -l | grep protobuf                                                 2 â†µ
ii  libmirprotobuf3:amd64          0.31.1-0ubuntu1                     amd64        Display server for Ubuntu - RPC definitions
ii  libprotobuf-dev:amd64          3.0.0-9.1ubuntu1                    amd64        protocol buffers C++ library (development files)
ii  libprotobuf-lite10:amd64       3.0.0-9.1ubuntu1                    amd64        protocol buffers C++ library (lite version)
ii  libprotobuf10:amd64             3.0.0-9.1ubuntu1                    amd64        protocol buffers C++ library
ii  protobuf-c-compiler               1.2.1-2                                    amd64        Protocol Buffers C compiler (protobuf-c)
ii  protobuf-compiler                  3.0.0-9.1ubuntu1                    amd64        compiler for protocol buffer definition files
ii  python3-protobuf                   3.0.0-9.1ubuntu1                    amd64        Python 3 bindings for protocol buffers

Issue open on gazebo repo too : https://bitbucket.org/osrf/gazebo/issues/2496/protobuf-error-on-ubuntu-1804

Originally posted by khancyr on Gazebo Answers with karma: 11 on 2018-07-24
Post score: 0

A:

this was due to a conflict between manually installed protoc and apt one : see https://bitbucket.org/osrf/gazebo/issues/2496/protobuf-error-on-ubuntu-1804

Originally posted by khancyr with karma: 11 on 2018-10-29
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by ivaughn on 2020-07-09:
This link is dead, which is a bummer because I've got the same issue.
Comment by Bromeara on 2020-07-14:
OSRF has moved their repo to github. You can find the migrated issue and a script to remove that version of protobuf here. https://github.com/osrf/gazebo/issues/2496
Comment by khancyr on 2020-07-15:
Hello,
The mistake was that I installed google cartographer that compile a fresh version of protoc when Gazebo need the one in the Ubuntu repo. So you need to change your PATH to point to the apt version of protoc to be used by Gazebo. Or remove the other one if you don't use it anymore

