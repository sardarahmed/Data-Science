Q:

Creating a workspace using ROS for Windows

Hello,
I followed the instructions given here to install ROS melodic on Windows. The install was successful as I was able to test a few commands like "roscore" and "roscd"
**********************************************************************
** Visual Studio 2019 Developer Command Prompt v16.2.3
** Copyright (c) 2019 Microsoft Corporation
**********************************************************************

C:\Windows\System32>roscore
... logging to C:\Users\Administrator\.ros\log\7440560f-cd72-11e9-92b3-44032cd3d0aa\roslaunch-WALEED-TTS-3392.log
Checking log directory for disk usage. This may take a while.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.
started roslaunch server http://WALEED-TTS:53466/
ros_comm version 1.14.3

SUMMARY
========

PARAMETERS
 * /rosdistro: melodic
 * /rosversion: 1.14.3

NODES

auto-starting new master
process[master]: started with pid [9592]
ROS_MASTER_URI=http://WALEED-TTS:11311/
setting /run_id to 7440560f-cd72-11e9-92b3-44032cd3d0aa
process[rosout-1]: started with pid [17640]
started core service [/rosout]

The default workspace is OK
**********************************************************************
** Visual Studio 2019 Developer Command Prompt v16.2.3
** Copyright (c) 2019 Microsoft Corporation
**********************************************************************

C:\Windows\System32>roscd

C:\opt\ros\melodic\x64>

The problem is I am unable to create a workspace using catkin_make
**********************************************************************
** Visual Studio 2019 Developer Command Prompt v16.2.3
** Copyright (c) 2019 Microsoft Corporation
**********************************************************************

C:\Windows\System32>roscd

C:\opt\ros\melodic\x64>cd..

C:\opt\ros\melodic>mkdir catkin_ws\src

C:\opt\ros\melodic>cd catkin_ws

C:\opt\ros\melodic\catkin_ws>catkin_make
Base path: C:\opt\ros\melodic\catkin_ws
Source space: C:\opt\ros\melodic\catkin_ws\src
Build space: C:\opt\ros\melodic\catkin_ws\build
Devel space: C:\opt\ros\melodic\catkin_ws\devel
Install space: C:\opt\ros\melodic\catkin_ws\install
Copying file from "C:\opt\ros\melodic\x64\share\catkin\cmake\toplevel.cmake" to "C:\opt\ros\melodic\catkin_ws\src\CMakeLists.txt"
####
#### Running command: "cmake C:\opt\ros\melodic\catkin_ws\src -DCMAKE_BUILD_TYPE=RelWithDebInfo -DCATKIN_DEVEL_PREFIX=C:\opt\ros\melodic\catkin_ws\devel -DCMAKE_INSTALL_PREFIX=C:\opt\ros\melodic\catkin_ws\install -G NMake Makefiles" in "C:\opt\ros\melodic\catkin_ws\build"
####
-- The C compiler identification is MSVC 19.22.27905.0
-- The CXX compiler identification is MSVC 19.22.27905.0
-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.22.27905/bin/Hostx64/x64/cl.exe
-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.22.27905/bin/Hostx64/x64/cl.exe -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.22.27905/bin/Hostx64/x64/cl.exe
-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/VC/Tools/MSVC/14.22.27905/bin/Hostx64/x64/cl.exe -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Using CATKIN_DEVEL_PREFIX: C:/opt/ros/melodic/catkin_ws/devel
-- Using CMAKE_PREFIX_PATH: C:/opt/ros/melodic/x64;C:/opt/rosdeps/x64;C:/opt/vcpkg/installed/x64-windows
-- This workspace overlays: C:/opt/ros/melodic/x64
-- Found PythonInterp: C:/Python27/python2.exe (found suitable version "2.7.16", minimum required is "2")
-- Using PYTHON_EXECUTABLE: C:/Python27/python2.exe
-- Using default Python package layout
-- Found PY_em: C:\opt\python27amd64\lib\site-packages\em.pyc
-- Using empy: C:/opt/python27amd64/lib/site-packages/em.pyc
-- Using CATKIN_ENABLE_TESTING: ON
-- Call enable_testing()
-- Using CATKIN_TEST_RESULTS_DIR: C:/opt/ros/melodic/catkin_ws/build/test_results
-- Found gtest: gtests will be built
-- Using Python nosetests: C:/opt/python27amd64/Scripts/nosetests-2.7.exe
Traceback (most recent call last):
  File "C:/opt/ros/melodic/x64/share/catkin/cmake/parse_package_xml.py", line 117, in <module>
    main()
  File "C:/opt/ros/melodic/x64/share/catkin/cmake/parse_package_xml.py", line 103, in main
    package = parse_package(args.package_xml)
  File "C:\opt\python27amd64\lib\site-packages\catkin_pkg\package.py", line 514, in parse_package
    return parse_package_string(xml, filename, warnings=warnings)
  File "C:\opt\python27amd64\lib\site-packages\catkin_pkg\package.py", line 542, in parse_package_string
    raise InvalidPackage('The manifest contains invalid XML:\n%s' % ex, filename)
catkin_pkg.package.InvalidPackage: Error(s) in package 'C:/opt/ros/melodic/x64/share/catkin/cmake/../package.xml':
The manifest contains invalid XML:
DLL load failed: %1 is not a valid Win32 application.
CMake Error at C:/opt/ros/melodic/x64/share/catkin/cmake/safe_execute_process.cmake:11 (message):
  execute_process(C:/Python27/python2.exe
  "C:/opt/ros/melodic/x64/share/catkin/cmake/parse_package_xml.py"
  "C:/opt/ros/melodic/x64/share/catkin/cmake/../package.xml"
  "C:/opt/ros/melodic/catkin_ws/build/catkin/catkin_generated/version/package.cmake")
  returned error code 1
Call Stack (most recent call first):
  C:/opt/ros/melodic/x64/share/catkin/cmake/catkin_package_xml.cmake:74 (safe_execute_process)
  C:/opt/ros/melodic/x64/share/catkin/cmake/all.cmake:168 (_catkin_package_xml)
  C:/opt/ros/melodic/x64/share/catkin/cmake/catkinConfig.cmake:20 (include)
  CMakeLists.txt:56 (find_package)

-- Configuring incomplete, errors occurred!
See also "C:/opt/ros/melodic/catkin_ws/build/CMakeFiles/CMakeOutput.log".
See also "C:/opt/ros/melodic/catkin_ws/build/CMakeFiles/CMakeError.log".
Invoking "cmake" failed

I am not sure if it is something related to the path issue or something else. Your help is appreciated. Thanks

Originally posted by wbadry on ROS Answers with karma: 33 on 2019-09-02
Post score: 0

Original comments
Comment by gvdhoorn on 2019-09-02:
I'm sorry, but I have to close your question (temporarily) as it doesn't follow our support guidelines - specifically the part about not posting screenshots of terminals.
Even under Windows, the terminal contains text, that can be copy-pasted directly into your question (as you've done in the lower part of your post).
Please edit your original question to replace the screenshots with the actual text. You can use the edit button/link for that (under your post).
Be sure to format everything correctly (again: similar to how you've done it in the second half of your post).
Comment by wbadry on 2019-09-02:
MOdified it as instructed. Thanks
Comment by leonardomsnt on 2019-09-02:
It may not be your ideal solution, but I would recomend you to use the Ubuntu WSL application with VcXsrv if you are using Windows 10.

A:

It looks like your environment is using python from a previous install. It should be using the python instance installed in c:\opt\python27amd64. Could you remove the c:\python27 from the path and reopen the console?

Originally posted by OoeyGUI with karma: 186 on 2019-09-03
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by wbadry on 2019-09-09:
That was exactly the issue. Thanks

