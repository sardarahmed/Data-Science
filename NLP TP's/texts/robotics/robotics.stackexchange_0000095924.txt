Q:

ROS1 Subscriber callback

I have a simple class as follows:
class SimpleSub {
public:
    SimpleSub(ros::NodeHandle *nh) {
           nh->subscribe("/imu", 1000, &SimpleSub::imuSubsCallback, this);
   }
  void imuSubsCallback(const sensor_msgs::ImuConstPtr& msg)
  {
      ROS_INFO("Orientation: X=%f, Y=%f, Z=%f\n", msg->orientation.x, msg->orientation.y, msg->orientation.z);
  }
private:
       ros::Subscriber imuSub_;
};

When I run IMU publisher, my callback does not get called. However, it works when I use just stand-alone (not class member function)  like this:
void imuSubsCallback(const sensor_msgs::ImuConstPtr& msg);

There is no compile error. Am I doing something wrong when registering callback (nh->subscriber)?
Thanks!

Originally posted by fiji3119 on ROS Answers with karma: 53 on 2020-05-21
Post score: 1

A:

Try to use imuSub_ to subscribe, otherwise the subscription goes out of scope when you leave your constructor.
imuSub_= nh->subscribe("/imu", 1000, &SimpleSub::imuSubsCallback, this);

Originally posted by Thomas D with karma: 4347 on 2020-05-21
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by fiji3119 on 2020-05-22:
Duh! Yeah. Thank you for pointing that out. Works!

