Q:

log messages to file

Hello everybody.
I am trying to write a package for storing some information in a file in order to plot them later (usually in matlab).
I need it in order to check if the things will work properly. Follows a more detailed description of the problem.
What I would like to do is  a simple logger class that would be initialized using the full path to the desired "log" file.
A part from standard constructor and destructor i would like to have a function, lets say something like
void logMsg(<generic_msg> m);

That takes any ros msg as parameter and writes it to a file in matlab friendly format.
Now I can think of multiple ways of doing it for example:

Use overloading. I will define multiple versions of logMsg with different parameters and code. Example:
void logMsg(nav_msg::Odometry o);
void logMsg(geometry_msg::Point p);

PROS: easy to implement
CONS: huge file, code repetition, poor flexibility

Taking a string as input. I will handle the messages as a string and print them to file as a string. However this requires the user to convert the string himself/herself, and this is not what I have in mind. Providing a function that formats the message in a string would end up in the problems above. Example:
void logMsg(std::string s);

std::string toString(<various_types_of_msgs>);

????

I cannot think anything proper for the purpose, does anyone have any suggestions?
Thank you very much
Andrea

Originally posted by Mago Nick on ROS Answers with karma: 385 on 2014-09-26
Post score: 0

Original comments
Comment by bvbdort on 2014-09-26:
First method looks good, 2nd method output is similar to rostopic echo to text file.
Comment by Mago Nick on 2014-09-26:
I  know, but the first method requires implementing each function for each file. I am trying to understand if there is a better way of doing it

A:

3 . ????

.. use rosbag and a suitable bag->X conversion.
From a quick search:

ROS Answers: How can I use bag file data in Matlab?
ROS Answers: How to extract data from *.bag? (ROS Answers question)
Random blog post: ROS Bag Files
ros-users post: bcharrow/matlab_rosbag: A small library for reading ROS bags in Matlab

etc

Edit: Another option might be to use the official ROS support released by Mathworks.

Originally posted by gvdhoorn with karma: 86574 on 2014-09-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Mago Nick on 2014-09-26:
Yes right, that was the third option... do you suggest that one?
Comment by gvdhoorn on 2014-09-26:
Of course. Why create something yourself, that has been done a 1000 times already? I've also added a 4th option.
Comment by Mago Nick on 2014-09-26:
Thank you very much! I will use a rosbag

