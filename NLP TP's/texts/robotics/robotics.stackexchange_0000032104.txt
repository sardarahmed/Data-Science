Q:

Kinect with openni_kinect driver not working after installing PrimeSensor Module

Hi,
I am using Ubuntu 10.04 x64 and ROS diamond.
My Kinect worked well with openni_kinect driver. Following instructions on this link, I could view the data from kinect.
However, after i installed PrimeSensor Module Stable Build for Ubuntu 10.10 x64 (64-bit) v5.0.1.31(There is no module for Ubuntu 10.04), when I tried to view the data using openni_camera package,

roslaunch openni_camera openni_node.launch

It shows no device connected...
vincent@vincent-desktop:~$ roslaunch openni_camera openni_node.launch 
... logging to /home/vincent/.ros/log/adc93df0-9164-11e0-a0f9-d4856407c2d5/roslaunch-vincent-desktop-6608.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://vincent-desktop:36150/

SUMMARY
========

PARAMETERS
 * /rosdistro
 * /openni_node1/use_indices
 * /openni_node1/depth_registration
 * /openni_node1/image_time_offset
 * /openni_node1/depth_frame_id
 * /openni_node1/depth_mode
 * /openni_node1/debayering
 * /rosversion
 * /openni_node1/projector_depth_baseline
 * /openni_node1/rgb_frame_id
 * /openni_node1/depth_rgb_translation
 * /openni_node1/depth_time_offset
 * /openni_node1/image_mode
 * /openni_node1/shift_offset
 * /openni_node1/device_id
 * /openni_node1/depth_rgb_rotation

NODES
  /
    openni_node1 (openni_camera/openni_node)
    kinect_base_link (tf/static_transform_publisher)
    kinect_base_link1 (tf/static_transform_publisher)
    kinect_base_link2 (tf/static_transform_publisher)
    kinect_base_link3 (tf/static_transform_publisher)

auto-starting new master
process[master]: started with pid [6622]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to adc93df0-9164-11e0-a0f9-d4856407c2d5
process[rosout-1]: started with pid [6635]
started core service [/rosout]
process[openni_node1-2]: started with pid [6643]
process[kinect_base_link-3]: started with pid [6646]
process[kinect_base_link1-4]: started with pid [6649]
process[kinect_base_link2-5]: started with pid [6656]
process[kinect_base_link3-6]: started with pid [6659]
[ INFO] [1307492242.533491680]: [/openni_node1] No devices connected.... waiting for devices to be connected
[ INFO] [1307492243.539974658]: [/openni_node1] No devices connected.... waiting for devices to be connected
[ INFO] [1307492244.546529572]: [/openni_node1] No devices connected.... waiting for devices to be connected

I guess this is a conflict between openni_kinect driver and PrimeSensor Module. Can someone help me fix this?
Output of lsusb:
vincent@vincent-desktop:~$ lsusb
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 004 Device 002: ID 093a:2510 Pixart Imaging, Inc. Hama Optical Mouse
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 002: ID 04f2:0841 Chicony Electronics Co., Ltd 
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 002 Device 011: ID 045e:02ae Microsoft Corp. 
Bus 002 Device 010: ID 045e:02ad Microsoft Corp. 
Bus 002 Device 009: ID 045e:02b0 Microsoft Corp. 
Bus 002 Device 008: ID 0409:005a NEC Corp. HighSpeed Hub
Bus 002 Device 003: ID 058f:6362 Alcor Micro Corp. Hi-Speed 21-in-1 Flash Card Reader/Writer (Internal/External)
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

Originally posted by vincent on ROS Answers with karma: 311 on 2011-06-07
Post score: 0

A:

You should probably track down, what the module did system-wide and undo that to see what is the problem. Following the link, there is a README that describes what was installed.
If there is a Kernel module included, you should probably remove that first for testing rmmod <module>, you can find the name by looking at lsmod.
Otherwise I have seen there are udev rules included, maybe they change the device somehow. If you remove them temporarily you can see if that fixes it. It should be possible to make compatible rules.

Originally posted by dornhege with karma: 31395 on 2011-06-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by dornhege on 2011-06-08:
The openni driver will try to connect to the first enumerated device. You can change that to something specific in the launch file. lsusb already shows you bus + device 2@11 for entering there.
Comment by vincent on 2011-06-08:
No, the default user group was changed after I got the problem on kinect
Comment by dornhege on 2011-06-08:
Did that maybe also remove permissions for kinect?
Comment by vincent on 2011-06-08:
the rosmake error was due to a change in the default user group, solved by undoing the change
Comment by vincent on 2011-06-08:
Thank you, I tried removing related udev rules, didn't work. Then I removed all the files installed by PrimeSensor Module. Still didn't work. Now I got another problem. Running rosmake on any stack gives error, like: OSError: (1, 'Operation not permitted', '.../.ros/rosmake/rosmak'. any clue?

