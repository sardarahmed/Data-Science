Q:

why the contact sensor's time data repeat?

Hi,
I use a model plugin to measure the contact force and torque data,I find the time of result repeat to appear, not continue?
such as: in the first step, there are 75 groups data, the time from 0 sec 893000000 nsec to 0 sec  991000000 nsec, then, the 2nd group data's time from  sec 893000000 nsec to 0 sec  989000000 nsec, like this, the other group data's time are not over 1 sec.I had used class ContactPlugin : public SensorPlugin to measure force data before, the time will continue from 0 second same with the simulation time.but in the new plugin, it appear some question, and my code is same with the previous one.
the present code:
for (unsigned int i = 0; i < contacts.contact_size(); ++i)
 //for (unsigned int i = 0; i < 2; ++i)
  {
    math::Vector3 fTotal;
    math::Vector3 tTotal;
    for (unsigned int j = 0; j < contacts.contact(i).position_size(); ++j)
    {
      std::cout << j << "  Position:"
                << contacts.contact(i).position(j).x() << " "
                << contacts.contact(i).position(j).y() << " "
                << contacts.contact(i).position(j).z() << "\n";
      fTotal += math::Vector3(
                            contacts.contact(i).wrench(j).body_1_force().x(),
                            contacts.contact(i).wrench(j).body_1_force().y(),
                            contacts.contact(i).wrench(j).body_1_force().z());
      tTotal += math::Vector3(
                            contacts.contact(i).wrench(j).body_1_torque().x(),
                            contacts.contact(i).wrench(j).body_1_torque().y(),
                            contacts.contact(i).wrench(j).body_1_torque().z());
     }
    double e = 0.99;
    this->llink3_Force = this->llink3_Force * e + fTotal * (1.0 - e);
    this->llink3_Torque = this->llink3_Torque * e + tTotal * (1.0 - e);
    std::cout << " force:"
                       << llink3_Force.x<< " "
                       << llink3_Force.y<< " "
                       << llink3_Force.z<< "\n";
    std::cout << " torque:"
                           << llink3_Torque.x<< " "
                           << llink3_Torque.y<< " "
                           << llink3_Torque.z<< "\n";
    std::cout << " time:"
                          << contacts.contact(i).time().sec()<< " " 
                            <<contacts.contact(i).time().nsec() << "\n";

      }
    }

and I have some doubt about the data, contacts.contact_size() mean the my 75 groups data appear by time? and the contacts.contact(i).position_size() mean the data appear on different points at same time, so we need add to total? and why use the filter to deal with the data?
and the result data as follow:
1 0 893000000 0.0109663 -0.791412 -0.00165563 -0.0366801 -0.000493521 0.00133756  0
2 0 894000000 0.0108009 -1.42664 -0.00182591 -0.0659666 -0.000487837 0.00553323  1
3 0 896000000 0.0107928 -2.62509 -0.00316602 -0.119727 -0.000497939 0.00192567  2
4 0 898000000 0.00970284 -4.42211 -0.00313644 -0.202304 -0.000447923 0.0111408  3
5 0 899000000 0.0103159 -5.02395 -0.00379704 -0.229934 -0.000479064 0.0208921  4
6 0 900000000 0.0112077 -5.93773 -0.00314213 -0.271913 -0.000515583 0.0249442  5
7 0 901000000 0.0152044 -6.52051 -0.00305047 -0.298895 -0.00069924 0.0340604  6
8 0 902000000 0.0341503 -7.04148 -0.00146708 -0.322952 -0.001561 0.04069  7
9 0 904000000 0.0344036 -8.34504 -0.00396462 -0.382565 -0.00159579 0.0507071  8
10 0 906000000 0.0332201 -9.75006 -0.00566672 -0.447299 -0.00156165 0.0639809  9
11 0 908000000 0.0465141 -11.1582 -0.00643337 -0.510355 -0.00216282 0.0700995  10
12 0 909000000 0.0465168 -11.8857 -0.00632329 -0.54403 -0.00216257 0.0702505  11
13 0 911000000 0.0466223 -12.9884 -0.0023091 -0.594378 -0.00212853 0.0887632  12
14 0 912000000 0.046328 -13.6845 -0.00519224 -0.626684 -0.00213635 0.0814887  13
15 0 913000000 0.0457015 -14.5768 -0.00433532 -0.667721 -0.00210191 0.0830668  14
16 0 915000000 0.0459193 -15.6345 -0.00523034 -0.716034 -0.00212013 0.0827492  15
17 0 917000000 0.0461264 -16.837 -0.00663536 -0.770787 -0.0021422 0.0992905  16
18 0 918000000 0.0460704 -17.4157 -0.00760988 -0.79767 -0.0021464 0.103897  17
19 0 919000000 0.0656351 -18.2209 -0.00585845 -0.834927 -0.0030356 0.11572  18
20 0 920000000 0.0846886 -18.6706 -0.0051782 -0.855797 -0.00391108 0.109766  19
21 0 922000000 0.0840968 -19.5494 -0.00648197 -0.89562 -0.00389005 0.106873  20
22 0 923000000 0.0826139 -20.5375 -0.00463472 -0.94127 -0.00380453 0.115118  21
23 0 924000000 0.0819895 -20.7337 -0.00558561 -0.950493 -0.00378973 0.121685  22
24 0 926000000 0.0813258 -22.0269 -0.00639169 -1.00972 -0.00376736 0.142856  23
25 0 927000000 0.0804998 -22.463 -0.00726215 -1.02993 -0.00373219 0.134297  24
26 0 929000000 0.0957307 -23.7403 -0.00834947 -1.08775 -0.00442752 0.152139  25
27 0 930000000 0.136165 -24.29 -0.0100404 -1.11305 -0.00625644 0.157299  26
28 0 931000000 0.136582 -24.8656 -0.00985578 -1.13971 -0.00627645 0.163193  27
29 0 932000000 0.135285 -25.3228 -0.00967874 -1.16096 -0.00621653 0.173514  28
30 0 933000000 0.137828 -25.7879 -0.00953143 -1.18253 -0.0060897 0.173231  29
31 0 934000000 0.13691 -26.2361 -0.00956323 -1.20337 -0.00596015 0.177681  30
32 0 935000000 0.135551 -26.6805 -0.00967777 -1.22406 -0.00590302 0.180783  31
33 0 936000000 0.134221 -27.1333 -0.0097645 -1.24513 -0.00584696 0.185742  32
34 0 937000000 0.136066 -27.581 -0.00989185 -1.26595 -0.00586706 0.185193  33
35 0 938000000 0.134696 -27.9471 -0.00812905 -1.28292 -0.00580213 0.189592  34
36 0 940000000 0.133071 -28.8714 -0.0101342 -1.32424 -0.00574901 0.191895  35
37 0 942000000 0.132263 -29.9492 -0.0104585 -1.37299 -0.00572034 0.201843  36
38 0 944000000 0.136948 -31.3692 -0.0113117 -1.43429 -0.00593189 0.208231  37
39 0 945000000 0.13732 -31.9261 -0.0113916 -1.46023 -0.00595272 0.212872  38
40 0 946000000 0.13607 -32.3654 -0.0112441 -1.48067 -0.00589882 0.218512  39
41 0 947000000 0.146231 -32.7619 -0.011124 -1.49919 -0.00637221 0.222031  40
42 0 948000000 0.158955 -33.1487 -0.0111412 -1.51726 -0.00696467 0.223561  41
43 0 949000000 0.157377 -33.5452 -0.0110583 -1.53576 -0.00689599 0.227044  42
44 0 950000000 0.155914 -33.7838 -0.0119569 -1.54703 -0.0068424 0.230781  43
45 0 951000000 0.156793 -34.4697 -0.0103213 -1.57881 -0.00688555 0.241772  44
46 0 952000000 0.15527 -34.742 -0.00969086 -1.59156 -0.00681436 0.248741  45
47 0 953000000 0.153652 -35.0559 -0.00967243 -1.60628 -0.00674521 0.25739  46
48 0 955000000 0.152143 -35.7893 -0.0116561 -1.64024 -0.00667499 0.255536  47
49 0 956000000 0.150525 -36.6036 -0.010414 -1.67803 -0.00659455 0.25584  48
50 0 958000000 0.16741 -37.4041 -0.0124455 -1.71445 -0.00734778 0.253229  49
51 0 960000000 0.165938 -38.2842 -0.0100481 -1.75392 -0.00726515 0.260124  50
52 0 961000000 0.164431 -38.9675 -0.0126959 -1.78594 -0.00721923 0.259789  51
53 0 963000000 0.163093 -39.9841 -0.0142829 -1.83291 -0.00717521 0.259646  52
54 0 965000000 0.161791 -41.0116 -0.0166386 -1.8798 -0.00714645 0.26095  53
55 0 966000000 0.16034 -41.4553 -0.0158135 -1.90048 -0.00707379 0.269312  54
56 0 967000000 0.158843 -41.7796 -0.0153521 -1.91564 -0.00700716 0.26953  55
57 0 968000000 0.157292 -42.1101 -0.0148426 -1.93111 -0.0069368 0.271426  56
58 0 969000000 0.155697 -42.3839 -0.0144453 -1.94396 -0.00686045 0.285645  57
59 0 970000000 0.154158 -42.6761 -0.0140268 -1.95766 -0.00678907 0.289989  58
60 0 971000000 0.152823 -42.9503 -0.0137415 -1.97054 -0.0067276 0.301395  59
61 0 972000000 0.160189 -43.0686 -0.0148055 -1.97625 -0.00706248 0.306499  60
62 0 973000000 0.157859 -43.6328 -0.0138556 -2.00251 -0.00695231 0.306338  61
63 0 974000000 0.156168 -43.8161 -0.0137399 -2.01116 -0.00687758 0.296539  62
64 0 975000000 0.154692 -44.021 -0.0152426 -2.0209 -0.00682131 0.294464  63
65 0 976000000 0.153153 -44.3262 -0.0156074 -2.03522 -0.00675813 0.295016  64
66 0 977000000 0.160317 -44.5878 -0.0158176 -2.04754 -0.00709724 0.290357  65
67 0 978000000 0.158828 -44.8692 -0.0159763 -2.06076 -0.00703454 0.296113  66
68 0 980000000 0.157361 -45.7706 -0.0173765 -2.10228 -0.00698021 0.306924  67
69 0 981000000 0.155867 -45.9891 -0.0183754 -2.1126 -0.00692893 0.314808  68
70 0 983000000 0.168119 -46.8653 -0.017826 -2.15131 -0.00748867 0.323441  69
71 0 984000000 0.166305 -47.3827 -0.0189311 -2.1753 -0.00741694 0.328152  70
72 0 985000000 0.164591 -47.5738 -0.0172681 -2.18419 -0.00732944 0.331021  71
73 0 986000000 0.163035 -47.9517 -0.0181964 -2.20192 -0.00726177 0.328699  72
74 0 987000000 0.161481 -48.0682 -0.0192267 -2.20756 -0.00720433 0.327256  73
75 0 989000000 0.161085 -48.7816 -0.0206035 -2.23867 -0.00720023 0.330065  74
76 0 991000000 0.15927 -50.0879 -0.0217092 -2.29752 -0.00713172 0.345549  75
77 0 893000000 0.168644 -50.3784 -0.0231477 -2.31122 -0.00755392 0.343431  0
78 0 894000000 0.166901 -50.5178 -0.0231031 -2.31776 -0.00747764 0.344206  1
79 0 896000000 0.165332 -51.2253 -0.0242304 -2.34901 -0.00741784 0.337212  2
80 0 898000000 0.162697 -52.5363 -0.0239902 -2.40929 -0.00729862 0.343074  3
81 0 899000000 0.16178 -52.657 -0.0244423 -2.41485 -0.00726126 0.349506  4
82 0 900000000 0.161157 -53.0945 -0.0235809 -2.43498 -0.00722996 0.350272  5
83 0 901000000 0.163654 -53.2057 -0.0232849 -2.44033 -0.00734647 0.356135  6
84 0 902000000 0.181116 -53.2598 -0.0214991 -2.44297 -0.00814175 0.359544  7
85 0 904000000 0.179899 -54.1012 -0.0237963 -2.48139 -0.00811074 0.366372  8
86 0 906000000 0.177261 -55.0486 -0.0253001 -2.52513 -0.00801145 0.37649  9
87 0 908000000 0.189115 -56.0038 -0.0258705 -2.56741 -0.00854812 0.379483  10
88 0 909000000 0.187691 -56.2829 -0.025566 -2.58052 -0.00848402 0.37654  11
89 0 911000000 0.186385 -56.9416 -0.0213594 -2.6105 -0.00838676 0.39199  12
90 0 912000000 0.184693 -57.1982 -0.024052 -2.62264 -0.008332 0.381683  13
91 0 913000000 0.182683 -57.6553 -0.0230065 -2.64372 -0.00823561 0.380259  14
92 0 915000000 0.181531 -58.2822 -0.0237148 -2.67227 -0.00819248 0.37697  15
93 0 917000000 0.180382 -59.0582 -0.024935 -2.70746 -0.00815383 0.390569  16
94 0 918000000 0.178983 -59.2148 -0.0257265 -2.71498 -0.00809792 0.392263  17
95 0 919000000 0.197219 -59.602 -0.0237939 -2.73306 -0.00892761 0.401202  18
96 0 920000000 0.214957 -59.6379 -0.0229343 -2.73495 -0.00974416 0.392393  19
97 0 922000000 0.213062 -60.107 -0.0240605 -2.75598 -0.0096648 0.386674  20
98 0 923000000 0.21029 -60.6895 -0.0220375 -2.78303 -0.00952153 0.392121  21
99 0 924000000 0.208388 -60.4842 -0.0228143 -2.77384 -0.00944957 0.395918  22
100 0 926000000 0.206461 -61.3798 -0.0234481 -2.81483 -0.0093706 0.414346  23
101 0 927000000 0.204383 -61.4224 -0.024148 -2.81699 -0.00927939 0.403073  24
102 0 929000000 0.218375 -62.3101 -0.0250665 -2.85694 -0.00991925 0.418227  25
103 0 930000000 0.257584 -62.4741 -0.0265903 -2.86455 -0.0116933 0.420726  26
104 0 931000000 0.256786 -62.6679 -0.0262401 -2.87369 -0.0116589 0.423985  27
105 0 932000000 0.254287 -62.747 -0.0258993 -2.8776 -0.0115452 0.431699  28
106 0 933000000 0.25564 -62.8379 -0.0255897 -2.88201 -0.011365 0.428834  29
107 0 934000000 0.253544 -62.9156 -0.025461 -2.88585 -0.0111827 0.430728  30
108 0 935000000 0.251019 -62.9932 -0.0254165 -2.88971 -0.0110734 0.431299  31
109 0 936000000 0.248534 -63.0829 -0.0253459 -2.89413 -0.0109656 0.433753  32
110 0 937000000 0.249235 -63.1711 -0.0253174 -2.89845 -0.0109345 0.430725  33
111 0 938000000 0.246734 -63.1813 -0.0234003 -2.89911 -0.0108189 0.432667  34
112 0 940000000 0.243988 -63.7532 -0.0252528 -2.92426 -0.0107156 0.43254  35
113 0 942000000 0.242072 -64.4822 -0.0254258 -2.95701 -0.0106373 0.440082  36
114 0 944000000 0.245658 -65.5569 -0.0261294 -3.00247 -0.0107997 0.444088  37
115 0 945000000 0.244943 -65.772 -0.0260611 -3.01273 -0.0107718 0.44637  38
116 0 946000000 0.242617 -65.8728 -0.0257669 -3.01765 -0.0106697 0.449675  39
117 0 947000000 0.251712 -65.9342 -0.0255016 -3.02079 -0.0110954 0.450882  40
118 0 948000000 0.263382 -65.9893 -0.025375 -3.02365 -0.0116406 0.450123  41
119 0 949000000 0.26076 -66.0574 -0.0251498 -3.02708 -0.0115252 0.451341  42
120 0 950000000 0.258263 -65.9708 -0.0259075 -3.02344 -0.0114253 0.452835  43
121 0 951000000 0.258118 -66.3349 -0.0241324 -3.04046 -0.0114226 0.461606  44
122 0 952000000 0.255582 -66.2886 -0.0233638 -3.03859 -0.0113061 0.466376  45
123 0 953000000 0.252961 -66.2869 -0.0232087 -3.03884 -0.011192 0.472849  46
124 0 955000000 0.250458 -66.7081 -0.025057 -3.05848 -0.0110773 0.468841  47
125 0 956000000 0.247857 -67.2132 -0.0236809 -3.08209 -0.0109529 0.467011  48
126 0 958000000 0.263769 -67.7075 -0.0255797 -3.10446 -0.0116625 0.462289  49
127 0 960000000 0.261334 -68.2846 -0.0230509 -3.13003 -0.0115367 0.467093  50
128 0 961000000 0.258872 -68.6679 -0.0255687 -3.14829 -0.0114481 0.464689  51
129 0 963000000 0.25659 -69.3875 -0.027027 -3.18164 -0.0113618 0.462496  52
130 0 965000000 0.254354 -70.121 -0.0292553 -3.21504 -0.0112912 0.461772  53
131 0 966000000 0.251977 -70.2736 -0.028304 -3.22237 -0.0111771 0.468126  54
132 0 967000000 0.249564 -70.3097 -0.0277177 -3.22431 -0.0110694 0.466355  55
133 0 968000000 0.247105 -70.3549 -0.0270845 -3.22669 -0.0109584 0.466283  56
134 0 969000000 0.244612 -70.3463 -0.0265648 -3.22659 -0.0108418 0.478554  57
135 0 970000000 0.242184 -70.3588 -0.0260251 -3.22746 -0.0107307 0.480968  58
136 0 971000000 0.239968 -70.3562 -0.0256198 -3.22764 -0.0106298 0.490465  59
137 0 972000000 0.246463 -70.2004 -0.026565 -3.22079 -0.0109256 0.493677  60
138 0 973000000 0.24327 -70.4933 -0.0254976 -3.23459 -0.0107768 0.491645  61
139 0 974000000 0.240726 -70.408 -0.0252654 -3.23092 -0.0106638 0.479993  62
140 0 975000000 0.238404 -70.3471 -0.0266529 -3.22846 -0.0105697 0.476083  63
141 0 976000000 0.236027 -70.3889 -0.0269036 -3.23072 -0.0104691 0.47482  64
142 0 977000000 0.242363 -70.39 -0.0270008 -3.23108 -0.0107711 0.468362  65
143 0 978000000 0.240053 -70.4133 -0.0270477 -3.23247 -0.0106716 0.472338  66
144 0 980000000 0.237774 -71.0592 -0.0283372 -3.26226 -0.0105809 0.481387  67
145 0 981000000 0.235476 -71.0249 -0.0292264 -3.26099 -0.0104936 0.487527  68
146 0 983000000 0.246932 -71.6507 -0.0285685 -3.28821 -0.0110177 0.494433  69
147 0 984000000 0.24433 -71.9203 -0.0295662 -3.30083 -0.0109107 0.497433  70
148 0 985000000 0.241835 -71.866 -0.0277968 -3.29847 -0.0107883 0.498609  71
149 0 986000000 0.239507 -72.0009 -0.0286199 -3.30505 -0.010686 0.494611  72
150 0 987000000 0.237188 -71.8769 -0.0295459 -3.29966 -0.0105943 0.49151  73
151 0 989000000 0.236035 -72.3523 -0.0308195 -3.31986 -0.0105563 0.492676  74
152 0 991000000 0.233471 -73.4229 -0.0318231 -3.36789 -0.0104543 0.506534  75

The first column is the ordinal number.The second column is the second,The third column is the NS
The fourth to the ninth column is the force and moment data,The last one is the ordinal number of the data in each group.

Originally posted by lugd1229 on Gazebo Answers with karma: 75 on 2013-04-01
Post score: 0

A:

We don't explicitly clear out all the contacts in the message in order to improve performance. The current time stamp is attached to the message. You can use this time stamp to find the contacts are current.

Originally posted by nkoenig with karma: 7676 on 2013-04-10
This answer was ACCEPTED on the original site
Post score: 0

