Q:

ROS Answers SE migration: PHP+ROSTOPIC

Hello,
I have a question to all of you.
For example, I have simple publisher and subscriber. The topic name "/test". I want click button on my PHP website and in the case when I will do this the data on a topic will change.
If I want to publish some data from command line, such as:
rostopic pub -1 /test std_msgs/Int32 10000

It works.
The problem is:
Can I make the next situation on my PHP file
<?php
exec("rostopic pub -1 /test std_msgs/Int32 10000")
?>

Please help me.

Originally posted by Tvlad on ROS Answers with karma: 35 on 2016-09-13
Post score: 1

A:

This should be possible. Make sure your web server (or PHP interpreter) has the proper environment setup when it tries to invoke rostopic (ie: equivalent of source setup.bash).
Alternative (and I think preferred): use rosbridge_suite and use the JSON interface from your PHP script.

Originally posted by gvdhoorn with karma: 86574 on 2016-09-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Tvlad on 2016-09-14:
Thank you for your answer.
Are you mean the next way:
exec("source /home/pi/catkin_ws/devel/setup.bash && rostopic pub -1 /test std_msgs/Int32 10000")

or
exec("source /opt/ros/kinetic/setup.bash && /opt/ros/kinetic/bin/rostopic pub -1 /test std_msgs/Int32 10000")

Comment by gvdhoorn on 2016-09-14:
That depends: if all you want is rostopic and std_msgs, then you only need to source the base distribution. If you need custom messages and / or a custom node, then I think you'd need to source your workspace.
Comment by Tvlad on 2016-09-14:
I need a custom node with std_msgs. I tried both of the ways but still does not work. What can be the problem?
Comment by gvdhoorn on 2016-09-14:
I don't know. What does exec(..) return? Any error status/message? What "doesn't work" exactly?

