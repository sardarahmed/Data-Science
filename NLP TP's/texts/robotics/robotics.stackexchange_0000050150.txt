Q:

How to extract and use laser data from /scan topic in ROS using C++?

Hi,
How do I subscribe to the /scan topic so that I can store laser scan data in a data structure? We are trying to get the data to use for control loops.

Originally posted by hesh8 on ROS Answers with karma: 61 on 2013-04-08
Post score: 5

A:

Here is an example:
ros::NodeHandle nh;
ros::Subscriber scanSub;

scanSub=nh.subscribe<sensor_msgs::LaserScan>("/scan",10,&AutoExp::processLaserScan,this);

You can implement the callback function however you like
void AutoExp::processLaserScan(const sensor_msgs::LaserScan::ConstPtr& scan){
     //scan->ranges[] are laser readings
     ...
}

Whenever a new laser reading is published to the "/scan" topic, your callback function is called, assuming that nothing goes wrong.
You can always use commands like
rostopic info /scan
rosmsg show sensor_msgs/LaserScan

to have a detailed information about the topic and the message type.
If you read the documentation of the message type, it helps a lot. Here is the link  to sensor_msgs/LaserScan Message

Originally posted by yigit with karma: 796 on 2013-04-08
This answer was ACCEPTED on the original site
Post score: 9

Original comments
Comment by umut on 2019-02-16:
Sorry but I'm struggling with same problem and when I try to compile i recive error: ‘AutoExp’ has not been declared.
So which library should i include or which line(s) should i write to declare "AutoExp" ?
Heartfelt thanks.

