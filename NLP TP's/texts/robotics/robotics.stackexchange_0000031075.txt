Q:

OpenCV camshift.py sample broken after Diamondback upgrade

Hello OpenCV + ROS users,
I will submit a ticket for this but I'm wondering if anyone has a quick fix in the meantime.  I was using the camshift.py OpenCV Python sample successfully under Cturtle.  Now, using Diamondback (Debian packages), I get the following error after selecting a rectangle to track:
Traceback (most recent call last):
  File "camshift.py", line 115, in <module>
    demo.run()
  File "camshift.py", line 79, in run
    (iters, (area, value, rect), track_box) = cv.CamShift(backproject, self.track_window, crit)
TypeError: <unknown> is not a numpy array

Does anyone know how I can modify this line to make it work?  I am using the latest camshift.py from SVN since the samples don't seem to be included in the ROS vision_opencv stack.
Thanks!
patrick

Originally posted by Pi Robot on ROS Answers with karma: 4046 on 2011-04-14
Post score: 0

A:

See http://answers.ros.org/question/255/are-opencv-samples-in-diamondback-debs for how to get the samples in the OpenCV package. Can you try that and see if the problem persists? There might be some sort of API mismatch between camshift.py in trunk vs. OpenCV included in Diamondback if the samples included in vision_opencv work for you.

Originally posted by Eric Perko with karma: 8406 on 2011-04-14
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Pi Robot on 2011-06-26:
This problem seems to have been fixed in OpenCV 2.3 RC which I just now compiled and tried.
Comment by Pi Robot on 2011-04-15:
I've submitted a ticket for this issue at https://code.ros.org/trac/ros-pkg/ticket/4919.  Note that the C++ version of the demo works fine but when comparing the two, I couldn't figure out why the Python version fails.  I think it might have something to do with using an Image type instead of Mat for the backproject image/matrix...
Comment by Pi Robot on 2011-04-14:
Hi Eric--thanks for the link.  Alas, I get exactly the same error from camshift.py even after downloading and building from source...

