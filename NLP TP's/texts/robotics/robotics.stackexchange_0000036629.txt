Q:

How to rosbag play images when using theora?

Hi everyone!
We are having issues when trying to replay videos from a bag file when using theora. I created a bag file with theora messages, but when I do rosbag play and use the image_view with proper image_transport set to theora, I cannot see any images. When using compressed instead of theora in the same way it works fine. Please, is there some trick how to play  bag files with theora images and view them using image_view? Thanks!

Originally posted by Michal Reinstein on ROS Answers with karma: 1 on 2011-12-20
Post score: 3

A:

Hi,
I had exactly the same problem. It seems that when playing the theora compressed data from rosbag, the image_view is not able to connect quickly enough to the advertised topic in order to receive the three critical header frames (0,1,2). These header frames are required to initialize the theora video stream reception.
So at first, start the image view:
rosrun image_view image_view image:= theora
Then start rosbag with the additional parameter -d SEC that will force the rosbag to sleep SEC seconds after every advertise call (to allow subscribers to connect):
rosbag play  -d 1
You could try to play around with different values. For me, a delay of 1 sec did the trick.
Br,
Paul

Originally posted by Paul78 with karma: 16 on 2012-02-21
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by Dan Lazewatsky on 2012-02-21:
You should consider adding this to the theora_image_transport wiki page

