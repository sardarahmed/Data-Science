Q:

pausing inside .launch file?

Is there any way to add a sleep (delay or pause) to a .launch file between statements?
In my current code I need to kill several default PR2 controllers, change some rosparams, then reload these same controllers. However, this all happens so fast in my launch file that it seems to cause problems.

Originally posted by JoeRomano on ROS Answers with karma: 126 on 2011-07-15
Post score: 6

A:

Thanks for the help guys.
I've noticed that execution does happen serially, but I still don't think these solutions will solve the problem I am seeing. Allow me to add some additional detail:
Step 1: A user logs on to the system (in this case the pr2) and launches the basic robot communication nodes (in this case the l/r_arm_controller nodes). I definitely don't want to modify these scripts.
Step 2: A user decides to run my code by launching my launch file. I need to change some of the settings for the l/r_arm_controller_nodes, and the only way I've found to do this is to use pr2_controller_manager to kill the node, reload the param_server params with new values, and then use pr2_controller_manager respawn these nodes. I am pretty sure the l/r_arm_controller only reads the param_server when it is launched, so I need to actually kill it, change params, and respawn in this fashion.
The problem:
Adding the commands to kill and spawn the controller in the same launch file does not result in the controller getting spawned properly. It looks like kill/spawn are executed in sequence so quickly that the pr2_controller_manager somehow doesn't deal with it properly. If I could add in a pause between kill and spawn in my launch file I believe this wouldn't be an issue.

Originally posted by JoeRomano with karma: 126 on 2011-07-17
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by JoeRomano on 2011-07-17:
Right, that is the current approach I am using. I was just wondering, as indicated by the title of the post, if there was a way to pause inside of a launch script. But, seeing as how you really can't guarantee things are executed serially, that is probably a moot point.
Comment by Lorenz on 2011-07-17:
You cannot be sure that nodes are really launched serially. See the roslaunch XML documentation. However, if you really want to start nodes serially, in particular if it is something like killing/spawning controllers, why don't you put them into a shell script and execute the script from roslaunch?

