Q:

Rviz crash when adding topic

I'm using a plugin for visualization of topic type vision_msgs/Detection3DArray. I add a point cloud and there is not problem, but when I add this topic Rviz crashes with this error message:
original visual, set by message: position Vector3(0, 0, 0) with orientation Quaternion(0, 0, 0, 0)
rviz: /build/ogre-1.9-kiU5_5/ogre-1.9-1.9.0+dfsg1/OgreMain/include/OgreAxisAlignedBox.h:251: void Ogre::AxisAlignedBox::setExtents(const Ogre::Vector3&, const Ogre::Vector3&): La declaraci√≥n `(min.x <= max.x && min.y <= max.y && min.z <= max.z) && "The minimum corner of the box must be less than or equal to maximum corner"' no se cumple.
Abortado (`core' generado)

I get this plugin for visualization of this type of topics: https://github.com/Kukanani/vision_msgs_visualization
There are some failures like this in internet but no one is useful for me.

A:

You need to set orientation.w = 1 for every quaternion in the message if you don't have another orientation you want them to have. It's unfortunate that (0, 0, 0, 1) isn't the default value, or that rviz couldn't automatically force quaternions to be valid (and issue an error or warning) instead bringing down the whole application.
In to_ros_boxes_3d() in https://github.com/opendr-eu/opendr/blob/master/projects/opendr_ws/src/opendr_bridge/src/opendr_bridge/bridge.py#L769-L782 it sets the orientation of box.bbox but doesn't set it for box.results[0]- try adding box.results[0].pose.pose.orientation.w = 1.0 (and if there were more than one ObjectHypothesisWithPose be sure any others have orientation.w = 1.0 (unless you know the orientation ought to be something else).

