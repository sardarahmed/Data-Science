Q:

catkin_make failing with custom source directory

Hey guys,
I started having problems with catkin_make while using a custom location for the src directory after I updated a few ros packages. I currently have the following file structure (still in the process of migrating to catkin):

main_ws/

rosbuild_package_1/
rosbuild_package_2/
...
catkin_ws

catkin_package_1/
catkin_package_2/
...

Each directory under main_ws is a different repository. If I checkout everything, go to the catkin_ws directory and run catkin_make --source ., it detects everything fine and generates the following:

main_ws/

...
catkin_ws/

build/
devel/
CMakeLists.txt
catkin_package_1/
catkin_package_2/
...

After running catkin the first time, every time I try to run catkin_make --source . (with or without specifying source location), I get the following message:

The specified base path "/opt/main_ws/catkin_ws/" contains a CMakeLists.txt but "catkin_make" must be invoked in the root of workspace.

It seems like something changed in the way catkin_make works, and now every time I need to compile the catkin packages I have to remove the CMakeLists.txt file generated previously. This happens in 4 different machines that have the latest catkin packages, but not in another machine that has been last updated in the end of January.
Any clues about what could be causing this problem?
Felipe

Originally posted by Felipe Bacim on ROS Answers with karma: 61 on 2013-02-12
Post score: 3

A:

Probably a bug. I think catkin_make uses a flawed heuristics relying on the default folder layout to decide whether the user managed to invoke catkin_make in the correct folder. This may change anyway as soon as catkin_make is changed to work from anywhere under the catkin root workspace folder, but I still created a bug report.
https://github.com/ros/catkin/issues/361

Originally posted by KruseT with karma: 7848 on 2013-02-13
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Dirk Thomas on 2013-02-15:
Fixed in the next release of catkin.

