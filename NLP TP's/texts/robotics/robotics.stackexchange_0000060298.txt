Q:

How to update diagnostics on Groovy built from source (into Odroid)?

I am trying to add the diagnostics package (from the git repo) that contains the python API. I have successfully added it to ROS fuerte but I cannot get it to work on the odroid that runs groovy built from source.
I added the diagnostics groovy-devel branch to my packages folder. I tried to catkin_make the whole workspace with the new package added, but since I have some fuerte packages (or maybe packages that were built from source), I get an error from catkin_make.
Is there a way to just compile or build one package in Groovy?
What do ROS+odroid users do for diagnostics?
EDIT 1
I tried to run sudo apt-get install ros-groovy-diagnostics to get the released version of diagnsotics, which has the python API but I got the following error:
Reading package lists... Done
Building dependency tree       
Reading state information... Done
You might want to run 'apt-get -f install' to correct these:
The following packages have unmet dependencies:
libfontconfig1 : Depends: fontconfig-config (= 2.9.0-7.1) but 2.8.0-3ubuntu9.1 is to be installed
libfontconfig1-dev : Depends: libfontconfig1 (= 2.8.0-3ubuntu9.1) but 2.9.0-7.1 is to be installed
ros-groovy-diagnostics : Depends: ros-groovy-self-test but it is not going to be installed
                          Depends: ros-groovy-diagnostic-updater but it is not going to be installed
                          Depends: ros-groovy-diagnostic-common-diagnostics but it is not going to be installed
                          Depends: ros-groovy-diagnostic-analysis but it is not going to be installed
                          Depends: ros-groovy-diagnostic-aggregator but it is not going to be installed
E: Unmet dependencies. Try 'apt-get -f install' with no packages (or specify a solution).

I then ran apt-get -f install and got :
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Correcting dependencies... failed.
The following packages have unmet dependencies:
 libfontconfig1 : Depends: fontconfig-config (= 2.9.0-7.1) but 2.8.0-3ubuntu9.1 is installed
 libfontconfig1-dev : Depends: libfontconfig1 (= 2.8.0-3ubuntu9.1) but 2.9.0-7.1 is installed
E: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages.
E: Unable to correct dependencies

Is there a way for me to add the diagnostics package that I download from the git repo to my groovy without dealing with these other issues?
EDIT 2
Before cloning the new diagnostics package I ran catkin_make_isolated and was succesful in making the current packages over again.
I then cloned the repo to my src file in my workspace (There was an old version of diagnostics packages there so I made a backup of them and deleted them before cloning the new package).
After this operation though I got the following error when I ran catkin_make_isolated:
==> Processing catkin package: 'diagnostics'
==> Building with env: '/media/home/ros/devel_isolated/cpp_common/env.sh'
==> cmake /media/home/ros/src/diagnostics/diagnostics -DCATKIN_DEVEL_PREFIX=/media/home/ros/devel_isolated/diagnostics -DCMAKE_INSTALL_PREFIX=/media/home/ros/install_isolated in '/media/home/ros/build_isolated/diagnostics'
CMake Error: The source "/media/home/ros/src/diagnostics/diagnostics/CMakeLists.txt" does not match the source "/media/home/ros/build_isolated/diagnostics/CMakeLists.txt" used to generate cache.  Re-run cmake with a different source directory.
<== Failed to process package 'diagnostics':
  Command '/media/home/ros/devel_isolated/cpp_common/env.sh cmake /media/home/ros/src/diagnostics/diagnostics -DCATKIN_DEVEL_PREFIX=/media/home/ros/devel_isolated/diagnostics -DCMAKE_INSTALL_PREFIX=/media/home/ros/install_isolated' returned non-zero exit status 1

Reproduce this error by running:
==> cd /media/home/ros/build_isolated/diagnostics && /media/home/ros/devel_isolated/cpp_common/env.sh cmake /media/home/ros/src/diagnostics/diagnostics -DCATKIN_DEVEL_PREFIX=/media/home/ros/devel_isolated/diagnostics -DCMAKE_INSTALL_PREFIX=/media/home/ros/install_isolated

Command failed, exiting.

I thought adding a package from source to the src folder would do the trick at first but now I realize that I need to delete the old built packages from build_isolated?
EDIT 3
Fixed that issue by deleting the old build version of diagnostics form build_isolated.
Now I ran catkin_make_isolated --install
Everything ran fine. When I run roscd diagnostic_updated it takes me to the directory under ros/install_isolated which has a cmake folder and a package.xml file in it.
I still cannot import the diagnostic_updater package in python though.
Here is the error that it gives me:
Traceback (most recent call last):
  File "example.py", line 44, in <module>
    import diagnostic_updater
ImportError: No module named diagnostic_updater

Maybe ros is pointing to the wrong place? Shouldn't it point to a directory of diagnostic_updater where the python library is in?
I am really confused now.
Thank you for all the answers.

Originally posted by goshawk on ROS Answers with karma: 70 on 2014-06-24
Post score: 0

A:

You can build diagnostics from source by adding it to your catkin workspace.
The source repository is here: https://github.com/ros/diagnostics. Check out the groovy-devel branch and build that.
If you don't know how to make an overlay the catkin tutorials are helpful. Or, ask and we will supply more details.

Originally posted by joq with karma: 25443 on 2014-07-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by goshawk on 2014-07-11:
Please see Edit 3.
Comment by joq on 2014-07-14:
You probably need to source the setup.bash in the install_isolated directory.
Comment by goshawk on 2014-07-14:
I sourced the setup.bash file in install_isolated. When I now do 'roscd diagnostic_updater' it points to the src/diagnostic_updater which I assume is not even built yet.
Another weird thing is that when I do 'roscd' it takes me to tf_conversions under ros/devel_isolated...
Comment by joq on 2014-07-14:
sounds like your workspace environment is mangled
Comment by goshawk on 2014-07-14:
Do you know of any ros answer that describe how to untangle it?
Since this is an ARM based computer, it is really difficult to rebuild ros from source.
Comment by joq on 2014-07-14:
I am sure it is. I don't know how to fix a catkin workspace once its environment has gone bad. I generally delete the devel and build spaces, source the proper workspace dependencies and build it again. I understand that you do not want to do that, but can suggest no viable alternative.
Comment by goshawk on 2014-07-15:
I copied the diagnostic_updater folder that contains the python library to lib/python2.7/dist_packages/ where all other ros-python libraries seem to be and it all worked. Hooray for temporary shortcuts!

