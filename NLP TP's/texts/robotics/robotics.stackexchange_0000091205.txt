Q:

How does ROS selects default dds implementation

I am trying to understand how ROS selects default DDS implementation while creating a service. I could see service constructor is using rosidl_typesupport_cpp namespace by default. How it gets type support handle for fast rtps cpp?

Originally posted by AnandShastry on ROS Answers with karma: 3 on 2019-04-01
Post score: 0

A:

The rmw implementation is selected when the program starts, if there is more than one to choose from, otherwise it is linked directly to the only one available. See: https://github.com/ros2/rmw_implementation/tree/master/rmw_implementation
The type support is selected based on the rmw implementation which is selected. See:

https://github.com/ros2/rosidl/blob/4d9f442853dfaa7a2480489b0c1bb9285da7ba53/rosidl_generator_c/include/rosidl_generator_c/message_type_support_struct.h#L38-L48
https://github.com/ros2/rosidl/blob/4d9f442853dfaa7a2480489b0c1bb9285da7ba53/rosidl_generator_cpp/include/rosidl_typesupport_cpp/message_type_support.hpp#L24-L25

The type support structure is generated for each message and typesupport, e.g. fastrtps:

https://github.com/ros2/rosidl_typesupport_fastrtps/blob/7313c5778dd1d3cfa2997ad6c864d8dab458ce5e/rosidl_typesupport_fastrtps_c/resource/msg__type_support_c.cpp.em#L519-L523
https://github.com/ros2/rosidl_typesupport_fastrtps/blob/7313c5778dd1d3cfa2997ad6c864d8dab458ce5e/rosidl_typesupport_fastrtps_cpp/resource/msg__type_support.cpp.em#L386-L390

Originally posted by William with karma: 17335 on 2019-04-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by AnandShastry on 2019-04-09:
Thank you. I have one more doubt. What and all environment variables needed for this?
Comment by William on 2019-04-10:
https://index.ros.org/doc/ros2/Tutorials/Working-with-multiple-RMW-implementations/

