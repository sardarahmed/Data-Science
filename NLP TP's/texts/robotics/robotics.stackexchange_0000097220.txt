Q:

Autoware source build,compile error

Ubuntu 16.04 ros kinetic
gcc g++ version 6.5.0
Follwing this,I want to install autoware 1.12.0.
But when I entered the following command,  colcon build --cmake-args -DCMAKE_BUILD_TYPE=Releaseerrors occurred.
 Starting >>> ndt_gpu
[27.384s] WARNING:colcon.colcon_cmake.task.cmake.build:Could not run installation step for package 'ndt_gpu' because it has no 'install' target
--- stderr: ndt_gpu
** WARNING ** io features related to pcap will be disabled
** WARNING ** io features related to png will be disabled
** WARNING ** io features related to libusb-1.0 will be disabled
CMake Warning at /home/quanfayan/autoware.ai/install/autoware_build_flags/share/autoware_build_flags/cmake/autoware_build_flags-extras.cmake:36 (message):
  CUDA support is disabled.  Set the AUTOWARE_COMPILE_WITH_CUDA environment
  variable and recompile to enable it
Call Stack (most recent call first):
  CMakeLists.txt:22 (AW_CHECK_CUDA)

ndt_gpu will not be built, CUDA was not found.
---
Finished <<< ndt_gpu [2.44s]
Starting >>> rosinterface
Finished <<< kitti_player [6.32s]        
Starting >>> runtime_manager
--- stderr: pcl_omp_registration         
In file included from /home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h:45:0,
                 from /home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:46:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:181:23: error: expected identifier before string constant
       PCL_DEPRECATED ("[pcl::registration::Registration::setInputCloud] setInputCloud is deprecated. Please use setInputSource instead.")
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:181:23: error: expected ‘,’ or ‘...’ before string constant
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:181:137: error: ISO C++ forbids declaration of ‘PCL_DEPRECATED’ with no type [-fpermissive]
 etInputCloud] setInputCloud is deprecated. Please use setInputSource instead.")
                                                                               ^
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:181:137: error: expected ‘;’ at end of member declaration
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:186:23: error: expected identifier before string constant
       PCL_DEPRECATED ("[pcl::registration::Registration::getInputCloud] getInputCloud is deprecated. Please use getInputSource instead.")
                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:186:23: error: expected ‘,’ or ‘...’ before string constant
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:186:137: error: ISO C++ forbids declaration of ‘PCL_DEPRECATED’ with no type [-fpermissive]
 etInputCloud] getInputCloud is deprecated. Please use getInputSource instead.")
                                                                               ^
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:186:137: error: expected ‘;’ at end of member declaration
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:186:7: error: ‘int pcl_omp::Registration<PointSource, PointTarget, Scalar>::PCL_DEPRECATED(int)’ cannot be overloaded
       PCL_DEPRECATED ("[pcl::registration::Registration::getInputCloud] getInputCloud is deprecated. Please use getInputSource instead.")
       ^~~~~~~~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:181:7: error: with ‘int pcl_omp::Registration<PointSource, PointTarget, Scalar>::PCL_DEPRECATED(int)’
       PCL_DEPRECATED ("[pcl::registration::Registration::setInputCloud] setInputCloud is deprecated. Please use setInputSource instead.")
       ^~~~~~~~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:375:45: error: ‘boost::function’ has not been declared
       registerVisualizationCallback (boost::function<FunctionSignature> &visualizerCallback)
                                             ^~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:375:53: error: expected ‘,’ or ‘...’ before ‘<’ token
       registerVisualizationCallback (boost::function<FunctionSignature> &visualizerCallback)
                                                     ^
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:575:14: error: ‘function’ in namespace ‘boost’ does not name a template type
       boost::function<void(const pcl::PointCloud<PointSource> &cloud_src,
              ^~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h: In constructor ‘pcl_omp::Registration<PointSource, PointTarget, Scalar>::Registration()’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:126:11: error: class ‘pcl_omp::Registration<PointSource, PointTarget, Scalar>’ does not have any field named ‘update_visualizer_’
         , update_visualizer_ (NULL)
           ^~~~~~~~~~~~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h: In member function ‘bool pcl_omp::Registration<PointSource, PointTarget, Scalar>::registerVisualizationCallback(int)’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:377:13: error: ‘visualizerCallback’ was not declared in this scope
         if (visualizerCallback != NULL)
             ^~~~~~~~~~~~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/registration.h:379:11: error: ‘update_visualizer_’ was not declared in this scope
           update_visualizer_ = visualizerCallback;
           ^~~~~~~~~~~~~~~~~~
In file included from /home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:46:0:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h: In instantiation of ‘class pcl_omp::NormalDistributionsTransform<pcl::PointXYZ, pcl::PointXYZ>’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:49:37:   required from here
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h:234:53: error: no members matching ‘pcl_omp::Registration<pcl::PointXYZ, pcl::PointXYZ, float>::update_visualizer_’ in ‘class pcl_omp::Registration<pcl::PointXYZ, pcl::PointXYZ, float>’
       using Registration<PointSource, PointTarget>::update_visualizer_;
                                                     ^~~~~~~~~~~~~~~~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h: In instantiation of ‘class pcl_omp::NormalDistributionsTransform<pcl::PointXYZI, pcl::PointXYZI>’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:50:37:   required from here
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h:234:53: error: no members matching ‘pcl_omp::Registration<pcl::PointXYZI, pcl::PointXYZI, float>::update_visualizer_’ in ‘class pcl_omp::Registration<pcl::PointXYZI, pcl::PointXYZI, float>’
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h: In instantiation of ‘class pcl_omp::NormalDistributionsTransform<pcl::PointXYZRGB, pcl::PointXYZRGB>’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:51:37:   required from here
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h:234:53: error: no members matching ‘pcl_omp::Registration<pcl::PointXYZRGB, pcl::PointXYZRGB, float>::update_visualizer_’ in ‘class pcl_omp::Registration<pcl::PointXYZRGB, pcl::PointXYZRGB, float>’
In file included from /home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/ndt.h:470:0,
                 from /home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:46:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/impl/ndt.hpp: In instantiation of ‘void pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::computeTransformation(pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::PointCloudSource&, const Matrix4f&) [with PointSource = pcl::PointXYZ; PointTarget = pcl::PointXYZ; pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::PointCloudSource = pcl::PointCloud<pcl::PointXYZ>; Eigen::Matrix4f = Eigen::Matrix<float, 4, 4>]’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:49:37:   required from here
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/impl/ndt.hpp:157:28: error: ‘update_visualizer_’ was not declared in this scope
     if (update_visualizer_ != 0)
         ~~~~~~~~~~~~~~~~~~~^~~~
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/impl/ndt.hpp: In instantiation of ‘void pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::computeTransformation(pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::PointCloudSource&, const Matrix4f&) [with PointSource = pcl::PointXYZI; PointTarget = pcl::PointXYZI; pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::PointCloudSource = pcl::PointCloud<pcl::PointXYZI>; Eigen::Matrix4f = Eigen::Matrix<float, 4, 4>]’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:50:37:   required from here
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/impl/ndt.hpp:157:28: error: ‘update_visualizer_’ was not declared in this scope
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/impl/ndt.hpp: In instantiation of ‘void pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::computeTransformation(pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::PointCloudSource&, const Matrix4f&) [with PointSource = pcl::PointXYZRGB; PointTarget = pcl::PointXYZRGB; pcl_omp::NormalDistributionsTransform<PointSource, PointTarget>::PointCloudSource = pcl::PointCloud<pcl::PointXYZRGB>; Eigen::Matrix4f = Eigen::Matrix<float, 4, 4>]’:
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/src/ndt.cpp:51:37:   required from here
/home/quanfayan/autoware.ai/src/autoware/core_perception/pcl_omp_registration/include/pcl_omp_registration/impl/ndt.hpp:157:28: error: ‘update_visualizer_’ was not declared in this scope
make[2]: *** [CMakeFiles/pcl_omp_registration.dir/src/ndt.cpp.o] Error 1
make[1]: *** [CMakeFiles/pcl_omp_registration.dir/all] Error 2
make: *** [all] Error 2
---
Failed   <<< pcl_omp_registration [13.0s, exited with code 2]
Aborted  <<< runtime_manager [5.94s]
Aborted  <<< rosinterface [19.4s]                   
Aborted  <<< waypoint_follower [1min 12s]                                                           

Summary: 31 packages finished [1min 27s]
  1 package failed: pcl_omp_registration
  3 packages aborted: rosinterface runtime_manager waypoint_follower
  2 packages had stderr output: ndt_gpu pcl_omp_registration
  104 packages not processed

Originally posted by blakeyan on ROS Answers with karma: 1 on 2020-10-03
Post score: 0

Original comments
Comment by Josh Whitley on 2020-10-03:
Can you please show us the content of your autoware.ai.repos file?

A:

The versions of gcc, g++, and libpcl are too new. The only versions supported are those provided with the default Ubuntu install (for gcc/g++ these are 5.4.0 and for libpcl, 1.7.2). Please downgrade these packages or create a new Ubuntu 16.04 environment.

Originally posted by Josh Whitley with karma: 1766 on 2020-10-09
This answer was ACCEPTED on the original site
Post score: 0

