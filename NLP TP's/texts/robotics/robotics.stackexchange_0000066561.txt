Q:

Error when trying to connect with robot controller

I have installed MotoROS into my Motoman robot controller, but when I try to connect it with doing:
Warehouse
Host: 192.168.255.1 (controller ip) and port: 50240
I get this error
DBClientCursor::init call() failed
[ERROR] [1427203508.542909786]: Exception caught while processing action 'connect to database'

And
Warehouse
Host: 192.168.255.1 (controller ip) and port: 50241
I get:
Tue Mar 24 08:33:16.723 ERROR: MessagingPort::call() wrong id got:1 expect:3
  toSend op: 2004
  response msgid:15
  response len:  144
  response op:  0
  remote: 192.168.255.1:50241
Tue Mar 24 08:33:16.723   Assertion failure false src/mongo/util/net/message_port.cpp 246
0xa29b5540 0xa29b6918 0xa29ab744 0xa29bc5df 0xa29bc8a1 0xa296675d 0xa29873a5 0xa29654c4 0xa296d97f 0xa29656b2 0xa2965bf2 0xa296a9da 0xa296aaeb 0xa29624f4 0xa2ea0cce 0xa2ea7a4c 0xa2e922b7 0xa2e925f2 0xa3190dc3 0xa3164e91
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo15printStackTraceERSo+0x30) [0xa29b5540]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo10logContextEPKc+0x58) [0xa29b6918]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo12verifyFailedEPKcS1_j+0xd4) [0xa29ab744]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo13MessagingPort4recvERKNS_7MessageERS1_+0x2af) [0xa29bc5df]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo13MessagingPort4callERNS_7MessageES2_+0x41) [0xa29bc8a1]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo18DBClientConnection4callERNS_7MessageES2_bPSs+0x3d) [0xa296675d]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo14DBClientCursor4initEv+0xb5) [0xa29873a5]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo12DBClientBase5queryERKSsNS_5QueryEiiPKNS_7BSONObjEii+0x244) [0xa29654c4]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo18DBClientConnection5queryERKSsNS_5QueryEiiPKNS_7BSONObjEii+0x7f) [0xa296d97f]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo17DBClientInterface5findNERSt6vectorINS_7BSONObjESaIS2_EERKSsNS_5QueryEiiPKS2_i+0x92) [0xa29656b2]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo17DBClientInterface7findOneERKSsRKNS_5QueryEPKNS_7BSONObjEi+0x92) [0xa2965bf2]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo20DBClientWithCommands10runCommandERKSsRKNS_7BSONObjERS3_i+0x9a) [0xa296a9da]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo18DBClientConnection10runCommandERKSsRKNS_7BSONObjERS3_i+0x3b) [0xa296aaeb]
 /opt/ros/indigo/lib/libwarehouse_ros.so(_ZN5mongo20DBClientWithCommands5countERKSsRKNS_7BSONObjEiii+0x134) [0xa29624f4]
 /opt/ros/indigo/lib/libmoveit_warehouse.so(_ZN9mongo_ros17MessageCollectionIN11moveit_msgs14PlanningScene_ISaIvEEEE10initializeERKSsS7_S7_jf+0x29e) [0xa2ea0cce]
 /opt/ros/indigo/lib/libmoveit_warehouse.so(_ZN9mongo_ros17MessageCollectionIN11moveit_msgs14PlanningScene_ISaIvEEEEC2ERKSsS7_S7_jf+0x20c) [0xa2ea7a4c]
 /opt/ros/indigo/lib/libmoveit_warehouse.so(_ZN16moveit_warehouse20PlanningSceneStorage17createCollectionsEv+0x77) [0xa2e922b7]
 /opt/ros/indigo/lib/libmoveit_warehouse.so(_ZN16moveit_warehouse20PlanningSceneStorageC1ERKSsjd+0x72) [0xa2e925f2]
 /opt/ros/indigo/lib/libmoveit_motion_planning_rviz_plugin_core.so(_ZN18moveit_rviz_plugin19MotionPlanningFrame35computeDatabaseConnectButtonClickedEv+0x203) [0xa3190dc3]
 /opt/ros/indigo/lib/libmoveit_motion_planning_rviz_plugin_core.so(_ZN5boost6detail8function26void_function_obj_invoker0INS_3_bi6bind_tIvNS_4_mfi3mf0IvN18moveit_rviz_plugin19MotionPlanningFrameEEENS3_5list1INS3_5valueIPS8_EEEEEEvE6invokeERNS1_15function_bufferE+0x21) [0xa3164e91]
[ERROR] [1427203996.729533547]: Exception caught while processing action 'connect to database'

I don't know how to fix it.
Thank you.

Originally posted by jcgarciaca on ROS Answers with karma: 67 on 2015-03-24
Post score: 0

A:

The reason you get that error is because the MoveIt RViz plugin is expecting a MongoDB instance at the other end of that TCP connection, which is obviously not the case.
You don't use the MoveIt RViz plugin to connect to the MotoROS server running on your motoman controller. You use the nodes in the motoman_driver package.
You should take a look at the motoman_driver/Tutorials page for how to set this up, and use it properly. I think especially the Using the Motoman FS/DX ROS Interface (Hydro) tutorial should help.

Originally posted by gvdhoorn with karma: 86574 on 2015-03-24
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jcgarciaca on 2015-04-06:
Thank you.
I tried with the tutorial you suggested (Using the Motoman FS/DX ROS Interface), and everything works well. Now, I want to work with on fly path planning so I created my own URDF and used Rviz. I'm interested to move my robot with using this tool (and to achieve on fly path planning).
Comment by jcgarciaca on 2015-04-06:
But I am not quite sure how to do it.
When I execute the planning the next message appears.
[ INFO] [1428354041.453863537]: Fake execution of trajectory
[ INFO] [1428354042.454572147]: Execution completed: SUCCEEDED
It is a Fake execution, but how can I do it in the real controller?
Thanks
Comment by gvdhoorn on 2015-04-07:
This is probably better asked in a separate question. Do please search ROS Answers and see if existing answers help you. If not, pose a new question.

