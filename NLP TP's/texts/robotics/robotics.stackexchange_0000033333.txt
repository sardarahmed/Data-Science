Q:

point cloud height problem

Hi,
We are using pr2_laser_snapshotter with laser_scan_assembler to get point cloud from our tilt laser. We noticed an offset in the z direction of the /base_link when the torso is not fully raised.

Unlike the point cloud in the picture above that is shifted up, the point cloud in the picture below is at the right height. The blue horizontal line is drawn in the /base_footprint frame as a reference.

Below is the launch file we used to get the point cloud:
<launch>
  <node pkg="pr2_mechanism_controllers" type="send_periodic_cmd_srv.py"
        name="laser_cmd"
    args="laser_tilt_controller linear 10 1 .35" />

  <node type="laser_scan_assembler" pkg="laser_assembler"
    name="tilt_scan_assembler">
    <remap from="scan" to="tilt_scan"/>
    <param name="max_scans" type="int" value="400" />
    <param name="fixed_frame" type="string" value="base_link" />
    <param name="ignore_laser_skew" type="bool" value="true" />
  </node>

  <node pkg="pr2_laser_snapshotter" type="pr2_laser_snapshotter" output="screen\
"
        name="snapshotter">
    <remap from="laser_scanner_signal"
           to="/laser_tilt_controller/laser_scanner_signal"/>
    <remap from="full_cloud" to="tilt_laser_cloud" />
  </node>
</launch>

Thanks for your help!
Huan

Originally posted by liuhuanjim013 on ROS Answers with karma: 152 on 2011-07-27
Post score: 0

A:

Changing the mechanical reduction of the torso is only going to mask other problems. The mechanical reduction numbers for your robot will never change, even after calibration. Recalibrating the robot only changes the offsets of each joint.
Thank you for bringing this to my attention. I'm going to investigate this value and make sure the mechanical reduction is correct for the PR2 torso.

Originally posted by watts with karma: 584 on 2011-07-28
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by TomTUM on 2011-07-29:
Kevin, check Request #616 on support. For us, it solved the issue. I would also expect other robots to have the same issue, would be great to have checked official values :)
Comment by liuhuanjim013 on 2011-07-28:
Hi Kevin, Thanks for the reply! What do you recommend us to do now? Shall I play with the mechanicalReduction value at all?

