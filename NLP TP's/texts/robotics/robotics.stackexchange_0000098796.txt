Q:

Error occurs when trying to build in eloquent

Hello,
I recently tried to update my ROS2 version from dashing to eloquent. I do have a good number of publishers and all are building without any problem. But one of them gives me an error which I cannot resolve. Can anyone give me a clue on what the problem could be?
error: no matching function for call to 'rclcpp::Publisher<common::msg::Stanag4586Wrapper_<std::allocator<void> > >::publish(std::shared_ptr<common::msg::Stanag4586Wrapper_<std::allocator<void> > >&)'
I am building with colcon build.
Thank you.

Originally posted by fnax8902 on ROS Answers with karma: 7 on 2021-04-12
Post score: 0

Original comments
Comment by sgvandijk on 2021-04-12:
It would be helpful if you supply the code where you try to call publish and where you create the publisher (ideally an MWE, as well as the full error message instead of just a single line of it. Without that context it's very difficult to get a clue
Comment by fnax8902 on 2021-04-12:
In Header-file: rclcpp::Publisher<common::msg::Stanag4586Wrapper>::SharedPtr pub_stanag_u2g_;
void U2gLink::init_publisher()
{
  pub_stanag_u2g_ = this->create_publisher<common::msg::Stanag4586Wrapper>("/stanag/u2g", 10);
}

void U2gLink::some_void()
{
    auto msg = std::make_shared<common::msg::Stanag4586Wrapper>();
    pub_stanag_u2g_->publish(msg);
}

A:

https://docs.ros2.org/eloquent/api/rclcpp/classrclcpp_1_1Publisher.html
As the docs show, you can either publish a message or a unique pointer to a message, but not a shared pointer.

Originally posted by stevemacenski with karma: 8272 on 2021-04-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by fnax8902 on 2021-04-12:
Okay, and I guess in ROS2 Dashing shared pointers were accepted as well, right?
Comment by stevemacenski on 2021-04-12:
Correct. If this answers your question can you mark this answer as correct to remove from unanswered questions queue?

