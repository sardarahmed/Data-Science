Q:

husky amcl navigation

Hello everybody! I want to use amcl on my husky simulator. I created a map with gmapping and trying to use amcl with rviz and 2d pose estimate button, but it doesn't happen anything. can you help me? I just want to let the husky simulator (gazebo) do an autonomous navigation.

Originally posted by alex920a on ROS Answers with karma: 35 on 2014-05-22
Post score: 0

A:

Check your rqt_graph and ensure that both your scan topic from the husky laser scanner, its odometry, the tf between the two, and map topic are published and that the amcl node is subscribing correctly. Additionally a properly working amcl should update the tf to include a relationship between odometry and map.
Also setup rviz so you can see the map, the transforms between the odometry and scanner, and the scan output are displayed correctly. RViz will help identify any problems with your configuration with handy colour coding of issues.
If your map topic isn't being published, a simple fix is to save a couple of /map messages into a bag topic when using gmapping and getting  a pretty good map, and simply play this when starting your amcl session. You only need one occupancy map message to be published as amcl can latch that or use the last map recieved.

Originally posted by PeterMilani with karma: 1493 on 2014-05-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by alex920a on 2014-05-22:
HI! thanks for the answer. I've corrected some errors in parameters and set the fixed frame to /map and amcl works! Another question: I need to write a wrapper for a path planner plugin and as parameters I need the global map and the local map. Do I need to write codes from the beginning?
Comment by PeterMilani on 2014-05-23:
not sure what you're asking. move_base contains a local and global planner... are you trying to modify these? The tutorials for move_base allow you to specify parameters via some config files you can setup. Else you can modify parameters via the param tag in launch files
Comment by alex920a on 2014-05-23:
I need to create a wrapper ros for an external path planner plugin. This plugin needs initially the initial known map (ok) , a vector of occupied cells (x,y) and start-goal(x,y). Know I'm stucked since I don't know how to compare the inizial map with a local map of the robot.
Comment by PeterMilani on 2014-05-23:
If you have to implement a plugin see http://wiki.ros.org/pluginlib, you will have to do this for your planner. Specifying this planner is done via the base_local_planner parameter see http://wiki.ros.org/pluginlib parameter section. There are heaps of ways to get the info you are after.
Comment by alex920a on 2014-05-23:
No, I have already a plugin (not ros), I need to write a wrapper ros for it. How can I do?
Comment by PeterMilani on 2014-05-23:
Well a plugin is very similar to a ros node. Do the tutorials on ROS, and then convert your node as per the pluginlib. If you are writing a wrapper for your planner, then you should be able to implement your planner in the plugin as a program function or class, its up to  you.

