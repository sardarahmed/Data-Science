Q:

Using robot_pose_ekf output for Navigation stack

I am currently working on a robot similar to a turtlebot that uses the gyro from the turtlebot and encoders for tracking movement.  I setup the robot_pose_ekf to take in the data and it is working correctly.  I am now confused at what to do with the output of robot_pose_ekf.  It is in the format geometry_msgs/PoseStamped and the navigation stack requires nav_msgs/Odometry.  I am unsure if I am heading in the right direction with this but the overall goal is to combine the gyro and the encoder readings and then send it to the nav stack.  Does anyone have any ideas or suggestions?
Thanks

Originally posted by jbeck27 on ROS Answers with karma: 41 on 2011-09-02
Post score: 3

A:

robot_pose_ekf broadcasts the tf transform from odom_combined to base_link (odom_combined -> base_link) which amcl uses to compute the position of the robot. A good explanation of how this works can be found here: http://www.youtube.com/watch?v=C92bxCr05Gs
The turtlebot_navigation package does what you are describing. Checkout the autonomously navigating in a known map tutorial. (http://www.ros.org/wiki/turtlebot_navigation/Tutorials/Autonomously%20navigate%20in%20a%20known%20map)

Originally posted by mmwise with karma: 8372 on 2011-09-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by jbeck27 on 2011-10-14:
I want the combined gyro and wheel odometry to be given to the local planner.   robot_pose_ekf publishes "odom_combined" that is not a nav_msgs/Odometry message.  What is given to the local planner for the turtlebot?
Comment by jbeck27 on 2011-10-14:
That didn't solve the problem.   I think I can clarify what I need now though.  the robot_pose_ekf publishes a tf frame that amcl uses.  What I need is some way to give the local planner the "odom" message.  I am referencing the diagram in http://www.ros.org/wiki/move_base .
Comment by mmwise on 2011-09-02:
in the configuration files you should see a line:   you need to set the param to the frame you want to use. It's in the amcl_turtlebot.launch file.
Comment by jbeck27 on 2011-09-02:
Thank you for the response.  I actually had already found your videos, nice job btw.  I guess a better phrasing of the question would if you run robot_pose_ekf and the nav stack is using it in the AMCL, what do you send as "odom" to the local_planner inside the navigation system?

