Q:

Love Arch Linux, but won't behave with ROS

Hey everyone
I recently moved to Arch Linux after getting tired of Ubuntu due to its rigid structure and I absolutely love it, but the last couple of days have I worked with installing ROS. This have not be an pleasant journey and I am currently stucked at a problem I have been unable to figure out. I get the following three line error message:

Bootstrapping ROS build
Detected ros_comm bootstrapping it too.
Rospack failed to build

I hope someone have an idea how to solve it.
Regards
Sebastian Aslund

Originally posted by Aslund on ROS Answers with karma: 289 on 2011-07-13
Post score: 0

A:

I don't like waiting for updates on Ubuntu either.
The main problems you will face for working with ROS on Archlinux are:

ROS refers to "python2" as "python" in its script files.
(This most likely explains most of the errors you are facing.)
Many ROS packages do not compile with GCC 4.6.

The fix is to preferentially use python2 in lieu of python and gcc-4.5 in lieu of gcc-4.6.
# install GNU compilers 4.5  
yaourt -S python2 gcc45  
  
mkdir /usr/local/bin/alt  
  
ln -s /usr/bin/python2 /usr/local/bin/alt/python  
ln -s /usr/bin/gcc-4.5 /usr/local/bin/alt/gcc  
ln -s /usr/bin/g++-4.5 /usr/local/bin/alt/g++  
  
export PATH=/usr/local/bin/alt:$PATH  

You would want to put the last line in an initialization script that you run every time before using ROS in a new terminal. Don't add this to your /etc/profile.d/ as it will break some packages in Archlinux.
Additionally, the dependencies are not detected very well, so you have to determine which libraries are missing from the error logs.
For more information, see my other post.
Edit:
Promoting gcc-4.5 and g++-4.5 does not appear to work, as configure refers to them by the exact path: /usr/bin/gcc
Instead, you have to edit the CMakeLists.txt file for each package that fails to compile with gcc 4.6.
Add the following lines after the rosbuild directives (if any).
set (CMAKE_C_COMPILER gcc-4.5)  
set (CMAKE_CXX_COMPILER g++-4.5)  

Originally posted by DavidS with karma: 66 on 2011-07-13
This answer was ACCEPTED on the original site
Post score: 1

