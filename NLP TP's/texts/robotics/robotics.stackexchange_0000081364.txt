Q:

rosdep update urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed

When I run the rosdep update command I get the following error
rosdep update

reading in sources list data from /etc/ros/rosdep/sources.list.d
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml]:
        <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml]:
        <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml]:
        <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml]:
        <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/releases/fuerte.yaml]:
        Failed to download target platform data for gbpdistro:
        <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)>
Query rosdistro index https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml
ERROR: error loading sources list:
        <urlopen error <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)> (https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml)>

The system information I use :
Ubuntu 16.04.2 LTS, Python 3.5, ros-lunar
Thank you very much for your help and opinions.

Originally posted by trDjango on ROS Answers with karma: 51 on 2017-06-20
Post score: 0

Original comments
Comment by gvdhoorn on 2017-06-21:
Are you behind a proxy by any chance? If so, make sure you've configured your local machine correctly for it. It you already did that, make sure that the proxy server does not strip SSL (headers) from your connection.
Comment by gvdhoorn on 2017-06-21:
What is the output of wget https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml?
Comment by trDjango on 2017-06-21:
How do I configure my proxy settings so that I can bypass this error ? Thank you very much for your help
Comment by gvdhoorn on 2017-06-22:
I wouldn't know. I just know from experience that (misconfigured) proxies can cause these kind of problems.
I would suggest you talk to your network administrators and ask them for help.

A:

Make sure that you have the SSL certificates installed correctly.
sudo apt-get install ca-certificates

You will get this error if your SSL certificates are missing. Here's my example reproducing in a docker container:
root@0c988f5d8e4c:/# apt remove ca-certificates 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  file libexpat1 libexpat1-dev libffi6 libmagic1 libpython-all-dev libpython-dev libpython-stdlib libpython2.7 libpython2.7-dev
  libpython2.7-minimal libpython2.7-stdlib libsqlite3-0 libssl1.0.0 mime-support openssl python python-all python-all-dev python-dev
  python-minimal python-pkg-resources python-setuptools python-wheel python2.7 python2.7-dev python2.7-minimal
Use 'apt autoremove' to remove them.
The following packages will be REMOVED:
  ca-certificates python-pip python-pip-whl
0 upgraded, 0 newly installed, 3 to remove and 35 not upgraded.
After this operation, 2351 kB disk space will be freed.
Do you want to continue? [Y/n] 
(Reading database ... 16375 files and directories currently installed.)
Removing python-pip (8.1.1-2ubuntu0.4) ...
Removing python-pip-whl (8.1.1-2ubuntu0.4) ...
Removing ca-certificates (20160104ubuntu1) ...
Removing dangling symlinks from /etc/ssl/certs... done.
root@0c988f5d8e4c:/# rosdep update
reading in sources list data from /etc/ros/rosdep/sources.list.d
Warning: running 'rosdep update' as root is not recommended.
  You should run 'sudo rosdep fix-permissions' and invoke 'rosdep update' again without sudo.
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml]:
    <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/osx-homebrew.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml]:
    <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/base.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml]:
    <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/python.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml]:
    <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)> (https://raw.githubusercontent.com/ros/rosdistro/master/rosdep/ruby.yaml)
ERROR: unable to process source [https://raw.githubusercontent.com/ros/rosdistro/master/releases/fuerte.yaml]:
    Failed to download target platform data for gbpdistro:
    <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)>
Query rosdistro index https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml
ERROR: error loading sources list:
    <urlopen error <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)> (https://raw.githubusercontent.com/ros/rosdistro/master/index.yaml)>
root@0c988f5d8e4c:/# 

This is possibly related to: http://answers.ros.org/question/263604/is-there-a-way-arround-rosdep-inititialize

Originally posted by tfoote with karma: 58457 on 2017-06-21
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by trDjango on 2017-06-21:
Ca-certificates removes many programs that are dependent on what I am trying to remove, so can you suggest a different method of how to overcome this error?Thank you very much for your help, can we use ros-lunar with python 3, because i can use python 3.
Comment by tfoote on 2017-06-21:
I wasn't recommending removing ca-certificates. I was demostrating that the error came about if you removed them. If you have the ssl certificates installed then you likely have a man in the middle proxy that needs ssl support.
Comment by trDjango on 2017-06-21:
Ca-certificates are installed on my system(ubuntu 16.04.2), but what should I follow in the future, do you have an idea?
Thank you very much for your help
Comment by trDjango on 2017-06-21:
I guess this ros-lunar still does not fully support the python3.5 version, so I get this certificate error:(
Comment by tfoote on 2017-06-21:
rosdep works fine with python3 See this gist where it works until I remove the certificates. https://gist.github.com/tfoote/b3d533055541050a038cc9e0ac6942dd  I believe you either have an issue with your installed SSL certificates or else have a proxy or firewall changing your SSL credentials.
Comment by trDjango on 2017-06-22:
I tried the following method;
my command :
openssl s_client -host www.raw.githubusercontent.com/ros/rosdistro/master/index.yaml -port 443
I got the output:
**
gethostbyname failure
connect:errno=0

**
Comment by trDjango on 2017-06-22:
but when I changed my command to:
openssl s_client -host www.github.com -port 443
I got the output:
    CONNECTED(00000003)
depth=2 C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert High Assurance EV Root CA
verify return:1
depth=1 C = US, O = DigiCert Inc, OU = www.digicert.com,

Comment by trDjango on 2017-06-22:
I understand until now, I can not get certificate approval if there is no www at the beginning of the link:( Can we solve the problem by uploading the files in this yaml extension link to a different server?
Comment by tfoote on 2017-06-22:
There's no evidence of an SSL issue on github.com, This is a very heavily used public https interface. I'm quite confident that this is an issue of configuration of your computer or network that you will need to work out. You might want to try connecting from a different network or try a VPN.
Comment by trDjango on 2017-07-22:
I've been working for days, I changed vpn , but in vain.Where can be the rosdep update file path?Because I want to insert the following code into the file.
import ssl
ssl._create_unverified_context()

