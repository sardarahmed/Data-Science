Q:

Duration of 1 second during while(ros::ok())

Hi All,
Below is the snippet of the code I have.
 int main()
 {
       //Declaration part
       ros::Rate rate(50);
       while(ros::ok())
       {
             //I need to run one condition or function at each second
             //Modify the message based on the condition in previous line
             //Publish the message
             rate.sleep();
             ros::spinOnce();
        }
 }

Can anybody please tell me how can I check for some condition at each second?
Thank you,
KK

Originally posted by kk2105 on ROS Answers with karma: 262 on 2018-07-04
Post score: 0

A:

You are looking for Timers, see the wiki
void callback(const ros::TimerEvent&)
{
  ROS_INFO("Callback triggered");
}

int main(int argc, char **argv)
{
  ros::init(argc, argv, "name");
  ros::NodeHandle n;
  ros::Timer timer = n.createTimer(ros::Duration(1.0), callback);
}

Here the callback will be triggered every second. You can put your condition or function inside the callback to have it called every second.

Originally posted by Delb with karma: 3907 on 2018-07-04
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by kk2105 on 2018-07-05:
@Delb Thanks for suggestion.. I will check this option and get back to you ..

