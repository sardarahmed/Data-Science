Q:

Configure PyCharm to make the linting work properly

Hi everyone,
I'm trying to use PyCharm with a Python ROS node. The linting displays the message No module named [...] for all the imports related to ROS (rospy, std_msgs, tf, ...). It seems that I selected the right version of Python, but rospy and the others don't appear:

I think I have to tell PyCharm to look in /opt/ros/kinetic/share, but I don't know how to do that.

Originally posted by Hug on ROS Answers with karma: 66 on 2018-09-24
Post score: 0

A:

From terminal:
$ source /opt/ros/kinetic/setup.bash
$ pycharm-community

I went ahead and added source /opt/ros/kinetic/setup.bash to the bottom of ~/.bashrc.

Edit: To run PyCharm via application shortcut...

Find PyCharm .desktop file:
$ locate .desktop | grep pycharm
Open the PyCharm .desktop file:
$ sudo -H gedit /PATH_TO_PYCHARM_DESKTOP_FILE/PYCHARM_DESKTOP_FILE.desktop
Add bash -i -c to the Exec=... line within the desktop file.
Save and exit.

Example (Ubuntu 16.04, PyCharm Community 2018.2.4):
$ locate .desktop | grep pycharm  
$ sudo -H gedit /var/lib/snapd/desktop/applications/pycharm-community_pycharm-community.desktop  

pycharm-community_pycharm-community.desktop
original:
[Desktop Entry]
Version=1.0
Type=Application
Name=PyCharm Community Edition
Icon=/snap/pycharm-community/85/bin/pycharm.png
Exec=env BAMF_DESKTOP_FILE_HINT=/var/lib/snapd/desktop/applications/pycharm-community_pycharm-community.desktop /snap/bin/pycharm-community %f
Comment=Python IDE for Professional Developers
Categories=Development;IDE;
Terminal=false
StartupWMClass=jetbrains-pycharm-ce

edited:
[Desktop Entry]
Version=1.0
Type=Application
Name=PyCharm Community Edition
Icon=/snap/pycharm-community/85/bin/pycharm.png
Exec=env BAMF_DESKTOP_FILE_HINT=/var/lib/snapd/desktop/applications/pycharm-community_pycharm-community.desktop bash -i -c /snap/bin/pycharm-community %f
Comment=Python IDE for Professional Developers
Categories=Development;IDE;
Terminal=false
StartupWMClass=jetbrains-pycharm-ce

References:

https://answers.ros.org/question/204326/pycharm-setup/?answer=265410#post-id-265410
https://askubuntu.com/a/913536
https://superuser.com/questions/202676/sudo-vs-gksudo-difference/726249#726249

Originally posted by josephcoombe with karma: 697 on 2018-09-24
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Hug on 2018-09-24:
Thanks. In fact, I had already sourced /opt/ros/kinetic/setup.bash and ~/catkin_ws/devel/setup.bash in ~/.bashrc. So I just needed to run PyCharm from the console. Your solution is surely more elegant than mine. The only drawback is that I can't run PyCharm with the shortcut that way.
Comment by josephcoombe on 2018-09-24:
I edited answer with method that should allow you to run PyCharm via shortcut.
Comment by Hug on 2018-09-25:
Thanks! It works well.
Comment by sxin on 2018-11-28:
It works for me, ubuntu 18.04 and ros melodic.
Comment by wintermute on 2019-11-30:
Hello, it did work for ubuntu 18.04 and melodic, for a while --- but I just reinstalled a new computer, and it seems that adding bash -i -c ... strangely works the first time, and after that it will still run, but everything will be in background. ps aux | grep pycharm will show a process, but no output on the screen.
Best regards,
C.

