Q:

catkin_make builds executable in the wrong directory?

Hello! I have a package I have been able to successfully build using catkin_make after setting up my package.xml and CMakeLists.txt. However, I have one problem. When I run catkin_make, it successfully makes the executable, but places the executable in catkin_ws/build/package_name. For example, I have made a small example below (tbrandom and tbsub are my executables):
may@MooMoo:~/Desktop/Tree/Programming/ros/TurtleBotRandom$ ls
build  devel  src
may@MooMoo:~/Desktop/Tree/Programming/ros/TurtleBotRandom$ cd build
may@MooMoo:~/Desktop/Tree/Programming/ros/TurtleBotRandom/build$ ls
catkin            catkin_make.cache  cmake_install.cmake  Makefile
catkin_generated  CMakeCache.txt     CTestTestfile.cmake  test_results
CATKIN_IGNORE     CMakeFiles         gtest                turtle_bot_random
may@MooMoo:~/Desktop/Tree/Programming/ros/TurtleBotRandom/build$ cd turtle_bot_random
may@MooMoo:~/Desktop/Tree/Programming/ros/TurtleBotRandom/build/turtle_bot_random$ ls
catkin_generated  cmake_install.cmake  Makefile  tbsub
CMakeFiles        CTestTestfile.cmake  tbrandom

When I source the devel/setup.bash, and try to run the executable through the package, ROS cannot find the executable unless I copy the executable(s) made (in this example, tbrandom and tbsub) and copy them into Desktop/Tree/Programming/ros/TurtleBotRandom/src/turtle_bot_random. This is really annoying for bigger projects which require more compile time, and then require me to copy paste files in between to actually start testing to see if my code even works.
What could be the reason or a potential fix? Am I doing something wrong? I've only started toying with catkin last night.
MY CMAKELISTS.TXT FILE:
http://www.pastebin.ca/3086592

Originally posted by utagai on ROS Answers with karma: 3 on 2015-08-01
Post score: 0

Original comments
Comment by Dirk Thomas on 2015-08-01:
If you post your CMakeLists.txt file I might be able to tell you what you need to do differently.
Comment by gvdhoorn on 2015-08-02:
+1 to what Dirk said: without your actual CMakeLists.txt we can only guess what is going on.
I'll take a guess though: was this package migrated from rosbuild? I've seen pkgs that forced rosbuild to place binaries in non-standard places. Catkin is different, and those pkgs then break.
Comment by utagai on 2015-08-02:
Hello guys, I have posted a link to a pastebin of my CMakeLists.txt file (it was too long to copy paste into the post). I hope this helps!
Comment by duck-development on 2015-08-02:
Your  Cmake ist worng
Declare a cpp executable

add_executable(turtle_bot_random_node src/turtle_bot_random_node.cpp)

you can not bild a Comment
Comment by utagai on 2015-08-02:
duck-development, if you look at lines 8-12, you will see that I have lines for my builds uncommented. I think you are looking at a line I commented out previously. I think I tried that thinking if I put in the path it would build the executable there, but commented it out when it didn't work.

A:

The problem is that you call add_executable() before catkin_package() in the CMake file.
Please read the documentation for more information: http://wiki.ros.org/catkin/CMakeLists.txt#catkin_package.28.29

Originally posted by Dirk Thomas with karma: 16276 on 2015-08-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by utagai on 2015-08-02:
Thank you! That fixed the problem! However, the documentation doesn't seem to tell me why this caused an issue. Can you explain?
Comment by Dirk Thomas on 2015-08-03:
Because the catkin_package() call changes the default location of compiled targets.
Comment by utagai on 2015-08-03:
Is this because catkin_package() overwrites the location to which the executables should be save?
Comment by William on 2015-08-03:
Yes, it changes the EXECUTABLE_OUTPUT_PATH and the LIBRARY_OUTPUT_PATH.
Comment by utagai on 2015-08-03:
Alright, that makes sense. Thanks so much!

