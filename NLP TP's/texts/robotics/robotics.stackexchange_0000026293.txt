Q:

Gazebo being moody (sometimes starting, sometimes not)

I have set up ROS (fuerte) with Gazebo 1.7.1 (current from repo) on a Xubuntu 12.04 and finally got it halfway working. I have set up a rosws workspace and added the setup scripts for that and for gazebo to my .bashrc.
However, what I still often observe is that Gazebo is very moody when it comes to launching. By "moody" I mean that it sometimes starts fine and sometimes just crashes -- and with different causes, too.
This is on a different computer so I can't post logs right away; but I think the logs themselves wouldn't be that helpful anyway.
I'm much more interested in why Gazebo is that sensitive to (I assume) minute differences in the environment. In most cases so far, re-sourcing the Gazebo setup.sh makes it start again, but sometimes I need to source it twice in a row. So I guess one of the questions here is: why does Gazebo change the environment during its execution, breaking itself on the next launch?

Originally posted by Nevik on Gazebo Answers with karma: 23 on 2013-04-28
Post score: 2

Original comments
Comment by Davinci on 2013-04-28:
Same prblem with the 1.0 version. Do you use a launch file? I notice that how more complex this file becomes the faster crashes occur. Probably because of that Gazebo is not fully loaded yet while other components already try to interact with it. But it is very annoying indeed.
Comment by scpeters on 2013-04-29:
I have seen this at various times as well. Sometimes it appears to be a connection issue, and other times it appears that it's just that the client doesn't load properly. Opening gzclient in another terminal sometimes works. I've never been able to figure out a reason or a repeatable way to generate the failure.
Comment by Nevik on 2013-04-29:
@Davinci: this does indeed happen most often with launch files, but it also sometimes happens when I launch Gazebo manually. Since the launch files haven't been developed by myself, I'll take a look at them and see if I can improve the launch order (and maybe add some delays).
Comment by SL Remy on 2013-04-29:
@davinci How fast is a "fast crash"? @nevik, are your crashes only at startup?
Comment by gerkey on 2013-04-29:
There's a known problem on startup with gzclient failing to connect with gzserver, resulting in an empty GUI window.  In that situation, you can start a fresh gzclient and everything should work.  Feels like a race condition; and hasn't yet been debugged.  But crashing is something else; the symptoms described here sound like what I see with non-NVIDIA GPUs when software rendering is in use; that doesn't work very well.
Comment by SL Remy on 2013-04-30:
Is there a video an example of the instability you've seen with non-NVIDIA GPUs?
Comment by Mrit91 on 2013-07-02:
Same problem, in my launch file, first a world is launched, then a bot ad then rviz. It was not working properly always. So I made a separate launch file for the world and bot together and rviz in another and it works perfectly fine. I guess there is a need for some sort of delay after spawning the bot and getting everything in place.
Comment by Nevik on 2013-07-29:
@gerkey @trinighost thanks for your input; the problems were "solved" by "acquiring" an Nvidia graphics card. It took a long time to figure that out, since I had not expected Gazebo to be so picky, and had not seen it mentioned anywhere that non-Nvidias are just about completely incompatible.

A:

I had the same kind of issue and it came ... from the way I stopped Gazebo. Always use ctrl+c from the console you used to launch it. Took me 10 days to find it out, and it is 100 % reproducible. Obviously that could be mixed with another root cause.

Originally posted by Arn-O with karma: 316 on 2013-08-05
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by John Nagle on 2013-08-09:
This sort of interprocess communication trouble is why real robots (BigDog, LS3, Atlas) run the QNX operating system, where interprocess communcation Just Works.

