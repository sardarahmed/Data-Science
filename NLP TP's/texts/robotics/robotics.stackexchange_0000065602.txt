Q:

How to integrate transmission into RobotHW

We have migrated our robot base driver to use ros_control.
That works well, execpt for the transmissions. There are transmissions in the URDF Model:
<transmission name="wheel_left_trans">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="wheel_left_joint">
    <hardwareInterface>VelocityJointInterface</hardwareInterface>
  </joint>
  <actuator name="left_motor">
    <mechanicalReduction>12</mechanicalReduction>
  </actuator>
</transmission>

Is there a common practice on how to use this in the RobotHW?
The only example I know of is this tutorial. But there the transmission is not read from the URDF model.

Originally posted by Michael Stoll on ROS Answers with karma: 71 on 2015-02-03
Post score: 1

A:

Is there a common practice on how to use this in the RobotHW?

Yes. Typically you would somehow populate the actuator interfaces when initializing your RobotHW specialization, and then use the TransmissionInterfaceLoader class to automatically populate your joint interfaces from the URDF + the actuator interfaces.
I thought there were no code examples available, but it turns out that I did write some doc back in the day. It's just not very visible. Please see the TransmissionInterfaceLoader class code API.
The above only deals with populating interfaces. You would then need to actually propagate the transmissions in the read/write methods of your RobotHW. Please refer to the main transmission_interface Doxygen page for examples.

Originally posted by Adolfo Rodriguez T with karma: 3907 on 2015-02-03
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Michael Stoll on 2015-02-04:
Thanks, TransmissionInterfaceLoader is great.
@All: You only need the propagation from the tranmission_interface example. The wrapping is handled by TransmissionInterfaceLoader!

