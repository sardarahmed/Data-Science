Q:

Bloom release failure

Hi,
I can't understand what is wrong when I try to release with bloom:
In my repo https://github.com/lagadic/vision_visp
I have done for groovy branch:
$ catkin_generate_changelog
$ catkin_tag_changelog
$ catkin_prepare_release

that has created the new tag groovy-0.7.4
Then to release this new version to https://github.com/lagadic/vision_visp-release I did:
$ bloom-release vision_visp --track groovy --rosdistro groovy
...
Everything up-to-date
==> Releasing 'vision_visp' using release track 'groovy'
==> git-bloom-release groovy
Processing release track settings for 'groovy'
Checking upstream devel branch for package.xml(s)
Cloning into '/tmp/tmpePvEhb/upstream'...
remote: Reusing existing pack: 3388, done.
remote: Counting objects: 191, done.
remote: Compressing objects: 100% (191/191), done.
remote: Total 3579 (delta 119), reused 3 (delta 0)
Receiving objects: 100% (3579/3579), 1.35 MiB | 527.00 KiB/s, done.
Resolving deltas: 100% (2161/2161), done.
Checking connectivity... done.
Looking for packages in 'groovy' branch... found 6 packages.
Detected version '0.7.4' from package(s): ['visp_camera_calibration', 'visp_hand2eye_calibration', 'vision_visp', 'visp_auto_tracker', 'visp_tracker', 'visp_bridge']

Executing release track 'groovy'
==> bloom-export-upstream /tmp/tmpePvEhb/upstream git --tag groovy-0.7.4 --display-uri https://github.com/lagadic/vision_visp.git --name upstream --output-dir /tmp/tmpruKz1m
Checking out repository at 'https://github.com/lagadic/vision_visp.git' to reference 'groovy-0.7.4'.
Exporting to archive: '/tmp/tmpruKz1m/upstream-groovy-0.7.4.tar.gz'
md5: 746ef2c87d8cd72fc7031992d6e05604

==> git-bloom-import-upstream /tmp/tmpruKz1m/upstream-groovy-0.7.4.tar.gz  --release-version 0.7.4 --replace
The latest upstream tag in the release repository is 'upstream/0.7.3'.
Importing archive into upstream branch...
The package(s) in upstream are version '0.7.3', but the version to be released is '0.7.4', aborting.
<== Error running command '['/usr/bin/git-bloom-import-upstream', '/tmp/tmpruKz1m/upstream-groovy-0.7.4.tar.gz', '--release-version', '0.7.4', '--replace']'
Release failed, exiting.

Many thanks if you have some ideas ?
Best regards
Fabien

Originally posted by Fabien Spindler on ROS Answers with karma: 126 on 2014-07-02
Post score: 1

A:

The error is:
The package(s) in upstream are version '0.7.3', but the version to be released is '0.7.4', aborting.

This means that version in the package.xml(s) in the "development branch" do not match the version in the package.xml(s) of the tag it is trying to release.
From you output I can see that the development branch is groovy, which looking at your repository has version 0.7.4:
https://github.com/lagadic/vision_visp/blob/groovy/vision_visp/package.xml#L3
Then looking at the output I can see that it is trying to release from the tag groovy-0.7.4  which has version 0.7.3 in it's package.xml(s):
https://github.com/lagadic/vision_visp/blob/groovy-0.7.4/vision_visp/package.xml#L3
So somehow you have gotten version 0.7.3 tagged as groovy-0.7.4.

Originally posted by William with karma: 17335 on 2014-07-02
This answer was ACCEPTED on the original site
Post score: 1

