Q:

Problem for install gazebo_ros_package

I want to creat a plugin in gazebo, so i need the gazebo_ros_package.
I use linux 14.04 and ROS Indigo and gazebo 6.
I try to install the gazebo_ros_package;
$ sudo apt-get install ros-indigo-gazebo-ros-pkgs ros-indigo-gazebo-ros-control
But it reponse that I need gazebo2 ,ros-indigo-gazebo-ros,ros-indigo-gazebo-ros and so on
then I use
$ sudo git clone https://github.com/ros-simulation/gazebo_ros_pkgs.git
It works but when I use
rosrun gazebo_ro gazebo
It give me something like this
/opt/ros/indigo/share/gazebo_ros_pkgs/gazebo_ros/scripts/gazebo: 25: .: Can't open /share/gazebo//setup.sh
where is the problem?

Originally posted by huang0171 on ROS Answers with karma: 11 on 2015-08-13
Post score: 1

A:

The problem is in the scripts located in /opt/ros/indigo/lib/gazebo_ros.  There are several scripts (i.e. gzclient, gzserver, etc.) which are executed when you perform a rosrun command.  When trying to run gazebo, ROS needs to source the gazebo setup.sh script to make sure that the proper gazebo paths are defined.  This is the line in the ROS scripts which has a problem:
setup_path=$(pkg-config --variable=prefix gazebo)/share/gazebo/

The problem is that pkg-config should find the path to gazebo, but it doesn't seem to work.  Since it doesn't find gazebo, the script just continues execution using "/share/gazebo/" as the path.  I tried looking around, but couldn't find an easy fix.  Also, it looks like there is an extra slash at the end.
If you want a quick fix to just get things running, manually edit the gzserver and gzclient files to point to the directory which contains the setup.sh file.  The default install location is /usr/share, so I changed my scripts to this:
setup_path=/usr/share/gazebo

If anyone knows what the correct fix is, feel free to chime in.

Originally posted by agoins with karma: 81 on 2015-08-18
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by yasagitov on 2015-08-26:
Had the same issue (14.04 + Jade + Gazebo 5), solved by creating a file opt/ros/jade/lib/pkgconfig/gazebo.pc with the content
"prefix=/usr
Name: gazebo
Description: Description of gazebo
Version: 1.0.0
"
Comment by SAGAR SHENOY on 2020-10-30:
Thanks a ton dude. I was finding a solution from many days .
Comment by Longshot on 2021-08-02:
You may need to execute following code after creating the workspace
echo "source ~/catkin_ws/devel/setup.bash" >> ~/.bashrc

