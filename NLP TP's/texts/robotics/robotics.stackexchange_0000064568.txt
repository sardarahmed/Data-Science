Q:

Installation from source fails because of cv_bridge include dir

I'm trying to install ROS from source on Fedora 20 as per http://wiki.ros.org/indigo/Installation/Source.  It fails with:
    CMake Error at /home/jfstepha/ros_catkin_ws/install_isolated/share/cv_bridge/cmake/cv_bridgeConfig.cmake:106 (message):
  Project 'cv_bridge' specifies '//include/opencv' as an include dir, which
  is not found.  It does neither exist as an absolute directory nor in
  '/home/jfstepha/ros_catkin_ws/install_isolated///include/opencv'

The correct path should be "/usr/include/opencv", somehow it seems to be missing the "usr".  Also, it successfully builds 153 packages before this, so it doesn't seem to be a general setup issue.
I'm having a hard time figuring out where this path comes from - can anyone help?

Originally posted by Jon Stephan on ROS Answers with karma: 837 on 2014-12-10
Post score: 0

Original comments
Comment by ahendrix on 2014-12-10:
Perhaps this is related: http://answers.ros.org/question/198058/cmake-error-while-building-rpg_svo/ ?
Comment by Jon Stephan on 2014-12-11:
@ahendrix: It could possibly be somehow related in that it could be an opencv configuration bug, but the root cause of that one had to do with the Nvidia TK1 Jetson board, which I am not using.   It could be the same environmental variable is missing or something.

A:

The problem was that OpenCV_INCLUDE_DIRS was not getting set properly.  It gets set by this line in /usr/lib64/OpenCVConfig.cmake
set(OpenCV_INCLUDE_DIRS "${OpenCV_INSTALL_PATH}/include/opencv;${OpenCV_INSTALL_PATH}/include")

The root cause is probably that OpenCV_INSTALL_PATH is not set properly, but I just changed the line to this:
set(OpenCV_INCLUDE_DIRS "/usr/include/opencv;/usr/include")

This seemed to work.

Originally posted by Jon Stephan with karma: 837 on 2014-12-14
This answer was ACCEPTED on the original site
Post score: 1

