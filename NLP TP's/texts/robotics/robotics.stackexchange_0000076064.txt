Q:

Simulating range sensors in Stage and publishing to ROS

According to the Stage Manual (http://rtv.github.io/Stage/group__model__ranger.html), the generic ranger model that was introduced in Stage 4 should be able to simulate both laser rangefinders and (sonar or IR) range sensors. However, it doesn't look like stage_ros can handle range sensors. I'm inferring that based on the topics published by the stage_ros node and the fact that it doesn't include sensor_msgs/Range.
Is it just a missing feature that I could implement or am I misunderstanding the ranger model?
References:

http://rtv.github.io/Stage/index.html
http://wiki.ros.org/stage_ros#Published_topics
http://answers.ros.org/question/33973/stage-error-in-fuerte/
http://answers.ros.org/question/58948/stage-tutorial-error-laser-model-type-not-found/

Originally posted by spmaniato on ROS Answers with karma: 1788 on 2016-08-31
Post score: 0

A:

Usually, the sonar message is sensor_msgs/PointCloud or sensor_msgs/PointCloud2, and laser message is sensor_msgs/LaserScan or sensor_msgs/PointCloud.
sensor_msgs/Range just contains a single range, so I think it is not used widely.

EDIT
I used the pioneer robot simulator Mobilesim, which is derived from stage. And there is a ros node rosaria which get info from Mobilesim and publish sensor_msgs/PointCloud and sensor_msgs/PointCloud2 for 16 sonar sensors on the pioneer robot.
Maybe you can refer to this.

Originally posted by Shay with karma: 763 on 2016-09-03
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by spmaniato on 2016-09-04:
According to the ROS API documentation, a sonar or IR sensor measurement falls under the Range message use cases: http://docs.ros.org/api/sensor_msgs/html/msg/Range.html Other simulators, such as STDR, do publish Range messages: http://wiki.ros.org/stdr_robot?distro=kinetic#Published_Topics
Comment by spmaniato on 2016-09-04:
I don't see how PointCloud is a good fit for sonar/IR. If it's a single sensor, then the points list will always be a singleton (thus why not use Range).
Comment by spmaniato on 2016-09-04:
If there are multiple sonar/IR sensors, they are probably placed in different parts of the robot (e.g. around the base) Therefore, they can't be associated with a single header.frame_id unless they are transformed to a common frame before publication.
Comment by spmaniato on 2016-09-04:
Regardless, stage_ros doesn't published PointCloud messages either. Only LaserScan http://wiki.ros.org/stage_ros#Published_topics
Comment by spmaniato on 2016-09-04:
@Shay I saw your edit. Interesting, I'll take a look. Thanks :-)

