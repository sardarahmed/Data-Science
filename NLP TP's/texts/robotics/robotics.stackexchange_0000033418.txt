Q:

AMCL and global localisation

Hello everyone, I'm trying to use the global localisation facilities of AMCL node (calling global_localization service), but every time I try to invoke it, AMCL stop working (publishing the corresponding transformation) and the CPU usage of the process jump up to 99~100%
Also, a similar problems occurs some times when AMCL is not well localised.
Any idea why?

Originally posted by Javier on ROS Answers with karma: 408 on 2011-08-02
Post score: 0

A:

I know how AMCL should work.
After looking at the code I realised that the current AMCL implementation, get stuck while sampling uniformly from the free space in the map for global localisation (it generated more than a million invalid samples before I killed it). A quick fix I did was to look for free space in the map, store the corresponding indices in an array, and sample from the index array uniformly.

Originally posted by Javier with karma: 408 on 2011-08-02
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by eitan on 2011-09-06:
The patch in the ticket referenced above has been applied to trunk of navigation and should go out in the next release. Hopefully, that'll fix things. Many thanks to Javier for the patch.
Comment by Brian Gerkey on 2011-09-02:
Not sure whether it came from Javier or not, but this looks like the appropriate patch: https://code.ros.org/trac/ros-pkg/ticket/5115.  We'll get it integrated soon.  If you try it out, please comment on the ticket to say whether it fixed the problem for you.
Comment by luca on 2011-09-01:
Are you thinking to submit a patch? I have the same problem :  amcl gets stuck when perform global localization!
Comment by Mac on 2011-08-03:
Sounds to me like you should submit a patch! (Also, probably accept your own answer)

