Q:

Integration of Kuka Agilus

Hey
I'm probably going to have access to a Kuka Agilus (http://www.kuka-robotics.com/en/products/industrial_robots/small_robots/kr6_r900_sixx/) and am currently working on the integration into ROS. So far, I've only found the Kuka Experimental (https://github.com/ros-industrial/kuka_experimental) which does not yet contain support for the Agilus but contains urdfs and meshes for other Kuka arms. Is there something similar for the Agilus?

Originally posted by PickBot on ROS Answers with karma: 123 on 2016-03-11
Post score: 0

Original comments
Comment by gvdhoorn on 2016-03-11:
Hi, I'm one of the maintainers of the kuka_experimental repository: you're right in that we don't have a 'support pkg' for the Agilus at the moment. They are not hard to make though. The repo does contain a ros_control RSI driver. Let me know if you need any assistance, I'd be happy to help.

A:

Update:
KR 6 Agilus support has been merged in the main indigo-devel branch (the kr6_agilus_support branch no longer exists). Currently only the R900 sixx variant is included in the robot support package. Work on other variants is underway (ros-industrial/kuka_experimental#39).

I've just pushed an experimental support package for the KR6 R900 sixx to the kuka_experimental repository in the kr6_agilus_support branch. Colouring / texturing can be improved later.
Let me know if that works for you, so we can merge it into the main repository.
Pay particular attention to the orientation of the tool0 frame, as I cannot check that.

Edit:

We have SolidWorks running, so I'll talk to the hardware guys next week. Are there any tutorials on how to compute the inertial elements?

I don't / didn't know of any tutorials, but a quick search gave me:

gazebosim.org - Inertial parameters of triangle meshes
URDF link mass inertia properties
SolidWorks teacher blog: SolidWorks to Gazebo Robot Simulation (and the linked pdf)

The SolidWorks to URDF Exporter can also calculate them for you, but that can be slightly involved.

Originally posted by gvdhoorn with karma: 86574 on 2016-03-12
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by PickBot on 2016-03-12:
Thanks a lot! We are testing it in the next week, delivery times will slow down the hardware tests, but at least we can start with the simulations
Comment by gvdhoorn on 2016-03-12:
Hm, for simulation with Gazebo we'd need to add inertial elements at least. I (obviously) don't have the real values, but SolidWorks can be used to get some estimates. I won't have access to SolidWorks for some time, so if you could take care of that I'd appreciate it.
Comment by PickBot on 2016-03-12:
We have SolidWorks running, so I'll talk to the hardware guys next week. Are there any tutorials on how to compute the inertial elements?
Comment by gvdhoorn on 2016-03-12:
Btw, just to be clear: if you don't need a dynamic simulation, but only want to do a reachability analysis, or do some initial planning with MoveIt, you don't need inertial elements. The plain URDF would be enough.
Comment by PickBot on 2016-03-14:
Could you tell me where you got the urdf and meshes for the R900? We'd like to compare its grasps with the R700 (or the R1100).
Comment by gvdhoorn on 2016-03-14:
The urdf I wrote myself, the meshes came from the KUKA site (the link you posted in your OP actually).
Comment by gvdhoorn on 2016-03-14:
If you use the R900 macro as a template, it shouldn't be too hard to add the others to the package.
I'd very much appreciate it if in that case you'd be willing to open a PR against kuka_experimental, so I can add those to the kuka_kr6_support package.
Comment by gvdhoorn on 2016-04-01:
@PickBot: can you say anything about the correctness of the model in the kuka_kr6_support package I uploaded to kuka_experimental? I'd like to merge it into the main development branch, but it would be nice to fix any significant issues with it before doing so.
Comment by cschindlbeck on 2016-05-31:
Did you manage to get it working?
I have an agilus and would like to know how you got it going since there is no documentation
Comment by gvdhoorn on 2016-05-31:
@T1000: can you be more specific? What do you mean with "get it working"? What are you referring to exactly? Also: it might be better to open a new question than to ask follow-up questions in the comments section.
Comment by BrettHemes_ on 2016-06-27:
I have R700 sixx data on the way.  It is currently going though our internal release system but hopefully I can get it up by the end of the week.
Comment by cschindlbeck on 2016-06-28:
@BrettHemes : Since the KR6 R700 is not included in the CAD data of the package, where you able to generate ros-compatible CAD data with the SolidworksToURDF plugin? or are you using something else?
Comment by BrettHemes_ on 2016-06-28:
@cschindlbeck I used Solidworks (but not the plugin) and, starting from Kuka's step files, put frames on each link according to Kuka's documentation and then exported each link wrt its respective origin as stl's.  I made collision stls using Meshlab and then wrote the URDF's by hand.
Comment by BrettHemes_ on 2016-06-28:
Actually the frames for each link were assigned via ROS-Industrial convention here

