Q:

MSG to TF : Quaternion Not Properly Normalized

Thank you for clicking, hello, I'm ros begginer.
I am currently using IMU for Slam mapping. But I get the ERR MSG(MSG to TF : Quaternion Not Properly Normalized).
What should I do??
$ rostopic echo /imu_data
header:
  seq: 122552
  stamp:
  secs: 1626158167
  nsecs: 547560799
  frame_id: "imu_link"
orientation:
  x: 126.18
  y: -40.61
  z: -174.65
  w: -40.63
orientation_covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
angular_velocity:
  x: 2.20086018676
  y: 0.0
  z: 0.0
angular_velocity_covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
linear_acceleration:
  x: 0.0
  y: 0.0
  z: 0.0
linear_acceleration_covariance: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

Originally posted by jjb1220 on ROS Answers with karma: 7 on 2021-07-13
Post score: 0

A:

We see this in your rostopic echo output:

orientation:

  x: 126.18
  y: -40.61
  z: -174.65
  w: -40.63

Is this coming from your IMU?
orientation is supposed to be a quaternion.
From the documentation:
Header header
geometry_msgs/Quaternion orientation
...

Values typically lie in [0, 1]. I'm not sure what to make of the values in your orientation field.
Are you setting it to Euler angles perhaps? That won't work.

Originally posted by gvdhoorn with karma: 86574 on 2021-07-13
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by jjb1220 on 2021-07-14:
oh thank you, The value I have is the orientation value. Can I replace this value with a Quaternion value??
Comment by gvdhoorn on 2021-07-14:
If you have a quaternion, you could use it to populate the field.
If you don't have a quaternion, but an Euler triplet, you could convert it to a quaternion using one of the available methods.
Comment by jjb1220 on 2021-07-15:
very Thank, I fixed it!
Comment by gvdhoorn on 2021-07-15:
What was your solution?
Comment by jjb1220 on 2021-07-15:
As a result, the above article did not fix it. I just got a hint. lol
I republished the values ​​provided by the IMU sensor I use according to the topic msg format.

