Q:

What's the best way to publish dynamic parameters to a topic when they change?

I'd like to publish dynamic parameters (from dynamic_reconfigure) to a topic from a C++ node when they change, for the purpose of recording parameter changes in a bag file. In Python, I just convert the dynamic parameters object to a string and publish it in the dynamic parameters callback. What's the best way to do something similar in C++, without having to manually copy each field of the param struct into a string?
Python:
def update_dynamic_params(self, dynamic_params, _level):
    # this always works and I don't have to change the code when the cfg file changes
    self.param_pub.publish(str(dynamic_params))

C++:
void MyNode::updateDynamicParams(const MyConfig& dynamic_params, uint32_t level)
{
  // I'd like to avoid manually copying each field of MyConfig struct into a string, especially because I'd have to update it each time the cfg file changes
}

Originally posted by somudrog on ROS Answers with karma: 55 on 2018-01-26
Post score: 1

Original comments
Comment by mohsen on 2018-01-29:
Do you want to publish only if the parameter changes?
Comment by somudrog on 2018-01-29:
Yes. Please see my updated question details.

A:

There are two topics /node_name/parameter_descriptions and /node_name/parameter_updates that are published when you run a dynamic reconfigure server. The latter publishes the parameters whenever you update them - which is what you need.

Originally posted by prem with karma: 46 on 2018-01-29
This answer was ACCEPTED on the original site
Post score: 3

