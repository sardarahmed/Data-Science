Q:

how to save 1 frame of registered depth image?

I tried modifying the image view nodes image_saver and extract_image but it still gives me error cant convert 16UC1 to BRG8.  I want to save it in png type.

Originally posted by dmngu9 on ROS Answers with karma: 150 on 2015-08-29
Post score: 0

A:

Just use:
rosrun image_view image_saver image:=/camera/depth_registered/image_raw _encoding:=16UC1 _filename_format:="image%04i.png"

Get sure the topic is published. Maybe you need to activate registration with dynamic reconfiguration.

Originally posted by MichaelKorn with karma: 1480 on 2015-08-31
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by lucasw on 2021-09-09:
For reference for anyone else finding this, if the encoding is 32FC1 then this works (and using 16UC1 will produce blank images)
rosrun image_view image_saver image:=/camera/depth_registered/image_raw _encoding:=32FC1 _filename_format:="image%04i.tif"

tif is needed to save as a float, png will crush it down to 8-bit.
Comment by MichaelKorn on 2021-09-09:
The specified encoding must of course match the data. When I wrote the answer 6 years ago, all sensors coded the depth with 2 bytes and thus the command above was correct for all /.../depth_registered/image_raw topcis. Unfortunately, I'm now in a completely different technological environment, but I'm a bit surprised that a sensor delivers 32FC1: In my time, only 11 to 12 (if I remember right) of the 16 bits were used, so there was still some space left.

