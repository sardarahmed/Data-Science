Q:

Warning "No map received" occurs

Hello.I'm trying to use slam_karto.
But when I try to see the visual map in the Rviz ,the map model warns 'no map recevied'.
I can see the LaserScan.And the dataset can run correctly  on 'gmapping slam_gmapping.
I'm sure the topic name is used rightly.
My step:
rosrun slam_karto  slam_karto
rosbag play catkin_ws/data/inter.bag

When I play the inter.bag,slam_karto prints these:
...
LaserRangeScan contains 180 range readings, expected 181
LaserRangeScan contains 180 range readings, expected 181
LaserRangeScan contains 180 range readings, expected 181
...

Up to now , I still confuse how to use slam_karto to run dataset.
Can you help me?

Originally posted by Miaow on ROS Answers with karma: 5 on 2018-07-24
Post score: 0

Original comments
Comment by stevemacenski on 2018-07-24:
It seems you dont have karto configured correctly.
Comment by Miaow on 2018-07-24:
Do you means I dont install karto correctly?I just clone karto_slam from github not open_karto,is it wrong?
Comment by stevemacenski on 2018-07-25:
Karto is fine but look at the error you're seeing. What does it mean?
Hint: some of the meta data in your laser scan message is probably incorrect. Here's where your error lies
https://github.com/ros-perception/open_karto/blob/254226d5ac42df1a7d7d0fb2a600bfe7c977e23c/src/Karto.cpp#L190
Comment by Miaow on 2018-07-25:
Thank you a lot!I think that's the key! I dont find corresponding dataset,so I download from there and transform '.clf' to '.bag'.
Could you tell me where I can download the right dataset?Thanks!

A:

(moving to answer so I can have more characters) I think you need to change the expected number of readings, clearly its off by 1. Alternatively, you can turn off this check since you have installed from source by commenting it out. My guess is that you're not getting the right number of readings and that checker is throwing out all the data. Your options are to 1) configure karto for the right number 2) pre-process the bag file data to have the meta data updated or add a 0 reading at end 3) comment out the check and let it pass with 1 less than expected.

Originally posted by stevemacenski with karma: 8272 on 2018-07-25
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Miaow on 2018-07-25:
Thanks for your attention and patience! I take your 2nd suggestion and solve it!

