Q:

Playback of rosbag with tf2-static transforms

Hello ROS users,
I've got a robot setup where (most) of the static transforms are defined by an URDF (which results in tf2-static tfs).
During a testrun we recoded plenty of bag-files which where splitted after 1 min.
The static transforms are only contained in the 1. bagfile.
(1. Question) Is there a way to record splitted bagfiles with static-tfs, that the static-tfs are contained in each bag-file?
Furthermore (2. question), if the bagfile containing the static-tfs is played, they are only received by rviz (and probably other nodes as well) if rviz was started prior the playback of the bag-file, which seems for me like a bug.
Is there a solution to fix that (e.g. have rviz receiving the static-tfs even when its started lets say 2sec after the rosbag playback started)?
regards
Tobias

Originally posted by Tobias Neumann on ROS Answers with karma: 179 on 2017-02-21
Post score: 2

A:

For splitting bags, you'll likely want to use the rosbag API to push the static transform message into the separate bags.
A few other resources: http://answers.ros.org/question/207551/how-to-save-static-transforms-in-bag-files/ which links to https://github.com/ros/ros_comm/issues/706 and some proposed solutions here: https://github.com/ros/ros_comm/issues/706
With respect to the startup order there are a few issues relating to latched values: https://github.com/ros/ros_comm/issues/685 https://github.com/ros/ros_comm/issues/679 and https://github.com/ros/ros_comm/issues/146 I'm not sure if any apply to your case without more details.

Originally posted by tfoote with karma: 58457 on 2017-02-21
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by gvdhoorn on 2017-02-22:\

And unfortunately rosbag doesn't support

does not support what? :)
Comment by Tobias Neumann on 2017-02-22:
Thanks for the answer, it seems like a common problem ;)
For the 2. case, the relevant output from rosbag info:
/tf_static          2 msgs    : tf2_msgs/TFMessage              (2 connections)

Comment by Tobias Neumann on 2017-02-22:
So if I understand your linked topics correctly, https://github.com/ros/ros_comm/issues/146 does apply and only the 2. msg is received by RVIZ (or other nodes) (the 1. is probably the URDF and the 2. is one tf2 static-tf-publisher)
Comment by tfoote on 2017-02-22:
@gvdhoorn sorry fragment from earlier draft.
Comment by tfoote on 2017-02-22:
@ToXeR if you have two static transform publishers that can be a problem with rosbag as it will only latch one on playback.

