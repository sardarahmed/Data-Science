Q:

How can I connect to a ROS master and the internet via two different networks?

Hello!
I am a student and we are currently working on a project where we use the RethinkRobotics Baxter robot.
Our self-made ROS-nodes run on a computer that is connected with the Baxter via a router (the Baxter robot is the ROS master). We also need an inte^rnet connection for our application. Therefore, we connect the computer to a wireless network with an internet connection. This second wireless network is necessary because the University does not allow to connect routers to their existing network.
To sum things up, we have one wired connection to a router to be connected with the ROS-master (Baxter robot) and a wireless network connection to get internet access.
Our problem is that we are not able to communicate with the Baxter robot if we are connected with both networks. If we disconnect with the wireless network, everything works fine.
Can anybody help is in that case? Is this a ROS-problem or simply a network setting in ubuntu?
We already tried many things but we did not solve the problem.
We are using ROS-kinetic and Ubuntu 16 LTS.
Best regards,
Gerald

Originally posted by gerald_tug on ROS Answers with karma: 3 on 2020-01-06
Post score: 0

A:

Is this a ROS-problem

No.

or simply a network setting in ubuntu?

yes.
Try enabling the "Use this connection only for resources on its network" setting for the NIC connected to Baxter.
This setting (image from here):

Using the command line (from How to toggle NetworkManager's “Use this connection only for resources on its network” option via command line):
nmcli connection modify enp3s0 ipv4.never-default true

make sure to use the correct name for the connection of course.

Originally posted by gvdhoorn with karma: 86574 on 2020-01-06
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by gvdhoorn on 2020-01-06:
Note that you'll also need to make sure -- if using hostnames instead of IPs -- that the DNS server you're using knows how to resolve the hostname(s) for your robot(s) to their IPs, or this likely won't work.
Comment by gerald_tug on 2020-01-06:
At first, thank you for your quick answer!
We already tried that. The command "rostopic list" shows us all published topics from the robot. But when we start a ros-node that subscribes a topic from the robot (e.g. robot/state) we get the following error: OSError: [Errno 110] Failed to get robot state on robot/state.
Comment by gerald_tug on 2020-01-06:
It is a timeout error, so we do not receive messages from the robot, but the topics are known
Comment by gerald_tug on 2020-01-06:
The roswtf command tells us there is an unknown host for all the topics from the robot and these noded are unconnected. How can I solve that?
Comment by gvdhoorn on 2020-01-06:\

The roswtf command tells us there is an unknown host for all the topics from the robot

that would seem to connect to my comment about "make sure you have a working DNS server if using hostnames".
As a test, you could see whether adding the appropriate information to your /etc/hosts file makes thing work. If it does, you should probably use a local DNS to resolve your robot's hostname, and have it forward queries for all other hosts.
If you're absolutely sure the robot will never ever get a different IP, then using /etc/hosts could be acceptable.
Comment by gerald_tug on 2020-01-06:
We added the following line to /etc/hosts:
"Ros-master ip address" "hostname given by rostopic info" and it worked.
Thank you!

