Q:

Viewing images inside messages

I am writing a system with a stereo camera, and would like to group left/right image pairs together as soon as possible, to reduce desynchronization due to asynchronous exchanges. It results that my messages are not Image themselves, but containing 2 Image. Is there a way to easily see images inside any kind of message ? Ideally something like rqt_image_view, but able to peek inside topic messages fields, rather than just show those that are of top-level type Image ?

Originally posted by gnurf on ROS Answers with karma: 20 on 2016-11-05
Post score: 0

Original comments
Comment by gvdhoorn on 2016-11-05:
Not an answer, just curious:

[..] as soon as possible, to reduce desynchronization due to asynchronous exchanges

is there something in your system that makes using header.stamp for this not possible? It is explicitly meant to synchronise msgs.
Comment by gnurf on 2016-11-05:
Synchronizing messages based on a timestamp would be much harder than just receiving pairs that I know by design have been generated together. The images are correlated at the source, I see as wasteful separating them, then doing additional efforts to re-correlate them.
Comment by gvdhoorn on 2016-11-05:
Synchronising subscriptions is built-in into the middleware (see wiki/message_filters - Policy-based Synchronizer. Using separate dataflows allows you to re-use existing msg defs, in this case Images and ..
Comment by gvdhoorn on 2016-11-05:
.. CameraInfo data.
I'm not claiming that what you're doing is wrong btw, just curious.
Comment by gvdhoorn on 2016-11-05:
Subscribing to a field inside a msg is not universally supported. rostopic echo .. can do it. The relay_field command in the topic_tools pkg can also do it. It can then also republish the field to another topic. That would allow you to use image_view to view the extracted image.
Comment by gnurf on 2016-11-05:
The synchro middleware looks cool, especially to sync separated sources, but in my case I think it would be adding unneeded complexity. Plus I'd like to annotate the images with custom fields, so that would make a lot of things to synchronize, just for the sake of having pure Image messages.
Comment by gnurf on 2016-11-05:
I managed to use echo, but am struggling with relay_field. (I saw your question about it on github, thanks for digging !). I think it's not very practical, from the looks of it: you'd have to explicit every single field of the Image you want to produce, it seems (and even that I didn't manage).

A:

Actually it works with simply topic_tools transform:
$ rosmsg show stereo_camera/RectifiedPair
std_msgs/Header header
  uint32 seq
  time stamp
  string frame_id
sensor_msgs/Image left
...

$ rosrun topic_tools transform /rectified_pair /rect_left sensor_msgs/Image

I'm not sure relay_field is necessary anymore. At least in my case, transform can relay simply enough.

Originally posted by gnurf with karma: 20 on 2016-11-10
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2016-11-10:
Nice. Good to hear it worked for you.
And thanks for reporting back.
Comment by gnurf on 2016-11-10:
Thanks for formatting my answer :)
Comment by gvdhoorn on 2016-11-11:
No problem :).

