Q:

"sensor_msgs::ImageConstPtr" encoding and type casting

Hi all
in my program I subscribe this topic "/camera/depth/image" and I want to use this image for visual optometry in Fovis.
I use this function parameter "sensor_msgs::ImageConstPtr depth_image" and the encoding of this topic  "depth_image->encoding.c_str()" is "32FC1" .
how cant I cast this type to  "const uint16_t" ?
and also for similar types like
" 8UC[1-4],8SC[1-4],16UC[1-4],16SC[1-4],32SC[1-4],32FC[1-4],64FC[1-4]" ?
thank you in advance
Ramin

Originally posted by raminzohouri on ROS Answers with karma: 26 on 2012-10-22
Post score: 0

A:

Take a look at cv_bridge tutorial to know how to properly convert images from one colorspace to another.
I would recommend you to make your package depend on cv_bridge, create an OpenCV image whose internal representation matches what Fovis expects and then pass the internal data representation to Fovis.
Be particularly attentive regarding how this data is accessed, allocated and freed, it may be necessary to make an additional copy of the image depending on the memory management strategy of both OpenCV and Fovis.

Originally posted by Thomas with karma: 4478 on 2012-10-23
This answer was ACCEPTED on the original site
Post score: 0

