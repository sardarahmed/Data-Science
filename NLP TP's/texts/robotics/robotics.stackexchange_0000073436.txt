Q:

Integer to Ros::time

Hi!
I have a txt file with encoderdata and timestamps. I am reading from this file and want to put this timestamps in variables declared as Ros::time, but I cant manage to get this right. Is it possible to do this?  The timestamp is coming from a msg like this.
ros::Time current_time_encoder;
current_time_encoder = msg->angle_timestamp1;

Originally posted by Bert on ROS Answers with karma: 41 on 2016-04-21
Post score: 0

Original comments
Comment by dornhege on 2016-04-21:
The essential question here is: What does the int mean?
Comment by Bert on 2016-04-21:
What do you mean?
Comment by dornhege on 2016-04-21:
What does a time stamp of "5" mean for you? You'll have to convert this correctly. Check @Martin Günther s answer for reasonable guesses.
Comment by Martin Günther on 2016-04-21:
Right. I (perhaps incorrectly) assumed that it's seconds/milliseconds/... since 1970-01-01 00:00. If not, you need to add/subtract an offset.

A:

So msg->angle_timestamp1 is an int, right?
If it's time in seconds (which is not a good idea, because the resolution is way too coarse), this should work:
ros::Time current_time_encoder(msg->angle_timestamp1);

If it's nanoseconds, this works:
ros::Time current_time_encoder(msg->angle_timestamp1 / 1e9, msg->angle_timestamp1 % 1e9);

Similarly 1e6 for microseconds, 1e3 for milliseconds.

Originally posted by Martin Günther with karma: 11816 on 2016-04-21
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by r7vme on 2019-03-08:
thanks! small correction: e.g. for milliseconds we also need to multiply by 1e6.
  int nsecs = (msg->angle_timestamp1 % 1000) * 1000 * 1000;
  int secs = msg->angle_timestamp1 / 1000;
  ros::Time state_timestamp(secs, nsecs);

