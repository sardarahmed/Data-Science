Q:

How to add multiple publishers to get 4 camera images?

Hai, I am writing a rospy code to publish images from 4 cameras. Currently, i trying it with my laptop camera.it works..but how to add multiple publishers for camera.
My code is...
#!/usr/bin/env python

import rospy
from sensor_msgs.msg import Image
import cv2
import numpy as np
from cv_bridge import CvBridge, CvBridgeError

def webcam_pub():
    pub = rospy.Publisher('webcam/image_raw', Image, queue_size=1)
    rospy.init_node('webcam_pub', anonymous=True)
    rate = rospy.Rate(60) # 60hz

    cam = cv2.VideoCapture(0)
    bridge = CvBridge()

    if not cam.isOpened():
         sys.stdout.write("Webcam is not available")
         return -1

    while not rospy.is_shutdown():
        ret, frame = cam.read()
    
        cv2.imshow("camera1",frame)
        cv2.waitKey(1)
        msg = bridge.cv2_to_imgmsg(frame, encoding="bgr8")
        if ret:
             rospy.loginfo("Capturing image failed.")
        
        pub.publish(msg)
        rate.sleep()

if __name__ == '__main__':
    try:
        webcam_pub()
    except rospy.ROSInterruptException:
      pass

I am using UBUNTU 16.04, KINETIC distro.

Originally posted by sudo_melvinyesudas on ROS Answers with karma: 54 on 2018-04-09
Post score: 1

Original comments
Comment by lucasw on 2018-04-09:
Cut and paste the text from the terminal window instead of using a screenshot.
Comment by sudo_melvinyesudas on 2018-04-09:
updated..sorry..

A:

Your code works, you are only interpreting the return value wrong. "ret" is set if the capturing worked!
If you add a cv2.waitKey(1) after the imshow, the image is also shown. You should also only create publishers or subscribers after you created the nodehandle.

Originally posted by NEngelhard with karma: 3519 on 2018-04-09
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by sudo_melvinyesudas on 2018-04-09:
thank you i add cv2.waitKey(1) camera is working..but it still showing [INFO] [1523284871.416538]: Capturing image failed.
[INFO] [1523284871.484537]: Capturing image failed.
Comment by NEngelhard on 2018-04-09:
Please do not change your question that much after you got the first feedback. Your code doesn't even contain the loginfo anymore...
Comment by sudo_melvinyesudas on 2018-04-09:
thank you so much, i add cv2.waitKey(1) camera is working..but how can i publish more camera images?
i mean i have 3 more cameras.
but when i remove log info, that works without error.

