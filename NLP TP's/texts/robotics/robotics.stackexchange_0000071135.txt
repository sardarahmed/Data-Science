Q:

Subscriber Node No Msg

I have used the sample code for Sub a topic in python but however I am trying to subscribe a topic which gives out a the coordinates, image and etc in single data stream from rtabmap/graph topic. However doing this is just doesn't print out any msg at all. Do i need to convert the data into str or something cause all i need is the raw data in text?
#!/usr/bin/env python
import rospy
from std_msgs.msg import String

def callback(data):
    rospy.loginfo(rospy.get_caller_id() + "I heard %s", data.data)
    
def listener():

    # In ROS, nodes are uniquely named. If two nodes with the same
    # node are launched, the previous one is kicked off. The
    # anonymous=True flag means that rospy will choose a unique
    # name for our 'listener' node so that multiple listeners can
    # run simultaneously.
    rospy.init_node('listener', anonymous=True)

    rospy.Subscriber("rtabmap/graph", String, callback)

    # spin() simply keeps python from exiting until this node is stopped
    rospy.spin()

if __name__ == '__main__':
    listener()

 

Originally posted by theizu on ROS Answers with karma: 3 on 2016-01-03
Post score: 0

A:

You need code that receives a message of the same name, and data type as the message that is transmitted.I suspect your code currently has the same topic name, but the format it is currently looking for (String) is not the same as what is being sent.
What format is the message rtabmap/graph ?
You would need to import that message type at the top of you code, and then create a listener of that type (so that the data can be parsed correctly when it arrives).
I can't see a topic of that type at http://docs.ros.org/api/rtabmap_ros/html/index-msg.html
but there is one called MapGraph.
Assuming there is a Graph type then at the top of the code you would import that definition rather than String
from rtabmap_ros.msg import Graph

rather than the line that imported String
and where you setup the the subscriber
rospy.Subscriber("rtabmap/graph", Graph, callback)

Inside your callback you would now be able to access individual bits of the message using the dot notation
data.partOfMessageYouAreTryingToAccess

based on the message definition that tells you the names of the parts of the message (I can't find the definition so don't know what there is.
if that doesn't work try MapGraph

Originally posted by nickw with karma: 1504 on 2016-01-03
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by theizu on 2016-01-04:
When i rostopic type /rtabmap/graph i get back rtabmap_ros/Graph
So i think its is own type. So how do I import this kind for example?
Comment by matlabbe on 2016-01-04:
Which version/example are you using? As on rtabmap_ros wiki:
$ roslaunch rtabmap_ros rgbd_mapping.launch
$ rostopic type /rtabmap/mapGraph
rtabmap_ros/MapGraph

