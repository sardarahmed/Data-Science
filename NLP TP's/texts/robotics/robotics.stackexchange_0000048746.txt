Q:

How to log a global path defined in "/map" frame

Hi, everyone.
I'm using navigation stack and would like to log a global path defined in "/map" fame.
How can I do it ?
Navigation stack's setup has already done and it works well.
I thought that a global path defined in "/map" frame could be got 
by subscribing "/move_base/TrajectoryPlannerROS/global_plan" topic
and transforming it from "/odom" frame to "/map" frame
with tf::TransformListener::transformPose() method.
However it didn't work well and I had a following error.
Frame id /map does not exist! Frames (1):
A result of "rosrun tf view_frames" shows that there is a "/map" frame.
However, a result of "rosrun tf tf_monitor" doesn't show a "/map" frame
(Perhaps, because it is not broadcasted continuously?).
How can I log a global plan (an array of geometry_msgs::PoseStamped) defined in a "/map" frame?
Thanks for your attention.

Originally posted by moyashi on ROS Answers with karma: 721 on 2013-02-26
Post score: 0

A:

One thing you could try is to wait a little for the transform:
listener.waitForTransform(destination_frame, original_frame, ros::Time(0), ros::Duration(10.0) );
This would wait at most 10 seconds for the transform to show up.
Of course that won't help if there is some fundamental issue with your tf setup. But generally for a new run node you should call waitForTransform before you try to use transforms for the first time. Also you should be sure to keep the transformlistener over the whole runtime of your node. If you require the tf for a special timestamp, be sure to adjust the third param of the waitForTransform call, also. ros::Time(0) means "the latest transform" in the tf-context.

Originally posted by Achim with karma: 390 on 2013-02-27
This answer was ACCEPTED on the original site
Post score: 0

