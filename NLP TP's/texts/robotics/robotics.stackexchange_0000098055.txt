Q:

How to avoid obstacles in op_planner

I have also this problem that seems the vehicle doesn't detect any obstacle. I am using ubuntu 1.18 ros melodic and Autoware 1.14 (I am also using LGSVL as simulator)
@cwhong yes I am using lidar for detection. and I used a ray ground filter for ground removal. it publishes point on /points_no_ground as you said. here is my screen: (yellow line is the road middle)

then I start "lidar_euclidean_cluster_detect with this setting(based on what i read i change the output frame to "map"):

and here is my screen, so far so good!, it detects the obstacle in front of it.:

But the /detection/lidar_detector/objects_markers is on the map frame and in rviz it was shown near the map frame far from the vehicle.

I turn on lidar_kf_contour_track and start op_global_planner:

Then start these nodes in order:
op_common_params
op_trajectory_generator then it creates the roll outs:

op_trajectory_evaluator
op_behavior_selector
pure_pursuit
twist_filter the vehicle starts to move but it does not consider the obstacle and it crashes. also what is noticeable is that there is nothing in the topic /tracked_object published by liar_kf_contour_track. basically, the open planner sees nothing!

and also nothing listen to the euclidean cluster!

I appreciate it if you have any idea.

Originally posted by Mohsen.ciw on ROS Answers with karma: 13 on 2021-01-14
Post score: 0

A:

I would like to suggest two ways.
First, it is said that no one is listening to the publish topic of lidar_euclidean_cluster_detect, but check if the topic is subscribed correctly in the source code of lidar_kf_contour_track. I changed the topic of sub_cloud_clusters to /detection/lidar_detector/cloud_clusters in the lidar_kf_contour_track source code.
Second, when looking at the rviz screen that is currently running, it seems that the map frame and the world frame are not combined. So make sure the overall tf is aligned. When you run rviz with the world frame, all maps, vehicles, and obstacles must appear to ensure that tf is properly aligned.
I've had the same error as yours. If you check the above two things, you will be able to solve it quickly!

Originally posted by cwhong with karma: 58 on 2021-01-14
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Mohsen.ciw on 2021-01-15:
Thank you very much
Comment by vivekgouravs on 2021-06-01:
@cwhong, I am also facing similar issue.
could you tell on how to change the topic of sub_cloud_clusters to /detection/lidar_detector/cloud_clusters in the lidar_kf_contour_track source code.
Comment by jayess on 2021-06-01:
Please don't use an answer to leave a comment/ask a question. Please create a new question and reference this one instead

