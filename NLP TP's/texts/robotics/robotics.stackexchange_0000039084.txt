Q:

Turtlebot unable to check laptop battery/BAT0/state

My laptop (Thinkpad X120e) reports its battery status in proc/acpi/battery/BAT1/ folder (which does have the status file), but NOT in BAT0 that turtlebot expects. How do I either change the Ubuntu environment to use BAT0 or change the minimal.launch script to look in the BAT1?

Originally posted by RobotRoss on ROS Answers with karma: 141 on 2012-03-27
Post score: 1

A:

I had the same problem.  Since the EeePC 1215N was discontinued, the Turtlebot now ships from I Heart Robotics with a Lenovo ThinkPad X130e.  This laptop's battery shows up in /proc/acpi/battery/BAT1, not BAT0 as is hardcoded into ROS electric's laptop_battery.py.  Also, the battery's capacity and charge state is reported in mW instead of mA, so just swapping BAT0 to BAT1 in the script doesn't fix it.
I've uploaded an updated version of electric's laptop_battery.py that should fix both of these problems:
http://www.cs.uaf.edu/~olawlor/2012/laptop_battery.py
I use a shell glob to find BAT*, and recognize either mW or mA for battery capacity. This should work with both EeePC and ThinkPad based turtlebots, but I only have the ThinkPad to test with. To use the new script, from your turtlebot:

wget http://www.cs.uaf.edu/~olawlor/2012/laptop_battery.py
sudo cp laptop_battery.py /opt/ros/electric/stacks/turtlebot/turtlebot_node/scripts/laptop_battery.py
sudo rosmake turtlebot_node
sudo service turtlebot restart

Originally posted by Dr. Orion Lawlor with karma: 56 on 2012-04-03
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by I Heart Robotics on 2012-04-07:
http://kforge.ros.org/turtlebot/trac/ticket/134
Comment by I Heart Robotics on 2012-04-07:
Thanks for the help! I have patchified things and made some adjustments. Please post feedback on the patch to the ticket.

