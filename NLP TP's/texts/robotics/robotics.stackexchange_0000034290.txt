Q:

care-o-bot simulator crashing gazebo

When I'm trying to run the care-o-bot simulation, the gazebo simulator briefly appears, then crashes with the error below.  I'm running ubuntu 10.4 with electric.
Any assistance would be appreciated.
Paul.
/tmp/buildd/ros-electric-simulator-gazebo-1.4.3/debian/ros-electric-simulator-gazebo/opt/ros/electric/stacks/simulator_gazebo/gazebo/build/gazebo/server/controllers/ControllerFactory.cc:99 : Exception: Failed to load libgazebo_ros_factory.so: libgazebo_ros_factory.so: cannot open shared object file: No such file or directory

/tmp/buildd/ros-electric-simulator-gazebo-1.4.3/debian/ros-electric-simulator-gazebo/opt/ros/electric/stacks/simulator_gazebo/gazebo/build/gazebo/server/Simulator.cc:326 : Exception: Failed to load the World
/tmp/buildd/ros-electric-simulator-gazebo-1.4.3/debian/ros-electric-simulator-gazebo/opt/ros/electric/stacks/simulator_gazebo/gazebo/build/gazebo/server/controllers/ControllerFactory.cc:99 : Exception: Failed to load libgazebo_ros_factory.so: libgazebo_ros_factory.so: cannot open shared object file: No such file or directory

Error Loading Gazebo
/tmp/buildd/ros-electric-simulator-gazebo-1.4.3/debian/ros-electric-simulator-gazebo/opt/ros/electric/stacks/simulator_gazebo/gazebo/build/gazebo/server/Simulator.cc:326 : Exception: Failed to load the World
/tmp/buildd/ros-electric-simulator-gazebo-1.4.3/debian/ros-electric-simulator-gazebo/opt/ros/electric/stacks/simulator_gazebo/gazebo/build/gazebo/server/controllers/ControllerFactory.cc:99 : Exception: Failed to load libgazebo_ros_factory.so: libgazebo_ros_factory.so: cannot open shared object file: No such file or directory

[gazebo-2] process has died [pid 12992, exit code -11].
log files: /home/myname/.ros/log/556b4bbc-df3e-11e0-ac48-0026c7674548/gazebo-2*.log

Originally posted by Paul0nc on ROS Answers with karma: 271 on 2011-09-14
Post score: 1

A:

Hi Paul, this is the same issue for libgazebo_ros_factory.so reported here.
If you are doing:
export ROBOT=cob3-1
export ROBOT_ENV=ipa-kitchen
roslaunch cob_bringup sim.launch

effectively launching gazebo with cob_gazebo_worlds/common/worlds/empty.world.
The released electric debs for cob_gazebo_worlds under cob_simulation stack contains references to the libgazebo_ros_factory.so plugins at the time of this post.  So if you have done
sudo apt-get install ros-electric-cob-*
source /opt/ros/electric/setup.bash

To setup your ros environment, then this error applies.  The deprecated plugins have indeed been removed from the world files in the development trunk, the fix will probably propagate out into the debs soon.  I would check the cob wiki or ping the stack maintainer to double check the release schedule.  Or in the meantime, you can run from an overlay of cob_simulation stack.
Also, I've changed gazebo's behavior such that it does not throw and exit if a controller plugin library is missing.  This change is released with simulator_gazebo 1.4.5.
John

Originally posted by hsu with karma: 5780 on 2011-09-14
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Paul0nc on 2011-09-15:
Thanks John.  I'll try this fix.
Comment by hsu on 2011-09-15:
@PaulOnc, I updated my answer above, is it possible you are running from the debian packages?  (I.e. if "rospack find cob_simulation" points to "/opt/ros/electric/stacks/cob_simulation").
Comment by Paul0nc on 2011-09-14:
John - regarding the git repository:  would I not have the most current repository I need given how recently I installed cob?  Also, I installed electric from scratch this evening.  What other repository could be out of date?   Thanks.  -Paul.
Comment by Paul0nc on 2011-09-14:
Hi John.  I installed the cob stack this evening.  When I look at cob_simulation/cob_gazebo_worlds/common/worlds, the .world files there all have libgazebo_ros_factor in them.  However, when I removed it (as suggested in your link above) from the ipa-kitchen.world, I get the same error results.  I'm not sure if that's the correct .world file however.
Comment by Paul0nc on 2011-09-14:
Thanks Hsu.  I'll give the reported solution a try.  To launch my simulation, I'm going through the sequence found at http://www.care-o-bot-research.org/software/tutorials/move-the-robot-in-simulation.  The command that finally elicits the error is: roslaunch cob_bringup sim.launch

