Q:

How to combine local costmap from laserscan and update with /costmap_updates

Hi all,
Ubuntu: 22.04
ROS: Humble
I'm trying to update my generated costmap based on several factors.
Currently, I'm getting a costmap based on the robots laser scan.
In order to update this map I've tried to use the costmap_updates message where I'm publishing a updated version of the costmap.
Sadly, this does not lead to the wanted behavior as the generated costmap flicks between the one from the laser scan and the one I'm publishing.
Is there any way to combine these two sources to one costmap?
I would really like to share some screenshots of the behavior I'm getting, but sadly my karma is not yet high enough.
Best regards!

Originally posted by ChWa02 on ROS Answers with karma: 3 on 2023-06-12
Post score: 0

A:

costmap_updates is an output message of the costmap2D program which is providing updates to just regions that were recently changed instead of sending the full costmap each iteration. It is NOT an input message to change the costmap nor should it be manually set. You should have your updates go through the costmap via plugin layers or other mechanisms to publish out the centralized environmental model.
The fact that you see flickering is because the costmap is overwriting your manually sent changes because the costmap knows nothing about them. Only rviz is using that, nothing else.

Originally posted by stevemacenski with karma: 8272 on 2023-06-12
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by ChWa02 on 2023-06-13:
Thank you very much for the hint!

