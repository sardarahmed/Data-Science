Q:

Are local copy of Costmaps used for recovery behaviours updated in real time?

Hello,
My ros distribution is ros kinetic.
I am currently implementing a recovery behavior in a similar fashion of the rotate recovery of the nav core.
During the init of the recovery i am doing a local copy of the costmap:
world_model_ = new base_local_planner::CostmapModel(*local_costmap_->getCostmap());

After that during the execution of the recovery I am doing several calls to footprintCost:
double footprint_cost = world_model_->footprintCost(x_cost, y_cost, theta, local_costmap_->getRobotFootprint(), 0.0, 0.0);

Is the cost-map interrogated by the footprintCost function updated in real time or is fixed at init time ?

Originally posted by Alrevan on ROS Answers with karma: 126 on 2020-02-05
Post score: 0

A:

Short answer: yes.
Longer answer:  https://github.com/ros-planning/navigation/blob/d00067cae219a5ab4486874ccc8912b63291d5d0/base_local_planner/src/costmap_model.cpp#L64
You'll see that you're taking a reference to the costmap on initialization and then working with it. When you getCost(), you're getting the current cost of the costmap you referenced at initialization which is continuing to update in a background thread.

Originally posted by stevemacenski with karma: 8272 on 2020-02-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2020-02-05:
Would you not want to link to https://github.com/ros-planning/navigation/blob/d00067cae219a5ab4486874ccc8912b63291d5d0/base_local_planner/src/costmap_model.cpp#L64 instead?
Comment by stevemacenski on 2020-02-05:
Yes :-) sorry, that was a mixture of googling and not looking close enough
Comment by gvdhoorn on 2020-02-06:
Updated the link.

