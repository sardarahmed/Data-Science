Q:

How to change topic name in function call?

Hello, I am trying to run the same code on different robots, and they have different tf prefixes.
So instead of making n files, I want to just change the prefix in the function, here called ns
def movebase_client(ns, x, y):

    client = actionlib.SimpleActionClient('ns/move_base', MoveBaseAction)
    client.wait_for_server()

Any idea?

Originally posted by WarTurtle on ROS Answers with karma: 170 on 2021-11-16
Post score: 1

Original comments
Comment by osilva on 2021-11-16:
You could pass ns as a string and concatenate /move_base
Comment by WarTurtle on 2021-11-16:
Yes, that worked, thanks.

A:

I made it work doing this
def movebase_client(ns, x, y):

    client = actionlib.SimpleActionClient(ns + '/move_base', MoveBaseAction)
    client.wait_for_server()

and then when you call the function,
movebase_client('Bot1', 4.0, 4.0)

This, however, does not allow me to change the values in the launch file. For this, I had to use the param server.
In the python file, I wrote this:
x = rospy.get_param('~x_position')
y = rospy.get_param('~y_position')

client = actionlib.SimpleActionClient('move_base', MoveBaseAction)
client.wait_for_server()

and then in the launch file I could then change the values doing this:
  <node pkg="okg" name="name" type="name.py" output="screen">
      <remap from="move_base"       to="Bot1/move_base"/>
      <param name="~x_position"      type="double"      value="2.0"/>
      <param name="~y_position"      type="double"      value="2.0"/>
  </node>

Thanks, osilva and Geoff.

Originally posted by WarTurtle with karma: 170 on 2021-11-16
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by osilva on 2021-11-16:
Great. You can accept your answer now by clicking on the checkmark button.

