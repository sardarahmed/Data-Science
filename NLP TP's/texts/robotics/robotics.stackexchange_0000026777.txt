Q:

ros_controllers problems

Hi,
I am writing a description of my robot combining xacros, gazebos and yamls files. I have some troubles with my controllers and sensors.
About sensors:
I am tring to add an IMU in my robot. I have a link "imu_link" in my xacro and a fixed joint "imu_joint" between imu_link and another link in my robot. Now, in my robot.gazebo file I have the following:

  
    imu_link
    1
    1000.0
    /COMAN
    coman_imu
  

and in my robot_control.yaml I have:

  imu_sensor_controller:
    type: imu_sensor_controller/ImuSensorController
    publish_rate: 50

In the launch file for the controller I use the controller_manager spawner to spawn the imu_sensor_controller. When I launch it I have the following error from GAZEBO:

[ERROR] [1380671129.134196839]: This controller requires a hardware interface of type 'hardware_interface::ImuSensorInterface'. Make sure this is registered in the hardware_interface::RobotHW class.

I think I have to put this in my transmission.urdf.xacro but I do not well know where is he syntax for the imu hardware interface. Do you have some suggestion? Maybe I am wronging something?
Thank you for your help.
Enrico

Originally posted by Enrico Mingo on Gazebo Answers with karma: 121 on 2013-10-01
Post score: 0

A:

Solved using the following:
 <gazebo>
    <plugin name="quadrotor_imu_sim" filename="libhector_gazebo_ros_imu.so">
      <updateRate>100.0</updateRate>
      <bodyName>imu_link</bodyName>
      <topicName>COMAN/raw_imu</topicName>
      <rpyOffsets>0 0 0</rpyOffsets> <!-- deprecated -->
      <gaussianNoise>0</gaussianNoise>  <!-- deprecated -->
      <accelDrift>0.5 0.5 0.5</accelDrift>
      <accelGaussianNoise>0.35 0.35 0.3</accelGaussianNoise>
      <rateDrift>0.1 0.1 0.1</rateDrift>
      <rateGaussianNoise>0.05 0.05 0.015</rateGaussianNoise>
      <headingDrift>0.1</headingDrift>
      <headingGaussianNoise>0.05</headingGaussianNoise>
    </plugin>
  </gazebo>
</robot>

Originally posted by Enrico Mingo with karma: 121 on 2013-10-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by psei on 2013-10-10:
Does this IMU plugin simulate realistic data? I tried to simulate my IMU with "libgazebo_ros_imu.so", but the simulated data doesnt look very good....
Comment by nkoenig on 2013-10-10:
Can you start a new question, and elaborate on "doesn't look very good"?
Comment by psei on 2013-10-14:
Hello nkoenig, see http://answers.gazebosim.org/question/4717/imu-sensor-plugin-libgazebo_ros_imuso-strange-data/

