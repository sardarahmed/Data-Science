Q:

ROS Answers SE migration: robot rviz tf

Hi,
I am new to ROS. I tryed to use the Pioneer 3-AT urdf model provided in the p2os-Master stack.If I have a frame tree for this robot, and want to show this robot in a fixed map, in Rviz, I would only have to broadcast its transform with parent link: static_map, for example, and child link: base_link and publish the joint states for the joints that are not fixed, if I have robot_state_publisher running. Is that correct?
I checked in the tf topic. All transforms are being published as expected, but in Rviz, when I put the static_map as fixed frame, it says there are only transforms for the base_link and the static_map. Do I need to broadcast all the transforms with the static_map as the parent link? I did one publisher priorly which I only broadcasted the transform for the static_map and published the joints that were not fixed, and that worked.
I had divided the nodes to be launched in 2 diferent launch files, when I tryed to launch then all in one launch file, in Rviz, it says there are tansforms for all, but only the transform for base_link is correct, all others stay on ground beneath the base_link frame.
What should I do?

Originally posted by Ohashi on ROS Answers with karma: 58 on 2013-12-26
Post score: 0

A:

I just added the value for w in the transform.rotation with static_map as parent and it worked, I don't know why tough.

Originally posted by Ohashi with karma: 58 on 2013-12-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by tfoote on 2013-12-27:
You cannot do transform math with invalid quaternions. The transforms will get dropped instead of being integrated and giving bad results.

