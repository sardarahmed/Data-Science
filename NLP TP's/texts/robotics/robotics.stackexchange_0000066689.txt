Q:

Xtion doesn't work on ROS indigo

roslaunch openni2_launch openni2.launch camera:=camera depth_registration:=true load_driver:=true publish_tf:=true

shows the following:
... logging to /home/krist/.ros/log/26516c56-d4e7-11e4-863b-bcee7b784f87/roslaunch-pan-hnu-2867.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://pan-hnu.local:41836/

SUMMARY
========

PARAMETERS
 * /camera/camera_nodelet_manager/num_worker_threads: 4
 * /camera/depth_rectify_depth/interpolation: 0
 * /camera/driver/auto_exposure: True
 * /camera/driver/auto_white_balance: True
 * /camera/driver/color_depth_synchronization: False
 * /camera/driver/depth_camera_info_url: 
 * /camera/driver/depth_frame_id: camera_depth_opti...
 * /camera/driver/depth_registration: False
 * /camera/driver/device_id: #1
 * /camera/driver/rgb_camera_info_url: 
 * /camera/driver/rgb_frame_id: camera_rgb_optica...
 * /rosdistro: indigo
 * /rosversion: 1.11.10

NODES
  /camera/
    camera_nodelet_manager (nodelet/nodelet)
    depth_metric (nodelet/nodelet)
    depth_metric_rect (nodelet/nodelet)
    depth_points (nodelet/nodelet)
    depth_rectify_depth (nodelet/nodelet)
    driver (nodelet/nodelet)
    points_xyzrgb_sw_registered (nodelet/nodelet)
    rectify_color (nodelet/nodelet)
    register_depth_rgb (nodelet/nodelet)
  /
    camera_base_link (tf/static_transform_publisher)
    camera_base_link1 (tf/static_transform_publisher)
    camera_base_link2 (tf/static_transform_publisher)
    camera_base_link3 (tf/static_transform_publisher)

auto-starting new master
process[master]: started with pid [2879]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 26516c56-d4e7-11e4-863b-bcee7b784f87
process[rosout-1]: started with pid [2892]
started core service [/rosout]
process[camera/camera_nodelet_manager-2]: started with pid [2895]
process[camera/driver-3]: started with pid [2896] 
process[camera/rectify_color-4]: started with pid [2897]
process[camera/depth_rectify_depth-5]: started with pid [2898]
process[camera/depth_metric_rect-6]: started with pid [2899]
process[camera/depth_metric-7]: started with pid [2900]
process[camera/depth_points-8]: started with pid [2901]
process[camera/register_depth_rgb-9]: started with pid [2902]
process[camera/points_xyzrgb_sw_registered-10]: started with pid [2933]
process[camera_base_link-11]: started with pid [3014]
process[camera_base_link1-12]: started with pid [3041]
process[camera_base_link2-13]: started with pid [3067]
process[camera_base_link3-14]: started with pid [3082]
[ERROR] [1427504999.237676059]: Skipping XML Document "/opt/ros/indigo/share/camera1394stereo/camera1394stereo_nodelet.xml" which had no Root Element.  This likely means  the XML is malformed or missing.
[ INFO] [1427504999.254993443]: Initializing nodelet with 4 worker threads.
[ INFO] [1427505000.433668375]: Device "1d27/0601@3/4" found.
Warning: USB events thread - failed to set priority. This might cause loss of data...
process[camera/depth_rectify_depth-5]: started with pid [5475]
process[camera/depth_metric_rect-6]: started with pid [5489]
process[camera/depth_metric-7]: started with pid [5503]
process[camera/depth_points-8]: started with pid [5517]
process[camera/depth_registered_rectify_depth-9]: started with pid [5531]
process[camera/points_xyzrgb_hw_registered-10]: started with pid [5545]
process[camera_base_link-11]: started with pid [5559]
process[camera_base_link1-12]: started with pid [5605]
process[camera_base_link2-13]: started with pid [5619]
process[camera_base_link3-14]: started with pid [5630]

As you can see above, the error occurs:
Skipping XML Document "/opt/ros/indigo/share/camera1394stereo/camera1394stereo_nodelet.xml" which had no Root Element.  This likely means  the XML is malformed or missing.

I cd to the directory and found no such file, so I downloaded the file from github and put it there.
setting /run_id to 4c371232-d4eb-11e4-82f8-bcee7b784f87
process[rosout-1]: started with pid [7709] 
started core service [/rosout]
process[camera/camera_nodelet_manager-2]: started with pid [7726]
[ INFO] [1427506779.632020419]: Initializing nodelet with 4 worker threads.
process[camera/driver-3]: started with pid [7747]
process[camera/rectify_color-4]: started with pid [7763]
[ INFO] [1427506779.706106656]: Device "1d27/0601@3/4" found.
Warning: USB events thread - failed to set priority. This might cause loss of data...
process[camera/depth_rectify_depth-5]: started with pid [7792]
process[camera/depth_metric_rect-6]: started with pid [7806]
process[camera/depth_metric-7]: started with pid [7820]
process[camera/depth_points-8]: started with pid [7834]
process[camera/depth_registered_rectify_depth-9]: started with pid [7848]
process[camera/points_xyzrgb_hw_registered-10]: started with pid [7862]
process[camera_base_link-11]: started with pid [7884]
process[camera_base_link1-12]: started with pid [7923]
process[camera_base_link2-13]: started with pid [7936]
process[camera_base_link3-14]: started with pid [7950]

however, the problem was still unsolved, no error occurred any more but the warning still occurs:
......
[ INFO] [1427506592.883012236]: Device "1d27/0601@3/4" found.
Warning: USB events thread - failed to set priority. This might cause loss of data...
......

Then I run:
rosrun image_view image_view image:=/camera/rgb/image_color

No image showed, the information showed above updated:
[ INFO] [1427507860.042468828]: Starting color stream.
[ INFO] [1427507860.193173720]: using default calibration URL
[ INFO] [1427507860.193307318]: camera calibration URL: file:///home/krist/.ros/camera_info/rgb_PS1080_PrimeSense.yaml
[ INFO] [1427507860.193465076]: Unable to open camera calibration file [/home/krist/.ros/camera_info/rgb_PS1080_PrimeSense.yaml]
[ WARN] [1427507860.193522626]: Camera calibration file /home/krist/.ros/camera_info/rgb_PS1080_PrimeSense.yaml not found.

How to solve it, any suggestions?

Originally posted by kristpan on ROS Answers with karma: 1 on 2015-03-27
Post score: 0

Original comments
Comment by joq on 2015-03-28:
The camera1394stereo message likely has nothing to do with your openni2 problem.
Comment by kristpan on 2015-03-29:
I don't know why these two packages are related, maybe it's because xtion has mutiple cameras.

A:

My xtion/openni2 doesn't have /camera/rgb/image_color, does rostopic show this topic? Can you echo it? For rgb image the following works for me:
rosrun image_view image_view image:=/camera/rgb/image_raw

Originally posted by Humpelstilzchen with karma: 1504 on 2015-03-28
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by kristpan on 2015-03-29:
yeah, i used rostopic to list all topics, I changed to another topic, but no image showed either.
Comment by Humpelstilzchen on 2015-03-30:
Does rostopic echo work? Do the openni samples work as the same user?

