Q:

Message MD5 generation

Hi all,
for my ROS project I need to get MD5 checksum of messages from their .msg files. Following documentation this should be quite simple. I just get the .msg file with:

comments and whitespace removed;
package names of dependencies
removed;
constants reordered ahead of other declarations;
MD5 text of dependency concatenated,

and calculate MD5 on it.
So, for std_msgs/String, the MD5 should be calculated on:
stringdata
and the MD5 be:
cb6d1e784571bbf6f218efb801675fb6
Instead the generated message in my Hydro installation has MD5 (rosmsg md5 std_msgs/String):
992ce8a1687cec8c8bd883ec73ca41d1
Can one help me to understand what is wrong?
Thanks a lot
Alessandro
EDITED
See https://github.com/ros/genmsg/blob/indigo-devel/src/genmsg/gentools.py and https://github.com/ros/genmsg/blob/indigo-devel/src/genmsg/msgs.py
Thanks to gvdhorn!

Originally posted by afranceson on ROS Answers with karma: 497 on 2015-01-21
Post score: 1

A:

Not a real answer, but have you perhaps considered using genmsg for this? See genmsg/test/test_genmsg_gentools.py for some examples.

Edit: just to be complete:
msg_context = genmsg.msg_loader.MsgContext.create_default()
full_type_name = genmsg.gentools.compute_full_type_name(package_name, os.path.basename(input_file))
spec = genmsg.msg_loader.load_msg_from_file(msg_context, input_file, full_type_name)
search_path = genmsg.command_line.includepath_to_dict(include_path)
genmsg.msg_loader.load_depends(msg_context, spec, search_path)

md5sum = genmsg.gentools.compute_md5(msg_context, spec)

Mostly creative copy/paste from the genmsg package.

Originally posted by gvdhoorn with karma: 86574 on 2015-01-21
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by gvdhoorn on 2018-06-09:
Update: rosmg md5 $pkg/$msg should also work.

