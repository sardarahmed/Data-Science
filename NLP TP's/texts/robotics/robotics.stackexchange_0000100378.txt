Q:

MoveIt!2 add Pointcloud2 to OccupancyMapMonitor

First my Setup:

Ubuntu 20.04
ROS2 Foxy from Debian    Packages
MoveIt!2 ROS2 UR Driver from https://github.com/UniversalRobots/Universal_Robots_ROS2_Driver
own Node for Launching RViz with moveIt and the Robot Driver connected to the URSimulator for Linux: all working
own Node for Receiving a Pointcloud over Network from an RGB-D Camera publishing it as Pointcloud2 in a topic:
I can see  the Pointcloud in RViz

I would like to use the Pointcloud as "Collision Object" in MoveIt so I tried to use the Perception Pipeline Tutorial from here: https://ros-planning.github.io/moveit_tutorials/doc/perception_pipeline/perception_pipeline_tutorial.html
But I can't transfer it from Moveit1 to Moveit2. I tried to find the sensor_manager.launch file or to create it, but got stuck here. Is there another way to give the PointCloud2 the OccupancyMapMonitor?
Thank you for your efforts.
Florian

Originally posted by FlorianSp on ROS Answers with karma: 46 on 2021-10-22
Post score: 0

A:

I got a hint on this port of the Perception Tutorial (and others) https://github.com/RoboticsYY/moveit_tutorials and found the way to activate the OccupancyMapMonitorUpdater for Pointclouds. Just these Settings in the Launch file:
octomap_config = {'octomap_frame': 'camera_rgb_optical_frame', 
                      'octomap_resolution': 0.05,
                      'max_range': 5.0}

octomap_updater_config = load_yaml('avoid_obstacle_scene', 'config/pointcloud_octomap.yaml')

And then add the new two parameters to your move_group_node.

Originally posted by FlorianSp with karma: 46 on 2021-10-29
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by khairulm on 2022-09-07:
can you please show us the content in pointcloud_octomap.yaml?
Comment by FlorianSp on 2022-09-07:
Sorry, I haven't any Access to the project anymore. But I can just remember you can find it very easy by searching online.
Comment by ArvindKP on 2023-01-04:
@ FlorianSp
Did you get any specific way/solution for the above mentioned problem?
Thank you

