Q:

Roslaunch with supervisor

Hello, I am using supervisor  and roslaunch in order to start my turtlebot. Running the launch file on the robot directly works fine... but when I try to run it using supervisor it cannot locate the nodes.
After asking around and looking for answers on the internet I found that the problem could lie on the setup of my environment variables.
I solved many of the first problems by setting up the PYTHON_PATH and ROS_PACKAGE_PATH environment variables  in my supervisor configuration file...but  I still get these errors on my error.log file:
ERROR: cannot launch node of type [map_server/map_server]: can't locate node [map_server] in package [map_server]

ERROR: cannot launch node of type [map_server/map_server]: can't locate node [map_server] in package [map_server]

ERROR: cannot launch node of type [rosbridge_server/rosbridge_websocket]: can't locate node [rosbridge_websocket] in  package [rosbridge_server] 

ERROR: cannot launch node of type [rosapi/rosapi_node]: can't locate node [rosapi_node] in package [rosapi] Unhandled exception in thread started by sys.excepthook is missing lost sys.stderr

Does anyone have experience working with supervisor and ROS and could help me with this problem?
Thanks!

Originally posted by Irod on ROS Answers with karma: 3 on 2017-05-05
Post score: 0

A:

You also need to set CMAKE_PREFIX_PATH (so that ROS can find nodes built with catkin), LD_LIBRARY_PATH (so that binaries can find their dynamic libraries) and maybe a few other environment variables too.
If possible, it would be better to have supervisord source the setup.bash or setup.sh file for your ROS workspace. This will probably be easier than setting the environment variables manually, and it will make sure that you don't accidentally forget to set anything.

Originally posted by ahendrix with karma: 47576 on 2017-05-05
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Irod on 2017-05-09:
Thanks for the answer. I solved it by setting the environment variables manually...for now, because I still don't know how to source the setup.bash or setup.sh file with supervisord and I agree that would be better.

