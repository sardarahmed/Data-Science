Q:

ROS Answers SE migration: octomap_server

Hi everybody
I have a [XYZ] point-cloud coordinates from a laser in ROS, I can actually visualize the map over rviz. However, I would like to visualized it over octomap in vriz, is that possible? do you have a small function I can get inspired?
I was told that I can do it with octomap_server, however I have no clue how to do it, dont you have a general steps how it can be implemented or even better some code I can get :)
Any help will be really appreciate it
Regards

Originally posted by acp on ROS Answers with karma: 556 on 2011-12-07
Post score: 2

A:

If you want to visualize an existing OctoMap file (.bt or .ot) just load it with "octomap_server filename.bt". You can then visualize the occupied voxels in RViz by adding a MarkerArray display and selecting the topic "occupied_cells_vis". The default frame is "map". However, as Felix mentioned, visualizing the file in "octovis" looks nicer and is more efficient.
If you want to accumulate laser scans "live", have a look at the commented launch file of octomap_server. You need to remap the "cloud_in" topic to your scan topic.
For API access to insert pointclouds, look at the code in octomap_ros.

Originally posted by AHornung with karma: 5904 on 2011-12-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by acp on 2011-12-11:
Then I open Rviz and I add a MarkerArray with topic /occupied_cells_vis_array. But I can not see anything in Rviz, I am probably doing something wrong. In advance thank you
Comment by acp on 2011-12-11:
Hi, The launch file in octomap_server just Listens to a incoming PointCloud2 data and incrementally builds an octomap. Well, I have publish a sensor_msgs::PointCloud2 cl; to test it. I have remap the line in the launch file     .
Comment by acp on 2011-12-09:
In advance thank you, I will try that :)
Comment by AHornung on 2011-12-09:
So the answer is in Felix's and my answer: publish the pointcloud, use octomap_server (look at the launch file) on your pointcloud topic, and enable the MarkerArray display in RViz to see the map built with OctoMap.
Comment by acp on 2011-12-09:
Well, sorry for not making myself clear enough. I have a node that broadcast a transformation from my /laser to  base_link. And, I have another node that listen  the laser  /scan topic and then I apply transformLaserScanToPointCloud("/bl", *scan, cl, tfListener_); At this moment I can visualize Poincloud/cl in rviz. what I really want is the following. 1.- I want to fused the [cl.points[i].x, cl.points[i].y, cl.points[i].z] using octomap-ROS to make and entire map of the environment. But I would like to visualize that process in vriz, I mean I would like to see the occupied voxels of the map while iam constructing the map. I hope this time is more clear and in advance thank you for any help.
Comment by AHornung on 2011-12-08:
Please update your original question with the more detailed info, it's hard to answer here and get what you actually want to achieve. 1: Just like octomap without ros, see http://octomap.sf.net/ 2: see answer of Felix 3: you don't need OctoMap to visualize pointclouds, just add a PointCloud2 display
Comment by acp on 2011-12-08:
Well, in advance thank you for your replay. I have a "sensor_msgs::PointCloud cl". I have installed octomap_mapping over svn.    I would like the following: 1.-How can I test octomap in ROS?.  2.- I dont have any map .bt or .ot., how can I generate this kind of maps in ROS 3.- I want to visualize the PointCloud cl almost in real time in rviz. Thank you.
Comment by Scott on 2012-04-04:
Hi acp,I am interested to do something similar to what you are trying to accomplish. Did you get this to work yet? -Scott
Comment by AHornung on 2012-04-05:
There is a tf MessageFilter which waits for transforms of the pointcloud's frame into the map frame you set in octomap_server. Is that set correctly and the tf is available? Otherwise you can use rxconsole and set octomap_server's log level to debug to see what's going on.
Comment by Phelipe on 2015-02-23:
How can i load this .bt or .ot file in "octomap_server" ?

