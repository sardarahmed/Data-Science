Q:

Monocular Vslam

I am unable to get vslam_system 's run_mono to work on the 3VD & Versailles Rond datasets. It says "Returning a small amount of good points: 0, minGoodPts = 30".
Also after running SBA the error is of the order 10^3.
"Running SFMFinal error: 2074.372325"
What could be going wrong? Has anyone managed to run "run_mono" on any published dataset?

Sorry, I did not post additional detail last time. 
I am running a Ubuntu 10.10 with ROS diamondback. I installed the latest stable version of vslam stack and tried to run the monocular pipeline. 
The previous post was, however, from a fedora 14 system and used run_mono executable provided with the ros package vslam_stack.  
This time, I have compiled a small snippet of code that adds frames to an instance of VslamSystemMono using the addFrame function specified in the api. I initially encountered the same error as mentioned link:here 
I corrected this problem with the same fix provided yesterday by link. 
The monocular pipeline is however unable to find good matches. The number of inliers is ~0-4 and this is less than the minimum number of inliers(30). Also the error after running SBA is very high (~1000's). 
I used camera parameters - 1.2 1.2 0 0 1 
Posted here is the output corresponding to two calls to "addFrame" function of VslamSystemMono class. 

[ INFO] [1314008351.193699104]: Added frame to Mono Vslam system
called PoseEstimator2d::estimate for frames 1 and 2
Number of points: 92, number of matches: 100
extractPnPData: frame1.pts.size() = 92
extractPnPData: good points 0
Running SFM
Final error: 33044.761933
Dumping SFM returned r
3.128635 
-0.279981 
-0.019429
Dumping SFM return T
267.161316 
3770.465820 
9.712806 
The number of epipolar inliers: 53
53 points before filtering
35 points left after filtering
sba got 35 points
Node projection matrix
1.2   0   0  -0
  0 1.2   0  -0
  0   0   1  -0
Node projection matrix
    1.18084   -0.213058  -0.0148276     320.594
  -0.213064    -1.18093 0.000851121     4524.56
  -0.012286  0.00149597   -0.999923     9.71281
Added 35 points, 35 tracks
sba.tracks.size = 35
costProj done
sba.tracks.size = 35
costProj done
Errors after sba initialization: 168.142901 896.277610
[SBAsys] Cameras: 2   Points: 35   Projections: 70  Hessian elements: 105
[SBAsys] Average 2 projections per track and 35 projections per camera
[SBAsys] Checking camera order in projections...ok
[SBAsys] Number of invalid projections: 0
[SBAsys] Number of null tracks: 0  Number of single tracks: 0   Number of double tracks: 35
[SBAsys] Number of disconnected cameras: 0
[SBAsys] Number of cameras with  2 pixels error
trans = 404.855372 3752.171826 10.248718
29 points left after sba
finished pose estimation
Dumping tvec in SetPose
0.070958 
0.997476 
0.002562 
Dumping rvec in SetPose
3.128713 
-0.279940 
-0.016027 
Returning a small amount of good points: 0, minGoodPts = 30
[Stereo VO] Inliers: 0  Nodes: 3   Points: 0

******** Bad image match:

[ INFO] [1314008357.916249624]: Added frame to Mono Vslam system
called PoseEstimator2d::estimate for frames 2 and 3
Number of points: 117, number of matches: 141
extractPnPData: frame1.pts.size() = 117
extractPnPData: good points 0
Running SFM
Final error: 7776.050781
Dumping SFM returned r
0.955279 
0.361593 
2.122593 
Dumping SFM return T
301.989868 
140.030594 
-317.002808 
The number of epipolar inliers: 67
67 points before filtering
60 points left after filtering
sba got 60 points
Node projection matrix
1.2   0   0  -0
  0 1.2   0  -0
  0   0   1  -0
Node projection matrix
 -0.511177  -0.637589   0.878736    362.388
  0.892576  -0.799739 -0.0610421    168.037
  0.515055   0.523011   0.679101   -317.003
Added 60 points, 60 tracks
sba.tracks.size = 60
costProj done 
sba.tracks.size = 60
costProj done 
Errors after sba initialization: 1248373.385407 201570.986451
[SBAsys] Cameras: 2   Points: 60   Projections: 120  Hessian elements: 180
[SBAsys] Average 2 projections per track and 60 projections per camera
[SBAsys] Checking camera order in projections...ok
[SBAsys] Number of invalid projections: 0
[SBAsys] Number of null tracks: 0  Number of single tracks: 0   Number of double tracks: 60
[SBAsys] Number of disconnected cameras: 0
[SBAsys] Number of cameras with  2 pixels error
trans = 187.759247 419.573730 1.258722
60 points left after sba
finished pose estimation
Dumping tvec in SetPose
0.656970 
0.304632 
-0.689630
Dumping rvec in SetPose
0.955279 
0.361593 
2.122593 
Returning a small amount of good points: 0, minGoodPts = 30
[Stereo VO] Inliers: 0  Nodes: 4   Points: 0

******** Bad image match:

Originally posted by M Aravindh on ROS Answers with karma: 11 on 2011-05-05
Post score: 1

Original comments
Comment by tfoote on 2011-06-17:
You need to include more information for us to be able to help you.  Please see the guidelines for asking questions.  http://www.ros.org/wiki/Support#Guidelines_for_asking_a_question

A:

vslam is unsupported experimental research code, and more specifically, the monocular pose estimation only works for specific types of camera motions (i.e., will not work on a dataset with unconstrained motion).
Unfortunately, there are no current plans to improve the functionality of monocular vslam. However, patches are welcome.

Originally posted by Helen with karma: 261 on 2011-09-02
This answer was ACCEPTED on the original site
Post score: 0

