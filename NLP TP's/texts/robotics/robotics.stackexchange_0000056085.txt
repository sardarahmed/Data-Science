Q:

[Solved] publisher problem in hydro

Hi everyone
I have a really strange behaviour I can not explain. I have a really simple program where I publish a message and then quit. When im not sleeping after creating the publisher, but i start immediately to publish the messages gets lost. Any ideas what the case may be?
I am using hydro, and the roscore runs locally.
thanks
flavio
#include "ros/ros.h"
#include "std_msgs/Float32.h"

int main(int argc, char **argv)
{
  ros::init(argc, argv, "publish_test");

  ros::NodeHandle nh;
  ros::Publisher set_control_active_pub = nh.advertise< std_msgs::Float32>("/pixhawk_bridge/control_active2",10 );

  ros::Duration(2).sleep();

  std_msgs::Float32 activate_msg;
  activate_msg.data = 0;
  set_control_active_pub.publish( activate_msg );
  ros::spinOnce();
  ros::Duration(2).sleep();

  return 0;
}

 

Originally posted by ffontana on ROS Answers with karma: 21 on 2013-12-12
Post score: 0

A:

In essence it is likely that the message gets published before any subscribers have the chance to establish a connection to the publisher. It takes some time. There are some ways to check if and how many subscribers are connected to your publisher. For a detailed answer see this question & answer:
http://answers.ros.org/question/11167/how-do-i-publish-exactly-one-message/

Originally posted by demmeln with karma: 4306 on 2013-12-12
This answer was ACCEPTED on the original site
Post score: 1

