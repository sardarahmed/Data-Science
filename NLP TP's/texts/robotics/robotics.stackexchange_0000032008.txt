Q:

Navigation Stack + Hokuyo_node

Ok, so I've been working with the navigation stack and I'm confused as to how to connect the hokuyo_node to everything.  I keep getting the error
Message from [/hokuyo_node] has a non-fully-qualified frame_id [laser]. Resolved locally to [/laser].  This is will likely not work in multi-robot systems.  This message will only print once.
and for everything I've tried nothing seems to get me past this. I was under the impression that AMCL would output what was needed from the laser data.  My laser data tested in rviz seems to be fine.
Thanks ahead of time, and if you need more information that is question specific ill try to get it asap.
Edit 1 <---------------------------------------------->
I'v been working through the navigation stack tutorials, as well as following the Ardros blog. and most of the stuff is the same for both.
my robot configuration launch file.
<launch>
<node pkg="tf" type="static_transform_publisher" name="base_to_laser_broadcaster" args="0 0 0 0 0 0 base_link base_laser 100" />
<node name="hokuyo" pkg="hokuyo_node" type="hokuyo_node" respawn="false" output="screen">
    <param name="frame_id" type="str" value="base_laser"/> 
    <!-- Set the port to connect to here -->
    <param name="port" type="string" value="/dev/ttyACM0"/> 
    <param name="intensity" type="bool" value="false"/>
</node>
<node name="arduino" pkg="ardros" type="arduino.py">
    <rosparam file="$(find ardros)/info/ardros.yaml" command="load" />
</node>

Then my move_base.launch file
<launch>
<!-- Run the map server -->
    <node name="map_server" pkg="map_server" type="map_server" args="$(find ardros)/maps/map.pgm 0.05"/>
<!--- Run AMCL -->
    <include file="$(find ardros)/launch/amcl_diff.launch" />
<node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find ardros)/info/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find ardros)/info/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find ardros)/info/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find ardros)/info/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find ardros)/info/base_local_planner_params.yaml" command="load" />
</node>

my amcl_diff.launch file
<launch>
<node pkg="amcl" type="amcl" name="amcl" output="screen">
    <!-- Publish scans from best pose at a max of 10 Hz -->
    <param name="odom_model_type" value="diff"/>
    <param name="odom_alpha5" value="0.1"/>
    <param name="transform_tolerance" value="0.2" />
    <param name="gui_publish_rate" value="50.0"/>
    <param name="laser_max_beams" value="60"/>
    <param name="min_particles" value="500"/>
    <param name="max_particles" value="5000"/>
    <param name="kld_err" value="0.05"/>
    <param name="kld_z" value="0.99"/>
    <param name="odom_alpha1" value="0.2"/>
    <param name="odom_alpha2" value="0.2"/>
    <!-- translation std dev, m -->
    <param name="odom_alpha3" value="0.8"/>
    <param name="odom_alpha4" value="0.2"/>
    <param name="laser_z_hit" value="0.5"/>
    <param name="laser_z_short" value="0.05"/>
    <param name="laser_z_max" value="0.05"/>
    <param name="laser_z_rand" value="0.5"/>
    <param name="laser_sigma_hit" value="0.2"/>
    <param name="laser_lambda_short" value="0.1"/>
    <param name="laser_lambda_short" value="0.1"/>
    <param name="laser_model_type" value="likelihood_field"/>
    <!-- <param name="laser_model_type" value="beam"/> -->
    <param name="laser_likelihood_max_dist" value="2.0"/>
    <param name="update_min_d" value="0.2"/>
    <param name="update_min_a" value="0.5"/>
    <param name="odom_frame_id" value="odom"/>
    <param name="resample_interval" value="1"/>
    <param name="transform_tolerance" value="0.3"/>
    <param name="recovery_alpha_slow" value="0.0"/>
    <param name="recovery_alpha_fast" value="0.0"/>
</node>

And these are the configuration files.
base_local_planner.yaml
TrajectoryPlannerROS:
max_vel_x: 0.2
min_vel_x: 0.05
max_rotational_vel: 0.5
min_in_place_rotational_vel: 0.1
acc_lim_th: 3.2
acc_lim_x: 2.5
acc_lim_y: 0
holonomic_robot: false

costmap_common_params.yaml
# for details see: http://www.ros.org/wiki/navigation/Tutorials/RobotSetup

obstacle_range: 2.5
raytrace_range: 3.0
robot_radius: 0.08255
inflation_radius: 0.55
observation_sources: laser_scan_sensor
laser_scan_sensor: {sensor_frame: base_laser, data_type: LaserScan, topic: scan, marking: true, clearing: true}
global_costmap_params.yaml
global_costmap:
global_frame: /map
robot_base_frame: base_link
update_frequency: 5.0
static_map: true

local_costmap_params.yaml
local_costmap:
global_frame: odom
robot_base_frame: base_link
update_frequency: 5.0
publish_frequency: 2.0
static_map: false
rolling_window: true
width: 6.0
height: 6.0
resolution: 0.05

EDIT 2 <---------------------------------------------->
I started both .launch files and my move_base node dies.
here is the output.
root@robot:~# roscd ardros/launch
root@robot:/opt/ros/diamondback/stacks/ardros/launch# roslaunch move_base.launch... logging to /root/.ros/log/c07c839c-9080-11e0-8900-00114353e248/roslaunch-robot-5527.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.
started roslaunch server http://robot:35760/
SUMMARY
PARAMETERS

/move_base/global_costmap/robot_base_frame
/amcl/laser_likelihood_max_dist
/amcl/laser_max_beams
/move_base/local_costmap/laser_scan_sensor/sensor_frame
/amcl/gui_publish_rate
/amcl/max_particles
/amcl/laser_z_max
/amcl/laser_model_type
/amcl/laser_z_hit
/move_base/local_costmap/publish_frequency
/amcl/odom_model_type
/amcl/min_particles
/amcl/laser_sigma_hit
/amcl/recovery_alpha_fast
/move_base/local_costmap/height
/move_base/TrajectoryPlannerROS/min_vel_x
/move_base/global_costmap/laser_scan_sensor/marking
/amcl/recovery_alpha_slow
/move_base/TrajectoryPlannerROS/acc_lim_x
/amcl/laser_z_short
/move_base/global_costmap/update_frequency
/move_base/local_costmap/robot_base_frame
/move_base/global_costmap/raytrace_range
/move_base/local_costmap/obstacle_range
/move_base/local_costmap/update_frequency
/move_base/global_costmap/laser_scan_sensor/sensor_frame
/move_base/global_costmap/inflation_radius
/move_base/local_costmap/raytrace_range
/move_base/global_costmap/obstacle_range
/move_base/local_costmap/inflation_radius
/amcl/laser_z_rand
/move_base/local_costmap/width
/move_base/local_costmap/laser_scan_sensor/clearing
/move_base/TrajectoryPlannerROS/acc_lim_y
/rosdistro
/move_base/local_costmap/laser_scan_sensor/marking
/move_base/global_costmap/global_frame
/amcl/transform_tolerance
/move_base/global_costmap/laser_scan_sensor/topic
/move_base/global_costmap/laser_scan_sensor/data_type
/move_base/TrajectoryPlannerROS/acc_lim_th
/amcl/kld_err
/amcl/odom_alpha4
/amcl/odom_alpha5
/move_base/local_costmap/global_frame
/amcl/odom_alpha1
/amcl/odom_alpha2
/amcl/odom_alpha3
/move_base/TrajectoryPlannerROS/max_rotational_vel
/move_base/TrajectoryPlannerROS/latch_xy_goal_tolerance
/move_base/local_costmap/static_map
/move_base/local_costmap/resolution
/move_base/local_costmap/laser_scan_sensor/data_type
/rosversion
/amcl/kld_z
/amcl/odom_frame_id
/move_base/TrajectoryPlannerROS/holonomic_robot
/amcl/resample_interval
/move_base/TrajectoryPlannerROS/xy_goal_tolerance
/amcl/update_min_a
/move_base/TrajectoryPlannerROS/yaw_goal_tolerance
/move_base/local_costmap/observation_sources
/amcl/update_min_d
/move_base/global_costmap/observation_sources
/move_base/local_costmap/laser_scan_sensor/topic
/amcl/laser_lambda_short
/move_base/TrajectoryPlannerROS/max_vel_x
/move_base/local_costmap/rolling_window
/move_base/global_costmap/static_map
/move_base/global_costmap/laser_scan_sensor/clearing
/move_base/TrajectoryPlannerROS/min_in_place_rotational_vel

NODES
/
map_server (map_server/map_server)
amcl (amcl/amcl)
move_base (move_base/move_base)
ROS_MASTER_URI=http://localhost:11311
core service [/rosout] found
process[map_server-1]: started with pid [5545]
process[amcl-2]: started with pid [5546]
process[move_base-3]: started with pid [5547]
[ INFO] [1307394694.560542794]: Requesting the map...
[ WARN] [1307394694.566836892]: Request for map failed; trying again...
[ INFO] [1307394695.062483658]: Subscribed to Topics: laser_scan_sensor
[ INFO] [1307394695.183532367]: Received a 1984 X 1984 map @ 0.050 m/pix
[ INFO] [1307394695.187576103]: Requesting the map...
[ INFO] [1307394695.196436895]: Still waiting on map...
[ INFO] [1307394695.297962478]: Initializing likelihood field model; this can take some time on large maps...
[ INFO] [1307394695.535235695]: Done initializing likelihood field model.
[ WARN] [1307394695.719506927]: Message from [/hokuyo] has a non-fully-qualified frame_id [base_laser]. Resolved locally to [/base_laser].  This is will likely not work in multi-robot systems.  This message will only print once.
[ INFO] [1307394696.278737264]: Still waiting on map...
[ INFO] [1307394697.212949623]: Received a 1984 X 1984 map at 0.050000 m/pix
[ INFO] [1307394703.452034395]: MAP SIZE: 1984, 1984
[ INFO] [1307394703.461743342]: Subscribed to Topics: laser_scan_sensor
[ INFO] [1307394703.764423079]: Sim period is set to 0.05
[ WARN] [1307394704.101810027]: Message from [/hokuyo] has a non-fully-qualified frame_id [base_laser]. Resolved locally to [/base_laser].  This is will likely not work in multi-robot systems.  This message will only print once.
[move_base-3] process has died [pid 5547, exit code -4].
log files: /root/.ros/log/c07c839c-9080-11e0-8900-00114353e248/move_base-3*.log
I also ran roswtf, it gave me ->
WARNING The following node subscriptions are unconnected:

/amcl:

/initialpose

/move_base:

/move_base_simple/goal
/move_base/cancel

WARNING The following nodes are unexpectedly connected:

/move_base->/rosout (/rosout)
/arduino->/rosout (/rosout)
/amcl->/rosout (/rosout)
/map_server->/rosout (/rosout)
/base_to_laser_broadcaster->/rosout (/rosout)
/hokuyo->/rosout (/rosout)

WARNING These nodes have died:

move_base-3

Found 3 error(s).
ERROR Could not contact the following nodes:

/move_base

ERROR The following nodes should be connected but aren't:

/hokuyo->/move_base (/scan)
/arduino->/move_base (/tf)
/amcl->/move_base (/tf)
/base_to_laser_broadcaster->/move_base (/tf)
/move_base->/move_base (/move_base/goal)
/arduino->/move_base (/odom)

ERROR Errors connecting to the following services:

service [/move_base/get_loggers] appears to be malfunctioning: Unable to communicate with service [/move_base/get_loggers], address [rosrpc://robot:53759]
service [/move_base/NavfnROS/make_plan] appears to be malfunctioning: Unable to communicate with service [/move_base/NavfnROS/make_plan], address [rosrpc://robot:53759]
service [/move_base/set_logger_level] appears to be malfunctioning: Unable to communicate with service [/move_base/set_logger_level], address [rosrpc://robot:53759]
service [/move_base/tf_frames] appears to be malfunctioning: Unable to communicate with service [/move_base/tf_frames], address [rosrpc://robot:53759]
service [/move_base/clear_costmaps] appears to be malfunctioning: Unable to communicate with service [/move_base/clear_costmaps], address [rosrpc://robot:53759]
service [/move_base/clear_unknown_space] appears to be malfunctioning: Unable to communicate with service [/move_base/clear_unknown_space], address [rosrpc://robot:53759]
service [/move_base/make_plan] appears to be malfunctioning: Unable to communicate with service [/move_base/make_plan], address [rosrpc://robot:53759]

I plan on looking further into the way im lauching it and such, and everytime i go through the nav tutorial i think i have everything.  If it helps i have SLAM working.

Originally posted by D_mangus on ROS Answers with karma: 121 on 2011-06-02
Post score: 2

Original comments
Comment by D_mangus on 2011-06-08:
I'm not totally sure what I did as I am new to ROS, but i finally got everything working on my robot. That includes the Navigation stack with the Ardros stack, hokuyo_node, and SLAM. The warning appears to not affect anything, but i would like to know the cause of it if at all possible.
Comment by bhaskara on 2011-06-06:
Also, after launching things, could you run roswtf in a separate terminal and post the output?
Comment by Eric Perko on 2011-06-02:
Could you describe what you actually see, what tutorials you have been following to get the nav stack up and running and possible post both your launch files and nav stack config files (or links to them)?
Comment by Eric Perko on 2011-06-02:
That message is not actually an error unless you are actually working in a multi-robot system.

A:

That message is not actually an error unless you are actually working in a multi-robot system. - Eric Perko (Jun 02)
Could you describe what you actually see, what tutorials you have been following to get the nav stack up and running and possible post both your launch files and nav stack config files (or links to them)? - Eric Perko (Jun 02)
Also, after launching things, could you run roswtf in a separate terminal and post the output? - bhaskara (Jun 06)
I'm not totally sure what I did as I am new to ROS, but i finally got everything working on my robot. That includes the Navigation stack with the Ardros stack, hokuyo_node, and SLAM. The warning appears to not affect anything, but i would like to know the cause of it if at all possible. - D_mangus (Jun 08)

Originally posted by Wim with karma: 2915 on 2011-08-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by denisolt on 2018-02-21:
Hey, could you please tell me more about your setup please? i do not see the slam being launched in your launch files. It seems like I might have a similar setup, but I am struggling with the navigaiton

