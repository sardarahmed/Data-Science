Q:

Quaternion to RPY ROS2

In ROS1 we had the possibility to calculate RPY-euler angles from quaternion using tf like this:
tf::Quaternion q(
        msg->pose.pose.orientation.x,
        msg->pose.pose.orientation.y,
        msg->pose.pose.orientation.z,
        msg->pose.pose.orientation.w);
    tf::Matrix3x3 m(q);
    double roll, pitch, yaw;
    m.getRPY(roll, pitch, yaw);

Is there any similar way to do it in ROS2? And if so which file do I have to include? I'm using ROS2-dashing in C++

Originally posted by LeoE on ROS Answers with karma: 196 on 2019-12-09
Post score: 0

A:

The big thing to note is that tf is not in ROS 2. You need to convert to tf2 first. In tf2, that code would be identical (except for the namespace), however.
tf2::Quaternion q(
        msg->pose.pose.orientation.x,
        msg->pose.pose.orientation.y,
        msg->pose.pose.orientation.z,
        msg->pose.pose.orientation.w);
    tf2::Matrix3x3 m(q);
    double roll, pitch, yaw;
    m.getRPY(roll, pitch, yaw);

So, in short, just use tf2 instead of tf.

Originally posted by allenh1 with karma: 3055 on 2019-12-10
This answer was ACCEPTED on the original site
Post score: 2

