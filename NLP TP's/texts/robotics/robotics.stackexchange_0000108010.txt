Q:

How to change default DDS during ros2 source compiling?

I'm building ros2 humble from source, I would like to change the default DDS to rmw_cyclonedds_cpp, so with my self built version of ROS2, the user does not have to specify RMW_IMPLEMENTATION and use rmw_cyclonedds_cpp as default.
What source change do I need to or to set some environment variable during ROS2 source building?
I have read this, but did not find the answer for my need.
https://docs.ros.org/en/humble/How-To-Guides/Working-with-multiple-RMW-implementations.html

A:

The mechanisms for controlling RMW implementation selection are handled in the rmw_implementation package .
At the time that you are building rmw_implementation, it checks the CMake variable RMW_IMPLEMENTATION to determine which will be the "default" for that build.
Since we are building with cmake, you can pass it as a flag to the cmake invocation cmake .. -DRMW_IMPLEMENTATION=rmw_cyclonedds_cpp.  CMake flags can also be passed via colcon with: --cmake-args or --ament-cmake-args:
colcon build --ament-cmake-args -DRMW_IMPLEMENTATION=rmw_cyclonedds_cpp

