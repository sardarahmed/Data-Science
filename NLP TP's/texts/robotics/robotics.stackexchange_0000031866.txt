Q:

ROS Answers SE migration: face detector

Hi,
I'm trying to use face detector on care-o-bot3, for this I activate ROS (DB) using roscore, bring up the robot including a pair of prosilica camera (stereo) and then run face detector. It's supposed we see a window, in which detected faces are marked in it, but nothing happens, just below is the messages come in face_detector terminal
PARAMETERS
 * /rosdistro
 * /face_detector/classifier_filename
 * /face_detector/do_publish_faces_of_unknown_size
 * /face_detector/do_continuous
 * /rosversion
 * /face_detector/classifier_reliability
 * /face_detector/do_display
 * /face_detector/classifier_name

NODES
  /stereo/
    stereo_image_proc (stereo_image_proc/stereo_image_proc)
  /
    face_detector (face_detector/face_detector)

ROS_MASTER_URI=http://192.168.0.101:11311

core service [/rosout] found
process[stereo/stereo_image_proc-1]: started with pid [4523]
process[face_detector-2]: started with pid [4524] 
[ WARN] [1306428229.566039110]: You've passed in true for auto_start for the C++ action server you should always pass in false to avoid race conditions.
[ INFO] [1306428229.611074240]: Constructing FaceDetector.
[ INFO] [1306428229.770035945]: Subscribed to the person filter messages

In order to check the setting, I apply the face detector into a recorded rosbag file (video demo for PR2, downloaded from ROS) and it works, this means we see a window with marked faces in it.
here are the launch files that I use to activate cameras, face detector and bag file player:
camera:
<!-- The camera node -->
<node ns="stereo/left" name="color_camera" pkg="prosilica_camera" type="prosilica_node" output="screen">
<param name="ip_address" type="str" value="169.254.236.139"/>
<param name="trigger_mode" type="str" value="streaming"/>
<remap from="camera/image_raw" to="image_raw"/>
<remap from="camera/camera_info" to="camera_info" />
<rosparam command="load" file="$(find uh_bringup)/common/camera_setting.yaml" />
</node>

<!-- The camera node -->
<node ns="stereo/right" name="color_camera" pkg="prosilica_camera" type="prosilica_node" output="screen">
<param name="ip_address" type="str" value="169.254.47.10"/>
<param name="trigger_mode" type="str" value="streaming"/>
<remap from="camera/image_raw" to="image_raw"/>
<remap from="camera/camera_info" to="camera_info" />
<rosparam command="load" file="$(find uh_bringup)/common/camera_setting.yaml" />
</node>

face detector:
<node ns="stereo" pkg="stereo_image_proc" type="stereo_image_proc" respawn="false" name="stereo_image_proc" args="_approximate_sync:=True _queue_size:=15"/>

<node pkg="face_detector" type="face_detector" name="face_detector" args="stereo:=/stereo image:=image_rect _approximate_sync:=True _queue_size:=15" output="screen">
<param name="classifier_name" type="string" value="frontalface" />
<param name="classifier_filename" type="string" value="$(find opencv2)/opencv/share/opencv/haarcascades/haarcascade_frontalface_alt.xml" />
<param name="classifier_reliability" type="double" value="0.9"/>
<param name="do_continuous" type="bool" value="true" />
<param name="do_publish_faces_of_unknown_size" type="bool" value="true" />  
<param name="do_display" type="string" value="local" />
</node>

rosbag player:
<node pkg="rosbag" type="play" name="rosplay" args="-r 0.1 -l /home/reza/bag_files/face_detector_withface_test_diamondback.bag">
<remap from="wide_stereo/left/image_raw" to="stereo/left/image_raw"/>
<remap from="wide_stereo/left/camera_info" to="stereo/left/camera_info"/>
<remap from="wide_stereo/right/image_raw" to="stereo/right/image_raw"/>
<remap from="wide_stereo/right/camera_info" to="stereo/right/camera_info"/>
</node>

Do you know what can cause this problem, please?
Regards,
Reza,

Originally posted by Reza on ROS Answers with karma: 116 on 2011-05-27
Post score: 2

Original comments
Comment by Reza on 2011-05-27:
this should be readable, now. thanks,
Comment by Felix Endres on 2011-05-27:
This is hardly readable, please edit your post and mark the xml parts as code (use the icon with 0s and 1s above the textfield)

A:

I tried the setup with a pair of usb webcam (uvc_camera), face detector works properly, then it seems the problem is with prosilica and frame rate. I can't get the required fps (about 15fps) from the prosilica cameras, and this is likely to be either camera config or care-o-bot network problem.

Originally posted by Reza with karma: 116 on 2011-06-07
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by KoenBuys on 2011-06-08:
Which prosilica are you using with which configuration options?

