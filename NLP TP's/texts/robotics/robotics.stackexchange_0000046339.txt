Q:

Add gps sensor to robot_pose_ekf but 0 message output

Hello,
I followed the tutorial on how to add a gps sensor to robot_pose_ekf (http://ros.org/wiki/robot_pose_ekf/Tutorials/AddingGpsSensor), but the filter is not outputing any message. My gps messages are published on the /vo topic. Here's the output when I run wtf.py.

Input:
 * Odometry sensor
   - is NOT active
   - received 0 messages
   - listens to topic 
 * IMU sensor
   - is NOT active
   - received 0 messages
   - listens to topic /imu_data
 * Visual Odometry sensor
   - is active
   - received 124 messages
   - listens to topic /gps_meas
Output:
 * Robot pose ekf filter
   - is active
   - sent 0 messages
   - pulishes on topics /robot_pose_ekf/odom_combined and /tf

I mapped the /vo topic to /gps_meas.
And here's an example of my gps message when I rostopic echo /gps_meas:

header: 
  seq: 10261
  stamp: 
    secs: 1354823750
    nsecs: 691171604
  frame_id: base_footprint
child_frame_id: base_link
pose: 
  pose: 
    position: 
      x: 0.0
      y: 0.0
      z: 0.0
    orientation: 
      x: 0.0
      y: 0.0
      z: 0.0
      w: 1.0
  covariance: [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0]
twist: 
  twist: 
    linear: 
      x: 0.0
      y: 0.0
      z: 0.0
    angular: 
      x: 0.0
      y: 0.0
      z: 0.0
  covariance: [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0]

Any idea why there's 0 message output? Thanks!!

Originally posted by xylo on ROS Answers with karma: 184 on 2012-12-06
Post score: 0

Original comments
Comment by sai on 2013-05-19:
I guess that u r not recieving any GPS signals..can you just test your gps with gpsd client and verify if u r getting the messages.

A:

So I figured it out. I was receiving gps messages, but they were published in the wrong frames. They should be in the "odom_combined" header frame, and "base_footprint" child frame. Also somehow the timestamps of the gps messages had a big offset and were very different from the imu timestamps. After I corrected these two problems, robot_pose_ekf is working properly.

Originally posted by xylo with karma: 184 on 2013-05-20
This answer was ACCEPTED on the original site
Post score: 2

