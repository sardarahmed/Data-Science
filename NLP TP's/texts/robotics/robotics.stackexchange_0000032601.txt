Q:

NXT Ultrasonic test fails

I'm trying to test my NXT Ultrasonic sensor with ROS, and everything is connecting fine, but I always get the following message:

setting /run_id to 4303e172-a10f-11e0-a60c-78e40087f376
process[rosout-1]: started with pid [3561]
started core service [/rosout]
process[nxt_ros-2]: started with pid [3564]
[INFO] [WallTime: 1309214775.145184] Creating ultrasonic with name ultrasonic_sensor on PORT_2
Traceback (most recent call last):
  File "/opt/ros/diamondback/stacks/nxt/nxt_ros/scripts/nxt_ros.py", line 406, in 
    main()
  File "/opt/ros/diamondback/stacks/nxt/nxt_ros/scripts/nxt_ros.py", line 376, in main
    components.append(UltraSonicSensor(c, b))
  File "/opt/ros/diamondback/stacks/nxt/nxt_ros/scripts/nxt_ros.py", line 180, in __init__
    self.ultrasonic = nxt.sensor.UltrasonicSensor(comm, eval(params['port']))
  File "/opt/ros/diamondback/stacks/nxt/nxt_python/src/nxt/sensor.py", line 314, in __init__
    self.set_input_mode()
  File "/opt/ros/diamondback/stacks/nxt/nxt_python/src/nxt/sensor.py", line 71, in set_input_mode
    self.mode)
  File "/opt/ros/diamondback/stacks/nxt/nxt_python/src/nxt/brick.py", line 23, in poll
    igram = Telegram(opcode=opcode, pkt=self.sock.recv())
  File "/opt/ros/diamondback/stacks/nxt/nxt_python/src/nxt/usbsock.py", line 69, in recv
    data = self.handle.bulkRead(self.blk_in.address, 64)
usb.USBError: No error
[nxt_ros-2] process has died [pid 3564, exit code 1].
respawning...

(this loops)
It says there are no errors, but I still get no reading.
(I've been studying ROS for 3 hours by the way. Please don't be too harsh...)

Originally posted by Francis on ROS Answers with karma: 11 on 2011-06-27
Post score: 1

Original comments
Comment by Francis on 2011-06-28:
Thanks it actually was the firmware it works fine now! Thanks a lot!
Comment by Martin GÃ¼nther on 2011-06-28:
Is the NXT brick running the latest firmware (v1.28 or above)? If not, you need to use the proprietary Lego software to update the brick.
Comment by mmwise on 2011-06-27:
were you able to get the tests on this page (http://www.ros.org/wiki/nxt/Installation) to work? The tests on that page make sure that your USB is setup correctly.

A:

Solution copied from comments:
Is the NXT brick running the latest firmware (v1.28 or above)? If not, you need to use the proprietary Lego software to update the brick

Originally posted by mmwise with karma: 8372 on 2011-06-29
This answer was ACCEPTED on the original site
Post score: 1

