Q:

RobotWebTools.org: using ros3djs with own URDF

Hi community,
I've tried to use RobotWebTools ros3djs with own created robot.urdf.
Is there a description, how to use it ?
What must be running at the server side ?
What must be changed at html file ?
I get the following erros, when trying to test my robot model:
process[robot_state_publisher-2]: started with pid [4108]
[ERROR] [1369728743.307774572]: Could not find parameter robot_description on parameter server
[ERROR] [1369728743.307982455]: Could not generate robot model
[ERROR] [1369728743.308055194]: Failed to extract kdl tree from xml robot description
[robot_state_publisher-2] process has died [pid 4108, exit code 255, cmd /opt/ros/groovy/lib/robot_state_publisher/robot_state_publisher __name:=robot_state_publisher __log:=/home/ros/.ros/log/52bc6f94-c76e-11e2-a00d-00139508481b/robot_state_publisher-2.log].
log file: /home/ros/.ros/log/52bc6f94-c76e-11e2-a00d-00139508481b/robot_state_publisher-2*.log
I'm using the following launch file:

  

  
-->

Any suggestions ?
Thanks in advance
Cheers
Chrimo

Originally posted by Chrimo on ROS Answers with karma: 390 on 2013-05-27
Post score: 0

A:

I've changed some parameters and all nodes startup without error messages now:
started roslaunch server http://ros:51535/
SUMMARY
PARAMETERS

/robot_description
/robot_state_publisher/publish_frequency
/rosbridge/port
/rosbridge_websocket/authenticate
/rosdistro
/rosversion
/use_gui

NODES
/
robot_state_publisher (robot_state_publisher/robot_state_publisher)
rosapi (rosapi/rosapi)
rosbridge_websocket (rosbridge_server/rosbridge_websocket)
tf2_web_republisher (tf2_web_republisher/tf2_web_republisher)
auto-starting new master
process[master]: started with pid [5714]
ROS_MASTER_URI=http://localhost:11311
setting /run_id to 48110e0a-c77e-11e2-be9c-00139508481b
process[rosout-1]: started with pid [5727]
started core service [/rosout]
process[rosbridge_websocket-2]: started with pid [5739]
process[rosapi-3]: started with pid [5742]
process[robot_state_publisher-4]: started with pid [5749]
[INFO] [WallTime: 1369735597.567725] Rosbridge WebSocket server started on port 9090
process[tf2_web_republisher-5]: started with pid [5781]
But when connecting to webserver, the robot will not be shown:
I use the following html code:

MockBot URDF

  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  ga('create', 'UA-39765480-1', 'robotwebtools.org');
  ga('send', 'pageview');

  
  function init() {
    var ip = location.host;
    var ros = new ROSLIB.Ros({
      url : 'ws://'+ip+':9090'
    });

    var viewer = new ROS3D.Viewer({
      divID : 'urdf',
      width : window.innerWidth,
      height : window.innerHeight,
      background : '#efefef',
      antialias : true
    });
    viewer.addObject(new ROS3D.Grid());

    new ROS3D.UrdfClient({
      ros : ros,
      tfClient : new ROSLIB.TFClient({
        ros : ros,
        angularThres : 0.01,
        transThres : 0.01,
        rate : 10.0
      }),
      path : 'http://resources.robotwebtools.org/',
      rootObject : viewer.scene
    });
  }

  

Now my new questions:

what is the path at ROS3D.UrdfClient ?
...
path : 'http://resources.robotwebtools.org/'
...

what is this ???

  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  ga('create', 'UA-39765480-1', 'robotwebtools.org');
  ga('send', 'pageview');

Thanks for some more hints :-)

Cheers
Chrimo

BTW: you will find my last work at:
https://github.com/mockbot/MockBot.git

---

Originally posted by [Chrimo](https://answers.ros.org/users/361/chrimo/) with karma: 390 on 2013-05-28

This answer was **ACCEPTED** on the original site

Post score: 0

