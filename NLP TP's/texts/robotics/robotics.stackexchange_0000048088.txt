Q:

hector_gazebo_plugins build failure

Hello All,
I'm trying to build the hector_gazebo stack (hector_gazebo version 0.1.1), but I'm getting the following compiler error:
[ rosmake ] Last 40 linesctor_gazebo_plugins: 42.5 sec ] [ hector_gazebo_thermal_camera: 18.2 sec ] [ gazebo_tests: 0.6 sec ]                         [ 3 Active 101/108 Complete ]
{-------------------------------------------------------------------------------
  [ 77%] [ 88%] Building CXX object CMakeFiles/hector_gazebo_ros_gps.dir/src/gazebo_ros_gps.cpp.o
  Building CXX object CMakeFiles/diffdrive_plugin_6w.dir/src/diffdrive_plugin_6w.cpp.o
  make[3]: Entering directory `/opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/build'
  [100%] Building CXX object CMakeFiles/hector_gazebo_ros_imu.dir/src/gazebo_ros_imu.cpp.o
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/gazebo_ros_sonar.cpp: In member function ‘virtual void gazebo::GazeboRosSonar::Load(gazebo::sensors::SensorPtr, sdf::ElementPtr)’:
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/gazebo_ros_sonar.cpp:88:102: warning: ‘double gazebo::math::Angle::GetAsRadian() const’ is deprecated (declared at /opt/ros/ros_ws_sim/simulator_gazebo/gazebo/gazebo/include/gazebo-1.3/gazebo/math/Angle.hh:87) [-Wdeprecated-declarations]
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/gazebo_ros_sonar.cpp:88:189: warning: ‘double gazebo::math::Angle::GetAsRadian() const’ is deprecated (declared at /opt/ros/ros_ws_sim/simulator_gazebo/gazebo/gazebo/include/gazebo-1.3/gazebo/math/Angle.hh:87) [-Wdeprecated-declarations]
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/gazebo_ros_imu.cpp: In member function ‘virtual void gazebo::GazeboRosIMU::Update()’:
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/gazebo_ros_imu.cpp:290:91: warning: ‘double gazebo::math::Vector3::GetDotProd(const gazebo::math::Vector3&) const’ is deprecated (declared at /opt/ros/ros_ws_sim/simulator_gazebo/gazebo/gazebo/include/gazebo-1.3/gazebo/math/Vector3.hh:126) [-Wdeprecated-declarations]
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/gazebo_ros_imu.cpp:291:85: warning: ‘gazebo::math::Vector3 gazebo::math::Vector3::GetCrossProd(const gazebo::math::Vector3&) const’ is deprecated (declared at /opt/ros/ros_ws_sim/simulator_gazebo/gazebo/gazebo/include/gazebo-1.3/gazebo/math/Vector3.hh:120) [-Wdeprecated-declarations]
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp: In member function ‘void gazebo::DiffDrivePlugin6W::publish_odometry()’:
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp:308:3: error: ‘btQuaternion’ was not declared in this scope
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp:308:16: error: expected ‘;’ before ‘qt’
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp:309:3: error: ‘btVector3’ was not declared in this scope
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp:309:13: error: expected ‘;’ before ‘vt’
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp:310:40: error: ‘qt’ was not declared in this scope
  /opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/src/diffdrive_plugin_6w.cpp:310:44: error: ‘vt’ was not declared in this scope
  Linking CXX shared library ../lib/libreset_plugin.so
  make[3]: Leaving directory `/opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/build'
  [100%] Built target reset_plugin
  make[3]: *** [CMakeFiles/diffdrive_plugin_6w.dir/src/diffdrive_plugin_6w.cpp.o] Error 1
  make[3]: Leaving directory `/opt/ros/ros_ws_sim/hector_gazebo/hector_gazebo_plugins/build'
  make[2]: *** [CMakeFiles/diffdrive_plugin_6w.dir/all] Error 2
  make[2]: *** Waiting for unfinished jobs....

Has anyone encountered this error when building from source? Any guidance would be greatly appreciated since I'm fairly new to ROS and ROS simulations. Thanks in advance!

Originally posted by Donny3000 on ROS Answers with karma: 55 on 2013-02-07
Post score: 0

A:

The btQuaternion/btVector3 bug was a leftover from the conversion of the plugin from ROS electric to fuerte. It was already fixed in r679 two months ago. Obviously at the time of the 0.1.1 relase of the hector_gazebo stack, usage of the old bullet datatypes did not cause a compilation error.
Today we released version 0.1.2 of the stack (check the ChangeList). You should either use this one or the latest version from trunk.

Originally posted by Johannes Meyer with karma: 1266 on 2013-02-07
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Donny3000 on 2013-02-07:
Thanks Johannes for the reply! I will go ahead and check out the 0.1.2 version of the stack.

