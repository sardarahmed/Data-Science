Q:

ar_pose rotate transform without image rotation

I have an urdf description of a camera on a robot. On the camera I run the ar_pose detector. The image is correct, but detected location is behind the camera. The problem is that if I change the origin in the urdf the image gets also rotated. How can I get the image and the marker position correctly simultaneously?

Originally posted by davinci on ROS Answers with karma: 2573 on 2013-04-27
Post score: 0

A:

In my experiments, the camera points in the direction of its blue axis. So looking at your frames, it looks like your camera is actually pointing upward. Try to correct that in your URDF and then, if your image is rotated, you can always rotate your camera frame around the blue axis until you get it right.

Originally posted by Procópio with karma: 4402 on 2013-05-08
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by davinci on 2013-05-10:
Thanks for your response, but the camera image obtained at the red axis. Rotating the axis so that the blue axis  is in line with the arm means that the camera is pointing downwards like this: https://dl.dropboxusercontent.com/u/5812499/Screenshot%20from%202013-05-09%2016%3A40%3A11.png
Comment by Procópio on 2013-05-10:
actually that image only confirms that the blue axis is pointing in the direction of your field of view. If it was the red axis, you would see the grid as squares, but instead you see them in perspective. Also you can see the axis just in front of your camera in the image (/arm_shoulder_pivot).
Comment by Procópio on 2013-05-10:
just rotate your camera frame once more, maintaining the direction of the blue axis, until you can see your floor grid in the base of the camera image (in your camera window). I think the green axis must point downwards. after that, check if the marker position displays correctly.
Comment by davinci on 2013-05-10:
Thanks for your help. But the camera then points sideways. https://dl.dropboxusercontent.com/u/5812499/Screenshot%20from%202013-05-10%2017%3A01%3A00_rotation.png
Comment by Procópio on 2013-05-10:
ok, now you got your camera rigtht (by the position of the floor and by the arm's joints in your cam  image)! I think the problem now is with your Rviz object. Maybe you are creating your Rviz object with the wrong orientation? Check your code when you create the Rviz marker orientation.
Comment by moonlake on 2013-06-02:
..Got it  thanx
Comment by davinci on 2013-06-02:
How did you solve it then?
Comment by Procópio on 2013-06-03:
sorry @davinci, do you mind adding the images from the comments here to the question part (upload to answers.ros.org)? in this way the question would become more informative for future reference and we would not depend on your dropbox. thanks!

