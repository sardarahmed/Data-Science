Q:

Install Errors Roboearth Ubuntu 12.04 Fuerte vision_opencv

Hi everyone, I am trying to install Roboearth and I am having all sorts of issues. First I had to update to Ubuntu 12.04 from 11.10 because I had issues with Cmake being out of date. Now I am having more problems, mostly in re_vision:
First is this issue:
> sudo apt-get install
> ros-fuerte-vision-opencv2     
> Reading package lists...     
> Done Building dependency tree    
> Reading state information...    
> Done E: Unable to locate package ros-fuerte-vision-opencv2

Second I had to check out a version of vision_opencv manually, under the latest tag as it seems like the one on Fuerte vision_opencv page is incorrect, its for groovy and not Fuerte.
The second problem is in re_vision:
UPDATE
I was able to solve the above problem by install OpenCV2.4.* using the following two guides:
http://www.raben.com/book/export/html/3
http://karytech.blogspot.com/2012/05/opencv-24-on-ubuntu-1204.html
However, now I have a different issue which I think is with cv_bridge in latest version of vision_opencv for Fuerte:
    [rosmake-1] Starting >>> re_vision [ make ]                                                                                                 
[ rosmake ] Last 40 lines_vision: 166.2 sec ]                                                                    [ 1 Active 14/15 Complete ]
{-------------------------------------------------------------------------------
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cvReleaseMat'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Mat::reshape(int, int, int const*) const'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cvSetZero'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::warpPerspective(cv::_InputArray const&, cv::_OutputArray const&, cv::_InputArray const&, cv::Size_<int>, int, int, cv::Scalar_<double> const&)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::getTextSize(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int, double, int, int*)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Mat::zeros(int, int, int)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::_InputArray::_InputArray(cv::MatExpr const&)'
  ../lib/libDVision.so: undefined reference to `cv::read(cv::FileNode const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::DescriptorMatcher::DescriptorCollection::~DescriptorCollection()'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::FlannBasedMatcher::train()'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cvCvtColor'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::MatConstIterator::seek(int const*, bool)'
  ../lib/libDVision.so: undefined reference to `cv::FeatureDetector::~FeatureDetector()'
  ../lib/libDUtilsCV.so: undefined reference to `cv::line(cv::Mat&, cv::Point_<int>, cv::Point_<int>, cv::Scalar_<double> const&, int, int, int)'
  ../lib/libDVision.so: undefined reference to `cv::Exception::Exception(int, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::initUndistortRectifyMap(cv::_InputArray const&, cv::_InputArray const&, cv::_InputArray const&, cv::_InputArray const&, cv::Size_<int>, int, cv::_OutputArray const&, cv::_OutputArray const&)'
  ../lib/libDVision.so: undefined reference to `cv::WriteStructContext::~WriteStructContext()'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Mat::copySize(cv::Mat const&)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cvCreateImageHeader'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Mat::inv(int) const'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Mat::copyTo(cv::_OutputArray const&) const'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Mat::Mat(cv::Mat const&, cv::Range const&, cv::Range const&)'
  ../lib/libDVision.so: undefined reference to `cv::operator<<(cv::FileStorage&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::flann::IndexParams::~IndexParams()'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cvGetSize'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Mat::deallocate()'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::_InputArray::_InputArray(double const&)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cvCreateImage'
  ../lib/libDUtilsCV.so: undefined reference to `cv::namedWindow(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int)'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::Algorithm::~Algorithm()'
  ../lib/libObjectDetectorFunctions.so: undefined reference to `cv::FlannBasedMatcher::FlannBasedMatcher(cv::Ptr<cv::flann::IndexParams> const&, cv::Ptr<cv::flann::SearchParams> const&)'
  ../lib/libDVision.so: undefined reference to `cv::Algorithm::set(char const*, bool)'
  collect2: ld returned 1 exit status
  make[3]: *** [../bin/ObjectDetector] Error 1
  make[3]: Leaving directory `/home/sasha/ros/stacks/roboearth/re_vision/build'
  make[2]: *** [CMakeFiles/ObjectDetector.dir/all] Error 2
  make[2]: Leaving directory `/home/sasha/ros/stacks/roboearth/re_vision/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/sasha/ros/stacks/roboearth/re_vision/build'

And with ar_pose:
[ rosmake ] Last 40 lines_vision: 61.0 sec ] [ ar_pose: 9.1 sec ]                                         [ 2 Active 47/103 Complete ]
{-------------------------------------------------------------------------------
  make[3]: Leaving directory `/home/sasha/ros/stacks/ccny_vision/ar_pose/build'
  [ 70%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/sasha/ros/stacks/ccny_vision/ar_pose/build'
  make[3]: Leaving directory `/home/sasha/ros/stacks/ccny_vision/ar_pose/build'
  make[3]: Entering directory `/home/sasha/ros/stacks/ccny_vision/ar_pose/build'
  Linking CXX executable ../bin/ar_multi
  CMakeFiles/ar_multi.dir/src/ar_multi.o: In function `ar_pose::ARSinglePublisher::arInit()':
  /home/sasha/ros/stacks/ccny_vision/ar_pose/src/ar_multi.cpp:140: undefined reference to `cvCreateImage'
  CMakeFiles/ar_multi.dir/src/ar_multi.o: In function `CvBridge':
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:66: undefined reference to `cvCreateImageHeader'
  CMakeFiles/ar_multi.dir/src/ar_multi.o: In function `~CvBridge':
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:72: undefined reference to `cvReleaseImageHeader'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:77: undefined reference to `cvReleaseImage'
  CMakeFiles/ar_multi.dir/src/ar_multi.o: In function `sensor_msgs::CvBridge::reallocIfNeeded_(_IplImage**, CvSize, int, int)':
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:90: undefined reference to `cvReleaseImage'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:96: undefined reference to `cvCreateImage'
  CMakeFiles/ar_multi.dir/src/ar_multi.o: In function `sensor_msgs::CvBridge::reallocIfNeeded(_IplImage**, int, int)':
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:108: undefined reference to `cvGetSize'
  CMakeFiles/ar_multi.dir/src/ar_multi.o: In function `sensor_msgs::CvBridge::fromImage(sensor_msgs::Image_<std::allocator<void> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)':
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:198: undefined reference to `cvInitMatHeader'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:199: undefined reference to `cvGetImage'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:228: undefined reference to `cvCreateMat'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:229: undefined reference to `cvConvertScale'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:235: undefined reference to `cvConvertScale'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:242: undefined reference to `cvCvtColor'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:244: undefined reference to `cvCvtColor'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:246: undefined reference to `cvCvtColor'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:248: undefined reference to `cvCvtColor'
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:252: undefined reference to `cvCvtColor'
  CMakeFiles/ar_multi.dir/src/ar_multi.o:/opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:254: more undefined references to `cvCvtColor' follow
  CMakeFiles/ar_multi.dir/src/ar_multi.o: In function `sensor_msgs::CvBridge::fromImage(sensor_msgs::Image_<std::allocator<void> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >)':
  /opt/ros/fuerte/stacks/vision_opencv/cv_bridge/include/cv_bridge/CvBridge.h:292: undefined reference to `cvReleaseMat'
  collect2: ld returned 1 exit status
  make[3]: *** [../bin/ar_multi] Error 1
  make[3]: Leaving directory `/home/sasha/ros/stacks/ccny_vision/ar_pose/build'
  make[2]: *** [CMakeFiles/ar_multi.dir/all] Error 2
  make[2]: Leaving directory `/home/sasha/ros/stacks/ccny_vision/ar_pose/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/sasha/ros/stacks/ccny_vision/ar_pose/build'

Originally posted by alexiip on ROS Answers with karma: 71 on 2013-02-08
Post score: 0

A:

Ok so I was able to solve the problem.
First I did sudo apt-get update and I saw that I was getting the following message:
W: Duplicate sources.list entry http://archive.canonical.com/ubuntu/ precise/partner i386 Packages (/var/lib/apt/lists/archive.canonical.com_ubuntu_dists_precise_partner_binary-i386_Packages)
To resolve this I went to `Synaptic Package Manager-> Settings -> Repositories -> Other Software' and unchecked "Canonical Partners - Added by software center".
Then did sudo apt-get update again. This solved the above problem.
Then, I went to the following file /etc/apt/sources.list.d/ros-latest.list and saw that the url was commented out. I uncommented the following line deb http://packages.ros.org/ros/ubuntu precise main and ran sudo apt-get update again.
After this point I was able to install all of the dependencies which are needed for roboearth and via apt-get and was able to successfully make roboearth with rosmake roboearth

Originally posted by alexiip with karma: 71 on 2013-02-15
This answer was ACCEPTED on the original site
Post score: 0

