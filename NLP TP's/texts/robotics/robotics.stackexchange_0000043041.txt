Q:

Map Message C++

Does anyone have some sample code for publishing a map given a set of coordinates? I am in need... I figured it would be pretty straight forward, then the documentation confused me... Any advice?

Originally posted by allenh1 on ROS Answers with karma: 3055 on 2012-08-08
Post score: 0

A:

The OccupancyGrid message contains three parts:

The Header information. This will include the frame_id of the map. When specifying the origin of the map in the MapMetaData, the Pose that you use will be in this frame.

The meta data tells you the map resolution, the height, the width, and the time it was created. It also contains the origin of the map in the frame specified in the header's frame_id.

The actual data for the map. It's in row-major order, which means you will fill the data array like so: [row0, column0, row1, column1, row2, column2 ...].

NOTE: The catch with this message is that the data array only supports signed 8-bit integers (i.e. char) and can only be filled with values from -128 to +127. I'm not sure what you're trying to do with this map, but keep that in mind.

Originally posted by DimitriProsser with karma: 11163 on 2012-08-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by allenh1 on 2012-08-08:
I'm implementing an old algorithm as a comparison to mine. It predates SLAM. It's a similar method to mine.
Comment by allenh1 on 2012-08-08:
Ok. I have a collection of points. I'm starting to understand how to work this... Since I have a list of occupied points, how do I include the blank space/uncharted space?
Comment by dornhege on 2012-08-08:
Set those cells to -1 (unknown).
Comment by allenh1 on 2012-08-08:
But where do I start with the map? I have the indices of only occupied. How should I approach iterating through the array to include the spaces that won't be indices of the array? Or is that just a problem for me...
Comment by dornhege on 2012-08-08:
For a collection of points, you set those cells to occupied. Usually you'll have some functions like world2grid/grid2world that, given a map convert between points and coords/indices.
Comment by dornhege on 2012-08-08:
You'd initialize the whole map as unknown.

