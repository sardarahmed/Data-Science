Q:

How to Use Laser Data

I want to use laser data in my program(I want C++ code)
,
I can see ranges data of laser scanner with   #rostopic echo /scan/ranges but how can i use it in my codes.

Originally posted by programmer on ROS Answers with karma: 61 on 2014-03-10
Post score: 0

A:

The "ranges" member of a LaserScan message is represented by a std::vector<float> and can be used just like any other std::vector of floats.
It might help to have a look at the laser callbacks in slam_gmapping, AMCL and hector_mapping. For the latter, an example of accessing range data is the rosLaserScanToDataContainer function.

Originally posted by Stefan Kohlbrecher with karma: 24361 on 2014-03-10
This answer was ACCEPTED on the original site
Post score: 5

Original comments
Comment by programmer on 2014-03-10:
Thanks Dear Stefan for your time...
I want to read for example ranges[50], I do it by bellow code but it caused error: Segmentation fault (core dumped)
"sensor_msgs:: LaserScan scan;
std::cout<<scan.ranges[20]<<std::endl;"
What's my problem?
Comment by Stefan Kohlbrecher on 2014-03-10:
You instantiate a empty LaserScan message and try to access element 50 of the ranges vector, which does not exist.
Comment by programmer on 2014-03-10:
What i must to do Stefan to read for example ranges[20] ?? when i use "rostopic echo /scan/ranges" it print a lots of ranges, i think it was more than 200s...
Comment by Stefan Kohlbrecher on 2014-03-10:
Sorry to be blunt, but you will have to do some basic studying of C++ and the C++ ROS API. The code piece you posted just creates a empty message and tries to access (the non-existing) 20th or 50th range of it. You have to actually subscribe to the topic and use a callback to get the data coming in on a topic. See http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber(c%2B%2B) to get a basic understanding of how subscribing to topics works.
Comment by programmer on 2014-03-10:
Thanks Dear Stefan, I had not read that tutorial...
I'm was Stupid... sorry for my silly question. ;-)

