Q:

tum_ardrone in nvidia-docker: issues with camera feed

Hi,
after hours of trail and error I managed to build my own docker image with the tum_ardrone package.
The docker file can be found here: https://paste.ubuntu.com/24421105/
Now, when I launch the tum_ardone node, which brings up the:

"tum_ardone GUI"
"PTAM Drone Map View"
"PTAM Drone Camera Feed"

the "tum-ardone GUI" looks just fine and I am able to fly the drone. But the two other "PTAM" windows are broken, because I only see a static "copy" of my background picture.

I run the following commands in the first terminal
docker run -it --net=host  ardrone:nvidia

and in the second terminal
xhost local:root
nvidia-docker run -it --net=host  --env="DISPLAY"  --env="QT_X11_NO_MITSHM=1"   --volume="/tmp/.X11-unix:/tmp/.X11-unix:rw"  ardrone:nvidia

Any ideas how to fix this issue?
Kind regards

Originally posted by tuxiano on ROS Answers with karma: 26 on 2017-04-20
Post score: 1

Original comments
Comment by tuxiano on 2017-04-21:
Still, can't tell why, but it is related to the "net=host" flag. Because, when I start the container without this flag I'm able to run glxgears and see the gears rotating ... if I start the container with this flag, I only see a black box.

A:

In combination with the "--net=host" flag, I had to add the "--priviliged" flag: https://github.com/NVIDIA/nvidia-docker/issues/327
nvidia-docker run -it --net=host --privileged --env="DISPLAY" --env="QT_X11_NO_MITSHM=1" --volume="/tmp/.X11-unix:/tmp/.X11-unix:rw" ardrone:nvidia

Originally posted by tuxiano with karma: 26 on 2017-04-21
This answer was ACCEPTED on the original site
Post score: 0

