Q:

How do I get ROS to use Pillow?

I'm using Homebrew to install ROS - Hydro on my 10.9 Mac. While using ROS' wiki for installing hydro, 2.1.2 causes an error specifically pertaining to installing PIL. I know such has been replaced with Pillow, and have already used such before. My question is, how do I get ROS to just use Pillow instead of PIL

Originally posted by warsh on ROS Answers with karma: 1 on 2014-07-28
Post score: 0

A:

I have no clue how interchangeable PIL and Pillow are, so no idea how easy it would be to make the code depending on PIL use Pillow. I think your easier bet is just installing PIL.
I assume you are getting a freetype related compilation error? This has been discussed before, you will likely be successful with the following sequence of commands:

ln -s /usr/local/include/freetype2 /usr/local/include/freetype
pip install -U PIL --allow-external PIL --allow-unverified PIL
rm /usr/local/include/freetype

Update: According to William in the comments below this is a better way to work around the freetype issue:
CFLAGS="-I/usr/local/include/freetype2" pip install -U PIL --allow-external PIL --allow-unverified PIL

EDIT: you might need sudo pip instead of pip

Originally posted by demmeln with karma: 4306 on 2014-07-28
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by William on 2014-07-28:
We ran into issues where ogre would not compile with that symbolic link, it somehow created a circular or incorrect include problem with freetype. I had previously done something like CFLAGS="-I/usr/local/include/freetype2" pip install ... and that allowed pip to build PIL, without permanently changing the system. I'm not sure that is right, but I'll just look around on the internet for that.
Comment by William on 2014-07-28:
Here: https://github.com/osrf/homebrew-simulation/issues/6#issuecomment-38644605 You have to include the X11 version of freetype in the CFLAGS.
Comment by William on 2014-07-28:
Another option is to just do cd /tmp && ln -s . /usr/local/include/freetype2/freetype and then invoking pip, again this prevent permanent modification of the system.
Comment by demmeln on 2014-07-29:
Is there any advantage of CFLAGS= ... pip install vs my suggestion to create and remove the link?
rosdep should maybe be capable of customizing the pip command. Something like prepend_install: 'CFLAGS="-I/usr/local/include/freetype2"' or install_env: {CFLAGS:"-I/usr/local/include/freetype2}
Comment by William on 2014-07-31:
@demmeln no probably not, I didn't see that you were removing it afterwards.
Comment by demmeln on 2014-07-31:
Ah OK makes sense

