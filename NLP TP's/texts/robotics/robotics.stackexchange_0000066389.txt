Q:

Kobuki base - Jerky move with Nav goal (move_base)

Hello experts,
I had set up a Turtlebot 2 Kobuki base with ROS indigo Hokuyo lidar, Navigation stack and Gmapping n produce a map from the small area that im working in... all works perfectly and the map is totally consistent, when i move the robot around the room with the Keyop (teleop) but when it comes to publishing a navigation goal or Twist command i have a problem;

i wrote a simple node to publish Twist messages to my Kobuki base with no reaction from the robot until i found out that for the Twist cmds to work with my kobuki I have to send them to /mobile_base/commands/velocity instead of /cmd_vel or do a little remapping for these topics in Kobuki base lauchfiles. long story short, if i dont remap; standard Twist msg dont work, e.g: setting a nav_goal in Rviz for move_base gets no reaction from the robot, etc. but when i remap /cmd_vel to the other topic and then send a goal, my robot acts weird and jumps n snaps (jerky moves) and doesnt seem to stop until i force "ctrl-c" or turn it off.
i have no idea what might be problem and found no useful resource on this matter... has anyone faced a similar problem with Kobuki mobile base or have any ideas?

ps: tried mapping /mobile_base/commands/velocity to both cmd_vel and cmd_vel_mux and outcome is the same jumpy and sudden moves.

please do ask if u need me to elaborate or send config files.
Thanks!

Originally posted by sobot on ROS Answers with karma: 116 on 2015-03-16
Post score: 1

A:

Actually in the Kobuki base model they included a multiplexer to receive & prioritise inputs from different sources, so this is not (wasn't) the problem. problem was that controller_frequency: parameter wasn't right and also a very big X,Y size (meters) for Costmap Local and Global maps in the move_base setting could cause this jerky behaviour. just lower the size to a reasonable amount and it works smooth. (100 x 100; lowered to 40x40 and its all good).

Originally posted by sobot with karma: 116 on 2015-03-17
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by jseal on 2015-04-29:
Just curious what value did you use for the controller_frequency?
Comment by sobot on 2015-05-02:
@jseal it was set to 4 or 5 if i remember correctly, i raised it to 20 and it worked fine.

