Q:

Publish nan to a jointState topic

Hi,
I want to publish a jointState message from terminal with NaNs as the values inside some of its fields. Is there a way I can do that.
If I do
rostopic pub -r 2 /test sensor_msgs/JointState "header:
  seq: 0
  stamp: {secs: 0, nsecs: 0}
  frame_id: '/test'
name: ['l', 'r']
position: [0.0, 0.0]
velocity: [0.0, 0.0]
effort: [nan, nan]" 

I get the following error
Unable to publish message. One of the fields has an incorrect type:
  <class 'struct.error'>: 'required argument is not a float' when writing '/test'

Thanks.

Originally posted by Tanvir on ROS Answers with karma: 3 on 2017-11-12
Post score: 0

A:

ROS uses YAML for this, and according to the YAML 1.1 Reference card the value should be .NAN (all caps, with the dot):

Language Independent Scalar types:

  ...
  [ .inf, -.Inf, .NAN ]    : [ Infinity (float), Negative, Not a number ]

The following seems to work for me:
rostopic pub -r 1 /some_topic std_msgs/Float64 '.NAN'

Originally posted by gvdhoorn with karma: 86574 on 2017-11-13
This answer was ACCEPTED on the original site
Post score: 5

