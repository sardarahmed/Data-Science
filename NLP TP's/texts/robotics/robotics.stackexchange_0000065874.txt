Q:

rgbdslam v2 crashes after processing the first frame

Hello all,
I have (supposedly) successfully catkin_make'd rgbdslam_v2  following the instructions from here on ros-hydro and ubuntu 12.04.
Then I run :
roslaunch rgbdslam rgbdslam.launch

and
roslaunch openni_launch openni.launch (since I'm using the Kinect sensor) 

Everything good so far (the gui, etc..). Then I press the "enter" button to record a single frame and after a couple of seconds I can see the registered cloud along with the features in the bottom-right window.
But, when I press the "enter" key again, to record a second frame I get the error below:
[ INFO] [1424181067.056503402]: Siftgpu Feature Descriptors size: 600 x 128
[ INFO] [1424181067.056629147]: Feature Count of Node:  600
[ INFO] [1424181067.066904524]: Odometry Delta: Translation 0 0 0
[ INFO] [1424181067.067152611]: Odometry Delta: Rotation 0 0 0 1
[ INFO] [1424181067.067285958]: No Valid Odometry, using identity
[ INFO] [1424181067.067507486]: Node ID's to compare with candidate for node 1. Sequential: 0
[ INFO] [1424181067.067683740]: Nodes to compare: 0
[ INFO] [1424181067.067813802]: Running node comparisons in parallel in 7 (of 8) available threads
[ INFO] [1424181067.078635881]: Depth and RGB image off more than 1/30sec: 36753459 (nsec)

rgbdslam: /tmp/buildd/ros-hydro-opencv2-2.4.9-2precise-20140819-1745/modules/flann/include/opencv2/flann/kdtree_index.h:458: 
void cvflann::KDTreeIndex<Distance>::getNeighbors(cvflann::ResultSet<typename Distance::ResultType>&, const ElementType*, int, float) [with Distance = cvflann::L2<float>, typename Distance::ResultType = float, cvflann::KDTreeIndex<Distance>::ElementType = float]: Assertion `result.full()' failed.
================================================================================REQUIRED process [rgbdslam-2] has died!
process has died [pid 20933, exit code -6, cmd /home/kokirits/rgbdslam_hydro_ws/devel/lib/rgbdslam/rgbdslam __name:=rgbdslam __log:=/home/kokirits/.ros/log/e3d1a8d6-b6ab-11e4-9f21-4c80931194a0/rgbdslam-2.log].
log file: /home/kokirits/.ros/log/e3d1a8d6-b6ab-11e4-9f21-4c80931194a0/rgbdslam-2*.log

 Initiating shutdown!

================================================================================
[rgbdslam-2] killing on exit
[rosout-1] killing on exit
[master] killing on exit
shutting down processing monitor...
... shutting down processing monitor complete
done

Anyone got an idea on how to solve this?

Originally posted by kokirits on ROS Answers with karma: 290 on 2015-02-17
Post score: 0

A:

Problem solved, while browsing other answers.
I changed the entry in rgbslam.launch
from:
<param name="config/feature_detector_type"         value="SIFTGPU"/><!-- also available: SIFT, SURF, GFTT (good features to track), ORB. -->

<param name="config/feature_extractor_type"        value="SIFTGPU"/><!-- also available: SIFT, SURF, SURF128 (extended SURF), ORB. -->

to:
<param name="config/feature_detector_type"         value="ORB"/><!-- also available: SIFT, SURF, GFTT (good features to track), ORB. -->
<param name="config/feature_extractor_type"        value="ORB"/><!-- also available: SIFT, SURF, SURF128 (extended SURF), ORB. -->

SIFT and SURF work good as well, while GFTT produces another weird error.

Originally posted by kokirits with karma: 290 on 2015-02-17
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by sophye_turtlebot on 2015-03-27:
hi kokiritis
I am in the same situation as you (turtlebot, hydro, rgbdslam, ubunto 12.04)
But when i run the rgbdslam there is no image the GUI is empty, but when i worked only with kinect it worked. i didn't found the solution;
Comment by sophye_turtlebot on 2015-03-27:
can you please send to me the file launch and the steps that you did for the first time to run rgbdslam?
Comment by kokirits on 2015-03-27:
Hey sophye_turtlebot, by default rgbdslam v2 uses SIFTGPU as the feature detection and feature extraction method. What I did was just change those to ORB (SIFT and SURF) work as well. I can post my launch file when I get to my linux machine at the lab.
Comment by sophye_turtlebot on 2015-03-30:
I stayed three days in the same problem:
in fact
here's what I did exactly: roslaunch rgbdslam openni+rgbdslam in a terminal
Comment by sophye_turtlebot on 2015-03-30:
after to see errors with roswtf I found this warning:

/camera/camera_nodelet_manager:

/tf_static

/rgbdslam:

/tf_static
any help plz

