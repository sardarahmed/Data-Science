Q:

controller_manager spawner dies after spawning

It was working fine  for loading controller for Gazebo and then after doing sudo apt-get upgrade (that I think installed some extra gazebo stuff), it started crashing. (disk34_tran is the last controller in my list, so all controllers are loaded correctly)
[/maru/maru_controller INFO 4.373000]: Controller Spawner: Loaded controllers: joint_state_controller, clamp_tran, belt1_tran, belt2_tran, z_tran, yaw_tran, height_tran, rad_tran, pusher_tran, drive_tran, fixed_drive_tran, eject_drive_tran, disk0_tran, disk1_tran, disk2_tran, disk3_tran, disk4_tran, disk5_tran, disk6_tran, disk7_tran, disk8_tran, disk9_tran, disk10_tran, disk11_tran, disk12_tran, disk13_tran, disk14_tran, disk15_tran, disk16_tran, disk18_tran, disk19_tran, disk20_tran, disk21_tran, disk22_tran, disk23_tran, disk24_tran, disk25_tran, disk26_tran, disk27_tran, disk28_tran, disk29_tran, disk30_tran, disk31_tran, disk32_tran, disk33_tran, disk17_tran, disk34_tran
Traceback (most recent call last):
  File "/opt/ros/indigo/lib/controller_manager/spawner", line 212, in <module>
    if __name__ == '__main__': main()
  File "/opt/ros/indigo/lib/controller_manager/spawner", line 204, in main
    resp = switch_controller(loaded, [], 2)
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rospy/impl/tcpros_service.py", line 435, in __call__
Segmentation fault
[gazebo-2] process has died [pid 4012, exit code 139, cmd /opt/ros/indigo/lib/gazebo_ros/gzserver worlds/empty.world __name:=gazebo __log:=/home/mehdi/.ros/log/40838168-0520-11e5-9545-48d2245dedaf/gazebo-2.log].
log file: /home/mehdi/.ros/log/40838168-0520-11e5-9545-48d2245dedaf/gazebo-2*.log
    return self.call(*args, **kwds)
  File "/opt/ros/indigo/lib/python2.7/dist-packages/rospy/impl/tcpros_service.py", line 525, in call
    raise ServiceException("transport error completing service call: %s"%(str(e)))
rospy.service.ServiceException: transport error completing service call: unable to receive data from sender, check sender's logs for details
[/maru/maru_controller INFO 4.374000]: Shutting down spawner. Stopping and unloading controllers...
[/maru/maru_controller WARN 4.374000]: Controller Spawner couldn't reach controller_manager to take down controllers. Waited for 30 second(s).

What could be the reason for this crash and how to fix it?

Originally posted by Mehdi. on ROS Answers with karma: 3339 on 2015-05-28
Post score: 1

A:

You're providing little information about your setup. But from the rospy.service.ServiceException and the segmentation fault, I'd say that you might have an inconsistent set of binaries installed.

Originally posted by Adolfo Rodriguez T with karma: 3907 on 2015-05-28
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Mehdi. on 2015-05-28:
I deleted and reinstalled Gazebo4 but then noticed that there was a package conflict so I deleted Gazebo4 again in installed Gazebo2 and its ROS packages. It works now.
Comment by Adolfo Rodriguez T on 2015-05-28:
Yeah, gazebo_ros_control binaries are released against Gazebo2, that explains the crash. Glad it's answered.
Comment by Tom Moore on 2015-06-25:
I'm actually having an identical issue. Using Gazebo 5 with hector_quadrotor_gazebo and ros-indigo-gazebo5 packages. All hector packages built from source to build against Gazebo 5. Was working for months, did an apt-get upgrade, rebuilt, and now I get a very similar error.
Comment by Bill Warner on 2015-06-25:
This would seem to indicate that some portion of ros-indigo-gazebo5-pkgs is not functional.
Comment by danacity on 2016-07-11:
i got the same problem in Gazebo7 with ROS Indigo. How to get out of this problem? So frustrated with this error.
Comment by Mehdi. on 2016-07-12:
@bilynbk the fastest and easiest way would be to use gazebo 2, the one recommended for ROS Indigo, or move to ROS Kinetic which comes with a newer Gazebo version
Comment by robot_commander on 2017-03-15:
@bilynbk did you finally fix this issue?

