Q:

quaternion_actionlib

Hi every body.
I am trying to run a small application using actionlib. I convert in a callback function, degrees to quaternions, as it is shown in the following  piece of code:
double th=D2R*(atan2( msg.pose.pose.orientation.y, msg.pose.pose.orientation.y));
geometry_msgs::Quaternion gth = tf::createQuaternionMsgFromYaw(th);

Then, I am trying to assign that quaternion as it follows:
move_base_msgs::MoveBaseGoal goal;
goal.target_pose.pose.orientation.w =gth;

Then I get the error:
cannot convert ‘geometry_msgs::Quaternion’ to ‘geometry_msgs::Quaternion_<std::allocator<void> >::_w_type {aka double}’ in assignment

Can anybody give me a clue, in advance thank you

Originally posted by acp on ROS Answers with karma: 556 on 2013-06-04
Post score: 0

A:

Your yaw calculation looks wrong. If you already have a pose, the yaw in radians should already be available in msg.pose.pose.orientation.z.
The goal assignment is in error because you are trying to assign a quaternion to the w component of another quaternion. Maybe you mean this:
goal.target_pose.pose.orientation = gth;

Originally posted by joq with karma: 25443 on 2013-06-04
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by acp on 2013-06-04:
Thank you very much for your answer, I realised that yesterday, it is now working :)
Comment by tfoote on 2013-06-17:
@acp please accept the answer so others don't spend time trying to help you solve this problem.

