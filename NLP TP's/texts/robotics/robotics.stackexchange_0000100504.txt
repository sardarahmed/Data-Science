Q:

[ROS2] Purpose of TextSubstitution

In the ROS2 tutorials located at https://docs.ros.org/en/foxy/Tutorials/Launch-Files/Using-ROS2-Launch-For-Large-Projects.html#setting-parameters-in-the-launch-file, the 'default_value' within the 'DeclareLaunchArgument' directive is assigned to TextSubstitution(text='0') or similar.
My question is why that is necessary. Can't you just do default_value='0'? It seems to work without the TextSubstitution directive.
Thanks

Originally posted by swiz23 on ROS Answers with karma: 86 on 2021-11-09
Post score: 1

A:

TextSubstitution is usually used to wrap literals in the launch description so they can be concatenated with other substitutions - but these substitutions must only be evaluated when the specific launch description is executed. In that context, it provides a uniform interface for all "substitutions".
https://github.com/ros2/launch/blob/b59bb6b88b40eaa82870542d93bdfb1a033d05c3/launch/doc/source/architecture.rst#substitutions

A partial purpose is that TextSubstitution must be constructed with a Text type, which indicates a value that contains a unicode string in a manner that is compatible with both Python 2 and Python 3 - so to work-around the differences in string handling/usage in Python2/3.

Originally posted by aprotyas with karma: 456 on 2021-11-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by gvdhoorn on 2021-11-10:
So is the purpose then to work-around the differences in string handling / usage in Python 2 and Python 3?
Comment by aprotyas on 2021-11-10:
I'd say that's partly the reason - at least entirely the reason for there being the Text type.
More importantly, TextSubstitution is usually used to wrap literals in the launch description so they can be concatenated with other substitutions - but these substitutions must only be evaluated when the specific launch description is executed. In that context, it provides a uniform interface for all "substitutions".
https://github.com/ros2/launch/blob/b59bb6b88b40eaa82870542d93bdfb1a033d05c3/launch/doc/source/architecture.rst#substitutions
Comment by gvdhoorn on 2021-11-10:
Seems like you should make this part of your answer proper, instead of a comment :)
The OP asks why TextSubstitution exists and what it's used for. Your comment seems to explain that.
Comment by aprotyas on 2021-11-10:
Yeah, I see how the actual "why" is in the comments. Edited to reflect that!
Comment by swiz23 on 2021-11-10:
So if you're not planning on concatenating the LaunchArgument with something else - but just passing it to parameters within a node, there would be no need to do TextSubstitution?
Comment by aprotyas on 2021-11-11:
@swiz23 I believe so, yes. Having said that, you never know how downstream launch descriptions will try to wrap around what you have - very contrived example, but still. As such, it's probably best practice to just use Substitution types for default values.

