Q:

How to stop a robot from going out of its joint limits?

I have a KUKA LBR model and I have set its joint limits but the problem is these joint limits affect only the ros_controller and when I just spawn the robot, it goes beyond its limit and I am not able to get it back to an allowed angle.

Originally posted by balakumar-s on Gazebo Answers with karma: 13 on 2016-01-29
Post score: 0

A:

http://wiki.ros.org/urdf/XML/joint
You need to set the hard limits in the urdf file, and make sure the joint is not set to continuous.
It sounds like you only have "safety limits" set, or the limits for the ros_controller set and not the physical limits.
See this example from https://bitbucket.org/osrf/drcsim/src/583228ebd72677c36a393b3260f0c5f0bc7b0f87/atlas_description/urdf/atlas_v5.urdf?at=default&fileviewer=file-view-default
Note the difference between lower/upper hard limits of revolute joint, and the soft_*_limits.
 <joint name="back_bkx" type="revolute">
<origin rpy="0 0 0" xyz="0 0 0.05"/>
<axis xyz="1 0 0"/>
<parent link="mtorso"/>
<child link="utorso"/>
<dynamics damping="0.1" friction="0"/>
<limit effort="300" lower="-0.523599" upper="0.523599" velocity="12"/>
<safety_controller k_position="100" k_velocity="100" soft_lower_limit="-10.5236" soft_upper_limit="10.5236"/>

Originally posted by dcconner with karma: 298 on 2016-01-31
This answer was ACCEPTED on the original site
Post score: 1

