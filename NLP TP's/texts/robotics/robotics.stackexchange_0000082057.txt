Q:

Problem with Error [Param.cc:451] Unable to set value [-nan -nan -nan 0 -0 0] for key[pose]. Gazebo doesn't open

Hello,
when i try to roslaunch my model with the command: roslaunch robot_control robot_diffdrive.launch , i get the following error:
  ... logging to /home/elzombie/.ros/log/68fa861a-7467-11e7-b7d7-d4bed980b116/roslaunch-moshi-moshi-27013.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://moshi-moshi:34495/

SUMMARY
========

PARAMETERS
 * /robot_description: <?xml version="1....
 * /robot_diff_drive_controller/angular/z/has_acceleration_limits: True
 * /robot_diff_drive_controller/angular/z/has_velocity_limits: True
 * /robot_diff_drive_controller/angular/z/max_velocity: 2.0
 * /robot_diff_drive_controller/base_frame_id: chassis
 * /robot_diff_drive_controller/left_wheel: ['front_axle to f...
 * /robot_diff_drive_controller/linear/x/has_acceleration_limits: True
 * /robot_diff_drive_controller/linear/x/has_velocity_limits: True
 * /robot_diff_drive_controller/linear/x/max_acceleration: 0.6
 * /robot_diff_drive_controller/linear/x/max_velocity: 0.2
 * /robot_diff_drive_controller/max_acceleration: 6.0
 * /robot_diff_drive_controller/pose_covariance_diagonal: [0.001, 0.001, 0....
 * /robot_diff_drive_controller/publish_rate: 50
 * /robot_diff_drive_controller/right_wheel: ['front_axle to f...
 * /robot_diff_drive_controller/twist_covariance_diagonal: [0.001, 0.001, 0....
 * /robot_diff_drive_controller/type: diff_drive_contro...
 * /robot_diff_drive_controller/wheel_separation: 0.333
 * /robot_joint_state_controller/publish_rate: 50
 * /robot_joint_state_controller/type: joint_state_contr...
 * /rosdistro: kinetic
 * /rosversion: 1.12.7
 * /rqt_robot_steering/default_topic: /robot_diff_drive...
 * /use_sim_time: True

NODES
  /
    gazebo (gazebo_ros/gzserver)
    gazebo_gui (gazebo_ros/gzclient)
    robot_controller_spawner (controller_manager/spawner)
    rqt_robot_steering (rqt_robot_steering/rqt_robot_steering)
    rviz (rviz/rviz)
    urdf_spawner (gazebo_ros/spawn_model)

ROS_MASTER_URI=http://localhost:11311

core service [/rosout] found
process[gazebo-1]: started with pid [27035]
process[gazebo_gui-2]: started with pid [27040]
process[urdf_spawner-3]: started with pid [27045]
process[rviz-4]: started with pid [27046]
process[robot_controller_spawner-5]: started with pid [27047]
process[rqt_robot_steering-6]: started with pid [27048]
SpawnModel script started
[ INFO] [1501350809.257317690]: Finished loading Gazebo ROS API Plugin.
[ INFO] [1501350809.259887899]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...
[INFO] [1501350809.276150, 0.000000]: Loading model XML from ros parameter
[INFO] [1501350809.281451, 0.000000]: Waiting for service /gazebo/spawn_urdf_model
[INFO] [1501350811.096386, 0.000000]: Calling service /gazebo/spawn_urdf_model
[ INFO] [1501350811.130896442, 0.022000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.
Error [Param.cc:451] Unable to set value [-nan -nan -nan 0 -0 0] for key[pose]
Warning [parser.cc:778] XML Element[plugin], child of element[link] not defined in SDF. Ignoring[plugin]. You may have an incorrect SDF file, or an sdformat version that doesn't support this element.
Warning [parser.cc:778] XML Element[plugin], child of element[link] not defined in SDF. Ignoring[plugin]. You may have an incorrect SDF file, or an sdformat version that doesn't support this element.
[INFO] [1501350811.354676, 0.146000]: Spawn status: SpawnModel: Successfully spawned entity
[ INFO] [1501350811.383864095, 0.146000000]: Physics dynamic reconfigure ready.
[ INFO] [1501350811.389576299, 0.146000000]: Loading gazebo_ros_control plugin
[ INFO] [1501350811.389719945, 0.146000000]: Starting gazebo_ros_control plugin in namespace: /robot
[ INFO] [1501350811.393265260, 0.146000000]: gazebo_ros_control plugin is waiting for model URDF in parameter [/robot_description] on the ROS param server.
[urdf_spawner-3] process has finished cleanly
log file: /home/elzombie/.ros/log/68fa861a-7467-11e7-b7d7-d4bed980b116/urdf_spawner-3*.log
[ INFO] [1501350811.575174528, 0.146000000]: Loaded gazebo_ros_control.
gzclient: /build/ogre-1.9-mqY1wq/ogre-1.9-1.9.0+dfsg1/OgreMain/src/OgreNode.cpp:630: virtual void Ogre::Node::setScale(const Ogre::Vector3&): Assertion `!inScale.isNaN() && "Invalid vector supplied as parameter"' failed.
Aborted (core dumped)
[gazebo_gui-2] process has died [pid 27040, exit code 134, cmd /opt/ros/kinetic/lib/gazebo_ros/gzclient __name:=gazebo_gui __log:=/home/elzombie/.ros/log/68fa861a-7467-11e7-b7d7-d4bed980b116/gazebo_gui-2.log].
log file: /home/elzombie/.ros/log/68fa861a-7467-11e7-b7d7-d4bed980b116/gazebo_gui-2*.log
[WARN] [1501350839.917650, 28.385000]: Controller Spawner couldn't find the expected controller_manager ROS interface.
[robot_controller_spawner-5] process has finished cleanly
log file: /home/elzombie/.ros/log/68fa861a-7467-11e7-b7d7-d4bed980b116/robot_controller_spawner-5*.log

Same for roslaunch robot_gazebo robot.launch.
Gazebo closes immediately without showing the model, but RobotSteering - rqt and rviz black screen start for roslaunch robot_control robot_diffdrive.launch. When i type roslaunch robot robot_rviz.launch i have no errors and the joint_state_publisher window shows up, but rviz shows black screen.
When i open my model from rviz gui i have the error No transform from [back_axle] to [map] for every link, but i think that's a different problem (and question).
I have no idea what to do!
Any suggestions?
Thanks in advance,
moshimojo
My URDF file is:
<?xml version="1.0" ?>
<robot name="robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- Import all Gazebo-customization elements, including Gazebo colors -->
  <xacro:include filename="$(find robot)/urdf/robot.gazebo" />

  <!-- Import Rviz colors -->
  <!--<xacro:include filename="$(find robot)/urdf/materials.xacro" /> -->
    
  <joint name="back_axle_to_back_left_wheel" type="continuous">
    <parent link="back_axle"/>
    <child link="back_left_wheel"/>
    <origin rpy="0  0  0" xyz="1.00000000e-05   1.00000000e-05   1.78000000e-01"/>
    <axis xyz="0.00000000e+00  -1.00000000e+00   9.00000000e-05"/>
    <limit effort="-1.0" lower="-1.79769e+308" upper="1.79769e+308" velocity="-1.0"/>
  </joint>
  <joint name="back_axle_to_back_right_wheel" type="continuous">
    <parent link="back_axle"/>
    <child link="back_right_wheel"/>
    <origin rpy="0  0  0" xyz="-1.00000000e-05  -1.00000000e-05  -1.78000000e-01"/>
    <axis xyz="0.00000000e+00  -1.00000000e+00   9.00000000e-05"/>
    <limit effort="-1.0" lower="-1.79769e+308" upper="1.79769e+308" velocity="-1.0"/>
  </joint>
  <joint name="cap_to_left_shell" type="fixed">
    <parent link="cap"/>
    <child link="left_shell"/>
    <origin rpy="0  0  0" xyz="0       0.2505  -0.08825"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="cap_to_right_shell" type="fixed">
    <parent link="cap"/>
    <child link="right_shell"/>
    <origin rpy="0  0  0" xyz="0      -0.2505  -0.08825"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="cap_to_ceiling" type="fixed">
    <parent link="cap"/>
    <child link="ceiling"/>
    <origin rpy="0  0  0" xyz="0.00899  0       0.07625"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="ceiling_to_base1" type="fixed">
    <parent link="ceiling"/>
    <child link="base1"/>
    <origin rpy="0  0  0" xyz="-0.00899  0.102    0.096"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="ceiling_to_base2" type="fixed">
    <parent link="ceiling"/>
    <child link="base2"/>
    <origin rpy="0  0  0" xyz="-0.00899 -0.102    0.096"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="chassis_to_cap" type="fixed">
    <parent link="chassis"/>
    <child link="cap"/>
    <origin rpy="0  0  0" xyz="0       0       0.27125"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="chassis_to_front_axle" type="fixed">
    <parent link="chassis"/>
    <child link="front_axle"/>
    <origin rpy="0 0 0" xyz="0.1665  0      0.1275"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="chassis_to_back_axle" type="fixed">
    <parent link="chassis"/>
    <child link="back_axle"/>
    <origin rpy="0 0 0" xyz="-0.1665  0      0.1275"/>
    <axis xyz="0  0  0"/>
    <limit effort="0" lower="0" upper="0" velocity="0"/>
  </joint>
  <joint name="front_axle_to_front_left_wheel" type="continuous">
    <parent link="front_axle"/>
    <child link="front_left_wheel"/>
    <origin rpy="0  0  0" xyz="1.00000000e-05   1.00000000e-05   1.78000000e-01"/>
    <axis xyz="0.00000000e+00  -1.00000000e+00   9.00000000e-05"/>
    <limit effort="-1.0" lower="-1.79769e+308" upper="1.79769e+308" velocity="-1.0"/>
  </joint>
  <joint name="front_axle_to_front_right_wheel" type="continuous">
    <parent link="front_axle"/>
    <child link="front_right_wheel"/>
    <origin rpy="0  0  0" xyz="-1.00000000e-05  -1.00000000e-05  -1.78000000e-01"/>
    <axis xyz="0.00000000e+00  -1.00000000e+00   9.00000000e-05"/>
    <limit effort="-1.0" lower="-1.79769e+308" upper="1.79769e+308" velocity="-1.0"/>
  </joint>

  <link name="chassis">
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.533 0.197 0.189"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.533 0.197 0.189"/>
      </geometry>
    </visual>
  </link>
  <link name="back_axle">
    <inertial>
      <mass value="1"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.471" radius="0.0065"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.471" radius="0.0065"/>
      </geometry>
    </visual>
  </link>
  <link name="back_left_wheel">
    <inertial>
      <mass value="0"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </visual>
  </link>
  <link name="back_right_wheel">
    <inertial>
      <mass value="1"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </visual>
  </link>
  <link name="base1">
    <inertial>
      <mass value="0"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.44 0.006 0.052"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.44 0.006 0.052"/>
      </geometry>
    </visual>
  </link>
  <link name="base2">
    <inertial>
      <mass value="0"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.44 0.006 0.052"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.44 0.006 0.052"/>
      </geometry>
    </visual>
  </link>
  <link name="cap">
    <inertial>
      <mass value="0"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.533 0.471 0.0125"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.533 0.471 0.0125"/>
      </geometry>
    </visual>
  </link>
  <link name="ceiling">
    <inertial>
      <mass value="0"/>
      <origin rpy="0  0  0" xyz="0.00899  0       0.3475"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0.00899  0       0.3475"/>
      <geometry>
        <box size="0.52 0.479 0.14"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0.00899  0       0.3475"/>
      <geometry>
        <box size="0.52 0.479 0.14"/>
      </geometry>
    </visual>
  </link>
  <link name="front_axle">
    <inertial>
      <mass value="1"/>
      <origin rpy="0 0 0" xyz="0.1665  0      0.1275"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0 0 0" xyz="0.1665  0      0.1275"/>
      <geometry>
        <cylinder length="0.471" radius="0.0065"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0 0 0" xyz="0.1665  0      0.1275"/>
      <geometry>
        <cylinder length="0.471" radius="0.0065"/>
      </geometry>
    </visual>
  </link>
  <link name="front_left_wheel">
    <inertial>
      <mass value="1"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0" ixy="0" ixz="1" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </visual>
  </link>
  <link name="front_right_wheel">
    <inertial>
      <mass value="0"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <cylinder length="0.087" radius="0.1275"/>
      </geometry>
    </visual>
  </link>
  <link name="left_shell">
    <inertial>
      <mass value="0"/>
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.533 0.03 0.189"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0  0  0"/>
      <geometry>
        <box size="0.533 0.03 0.189"/>
      </geometry>
    </visual>
  </link>
  <link name="right_shell">
    <inertial>
      <mass value="1"/>
      <origin rpy="0  0  0" xyz="0     -0.2505  0.183"/>
      <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
    </inertial>
    <collision name="robot__collision">
      <origin rpy="0  0  0" xyz="0     -0.2505  0.183"/>
      <geometry>
        <box size="0.533 0.03 0.189"/>
      </geometry>
    </collision>
    <visual name="robot__visual">
      <origin rpy="0  0  0" xyz="0     -0.2505  0.183"/>
      <geometry>
        <box size="0.533 0.03 0.189"/>
      </geometry>
    </visual>
  </link>

  <joint name="hokuyo_joint1" type="fixed">
    <axis xyz="0 1 0" />
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="ceiling"/>
    <child link="hokuyo_link1"/>
  </joint>

  <!-- Hokuyo Laser -->
  <link name="hokuyo_link1">
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
    <box size="0.1 0.1 0.1"/>
      </geometry>
    </collision>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://robot/meshes/hokuyo.dae"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="1e-5" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
  </link>

  <joint name="hokuyo_joint2" type="fixed">
    <axis xyz="0 1 0" />
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="ceiling"/>
    <child link="hokuyo_link2"/>
  </joint>

  <!-- Hokuyo Laser -->
  <link name="hokuyo_link2">
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
    <box size="0.1 0.1 0.1"/>
      </geometry>
    </collision>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://robot/meshes/hokuyo.dae"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="1e-5" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
  </link>

  <xacro:macro name="axle_n_wheels" params="prefix suffix reflect">

    <transmission name="${suffix}_${prefix}_wheel_trans${reflect}">
      <type>transmission_interface/SimpleTransmission</type>
      <actuator name="${suffix}_${prefix}_wheel_motor${reflect}">
        <mechanicalReduction>1</mechanicalReduction>
      </actuator>
      <joint name="${suffix}_axle_to_${suffix}_${prefix}_wheel">
        <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
      </joint>
    </transmission>
    <gazebo reference="${suffix}_${prefix}_wheel">
      <mu1 value="200.0"/>
      <mu2 value="100.0"/>
      <kp value="10000000.0" />
      <kd value="1.0" />
      <material>Gazebo/Black</material>
     <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/robot</robotNamespace>
     </plugin>
    </gazebo>
  </xacro:macro>

  <xacro:axle_n_wheels prefix="left" suffix="front" reflect="1" />
  <xacro:axle_n_wheels prefix="right" suffix="back" reflect="2" />

</robot>

Originally posted by moshimojo on ROS Answers with karma: 46 on 2017-07-29
Post score: 1

A:

I fixed the problem by removing all the additional spaces in the  element (in those who had more than one space between the origin values) and giving the  element a value.

Originally posted by moshimojo with karma: 46 on 2017-08-05
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by jayess on 2017-08-05:
If this was the solution then you should mark it as correct.
Comment by moshimojo on 2017-08-07:
it says i don't have enough points to mark my own answer
Comment by jack37 on 2018-06-18:
i take your advice but not work ~~~
Comment by jayess on 2018-06-18:
@jack37 then you should ask a new question, reference this question, and include any errors or whatever you mean by

not work

