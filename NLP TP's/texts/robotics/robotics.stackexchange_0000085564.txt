Q:

Indoor Robot with No absolute starting yaw

Our indoor wheeled robot with wheel encoders has an IMU without magnetometers. At startup in a random orientation the yaw output is 0. We are able to follow a wall and cross into another room where an internal GPS is set up to determine X, Y and yaw with respect to global map frame of the room. We are using robot_localization for fusion, but are unsure how to switch to the room map without causing a discontinuity in the localization and therefore in the motion. Is it possible to go from map1 --> odom  to map2 --> odom ?

Originally posted by ras_cal on ROS Answers with karma: 40 on 2018-02-27
Post score: 0

A:

No tf frame can have two parents. This sounds like a pretty straightforward two-tier setup. In your first EKF (odom->base_link transform), fuse wheel encoders and IMU. In the second (map->odom transform), fuse wheel encoders, IMU, and GPS data. You will experience a discontinuity in the map frame, but that's fine (it's the reason for having map and odom frames).

Originally posted by Tom Moore with karma: 13689 on 2018-04-13
This answer was ACCEPTED on the original site
Post score: 2

