Q:

Diff_drive_controller - Question on RK function

Hello,
In the diff_drive_controller plugin:
https://github.com/ros-controls/ros_controllers/blob/kinetic-devel/diff_drive_controller/src/odometry.cpp#L140
What does the below line do? What is the 0.5 for?
const double direction = heading_ + angular * 0.5

The RK2 function is called when angular velocities are less than 1e-6 rads,

Originally posted by bluehash on ROS Answers with karma: 120 on 2016-11-09
Post score: 0

A:

The 0.5 is coming from using an RK2 integration scheme. Specifically, from a quick glance at the code, it seems they are using what is often referred to as the Explicit Midpoint Method. This is a fully explicit RK scheme that has two stages (one at the left node, and one at the midpoint). The weight on the midpoint is 1/2 (that is where the 0.5 you are seeing comes in), and the weight on the left node is 0.
In simple terms the line mentioned in the original question is finding the midpoint orientation between the original orientation and the final orientation, and this midpoint orientation is being used for evaluating the sin and cos terms across the timestep.

Originally posted by jarvisschultz with karma: 9031 on 2016-11-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by bluehash on 2016-11-09:
Thank you for the explanation!
It would be nice if the developer added that comment in... and also used brackets.

