Q:

How to use declare_parameters with a vector of floats?

I'm using ros2 source build master branch. I was trying
 this->declare_parameters<std::vector<float>>("foo", { {"bar", {1.2}},{ {"zee", {4.2}}});

but that fails with
/home/usr/ros2_foxy/install/rclcpp_lifecycle/include/rclcpp_lifecycle/lifecycle_node_impl.hpp:144:21: error: no matching function for call to ‘rclcpp::ParameterValue::get<std::vector<float, std::allocator<float> > >() const’
  144 |   ).get<ParameterT>();

Is there currently a way to specify a list of parameters which have vectors as their values?

Originally posted by Hakaishin on ROS Answers with karma: 142 on 2021-03-05
Post score: 0

A:

It's not implemented for floats, just change the syntax to double and it works.
this->declare_parameters<std::vector<double>>("foo", {
            {"bar", {1.2}},
});

and get the config with
std::map<std::string, std::vector<double>> foo;
this->get_parameters("foo", foo);

Originally posted by Hakaishin with karma: 142 on 2021-08-25
This answer was ACCEPTED on the original site
Post score: 1

