Q:

[SOLVED] catkin_make hangs forever

ROS Indigo on Ubuntu 14.04 LTS
ROS Lunar on Ubuntu 16.04 LTS
catkin_make starts up and gets as far as BUILD_SHARED_LIBS is on and then hangs.
There are no high cpu processes listed in top, and no output to dmesg at all.
What else can I check to investigate why it hangs?
Edit:
A clean install of Lunar worked fine until today.
ps aux | grep cmake
automat+  1996  0.0  0.3 153344 14328 pts/17   S+   15:16   0:00 cmake /home/automation/catkin_ws/src -DCATKIN_DEVEL_PREFIX=/home/automation/catkin_ws/devel -DCMAKE_INSTALL_PREFIX=/home/automation/catkin_ws/install -G Unix Makefiles
automat+  2078  0.1  0.4 276192 16644 pts/17   S+   15:16   0:00 /usr/bin/python /usr/bin/empy --raw-errors -F /home/automation/catkin_ws/build/catkin_generated/order_packages.py -o /home/automation/catkin_ws/build/catkin_generated/order_packages.cmake /opt/ros/lunar/share/catkin/cmake/em/order_packages.cmake.em
automat+  2114  0.0  0.3  57160 14012 pts/17   S+   15:16   0:00 /usr/bin/python /usr/bin/empy --raw-errors -F /home/automation/catkin_ws/build/catkin_generated/order_packages.py -o /home/automation/catkin_ws/build/catkin_generated/order_packages.cmake /opt/ros/lunar/share/catkin/cmake/em/order_packages.cmake.em
automat+  2115  0.0  0.3  56872 13940 pts/17   S+   15:16   0:00 /usr/bin/python /usr/bin/empy --raw-errors -F /home/automation/catkin_ws/build/catkin_generated/order_packages.py -o /home/automation/catkin_ws/build/catkin_generated/order_packages.cmake /opt/ros/lunar/share/catkin/cmake/em/order_packages.cmake.em
automat+  2390  0.0  0.0  21292   988 pts/1    S+   15:28   0:00 grep --color=auto cmake

env | grep -i ros | sort (in an auto-sourced terminal)CMAKE_PREFIX_PATH=/home/automation/catkin_ws/devel:/opt/ros/lunar
LD_LIBRARY_PATH=/home/automation/catkin_ws/devel/lib:/opt/ros/lunar/lib
PATH=/home/automation/bin:/home/automation/.local/bin:/opt/ros/lunar/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
PKG_CONFIG_PATH=/opt/ros/lunar/lib/pkgconfig
PYTHONPATH=/opt/ros/lunar/lib/python2.7/dist-packages
ROS_DISTRO=lunar
ROS_ETC_DIR=/opt/ros/lunar/etc/ros
ROSLISP_PACKAGE_DIRECTORIES=/home/automation/catkin_ws/devel/share/common-lisp
ROS_MASTER_URI=http://localhost:11311
ROS_PACKAGE_PATH=/home/automation/catkin_ws/src:/opt/ros/lunar/share
ROS_ROOT=/opt/ros/lunar/share/ros

Edit 10/19/17:
apt-cache policy python-empypython-empy:
Installed: 3.3.2-1build1
Candidate: 3.3.2-1build1
Version table:
*** 3.3.2-1build1 500
500 http://us.archive.ubuntu.com/ubuntu xenial/universe amd64 Packages
500 http://us.archive.ubuntu.com/ubuntu xenial/universe i386 Packages
100 /var/lib/dpkg/status

pip list | grep empyempy (3.3.2)
You are using pip version 8.1.1, however version 9.0.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
automation@atc-nuc-ros:~$ pip install --upgrade pip
Collecting pip
Downloading pip-9.0.1-py2.py3-none-any.whl (1.3MB)
100% |████████████████████████████████| 1.3MB 470kB/s
Installing collected packages: pip
Successfully installed pip-8.1.1
You are using pip version 8.1.1, however version 9.0.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.

Originally posted by DHCustomPak on ROS Answers with karma: 70 on 2017-10-11
Post score: 1

Original comments
Comment by gvdhoorn on 2017-10-18:
Delete build and devel, and try running things as follows:
catkin_make VERBOSE=1

If things hang, see what it was doing.
Seeing the order_package.py in that ps output: how many packages do you have, and what sort of machine is this?
Comment by DHCustomPak on 2017-10-18:
Verbose output: https://pastebin.com/DiDiuGfZ  Still hangs after BUILD_SHARE_LIBS is on.
We have one package with 8 nodes. This machine is an Intel NUC, we previously used a Surface Pro 3 that worked flawlessly for the past year or more, then recently stopped working.
Comment by gvdhoorn on 2017-10-18:
Does catkin_tools work? That is not a solution, but just trying to get some more info.
Comment by DHCustomPak on 2017-10-18:
catkin_tools: command not found
Is it a command I should be running? Do I need to have something else installed first? I did the ros-lunar-desktop-full install.
Comment by gvdhoorn on 2017-10-18:
catkin-tools.readthedocs.io.
Comment by DHCustomPak on 2017-10-18:
catkin build just ran for an hour and didn't get anywhere...
Comment by gvdhoorn on 2017-10-18:
Let's take a step back: can you build an empty workspace (with catkin_make or catkin build, I don't care). So:

open a new terminal (no auto sourcing anything)
source /opt/ros/$distro/setup.bash
mkdir -p /tmp/empty_ws/src
cd /tmp/empty_ws
catkin_make

Comment by DHCustomPak on 2017-10-18:
I followed your instructions exactly and it behaves the same as before. Hangs after BUILD_SHARED_LIBS is on :(
Thank you for your help, I really appreciate it! We are definitely at our wit's end with this thing and none of the similar issues we found online had a working solution.
Comment by gvdhoorn on 2017-10-18:
Can you add the output of env | grep -i ros | sort to your original question? Just edit it using the edit button/link.
Comment by DHCustomPak on 2017-10-18:
Edited question to add information.
Comment by gvdhoorn on 2017-10-18:
And just making sure: in the non-auto-sourced terminal it hangs as well when trying to build the empty workspace? Have you installed any Python packages between when it worked and when it stopped working?
I ask because in your ps output I see it hanging on empy invocations.
Comment by DHCustomPak on 2017-10-18:
Yes, in the non-auto-sourced terminal it hangs building an empty workspace. I don't think there are any new python packages since it was working.
Comment by gvdhoorn on 2017-10-19:
Can you show the output of apt-cache policy python-empy and of pip list | grep empy?
Stabbing in the dark here, but again, seeing empy hang like that seems to point to something.
Comment by DHCustomPak on 2017-10-19:
Didn't have pip so I installed it. Added outputs to question above.
Comment by gvdhoorn on 2017-10-19:
Must say this is hard to diagnose without direct access to the machine involved.
Perhaps @William has some ideas?
Comment by William on 2017-10-19:
Can you run cmake directly on your package? Something like cd path/to/package; mkdir build; cd build; cmake ..?

A:

There was a single package in our system that did not adhere to the naming conventions (package name contains capital letters). Catkin threw a warning and then hung on build until the package was removed/renamed.
It wasn't obvious that it was a fatal error considering the message was prefixed with "Warning" and not "Error".

Originally posted by DHCustomPak with karma: 70 on 2018-01-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by gvdhoorn on 2018-01-10:
Thanks for reporting back.
Not adhering to naming conventions should definitely not be a fatal error or cause Catkin to hang.
If you can create an MWE and report it here that would be great.

