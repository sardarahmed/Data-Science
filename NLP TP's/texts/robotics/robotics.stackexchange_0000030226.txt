Q:

How to link odometry to a URDF model?

So, I have my URDF model and I also am publishing a topic of type nav_msgs::Odometry.  How do I link these together, such that the model moves within Rviz in accordance with the odometry position?

Originally posted by JediHamster on ROS Answers with karma: 995 on 2011-03-09
Post score: 2

A:

It's where TF comes handy:
A nav_msgs::Odometry is published within a certain frame (field frame_id).
In the same time, your URDF model is also attached to some frame.
To make the robot move according to your odometry, you will need to produce a tf frame that describe where the robot is relative to the world. This transform correspond to the pose field of the odometry message.
Imagine you have a robot which main frame is "base_frame" and you are already producing an odometry message. Just produce a tf frame from "world" to "base_frame" that contains the pose values of your odometry message.
For more information and code example, see this tutorial.
Raph

Originally posted by raphael favier with karma: 1382 on 2011-03-09
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by JediHamster on 2011-03-10:
Ok, I think I've understood.
Comment by raphael favier on 2011-03-09:
Just as a precision. In my case, the only reason I am publishing a nav_msgs::Odometry message is to make my robot compatible with the navigation stack, which expects odometry information as nav_msgs::Odometry messages (see http://www.ros.org/wiki/navigation/Tutorials/RobotSetup?action=AttachFile&do=get&target=overview_tf.png) . Visualization in Rviz is purely based on the TF frames.
Comment by raphael favier on 2011-03-09:
No. your URDF model only describes the aspect of your robot and is (if I am not wrong) linked to some frames of your robot. All you need to do is to publish a TF transform between the main frame of your robot (base_link in my example) and a frame that represent the reference of your odometry system (world in my example, odom in the tutorial).
Comment by JediHamster on 2011-03-09:
Does this mean adding a "world" link and an "odom" joint to the URDF model ?

