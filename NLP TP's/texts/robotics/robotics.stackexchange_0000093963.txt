Q:

ROS2 cam2image non default video device

Hi,
how can I switch the video device when I start up cam2image with ROS2? I hope to find something like

ros2 run image_tools cam2image video0:=video2

Best wishes
Sebastian

Originally posted by Poseidonius on ROS Answers with karma: 427 on 2019-11-30
Post score: 0

A:

I don't believe you can (from here):

if (!burger_mode_) {

  // Initialize OpenCV video capture stream.
  // Always open device 0.
  cap.open(0);
  ..
}

The help output also doesn't seem to give the impression this is possible:

Usage:

 -h: This message.
 -r: Reliability QoS setting:
    0 - best effort
    1 - reliable (default)
 -d: Depth of the queue: only honored if used together with 'keep last'. 10 (default)
 -f: Publish frequency in Hz. 30 (default)
 -k: History QoS setting:
    0 - only store up to N samples, configurable via the queue depth (default)
    1 - keep all the samples
 -s: Camera stream:
    0 - Do not show the camera stream
    1 - Show the camera stream
 -x WIDTH and -y HEIGHT. Resolution.
    Please type v4l2-ctl --list-formats-ext
    to obtain a list of valid values.
 -b: produce images of burgers rather than connecting to a camera
 -t TOPIC: use topic TOPIC instead of the default

Originally posted by gvdhoorn with karma: 86574 on 2019-12-01
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Poseidonius on 2019-12-01:
Hi gvdhoorn,
Based on the code, you seem to be right. Is there a good reason to connect this statically to video0? Or are other packages avilable with a more flexible interface?
Best wishes!
Sebastian
Comment by gvdhoorn on 2019-12-01:\

Is there a good reason to connect this statically to video0?

This package is a demo package, it was never designed to be a generic replacement for something like usb_cam (the ROS 1 pkg).

Or are other packages avilable with a more flexible interface?

No, I don't. I'm sorry.
Comment by Dirk Thomas on 2019-12-02:
Contributing a patch to add a new command line argument to pass the device name should be pretty straight forward.
Comment by gvdhoorn on 2019-12-03:
That would indeed not be too difficult and would make a great addition.
@Poseidonius: please consider contributing that change. It would appear it would help you and it would help future users as well.

