Q:

How to get coordinates from depthImage

Hi
I am working with depthImages. This is my first time with camera models, so I do not understand how to get the information I need from camera_info topic.
My inputs are a CameraInfo and a Image(depthimage) topics.
I need to get the coordinates (in odom frame) of one of the pixels.
Can anyone explain me how to do it?
I have tried too much things but the results are wrong. I think it may be because of the matrices that define the camera or the focal length... but I am lost in this field.
Thank you.

Originally posted by arebot on ROS Answers with karma: 11 on 2014-10-23
Post score: 1

A:

How you would do it in python (not tested) given a CameraInfo message info, pixel coordinates (u, v), and the depth at those coordinates, d:
import image_geometry, numpy
cam_model = image_geometry.PinholeCameraModel()
cam_model.fromCameraInfo(info)
ray = numpy.array(cam_model.projectPixelTo3dRay((u,v))
point3d = ray * d

Originally posted by Dan Lazewatsky with karma: 9115 on 2014-10-23
This answer was ACCEPTED on the original site
Post score: 2

