Q:

Robot Rotating relative to odom in RViz when it is stationary

Hi,
I'm using a Clearpath Husky A200 with a sick LMS111 LIDAR. When I open RVIZ I can see the points generated by the LIDAR and they are in the correct position relative to the husky. However, both the husky and the LIDAR points are rotating in RViz when the fixed frame is odom, even though the husky isn't moving. When I try to generate a map using gmapping, the map ends up having the same features at different orientations and looks round even though the room is rectangular. I'm using ROS indigo on the husky. Does anyone know what could be causing this problem?
Thanks

Originally posted by emlynw on ROS Answers with karma: 3 on 2020-01-09
Post score: 0

A:

My first guess would be that it's connected to your other sensors. Do you have an IMU that is spewing out data? If so, my guess would be that this IMU has some noise, which is causing the robot to slowly rotate.

Originally posted by Joe28965 with karma: 1124 on 2020-01-09
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by emlynw on 2020-01-09:
Yes I've got an IMU connected too. Do you know how can I fix this if this is the problem? I'll try doing the same without the IMU plugged in to see what happens
Comment by Joe28965 on 2020-01-09:
What do you use to create your map? Is it gmapping? I know cartographer will update the map if it has detected the robot has started drifting. However, I'm not sure if using cartographer will fix your problem since I'm by no means an expert when it comes to ROS and have never personally used ROS indigo
Comment by emlynw on 2020-01-09:
I've just tried unplugging the IMU and it seems to solve the problem of the LIDAR points rotating relative to the odom frame so thanks! I've tried calibrating the IMU but it still causes the same error so I'm unsure how to fix that, any ideas? I used gmapping but got the weird round maps. I've now tried using hector_slam and am getting decent maps even with the IMU so I think it must also correct for drift.
Comment by Joe28965 on 2020-01-09:
well slam is Simultaneous Localisation And Mapping, so you should check which part of the package actually does the localisation and see if you can somehow tweak some there, maybe make it rely more on other sensors?
Comment by emlynw on 2020-01-10:
Even when I'm not running slam, in RViz the walls return to a fixed point relative to the fixed odom frame with the IMU unplugged but do not stay fixed to odom with the IMU plugged in

