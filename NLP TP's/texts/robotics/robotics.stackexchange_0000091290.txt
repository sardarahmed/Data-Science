Q:

ROS Answers SE migration: UR10e status

What will is to get the status of the ur10e. When it is in some kind of stop for for instance protected stop or when the emergency button is press. I use now the ur_modern_driver and i subscribe to the /robot_status and get:
header: 
  seq: 6566
  stamp: 
    secs: 0
    nsecs:         0
  frame_id: ''
mode: 
  val: 2
e_stopped: 
  val: 0
drives_powered: 
  val: 1
motion_possible: 
  val: 1
in_motion: 
  val: -1
in_error: 
  val: 0
error_code: 0

but here i can only see if it is in error not if it is a protected stop of emergency button was press. Is there a anther topic where this status is shown or?

Originally posted by JoeryTemmink on ROS Answers with karma: 18 on 2019-04-08
Post score: 0

Original comments
Comment by gvdhoorn on 2019-04-08:
Could you please reference ros-industrial/ur_modern_driver#285? It's almost a duplicate and provides more context.

A:

i can only see if it is in error not if it is a protected stop of emergency button was press. Is there a anther topic where this status is shown or?

that is because robot_status carries industrial_msgs/RobotStatus messages which are generic. "protected stop" is UR nomenclature, not generic.
What you're looking for is called RobotMode. It's the data packet broadcast by the UR controller that contains fields like is_emergency_stopped and is_protective_stopped. In the ur_modern_driver, that data is published in ur_msgs/RobotModeDataMsg messages (on the /ur_driver/robot_mode_state topic):

uint64 timestamp

bool is_robot_connected
bool is_real_robot_enabled
bool is_power_on_robot
bool is_emergency_stopped
bool is_protective_stopped
bool is_program_running
bool is_program_paused

Please note that by integrating these topics (and messages) into an application, you embed an (implicit) assumption into your code that makes it less reusable / reconfigurable (namely: you're checking for the status of a Universal Robot).

Edit:

But if i read this correctly is that there is no topic where the RobotMode data is published to.

As noted in the readme (in the Improvements section) the ur_modern_driver publishes RobotModeDataMsgs on the /ur_driver/robot_mode_state topic.

Originally posted by gvdhoorn with karma: 86574 on 2019-04-08
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by JoeryTemmink on 2019-04-08:
yes that is what i mean! But if i read this correctly is that there is no topic where the RobotMode data is published to.
Comment by JoeryTemmink on 2019-04-08:
Ah now i know why i coun't find it! The RobotMode is on the master branche of the ur_modern_driver (at GitHub). But i use the kinetic_devel and there is no RobotMode. I use the kinetic-devel instead of the master becouse when i use the master with the robot it stops at every waypoint and with the kinetic-devel it wil go with a smooth motion.
Comment by gvdhoorn on 2019-04-08:\

The RobotMode is on the master branche of the ur_modern_driver (at GitHub). But i use the kinetic_devel and there is no RobotMode.

No, it should be there on kinetic-devel as well. But you need to be running a recent version. If you've checked out ros-industrial/ur_modern_driver before April the 4th then you need to fetch the latest version, as it was only added recently.
If you can show us the output of git rev-parse HEAD | cut -c1-8 (after cding to the ur_modern_driver directory in your workspace) then we can see whether your clone is up-to-date.
Comment by JoeryTemmink on 2019-04-09:
Thanks that was the problem i had the version before 4th of April.

