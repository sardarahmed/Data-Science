Q:

Autoware :1.12.0 Build error

Operating system and version:
Ubuntu 18.04
gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0
cmake version 3.10.2
Autoware installation type
Built from source (https://gitlab.com/autowarefoundation/autoware.ai/autoware/wikis/Source-Build)
Autoware version : 1.12.0
ROS distribution:
melodic
ROS installation type:
sudo apt-get install ros-melodic-desktop-full
When I did this command colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release I am getting following error basically citysim package failed

This code block was moved to the following github gist:
https://gist.github.com/answers-se-migration-openrobotics/20012288029825fd73ad0ce240f878d1

Originally posted by AM97 on ROS Answers with karma: 139 on 2019-06-27
Post score: 1

A:

There are likely 1 of 3 things going on here:

Something from a previous build has been cached and is causing issues. To clean your colcon workspace, cd to the base of the workspace (above the src folder), and run rm -rf install/ build/ log/, then re-run the colcon command.
An incompatibility with the version of Google's Protocol Buffers that you have installed. If you installed them from source, go to the source folder and run sudo make uninstall and then try reinstalling with the command sudo apt install --reinstall protobuf-compiler protobuf-c-compiler libprotoc-dev libprobuf-dev.
An incompatibility with the version of Gazebo that you have installed. Did you install it from source? If so, you'll have to manually remove it (generally sudo make uninstall in the source code folder) and re-install it from the repositories (sudo apt install gazebo9).

Originally posted by Josh Whitley with karma: 1766 on 2019-06-27
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by AM97 on 2019-06-27:
@Maximus I checked all the above mentioned three and did it but I am getting same error
Comment by Josh Whitley on 2019-06-27:
Did you use the instructions for the 1.12.0-alpha.2 release or the "bleeding edge" version? Can you go into the citysim folder and do git fetch && git status and give me the output?
Comment by AM97 on 2019-06-28:
@Maximus I used the instructions for the 1.12.0-alpha.2 .(wget -O autoware.ai.repos https://gitlab.com/autowarefoundation/autoware.ai/autoware/raw/1.12.0-alpha.2/autoware.ai.repos?inline=false ) from this link (https://gitlab.com/autowarefoundation/autoware.ai/autoware/wikis/Source-Build)
git fetch && git status of citysim folder
HEAD detached at 27bd05b
nothing to commit, working tree clean.
Comment by AM97 on 2019-06-28:
@Maximus I was able to install somehow but I was unable to run since there is no such directory. When I downloaded previously from github I used to change directory to Autoware/ros and do ./run. but now How i need to run?
Comment by Josh Whitley on 2019-06-28:
@sm94 - See if this article helps any: https://bitbucket.org/osrf/gazebo/issues/2496/protobuf-error-on-ubuntu-1804
Comment by AM97 on 2019-06-28:
@Maximus5684- Solved. Thanks
Comment by Josh Whitley on 2019-06-28:
@sm94 - Would you mind adding an answer on this question with what you found to be the solution to help others? Thanks.
Comment by AM97 on 2019-06-28:
@Maximus Sure. I manually installed google-cartographer and protobuf3 was manually installed in my system and later I installed later by this sudo apt install --reinstall protobuf-compiler protobuf-c-compiler libprotoc-dev libprobuf-dev . So, therefore, it overwrites my system I guess the same error as mentioned in the comments section. If anyone gets this kind of error, I would advise you to clear the caches from the previous build and check if the gazebo is properly installed and mainly check about the protobuf issue. I guess it sorts out everything if you have this error. If anyone has more queries please comment I will try my best to give the best possible solution. Thanks
Comment by harshal on 2022-01-25:
For future reference, in case of having cartographer's system wide protoc/protobuf install: https://github.com/osrf/gazebo/issues/2496#issuecomment-658545600

