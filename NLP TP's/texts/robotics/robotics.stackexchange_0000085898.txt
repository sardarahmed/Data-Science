Q:

sensor_msgs - Can't build tutorial project

I am trying to pass images as messages in a simple ROS project. I'm a complete beginner in ROS and robotics. The tutorial I'm trying to follow is here:
http://wiki.ros.org/cv_bridge/Tutorials/ConvertingBetweenROSImagesAndOpenCVImagesPython
But I can't get past adding dependencies to the package and building it. Here are the commands I have used to create my project:
mkdir image_pkg_test
cd image_pkg_test/
mkdir -p catkin_ws/src
cd catkin_ws/
catkin_make
source devel/setup.bash
cd src
catkin_create_pkg image_msg_tests sensor_msgs opencv3 cv_bridge rospy roscpp std_msgs
cd ..
catkin_make

The catkin_make command fails with the following message:
CMake Error at /opt/ros/kinetic/share/cv_bridge/cmake/cv_bridgeConfig.cmake:172 (find_package):
  Could not find a package configuration file provided by "sensor_msgs" with
  any of the following names:

    sensor_msgsConfig.cmake
    sensor_msgs-config.cmake

  Add the installation prefix of "sensor_msgs" to CMAKE_PREFIX_PATH or set
  "sensor_msgs_DIR" to a directory containing one of the above files.  If
  "sensor_msgs" provides a separate development package or SDK, be sure it
  has been installed.
Call Stack (most recent call first):
  /opt/ros/kinetic/share/catkin/cmake/catkinConfig.cmake:76 (find_package)
  image_msg_tests/CMakeLists.txt:10 (find_package)

-- Configuring incomplete, errors occurred!

However, rospack find sensor_msgs shows:
/opt/ros/kinetic/share/sensor_msgs

So this package is at least partially installed. What am I doing wrong? How can I debug the issue more effectively?

Originally posted by dharmaforone on ROS Answers with karma: 1 on 2018-03-14
Post score: 0

Original comments
Comment by jayess on 2018-03-14:
Is there a difference between this question and your other #q285467?
Comment by dharmaforone on 2018-03-14:
No. But the first time I tried to post it, I was required to register and there was no indication that the question was successfully posted after registering since it goes to moderation. I've deleted the other one.

A:

pengjiawei answer will help you get it up and running.
However, since you are a beginner I would like to give you a couple of pieces of advice so that you avoid mistakes like this in the future.

As stated in the tutorial you should source your setup.bash because it gives you access to ROS commands (as stated in the tutorial). Also, you should do that in every new terminal you open, unless you put the command in .bashrc. You can find more about it here and more about source command here.
Furthermore, I think it is a good practice to have a ROS folder in your home folder and, inside it, catkin workspaces you are working on. That way, you would have all your catkin workspaces in ROS folder and in every workspace you would have some ROS packages related to that workspace.

If you have any further question, feel free to ask.

Originally posted by dljubic with karma: 516 on 2018-03-18
This answer was ACCEPTED on the original site
Post score: 0

