Q:

How to get laser data from gazebo?

I have modeled a robot with a laser sensor. Whenever it sees anything it range I want to set some force to a joint. I don't understand how to get the laser data via gazebo.
Any help will be appreciated

Originally posted by lory18 on Gazebo Answers with karma: 3 on 2017-05-19
Post score: 0

Original comments
Comment by sloretz on 2017-05-19:
What version of gazebo are you using?
Comment by lory18 on 2017-05-19:
i'm using gazebo ver 7

A:

There are a couple ways to get the laser data. These work for both the Gpu based ray sensor and CPU based ray sensor, but I'll assume the former. If you're using the CPU based sensor just remove Gpu from everything.

Follow this tutorial to subscribe to the gazebo topic laser data

OR

Implement a sensor plugin based on GpuRayPlugin

The laser data topic uses publishes a protobuf message every time the sensor makes a measurement. The message definition is LaserScanStamped which is a time stamped LaserScan message. You can see how it gets populated here.
This tutorial shows how you implement a plugin. You'll want to implementing a sensor plugin and inherit from GpuRayPlugin. Specifically your code will go in OnNewLaserFrame

Originally posted by sloretz with karma: 558 on 2017-05-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by lory18 on 2017-05-22:
Thanks for the answer, i was missing the part of extrapolating data from msgs, after reading the code it's more clear!

