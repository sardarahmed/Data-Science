Q:

topological_navigation USAGE

Hi I am trying to use topological navigation demo of  ICRA2011 Navigation using topological maps paper  on Ubuntu 10.04, ROS Diamondback (installed from repository using debs).
I am able to setup code and launch as mentioned in ICRA2011 link .
I am not able to find how to move robot around or is there any usage file? Video on ICRA2011 link  is pretty impressive and I believe is in rviz.
Log file can be found at link.
Terminal output can be found at link.
Update 1:
I had finally able to setup stack. Current teleoperation is by using erratic_teleop package and I can move robot around. A couple of questions:

I believe, in backgroup, topological mapping is happening but how do i legally stop the task. If I just terminate the launch (Ctr-C), how do I access map for reuse.

There are errors on console. Some of them are:
[ WARN] [1331911029.473383296, 31.400000000]: The base_scan observation buffer has not been updated for 0.50 seconds, and it should be updated every 0.40 seconds.
[ERROR] [1331911029.634849561, 31.500000000]: You requested a transform that is 0.800 seconds in the past,
but the tf buffer only has a history of 0.000 seconds.
When trying to transform between /grid1 and /grid6.
[ERROR] [1331911029.695031327, 31.600000000]: Connectivity Error: Could not find a common time /base_link and /grid6.
[ERROR] [1331911029.695191357, 31.600000000]: TF Exception that should never happen for sensor frame: , cloud frame: base_laser_link, You requested a transform that is 0.800 seconds in the past,
but the tf buffer only has a history of 0.100 seconds.
When trying to transform between /base_laser_link and /grid6.
[ WARN] [1331911095.812461695, 94.400000000]: Costmap2DROS transform timeout. Current time: 94.4000, global_pose stamp: 93.3000, tolerance: 0.8000
[ WARN] [1331911096.016113185, 94.600000000]: The base_scan observation buffer has not been updated for 1.20 seconds, and it should be updated every 0.40 seconds.
[ WARN] [1331911116.738728504, 114.400000000]: The origin for the sensor at (1.77, -7.73, 0.15) is out of map bounds. So, the costmap cannot raytrace for it.

Complete log is here  . Any help regarding these errors will be great.
nitin

Originally posted by prince on ROS Answers with karma: 660 on 2012-02-03
Post score: 2

A:

Install the stack. instructions are available at http://ros.org/wiki/topological_navigation
$roscd topological_roadmap/launch
$rosrun rviz rviz
Add following configuration file :
Background\ ColorR=0
Background\ ColorG=0
Background\ ColorB=0
Fixed\ Frame=/map
Target\ Frame=/odom
Grid.Alpha=0.5
Grid.Cell\ Size=1
Grid.ColorR=0.5
Grid.ColorG=0.5
Grid.ColorB=0.5
Grid.Enabled=1
Grid.Line\ Style=0
Grid.Line\ Width=0.03
Grid.Normal\ Cell\ Count=0
Grid.OffsetX=0
Grid.OffsetY=0
Grid.OffsetZ=0
Grid.Plane=0
Grid.Plane\ Cell\ Count=1000
Grid.Reference\ Frame=<Fixed Frame>
Inflated\ Obstacles.Alpha=1
Inflated\ Obstacles.ColorR=0
Inflated\ Obstacles.ColorG=0
Inflated\ Obstacles.ColorB=1
Inflated\ Obstacles.Enabled=0
Inflated\ Obstacles.Topic=/move_base_node/local_costmap/inflated_obstacles
Laser\ Scan.Alpha=1
Laser\ Scan.Billboard\ Size=0.051
Laser\ Scan.Color\ Transformer=Intensity
Laser\ Scan.Decay\ Time=0
Laser\ Scan.Enabled=1
Laser\ Scan.Position\ Transformer=XYZ
Laser\ Scan.Selectable=1
Laser\ Scan.Style=1
Laser\ Scan.Topic=/base_scan
Laser\ Scan..AxisAutocompute\ Value\ Bounds=1
Laser\ Scan..AxisAxis=2
Laser\ Scan..AxisMax\ Value=10
Laser\ Scan..AxisMin\ Value=-10
Laser\ Scan..AxisUse\ Fixed\ Frame=1
Laser\ Scan..Flat\ ColorColorR=1
Laser\ Scan..Flat\ ColorColorG=1
Laser\ Scan..Flat\ ColorColorB=1
Laser\ Scan..IntensityAutocompute\ Intensity\ Bounds=1
Laser\ Scan..IntensityMax\ ColorR=0.964706
Laser\ Scan..IntensityMax\ ColorG=0.964706
Laser\ Scan..IntensityMax\ ColorB=0.0784314
Laser\ Scan..IntensityMax\ Intensity=0
Laser\ Scan..IntensityMin\ ColorR=0
Laser\ Scan..IntensityMin\ ColorG=0
Laser\ Scan..IntensityMin\ ColorB=0
Laser\ Scan..IntensityMin\ Intensity=0
Local\ GRid.Alpha=0.7
Local\ GRid.Draw\ Behind=0
Local\ GRid.Enabled=0
Local\ GRid.Topic=/local_grid
Map.Alpha=0.7
Map.Draw\ Behind=0
Map.Enabled=1
Map.Topic=/map
Obstcal\ grid\ cells.Alpha=1
Obstcal\ grid\ cells.ColorR=1
Obstcal\ grid\ cells.ColorG=0.109804
Obstcal\ grid\ cells.ColorB=0
Obstcal\ grid\ cells.Enabled=1
Obstcal\ grid\ cells.Topic=/move_base_node/local_costmap/obstacles
Path.Alpha=1
Path.ColorR=0.1
Path.ColorG=1
Path.ColorB=0
Path.Enabled=1
Path.Topic=/move_base_node/NavfnROS/plan
Path2.Alpha=1
Path2.ColorR=1
Path2.ColorG=0
Path2.ColorB=0.0431373
Path2.Enabled=1
Path2.Topic=/move_base_node/TrajectoryPlannerROS/local_plan
Robot\ Footprint.Alpha=1
Robot\ Footprint.ColorR=1
Robot\ Footprint.ColorG=0
Robot\ Footprint.ColorB=0
Robot\ Footprint.Enabled=1
Robot\ Footprint.Topic=/move_base_node/local_costmap/robot_footprint
TF.All\ Enabled=1
TF.Enabled=0
TF.Frame\ Timeout=15
TF.Show\ Arrows=1
TF.Show\ Axes=1
TF.Show\ Names=1
TF.Update\ Interval=0
Topological\ Markers.Enabled=1
Topological\ Markers.Marker\ Topic=visualization_marker
Topological\ Markers.constraint_graph=1
Topological\ Markers.graph_localization=1
Topological\ Markers.roadmap=1
Topological\ Markers.topological_map=0
Topological\ Markers.topological_map_edges=0
Tool\ 2D\ Nav\ GoalTopic=/move_base_simple/goal
Tool\ 2D\ Pose\ EstimateTopic=initialpose
Camera\ Type=rviz::OrbitViewController
Camera\ Config=0.131 0.577591 52.0679 3.32693 0.219778 -13.9919
Property\ Grid\ State=selection=Path2.Enabled.Path2.Color;expanded=.Global Options,TF.Enabled.TF.Tree,Topological Markers.Enabled,Topological Markers.Enabled.Topological Markers.Namespaces,Path.Enabled,Path2.Enabled;scrollpos=0,0;splitterpos=196,378;ispageselected=1
[Display0]
Name=Map
Package=rviz
ClassName=rviz::MapDisplay
[Display1]
Name=Robot Footprint
Package=rviz
ClassName=rviz::PolygonDisplay
[Display2]
Name=Inflated Obstacles
Package=rviz
ClassName=rviz::GridCellsDisplay
[Display3]
Name=Laser Scan
Package=rviz
ClassName=rviz::LaserScanDisplay
[Display4]
Name=Grid
Package=rviz
ClassName=rviz::GridDisplay
[Display5]
Name=TF
Package=rviz
ClassName=rviz::TFDisplay
[Display6]
Name=Topological Markers
Package=rviz
ClassName=rviz::MarkerDisplay
[Display7]
Name=Obstcal grid cells
Package=rviz
ClassName=rviz::GridCellsDisplay
[Display8]
Name=Local GRid
Package=rviz
ClassName=rviz::MapDisplay
[Display9]
Name=Path
Package=rviz
ClassName=rviz::PathDisplay
[Display10]
Name=Path2
Package=rviz
ClassName=rviz::PathDisplay

This will enable visualization of algorithm output for example roadmap, topological_map, constraint_graph, graph_localization etc.
$ rosrun erratic_teleop  erratic_keyboard_teleop
You can teleoperate the robot and see the map development.
It is also possible to pass the goal using rviz. It plans and follow the path (currently in my setup, only in local occupancy grid). I had some errors in TF.
[ERROR] [1332770625.887798300, 1543.600000000]: TF Exception that should never happen for sensor frame: , cloud frame: base_laser_link, You requested a transform that is 0.300 seconds in the past, 
but the tf buffer only has a history of 0.100 seconds.
 When trying to transform between /base_laser_link and /grid67.

I am able to create topological maps. The data is getting stored in package laser_slam in folder data.

Originally posted by prince with karma: 660 on 2012-03-25
This answer was ACCEPTED on the original site
Post score: 0

