Q:

[Autoware] Create custom map - osm file version

I'm trying to pass custom map using map publisher and lanelet2 map provider configs. Using recorded pointcloud data, ndt mapper and vector map builder I already created a new pcd map with corresponding semantic map. Then I changed mentioned above config to load new files.

I couldn't load pcd map. Looking into default .pcd file I noticed some differences. Ndt mapper produce pointcloud map using  4 channels (x, y, z, intensity). So I just remove the last channel and map was loaded successfully. But is it possible to load properly 4 channels .pcd file?
I still can't load .osm file. Again, there are some differences:

part of autoware included file:

<osm version='0.6' generator='JOSM'>
  <node id='1001' visible='true' version='1' lat='37.38143282929' lon='-121.90825956337'>
    <tag k='ele' v='-1.4483755826950073' />
  </node>

part of my custom file (created with vector map builder):

<osm generator="VMB">
  <MetaInfo format_version="1" map_version="4"/>
  <node id="1" lat="" lon="">
    <tag k="mgrs_code" v="99XXX000000"/>
    <tag k="local_x" v="52.9384"/>
    <tag k="local_y" v="38.5049"/>
    <tag k="ele" v="0"/>
  </node>
In rviz I can see new pcd map without semantic map. The /had_maps/viz_had_map topic returns error Contains invalid floating point values (nans or infs).
Are these differences in the .osm file version causing the maps to load incorrectly?

Originally posted by definitive on ROS Answers with karma: 57 on 2021-08-09
Post score: 0

A:

Hello @definitive , have a look at my Q&A HERE

Originally posted by Aleksandr Savel'ev with karma: 146 on 2021-08-18
This answer was ACCEPTED on the original site
Post score: 1

