Q:

audio_common for ROS2

Hi everyone,
is there any audio_common equivalent package for ROS2?
Thanks in advance,
Cheers,
G.

Originally posted by anthares on ROS Answers with karma: 60 on 2020-06-04
Post score: 1

Original comments
Comment by Georg Bartels on 2022-02-02:
I have the same question and am not sure whether the project linked in the accepted answer actually addresses this. Hence, I opened a question on the github of github_common: https://github.com/ros-drivers/audio_common/issues/177

A:

I'm trying to build that now.
The ROS topic bridges aren't working yet, but it'll happily stream audio from a robot's sound card to a remote machine or play canned audio
https://github.com/BrettRD/ros-gst-bridge
Audio-common was too limited for my application, I've used image messages for audio with a custom encoding string in the past, but I'm about to define some new messages. I'd be glad to have some input.

Originally posted by BrettRD with karma: 86 on 2020-06-12
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Georg Bartels on 2022-02-02:
Hi BrettRD, thanks for starting and sharing such an ambitious project! My use-case is closer to the original audio_common: Play one from a set of audio files located on disk through ROS commands. Do you have a tutorial or instructions on how to do this with your project? I failed to find this on the linked github page. Cheers!
Comment by BrettRD on 2022-02-02:
I don't have many examples of using ROS for audio. I have some improvements penciled in for this year though, that includes more docs.
Off the top of my head, A pipeline like this should do something, (something might include eating all of your network bandwidth with raw audio):
Machine with the mic:
gst-launch-1.0 --gst-plugin-path=install/gst_bridge/lib/gst_bridge/ alsasrc ! audioconvert ! rosaudiosink ros-name="mic_node" ros-topic="very_noise"

Machine with the speakers:
gst-launch-1.0 --gst-plugin-path=install/gst_bridge/lib/gst_bridge/ rosaudiosrc ros-name="spk_node" ros-topic="very_noise"  ! audioconvert ! alsasink sync=false

If you have a burning need for compressed audio in ROS, I'd love to field a pull request (even one that doesn't yet work) for a ROS message wrapper and bridge nodes that handle raw GST buffers.
rosrawsink and rosrawsrc are on my wish-list.
At the moment, I use GStreamer's UDP elements to move H264 video, not ROS topics.

