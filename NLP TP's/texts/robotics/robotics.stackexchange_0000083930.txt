Q:

TypeError: Cannot compare to non-Duration

I want to ignore the immediate call to a function. Hence I need to keep track of the time at which the function was invoked. In other words, I want to skip the function call, if the function is being called before defined time.
Below is the code snippet:
# define time interval
dt = rospy.Time(secs=2)
old = rospy.Time.now()
# doing some task here
now = rospy.Time.now()
if (now - old < dt):
    print 'Ignoring immediate call'

Although, the logic looks fine but the code throws following error at runtime:
TypeError: Cannot compare to non-Duration

Any workaround, please?

Originally posted by ravijoshi on ROS Answers with karma: 1744 on 2017-11-16
Post score: 1

A:

I think the confusion stems from a mixing of ROS Time and Duration objects. In particular, subtracting two Time objects yields a Duration object, which cannot be directly compared to another Time object. The types of objects created by ROS Time & Duration arithmetic are explained on the ROS Wiki: 
http://wiki.ros.org/rospy/Overview/Time#Time_and_Duration_arithmetic
For your example:
>>> old = rospy.Time.now()
>>> new = rospy.Time.now()
>>> print type(new - old)
<class 'genpy.rostime.Duration'>
>>> dt = rospy.Time(secs=2)
>>> print type(dt)
<class 'rospy.rostime.Time'>

if instead we make dt a rospy.Duration, the if statement can be evaluated:
>>> dt = rospy.Duration(secs=2)
>>> print type(dt)
<class 'rospy.rostime.Duration'>
>>> (new - old) < dt
True

Originally posted by imcmahon with karma: 790 on 2017-11-16
This answer was ACCEPTED on the original site
Post score: 4

Original comments
Comment by ravijoshi on 2017-11-16:
Thank you very much for the detailed explanation. I really liked it.
Comment by anonymous60874 on 2022-04-05:
I want to get value from .yaml file. When i get the value i encounter this error. How can I fix or is there any solution?

