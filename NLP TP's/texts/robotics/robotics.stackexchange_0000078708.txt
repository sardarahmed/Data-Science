Q:

Connecting your Wheels in URDF to ROS

So, there is some definite gaps in my ROS knowledge, thanks to the awesome people on here I have nearly got to where I need to.  I have a custom robot, that has hector slam and navigation kinda working :)
I am now adding a URDF model to it so it is easier to see where the sensors are etc.  My robot model starts with Base_frame, which has laser, lwheel, rwheel hanging off of it.  When I move my robot, the laser and baseframe move, however the wheels do not.
Do I need to publish a JointState Message for the wheels? how do I go about this.  my /odom (odom_frame) is created by hector slam

Originally posted by burf2000 on ROS Answers with karma: 202 on 2017-02-02
Post score: 1

A:

You need to make sure you have fixed joints in the URDF between the wheel frames and the robot base frame so that the wheels will move along with the base. If you do that, then updates to the robot position will cause simultaneous updates to the wheel frame positions. Something like this:
<link name="base_link"> ... </link>
<link name="left_wheel_link"> ... </link>
<joint name="base_to_left_wheel" type="fixed">
    <parent link="base_link" />
    <child link="left_wheel_link" />
    <origin xyz="0.0 -0.1 -0.02" />
</joint>

This places the left wheel frame 100mm to the left of robot center and 20mm down (-Z). Similar for the right wheel. Note that by convention the base_link frame has the X axis pointing straight ahead, the Y axis pointing to the left of the robot, and the Z axis pointing up.
You might also need the "rpy=" attribute to  if you need the wheel frame orientation to be different than base_link. (Often not needed for fixed frames which are not sensor locations.)

Originally posted by Mark Rose with karma: 1563 on 2017-02-02
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by FrozenCh on 2017-02-02:
If he checked that fixed type is okay with his robot and wheel, I think the next step is to change the type from "fixed" to "continuous" so that he can use the "differential_drive_controller" plugin.
Comment by burf2000 on 2017-02-05:
So I already have fixed in the link, however what is the differential_drive_controller and what do I need it for
 <joint name="base_to_lwheel" type="fixed">
    <parent link="base_frame"/>
    <child link="lwheel"/>
    <origin xyz="0 0.085 0.07" rpy="1.5708 0 0"/>
  </joint>

Comment by FrozenCh on 2017-02-05:
differential_drive_controller is a plug, by using which we can use cmd_vel, a common topic name for navigation stack, to control your robot model in Gazebo. However, if you just need a model appearance in rviz, then never mind the plugin.
Comment by burf2000 on 2017-02-06:
Thank you, should I still change the fixed to continuous?  I am just a little confused in Rviz what connects to the wheels (except the URDF)
Comment by FrozenCh on 2017-02-06:
The joint type for wheel should be continuous. You can see this as reference. http://wiki.ros.org/urdf/XML/joint
Comment by burf2000 on 2017-02-06:
Thanks mate :)
Comment by burf2000 on 2017-02-10:
Still not working :(
Comment by burf2000 on 2017-02-18:
I needed to also add node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher">

