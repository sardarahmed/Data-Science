Q:

catkin cmake can't find ros packages

when building my ros1 (noetic ubuntu 20.04) package, catkin cmake can't find Catkin packages automatically.
(setting the apth for all works, but it is not the right way: set(roscpp_DIR "/opt/ros/noetic/share/roscpp/cmake")):
CMake Error at /opt/ros/noetic/share/catkin/cmake/catkinConfig.cmake:83 (find_package):
  Could not find a package configuration file provided by "roscpp" with any
  of the following names:

    roscppConfig.cmake
    roscpp-config.cmake

  Add the installation prefix of "roscpp" to CMAKE_PREFIX_PATH or set
  "roscpp_DIR" to a directory containing one of the above files.  If "roscpp"
  provides a separate development package or SDK, be sure it has been
  installed.

roscpp is installed:
$ apt list | grep roscpp

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

cl-roscpp-msg/focal,focal 1.14.3+ds1-11ubuntu5 all
libroscpp-core-dev/focal 0.6.13-1build1 amd64
libroscpp-dev/focal 1.14.3+ds1-11ubuntu5 amd64
libroscpp-msg-dev/focal 1.14.3+ds1-11ubuntu5 amd64
libroscpp-serialization0d/focal 0.6.13-1build1 amd64
libroscpp2d/focal 1.14.3+ds1-11ubuntu5 amd64
python3-roscpp-msg/focal,focal 1.14.3+ds1-11ubuntu5 all
ros-noetic-roscpp-core/focal,now 0.7.3-1focal.20230620.181838 amd64 [installed,automatic]
ros-noetic-roscpp-dbgsym/focal 1.16.0-1focal.20230620.183307 amd64
ros-noetic-roscpp-serialization-dbgsym/focal 0.7.3-1focal.20230620.181650 amd64
ros-noetic-roscpp-serialization/focal,now 0.7.3-1focal.20230620.181650 amd64 [installed,automatic]
ros-noetic-roscpp-traits/focal,now 0.7.3-1focal.20230620.181518 amd64 [installed,automatic]
ros-noetic-roscpp-tutorials-dbgsym/focal 0.10.2-1focal.20230620.184353 amd64
ros-noetic-roscpp-tutorials/focal,now 0.10.2-1focal.20230620.184353 amd64 [installed,automatic]
ros-noetic-roscpp/focal,now 1.16.0-1focal.20230620.183307 amd64 [installed]
ros-noetic-swri-roscpp-dbgsym/focal 2.15.2-1focal.20231105.165502 amd64
ros-noetic-swri-roscpp/focal 2.15.2-1focal.20231105.165502 amd64
ros-roscpp-msg/focal,focal 1.14.3+ds1-11ubuntu5 all

CMakeLists.txt
cmake_minimum_required(VERSION 3.9.1)

project(myproject VERSION 0.1.0 LANGUAGES CXX)

set(CMAKE_BUILD_TYPE Release)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
SET(CMAKE_CXX_FLAGS "-std=c++17")

find_package(Eigen3 REQUIRED)
find_package(OpenCV REQUIRED)
find_package(Open3D REQUIRED)
find_package(catkin REQUIRED COMPONENTS
  roscpp
  rospy
  std_msgs
  sensor_msgs
  geometry_msgs
  tf
)

catkin_package(
  INCLUDE_DIRS
    include
  CATKIN_DEPENDS
    std_msgs
    sensor_msgs
    geometry_msgs
    tf
  DEPENDS
)

include_directories(
  include
  ${catkin_INCLUDE_DIRS}
  ${EIGEN3_INCLUDE_DIR}
  ${OpenCV_INCLUDE_DIRS}
  ${Open3D_INCLUDE_DIRS}
)

set(target_name workspace_estimator)

add_executable(${target_name}
  src/${target_name}_node.cpp
  src/${target_name}.cpp
)

target_link_libraries(${target_name}
  ${catkin_LIBRARIES}
  ${OpenCV_LIBS}
  ${Open3D_LIBRARIES}
)

install(
  DIRECTORY include/${PROJECT_NAME}/
  DESTINATION "${CATKIN_PACKAGE_INCLUDE_DESTINATION}"
)

install(
  DIRECTORY config launch
  DESTINATION "${CATKIN_PACKAGE_SHARE_DESTINATION}"
)

A:

Catkin packages has to be found before other packages:
find_package(catkin REQUIRED COMPONENTS
  roscpp
  rospy
  std_msgs
  sensor_msgs
#   visualization_msgs
  geometry_msgs
  tf
)

find_package(Eigen3 REQUIRED)
find_package(OpenCV REQUIRED)
find_package(Open3D REQUIRED)
```

