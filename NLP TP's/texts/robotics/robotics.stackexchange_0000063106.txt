Q:

Using a library created using rosbuild_add_library

I have created a package in ROS which contains my own header files and I have created a library using these header files using rosbuild_add_library (add_library in case of Catkin) . I wish to make use of this library in another ROS package. Is it enough to add the package ( containing my library ) to the list of dependency in package.xml (or manifest.xml) of the current package and using target_link_libraries( my_target  my_library) in CMakeLists.txt or do I have to specify the complete path to my library?  In other words, do I have to use link_directories(library_directories) even after adding my former package to the package.xml of the current package?
Pkg1 (package) contains a library foo. The library has been created using rosbuild_add_library on one computer and using add_library (for catkin) on another computer. Pkg2 is the package (created in both computers) in which I want to use the library foo.

Originally posted by Hemu on ROS Answers with karma: 156 on 2014-10-06
Post score: 0

Original comments
Comment by BennyRe on 2014-10-06:
Does Pkg2 use rosbuild or catkin? Why do you have two versions of Pkg1 on two different computers?

A:

For fuerte you have to add to your manifest.xml of the lib package:
 <export>
  <cpp cflags="-I${prefix}/include"
        lflags="-Wl,-rpath,${prefix}/lib -L${prefix}/lib -lyour_lib"/>
  </export>

if your headers are placed in the include subfolder for the lib package and the library you creates using rosbulid_add_library is named your_lib like:
rosbuild_abb_library( your_lib src1.cpp src2.cpp )

Your your depenign packages will be automatically compiled against the headers and linked against the lib.
Note:
For catkin (groovy and above) the workaround is slightly different. You do not need this in the package.xml but have to use the catkin_package cmake comand in the CMakeLists.txt of your lib package.........

Originally posted by Wolf with karma: 7555 on 2014-10-06
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Hemu on 2014-10-06:
It worked. I will try using catkin_package command in CMakeLists for the packages built using catkin.

