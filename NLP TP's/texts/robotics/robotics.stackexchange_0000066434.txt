Q:

ROS fuerte - check subscriber

Hi,
I want to check if a subscriber has subscribe properly to a topic. I read in documentation (http://docs.ros.org/api/roscpp/html/classros_1_1NodeHandle.html#aad44a59900a86f6d24f175b28e20c8a3) that this is made checking nodehandle but compiler sais that cant convert nodehandle to bool.
    ros::NodeHandle n;
    /* ... */
    intruder_sub[i]=n.subscribe(topicname.c_str(), 0,Intruder_StateCallBack);
    if(n){
        cout << "cant subscribe to " << topicname << endl;
        assert(false);
    }

What I'm doing wrong?
Thanks in advance.

Originally posted by Bardo91 on ROS Answers with karma: 30 on 2015-03-18
Post score: 0

A:

Well, thats a bit misleading in the documentation you linked.
ros::NodeHandle cannot be converted to bool, ros::Subscriber can and the conversion returns true, i. e. 1, if the subscriber is valid:
http://docs.ros.org/api/roscpp/html/classros_1_1Subscriber.html#a04f246a951fd00f27ca439e46819d0c2
http://docs.ros.org/api/roscpp/html/subscriber_8h_source.html#l00071
In your case it'd be:
ros::NodeHandle n;
/* ... */
intruder_sub[i]=n.subscribe(topicname.c_str(), 0,Intruder_StateCallBack);
if( intruder_sub[i] ){
    cout << "cant subscribe to " << topicname << endl;
    assert(false);
}

In the docu you linked
(http://docs.ros.org/api/roscpp/html/classros_1_1NodeHandle.html#aad44a59900a86f6d24f175b28e20c8a3)
it'd be clearer to understand if it were:
if (sub)
{
...
}

Maybe someone should open a ticket to update that....

Originally posted by Wolf with karma: 7555 on 2015-03-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Bardo91 on 2015-03-18:
That's it. Thank you very much. I put the ticket.

