Q:

How to control turtlesim by a publisher data sent by arduino rosserial

I'm noob in ROS, and i used this aduino code to send Float64 data to ros
#include <std_msgs/Float64.h>

ros::NodeHandle  nh;

std_msgs::Float64 float_msg;

ros::Publisher chatter("chatter", &float_msg);

float x = 5;

void setup()

{

  nh.initNode();

  nh.advertise(chatter);

}

void loop()
{

  float_msg.data = x;

  chatter.publish( &float_msg );

  nh.spinOnce();
  delay(1000);
}

then i used the following command to control turtle sent publisher data
rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- '[chatter, 0.0, 0.0]' '[0.0, 0.0, 1.8]'

but it doesn't read chatter as Float64 data so it doesn't work , even i checked rostopic info chatter and it had float64 data type
Thanks in advance

Originally posted by requestadepache on ROS Answers with karma: 3 on 2019-07-26
Post score: 0

A:

rostopic is not the right command for republishing the content of one topic as a separate message on another topic since it does not evaluate the arguments passed ('[chatter, 0.0, 0.0]' '[0.0, 0.0, 1.8]').
rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- '[chatter, 0.0, 0.0]' '[0.0, 0.0, 1.8]'

The relay_field node from topic_tools (http://wiki.ros.org/topic_tools) is more appropriate for your purpose as it provides this functionality. The command for this would be
rosrun topic_tools relay_field /chatter /turtle1/cmd_vel geometry_msgs/Twist "linear:
  x: m.data
  y: 0.0
  z: 0.0
angular:
  x: 0.0
  y: 0.0
  z: 1.8"

Originally posted by nkhedekar with karma: 138 on 2019-07-27
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by requestadepache on 2019-07-27:
Thanks for your help :)
Comment by nkhedekar on 2019-07-27:
Happy to help :) please accept the answer by clicking on the tick mark on the left if this solved your problem.

