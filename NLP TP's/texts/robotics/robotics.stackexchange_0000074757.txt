Q:

invert an coordinate axis with tf

The coordinate of my robot and the bundled API is
x -> forward
y -> right
z -> down

I want to map such that my base_link is the following
x -> forward
y -> right
z -> up

(I think this is the most common base_link setup)
tf::Transform transform;
//setup transform

tf_broadcaster.sendTransform(tf::StampedTransform(transform, time, "base_link", "my_robot"));

How do I setup tf::Transform to invert the z axis? Do I use a 3x3 matrix to setup my transform to invert the axis? Possible to use the following 3x3 Matrix for the transformation? (tried using .setBasis but I got a bunch of tf warnings).
[[1,0,0],
 [0,1,0],
 [0,0,-1]]

Originally posted by uwleahcim on ROS Answers with karma: 101 on 2016-06-22
Post score: 1

Original comments
Comment by uwleahcim on 2016-06-23:
My UAV uses an internal Left Handed frame (because they thought positive values for z for altitude was more intuitive). I want to switch it to Right Handed frame so that it works with ROS tf.
Comment by uwleahcim on 2016-06-23:
The UAV is left handed axis is the following.
x -> North
y -> East
z -> Up
A right handed setup would have z-> Down

A:

According to REP 103, all coordinate frames are right-handed. The "standard" base_link setup actually has x forward, y left, and z up. That's what I would suggest transforming your frames to.
AFAIK, tf has no support for left-handed frames. Some of the libraries with geometry support that are common in ROS (bullet, Eigen, transformations.py, KDL, etc.) may have some support for transformations with rotations not strictly in SO(3) (such as mirroring transformations), but unless you really have some good reason for getting into this, I think it's best to avoid.

Originally posted by jarvisschultz with karma: 9031 on 2016-06-23
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by uwleahcim on 2016-06-23:
Since tf has no support for left-handed frames, how will I go about transforming my Robot's internal left-handed frame setup?
Btw, my robot is drone. Typically z-axis should be pointing down, but the SDK has the z-axis pointing up (since they though negative values for height feels odd).
Comment by jarvisschultz on 2016-06-23:
Are you sure that the coordinate system for your UAV is left-handed? The description in the question makes it sound like the native system is right-handed, and the system you want to transform it to is left-handed.
Comment by uwleahcim on 2016-06-23:
The UAV is from DJI and here is the frame setup https://developer.dji.com/onboard-sdk/documentation/Appendix/
Notice the "*", they switch the frame to left handed by inverting the height/z-axis.
I need transformation so I can switch the internal left handed frame to work with ros tf.
Comment by jarvisschultz on 2016-06-23:
Convention would say the green axis is the "y axis" not the "z axis". It looks to me like tf will not be able to natively handle any data coming from the API. I'd recommend manually converting any information into a right-handed coordinate system before broadcasting transforms.
Comment by tfoote on 2016-06-23:
As explained in the document you can just reverse their change which is to make the Z direction positive downward by multiplying by -1 in Z only to make it right handed again.
The diagram does use odd colors standard is X red, Y green, Z blue.
Comment by uwleahcim on 2016-06-23:
Currently I'm just inverting the z-axis data from the API before they get publish. So at least all the topics being published into ROS are right handed. However, I have to manually keep track of making API since the API are still left handed.

