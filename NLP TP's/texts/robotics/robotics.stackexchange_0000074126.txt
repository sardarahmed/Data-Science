Q:

RQT Plugin Crashes with Kinetic Kame

I recently upgraded to Kinetic Kame from Jade, and a RQT plugin I have written with C++ crashes on every startup. I get the standard message that a process has died, but I do not see anything in the log file. I put ROS_ERROR() messages in the plugin's constructor, but I do not see any output from them. I'm not sure how to attach gdb to the process since it gets launched through a Python script. Does anyone have any suggestions on how to track down the cause of this problem?
Edit: Using Dirk's suggestion I was able to see more information on the crash. I see the following error:
Thread 1 "python" received signal SIGSEGV, Segmentation fault.
0x00007fffbe4bc5a4 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4

I then run backtrace and get the following. I'm not sure what to do next.
#0  0x00007fffbe4bc5a4 in ?? () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
#1  0x00007ffff7de74ea in call_init (l=<optimized out>, argc=argc@entry=4, 
    argv=argv@entry=0x7fffffffd8c8, env=env@entry=0xf80890) at dl-init.c:72
#2  0x00007ffff7de75fb in call_init (env=0xf80890, argv=0x7fffffffd8c8, 
    argc=4, l=<optimized out>) at dl-init.c:30
#3  _dl_init (main_map=main_map@entry=0x13f48f0, argc=4, argv=0x7fffffffd8c8, 
    env=0xf80890) at dl-init.c:120
#4  0x00007ffff7dec712 in dl_open_worker (a=a@entry=0x7fffffffada0)
    at dl-open.c:575
#5  0x00007ffff7de7394 in _dl_catch_error (
    objname=objname@entry=0x7fffffffad90, 
    errstring=errstring@entry=0x7fffffffad98, 
    mallocedp=mallocedp@entry=0x7fffffffad8f, 
    operate=operate@entry=0x7ffff7dec300 <dl_open_worker>, 
    args=args@entry=0x7fffffffada0) at dl-error.c:187
#6  0x00007ffff7debbd9 in _dl_open (
    file=0x15a1870 "/home/danthony/ros_workspaces/nimbus_asctec/devel/lib//libnimbus_gui.so", mode=-2147483391, 
    caller_dlopen=0x7fffd118d862 <Poco::SharedLibraryImpl::loadImpl(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)+82>, nsid=-2, argc=<optimized out>, argv=<optimized out>, env=0xf80890)
    at dl-open.c:660
#7  0x00007ffff75edf09 in dlopen_doit (a=a@entry=0x7fffffffafd0) at dlopen.c:66
---Type <return> to continue, or q <return> to quit---
#8  0x00007ffff7de7394 in _dl_catch_error (objname=0xa62dd0, errstring=0xa62dd8, mallocedp=0xa62dc8, operate=0x7ffff75edeb0 <dlopen_doit>, args=0x7fffffffafd0) at dl-error.c:187
#9  0x00007ffff75ee571 in _dlerror_run (operate=operate@entry=0x7ffff75edeb0 <dlopen_doit>, args=args@entry=0x7fffffffafd0) at dlerror.c:163
#10 0x00007ffff75edfa1 in __dlopen (file=<optimized out>, mode=<optimized out>) at dlopen.c:87
#11 0x00007fffd118d862 in Poco::SharedLibraryImpl::loadImpl(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /usr/lib/libPocoFoundation.so.9
#12 0x00007fffd118dd80 in Poco::SharedLibrary::SharedLibrary(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /usr/lib/libPocoFoundation.so.9
#13 0x00007fffd1c754a9 in class_loader::class_loader_private::loadLibrary(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, class_loader::ClassLoader*) () from /opt/ros/kinetic/lib/libclass_loader.so
#14 0x00007fffd1c6f9ca in class_loader::ClassLoader::loadLibrary() () from /opt/ros/kinetic/lib/libclass_loader.so
#15 0x00007fffd1c6fbd8 in class_loader::ClassLoader::ClassLoader(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) () from /opt/ros/kinetic/lib/libclass_loader.so
#16 0x00007fffd1c796a1 in class_loader::MultiLibraryClassLoader::loadLibrary(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /opt/ros/kinetic/lib/libclass_loader.so
#17 0x00007fffcea6123f in pluginlib::ClassLoader<rqt_gui_cpp::Plugin>::loadLibraryForClass(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /opt/ros/kinetic/lib//librqt_gui_cpp.so
#18 0x00007fffcea65c6c in pluginlib::ClassLoader<rqt_gui_cpp::Plugin>::createInstance(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /opt/ros/kinetic/lib//librqt_gui_cpp.so
#19 0x00007fffcea5b688 in rqt_gui_cpp::NodeletPluginProvider::create_instance(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /opt/ros/kinetic/lib//librqt_gui_cpp.so
#20 0x00007fffcea5b7da in boost::detail::function::function_obj_invoker1<boost::_bi::bind_t<boost::shared_ptr<nodelet::Nodelet>, boost::_mfi::mf1<boost::shared_ptr<nodelet::Nodelet>, rqt_gui_cpp::NodeletPluginProvider, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&>, boost::_bi::list2<boost::_bi::value<rqt_gui_cpp::NodeletPluginProvider*>, boost::arg<1> > >, boost::shared_ptr<nodelet::Nodelet>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&>::invoke(boost::detail::function::function_buffer&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /opt/ros/kinetic/lib//librqt_gui_cpp.so
#21 0x00007fffce809266 in nodelet::Loader::load(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > const&, std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&) () from /opt/ros/kinetic/lib/libnodeletlib.so
#22 0x00007fffcea5b181 in rqt_gui_cpp::NodeletPluginProvider::create_plugin(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, qt_gui_cpp::PluginContext*) () from /opt/ros/kinetic/lib//librqt_gui_cpp.so
#23 0x00007fffcea60a46 in qt_gui_cpp::RosPluginlibPluginProvider<rqt_gui_cpp::Plugin>::load_explicit_type(QString const&, qt_gui_cpp::PluginContext*) () from /opt/ros/kinetic/lib//librqt_gui_cpp.so
#24 0x00007fffd2314d5e in qt_gui_cpp::CompositePluginProvider::load_plugin(QString const&, qt_gui_cpp::PluginContext*) () from /opt/ros/kinetic/lib/libqt_gui_cpp.so
#25 0x00007fffd2314d5e in qt_gui_cpp::CompositePluginProvider::load_plugin(QString const&, qt_gui_cpp::PluginContext*) () from /opt/ros/kinetic/lib/libqt_gui_cpp.so
#26 0x00007fffd2572776 in ?? () from /opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui_cpp/libqt_gui_cpp_sip.so
#27 0x00007fffd2316445 in qt_gui_cpp::PluginBridge::load_plugin(qt_gui_cpp::PluginProvider*, QString const&, qt_gui_cpp::PluginContext*) () from /opt/ros/kinetic/lib/libqt_gui_cpp.so
#28 0x00007fffd2575994 in ?? () from /opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui_cpp/libqt_gui_cpp_sip.so
#29 0x00000000004c4d5a in PyEval_EvalFrameEx ()
#30 0x00000000004ca39f in PyEval_EvalFrameEx ()
#31 0x00000000004ca39f in PyEval_EvalFrameEx ()
#32 0x00000000004ca39f in PyEval_EvalFrameEx ()
#33 0x00000000004ca39f in PyEval_EvalFrameEx ()
#34 0x00000000004ca39f in PyEval_EvalFrameEx ()
#35 0x00000000004c2e05 in PyEval_EvalCodeEx ()
#36 0x00000000004ca6b5 in PyEval_EvalFrameEx ()
#37 0x00000000004c2e05 in PyEval_EvalCodeEx ()
#38 0x00000000004ca6b5 in PyEval_EvalFrameEx ()
#39 0x00000000004c2e05 in PyEval_EvalCodeEx ()
#40 0x00000000004ca6b5 in PyEval_EvalFrameEx ()
#41 0x00000000004c2e05 in PyEval_EvalCodeEx ()
#42 0x00000000004ca6b5 in PyEval_EvalFrameEx ()
#43 0x00000000004c2e05 in PyEval_EvalCodeEx ()
#44 0x00000000004ca6b5 in PyEval_EvalFrameEx ()
#45 0x00000000004c2e05 in PyEval_EvalCodeEx ()
#46 0x00000000004ca6b5 in PyEval_EvalFrameEx ()
#47 0x00000000004c2e05 in PyEval_EvalCodeEx ()
#48 0x00000000004c2ba9 in PyEval_EvalCode ()
#49 0x00000000004f20ef in ?? ()
#50 0x00000000004eca72 in PyRun_FileExFlags ()
#51 0x00000000004eb1f1 in PyRun_SimpleFileExFlags ()

Originally posted by danthony on ROS Answers with karma: 15 on 2016-05-26
Post score: 1

Original comments
Comment by Dirk Thomas on 2016-05-26:
You can run it with: gdb --args python which rqt
Comment by Felix Widmaier on 2017-08-10:
Since Dirks command is a bit screwed by markdown: gdb --args python $(which rqt)

A:

It looks like your plugin is linked against Qt 4. In Kinetic your plugin must use Qt 5.

Originally posted by Dirk Thomas with karma: 16276 on 2016-05-26
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by danthony on 2016-05-26:
I used the visualization_tools package CMakeLists and package.xml as a reference and got my project to build and launch with Qt5. The only problem was I still  had to call qt5_wrap_cpp and qt5_wrap_ui even with CMAKE_AUTOMOC set, but that seems minor.

