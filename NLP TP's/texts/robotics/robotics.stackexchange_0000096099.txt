Q:

rosbag2_bag_v2_plugins install issue

Hi,
I built ROS melodic and ROS2 eloquent from source and I can run them independently.
Then I built ros1_bridge without any problem.
But, when I try to build the rosbag2_bag_v2_plugins, I get the following linking errors:
Starting >>> rosbag2_bag_v2_plugins
--- stderr: rosbag2_bag_v2_plugins                             
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::impl::AbstractMetaObjectBase::isOwnedBy(class_loader::ClassLoader const*)'
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::MultiLibraryClassLoader::getAllAvailableClassLoaders()'
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::MultiLibraryClassLoader::getRegisteredLibraries[abi:cxx11]()'
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::ClassLoader::isLibraryLoaded()'
collect2: error: ld returned 1 exit status
make[2]: *** [test_rosbag_output_stream] Error 1
make[1]: *** [CMakeFiles/test_rosbag_output_stream.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::impl::AbstractMetaObjectBase::isOwnedBy(class_loader::ClassLoader const*)'
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::MultiLibraryClassLoader::getAllAvailableClassLoaders()'
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::MultiLibraryClassLoader::getRegisteredLibraries[abi:cxx11]()'
/opt/extra/ros/melodic/lib/librviz.so: undefined reference to `class_loader::ClassLoader::isLibraryLoaded()'
collect2: error: ld returned 1 exit status
make[2]: *** [test_rosbag_v2_storage] Error 1
make[1]: *** [CMakeFiles/test_rosbag_v2_storage.dir/all] Error 2
make: *** [all] Error 2
---
Failed   <<< rosbag2_bag_v2_plugins [ Exited with code 2 ]

does anyone have any suggestion for this?
In the past I was able to build the rosbag2_bag_v2_plugins using ROS melodic and ROS2 eloquent installed through the debian packages. Right now, to me, the only difference lies on the installation process...

Originally posted by MCP-TTC on ROS Answers with karma: 11 on 2020-06-08
Post score: 0

A:

It is a matter of following the proper order when sourcing the ROS distros.

Originally posted by MCP-TTC with karma: 11 on 2021-06-30
This answer was ACCEPTED on the original site
Post score: 0

