Q:

quaternions orientation representation

Hi,
I'm trying to understand the geometry_msgs/Pose.msg
Is there a way to non-ambiguously explain how quaternions are used to represent orientation?
I understand how quaternions represent rotation. You take some initial orientation, and then rotate it around vector (x,y,z) by acos(w).
However, when I'm trying to imagine orientation I can't understand what is the initial orientation. Is it set to some constant in ROS?
More specifically, if I have a orientation (w, x,y,z) in 3d to what orientation this corresponds in 2d?
Thanks in advance!

Originally posted by Dimitar Simeonov on ROS Answers with karma: 535 on 2011-04-19
Post score: 11

A:

In order to make sense of a geometry_msgs/Pose message, you need to know the reference coordinate system and the intrinsic coordinate system. These should be clear from the context in which the Pose message is used. To specify the reference coordinate system, many ROS packages use the frame_id field of geometry_msgs/PoseStamped instead of using Pose directly.
For example, robot_pose_ekf publishes the robot pose as PoseStamped, where the reference coordinate system (the fixed world frame, if you like) is odom_combined, and the intrinsic coordinate system of the robot is base_link. As the document linked to by @dornhege points out, the default axis orientation for a body (e.g., a robot) is "x forward, y left, z up". So the interpretation of this particular Pose message is "rotate base_link by the rotation given in the quaternion, relative to the odom_combined frame".

More specifically, if I have a
orientation (w, x,y,z) in 3d to what
orientation this corresponds in 2d?

Generally: none. :-)
Ok, just being cheeky. In cases where a body can only move in 2D (like all the 2D navigation stuff), the rotation axis should be the z axis, since z is "up" (see above). Using the naming conventions from your link, that means that (n_x, n_y, n_z) = (0, 0, 1), so (x, y, z, w) = (0, 0, sin(theta/2), cos(theta/2)).

Originally posted by Martin Günther with karma: 11816 on 2011-04-20
This answer was ACCEPTED on the original site
Post score: 14

Original comments
Comment by tfoote on 2011-06-14:
There's another question/answer at http://answers.ros.org/question/948/what-are-quaternions-and-how-can-i-use-them with summaries of Quaternions.
Comment by Dimitar Simeonov on 2011-04-21:
Thanks, Martin, I was unsure about the reference coordinate system when I wrote my question, but couldn't quite explain it.
Comment by Yami on 2013-09-04:
Hello Martin,
I have a node that gives goal.target_pose.pose.position.x and y and z and also goal.target_pose.pose.orientation.x and y and z and w. I cannot interpret these orientation values, for example, what does Orientation(0,000, 0,000, -0,260, 0,965) mean? Should these values be between 0 and 1? It would be very kind if u could help me with that!
Comment by Martin Günther on 2013-09-04:
@Yami: Please see the links from @tfoote's answer for an introduction to quaternions: http://answers.ros.org/question/948/what-are-quaternions-and-how-can-i-use-them
Comment by Yami on 2013-09-04:
Thanks a world!

