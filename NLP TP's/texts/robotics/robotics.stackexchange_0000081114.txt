Q:

How to notify from publisher to subscriber before stopping publishing data

How to know from subscriber's end that publisher stopped the publishing data. in my subscriber code i am performing clean up operations and would like to know if publisher stopped publishing the data.Here i am publishing the data based on topic not a service so how to create link or notification  between publisher and subscriber in case publisher stopped publishing data. Usually  if publisher node is not publishing the data then subscriber node  callback itself  won't be called.

Originally posted by can-43811 on ROS Answers with karma: 101 on 2017-06-02
Post score: 1

Original comments
Comment by gvdhoorn on 2017-06-03:
Can you confirm whether you are actually trying to determine whether publishers are still on-line (ie: not terminated), instead of just publishing messages?
Comment by can-43811 on 2017-06-03:
if publisher are alive and publishing the data , in this case i don't want any bookkeeping.. i just wanted to know from subscriber's end if publisher got stopped due to crash or ctrl+c  operation and not publishing anything.

A:

There is get_num_connections which is the number of publishers for a subscriber. So if the last connection is terminated (e.g. by shutting down the publisher or the publishing node), this value is going to be zero.
Edit: For cpp, have a look the docu of the Subscriber class and find getNumPublishers

Originally posted by NEngelhard with karma: 3519 on 2017-06-02
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by can-43811 on 2017-06-02:
Thanks but it looks like python API and my subscriber code is written in roscpp. i am asking this question cpp context only. Does ros provide any external API interface through which we can call python API directly in roscpp node. As per my observation most of things are available in python only.

