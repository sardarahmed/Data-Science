Q:

ROS Answers SE migration: robot_pose_ekf

Hi all,
I am using robot_pose_ekf for combining my IMU data with robot odometry to have a better odometry. but the big problem is that this node does not publish the result of combination as a
(nav_msgs/Odometry) message. So does any body already solved this issue? i tried writing another node for converting output of this node  (geometry_msgs/PoseStamped) to (nav_msgs/Odometry) but i faced some problem about setting the values of covariances.
So any help would be appreciated.

Originally posted by Alireza on ROS Answers with karma: 717 on 2012-01-12
Post score: 2

A:

Although robot_pose_ekf does not OUTPUT covariances, it must take in covariances. That means that your sensor inputs (wheel_odometry, vo, and imu_data) must produce their own covariances. The IMU's covariance can be obtained from the datasheet. As for wheel odometry and visual odometry, take a look at what the pr2 does for covariances. You could probably just run the pr2 simulator and look at the output of wheel_odometry and vo to see what they have.
When you try to re-compile the output of pose_ekf into a nav_msgs/Odometry message, you don't need to fill in the covariances unless the node that subscribes to odometry_combined also needs covariance.
As for obtaining the twist, no, robot_pose_ekf will not give you twist. The twist portion of the message is a measure of the robot's velocities in each direction. You would have to take this data from one of the input messages (probably wheel_odometry). In this case, wheel_odometry would be the only source of twist in the x, y, and theta directions.

Originally posted by DimitriProsser with karma: 11163 on 2012-01-13
This answer was ACCEPTED on the original site
Post score: 2

