Q:

Kinect + Pandaboard + ROS = Fail

Hi there,
i tried to run kinect with ROS on pandaboard (ARMv7-processer), but it failed.
now i am at a point that kinect is running on pandaboard, but not with ROS. I used link text to get kinect started on pandaboard an it works, the sample "SimpleRead" sends data to the terminal with "fps..." and "middlepoint is...".
After that i tried to run openni_kinect stack, downloaded it, but cant build. I tried

rosmake openni_kinect

but it stops with errors:
> make[3]: Verlasse Verzeichnis '/home/panda/ros/image_common/camera_calibration_parsers/build'
> make[3]: Betrete Verzeichnis
> '/home/panda/ros/image_common/camera_calibration_parsers/build'
> Linking CXX shared library
> ../lib/libcamera_calibration_parsers.so
> /usr/bin/ld:
> /usr/local/lib/libyaml-cpp.a(iterator.cpp.o):
> relocation R_ARM_THM_MOVW_ABS_NC
> against `a local symbol' can not be
> used when making a shared object;
> recompile with -fPIC  
> /usr/local/lib/libyaml-cpp.a: could
> not read symbols: Bad value  
> collect2: ld gab 1 als Ende-Status
> zurÃ¼ck   make[3]: ***
> [../lib/libcamera_calibration_parsers.so]
> Fehler 1   make[3]: Verlasse
> Verzeichnis
> '/home/panda/ros/image_common/camera_calibration_parsers/build'
> make[2]: ***
> [CMakeFiles/camera_calibration_parsers.dir/all]
> Fehler 2   make[2]: Verlasse
> Verzeichnis
> '/home/panda/ros/image_common/camera_calibration_parsers/build'
> make[1]: *** [all] Fehler 2   make[1]:
> Verlasse Verzeichnis
> '/home/panda/ros/image_common/camera_calibration_parsers/build'
> -------------------------------------------------------------------------------} [ rosmake ] Output from build of
> package camera_calibration_parsers
> written to: [ rosmake ]   
> /home/panda/.ros/rosmake/rosmake_output-20121114-163131/camera_calibration_parsers/build_output.log
> [rosmake-0] Finished <<<
> camera_calibration_parsers [FAIL] [
> 10.40 seconds ]     [ rosmake ] Halting due to failure in package
> camera_calibration_parsers.  [ rosmake
> ] Waiting for other threads to
> complete. [rosmake-1] Finished <<<
> test_ros [PASS] [ 51.08 seconds ]     
> [ rosmake ] Results:                  
> [ rosmake ] Built 53 packages with 1
> failures.

but yaml-cpp is installed.

Originally posted by RodBelaFarin on ROS Answers with karma: 235 on 2012-11-14
Post score: 1

Original comments
Comment by jbohren on 2012-11-14:
What version of gcc are you using?
Comment by RodBelaFarin on 2012-11-14:
i'm not sure, gonna lookup tomorrow, but i believe to use the newest one.
edit: i am using gcc & cpp version 4.6, no newer one is available.

A:

I managed to get a Kinect working about a year ago on a Pandaboard, however I must warn you that the Pandaboard is not really powerful enough to read out the Kinect at the full framerate and do processing on the side (include encoding and sending it over a network).
My idea was to have the Pandaboard send images over Wifi to a laptop with more computational power which would do the processing. I tried many variations of encoding and resizing to get the highest possible framerate, but I could not get more than 20 fps. After a while (few minutes) the cpu would get too hot and shift down, dropping the framerate to somewhere around 10 fps. If you do the processing on the pandaboard you do not need to encode it and send it, so you might get somewhat higher framerate then, but then you are limited to the computational power of the Pandaboard.
However if you still want to get it to work, here is roughly what I did:

Download the source code for OpenNI
Compile the source code with the arm flag set (follow the instructions at OpenNI somewhere, I am not sure what I had to do)
Disable kernel modules for kinect if necessary (I believe they are called gspca_kinect, google it ;) )
I received some error that it couldn't connect to the Kinect, I had to activate USB BULK type in the OpenNI config
I didn't use any ros package for reading out the Kinect, I created my own package that in my opinion is more efficient and customizable than the ros one, so I am afraid I cannot help you much there. If you want I can give you a link to the code I used.

I hope this is of any help.

Originally posted by Hansg91 with karma: 1909 on 2013-02-21
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by aman501 on 2013-02-21:
I am interested in your code for the kinect. I am trying to do processing on the Pandaboard, but if I can't your code would be of great help.
Comment by Hansg91 on 2013-02-22:
http://code.google.com/p/roman-technologies/source/browse/trunk/image_serverIt is roughly based on ROS packages, OpenCV code and OpenNI examples. The only thing you should need for the package is OpenCV and OpenNI. There are some things there that you won't need, just comment it out :) (nero_msgs)
Comment by aman501 on 2013-02-23:
Thank you! I will get started looking though this immediately.

