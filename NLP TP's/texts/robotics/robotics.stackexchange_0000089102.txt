Q:

Rotate quaternion by body yaw

How to change a quaternion's body-fixed yaw?
Using Matrix3x3's getRPY and then setRPY doesn't work, because this is about the axes, fixed to the initial orientation, so it's fixed yaw, not body yaw.
Using getEulerYPR and then setEulerYPR doesn't work as well, because yaw rotation it the first, and it gets affected the following pitch and roll rotation.
I think getEulerRPY/setEulerRPY might work, but there are no such functions in the tf and tf2 libraries.

Originally posted by okalachev on ROS Answers with karma: 11 on 2018-09-25
Post score: 0

A:

This looks working (pq - input quaternion):
tf::Quaternion q;
q.setRPY(0, 0, angle_to_rotate);
pq = pq * q;

Originally posted by okalachev with karma: 11 on 2018-09-28
This answer was ACCEPTED on the original site
Post score: 0

