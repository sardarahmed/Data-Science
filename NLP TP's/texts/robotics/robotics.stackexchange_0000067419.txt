Q:

catkin share directory vs. workspace directory

Hi,
How can I set a variable inside my CMakeLists.txt to set a variable to point to a file into the workspace which also points to the same file but in the share directory when installed.
Example:
I want to install a "foo.c" inside my_package/src/. Now when installed, it should be in the same directory as the files in the package but in the share folder, so that other later workspaces can compile the source file into there code with a macro this way:
add_executable(foo_node   ...  ${MY_PACKAGE_SOURCE})
Thanks,
Regards,
Christian

Originally posted by cyborg-x1 on ROS Answers with karma: 1376 on 2015-05-05
Post score: 0

A:

You package can use a custom CFG_EXTRAS file to set arbitrary variables when your package is being found: https://github.com/ros/gencpp/blob/956eb08dae4ae293f4e2613757772b5f26cdcd55/CMakeLists.txt#L7
An example package which sets variable to different location in devel-space and in install-space would be: https://github.com/ros/gencpp/blob/956eb08dae4ae293f4e2613757772b5f26cdcd55/cmake/gencpp-extras.cmake.em#L1-L9

Originally posted by Dirk Thomas with karma: 16276 on 2015-05-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by cyborg-x1 on 2015-05-05:
Thanks, I will try that ...
Comment by cyborg-x1 on 2015-05-05:
I added it but now it tells me the following on compilation:
Parse error.  Expected a command name, got unquoted argument with text "@[if".
Comment by cyborg-x1 on 2015-05-05:
If I comment out the if and else statements, it works but the @CMAKE_CURRENT_SOURCE_DIR is not translated into a path when I use message() to print it inside the cmake file: Output is like @(CMAKE_CURRENT_SOURCE_DIR)/src/ is that normal?
Comment by Dirk Thomas on 2015-05-05:
You either gave the filename the wrong extension or have a syntax error in the empy template.
Comment by cyborg-x1 on 2015-05-05:
Ahhh I missed the em! ...      (.cmake.em)

