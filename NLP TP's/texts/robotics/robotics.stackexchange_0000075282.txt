Q:

How to get map's point cloud from rtab_map

How I get PointCloud (PointCloud2) of the map from rtab_map?
I tried topic /rtabmap/cloud_map but it has less resolution than cloud from rtabmapviz (see the screenshot below):
Image from rtabmapbiz (hirez)

Image from /rtabmap/cloud_map (low res)

How can i grub PointCloud of the map in high resolution?

Originally posted by markovalexey on ROS Answers with karma: 15 on 2016-07-18
Post score: 0

A:

Hi,
by default the topic /rtabmap/cloud_map is voxelized at 5 cm. You can change this by setting cloud_voxel_size to 0.01 for rtabmap node. You may also want to reduce cloud_decimation to 1 (default 4) if you want even more points. See rtabmap_ros page for more info.
For convenience, you can use rtabmap_ros/MapCloud plugin in RVIZ (with /rtabmap/mapData topic) to create the 3D point cloud. You will have directly in RVIZ the voxel/decimation parameters. MapCloud rviz plugin is also more efficient than /rtabmap/cloud_map if you just want to visualize the 3D map.
If you want to save a point cloud to a file (e.g., *pcd or *.ply), you can do it in rtabmapviz after clicking on pause, then File->Export point clouds... You will even have more options to regenerate the point clouds at the resolution you want.
cheers

Originally posted by matlabbe with karma: 6409 on 2016-07-18
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by markovalexey on 2016-07-18:
Thank you.
I want to process this point cloud via PCL. What is better: use /rtabmap/cloudmap or /rtabmap/mapData and  convert to pcl::PointCloud (and how I can do It)?
Comment by matlabbe on 2016-07-18:
In this case, use /rtabmap/cloud_map with the corresponding parameters.

