Q:

How to check that message exists with catkin for conditional compilation (sensor_msgs/BatteryState)

Hello, i want to add support for new message but i need some "how to" on detecting available messages with catkin.
I'm thinking to use cmake execute_process() for that. Some thing like that:
execute_process(
    COMMAND ${PYTHON_EXECUTABLE} -c "from sensor_msgs.msg import BatteryState"
    RESULT_VARIABLE BATTERY_STATE_RESULT
)

But maybe catkin already has some macro for that task?

Originally posted by vooon on ROS Answers with karma: 404 on 2016-01-10
Post score: 0

Original comments
Comment by Boris on 2016-01-10:
An alternative way would be to use something like rosmsg show sensor_msgs/BatteryState. Also there seems to be generated variables of the form <package_name>_MESSAGE_FILES which are the lists of paths. However, to get it you probably have to find_package first.

A:

Within CMake you can access the list of message/service files of a package since every message package exports these information in via its CMake extras file. After calling:
find_package(std_msgs REQUIRED)

or
find_package(catkin REQUIRED COMPONENTS std_msgs)

the list of message files is available in the CMake variable:
std_msgs_MESSAGE_FILES

Originally posted by Dirk Thomas with karma: 16276 on 2016-01-10
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by vooon on 2016-01-11:
Looks like i need that code:
list(FIND sensor_msgs_MESSAGE_FILES "msg/BatteryState.msg" BATTERY_STATE_MSG_IDX)
if(${BATTERY_STATE_MSG_IDX} >= 0)
endif()

