Q:

ROS2 and Rviz : only displays values with a radius < 1 meter around the laser

Hello,
I'm using ROS2 bouncy and Rviz, both built from source on Ubuntu 18.04 and I'm trying to display the laser scan on Rviz, but it only shows the value that are on a 1 meter radius around the laser.
Did I miss a parameter in Rviz ? Is it a bug ?
A bit more details : I'm using an Hokuyo ust-20lx, which is supposed to have ~20 meters range, with the urg_node package from link text which is a version for Beta2 (or maybe Ardent, not sure) that I have just slightly modified to make it work on Bouncy. Everything works fine and I've checked the published values which are normals, but rviz only shows values whose range is < 1 meter. I have tried the laser on ROS1 melodic with the urg_node and rviz and it shows the normal values.
Any suggestion ? Should I post an issue on rviz' github ?

Originally posted by Marc Testier on ROS Answers with karma: 203 on 2018-07-26
Post score: 2

Original comments
Comment by eric1221bday on 2018-07-28:
It's not an answer, but since I've run into similar problems and have been able to reproduce it using a dummy node, I've submitted it as an issue on the ros2/rviz github page, https://github.com/ros2/rviz/issues/341

A:

Alright So I feel confident in answering this now that I've figured out the problem.
This behavior is actually a very nasty bug caused by a collision of two default arguments in the rviz LaserScan display plugin. You can read more about it in the pull request I've submitted here.
The pull request is still in review so unless you're willing and able to build rviz2 and probably ros2 from scratch as well you would just have to wait until the next release.
Hope this helps

Originally posted by eric1221bday with karma: 245 on 2018-07-30
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by Marc Testier on 2018-07-30:
Indeed, I tried your solution and it works.
Comment by UserK on 2020-06-23:
Could you provide some details about the steps required to build rviz? I came across this undesired behaviour in 2020. I am using ros noetic.

