Q:

undefined reference to symbol 'vtable for boost::detail::thread_data_base'

hi all,
I am trying to build macros to add executable.
I create my package and add this rosbuild_add_executable(mytele_keyboard src/turtlebot_key.cpp) in  CMakeLists.txt
then When do rosmake my package I get 1 failure !!
I am now try to understand what is wrong

amal@amal-HP-G62-Notebook-PC:/opt/ros/fuerte/stacks/turtlebot_apps/turtlebot_teleop/src$ rosmake mytele
[ rosmake ] rosmake starting...                                                                          
[ rosmake ] Packages requested are: ['mytele']                                                           
[ rosmake ] Logging to directory /home/amal/.ros/rosmake/rosmake_output-20121210-031624                  
[ rosmake ] Expanded args ['mytele'] to:
['mytele']                                                      
[rosmake-0] Starting >>> geometry_msgs [ make ]                                                          
[rosmake-1] Starting >>> roslang [ make ]                                                                
[rosmake-0] Finished <<< geometry_msgs  No Makefile in package geometry_msgs                             
[rosmake-1] Finished <<< roslang  No Makefile in package roslang                                         
[rosmake-1] Starting >>> rospy [ make ]                                                                  
[rosmake-3] Starting >>> roscpp [ make ]                                                                 
[rosmake-1] Finished <<< rospy  No Makefile in package rospy                                             
[rosmake-3] Finished <<< roscpp  No Makefile in package roscpp                                           
[rosmake-3] Starting >>> mytele [ make ]                                                                 
[ rosmake ] Last 40 linestele: 0.8 sec ]                                        [ 1 Active 4/5 Complete ]
{-------------------------------------------------------------------------------
  mkdir -p bin
  cd build && cmake -Wdev -DCMAKE_TOOLCHAIN_FILE=`rospack find rosbuild`/rostoolchain.cmake  ..
  [rosbuild] Building package mytele
  [rosbuild] Including /opt/ros/fuerte/share/roscpp/rosbuild/roscpp.cmake
  [rosbuild] Including /opt/ros/fuerte/share/rospy/rosbuild/rospy.cmake
  [rosbuild] Including /opt/ros/fuerte/stacks/client_rosjava_jni/rosjava_jni/cmake/rosjava.cmake
  [rosbuild] Including /opt/ros/fuerte/share/roslisp/rosbuild/roslisp.cmake
  -- Configuring done
  -- Generating done
  CMake Warning:
    Manually-specified variables were not used by the project:
  
      CMAKE_TOOLCHAIN_FILE
  
  
  -- Build files have been written to: /home/amal/ros/sandbox/turtlebot_sim/mytele/build
  cd build && make -l4
  make[1]: Entering directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[2]: Entering directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[3]: Entering directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[3]: Leaving directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  [  0%] Built target rospack_genmsg_libexe
  make[3]: Entering directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[3]: Leaving directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  [  0%] Built target rosbuild_precompile
  make[3]: Entering directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[3]: Leaving directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[3]: Entering directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  Linking CXX executable ../bin/mytele_keyboard
  /usr/bin/ld: CMakeFiles/mytele_keyboard.dir/src/turtlebot_key.o: undefined reference to symbol 'vtable for boost::detail::thread_data_base'
  /usr/bin/ld: note: 'vtable for boost::detail::thread_data_base' is defined in DSO /usr/lib/libboost_thread.so.1.46.1 so try adding it to the linker command line
  /usr/lib/libboost_thread.so.1.46.1: could not read symbols: Invalid operation
  collect2: ld returned 1 exit status
  make[3]: *** [../bin/mytele_keyboard] Error 1
  make[3]: Leaving directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[2]: *** [CMakeFiles/mytele_keyboard.dir/all] Error 2
  make[2]: Leaving directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/amal/ros/sandbox/turtlebot_sim/mytele/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package mytele written to:
[ rosmake ]    /home/amal/.ros/rosmake/rosmake_output-20121210-031624/mytele/build_output.log
[rosmake-3] Finished <<< mytele [FAIL] [ 0.89 seconds ]                                                  
[ rosmake ] Halting due to failure in package mytele. 
[ rosmake ] Waiting for other threads to complete.
[ rosmake ] Results:                                                                                     
[ rosmake ] Built 5 packages with 1 failures.                                                            
[ rosmake ] Summary output to directory                                                                  
[ rosmake ] /home/amal/.ros/rosmake/rosmake_output-20121210-031624 

amal@amal-HP-G62-Notebook-PC:/opt/ros/fuerte/stacks/turtlebot_apps/turtlebot_teleop/src$ roswtf
Loaded plugin tf.tfwtf
Package: turtlebot_teleop
================================================================================
Static checks summary:

Found 1 error(s).

ERROR The following packages have rpath issues in manifest.xml:
 * turtlebot_teleop: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * roscpp: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * sensor_msgs: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * std_msgs: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * diagnostic_updater: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * geometry_msgs: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * joy: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * rosbag: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"
 * diagnostic_msgs: found flag "-L/opt/ros/fuerte/lib", but no matching "-Wl,-rpath,/opt/ros/fuerte/lib"

================================================================================

ROS Master does not appear to be running.
Online graph checks will not be run.
ROS_MASTER_URI is [http://localhost:11311]

Thanks in advance :)

Edit 2: CMakeLists.text
    cmake_minimum_required(VERSION 2.4.6)
include($ENV{ROS_ROOT}/core/rosbuild/rosbuild.cmake)

# Set the build type.  Options are:
#  Coverage       : w/ debug symbols, w/o optimization, w/ code-coverage
#  Debug          : w/ debug symbols, w/o optimization
#  Release        : w/o debug symbols, w/ optimization
#  RelWithDebInfo : w/ debug symbols, w/ optimization
#  MinSizeRel     : w/o debug symbols, w/ optimization, stripped binaries
#set(ROS_BUILD_TYPE RelWithDebInfo)

rosbuild_init()

#set the default path for built executables to the "bin" directory
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
#set the default path for built libraries to the "lib" directory
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)

#uncomment if you have defined messages
#rosbuild_genmsg()
#uncomment if you have defined services
#rosbuild_gensrv()

#common commands for building c++ executables and libraries
#rosbuild_add_library(${PROJECT_NAME} src/example.cpp)
#target_link_libraries(${PROJECT_NAME} another_library)
rosbuild_add_boost_directories()
rosbuild_add_executable(mytele_keyboard src/turtlebot_key.cpp)
rosbuild_link_boost(${PROJECT_NAME} thread)
#rosbuild_add_executable(example examples/example.cpp)
#target_link_libraries(example ${PROJECT_NAME})

Edit (3)
I want to say more about my system, I have fuerte in Ubuntu 12.04. I have ros in home conatain RoboEarth, KnowRob, Ccny_vision, and sandbox which I create all my packages in , for test as I am still beginner. I create mytele for test turtlebot simulator and I was following this tutorial
ROS Tutorial part 3 
Thanks,

Originally posted by Amal on ROS Answers with karma: 229 on 2012-12-09
Post score: 0

A:

Did you check your typing error?
eg. "turtlebot_key.cpp -> turtlebot_key-cpp"
Edit 1.
If it has some kind of trouble with boost libraries as Mr. Peris pointed out(Thank you!),
CMakeLists.txt shall be ... 

rosbuild_add_boost_directories()
rosbuild_add_executable(mytele_keyboard src/turtlebot_key.cpp)
rosbuild_link_boost(mytele_keyboard thread)

Please be careful, rosbuild_add_executable(...) should come before rosbuild_link_boost(...).
This will help you -> http://www.ros.org/wiki/rosbuild/CMakeLists/Examples#Using_Boost

Originally posted by moyashi with karma: 721 on 2012-12-09
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Amal on 2012-12-09:
sorry that is just when typing here but I write it "turtlebot_key.cpp" and does not work
Comment by Amal on 2012-12-09:
I open turtlebot_key.cpp and I do not find executable called "mytele_keyboard" ?!
Comment by Amal on 2012-12-13:
I do this now, but still not work... please see my edit 2 again
Thanks
Comment by thebyohazard on 2012-12-13:
in rosbuild_link_boost(${PROJECT_NAME} thread) it looks like ${PROJECT_NAME} will resolve to mytele since that's the name of the overall project.  You want it to resolve to mytele_keyboard like @moyashi said.  Try replacing what you have with rosbuild_link_boost(mytele_keyboard thread)
Comment by Amal on 2012-12-13:
Thanks It work now, and sorry

