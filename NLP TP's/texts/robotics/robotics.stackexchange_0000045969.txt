Q:

building ROS on arch linux

Greetings! I'm trying to build ros on arch linux. I followed this instruction
ros.org/wiki/fuerte/Installation/Arch
with some trouble along:
1)
 patch -p0 < ros.patch 

patching file simulator_gazebo/gazebo/Makefile.gazebo.tarball
Hunk #1 FAILED at 31.
1 out of 1 hunk FAILED -- saving rejects to file
simulator_gazebo/gazebo/Makefile.gazebo.tarball.rej
patching file geometry/tf/include/tf/message_filter.h
Reversed (or previously applied) patch detected!  Assume -R? [n]
Apply anyway? [n]
Skipping patch.

This error was repeated for all entries in the patch file.
2)
At the final step of
rosmake -a

the making started, but so far I encountered following errors:

[ 25%] Building CXX object CMakeFiles/camera_calibration_parsers.dir/src/parse_yml.o
  /home/aash29/ros/image_common/camera_calibration_parsers/src/parse_yml.cpp:3:27: fatal error: yaml-cpp/yaml.h: No such file or directory
  compilation terminated.

And in another package

[100%] Building CXX object CMakeFiles/cv_bridge.dir/src/cv_bridge.o
  /home/aash29/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp: In function ‘std::map, std::vector > cv_bridge::getConversionCodes()’:
/home/aash29/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:179:47: error: ‘CV_YUV2GRAY_UYVY’ was not declared in this scope
/home/aash29/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:180:46: error: ‘CV_YUV2RGB_UYVY’ was not declared in this scope
/home/aash29/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:181:46: error: ‘CV_YUV2BGR_UYVY’ was not declared in this scope
/home/aash29/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:182:47: error: ‘CV_YUV2RGBA_UYVY’ was not declared in this scope
/home/aash29/ros/vision_opencv/cv_bridge/src/cv_bridge.cpp:183:47: error: ‘CV_YUV2BGRA_UYVY’ was not declared in this scope
make[3]: *** [CMakeFiles/cv_bridge.dir/src/cv_bridge.o] Error 1
make[3]: Leaving directory `/home/aash29/ros/vision_opencv/cv_bridge/build'
make[2]: *** [CMakeFiles/cv_bridge.dir/all] Error 2

What could cause it? Is it any easier to build previous versions of ros?

Originally posted by aash29 on ROS Answers with karma: 23 on 2012-11-21
Post score: 2

Original comments
Comment by aash29 on 2012-11-22:
thanks Lorenz, I didn't want to install a different distribution for the purpose of running a single package, but building under arch is beginning to appear infeasible.

A:

Building ROS on Arch is definitely not trivial and the install instructions are probably outdated. The patches you were trying to apply are 8 months old.
I didn't build more than the ROS underlay recently in Arch and there are basically mainly three things you have to do:

Get the script to fix the python shebang lines from here and run it on your underlay.

Get rid of rx. I couldn't manage to compile it at the moment because of some weird swig error I don't have time to investigate right now.

Use the following cmake call: cmake .. -DPYTHON_EXECUTABLE=/usr/bin/python2 -DCMAKE_INSTALL_PREFIX=/opt/ros/fuerte.

Open ros_comm/tools/rosbag/src/recorder.cpp and go to line 439. Change boost::TIME_UTC to boost::TIME_UTC_ to make it compile with the most recent boost version.

This should allow you to build at least the middleware and the basic build system and command line tools. For higher-level stacks, you will have to fix a lot of code yourself which is a pretty time consuming process.
An alternative solution in case you need to stick with Arch and cannot switch to Ubuntu is to install a Ubuntu chroot environment in which you can install ROS using apt-get. Just google for debootstrap in case you want to try that.

Originally posted by Lorenz with karma: 22731 on 2012-11-21
This answer was ACCEPTED on the original site
Post score: 1

