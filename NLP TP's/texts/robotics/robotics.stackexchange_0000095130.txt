Q:

custom gazebo plugin

I've created custom modelplugin for my model in cpp how do i add it correctly in my urdf?
i added it but gazebo is not recognizing it and when i add  to my plugin its giving me an error so i removed it i started it with  with this its not giving me an error but not gazebo is recognizing this plugin
i added this in my pavkage.xml file
  <export>
    <gazebo_ros gazebo_model_path="${prefix}/models"/>
    <gazebo_ros plugin_path="${prefix}/lib" gazebo_media_path="${prefix}" />
  </export>

Originally posted by me_saw on ROS Answers with karma: 31 on 2020-03-20
Post score: 0

A:

Hi @me_saw,
A Gazebo plugin is added with this lines in the URDF:
  <plugin filename="plugin_name.so" name="some_name" >
    plugin args...
  </plugin>

However you will need to export the plugins path to advertise Gazebo where to find custom plugins. Take a look at this tutorial, you whould be able to follow it until the end, where you will find how to export and launch the plugin.

Originally posted by Weasfas with karma: 1695 on 2020-03-24
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by me_saw on 2020-03-27:
Hello,
I used the exact format as you have shown but still the gazebo is not loading the plugin
and i followed that tutorial I gave the path but still no use
gazebo is loading my model without any errors and without plugin
Comment by Weasfas on 2020-03-28:
Mmm, Ok. I followed the tutorial exactly as it is in case there was any mistake in the explanation but I managed to generate the pugin and see the box moving on Gazebo. At his point I would recommend you to use the --verbose flag with Gazebo in order to see its log E.g.: Gazebo --verbose my_world.world and ensure you wrote the proper plugin name in the world file (libmodel_push.so), and the plugin has executable permissions (E.g.: sudo chmod +x libmodel_push.so).
Comment by me_saw on 2020-03-28:
I did the tutorial and the plugins that were shown there worked perfectly fine, the box was moving as it has to.The problem arises when i create my own plugin with the exact same method that was shown there but i attached wheels to my robot, it isn't working and I also tried loading the launch file using --verbose but it was clean it's not even showing the plugin part
Comment by Weasfas on 2020-03-29:
Aa, ok. But that is different. In that case the URDF has a set of links and joints. For that to work you need to use the joints not the link. For instance, imagine you have a basic robot with a base_link and two wheel_links the descriptino will be somewhat to:
base_link --> wheel_left_link (joined by left_wheel_joint: continuous)
base_link --> right_wheel_link (joined by right_wheel_joint: continuous)
Then you need to load a plugin that uses that joints setting the velocity to move the model. Take a look at the diff_drive_plugin source code, in line 280 and 281 is doing exactly that to assign wheel velocities.
Comment by me_saw on 2020-03-29:
I used this plugin it's working fine with the sdf but when I try to load it in urdf it isn't showing any plugin loaded I even applied it to joints  I am using this plugin formy urdf model
Comment by Weasfas on 2020-03-29:
Ok. I just cloned your repo into my computer and launched Gazebo. When I publish on the two wheel topic 1.00 I can see how the model moves. Maybe a trifle but you are launching Gazebo on pause state: <arg name="paused" value="true" /> Did you remember to click the play button in the bottom right corner of the GUI?
Comment by me_saw on 2020-03-29:
well that is not my repo got that from a tutorial. That model is working fine and it uses sdf model . I want to use that plugin for my own urdf
Comment by Weasfas on 2020-03-29:
Well, if you cannot post the description we will not be able to help you further than this, because if it is not something related to the spurce code of the plugin or your PC/Gazebo environment, It must be something wrong in the robot description.
Comment by me_saw on 2020-03-29:
Thank you so much for your help
I'll try to figure out what the problem is
Comment by me_saw on 2020-03-29:
Hey,
i sorted it out and created a sdf file to load the plugin but when i load sdf file usinggzsever it's giving me an error as Exception occured in the Load function of plugin with name and file name.
Comment by Weasfas on 2020-03-30:
Hi @me_saw,
Glad you sorted the intitial problem. As for the actual problem I say that It would be better to open a new question so the topics are separated and more clear. Yo may provide the link for this new question here.
Comment by me_saw on 2020-04-01:
can you help me with this
Comment by bankai on 2020-06-25:
could uou explain how you added the plugin? Did you still use an urdf file for your model?

