Q:

Interpreting stored cloud file from PointCloud2 data type

I am having a problem in interpreting a point cloud data stored in PointCloud2 of data type. The file is generated by "rostopic echo.." my cloud topic. My goal is to find corresponding x, y and z values, in terms of coordinates so that I can use them in plotting with MatLab or Octave. I am aware of this link, but, I still cannot see the use of it.
The fields in the stored file looks like this:
%time,field.header.seq,field.header.stamp,field.header.frame_id,field.height,field.width,field.fields0.name,field.fields0.offset,field.fields0.datatype,field.fields0.count,field.fields1.name,field.fields1.offset "and so on"

Or, is it wise to convert from PointCloud2 first into another format before I can plot it. If so, in what format, it serves the best for this purpose? Or any other smarter way of doing it.
Thanks in advance.

Originally posted by alfa_80 on ROS Answers with karma: 1053 on 2012-02-01
Post score: 0

A:

There is probably a more direct method, but I've used PCL's .pcd format to accomplish this.
EDIT: Dan Lazewatsky pointed out pointcloud_to_pcd, which converts a ROS PointCloud2 msg to a .pcd file. See his comment for the docs.
Once you have it as a .pcd, it should be fairly easy to parse. After the header the points are listed one per line: x y z rgb. Note that PCL packs the RBG (and alpha, if you're using it) channels into a single float.
Related docs and tutorials: pcl::fromROSmsg | writing to a .pcd file | .pcd file format

Originally posted by tbernhard with karma: 80 on 2012-07-11
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Dan Lazewatsky on 2012-07-11:
pointcloud_to_pcd in pcl_ros does exactly that: http://www.ros.org/wiki/pcl_ros#pointcloud_to_pcd
Comment by tbernhard on 2012-07-11:
Thanks, hadn't come across that.  good to know

