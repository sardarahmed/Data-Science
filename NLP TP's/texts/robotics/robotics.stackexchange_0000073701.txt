Q:

simulate a Stanley segway RMP210 in Gazebo

Hello,
I'm a new hand using ROS indigo. Now I'm trying to simulate a segway (Stanley RMP210) in Gazebo and control it moving on the screen. I've downloaded these packages:
cd ~/segway_ws/src
git clone https://github.com/StanleyInnovation/segway_v3.git
git clone https://github.com/StanleyInnovation/segway_v3_robot.git
git clone https://github.com/StanleyInnovation/segway_v3_desktop.git
git clone https://github.com/StanleyInnovation/segway_v3_simulator.git
Then I try to follow other tutorials and run:
roslaunch segway_gazebo segway_playpen.launch
luckily, a segway in Gazebo shows up.
However, some error occurs:
SUMMARY
========

CLEAR PARAMETERS
 * /ekf_local_localization/

PARAMETERS
 * /diff_vel_controller/angular/z/has_acceleration_limits: True
 * /diff_vel_controller/angular/z/has_velocity_limits: True
 * /diff_vel_controller/angular/z/max_acceleration: 28.8
 * /diff_vel_controller/angular/z/max_velocity: 3.0
 * /diff_vel_controller/base_frame_id: /segway/base_link
 * /diff_vel_controller/cmd_vel_timeout: 0.25
 * /diff_vel_controller/enable_odom_tf: False
 * /diff_vel_controller/estimate_velocity_from_position: False
 * /diff_vel_controller/left_wheel: left_wheel
 * /diff_vel_controller/linear/x/has_acceleration_limits: True
 * /diff_vel_controller/linear/x/has_velocity_limits: True
 * /diff_vel_controller/linear/x/max_acceleration: 4.903325
 * /diff_vel_controller/linear/x/max_velocity: 3.57632
 * /diff_vel_controller/pose_covariance_diagonal: [0.001, 0.001, 0....
 * /diff_vel_controller/publish_rate: 100
 * /diff_vel_controller/right_wheel: right_wheel
 * /diff_vel_controller/twist_covariance_diagonal: [0.001, 0.001, 0....
 * /diff_vel_controller/type: diff_drive_contro...
 * /diff_vel_controller/wheel_radius_multiplier: 1.0
 * /diff_vel_controller/wheel_separation_multiplier: 1.0
 * /ekf_local_localization/base_link_frame: segway/base_link
 * /ekf_local_localization/debug: False
 * /ekf_local_localization/debug_out_file: debug_ekf_localiz...
 * /ekf_local_localization/frequency: 30.0
 * /ekf_local_localization/imu0: /segway/feedback/...
 * /ekf_local_localization/imu0_config: [False, False, Fa...
 * /ekf_local_localization/imu0_differential: True
 * /ekf_local_localization/imu0_queue_size: 10
 * /ekf_local_localization/imu1: /segway/feedback/...
 * /ekf_local_localization/imu1_config: [False, False, Fa...
 * /ekf_local_localization/imu1_differential: True
 * /ekf_local_localization/imu1_queue_size: 10
 * /ekf_local_localization/imu2_differential: True
 * /ekf_local_localization/initial_estimate_covariance: ['1e-9', 0, 0, 0,...
 * /ekf_local_localization/odom0: /segway/feedback/...
 * /ekf_local_localization/odom0_config: [True, True, Fals...
 * /ekf_local_localization/odom0_differential: True
 * /ekf_local_localization/odom0_queue_size: 10
 * /ekf_local_localization/odom1_differential: True
 * /ekf_local_localization/odom_frame: odom
 * /ekf_local_localization/print_diagnostics: False
 * /ekf_local_localization/process_noise_covariance: [0.05, 0.0, 0.0, ...
 * /ekf_local_localization/sensor_timeout: 0.1
 * /ekf_local_localization/two_d_mode: True
 * /ekf_local_localization/world_frame: odom
 * /front_caster_swivel_controller/joint: front_caster_swivel
 * /front_caster_swivel_controller/pid/d: 0.0
 * /front_caster_swivel_controller/pid/i: 0.001
 * /front_caster_swivel_controller/pid/p: 1.0
 * /front_caster_swivel_controller/type: effort_controller...
 * /front_caster_wheel_controller/joint: front_caster_wheel
 * /front_caster_wheel_controller/pid/d: 0.0
 * /front_caster_wheel_controller/pid/i: 0.001
 * /front_caster_wheel_controller/pid/p: 1.0
 * /front_caster_wheel_controller/type: effort_controller...
 * /joint_state_controller/publish_rate: 50
 * /joint_state_controller/type: joint_state_contr...
 * /joint_state_publisher/use_gui: False
 * /rear_caster_swivel_controller/joint: rear_caster_swivel
 * /rear_caster_swivel_controller/pid/d: 10.0
 * /rear_caster_swivel_controller/pid/i: 0.001
 * /rear_caster_swivel_controller/pid/p: 1.0
 * /rear_caster_swivel_controller/type: effort_controller...
 * /rear_caster_wheel_controller/joint: rear_caster_wheel
 * /rear_caster_wheel_controller/pid/d: 0.0
 * /rear_caster_wheel_controller/pid/i: 0.001
 * /rear_caster_wheel_controller/pid/p: 1.0
 * /rear_caster_wheel_controller/type: effort_controller...
 * /robot_description: <?xml version="1....
 * /robot_state_publisher/publish_frequency: 100.0
 * /robot_state_publisher/tf_prefix: /segway
 * /rosdistro: indigo
 * /rosversion: 1.11.16
 * /segway/cmd_vel_mux/yaml_cfg_file: /home/boom/segway...
 * /segway/segway_marker_ctrl/robot_name: RMP_210
 * /segway/segway_marker_ctrl/sim: True
 * /segway/segway_teleop/controller_mapping/axis_range: [{'index': 1, 'in...
 * /segway/segway_teleop/controller_mapping/momentary: [[{'index': 4, 'i...
 * /segway/segway_teleop/sim: True
 * /use_sim_time: True

NODES
  /segway/
    cmd_vel_mux (nodelet/nodelet)
    nodelet_manager (nodelet/nodelet)
    segway_marker_ctrl (segway_ros/segway_marker_ctrl)
    segway_teleop (segway_ros/segway_teleop)
  /
    cmd_relay (topic_tools/relay)
    controller_spawner (controller_manager/spawner)
    ekf_local_localization (robot_localization/ekf_localization_node)
    feedback_relay (topic_tools/relay)
    gazebo (gazebo_ros/gzserver)
    gazebo_gui (gazebo_ros/gzclient)
    joint_state_publisher (joint_state_publisher/joint_state_publisher)
    robot_state_publisher (robot_state_publisher/robot_state_publisher)
    spawn_segway_model (gazebo_ros/spawn_model)

auto-starting new master
process[master]: started with pid [32220]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 8c76d5ea-0fef-11e6-859a-34e6ad511314
process[rosout-1]: started with pid [32233]
started core service [/rosout]
process[gazebo-2]: started with pid [32258]
process[gazebo_gui-3]: started with pid [32262]
process[robot_state_publisher-4]: started with pid [32266]
process[joint_state_publisher-5]: started with pid [32267]
process[spawn_segway_model-6]: started with pid [32268]
process[controller_spawner-7]: started with pid [32270]
process[cmd_relay-8]: started with pid [32275]
process[feedback_relay-9]: started with pid [32276]
process[ekf_local_localization-10]: started with pid [32281]
process[segway/segway_teleop-11]: started with pid [32286]
process[segway/segway_marker_ctrl-12]: started with pid [32296]
process[segway/nodelet_manager-13]: started with pid [32307]
process[segway/cmd_vel_mux-14]: started with pid [32309]
Gazebo multi-robot simulator, version 2.2.3
Copyright (C) 2012-2014 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

Gazebo multi-robot simulator, version 2.2.3
Copyright (C) 2012-2014 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

Msg Waiting for master.[ INFO] [1462143222.557450536]: Finished loading Gazebo ROS API Plugin.
Msg Waiting for master[ INFO] [1462143222.557946655]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...

Msg Connected to gazebo master @ http://127.0.0.1:11345
Msg Publicized address: 35.2.107.231
[INFO] [WallTime: 1462143222.715727] [0.000000] Controller Spawner: Waiting for service controller_manager/load_controller
[ INFO] [1462143223.314902216, 1298.500000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.

Msg Connected to gazebo master @ http://127.0.0.1:11345
Msg Publicized address: 35.2.107.231
[ INFO] [1462143223.753978807, 1298.880000000]: Physics dynamic reconfigure ready.
[ INFO] [1462143223.761013692, 1298.880000000]: Loading gazebo_ros_control plugin
[ INFO] [1462143223.761415918, 1298.880000000]: Starting gazebo_ros_control plugin in namespace: /
[ INFO] [1462143223.765116575, 1298.880000000]: gazebo_ros_control plugin is waiting for model URDF in parameter [robot_description] on the ROS param server.
[spawn_segway_model-6] process has finished cleanly
log file: /home/boom/.ros/log/8c76d5ea-0fef-11e6-859a-34e6ad511314/spawn_segway_model-6*.log
[ INFO] [1462143224.053968498, 1298.880000000]: Loaded gazebo_ros_control.
[INFO] [WallTime: 1462143224.226244] [1299.060000] Controller Spawner: Waiting for service controller_manager/switch_controller
[INFO] [WallTime: 1462143224.227465] [1299.060000] Controller Spawner: Waiting for service controller_manager/unload_controller
[INFO] [WallTime: 1462143224.228413] [1299.060000] Loading controller: joint_state_controller
[ERROR] [1462143224.229954546, 1299.060000000]: Could not load controller 'joint_state_controller' because controller type 'joint_state_controller/JointStateController' does not exist.
[ERROR] [1462143224.229988093, 1299.060000000]: Use 'rosservice call controller_manager/list_controller_types' to get the available types
[ERROR] [WallTime: 1462143225.230696] [1300.060000] Failed to load joint_state_controller
[INFO] [WallTime: 1462143225.231057] [1300.060000] Loading controller: diff_vel_controller
[ERROR] [1462143225.233037649, 1300.060000000]: Could not load controller 'diff_vel_controller' because controller type 'diff_drive_controller/DiffDriveController' does not exist.
[ERROR] [1462143225.233079087, 1300.060000000]: Use 'rosservice call controller_manager/list_controller_types' to get the available types
[ERROR] [WallTime: 1462143226.234018] [1301.060000] Failed to load diff_vel_controller
[INFO] [WallTime: 1462143226.234349] [1301.060000] Loading controller: front_caster_swivel_controller
[ERROR] [1462143226.236433278, 1301.060000000]: Could not load controller 'front_caster_swivel_controller' because controller type 'effort_controllers/JointPositionController' does not exist.
[ERROR] [1462143226.236470509, 1301.060000000]: Use 'rosservice call controller_manager/list_controller_types' to get the available types
[ERROR] [WallTime: 1462143227.237702] [1302.060000] Failed to load front_caster_swivel_controller
[INFO] [WallTime: 1462143227.238195] [1302.060000] Loading controller: front_caster_wheel_controller
[ERROR] [1462143227.240348346, 1302.060000000]: Could not load controller 'front_caster_wheel_controller' because controller type 'effort_controllers/JointVelocityController' does not exist.
[ERROR] [1462143227.240390958, 1302.060000000]: Use 'rosservice call controller_manager/list_controller_types' to get the available types
[ERROR] [WallTime: 1462143228.241597] [1303.060000] Failed to load front_caster_wheel_controller
[INFO] [WallTime: 1462143228.242131] [1303.060000] Loading controller: rear_caster_swivel_controller
[ERROR] [1462143228.245885406, 1303.070000000]: Could not load controller 'rear_caster_swivel_controller' because controller type 'effort_controllers/JointPositionController' does not exist.
[ERROR] [1462143228.245926160, 1303.070000000]: Use 'rosservice call controller_manager/list_controller_types' to get the available types
[ERROR] [WallTime: 1462143229.246860] [1304.070000] Failed to load rear_caster_swivel_controller
[INFO] [WallTime: 1462143229.247842] [1304.070000] Loading controller: rear_caster_wheel_controller
[ERROR] [1462143229.249965103, 1304.070000000]: Could not load controller 'rear_caster_wheel_controller' because controller type 'effort_controllers/JointVelocityController' does not exist.
[ERROR] [1462143229.250012194, 1304.070000000]: Use 'rosservice call controller_manager/list_controller_types' to get the available types
[ERROR] [WallTime: 1462143230.251166] [1305.070000] Failed to load rear_caster_wheel_controller
[INFO] [WallTime: 1462143230.251522] [1305.070000] Controller Spawner: Loaded controllers: 
[INFO] [WallTime: 1462143230.254190] [1305.080000] Started controllers: 

Note the last few [ERROR], the controller seems not wrking.
Due to some other tutorials, usually,  if I type in arbotix_gui cmd_vel:=/segway/cmd_vel, I can successfully control my robot in Gazebo. But now, no matter which node I tried to control, mt robot doesn't move at all!
Anyone know whats going on? Is it because I didn't connect to a real robot or did I open a wrong launch file?  I'm stuck here, could anyone give me some thoughts to move on? Thank you so so much!

Originally posted by blueflame on ROS Answers with karma: 35 on 2016-05-01
Post score: 0

Original comments
Comment by jbinney on 2016-05-10:
Looks like you may be missing some dependencies. For example, one of the errors appears to fail to find something in the effort_controllers package. You can install dependencies using rosdep. Could you try running "rosdep install -i --from-path ." in your source directory?
Comment by blueflame on 2016-05-10:
Thanks! You are right, after I installed sudo apt-get install ros-indigo-ros-control ros-indigo-ros-controllers
It starts to work now!
Comment by jbinney on 2016-05-10:
Great! I'll add that as an answer so to this question so it is easier for people to see. Out of curiosity, what tutorial are you following to use the segway in simulation?
Comment by jbinney on 2016-05-10:
I had to re-open the question in order to add my comment as an answer, but you can close it again now.
Comment by Keyser Soze on 2021-09-29:
Are these Gazebo models still available? I am unable to clone them.

A:

Looks like you may be missing some dependencies. For example, one of the errors appears to fail to find something in the effort_controllers package. You can install dependencies using rosdep:
rosdep install -i --from-path .

Originally posted by jbinney with karma: 606 on 2016-05-10
This answer was ACCEPTED on the original site
Post score: 1

