Q:

Modifying ros navigation map with image editor

Hello,
I recently used gmapping on a robot I built to scan a room using a kinect sensor and converting pointcloud to scan.
The room was scanned with some noise so I edited the map using photoshop (on a different computer) but when I tried navigating the map with the new modifications the robot couldn't be localizaed properly and amcl and move_base started giving errors of type "off map" and "unable to get robot pose".
I read somewhere that it should be OK to edit a map using gimp or photoshop and even change PGM to PNG but I did not find a lot of details on best practice.
I think that the format or resolution of the image is somehow being affected during the editing, especially since I am generating the map on Linux and then editing on macosx.
Do you have any tips on bets practice on editing an existing map to ensure issues with navigation?
Thanks in advance.

Originally posted by dgrixti on ROS Answers with karma: 95 on 2017-03-20
Post score: 1

A:

In my experience, manually editing a gmapping generated map is not a good idea.  AMCL based localization suffers and you will get unforeseen issues.
Usually one wants the map to look pretty, but this is not usually the case. Sensor noise, reflections and other perturbations will make the map look ugly. Anyway a machine generated map does not need to be aesthetically pleasant, since the target audience of the map are robots. Manually beautifying the map might remove vital information from it.
If you want a pretty map for visualization purposes, I would recommend to make a copy of the original map, make any beautification in the copy and publish it on a different topic.
In real scenarios it is not rare to see a /map topic with the raw map for the robot to use and a /map_for_gui with the beautified copy of the map for human visualization.
I hope this helps

Originally posted by Martin Peris with karma: 5625 on 2017-03-20
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by tjadhav on 2017-10-02:
Thanks a million for this comment. this makes so much sense. I would try and beautify the maps and the robot had hard time localizing using AMCL. I stopped editing the map and the robot behaves properly.
Great tip about using a different topic for human visualization, cheers.
Tushar.

