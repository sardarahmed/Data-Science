Q:

RTAB-MAP with xtion, rplidar, turtelbot (how to utilize lidar internally)

Hello,
I have question about building 3D map with RTAB-MAP and lidar.
As far as I know, RTAB-MAP is SLAM based on image-features and performs loop closure using features.
3D mapping on RTAB-MAP with turtlebot, xtion is good.
But, my robot has additionally lidar and I want to utilize lidar.
I read the questions about build 3d map.
I think that my situation is similar below.
https://answers.ros.org/question/239646/build-a-map-with-husky-laser-and-kinectrealsense/
https://answers.ros.org/question/239823/build-a-map-with-rtabmap-realsense-sick-and-imu-with-sensor-fusion/
https://answers.ros.org/question/242263/3d-map-with-rtab-sick-imu-and-husky-a200/
My questions are below.

How do you use additional lidar internally in RTAB-MAP?

1-1.For improving quality of map, how to use lidar in RTAB-MAP?

I think this system for utilizing lidar and improving quality of map.

I wonder my method is good or not.
I think below system is using all sensors, so it can make good 3D map.
This link is system image I thought.
link text
Thank you for reading questions.

Originally posted by JunJun on ROS Answers with karma: 26 on 2017-11-29
Post score: 0

A:

Based on this example, here is how to add lidar to rtabmap:
<node name="rtabmap" pkg="rtabmap_ros" type="rtabmap" output="screen" args="--delete_db_on_start">
   ...
   <remap from="scan" to="/base_scan"/>
   <param name="subscribe_scan" type="bool" value="true"/>
   <param name="RGBD/NeighborLinkRefining" type="string" value="true"/> <!-- Odometry correction -->
   <param name="Reg/Strategy"              type="string" value="1"/>    <!-- 1=ICP -->
   <param name="Reg/Force3DoF"             type="string" value="true"/> <!-- 2d slam -->
</node>

Make sure TF of camera and lidar are correctly set, so that 3D point clouds match with the 2D scans.
cheers

Originally posted by matlabbe with karma: 6409 on 2017-11-29
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by JunJun on 2017-12-01:
Hi
Thank you for answer.
I checked TF and build map.
I wonder that lidar is used for correction pose or not.
http://128.134.57.131/wordpress/wp-content/uploads/2017/12/스크린샷-2017-12-01-17-19-12.png
http://128.134.57.131/wordpress/wp-content/uploads/2017/12/스크린샷-2017-12-01-17-19-59.png
Thank you.
Comment by JunJun on 2017-12-01:
You said "Make sure TF of camera and lidar are correctly set, so that 3D point clouds match with the 2D scans."
this means that 2d scans is used for matching 3D point clouds and quality of 3D map is better than without lidar??
I want to know quality of SLAM depends on only RGB-D, image features.
Comment by matlabbe on 2017-12-01:
With parameter "Reg/Strategy" set to 1 (ICP), scans are used to refine loop closure detections and for odometry correction (when "RGBD/NeighborLinkRefining" is true). In my example, lidar is used to refine the pose, e.g., the 3D clouds are added to poses refined by lidar.
Comment by matlabbe on 2017-12-01:
In your screenshots, the TF between lidar and camera seems ok, as the lidar scans (cyan points) are aligned with their corresponding clouds created from the camera.
Comment by JunJun on 2017-12-03:
Thank you for your answer.
I got what you said.
As you said, I measure and set TF.
Below link is TF of my robot.
link text

