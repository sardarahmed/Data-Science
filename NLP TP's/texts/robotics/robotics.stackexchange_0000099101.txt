Q:

Error while running rtabmap for the real robot!

Hi,
I connected to the real vehicle and launched rtabamp, but it shows the following error:
/rtabmap/rtabmap subscribed to:
   /velodyne_points
[ WARN] [1621439875.019244972]: There is no image subscription, bag-of-words loop closure detection will be disabled...
[ WARN] [1621439875.019301349]: Setting Kp/MaxFeatures=-1 (bag-of-words disabled)
[FATAL] (2021-05-19 16:57:55.281) MsgConversion.cpp:2198::convertScan3dMsg() Condition (scan3dMsg.data.size() == scan3dMsg.row_step*scan3dMsg.height) not met! [data=590480 row_step=0 height=1]
terminate called after throwing an instance of 'UException'
  what():  [FATAL] (2021-05-19 16:57:55.281) MsgConversion.cpp:2198::convertScan3dMsg() Condition (scan3dMsg.data.size() == scan3dMsg.row_step*scan3dMsg.height) not met! [data=590480 row_step=0 height=1]
[rtabmap/rtabmap-1] process has died [pid 20716, exit code -6, cmd /home/henry/masoumeh_ws/devel/lib/rtabmap_ros/rtabmap --Reg/Force3DoF false --Reg/Strategy 1 --RGBD/NeighborLinkRefining true --ICP/PM false --Icp/PMOutlierRatio 0.7 --Icp/VoxelSize 0.2 --Icp/MaxCorrespondenceDistance 1 --Icp/PointToPlaneGroundNormalsUp 0.9 --Icp/Iterations 10 --Icp/Epsilon 0.001 --OdomF2M/ScanSubtractRadius 0.2 --OdomF2M/ScanMaxSize 15000 --Grid/ClusterRadius 1 --Grid/RangeMax 20 --Grid/RayTracing true --Grid/CellSize 0.2 --Icp/PointToPlaneRadius 0 -d /rtabmap/grid_map:=/map rgb/image:=/realsense/color/image_raw_relay depth/image:=/realsense/depth/image_rect_raw_relay rgb/camera_info:=/realsense/color/camera_info rgbd_image:=rgbd_image_relay left/image_rect:=/stereo_camera/left/image_rect_color_relay right/image_rect:=/stereo_camera/right/image_rect_relay left/camera_info:=/stereo_camera/left/camera_info right/camera_info:=/stereo_camera/right/camera_info scan:=/scan scan_cloud:=/velodyne_points scan_descriptor:=/scan_descriptor user_data:=/user_data user_data_async:=/user_data_async tag_detections:=/tag_detections odom:=/odometry/filtered imu:=/gx5/imu/data __name:=rtabmap __log:=/home/henry/.ros/log/e7f78ad6-b8a5-11eb-b46d-a0cec8c2f734/rtabmap-rtabmap-1.log].
log file: /home/henry/.ros/log/e7f78ad6-b8a5-11eb-b46d-a0cec8c2f734/rtabmap-rtabmap-1*.log
^C[find_object_3d-2] killing on exit
^C^C[find_object_3d-2] escalating to SIGTERM
shutting down processing monitor...
... shutting down processing monitor complete
done

ubuntu: 16.04
kinetic, python 2.7
How can i fix it?
thanks

Originally posted by Delbina on ROS Answers with karma: 109 on 2021-05-21
Post score: 0

A:

Duplicate of https://answers.ros.org/question/377470/rtabmap-icp_odometrycpp453callbackcloud-fatal-error/

Originally posted by matlabbe with karma: 6409 on 2021-05-22
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Delbina on 2021-05-26:
Dear Mattieu,
I also installed velodyne_master that has the patch, from the source, and did catkin_make as well. but again when I launch rtbamp,I face the same error. Would you please support to fix this issue?
thanks
Comment by Delbina on 2021-05-28:
hi everyone,
my issue, has not fixed yet. I have downloaded also velodyne_master, and then did catkin_make in my workspace.  then run rtabmap, but again i have this error yet:
[FATAL] (2021-05-27 16:14:50.261) MsgConversion.cpp:2198::convertScan3dMsg() Condition (scan3dMsg.data.size() == scan3dMsg.row_step*scan3dMsg.height) not met! [data=590964 row_step=0 height=1]
would you please support me to resolve this issue?.
Thanks
Comment by matlabbe on 2021-05-30:
try to debug why the velodyne topic has row_step=0, if the patch referred by the answered didn't work on your side for some reasons.

