Q:

Fuerte : No module named rospkg

Hi all,
I recently migrated to Fuerte and upon building a ros package that used to build in Electric, it throws the following error in Fuerte:
[rosbuild] Building package mapping.sa

[rosbuild] Error from syntax check of mapping.sa/manifest.xml

Traceback (most recent call last):
  File "<string>", line 1, in <module>
File "/opt/ros/fuerte/lib/python2.7/dist-packages/roslib/__init__.py", line 50, in <module>
 from roslib.launcher import load_manifest
File "/opt/ros/fuerte/lib/python2.7/dist-packages/roslib/launcher.py", line 42, in <module>
 import rospkg
ImportError: No module named rospkg

CMake Error at /opt/ros/fuerte/share/ros/core/rosbuild/private.cmake:78 (message):
[rosbuild] Syntax check of mapping.sa/manifest.xml failed; aborting
Call Stack (most recent call first):
/opt/ros/fuerte/share/ros/core/rosbuild/public.cmake:174 (_rosbuild_check_manifest)
subarchitectures/mapping.sa/CMakeLists.txt:56 (rosbuild_init)

So the main problem is that rospkg is not found. This seems similar to these questions:

Import Error
Import Error 2

The solution there is to install rospkg. I already have it installed.
shanker@lt-pool-213:~$ sudo apt-get install python-rospkg
[sudo] password for shanker: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
python-rospkg is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.

I check my PYTHONPATH and it shows:
shanker@lt-pool-213:~$ echo $PYTHONPATH
/opt/ros/fuerte/share/ros/core/roslib/src:/opt/ros/fuerte/lib/python2.7/dist-packages:/opt/ros/fuerte/lib/python2.7/dist-packages:

The path '/opt/ros/fuerte/share/ros/core/roslib/src' doesn't even exist. roslib exists at : '/opt/ros/fuerte/share/roslib'. But there isn't an src folder there. So I'm not sure if that is the problem.

Alternatively, the problem is probably at /opt/ros/fuerte/lib/python2.7/dist-packages . That directory does not have the file rospkg. It has files roslib, rospy, rosnode, rosmsg etc., but not rospkg. Could that be the problem?

Update: Sep 28, 2012: According to Lorenz's suggestion, I have found that rospkg is in /usr/lib/pymodules/python2.7 . However, the problem persists.
Update: Sep 28, 2012: Upon adding '/usr/lib/pymodules/python2.7' to the pythonpath, the error does resolve. However, I am not removing this question as this is still unexpected behavior.
Thanks in advance for your help :)
Cheers
Shanker

Originally posted by Shanker on ROS Answers with karma: 259 on 2012-09-27
Post score: 4

A:

The package python-rospkg installs into /usr/lib/pymodules/python2.7. The directory is normally in the python path, not in the variable PYTHONPATH though. To verify if it's really there, first check if you can find rospkg in /usr/lib/pymodules/python2.7. Then execute python in a terminal and type:
import sys; sys.path

The output is a list of paths python uses for finding packages. Check if /usr/lib/pymodules/python2.7 is really in there.

Originally posted by Lorenz with karma: 22731 on 2012-09-27
This answer was ACCEPTED on the original site
Post score: 6

Original comments
Comment by Shanker on 2012-09-27:
Thanks for the answer. 'rospkg' is inside /usr/lib/pymodules/python2.7 . And that path is present inside sys.path . It is indeed quite surprising why that error still pops up. Any other ideas?
Comment by Lorenz on 2012-09-27:
Can you try importing rospkg in the python shell? If that fails we at least have a very simple test case. If not, it's really weird...
Comment by Shanker on 2012-09-27:
'import rospkg' does not throw any errors in the python shell. Should I add '/usr/lib/pymodules/python2.7' to the pythonpath? Shouldn't that be done automatically?
Comment by Lorenz on 2012-09-27:
I think it should be in your python path already. The error is really weird. Can you try building a different package?
Comment by Shanker on 2012-09-27:
You can see the output of the PYTHONPATH in my original post. That is not in my PYTHONPATH. Is it implicitly in the PYTHONPATH? I will try building a different package,
Comment by Shanker on 2012-09-27:
This error does occur in every package. I don't have much experience with python, reading up about it. Any help would be welcome :)
Comment by Shanker on 2012-09-27:
Upon adding /usr/lib/pymodules/python2.7 to my pythonpath, the error does resolve it. Though, I am not closing the question as it is still unexpected behavior?
Comment by Lorenz on 2012-09-27:
Yes. I think that is unexpected behavior and I have never seen it before. I don't think you are facing a common problem. I can just guess that for some weird reason, sys.path is different when you are executing rosmake.
Comment by FuerteNewbie on 2013-10-03:
What if '/usr/lib/pymodules/python2.7' isn't in the sys.path?
Comment by tgaaly on 2013-12-07:
did anybody resolve this? After playing around I am able to import rospkg within python. I verified path exists within $PYTHONPATH.
when I run rocore I get the pkg_resource.DistributionNotFound: rospkg=1.0.2
Comment by tgaaly on 2013-12-07:
Previously I was unable to import rospkg within python and I would get an ImportError instead of the DistributionNotFound error above....

