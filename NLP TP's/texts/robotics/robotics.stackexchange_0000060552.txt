Q:

tf tutorials: static TransformBroadcaster

Hi everyone
I'm trying to understand the reasons of using 'static' tf transformBroadcaster (static tf::TransformBroadcaster br;)  in the tf tutorials page (http://wiki.ros.org/tf/Tutorials/Writing%20a%20tf%20broadcaster%20%28C%2B%2B%29). I understand what does a static member do, but I really cannot understand the reasons of using it in that example!
Thank you in advance!

Originally posted by emacsd on ROS Answers with karma: 194 on 2014-07-02
Post score: 0

A:

Without knowing for certain, there may be some initialization procedures in the TransformBroadcaster that require a non-trivial amount of time. In that event, you don't want to initialize the TransformBroadcaster every time poseCallback is called. You therefore can either declare the TransformBroadcaster as a global variable (or a class member, if using a class), or you can just make it static.

Originally posted by Tom Moore with karma: 13689 on 2014-07-03
This answer was ACCEPTED on the original site
Post score: 3

Original comments
Comment by emacsd on 2014-07-03:
@Tom: Thank you for your answer, I was thinking, somehow, similar to what you mentioned. However, I tried to remove the 'static' keyword and declare it as a global object, but I keep getting this error:

[ERROR] [1404402091.015426379]: "turtle2" passed to lookupTransform argument target_frame does not exist.

Comment by tfoote on 2014-07-03:
It takes time to initialize the ROS topics which is why you don't want it to be dynamically created every time. The recommended pattern is to make the broadcaster a member of a class.
Comment by emacsd on 2014-07-03:
@tfoote;
Thank you very much! I cannot believe it that I didn't think about the initialization time. Thanks again and I really appreciate your answer. I spent so much time to figure it out.

