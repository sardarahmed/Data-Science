Q:

How to make roscd go to ~/catkin_ws/devel instead of /opt/ros/kinetic?

I have sourced the setup.bash in the devel folder of catkin_ws but still the roscd command takes to /opt/ros/kinetic
On env | grep ROS, the output is:
ROS_ROOT=/opt/ros/kinetic/
ROS_PACKAGE_PATH=/home/username/catkin_ws/src:/opt/ros/kinetic/share
ROS_MASTER_URI=http://localhost:11311
ROS_VERSION=1
ROS_HOSTNAME=localhost
ROSLISP_PACKAGE_DIRECTORIES=
ROS_DISTRO=kinetic
ROS_ETC_DIR=/opt/ros/kinetic/etc/ros

Originally posted by hc on ROS Answers with karma: 114 on 2018-03-28
Post score: 0

Original comments
Comment by Tim Stadtmann on 2018-03-28:
Just to make sure: did you only add the source /home/username/catkin_ws/devel/setup.bash line to your .bashrc, or did you actually source setup.bash/open up a new terminal after adding the line?
Comment by hc on 2018-03-28:
I added it to .bashrc as well. And then sourced it through terminal also.
Comment by hc on 2018-03-28:\
source /opt/ros/kinetic/setup.bash
source ~/catkin_ws/devel/setup.bash
export ROS_HOSTNAME=localhost 
export ROS_MASTER_URI=http://localhost:11311
export ROS_ROOT=/opt/ros/kinetic/
export ROS_PACKAGE_PATH=/home/username/catkin_ws/src:${ROS_PACKAGE_PATH}

A:

So, after reading @SimonDahrs's answer, I checked the source (sorry, couldn't find it in the docs) out and saw that roscd checks two different environment variables: ROS_WORKSPACE and CMAKE_PREFIX_PATH. (Unless I'm missing something, this is basically how it works.) First, roscd checks if ROS_WORKSPACE is set and cds to that location if it is set and returns. If ROS_WORKSPACE isn't set, it checks if CMAKE_PREFIX_PATH is set and iterates through each path and the first path that contains a .catkin directory  is cded to. What does this mean?
Each time you source a ROS setup.bash (or equivalent) the CMAKE_PREFIX_PATH is changed and to be the workspace that the setup.bash file resides in. So, if you want to the default path of roscd either set ROS_WORKSPACE to your desired path, or source the setup.bash file from the workspace that you want to have as the default path.

Originally posted by jayess with karma: 6155 on 2020-02-04
This answer was ACCEPTED on the original site
Post score: 2

