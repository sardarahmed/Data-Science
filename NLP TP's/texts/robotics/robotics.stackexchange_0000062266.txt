Q:

Buildfarm issues with shared libraries

Hi all,
I just decided to release for indigo a package that I had working for hydro and could not solve a problem with an external shared library. My package is avt_vimba_camera, a driver for Allied Vision Technologies cameras using ethernet (mainly).
For that I need to use AVT SDK called VIMBA. In my package, I have VIMBA libraries and I "find_library" them from the CMakeLists.txt, who checks for the appropiate architecture (32 vs 64 bit).
The package itself compiles on my machine and on another machine with no issue at all, but on jenkins, the library cannot be found (example).
What is the difference on these builfarms that cause the library to be "NOTFOUND"?

Originally posted by Miquel Massot on ROS Answers with karma: 1471 on 2014-09-01
Post score: 1

A:

Each job on the build farm starts with a "fresh" image which does not have any packages installed. Then it clones your repo and uses the information in the package.xml files to install declared dependencies.
I don't see any reference to the SDK in your package.xml (https://github.com/srv/avt_vimba_camera/blob/7295168f7c3465cc9a864640e8366f87663b56d3/package.xml). That might be a reason why the build farm does not install it and therefore CMake can't find the library.
On your development machine you will have the SDK installed and therefore the library can be found.

Originally posted by Dirk Thomas with karma: 16276 on 2014-09-01
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by Miquel Massot on 2014-09-02:
It is in lib/{32,64}bit -> https://github.com/srv/avt_vimba_camera/tree/indigo/lib/32bit
This SDK has to be manually installed, that's why I unziped in lib/ and in include/ so that my executables can find it.
Comment by Dirk Thomas on 2014-09-02:
Nothing tries to search libraries in your sources lib folder for libraries. Also you don't install those libraries which means they would not even be part of the Debian package. May be on your development machine you have the libraries additionally in a different location?

