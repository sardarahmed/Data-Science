Q:

How to write a callback function for Int8Multiarray messages subscription

I wrote a callback function for subscription for a int8Multiarray type array:
void arrayCallback(const std_msgs::Int8MultiArray::ConstPtr& array)
{
    int i = 0;
    int* p = array->data;
    for (i = 0; i < 10; i++)
    {
        std::cout << array[i] << std::endl;
    }
    return;
}

However, I cannot build the source code with this callback (I am positive that this is the only place that is causing error). The error in the prompt is:
/home/turtlebot/test2/src/GraphSub.cpp: In function ‘void arrayCallback(const boost::shared_ptr<const std_msgs::Int8MultiArray_<std::allocator<void> > >&)’:
  /home/turtlebot/test2/src/GraphSub.cpp:12: error: cannot convert ‘const std::vector<signed char, std::allocator<signed char> >’ to ‘int*’ in initialization
  /home/turtlebot/test2/src/GraphSub.cpp:15: error: no match for ‘operator[]’ in ‘array[i]’

Could anyone help me to eyeball the error?

Originally posted by Bholms on ROS Answers with karma: 83 on 2013-07-25
Post score: 0

A:

Bear in mind that array->data is a std:vector, not a c++ array, so you can't assign it to a int*.
And to access the elements in the vector inside the loop you need to do:
array->data[i]

Originally posted by toniOliver with karma: 159 on 2013-07-25
This answer was ACCEPTED on the original site
Post score: 2

