Q:

How to pass constants using a .idl file directly?

I'm using ros2 eloquent and trying to write a .idl message directly so that it could be compatible with Fast-DDS; I'm trying to pass constants in the .idl file. The file I wrote looks like
module package_name{
    module idl {
        struct exmaple_msg{
            // constants
           uint32 CONSTANT = 0;
       };
   };
};

I failed to pass it through rosidl_generate_interfaces; Could you give an correct syntax to write it and how to use it later ?

Originally posted by Jeremy_z on ROS Answers with karma: 3 on 2020-07-08
Post score: 0

Original comments
Comment by Dirk Thomas on 2020-07-10:
I would suggest to create a .msg file with just a constant and after building the package look at / copy the generated .idl file.

A:

Have a look under Constants of this link https://mhanckow.students.wmi.amu.edu.pl/corba/IDL.html#281057

I think you have to use const before the constant like in C++.
Also this is an example of what rosidl_generate_interfaces generates:
ROS2 ConstTest.msg:
uint8 CONST1=1
uint8 CONST2=2
uint8 CONST3=3

uint8 data

ConstTest.idl:
module package_name {
  module msg {
    module ConstTest_Constants {
      const uint8 FAILSAFE_MODE1 = 1;
      const uint8 FAILSAFE_MODE2 = 2;
      const uint8 FAILSAFE_MODE3 = 3;
    };
    struct ConstTest {
      uint8 data;
    };
  };
};

Originally posted by MrCheesecake with karma: 272 on 2020-07-16
This answer was ACCEPTED on the original site
Post score: 1

