Q:

How to extract data from *.bag?

How to extract data from *.bag?
I recorded my odomerty and laser data using rosbag.
I want to extract (specific) data stream(text format) from recorded bagfiles.
(time, step, odometry[x,y,...], laser data, ...)
Becuase my unfinshied project are programed by matlab.
Question.

How to extract data from *.bag? (using matlab, C/C++ or ROS API...)

Originally posted by Changhyun Jun on ROS Answers with karma: 231 on 2011-02-16
Post score: 23

Original comments
Comment by mmwise on 2011-02-17:
when you see an answer you like, mark it as an accepted answer
Comment by RB on 2013-10-27:
Ok, is it possible to extract the contents of the bag file time, step, odometry[x,y..] and write our own customize code in cpp or java to move the robot through particular location of the map. Does we need to create the package with our customize code? How to combine all in built packages of ros and our own package?
Comment by mariakatosvich on 2016-09-09:
The script worked well for me, but I didn't test for a bunch of different bags. I'd imagine it wouldn't work if the bag contains data of a type that is not just a simple number
Comment by Ayush Sharma on 2017-03-12:
@changhyun, did you find the relevant solution? I am also trying to retrieve the odom data in terms of each step , data and all. The below "highlighted" answer is not giving me the required output. Did you find the solution? Kindly help

A:

One more tip:
For simple message formats, you can convert directly to CSV from the command line:
rostopic echo -b file.bag -p /topic

This won't work well if your bag file contains arrays/images/point clouds/etc... as it renders the entire message to text.

Originally posted by kwc with karma: 12244 on 2011-02-17
This answer was ACCEPTED on the original site
Post score: 34

Original comments
Comment by AndyZe on 2015-08-22:
This is the best answer I've found. Add a carat to save the text from terminal to txt--
rostopic echo -b file.bag -p /topic > data.txt

Comment by pkpp1233 on 2016-10-16:
How might this work if you're trying to extract both structured data into a CSV and images at the same time?
Comment by Ayush Sharma on 2017-03-12:
I am getting a blank txt file after implementing the following command "rostopic echo -b file.bag -p /topic > data.txt" and i am not able to get any output with the command "rostopic echo -b file.bag -p /topic".
Comment by jescasany on 2017-03-13:
Neither I get anything from those commands
Comment by Ayush Sharma on 2017-03-13:
Right @jescasany. Though i can view the "bag" data on "rqt", still the above commands are showing no output. Kindly check my question related to this.
Comment by mariakatosvich on 2017-03-14:
I tried the "rostopic echo -b file.bag -p /topic > data.txt" but I am getting a blank txt file " and i am not able to observe any output with the command "rostopic echo -b file.bag -p /topic.
Comment by Ayush Sharma on 2017-03-14:
If this solution has been highlighted as a correct answer, then there must a way to resolve this issue. Probably the solution provider can help u sin this regard.
But i was able to view the bag data via the "rqt" command. Use the commands "rqt" and open the bag file, you will get the whole data.
Comment by mike.min on 2018-01-17:
Thanks, " rostopic echo -b file.bag -p /topic > data.txt " works for me. Do you know where i can find the command for more about the command. For example, could i add other suffix instead of -p or -b?
Comment by AndyZe on 2018-01-17:
Yep, just do rostopic echo -h
Comment by godgang4885 on 2019-01-23:
just do not write /topic down. should write like /camera/camera_raw

