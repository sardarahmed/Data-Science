Q:

Errors using sicktoolbox_wrapper on Powerbot

I'm having an issue using sicktoolbox_wrapper on the MobileRobots Powerbot.  I've looked through the related threads but my issue appears to be a bit different.  For reference, these are the threads I'm referring to:
1) sicklms failed to initialize!
2) SICK laser driver fails to start after initialization and handshake?
3) Unable to get data from sick laser on Pioneer
The third seems most promising since it appears to be an issue related to MobileRobots and a solution for the Pioneer was found by adding a delay into the source code.  I also read the information in the link Abhijit provided regarding the laser integration board.
Since I'm working with the Powerbot, there is in fact a switch on the side of the robot that must be turned on prior to using the laser.  I did so and gave it quite a bit of time to warm up, with all the lights green etc.  I have experienced the same issue others have addressed in the threads above, however, I'm not always observing the same output.  The weird thing is I'm not doing anything different each time.  For instance, one attempt will result in an output similar to thread 1) and 3):
 usr@powerbot:~$ rosrun sicktoolbox_wrapper sicklms
*** Attempting to initialize the Sick LMS...
Attempting to open device @ /dev/ttyUSB0

SickLMS::_setTermSpeed: ioctl() failed while trying to get serial port info!
NOTE: This is normal when connected via USB!
SickLMS::_setTerminalBaud: ioctl() failed while trying to set serial port info!
NOTE: This is normal when connected via USB!
Device opened!
Attempting to start buffer monitor...
Buffer monitor started!
Attempting to set requested baud rate...
A Timeout Occurred!  2 tries remaining
A Timeout Occurred!  1 tries remaining
A Timeout Occurred - SickLIDAR::_sendMessageAndGetReply: Attempted max number of tries w/o success!
Failed to set requested baud rate...
Attempting to detect LMS baud rate...
Checking 19200bps...
SickLMS::_setTermSpeed: ioctl() failed while trying to get serial port info!
NOTE: This is normal when connected via USB!
SickLMS::_setTerminalBaud: ioctl() failed while trying to set serial port info!
NOTE: This is normal when connected via USB!
A Timeout Occurred!  2 tries remaining
A Timeout Occurred!  1 tries remaining
A Timeout Occurred - SickLIDAR::_sendMessageAndGetReply: Attempted max number of tries w/o success!
Checking 38400bps...
SickLMS::_setTermSpeed: ioctl() fThe other platform is simply a laptop running Natty and ROS Diamondback.  I used an identical laser to that connected to the PowerBot.  I attempted this with two different serial-to-USB converters: FTDI FT232R and Prolific PL2303 both with and without a null modem cable. ailed while trying to get serial port info!
NOTE: This is normal when connected via USB!
SickLMS::_setTerminalBaud: ioctl() failed while trying to set serial port info!
NOTE: This is normal when connected via USB!
A Timeout Occurred!  2 tries remaining
A Timeout Occurred!  1 tries remaining
A Timeout Occurred - SickLIDAR::_sendMessageAndGetReply: Attempted max number of tries w/o success!
Checking 500Kbps...
ERROR: I/O exception - SickLMS::_setTerminalBaud: ioctl() failed!
ERROR: I/O exception - SickLMS::_setTerminalBaud: ioctl() failed!
ERROR: I/O exception - SickLMS::_setTerminalBaud: ioctl() failed!
[ERROR] [1323229778.547778107]: Initialize failed! are you using the correct device path?
ERROR: Sick thread exception - SickBufferMonitor::AcquireDataStream: pthread_mutex_lock() failed!
ERROR: Sick thread exception - SickBufferMonitor::AcquireDataStream: pthread_mutex_lock() failed!
...
ERROR: Sick thread exception - SickBufferMonitor::AcquireDataStream: pthread_mutex_lock() failed!
ERROR: Sick thread exception - SickBufferMonitor::AcquireDataStream: pthread_mutex_lock() failed!
ERROR: Sick thread exception - SickBufferMonitor::AcquireDataStream: pthread_mutex_lock() failed!

Running the same command will then sometimes yield the next error, which is more similar to thread 2). After connecting at 38400 baud and the data stream starts, I begin getting the following warniThe other platform is simply a laptop running Natty and ROS Diamondback.  I used an identical laser to that connected to the PowerBot.  I attempted this with two different serial-to-USB converters: FTDI FT232R and Prolific PL2303 both with and without a null modem cable. ng which repeats many times:
 [ WARN] [1323229374.089444553]: A scan was probably missed. The last scan was 0.181478 seconds ago.
[ WARN] [1323229374.193561279]: A scan was probably missed. The last scan was 0.104158 seconds ago.
[ WARN] [1323229374.300250567]: A scan was probably missed. The last scan was 0.106689 seconds ago.
[ WARN] [1323229380.277661731]: A scan was probably missed. The last scan was 0.109171 seconds ago.
[ WARN] [1323229380.385173980]: The other platform is simply a laptop running Natty and ROS Diamondback.  I used an identical laser to that connected to the PowerBot.  I attempted this with two different serial-to-USB converters: FTDI FT232R and Prolific PL2303 both with and without a null modem cable. A scan was probably missed. The last scan was 0.10751 seconds ago.
[ WARN] [1323229380.488918620]: A scan was probably missed. The last scan was 0.103742 seconds ago.

This repeats until it finally crashes:
 [ERROR] [1323229381.489953672]: woah! error!
terminate called after throwing The other platform is simply a laptop running Natty and ROS Diamondback.  I used an identical laser to that connected to the PowerBot.  I attempted this with two different serial-to-USB converters: FTDI FT232R and Prolific PL2303 both with and without a null modem cable. an instance of 'SickToolbox::SickThreadException'
Aborted

I am using Diamondback on Lucid and I obtained sicktoolbox_wrapper by installing the laser_drivers stack using precompiled binaries (apt-get install).  I'm able to get the laser to work using Player so I've pretty much ruled out a hardware issue.  If anyone has any suggestions I'm open to them.
The other platform is simply a laptop running Natty and ROS Diamondback.  I used an identical laser to that connected to the PowerBot.  I attempted this with two different serial-to-USB converters: FTDI FT232R and Prolific PL2303 both with and without a null modem cable. 
UPDATE: 3-6-2012
I've revisited this issue and have it so I'm getting results that are consistently the same.
 usr@powerbot:~$ rosrun sicktoolbox_wrapper sicklms
*** Attempting to initialize the Sick LMS...
Attempting to open device @ /dev/ttyUSB0

SickLMS::_setTermSpeed: ioctl() failed while trying to get serial port info!
NOTE: This is normal when connected via USB!
SickLMS::_setTerminalBaud: ioctl() failed while trying to set serial port info!
NOTE: This is normal when connected via USB!
Device opened!
Attempting to start buffer monitor...
Buffer monitor started!
Attempting to set requested baud rate...
SickLMS::_setTermSpeed: ioctl() failed while trying to get serial port info!
NOTE: This is normal when connected via USB!
SickLMS::_setTerminalBaud: ioctl() failed while trying to set serial port info!
NOTE: This is normal when connected via USB!
Operating @ 38400bps
Attempting to sync driver...
Driver synchronized!
*** Init. complete: Sick LMS is online and ready!
Sick Type: Sick LMS 200-30106
Scan Angle: 180 (deg)
Scan Resolution: 0.5 (deg)
Measuring Mode: 8m/80m; fields A,B,Dazzle
Measuring Units: Centimeters (cm)
[ INFO] [1331088809.144384305]: Setting variant to (180, 0.500000)
Requesting partial scan data stream...
Data stream started!
[ WARN] [1331088809.405263646]: A scan was probably missed. The last scan was 0.182131 seconds ago.
[ WARN] [1331088809.508332610]: A scan was probably missed. The last scan was 0.103121 seconds ago.
[ WARN] [1331088809.616449798]: A scan was probably missed. The last scan was 0.108119 seconds ago.
[ WARN] [1331088809.724771678]: A scan was probably missed. The last scan was 0.108322 seconds ago.
[ WARN] [1331088809.829450494]: A scan was probably missed. The last scan was 0.104679 seconds ago.
[ WARN] [1331088809.937633610]: A scan was probably missed. The last scan was 0.108182 seconds ago.
[ WARN] [1331088810.044203805]: A scan was probably missed. The last scan was 0.106572 seconds ago.
[ WARN] [1331088810.148826941]: A scan was probably missed. The last scan was 0.104622 seconds ago.
[ WARN] [1331088810.256397882]: A scan was probably missed. The last scan was 0.107574 seconds ago.
[ WARN] [1331088810.365022938]: A scan was probably missed. The last scan was 0.108625 seconds ago.
[ WARN] [1331088810.468307733]: A scan was probably missed. The last scan was 0.103283 seconds ago.
[ WARN] [1331088810.577175118]: A scan was probably missed. The last scan was 0.108858 seconds ago.
[ WARN] [1331088810.685736304]: A scan was probably missed. The last scan was 0.10857 seconds ago.
[ WARN] [1331088810.788993687]: A scan was probably missed. The last scan was 0.103259 seconds ago.
^C[ WARN] [1331088810.897225808]: A scan was probably missed. The last scan was 0.108228 seconds ago.
[ WARN] [1331088811.005801265]: A scan was probably missed. The last scan was 0.108568 seconds ago.
*** Attempting to uninitialize the Sick LMS...

SickLMS::_setTermSpeed: ioctl() failed while trying to get serial port info!
NOTE: This is normal when connected via USB!
SickLMS::_setTerminalBaud: ioctl() failed while trying to set serial port info!
NOTE: This is normal when connected via USB!
Attempting to stop buffer monitor...
Buffer monitor stopped!
*** Uninit. complete - Sick LMS is now offline!

The stream of warnings continue until I CTRL+C to kill the process.  Also, I've let the process keep running and checked rviz, observing no data.
I downloaded sicktoolbox and compiled from source, adding the delay as indicated in thread 3) above.  This didn't affect the result except a delay (~30 sec. as expected) was noticed after sicklms attempts to open the device at /dev/ttyUSB0.
I've attempted the same tutorial with an identical SICK LMS-200 on a laptop computer running Diamondback on Natty.  Again, I tried using sicktoolbox directly from the laser-drivers stack and then one I compiled from source, adding the delay.  I also attempted this using two different serial-to-USB converters (FTDI FT232R and Prolific PL2303) both with and without null modem cables.  In all cases, the results are the same yielding a constant stream of missed scans.
I'm wondering if this could be related to the port settings somehow?  I accidentally attempted to run sicklms without first changing the permissions as directed in the tutorial and my results didn't change.

Originally posted by wkr101 on ROS Answers with karma: 63 on 2011-12-07
Post score: 1

A:

Errors related to "missed scans" in the 0.5 degree mode may be related to ticket #4673. Try setting your laser to 1 degree mode and see if the missed scan errors go away.
UPDATE:
See the resolution to the ticket. This "missed scans" functionality was removed, as it was not an accurate indication of scans being missed. Diagnostics were added to monitor the publishing rate of the driver.

Originally posted by Eric Perko with karma: 8406 on 2012-03-06
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by wkr101 on 2012-03-06:
Thanks for the feedback.  How would I go about changing the degree mode?
Comment by Eric Perko on 2012-03-07:
Set the ~resolution parameter (detailed here: http://www.ros.org/wiki/sicktoolbox_wrapper ) to 1.0 . You'd use a command like rosrun sicktoolbox_wrapper sicklms _resolution:=1.0 .
Comment by wkr101 on 2012-03-07:
Thanks.  I did in fact try that but alas, no luck on either platform.  Still getting the missed scans.
Comment by Eric Perko on 2012-04-05:
See the update to my answer regarding the solution to this problem.

