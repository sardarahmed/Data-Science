Q:

How do you send positions in joint_states topic if there's already default positions being published?

By default joint_state_publisher publishes a message with all joints and default positions to the joint_states topic. What is the proper way of doing this? How do you take the preexisting message in joint_states and modify it to publish your own positions?
This code below is in a loop, publishing positions to joint_states but because there are 2 messages for the same joint, the joint wants to be in 2 different positions simultaneously.
sensor_msgs::msg::JointState joint_state_msg;
joint_state_msg.header.stamp = this->get_clock()->now();
joint_state_msg.name.push_back("joint_name");
joint_state_msg.position.push_back(position);
joint_state_publisher_->publish(joint_state_msg);

Console output below: ros2 topic echo /joint_states
--- // the default joint_state_publisher is publishing
header:
  stamp:
    sec: 1704407222
    nanosec: 811950312
  frame_id: ''
name:
- joint_name
position:
- 0.0
velocity: []
effort: []
--- // position I want the joint to be
header:
  stamp:
    sec: 1704407222
    nanosec: 911955095
  frame_id: ''
name:
- joint_name
position:
- 0.156
velocity: []
effort: []
---

I thought setting the publish_default_positions to false would remove the entire message from sending but it only makes positions: [] instead of positions: - 0.0
Node(
    package="joint_state_publisher",
    executable='joint_state_publisher',
    name='joint_state_publisher',
    output='screen',
    parameters=[{'publish_default_positions': False}],
),

Reference

https://index.ros.org/p/joint_state_publisher/

A:

Don't start a joint_state_publisher node if you are already publishing to joint_states manually. That way there is only a single message being published to that topic.

