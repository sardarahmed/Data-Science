Q:

problem with loading gazebo in ros

Hi all,
I installed Ros hydro in ubuntu 12.04 and after that i followed the instructions for installing ros_gazebo package, during installation i didn't have any problem, but now when i want run
rosrun gazebo_ros gazebo, i've got following error
Gazebo multi-robot simulator, version 2.0.0
Copyright (C) 2013 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

Error [Plugin.hh:141] Failed to load plugin /opt/ros/hydro/lib/libgazebo_ros_paths_plugin.so: libgazebo_common.so.1: cannot open shared object file: No such file or directory
Error [Plugin.hh:141] Failed to load plugin /opt/ros/hydro/lib/libgazebo_ros_api_plugin.so: libgazebo_common.so.1: cannot open shared object file: No such file or directory
Msg Waiting for master
Gazebo multi-robot simulator, version 2.0.0
Copyright (C) 2013 Open Source Robotics Foundation.
Released under the Apache 2 License.
http://gazebosim.org

Error [Plugin.hh:141] Failed to load plugin /opt/ros/hydro/lib/libgazebo_ros_paths_plugin.so: libgazebo_common.so.1: cannot open shared object file: No such file or directory
Msg Waiting for master
Msg Connected to gazebo master @ http://127.0.0.1:11345
Msg Publicized address: 192.168.2.10
Msg Connected to gazebo master @ http://127.0.0.1:11345
Msg Publicized address: 192.168.2.10

also i searched for this library, and just i found these
/usr/lib/libgazebo_common.so.2 
/usr/lib/libgazebo_common.so

any one can help me?!

Originally posted by Vahid on Gazebo Answers with karma: 91 on 2013-10-08
Post score: 2

Original comments
Comment by Jose Luis Rivero on 2013-10-09:
Looks to me that you are mixing versions, probably gazebo-2.0.0 with current ros-hydro-gazebo-pkgs-2.3.1 linked against gazebo-1.x. How did you install gazebo and ros-hydro-gazebo-pkgs? Using packages, from source, ...?
Comment by Francisco Mart√≠n Rico on 2013-10-10:
I have used the pre-compiled packages for ROS, updated to the latest version of Hydro, and I get the same error. It seems clear that ros-hydro-gazebo* has been compiled for 1.9 (released on October 8th), but the current Gazebo version for pre-compiled packages is 2.0. For this reason it looks for libgazebo_common.so.1, instead of teh existing libgazebo_common.so.2. The options are: a) Install Gazebo 1.9 from sources, b) Wait for ros-hydro-gazebo* packages pre-compiled for Gazebo 2.0
Comment by Vahid on 2013-10-10:
Thank you, my problem is solved, the problem is just as you said, i install gazebo 1.9, but with synaptic not from source.
Comment by Jose Luis Rivero on 2013-10-10:
Thanks Francisco for providing more details. Let me add a couple of notes more: gazebo-2.0.0 deb package should prevent the installation into the same system that ros-hydro-gazebo-pkgs. You can run into the problem by installing from source. Another option to add to possible fixes: c) Follow partially this guide and install gazebo and gazeob-ros-pkgs from debs http://gazebosim.org/wiki/DRC/Install/3.0
Comment by AndrewT on 2013-10-17:
I believe I have this same problem, the solution is to uninstall Gazebo 2.0 and get 1.9, how do I uninstall 2.0?
Comment by Jose Luis Rivero on 2013-10-22:
Maybe this document can help with the issue.

A:

The problem was discussed and fixed in the comments of the question but just for the records let's clarify the problem and possible workaround:
Root of the problem is to install gazebo-2.0.0 with ros-hydro-gazebo-pkgs < 2.3.3 (specially installed from packages) into the same system since gazebo-2.0.0 breaks ABI/API.
III Update as of 17th Oct 2013: gazebo and ROS integration has been fixed in the official repositories. gazebo package will bring gazebo1.9 version while gazebo-current will install gazebo-2.0. Please read the release mail for full information.
IV Update as of 22nd Oct 2013: new document with fully instructions about Gazebo and ROS integration has been released.
To be sure you don't have the (now deprecated) gazebo package version 2.0.0 (it was in the repo during some hours) you could do an easy check by removing the package and back to install it:
   sudo apt-get update
   sudo apt-get remove gazebo
   sudo apt-get install gazebo

Thanks to DaveR for the hint.
Proper solution is gazebo team to release a new ros-hydro-gazebo-pkgs which will be compatible with current version of gazebo. This should happen during the following hours (moment of writing 10th Oct 2013). You can check this issue to know the work on this.
Possible workarounds:

Install gazebo-1.9 and ros-$distro-pkgs from debs. They are available at [gazebosim website](http://gazebosim.org/assets/distributions/) or you can follow the [drcsim-3.0 guide partially]() ignoring osrf-common, sandia-hand and drcsim.
 2. [Install gazebo-1.9](http://gazebosim.org/wiki/1.9/install) from source.
 3. Wait for the release of new packages from ros-$distro-gazebo-pkgs which should happen very soon.

Thanks to Francico Martin Rico for providing early information about workarounds.
Update as of 12th Oct 2013: hydro version of ros-gazebo-pkgs was accepted into ROS and packages were generated and uploaded to the shadow repository. It will take a while until they reach official ros stable repository. As a workaround, all the gazebo 2.3.3 packages are available from the shadow ros repository. Download them manually and use dkpg -i to install.
Update as of 14th Oct 2013: the 2.3.3 version of ros-gazebo-pkgs seems not to fix the issue at all, so my current recommendation, while working with ROS guys to fix the problem, would to install gazebo-1.9 (using workaround from points 1 or 2 of this answer).
II Update as of 14th Oct 2013: Nate emailed to gazebo mail list with some useful information. All our releasing processes are running, we hope to have the problem fixed in about 24 hours.

Originally posted by Jose Luis Rivero with karma: 1485 on 2013-10-10
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by RafBerkvens on 2013-10-11:
It's now over 13 hours since the issue you mentioned was closed. The problem still persists on my side. They stated that the solution should be available very soon. Did something go wrong?
Comment by Jose Luis Rivero on 2013-10-12:
Oh sorry, I should have provided more details. It was closed since there is nothing more to do by our side, just wait to the usual sync between ROS shadow repository and ROS stable to get the hydro version done. The 2.3.3 version is already in shadow. I will mail ros-release to see if we can get the sync happening soon. I will update my answer to provide testing on 2.3.3 meantime.
Comment by RafBerkvens on 2013-10-14:
With the proposed shadow ROS debians I can launch Gazebo again, but libgazebo_common.so.1 can still not be found. Are they still compiled against Gazebo 1.9, maybe? I have ros-hydro-gazebo-ros 2.3.3-0raring-20131010-2340-+0000 and gazebo/raring uptodate 2.0.0-1~raring (using apt-show-versions - other gazebo packages omitted due to character limit).
Comment by Jose Luis Rivero on 2013-10-14:
You are right, ldd displays links against versions gazebo-1.x. I'm in contact with the ROS developers to solve the problem as soon as possible. Meanwhile, I've updated the answer, Thanks for the feedback RafBerkvens.
Comment by DaveR on 2013-10-17:
Hi Jose, thanks for resolving these issues. Just wondering if it might be worth updating your answer to tell people that if they had previously installed the 2.0 version of the "gazebo" deb package then they will need to downgrade this package (e.g.,  from Synaptic select: Package --> Force Version). Cheers.
Comment by Jose Luis Rivero on 2013-10-18:
Thanks Dave, updated.

