Q:

camera1394 from launch

When I attempt to roslaunch a camera1394 node with a camera.yaml file, I get the following error:
[ERROR] [1308174837.695264371]: Exception parsing YAML camera calibration:
yaml-cpp: error at line 1, column 1: key not found: image_width
[ERROR] [1308174837.695298296]: Failed to parse camera calibration from file [/home/bradpowers/ros/ros_tutorials/cv_bench/params/ffmv.yaml]
This indicates that the camera is uncalibrated, which it is.  Unfortunately this means that I can't get color images working, despite having determined bayer patterns and the like.  At the moment, I don't want to have to calibrate the camera, but would like the color images out of the camera1394 node.  Is there a way to run the camera1394 node without the calibration portion?
Here is my launch file:
 <launch>

  <group ns="ffmv">
    <node pkg="camera1394" type="camera1394_node" name="ffmv">
      <param name="guid" value="00b09d0100a80b41" />
      <param name="video_mode" value="640x480_mono8" />
      <param name="iso_speed" value="400" />
      <param name="frame_rate" value="30" />
      <param name="bayer_pattern" value="rggb" />
      <param name="bayer_method" value="" />
      <param name="camera_info_url" value="file:///home/bradpowers/ros/ros_tutorials/cv_bench/params/ffmv.yaml" />
    </node>

    <node pkg="image_view" type="image_view" name="image_view" >
      <remap from="image" to="camera/image_raw"/>
    </node>
    
    <!-- Debugging Tools -->
    <node pkg="rxtools" type="rxconsole" name="rxconsole" />
    <node pkg="dynamic_reconfigure" type="reconfigure_gui"
          name="reconfigure_gui" />

  </group>

</launch>

And my corresponding ffmv.yaml file:
{auto_brightness: 2, auto_exposure: 2, auto_focus: 5, auto_gain: 2, auto_gamma: 0,
  auto_hue: 5, auto_iris: 5, auto_saturation: 5, auto_sharpness: 5, auto_shutter: 2,
  auto_white_balance: 3, auto_zoom: 5, bayer_method: '', bayer_pattern: rggb, binning_x: 0,
  binning_y: 0, brightness: 138.0, camera_info_url: '', exposure: 0.0, focus: 0.0,
  format7_color_coding: mono8, format7_packet_size: 0, frame_id: /camera, frame_rate: 60.0,
  gain: 12.041193008422852, gamma: 1.2000000000000002, guid: 00b09d0100a80b41, hue: 0.0,
  iris: 8.0, iso_speed: 400, reset_on_open: false, roi_height: 0, roi_width: 0, saturation: 1.0,
  sharpness: 1.0, shutter: 0.066243231296539307, use_ros_time: true, video_mode: 640x480_mono8,
  white_balance_BU: 512.0, white_balance_RV: 512.0, x_offset: 0, y_offset: 0, zoom: 0.0}

Thanks!

Originally posted by Bradley Powers on ROS Answers with karma: 422 on 2011-06-15
Post score: 2

Original comments
Comment by fabbro on 2018-03-23:
How do you get your ffmv.yaml file? Thanks

A:

Ok, problem solved.  Instead of using the camera1394 node as is, I'm using some of the nodelets that comprise it, namely the camera_nodelet_manager, camera1394_nodelet, and the image_proc_debayer nodelet.  Here's my .roslaunch file:
<launch>

  <!-- nodelet manager process -->
  <node pkg="nodelet" type="nodelet" name="camera_nodelet_manager"
        args="manager" />

  <!-- camera driver nodelet -->
  <node pkg="nodelet" type="nodelet" name="camera1394_nodelet"
        args="load camera1394/driver camera_nodelet_manager">
        <rosparam file="$(find cv_bench)/params/ffmv.yaml" />
  </node>
    
  <!-- Bayer color decoding -->
  <node pkg="nodelet" type="nodelet" name="image_proc_debayer"
        args="load image_proc/debayer camera_nodelet_manager">
    <param name="bayer_pattern" value="rggb" />
    <param name="bayer_method" value="" />
    <remap from="image_color" to="camera/image_color" />
    <remap from="image_mono" to="camera/image_mono" />
    <remap from="image_raw" to="camera/image_raw" />
  </node>

  <!-- Image View Node -->
  <node pkg="image_view" type="image_view" name="image_view" >
    <remap from="image" to="camera/image_color"/>
  </node>

</launch>

Originally posted by Bradley Powers with karma: 422 on 2011-06-16
This answer was ACCEPTED on the original site
Post score: 1

Original comments
Comment by Bradley Powers on 2011-06-16:
If someone could mark this as the correct answer, it'd be much appreciated, as I can't.

