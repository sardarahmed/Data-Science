Q:

ROS Melodic OpenCV xfeatures2d

On ROS Melodic ros-melodic-opencv3 doesn't exist anymore as e.g. on ROS Kinetic. Instead it is recommended to install libopencv-dev http://wiki.ros.org/melodic/Migration#opencv , however, this package does not contain xfeatures2d, neither does libopencv-contrib-dev.
How am I supposed do install xfeatures2d (SURF, SIFT, etc.)? Do I have to build OpenCV 3 now from source?

Originally posted by sam_123 on ROS Answers with karma: 70 on 2019-01-14
Post score: 2

A:

Since xfeatured2d module is not part of OpenCV anymore, but now included in opencv_contrib (https://github.com/opencv/opencv_contrib/tree/master/modules/xfeatures2d) you need to build and install from source and add those modules to the build configuration.
Summarizing what you can find in the following link (https://linuxize.com/post/how-to-install-opencv-on-ubuntu-18-04/).

Install the necessary packages
Clone the OpenCV source code and mostly important for you, clone the opencv_contrib repository
Set up the OpenCV build with CMake. Since xfeatured2d is a nonfree module, you will need to set OPENCV_ENABLE_NONFREE=ON. The whole command would look something like this:

cmake -D CMAKE_BUILD_TYPE=RELEASE \  
        -D CMAKE_INSTALL_PREFIX=/usr/local \  
        -D INSTALL_C_EXAMPLES=ON \  
        -D INSTALL_PYTHON_EXAMPLES=ON \  
        -D OPENCV_EXTRA_MODULES_PATH=~/opencv_build/opencv_contrib/modules \  
        -D BUILD_EXAMPLES=ON .. \  
        -D OPENCV_ENABLE_NONFREE=ON ..

Compile OpenCV
Install OpenCV

Originally posted by sapient84 with karma: 51 on 2019-01-28
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by sam_123 on 2019-02-07:
Yeah, I build now our own OpenCV Contrib debian packages. No idea why they didn't include all the contrib features into the "official" debian packages.
Comment by Elektron97 on 2021-07-13:
How I can add this module in build configuration?

