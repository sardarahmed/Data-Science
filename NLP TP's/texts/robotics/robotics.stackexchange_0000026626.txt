Q:

libgazebo_player not found

I have been using player/stage together with control code in c++ for a while and want to upgrade to player/gazebo. To get started I have followed the user guide.
When I run "gazebo pioneer2dx.world" gazebo starts up fine, but when I run "player gazebo.cfg" I get the following error messages:
error   : Failed to load plugin libgazebo_player.
error   : libtool reports error: file not found
error   : plugin search path: /home/ulrik/Work/thirdparty/gazebo_source/test:.:/usr/local/lib/
error   : failed to load plugin: libgazebo_player
error   : failed to parse config file gazebo.cfg driver blocks

Both player (version 3.1.0) and gazebo (version 1.9) are installed in /usr/local and libgazebo_player.so is located in /usr/local/lib. LD_LIBRARY_PATH is set to /usr/local/lib.
I installed player before gazebo and gazebo found player when installed. (No warnings or errors when running cmake.)
Any ideas what I am doing wrong?
Thanks,
Ulrik

Originally posted by Ulrik on Gazebo Answers with karma: 16 on 2013-08-01
Post score: 0

Original comments
Comment by gerkey on 2013-08-02:
What does ldd /usr/local/lib/libgazebo_player.so | grep "not found" give you?  Any unresolved library references?

A:

A colleague of mine managed to solve the problem. By running
LD_PRELOAD=/usr/local/lib/libgazebo_player.so player my_file.cfg

we got an error message that was kind of wierd but included "gazebo" and "util". So by adding "gazebo_util" to to "target_link_libraries" in gazebo/interfaces/player/CMakeList.txt and build again all works fine. (He got the idea from a similar problem described here: http://comments.gmane.org/gmane.science.robotics.playerstage.user/12204)
I guess
ldd /usr/local/lib/libgazebo_player.so | grep "not found"

as garkey proposed above would have pointed us in the same direction.
Anyway, I guess an update is needed for cmake to automatically include gazebo_util.

Originally posted by Ulrik with karma: 16 on 2013-08-05
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by nkoenig on 2013-08-08:
Here is a pull request to fix this problem: https://bitbucket.org/osrf/gazebo/pull-request/649/added-missing-lib-to-player-client-library/diff

