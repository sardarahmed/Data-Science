Q:

Very heavy platforms in Gazebo

Hi all!
I'm trying to simulate a very heavy four wheeled platform in Gazebo. My target weight is 45 tons, however, I actually achieve to simulate "stably" 35 tons. I followed ODE manuals and I tried to implement some of the tricks they give to simulate such platforms. For example, I split the whole platform into several smaller bodies that are connected with fixed joints, to reduce mass ratios between bodies. In addition, I also played with some parameters as Error Reduction Parameter (ERP) and Constraint Force Mixing (CFM). In general, if I don't make joints soft enough, Gazebo crashes. But when I simulate >35 tons platforms, joints are so soft that the platform penetrates the ground and cannot be used. I cannot find any good solution.
Does anybody have any clue about how to simulate those kinds of platforms? Which ODE parameters are crucial and how they should be fixed?
Thanks in advance!

Originally posted by gazkune on ROS Answers with karma: 219 on 2011-06-27
Post score: 3

Original comments
Comment by hsu on 2011-06-28:
is it possible for you to post the model and world files? thanks.

A:

OK. Thanks a lot! So, from my understanding of how ODE works, the problem here arises when the wheels and the ground plane make contact. ODE creates contact joints and the erp and cfm of those contact joints are calculated from the kp and kd of each of the bodies (wheels and ground plane) the way you explained before. Is this correct?
We can change the kp and kd of the ground plane directly in the world file. However, in the same world file we can also set cfm and erp values for the general case inside a physics:ode tag. How are those values related? How do those "general" cfm and erp influence the calculation of new contact joints' cfm and erp?
Besides, if I'm correct, I would also have to set the kp and kd values of the wheels. My wheels are modeled in a urdf file. As far as I know from the urdf documentation and tutorials, links do not have any kp and kd parameter. How could I set those parameters, if they have to be set?
Finally, fixing the kp and kd of the ground plane of the world file, I achieved a reasonable solution (kp=1.0e+9 and kd=1.0e+5) that seems to work fine. However, a "small" portion of the wheels are under the floor. Does it have any effect in the behavior of the platform or should I forget about it?
Just in case it might be useful for you, I put the links to download the files needed to make my platform work in Gazebo (I use dropbox for that purpose, since I didn't see here any other way to do it; hope it's fine for you):
http://dl.dropbox.com/u/23291294/platform_description/base.gazebo.xacro
http://dl.dropbox.com/u/23291294/platform_description/base.transmission.xacro
http://dl.dropbox.com/u/23291294/platform_description/experimental_base.urdf.xacro
http://dl.dropbox.com/u/23291294/platform_description/empty.world

Originally posted by gazkune with karma: 219 on 2011-06-29
This answer was ACCEPTED on the original site
Post score: 0

Original comments
Comment by ChickenSoup on 2014-04-16:
@gazkune could you please shed some light on implementing the joint controllers? I tried with the new ros_control controllers but the joint hardly moves (due to the heavy platform).
Comment by ChickenSoup on 2014-04-17:
well it turned out there was a problem with the limits of my joints. http://gazebosim.org/sdf/1.4.html#limit375 says with -1 limits are not enforced but it did not work. With an appropriate value now the joints are moving

