Q:

How to use txt file as a parameter to roslaunch file?

Hello All,
Background:
My idea is to receive not constant number of topics, to which I want to subscribe in my C code.
I decided to do it in the next way:
I will prepare a text file with the number and the name of the topics ---> convert it using launch file syntax to a string ---> parse the string in my C code ---> decide to which topics to subscribe.
In such a way I will only have to change the text file, while the launch file and the C code will not be changed.
Question:
I have written the next line of code in my launch file:
And I have placed my text file in the appropriate folder.
In my C file I do the next:
if ( nh.getParam("topics_list", topicsList) )
{
   ROS_INFO ("The contents of the file \"file_name.txt\" as a string are: %s\n",   
   topicsList); 
}
else
{
   ROS_INFO ("The topics list was not loaded succesfully. Aborting...\n");
   ros::shutdown();
}

It doesn´t work.

Is my way correct?
Why the above doesn´t work properly?

Thank you all in advance,
Felix.

Originally posted by Felix Tr on ROS Answers with karma: 378 on 2011-12-08
Post score: 1

A:

If the textfile really is a list, you can actually make that a list of parameters, e.g. write a yaml file like:
topic_list:
 - topic1
 - topic2
 - topic3

and read in a list of parameters where you loaded that yaml in your launch.
If I name the file test.yaml and launch this test.launch:
<launch>
    <rosparam command="load" file="test.yaml" />
</launch>

It loads the parameters fine.
This page gives a code snippet to read in lists of parameters.

Originally posted by dornhege with karma: 31395 on 2011-12-08
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by Felix Tr on 2011-12-13:
Hi Dornhege, I think your suggestion worked well, except the last part...I have some problems there: http://answers.ros.org/question/3297/how-to-convert-xmlrpcxmlrpcvalue-into-string. If you have any idea, please let me know. - Felix Tr (0 mins ago)
Comment by dornhege on 2011-12-13:
If you copy&paste the files I have in my post, it will work. The yaml file itself can look however you want in terms of structure, you can nest dictionaries and lists arbitrarily. The page you link to gives the yaml to rosparam, which should be equivalent than loading the same from a file.
Comment by Felix Tr on 2011-12-13:
Hi, thank you for your quick answer. I did it and I will try again, but how my "yaml" file should look like? In the same way you have suggested before? I have found a different suggestion here: "http://www.ros.org/wiki/roslaunch/XML/rosparam", do you have any comments about that
Comment by dornhege on 2011-12-13:
I've added a sample launch file. For me this works fine. For proper projects the yaml should obvisouly be referenced by a package name.
Comment by Felix Tr on 2011-12-13:
When I follow your instructions in this case, it doesn´t work. Are you sure, that the "yaml" file should be written that way?

