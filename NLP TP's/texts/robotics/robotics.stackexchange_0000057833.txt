Q:

Contributing to ROS - System Dependency

I'm trying to contribute a package to ROS. This is the error that jenkins.ros.org gave back:
/usr/bin/ld: cannot find -llapack
collect2: ld returned 1 exit status
I'm assuming that this is a dependency that needs to be added with a rosdep rule in the manifest. So, I've added the following line to package.xml:
Is this correct?

Originally posted by atp on ROS Answers with karma: 529 on 2014-03-11
Post score: 0

A:

If you have a package.xml, then you have a package using catkin. In this case, there is no "rosdep" key for the package.xml. You need to do
 <build_depend>liblapack-dev</build_depend>

This will make sure the package is installed when you go to build on the farm -- however, to actually get the linker flags, etc, you will need to probably add the following in your CMakeLists.txt, near the find_package(catkin):
find_package(LAPACK REQUIRED)

Then, when linking any executable, you'll probably need:
target_link_libraries(name_of_target ${catkin_LIBRARIES} ${LAPACK_LIBRARIES})

(Note: I've not used LAPACK with catkin, so the actual CMAKE may be a bit different, a quick google search shows the find_package call is probably right, but I'm guessing at the name of the _LIBRARIES portion actually exported by LAPACK... I'd check their documentation if things still don't link)

Originally posted by fergs with karma: 13902 on 2014-03-11
This answer was ACCEPTED on the original site
Post score: 2

Original comments
Comment by atp on 2014-03-12:
Cool. Thanks! That's what I was looking for. I already had the target_link_libraries in my CMakeLists file. This clarified it for me. Let's see how the building goes now on jenkins.

