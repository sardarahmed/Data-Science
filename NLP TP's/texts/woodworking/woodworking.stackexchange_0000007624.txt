Q:

Shelves inside cupboard, how to attach to legs?

My bathroom has a small cupboard/closet built into the wall, and I'd like to put some shelves inside it. Since I don't own the property, I'm thinking of building a free-standing set of shelves that fit exactly into the inside of the closet, so that I don't have to screw anything into the wall and can remove it easily when moving. 
The footprint of the inside looks like this

I used the white stone texture for walls. The top and sides are walls, bottom is the part where the door is.
The whole thing looks like this

Again white stone is the (inwards facing) walls, and the wood texture is where I want the shelves to be. As you can see, halfway up the opening there is a horizontal board (I think it's meant as a laundry chute, but I don't use it for that), so there are actually two openings into one connected space. Because of this, I won't be able to construct the whole thing and place it in: I'll have to partially construct it and then assemble inside of the cupboard.
I made a sketch combining various ideas I had for a general design

I'm assuming I'll be able to find some kind of 1/4" thick board for the shelves, and 3/8" x 3/8" square beams (this is the largest size I can easily hide behind the natural corners of the cupboard, but I can make it larger). I also left 1/16" space between individual pieces to make it easier to model. The shelves are meant to be about 12" high.
My question is, how do I actually attach the shelves to the posts in a way that it won't collapse easily? These will hold a few towels and toilet papers, so the combined load will be <10 lbs, but I'd like to support a more reasonably weight like 20-40 lbs. I am planning to use the cheapest wood I can find at Home Depot.
My first idea was to use diagonal trusses

This picture shows two variants: I could attach the two top ends to each other with a bracket, with the shelf resting on them. Or I could put a horizontal beam and attach the trusses with L-brackets. The problem with the beam is that I'm not sure how to handle the intersection of the two beams at the corner (not shown here) - for example, if I use L-brackets, wouldn't the screws from the two edges bump into each other? Also, I'm worried cutting the diagonal corners will be challenging, since I don't have much equipment (I don't have a mitre box, so I'd be freehanding a dremel). In this version, the vertical posts would probably be single uninterrupted ~24" long pieces.
Another idea I had was this diagonal beam assembly under the shelf

I would attach the two cross beams with T-brackets, and the ends of the beams would rest on top of the posts, I can put a dowel to keep the post from falling inwards. This should brace it enough and also support the shelf. I would still have to cut diagonal corners, but for this it doesn't have to be very precise and I could simply lay the crossbeams on the shelf itself and use it as a template/guide. I can't tell if this is actually a realistic construction, though. In this case the posts would actually be two pieces, so this would essentially be two separate single shelves stacked on top of each other.
I suppose another option is to just use back and side boards like in a freestanding shelf. That would probably be the easiest and most sturdy option, but I feel like since I'll be snug against 3 walls here, I might as well save some material.
What is the best solution in this case?

A:

Cut the legs to the desired height.  Attach the legs to the inside of the cabinet with double sided tape.  Set the shelf on top of the legs.  Repeat if you have additional shelves.
There are various grades of double sided tape.  I use a tape similar to Spectape ST501, available at Amazon and woodworking stores.  It is plenty strong, and cleans up easily with mineral spirits.

A:

As an alternative, instead of legs why not use solid plywood vertical panels at the two sides that extend from the back to at least the depth of the left side recess. You could then apply the stone texture to the vertical panels making the supports nearly invisible. If you - pre-drill the the shelves and legs you can easily screw the shelves to the legs with a screw driver once they are in place. Also I would recommend 1/2" plywood minimum to span the width of the shelf. 

A:

I wasn't satisfied with the answers I got, so I went back to the drawing board and tried to improve on my own designs.
When I went to the store I found out that the cheapest wood was actually not a square profile, but a 3/8" by 3/4", rectangle profile. It turned out that using this, there was a very nice and simple but effective design. Here's an exploded view:

Each pair of legs was connected with a short back-front beam, that was permanently attached, creating 2 U-shapes per shelf.

I attached them with screwed on L-brackets on the inside of the joint, which was a mistake because the screws are very difficult to position precisely - the legs bow inwards a bit as a result. I could have fixed it by adding a second beam between the legs at a lower level, but the shelves held up fine without it and I didn't want to bother.
For one set of legs, I messed up by putting the beam between rather than on top of the legs. It ended being supported solely by the screws of the L-bracket - good enough in my case, but ideally laying the beam on top is more structurally sound.
If I was doing this again, I would just use a butt joint by nailing or screwing the beam onto the leg from the top. Butt joints with nails are apparently considered bad, but in this case it's the easiest solution and I don't think the drawbacks would be an issue.

The short beams have a notch roughly in the middle where a long crossbeam sits.

The beam is not permanently attached, allowing me to easily assemble this inside the closet.
For maximum structural strength, the width of the notch should be such that the beam fits very snug (even requiring light hammering) and the depth should not exceed 50% of the beam. I broke both of these rules because ease of assembly was a higher priority than structural strength.
Alignment was made easy by laying the two U-shapes on top of each other, and marking both simultaneously. That way I didn't have to actually measure distance from the end.
Normally these notches are cut by setting a circular saw to a given depth, making many cuts, and then removing the "wafers" with a chisel. I had neither the saw nor the chisel, so I used a rotary tool (Dremel 3000) with a wood-cutting disc attachment (EZ544) to gradually whittle it off. It was a bit tedious but tolerable since I only had to do 4.

The shelf itself is cut from a 2' x 1' board according to the footprint of the space, but with a slight gap between its edges and the wall to permit easier assembly.

I used very cheap, thin plywood, because again low cost was a higher priority than structural strength. I cut it so that the grain would go back-front, which caused noticeable bowing under load when laid on top of the two U-shapes only, but the longer crossbeam supports it quite robustly.
I cut it inexpertly with a hand saw, which created many jagged splinters along the edge, but these were easily sanded.
The plywood was about 3/16" thick. Absolutely more than enough to support a bunch of towels and toilet paper rolls. I was skeptical of some comments suggesting at least 1/2", and having actually made it I am pretty convinced it would have been overkill and an unnecessary expense.

Overall, it was a very easy design to make, especially if I overlook the difficulties caused by inappropriate tools and my own inexperience. I made two shelf units and stacked them on top of each other. They ended up being stable (despite the many structural defects I mention above) and sturdy. I was originally planning to ask my wife to spray-paint it white to match the wall, but she didn't want to bother and it looked good enough raw so I left it as it is (the wood is actually a very light pine wood, even though I used a darker color in the pictures for contrast; the wall is plain white even though the picture shows a pattern, for the same reason).

