Q:

When is PCP prophylaxis necessary in non-HIV patients?

Pneumocystis jiroveci, the cause of  Pneumocystis pneumonia, was mainly a disease that was associated with HIV.  However, immunosuppression as a result of the treatment of various inflammatory diseases such as giant cell arteritis, granulomatosis with polyangiitis, and polymyositis also places patients at risk of PCP (pneumocystis carinii pneumonia).  And there is the additional complication that these patients may be on Methotrexate which is a folate antagonist as is cotrimoxazole exposing patients to significant risk of agranulocytosis when prescribed concurrently.
What are the recommendations for PCP prophylaxis in these conditions?

A:

Given the breadth of knowledge and clinical experience required to answer this question in full (and given that it is not typically something I deal with in my specialty), I will rely heavily on this UpToDate article.  To summarize:

Research involving non-HIV immunosuppressed patients mostly involve patients with cancer (especially receiving hematopoietic stem cell transplants [HCT] ) and solid organ transplant recipients.
There are no published guidelines for PCP prophylaxis among patients with rheumatologic diseases receiving immunosuppressive drugs.
A meta-analysis performed in 2014 including 13 trials and involving 1,412 patients suggests that PCP prophylaxis using trimethoprim-sulfamethoxazole (TMP/SMX), commonly referred to as Bactrim, is recommended in non-HIV immunosuppressed patients when the risk of PCP exceeds approximately 6%. The number-needed-to-treat (NNT) to prevent PCP was reported as 19 patients (95% CI 17 to 42).
Patient populations considered at great enough risk to necessitate PCP prophylaxis include patients:

receiving a glucocorticoid dose equivalent greater than or equal to 20mg daily for one month or longer with another concomitant cause of immunocompromise;
receiving temozolomide and radiotherapy, until recovery of lymphopenia;
with acute lymphoblastic leukemia (ALL);
receiving allogeneic HCT for as long as immunosuppressive therapy is given;
certain autologous HCT recipients;
solid organ transplant recipients, usually for 6-12 months following transplantation;
with certain primary immunodeficiencies (severe combined immunodeficiency [SCID], CD4 T-lymphocytopenia, hyper-IgM syndrome, etc.)
those receiving a purine analog in combination with cyclophosphamide.

The above bullet points are sourced from multiple studies; I have obviously not taken the time to perform a full literature review and suggest you dig further into those resources if you need more information.
In regards to the safety of using methotrexate with cotrimoxazole; this appears to be a very real but rare risk. I am not aware of any studies that bear out the extent of this risk or the incidence of co-toxicity, but the authors of the UpToDate article do suggest that low prophylactic doses of TMP-SMX should be safe in patients receiving MTX. Some published authors would disagree. I have personally discussed this risk with a rheumatologist in my hospital who agrees with the above statement. Obviously, this is only one doctor's experience and opinion.
If a patient can not take TMP-SMX or you would prefer to use a different agent due to the risk of myelosuppression, alternatives include dapsone or atovaquone 
The typical PCP prophylactic dose is usually 1 Bactrim double-strength tablet daily or three times per week.

