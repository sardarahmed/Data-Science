Q:

Ancient Chinese method to calculating $\pi$

I'm trying to understand the following passage from Boyer's and Merzbach's History of Mathematics:

The question I have is: how does the author derive that $w^2=2rv$?

A:

Let $R'$ be the reflection of $R$ on $O$ (see the picture below). Then $RR'$ is a diameter of the circle and therefore its length is $2r$.
The triangles $\triangle RQR'$ and $\triangle RMQ$ are similar, since both of them are right triangles and $\angle Q\hat RM=\angle Q\hat RR'$. So,$$\frac{\overline{RM}}{\overline{RQ}}=\frac{\overline{RQ}}{\overline{RR'}},$$but$$\frac{\overline{RM}}{\overline{RQ}}=\frac{\overline{RQ}}{\overline{RR'}}\iff\frac vw=\frac w{2r}\iff w^2=2rv.$$

